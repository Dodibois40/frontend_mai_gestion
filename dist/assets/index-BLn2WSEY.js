const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./html2canvas-D3Ol_Vns.js","./vendor-DSrtd7_7.js","./index.es-CNnC--Et.js","./router-Dwgs3xAE.js","./ui-B0dw-PoZ.js","./pdf-CD147RhL.js"])))=>i.map(i=>d[i]);
var xae=Object.defineProperty;var vae=(t,e,r)=>e in t?xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var tr=(t,e,r)=>vae(t,typeof e!="symbol"?e+"":e,r);import{r as y,a as hc,b as le,R as bae,v as Fg,g as ln,c as Yo,d as yae}from"./vendor-DSrtd7_7.js";import{u as Fr,L as Xi,a as J9,N as wae,O as Z9,b as Ka,R as jae,c as Tt,d as p2,B as Cae}from"./router-Dwgs3xAE.js";import{H as Nae,I as Gb,T as wu,C as ez,a as jh,R as Cm,D as ku,S as Nd,b as dh,c as _N,d as Sae,E as qb,e as ix,f as g2,g as y4,h as Il,i as tz,K as rz,A as cm,j as Eae,k as Bae,U as x2,X as Hh,l as J_,M as Kb,P as Z_,B as Tae,m as nz,n as eP,o as v2,p as tP,q as w4,V as Dae,r as jR,F as sz,s as rP,t as az,u as iz,v as oz,w as Km,x as Ym,y as Iae,z as Qi,L as lz,G as j4,J as Qd,N as fh,O as C4,Q as nP,W as Yb,Y as CR,Z as h0,_ as cz,$ as _ae,a0 as Qj,a1 as NR,a2 as uz,a3 as Pae,a4 as SR,a5 as dz,a6 as N4,a7 as S4,a8 as kae,a9 as Oae,aa as Fae,ab as Rae,ac as Mae,ad as Lae,ae as Uae,af as $ae}from"./ui-B0dw-PoZ.js";import{c as qt,P as Ze,i as Nm}from"./pdf-CD147RhL.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var fz={exports:{}},PN={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hae=y,Qae=Symbol.for("react.element"),zae=Symbol.for("react.fragment"),Vae=Object.prototype.hasOwnProperty,Wae=Hae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gae={key:!0,ref:!0,__self:!0,__source:!0};function hz(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Vae.call(e,n)&&!Gae.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Qae,type:t,key:i,ref:o,props:a,_owner:Wae.current}}PN.Fragment=zae;PN.jsx=hz;PN.jsxs=hz;fz.exports=PN;var s=fz.exports,E4={},ER=hc;E4.createRoot=ER.createRoot,E4.hydrateRoot=ER.hydrateRoot;var cu=function(){return cu=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},cu.apply(this,arguments)};function cw(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function qae(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var zj="right-scroll-bar-position",Vj="width-before-scroll-bar",Kae="with-scroll-bars-hidden",Yae="--removed-body-scroll-bar-size";function iB(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Xae(t,e){var r=y.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=e,r.facade}var Jae=typeof window<"u"?y.useLayoutEffect:y.useEffect,BR=new WeakMap;function Zae(t,e){var r=Xae(null,function(n){return t.forEach(function(a){return iB(a,n)})});return Jae(function(){var n=BR.get(r);if(n){var a=new Set(n),i=new Set(t),o=r.current;a.forEach(function(l){i.has(l)||iB(l,null)}),i.forEach(function(l){a.has(l)||iB(l,o)})}BR.set(r,t)},[t]),r}function eie(t){return t}function tie(t,e){e===void 0&&(e=eie);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function rie(t){t===void 0&&(t={});var e=tie(null);return e.options=cu({async:!0,ssr:!1},t),e}var Az=function(t){var e=t.sideCar,r=cw(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,cu({},r))};Az.isSideCarExport=!0;function nie(t,e){return t.useMedium(e),Az}var mz=rie(),oB=function(){},kN=y.forwardRef(function(t,e){var r=y.useRef(null),n=y.useState({onScrollCapture:oB,onWheelCapture:oB,onTouchMoveCapture:oB}),a=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,A=t.sideCar,h=t.noRelative,m=t.noIsolation,p=t.inert,g=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,b=t.gapMode,C=cw(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=A,w=Zae([r,e]),N=cu(cu({},C),a);return y.createElement(y.Fragment,null,d&&y.createElement(j,{sideCar:mz,removeScrollBar:u,shards:f,noRelative:h,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:b}),o?y.cloneElement(y.Children.only(l),cu(cu({},N),{ref:w})):y.createElement(v,cu({},N,{className:c,ref:w}),l))});kN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kN.classNames={fullWidth:Vj,zeroRight:zj};var sie=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aie(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=sie();return e&&t.setAttribute("nonce",e),t}function iie(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function oie(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var lie=function(){var t=0,e=null;return{add:function(r){t==0&&(e=aie())&&(iie(e,r),oie(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cie=function(){var t=lie();return function(e,r){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},pz=function(){var t=cie(),e=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return e},uie={left:0,top:0,right:0,gap:0},lB=function(t){return parseInt(t||"",10)||0},die=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[lB(r),lB(n),lB(a)]},fie=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uie;var e=die(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},hie=pz(),qg="data-scroll-locked",Aie=function(t,e,r,n){var a=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Kae,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(qg,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zj,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vj,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(zj," .").concat(zj,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Vj," .").concat(Vj,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(qg,`] {
    `).concat(Yae,": ").concat(l,`px;
  }
`)},TR=function(){var t=parseInt(document.body.getAttribute(qg)||"0",10);return isFinite(t)?t:0},mie=function(){y.useEffect(function(){return document.body.setAttribute(qg,(TR()+1).toString()),function(){var t=TR()-1;t<=0?document.body.removeAttribute(qg):document.body.setAttribute(qg,t.toString())}},[])},pie=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;mie();var i=y.useMemo(function(){return fie(a)},[a]);return y.createElement(hie,{styles:Aie(i,!e,a,r?"":"!important")})},B4=!1;if(typeof window<"u")try{var O1=Object.defineProperty({},"passive",{get:function(){return B4=!0,!0}});window.addEventListener("test",O1,O1),window.removeEventListener("test",O1,O1)}catch{B4=!1}var Ag=B4?{passive:!1}:!1,gie=function(t){return t.tagName==="TEXTAREA"},gz=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!gie(t)&&r[e]==="visible")},xie=function(t){return gz(t,"overflowY")},vie=function(t){return gz(t,"overflowX")},DR=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=xz(t,n);if(a){var i=vz(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},bie=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},yie=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},xz=function(t,e){return t==="v"?xie(e):vie(e)},vz=function(t,e){return t==="v"?bie(e):yie(e)},wie=function(t,e){return t==="h"&&e==="rtl"?-1:1},jie=function(t,e,r,n,a){var i=wie(t,window.getComputedStyle(e).direction),o=i*n,l=r.target,c=e.contains(l),u=!1,d=o>0,f=0,A=0;do{if(!l)break;var h=vz(t,l),m=h[0],p=h[1],g=h[2],x=p-g-i*m;(m||x)&&xz(t,l)&&(f+=x,A+=m);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&Math.abs(f)<1||!d&&Math.abs(A)<1)&&(u=!0),u},F1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},IR=function(t){return[t.deltaX,t.deltaY]},_R=function(t){return t&&"current"in t?t.current:t},Cie=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Nie=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Sie=0,mg=[];function Eie(t){var e=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(Sie++)[0],i=y.useState(pz)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=qae([t.lockRef.current],(t.shards||[]).map(_R),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=F1(p),v=r.current,b="deltaX"in p?p.deltaX:v[0]-x[0],C="deltaY"in p?p.deltaY:v[1]-x[1],j,w=p.target,N=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in p&&N==="h"&&w.type==="range")return!1;var E=DR(N,w);if(!E)return!0;if(E?j=N:(j=N==="v"?"h":"v",E=DR(N,w)),!E)return!1;if(!n.current&&"changedTouches"in p&&(b||C)&&(n.current=j),!j)return!0;var _=n.current||j;return jie(_,g,p,_==="h"?b:C)},[]),c=y.useCallback(function(p){var g=p;if(!(!mg.length||mg[mg.length-1]!==i)){var x="deltaY"in g?IR(g):F1(g),v=e.current.filter(function(j){return j.name===g.type&&(j.target===g.target||g.target===j.shadowParent)&&Cie(j.delta,x)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(_R).filter(Boolean).filter(function(j){return j.contains(g.target)}),C=b.length>0?l(g,b[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),u=y.useCallback(function(p,g,x,v){var b={name:p,delta:g,target:x,should:v,shadowParent:Bie(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),d=y.useCallback(function(p){r.current=F1(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,IR(p),p.target,l(p,t.lockRef.current))},[]),A=y.useCallback(function(p){u(p.type,F1(p),p.target,l(p,t.lockRef.current))},[]);y.useEffect(function(){return mg.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:A}),document.addEventListener("wheel",c,Ag),document.addEventListener("touchmove",c,Ag),document.addEventListener("touchstart",d,Ag),function(){mg=mg.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Ag),document.removeEventListener("touchmove",c,Ag),document.removeEventListener("touchstart",d,Ag)}},[]);var h=t.removeScrollBar,m=t.inert;return y.createElement(y.Fragment,null,m?y.createElement(i,{styles:Nie(a)}):null,h?y.createElement(pie,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Bie(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Tie=nie(mz,Eie);var b2=y.forwardRef(function(t,e){return y.createElement(kN,cu({},t,{ref:e,sideCar:Tie}))});b2.classNames=kN.classNames;function ua(t){return Object.keys(t)}function cB(t){return t&&typeof t=="object"&&!Array.isArray(t)}function sP(t,e){const r={...t},n=e;return cB(t)&&cB(e)&&Object.keys(e).forEach(a=>{cB(n[a])&&a in t?r[a]=sP(r[a],n[a]):r[a]=n[a]}),r}function Die(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Iie(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Xb(t){const e=Iie(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function uB(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function bz(t,{shouldScale:e=!1}={}){function r(n){if(n===0||n==="0")return`0${t}`;if(typeof n=="number"){const a=`${n/16}${t}`;return e?uB(a):a}if(typeof n=="string"){if(n===""||n.startsWith("calc(")||n.startsWith("clamp(")||n.includes("rgba("))return n;if(n.includes(","))return n.split(",").map(i=>r(i)).join(",");if(n.includes(" "))return n.split(" ").map(i=>r(i)).join(" ");if(n.includes(t))return e?uB(n):n;const a=n.replace("px","");if(!Number.isNaN(Number(a))){const i=`${Number(a)/16}${t}`;return e?uB(i):i}}return n}return r}const vt=bz("rem",{shouldScale:!0}),PR=bz("em");function Qh(t){return Object.keys(t).reduce((e,r)=>(t[r]!==void 0&&(e[r]=t[r]),e),{})}function yz(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(n=>e.test(n))}return!1}function rf(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==y.Fragment:!1}function so(t){const e=y.createContext(null);return[({children:a,value:i})=>s.jsx(e.Provider,{value:i,children:a}),()=>{const a=y.useContext(e);if(a===null)throw new Error(t);return a}]}function uw(t=null){const e=y.createContext(t);return[({children:a,value:i})=>s.jsx(e.Provider,{value:i,children:a}),()=>y.useContext(e)]}function kR(t,e){return r=>{if(typeof r!="string"||r.trim().length===0)throw new Error(e);return`${t}-${r}`}}function y2(t,e){let r=t;for(;(r=r.parentElement)&&!r.matches(e););return r}function _ie(t,e,r){for(let n=t-1;n>=0;n-=1)if(!e[n].disabled)return n;if(r){for(let n=e.length-1;n>-1;n-=1)if(!e[n].disabled)return n}return t}function Pie(t,e,r){for(let n=t+1;n<e.length;n+=1)if(!e[n].disabled)return n;if(r){for(let n=0;n<e.length;n+=1)if(!e[n].disabled)return n}return t}function kie(t,e,r){return y2(t,r)===y2(e,r)}function wz({parentSelector:t,siblingSelector:e,onKeyDown:r,loop:n=!0,activateOnFocus:a=!1,dir:i="rtl",orientation:o}){return l=>{var m;r==null||r(l);const c=Array.from(((m=y2(l.currentTarget,t))==null?void 0:m.querySelectorAll(e))||[]).filter(p=>kie(l.currentTarget,p,t)),u=c.findIndex(p=>l.currentTarget===p),d=Pie(u,c,n),f=_ie(u,c,n),A=i==="rtl"?f:d,h=i==="rtl"?d:f;switch(l.key){case"ArrowRight":{o==="horizontal"&&(l.stopPropagation(),l.preventDefault(),c[A].focus(),a&&c[A].click());break}case"ArrowLeft":{o==="horizontal"&&(l.stopPropagation(),l.preventDefault(),c[h].focus(),a&&c[h].click());break}case"ArrowUp":{o==="vertical"&&(l.stopPropagation(),l.preventDefault(),c[f].focus(),a&&c[f].click());break}case"ArrowDown":{o==="vertical"&&(l.stopPropagation(),l.preventDefault(),c[d].focus(),a&&c[d].click());break}case"Home":{l.stopPropagation(),l.preventDefault(),!c[0].disabled&&c[0].focus();break}case"End":{l.stopPropagation(),l.preventDefault();const p=c.length-1;!c[p].disabled&&c[p].focus();break}}}}const Oie={app:100,modal:200,popover:300,overlay:400,max:9999};function Ec(t){return Oie[t]}const T4=()=>{};function Fie(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||T4:r=>{var n;r.key==="Escape"&&(t(r),(n=e.onTrigger)==null||n.call(e))}}function vr(t,e="size",r=!0){if(t!==void 0)return yz(t)?r?vt(t):t:`var(--${e}-${t})`}function $s(t){return vr(t,"mantine-spacing")}function es(t){return t===void 0?"var(--mantine-radius-default)":vr(t,"mantine-radius")}function Ds(t){return vr(t,"mantine-font-size")}function Rie(t){return vr(t,"mantine-line-height",!1)}function aP(t){if(t)return vr(t,"mantine-shadow",!1)}function Co(t,e){return r=>{t==null||t(r),e==null||e(r)}}function Mie(t,e){return t in e?Xb(e[t]):Xb(t)}function iP(t,e){const r=t.map(n=>({value:n,px:Mie(n,e)}));return r.sort((n,a)=>n.px-a.px),r}function Ac(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function Lie(t,e,r){var n;return r?Array.from(((n=y2(r,e))==null?void 0:n.querySelectorAll(t))||[]).findIndex(a=>a===r):null}function Uie(){const[t,e]=y.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function ju(t,e,r){return e===void 0&&r===void 0?t:e!==void 0&&r===void 0?Math.max(t,e):Math.min(e===void 0&&r!==void 0?t:Math.max(t,e),r)}function w2(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}function $ie(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;const r=Object.keys(t),{length:n}=r;if(n!==Object.keys(e).length)return!1;for(let a=0;a<n;a+=1){const i=r[a];if(!(i in e)||t[i]!==e[i]&&!(Number.isNaN(t[i])&&Number.isNaN(e[i])))return!1}return!0}function WA(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function ON(t,e){const r=typeof e=="number"?e:e.delay,n=typeof e=="number"?!1:e.flushOnUnmount,a=WA(t),i=y.useRef(0),o=y.useRef(()=>{}),l=Object.assign(y.useCallback((...c)=>{window.clearTimeout(i.current);const u=()=>{i.current!==0&&(i.current=0,a(...c))};o.current=u,l.flush=u,i.current=window.setTimeout(u,r)},[a,r]),{flush:o.current});return y.useEffect(()=>()=>{window.clearTimeout(i.current),n&&l.flush()},[l,n]),l}const OR=["mousedown","touchstart"];function jz(t,e,r){const n=y.useRef(null);return y.useEffect(()=>{const a=i=>{const{target:o}=i??{};if(Array.isArray(r)){const l=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";r.every(u=>!!u&&!i.composedPath().includes(u))&&!l&&t()}else n.current&&!n.current.contains(o)&&t()};return(e||OR).forEach(i=>document.addEventListener(i,a)),()=>{(e||OR).forEach(i=>document.removeEventListener(i,a))}},[n,t,r]),n}function Hie(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function Qie(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function zie(t,e,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,a]=y.useState(r?e:Qie(t)),i=y.useRef(null);return y.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(t),a(i.current.matches),Hie(i.current,o=>a(o.matches))},[t]),n}const dw=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ou(t,e){const r=y.useRef(!1);y.useEffect(()=>()=>{r.current=!1},[]),y.useEffect(()=>{if(r.current)return t();r.current=!0},e)}function Cz({opened:t,shouldReturnFocus:e=!0}){const r=y.useRef(null),n=()=>{var a;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((a=r.current)==null||a.focus({preventScroll:!0}))};return Ou(()=>{let a=-1;const i=o=>{o.key==="Tab"&&window.clearTimeout(a)};return document.addEventListener("keydown",i),t?r.current=document.activeElement:e&&(a=window.setTimeout(n,10)),()=>{window.clearTimeout(a),document.removeEventListener("keydown",i)}},[t,e]),n}const Vie=/input|select|textarea|button|object/,Nz="a, input, select, textarea, button, object, [tabindex]";function Wie(t){return t.style.display==="none"}function Gie(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let r=t;for(;r&&!(r===document.body||r.nodeType===11);){if(Wie(r))return!1;r=r.parentNode}return!0}function Sz(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function D4(t){const e=t.nodeName.toLowerCase(),r=!Number.isNaN(Sz(t));return(Vie.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||r)&&Gie(t)}function Ez(t){const e=Sz(t);return(Number.isNaN(e)||e>=0)&&D4(t)}function qie(t){return Array.from(t.querySelectorAll(Nz)).filter(Ez)}function Kie(t,e){const r=qie(t);if(!r.length){e.preventDefault();return}const n=r[e.shiftKey?0:r.length-1],a=t.getRootNode();let i=n===a.activeElement||t===a.activeElement;const o=a.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(i=r.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===o.getAttribute("name")).includes(n)),!i)return;e.preventDefault();const c=r[e.shiftKey?r.length-1:0];c&&c.focus()}function Yie(t=!0){const e=y.useRef(null),r=a=>{let i=a.querySelector("[data-autofocus]");if(!i){const o=Array.from(a.querySelectorAll(Nz));i=o.find(Ez)||o.find(D4)||null,!i&&D4(a)&&(i=a)}i&&i.focus({preventScroll:!0})},n=y.useCallback(a=>{t&&a!==null&&e.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&r(a)}),e.current=a):e.current=null)},[t]);return y.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>r(e.current));const a=i=>{i.key==="Tab"&&e.current&&Kie(e.current,i)};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t]),n}const Xie=t=>(t+1)%1e6;function Jie(){const[,t]=y.useReducer(Xie,0);return t}const Zie=le.useId||(()=>{});function eoe(){const t=Zie();return t?`mantine-${t.replace(/:/g,"")}`:""}function Ll(t){const e=eoe(),[r,n]=y.useState(e);return dw(()=>{n(w2())},[]),typeof t=="string"?t:typeof window>"u"?e:r}function toe(t,e,r){y.useEffect(()=>(window.addEventListener(t,e,r),()=>window.removeEventListener(t,e,r)),[t,e])}function j2(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function roe(...t){const e=new Map;return r=>{if(t.forEach(n=>{const a=j2(n,r);a&&e.set(n,a)}),e.size>0)return()=>{t.forEach(n=>{const a=e.get(n);a?a():j2(n,null)}),e.clear()}}}function Zs(...t){return y.useCallback(roe(...t),t)}function noe(t,e,r="ltr"){const n=y.useRef(null),a=y.useRef(!1),i=y.useRef(!1),o=y.useRef(0),[l,c]=y.useState(!1);return y.useEffect(()=>{a.current=!0},[]),y.useEffect(()=>{const u=n.current,d=({x:b,y:C})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(a.current&&u){u.style.userSelect="none";const j=u.getBoundingClientRect();if(j.width&&j.height){const w=ju((b-j.left)/j.width,0,1);t({x:r==="ltr"?w:1-w,y:ju((C-j.top)/j.height,0,1)})}}})},f=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",v),document.addEventListener("touchend",m)},A=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",m)},h=()=>{!i.current&&a.current&&(i.current=!0,typeof(e==null?void 0:e.onScrubStart)=="function"&&e.onScrubStart(),c(!0),f())},m=()=>{i.current&&a.current&&(i.current=!1,c(!1),A(),setTimeout(()=>{typeof(e==null?void 0:e.onScrubEnd)=="function"&&e.onScrubEnd()},0))},p=b=>{h(),b.preventDefault(),g(b)},g=b=>d({x:b.clientX,y:b.clientY}),x=b=>{b.cancelable&&b.preventDefault(),h(),v(b)},v=b=>{b.cancelable&&b.preventDefault(),d({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return u==null||u.addEventListener("mousedown",p),u==null||u.addEventListener("touchstart",x,{passive:!1}),()=>{u&&(u.removeEventListener("mousedown",p),u.removeEventListener("touchstart",x))}},[r,t]),{ref:n,active:l}}function qa({value:t,defaultValue:e,finalValue:r,onChange:n=()=>{}}){const[a,i]=y.useState(e!==void 0?e:r),o=(l,...c)=>{i(l),n==null||n(l,...c)};return t!==void 0?[t,n,!0]:[a,o,!1]}function zf(t,e){const r=e-t+1;return Array.from({length:r},(n,a)=>a+t)}const R1="dots";function soe({total:t,siblings:e=1,boundaries:r=1,page:n,initialPage:a=1,onChange:i}){const o=Math.max(Math.trunc(t),0),[l,c]=qa({value:n,onChange:i,defaultValue:a,finalValue:a}),u=p=>{p<=0?c(1):p>o?c(o):c(p)},d=()=>u(l+1),f=()=>u(l-1),A=()=>u(1),h=()=>u(o);return{range:y.useMemo(()=>{if(e*2+3+r*2>=o)return zf(1,o);const g=Math.max(l-e,r),x=Math.min(l+e,o-r),v=g>r+2,b=x<o-(r+1);if(!v&&b){const C=e*2+r+2;return[...zf(1,C),R1,...zf(o-(r-1),o)]}if(v&&!b){const C=r+1+2*e;return[...zf(1,r),R1,...zf(o-C,o)]}return[...zf(1,r),R1,...zf(g,x),R1,...zf(o-r+1,o)]},[o,e,l]),active:l,setPage:u,next:d,previous:f,first:A,last:h}}function oP(t,e){return zie("(prefers-reduced-motion: reduce)",t,e)}function aoe(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r+=1)if(!$ie(t[r],e[r]))return!1;return!0}function ioe(t){const e=y.useRef([]),r=y.useRef(0);return aoe(e.current,t)||(e.current=t,r.current+=1),[r.current]}function ooe(t,e){y.useEffect(t,ioe(e))}function lP(t=!1,e){const{onOpen:r,onClose:n}={},[a,i]=y.useState(t),o=y.useCallback(()=>{i(u=>u||(r==null||r(),!0))},[r]),l=y.useCallback(()=>{i(u=>u&&(n==null||n(),!1))},[n]),c=y.useCallback(()=>{a?l():o()},[l,o,a]);return[a,{open:o,close:l,toggle:c}]}function loe(t,e,r={autoInvoke:!1}){const n=y.useRef(null),a=y.useCallback((...o)=>{n.current||(n.current=window.setTimeout(()=>{t(o),n.current=null},e))},[e]),i=y.useCallback(()=>{n.current&&(window.clearTimeout(n.current),n.current=null)},[]);return y.useEffect(()=>(r.autoInvoke&&a(),i),[i,a]),{start:a,clear:i}}function coe(t){const e=y.useRef(void 0);return y.useEffect(()=>{e.current=t},[t]),e.current}function uoe(t,e,r){const n=y.useRef(null),a=y.useRef(null);return y.useEffect(()=>{const i=typeof r=="function"?r():r;return(i||a.current)&&(n.current=new MutationObserver(t),n.current.observe(i||a.current,e)),()=>{var o;(o=n.current)==null||o.disconnect()}},[t,e]),a}function doe(){const[t,e]=y.useState(!1);return y.useEffect(()=>e(!0),[]),t}var foe={};function Bz(){return typeof process<"u"&&foe?"production":"development"}function FR(t,e){return e.length===0?t:e.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r)}function FN(t){var r;const e=le.version;return typeof le.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(r=t==null?void 0:t.props)==null?void 0:r.ref}const hoe={};function Aoe(t){const e={};return t.forEach(r=>{Object.entries(r).forEach(([n,a])=>{e[n]?e[n]=qt(e[n],a):e[n]=a})}),e}function RN({theme:t,classNames:e,props:r,stylesCtx:n}){const i=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,r,n):o||hoe);return Aoe(i)}function C2({theme:t,styles:e,props:r,stylesCtx:n}){return(Array.isArray(e)?e:[e]).reduce((i,o)=>typeof o=="function"?{...i,...o(t,r,n)}:{...i,...o},{})}const Tz=y.createContext(null);function zh(){const t=y.useContext(Tz);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function moe(){return zh().cssVariablesResolver}function poe(){return zh().classNamesPrefix}function cP(){return zh().getStyleNonce}function goe(){return zh().withStaticClasses}function xoe(){return zh().headless}function voe(){var t;return(t=zh().stylesTransform)==null?void 0:t.sx}function boe(){var t;return(t=zh().stylesTransform)==null?void 0:t.styles}function Dz(){return zh().env||"default"}function yoe(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function woe(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const r=parseInt(e,16),n=r>>16&255,a=r>>8&255,i=r&255;return{r:n,g:a,b:i,a:1}}function joe(t){const[e,r,n,a]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:r,b:n,a:a===void 0?1:a}}function Coe(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=t.match(e);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),a=parseInt(r[2],10)/100,i=parseInt(r[3],10)/100,o=r[5]?parseFloat(r[5]):void 0,l=(1-Math.abs(2*i-1))*a,c=n/60,u=l*(1-Math.abs(c%2-1)),d=i-l/2;let f,A,h;return c>=0&&c<1?(f=l,A=u,h=0):c>=1&&c<2?(f=u,A=l,h=0):c>=2&&c<3?(f=0,A=l,h=u):c>=3&&c<4?(f=0,A=u,h=l):c>=4&&c<5?(f=u,A=0,h=l):(f=l,A=0,h=u),{r:Math.round((f+d)*255),g:Math.round((A+d)*255),b:Math.round((h+d)*255),a:o||1}}function uP(t){return yoe(t)?woe(t):t.startsWith("rgb")?joe(t):t.startsWith("hsl")?Coe(t):{r:0,g:0,b:0,a:1}}function M1(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r,g:n,b:a,a:i}=uP(t),o=1-e,l=c=>Math.round(c*o);return`rgba(${l(r)}, ${l(n)}, ${l(a)}, ${i})`}function Jb(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function dB(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Noe(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Soe(t){if(t.startsWith("oklch("))return(Noe(t)||0)/100;const{r:e,g:r,b:n}=uP(t),a=e/255,i=r/255,o=n/255,l=dB(a),c=dB(i),u=dB(o);return .2126*l+.7152*c+.0722*u}function Iv(t,e=.179){return t.startsWith("var(")?!1:Soe(t)>e}function ox({color:t,theme:e,colorScheme:r}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:r==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Iv(r==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:r==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Iv(r==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Iv(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[n,a]=t.split("."),i=a?Number(a):void 0,o=n in e.colors;if(o){const l=i!==void 0?e.colors[n][i]:e.colors[n][Jb(e,r||"light")];return{color:n,value:l,shade:i,isThemeColor:o,isLight:Iv(l,e.luminanceThreshold),variable:a?`--mantine-color-${n}-${i}`:`--mantine-color-${n}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:Iv(t,e.luminanceThreshold),shade:i,variable:void 0}}function Is(t,e){const r=ox({color:t||e.primaryColor,theme:e});return r.variable?`var(${r.variable})`:t}function I4(t,e){const r={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},n=Is(r.from,e),a=Is(r.to,e);return`linear-gradient(${r.deg}deg, ${n} 0%, ${a} 100%)`}function au(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const i=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${i}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r,g:n,b:a}=uP(t);return`rgba(${r}, ${n}, ${a}, ${e})`}const pg=au,Eoe=({color:t,theme:e,variant:r,gradient:n,autoContrast:a})=>{const i=ox({color:t,theme:e}),o=typeof a=="boolean"?a:e.autoContrast;if(r==="filled"){const l=o&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:l,border:`${vt(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:l,border:`${vt(1)} solid transparent`}:{background:t,hover:M1(t,.1),color:l,border:`${vt(1)} solid transparent`}}if(r==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${vt(1)} solid transparent`};const l=e.colors[i.color][i.shade];return{background:au(l,.1),hover:au(l,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${vt(1)} solid transparent`}}return{background:au(t,.1),hover:au(t,.12),color:t,border:`${vt(1)} solid transparent`}}if(r==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${vt(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:au(e.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${vt(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:au(t,.05),color:t,border:`${vt(1)} solid ${t}`};if(r==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${vt(1)} solid transparent`};const l=e.colors[i.color][i.shade];return{background:"transparent",hover:au(l,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${vt(1)} solid transparent`}}return{background:"transparent",hover:au(t,.12),color:t,border:`${vt(1)} solid transparent`}}return r==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${vt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${vt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${vt(1)} solid transparent`}:r==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:M1(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${vt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:M1(e.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${vt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:M1(e.white,.01),color:t,border:`${vt(1)} solid transparent`}:r==="gradient"?{background:I4(n,e),hover:I4(n,e),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${vt(1)} solid var(--mantine-color-default-border)`}:{}},Boe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},RR="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",dP={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Boe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Eoe,autoContrast:!1,luminanceThreshold:.3,fontFamily:RR,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:RR,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:vt(34),lineHeight:"1.3"},h2:{fontSize:vt(26),lineHeight:"1.35"},h3:{fontSize:vt(22),lineHeight:"1.4"},h4:{fontSize:vt(18),lineHeight:"1.45"},h5:{fontSize:vt(16),lineHeight:"1.5"},h6:{fontSize:vt(14),lineHeight:"1.5"}}},fontSizes:{xs:vt(12),sm:vt(14),md:vt(16),lg:vt(18),xl:vt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:vt(2),sm:vt(4),md:vt(8),lg:vt(16),xl:vt(32)},spacing:{xs:vt(10),sm:vt(12),md:vt(16),lg:vt(20),xl:vt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${vt(1)} ${vt(3)} rgba(0, 0, 0, 0.05), 0 ${vt(1)} ${vt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${vt(1)} ${vt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${vt(10)} ${vt(15)} ${vt(-5)}, rgba(0, 0, 0, 0.04) 0 ${vt(7)} ${vt(7)} ${vt(-5)}`,md:`0 ${vt(1)} ${vt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${vt(20)} ${vt(25)} ${vt(-5)}, rgba(0, 0, 0, 0.04) 0 ${vt(10)} ${vt(10)} ${vt(-5)}`,lg:`0 ${vt(1)} ${vt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${vt(28)} ${vt(23)} ${vt(-7)}, rgba(0, 0, 0, 0.04) 0 ${vt(12)} ${vt(12)} ${vt(-7)}`,xl:`0 ${vt(1)} ${vt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${vt(36)} ${vt(28)} ${vt(-7)}, rgba(0, 0, 0, 0.04) 0 ${vt(17)} ${vt(17)} ${vt(-7)}`},other:{},components:{}};function MR(t){return t==="auto"||t==="dark"||t==="light"}function Toe({key:t="mantine-color-scheme-value"}={}){let e;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(t);return MR(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(t,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{e=n=>{n.storageArea===window.localStorage&&n.key===t&&MR(n.newValue)&&r(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const Doe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",LR="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function fB(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function UR(t){if(!(t.primaryColor in t.colors))throw new Error(Doe);if(typeof t.primaryShade=="object"&&(!fB(t.primaryShade.dark)||!fB(t.primaryShade.light)))throw new Error(LR);if(typeof t.primaryShade=="number"&&!fB(t.primaryShade))throw new Error(LR)}function Ioe(t,e){var n;if(!e)return UR(t),t;const r=sP(t,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=e.fontFamily),UR(r),r}const fP=y.createContext(null),_oe=()=>y.useContext(fP)||dP;function Qs(){const t=y.useContext(fP);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function Iz({theme:t,children:e,inherit:r=!0}){const n=_oe(),a=y.useMemo(()=>Ioe(r?n:dP,t),[t,n,r]);return s.jsx(fP.Provider,{value:a,children:e})}Iz.displayName="@mantine/core/MantineThemeProvider";function Poe(){const t=Qs(),e=cP(),r=ua(t.breakpoints).reduce((n,a)=>{const i=t.breakpoints[a].includes("px"),o=Xb(t.breakpoints[a]),l=i?`${o-.1}px`:PR(o-.1),c=i?`${o}px`:PR(o);return`${n}@media (max-width: ${l}) {.mantine-visible-from-${a} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${a} {display: none !important;}}`},"");return s.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:r}})}function hB(t){return Object.entries(t).map(([e,r])=>`${e}: ${r};`).join("")}function _v(t,e){return(Array.isArray(t)?t:[t]).reduce((n,a)=>`${a}{${n}}`,e)}function koe(t,e){const r=hB(t.variables),n=r?_v(e,r):"",a=hB(t.dark),i=hB(t.light),o=a?_v(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,a):"",l=i?_v(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,i):"";return`${n}${o}${l}`}function Xm({color:t,theme:e,autoContrast:r}){return(typeof r=="boolean"?r:e.autoContrast)&&ox({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function $R(t,e){return Xm({color:t.colors[t.primaryColor][Jb(t,e)],theme:t,autoContrast:null})}function L1({theme:t,color:e,colorScheme:r,name:n=e,withColorValues:a=!0}){if(!t.colors[e])return{};if(r==="light"){const l=Jb(t,"light"),c={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-filled)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${l===9?8:l+1})`,[`--mantine-color-${n}-light`]:pg(t.colors[e][l],.1),[`--mantine-color-${n}-light-hover`]:pg(t.colors[e][l],.12),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-outline-hover`]:pg(t.colors[e][l],.05)};return a?{[`--mantine-color-${n}-0`]:t.colors[e][0],[`--mantine-color-${n}-1`]:t.colors[e][1],[`--mantine-color-${n}-2`]:t.colors[e][2],[`--mantine-color-${n}-3`]:t.colors[e][3],[`--mantine-color-${n}-4`]:t.colors[e][4],[`--mantine-color-${n}-5`]:t.colors[e][5],[`--mantine-color-${n}-6`]:t.colors[e][6],[`--mantine-color-${n}-7`]:t.colors[e][7],[`--mantine-color-${n}-8`]:t.colors[e][8],[`--mantine-color-${n}-9`]:t.colors[e][9],...c}:c}const i=Jb(t,"dark"),o={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-4)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${i})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${i===9?8:i+1})`,[`--mantine-color-${n}-light`]:pg(t.colors[e][Math.max(0,i-2)],.15),[`--mantine-color-${n}-light-hover`]:pg(t.colors[e][Math.max(0,i-2)],.2),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${Math.max(i-5,0)})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${Math.max(i-4,0)})`,[`--mantine-color-${n}-outline-hover`]:pg(t.colors[e][Math.max(i-4,0)],.05)};return a?{[`--mantine-color-${n}-0`]:t.colors[e][0],[`--mantine-color-${n}-1`]:t.colors[e][1],[`--mantine-color-${n}-2`]:t.colors[e][2],[`--mantine-color-${n}-3`]:t.colors[e][3],[`--mantine-color-${n}-4`]:t.colors[e][4],[`--mantine-color-${n}-5`]:t.colors[e][5],[`--mantine-color-${n}-6`]:t.colors[e][6],[`--mantine-color-${n}-7`]:t.colors[e][7],[`--mantine-color-${n}-8`]:t.colors[e][8],[`--mantine-color-${n}-9`]:t.colors[e][9],...o}:o}function Ooe(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function gg(t,e,r){ua(e).forEach(n=>Object.assign(t,{[`--mantine-${r}-${n}`]:e[n]}))}const _z=t=>{const e=Jb(t,"light"),r=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:vt(t.defaultRadius),n={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":r,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":$R(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":$R(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};gg(n.variables,t.breakpoints,"breakpoint"),gg(n.variables,t.spacing,"spacing"),gg(n.variables,t.fontSizes,"font-size"),gg(n.variables,t.lineHeights,"line-height"),gg(n.variables,t.shadows,"shadow"),gg(n.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((i,o)=>{n.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${t.primaryColor}-${o})`}),ua(t.colors).forEach(i=>{const o=t.colors[i];if(Ooe(o)){Object.assign(n.light,L1({theme:t,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(n.dark,L1({theme:t,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((l,c)=>{n.variables[`--mantine-color-${i}-${c}`]=l}),Object.assign(n.light,L1({theme:t,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(n.dark,L1({theme:t,color:i,colorScheme:"dark",withColorValues:!1}))});const a=t.headings.sizes;return ua(a).forEach(i=>{n.variables[`--mantine-${i}-font-size`]=a[i].fontSize,n.variables[`--mantine-${i}-line-height`]=a[i].lineHeight,n.variables[`--mantine-${i}-font-weight`]=a[i].fontWeight||t.headings.fontWeight}),n};function Foe({theme:t,generator:e}){const r=_z(t),n=e==null?void 0:e(t);return n?sP(r,n):r}const AB=_z(dP);function Roe(t){const e={variables:{},light:{},dark:{}};return ua(t.variables).forEach(r=>{AB.variables[r]!==t.variables[r]&&(e.variables[r]=t.variables[r])}),ua(t.light).forEach(r=>{AB.light[r]!==t.light[r]&&(e.light[r]=t.light[r])}),ua(t.dark).forEach(r=>{AB.dark[r]!==t.dark[r]&&(e.dark[r]=t.dark[r])}),e}function Moe(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Pz({cssVariablesSelector:t,deduplicateCssVariables:e}){const r=Qs(),n=cP(),a=moe(),i=Foe({theme:r,generator:a}),o=t===":root"&&e,l=o?Roe(i):i,c=koe(l,t);return c?s.jsx("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${c}${o?"":Moe(t)}`}}):null}Pz.displayName="@mantine/CssVariables";function Loe(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function xg(t,e){var a,i;const r=typeof window<"u"&&"matchMedia"in window&&((a=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:a.matches),n=t!=="auto"?t:r?"dark":"light";(i=e())==null||i.setAttribute("data-mantine-color-scheme",n)}function Uoe({manager:t,defaultColorScheme:e,getRootElement:r,forceColorScheme:n}){const a=y.useRef(null),[i,o]=y.useState(()=>t.get(e)),l=n||i,c=y.useCallback(d=>{n||(xg(d,r),o(d),t.set(d))},[t.set,l,n]),u=y.useCallback(()=>{o(e),xg(e,r),t.clear()},[t.clear,e]);return y.useEffect(()=>(t.subscribe(c),t.unsubscribe),[t.subscribe,t.unsubscribe]),dw(()=>{xg(t.get(e),r)},[]),y.useEffect(()=>{var f;if(n)return xg(n,r),()=>{};n===void 0&&xg(i,r),typeof window<"u"&&"matchMedia"in window&&(a.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=A=>{i==="auto"&&xg(A.matches?"dark":"light",r)};return(f=a.current)==null||f.addEventListener("change",d),()=>{var A;return(A=a.current)==null?void 0:A.removeEventListener("change",d)}},[i,n]),{colorScheme:l,setColorScheme:c,clearColorScheme:u}}function $oe({respectReducedMotion:t,getRootElement:e}){dw(()=>{var r;t&&((r=e())==null||r.setAttribute("data-respect-reduced-motion","true"))},[t])}Loe();function kz({theme:t,children:e,getStyleNonce:r,withStaticClasses:n=!0,withGlobalClasses:a=!0,deduplicateCssVariables:i=!0,withCssVariables:o=!0,cssVariablesSelector:l=":root",classNamesPrefix:c="mantine",colorSchemeManager:u=Toe(),defaultColorScheme:d="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:A,forceColorScheme:h,stylesTransform:m,env:p}){const{colorScheme:g,setColorScheme:x,clearColorScheme:v}=Uoe({defaultColorScheme:d,forceColorScheme:h,manager:u,getRootElement:f});return $oe({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:f}),s.jsx(Tz.Provider,{value:{colorScheme:g,setColorScheme:x,clearColorScheme:v,getRootElement:f,classNamesPrefix:c,getStyleNonce:r,cssVariablesResolver:A,cssVariablesSelector:l,withStaticClasses:n,stylesTransform:m,env:p},children:s.jsxs(Iz,{theme:t,children:[o&&s.jsx(Pz,{cssVariablesSelector:l,deduplicateCssVariables:i}),a&&s.jsx(Poe,{}),e]})})}kz.displayName="@mantine/core/MantineProvider";function Ul({classNames:t,styles:e,props:r,stylesCtx:n}){const a=Qs();return{resolvedClassNames:RN({theme:a,classNames:t,props:r,stylesCtx:n||void 0}),resolvedStyles:C2({theme:a,styles:e,props:r,stylesCtx:n||void 0})}}const Hoe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Qoe({theme:t,options:e,unstyled:r}){return qt((e==null?void 0:e.focusable)&&!r&&(t.focusClassName||Hoe[t.focusRing]),(e==null?void 0:e.active)&&!r&&t.activeClassName)}function zoe({selector:t,stylesCtx:e,options:r,props:n,theme:a}){return RN({theme:a,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:e})[t]}function HR({selector:t,stylesCtx:e,theme:r,classNames:n,props:a}){return RN({theme:r,classNames:n,props:a,stylesCtx:e})[t]}function Voe({rootSelector:t,selector:e,className:r}){return t===e?r:void 0}function Woe({selector:t,classes:e,unstyled:r}){return r?void 0:e[t]}function Goe({themeName:t,classNamesPrefix:e,selector:r,withStaticClass:n}){return n===!1?[]:t.map(a=>`${e}-${a}-${r}`)}function qoe({themeName:t,theme:e,selector:r,props:n,stylesCtx:a}){return t.map(i=>{var o,l;return(l=RN({theme:e,classNames:(o=e.components[i])==null?void 0:o.classNames,props:n,stylesCtx:a}))==null?void 0:l[r]})}function Koe({options:t,classes:e,selector:r,unstyled:n}){return t!=null&&t.variant&&!n?e[`${r}--${t.variant}`]:void 0}function Yoe({theme:t,options:e,themeName:r,selector:n,classNamesPrefix:a,classNames:i,classes:o,unstyled:l,className:c,rootSelector:u,props:d,stylesCtx:f,withStaticClasses:A,headless:h,transformedStyles:m}){return qt(Qoe({theme:t,options:e,unstyled:l||h}),qoe({theme:t,themeName:r,selector:n,props:d,stylesCtx:f}),Koe({options:e,classes:o,selector:n,unstyled:l}),HR({selector:n,stylesCtx:f,theme:t,classNames:i,props:d}),HR({selector:n,stylesCtx:f,theme:t,classNames:m,props:d}),zoe({selector:n,stylesCtx:f,options:e,props:d,theme:t}),Voe({rootSelector:u,selector:n,className:c}),Woe({selector:n,classes:o,unstyled:l||h}),A&&!h&&Goe({themeName:r,classNamesPrefix:a,selector:n,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function Xoe({theme:t,themeName:e,props:r,stylesCtx:n,selector:a}){return e.map(i=>{var o;return C2({theme:t,styles:(o=t.components[i])==null?void 0:o.styles,props:r,stylesCtx:n})[a]}).reduce((i,o)=>({...i,...o}),{})}function _4({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,..._4({style:n,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function Joe(t){return t.reduce((e,r)=>(r&&Object.keys(r).forEach(n=>{e[n]={...e[n],...Qh(r[n])}}),e),{})}function Zoe({vars:t,varsResolver:e,theme:r,props:n,stylesCtx:a,selector:i,themeName:o,headless:l}){var c;return(c=Joe([l?{}:e==null?void 0:e(r,n,a),...o.map(u=>{var d,f,A;return(A=(f=(d=r.components)==null?void 0:d[u])==null?void 0:f.vars)==null?void 0:A.call(f,r,n,a)}),t==null?void 0:t(r,n,a)]))==null?void 0:c[i]}function ele({theme:t,themeName:e,selector:r,options:n,props:a,stylesCtx:i,rootSelector:o,styles:l,style:c,vars:u,varsResolver:d,headless:f,withStylesTransform:A}){return{...!A&&Xoe({theme:t,themeName:e,props:a,stylesCtx:i,selector:r}),...!A&&C2({theme:t,styles:l,props:a,stylesCtx:i})[r],...!A&&C2({theme:t,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||a,stylesCtx:i})[r],...Zoe({theme:t,props:a,stylesCtx:i,vars:u,varsResolver:d,selector:r,themeName:e,headless:f}),...o===r?_4({style:c,theme:t}):null,..._4({style:n==null?void 0:n.style,theme:t})}}function tle({props:t,stylesCtx:e,themeName:r}){var o;const n=Qs(),a=(o=boe())==null?void 0:o();return{getTransformedStyles:l=>a?[...l.map(u=>a(u,{props:t,theme:n,ctx:e})),...r.map(u=>{var d;return a((d=n.components[u])==null?void 0:d.styles,{props:t,theme:n,ctx:e})})].filter(Boolean):[],withStylesTransform:!!a}}function Wt({name:t,classes:e,props:r,stylesCtx:n,className:a,style:i,rootSelector:o="root",unstyled:l,classNames:c,styles:u,vars:d,varsResolver:f}){const A=Qs(),h=poe(),m=goe(),p=xoe(),g=(Array.isArray(t)?t:[t]).filter(b=>b),{withStylesTransform:x,getTransformedStyles:v}=tle({props:r,stylesCtx:n,themeName:g});return(b,C)=>({className:Yoe({theme:A,options:C,themeName:g,selector:b,classNamesPrefix:h,classNames:c,classes:e,unstyled:l,className:a,rootSelector:o,props:r,stylesCtx:n,withStaticClasses:m,headless:p,transformedStyles:v([C==null?void 0:C.styles,u])}),style:ele({theme:A,themeName:g,selector:b,options:C,props:r,stylesCtx:n,rootSelector:o,styles:u,style:i,vars:d,varsResolver:f,headless:p,withStylesTransform:x})})}function fw(t,e){return typeof t=="boolean"?t:e.autoContrast}function nt(t,e,r){var o;const n=Qs(),a=(o=n.components[t])==null?void 0:o.defaultProps,i=typeof a=="function"?a(n):a;return{...e,...i,...Qh(r)}}function mB(t){return ua(t).reduce((e,r)=>t[r]!==void 0?`${e}${Die(r)}:${t[r]};`:e,"").trim()}function rle({selector:t,styles:e,media:r,container:n}){const a=e?mB(e):"",i=Array.isArray(r)?r.map(l=>`@media${l.query}{${t}{${mB(l.styles)}}}`):[],o=Array.isArray(n)?n.map(l=>`@container ${l.query}{${t}{${mB(l.styles)}}}`):[];return`${a?`${t}{${a}}`:""}${i.join("")}${o.join("")}`.trim()}function lx(t){const e=cP();return s.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:rle(t)}})}function cx(t){const{m:e,mx:r,my:n,mt:a,mb:i,ml:o,mr:l,me:c,ms:u,p:d,px:f,py:A,pt:h,pb:m,pl:p,pr:g,pe:x,ps:v,bd:b,bg:C,c:j,opacity:w,ff:N,fz:E,fw:_,lts:k,ta:D,lh:S,fs:F,tt:M,td:R,w:U,miw:z,maw:Q,h:H,mih:q,mah:X,bgsz:$,bgp:K,bgr:se,bga:Z,pos:ie,top:ee,left:ue,bottom:ae,right:re,inset:fe,display:G,flex:oe,hiddenFrom:Se,visibleFrom:ge,lightHidden:te,darkHidden:ye,sx:we,...be}=t;return{styleProps:Qh({m:e,mx:r,my:n,mt:a,mb:i,ml:o,mr:l,me:c,ms:u,p:d,px:f,py:A,pt:h,pb:m,pl:p,pr:g,pe:x,ps:v,bd:b,bg:C,c:j,opacity:w,ff:N,fz:E,fw:_,lts:k,ta:D,lh:S,fs:F,tt:M,td:R,w:U,miw:z,maw:Q,h:H,mih:q,mah:X,bgsz:$,bgp:K,bgr:se,bga:Z,pos:ie,top:ee,left:ue,bottom:ae,right:re,inset:fe,display:G,flex:oe,hiddenFrom:Se,visibleFrom:ge,lightHidden:te,darkHidden:ye,sx:we}),rest:be}}const nle={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function hP(t,e){const r=ox({color:t,theme:e});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function sle(t,e){const r=ox({color:t,theme:e});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:hP(t,e)}function ale(t,e){if(typeof t=="number")return vt(t);if(typeof t=="string"){const[r,n,...a]=t.split(" ").filter(o=>o.trim()!=="");let i=`${vt(r)}`;return n&&(i+=` ${n}`),a.length>0&&(i+=` ${hP(a.join(" "),e)}`),i.trim()}return t}const QR={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function ile(t){return typeof t=="string"&&t in QR?QR[t]:t}const ole=["h1","h2","h3","h4","h5","h6"];function lle(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&ole.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?vt(t):t}function cle(t){return t}const ule=["h1","h2","h3","h4","h5","h6"];function dle(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&ule.includes(t)?`var(--mantine-${t}-line-height)`:t}function fle(t){return typeof t=="number"?vt(t):t}function hle(t,e){if(typeof t=="number")return vt(t);if(typeof t=="string"){const r=t.replace("-","");if(!(r in e.spacing))return vt(t);const n=`--mantine-spacing-${r}`;return t.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return t}const pB={color:hP,textColor:sle,fontSize:lle,spacing:hle,identity:cle,size:fle,lineHeight:dle,fontFamily:ile,border:ale};function zR(t){return t.replace("(min-width: ","").replace("em)","")}function Ale({media:t,...e}){const n=Object.keys(t).sort((a,i)=>Number(zR(a))-Number(zR(i))).map(a=>({query:a,styles:t[a]}));return{...e,media:n}}function mle(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function ple(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function gle(t){return typeof t=="object"&&t!==null?ua(t).filter(e=>e!=="base"):[]}function xle(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function Oz({styleProps:t,data:e,theme:r}){return Ale(ua(t).reduce((n,a)=>{if(a==="hiddenFrom"||a==="visibleFrom"||a==="sx")return n;const i=e[a],o=Array.isArray(i.property)?i.property:[i.property],l=ple(t[a]);if(!mle(t[a]))return o.forEach(u=>{n.inlineStyles[u]=pB[i.type](l,r)}),n;n.hasResponsiveStyles=!0;const c=gle(t[a]);return o.forEach(u=>{l&&(n.styles[u]=pB[i.type](l,r)),c.forEach(d=>{const f=`(min-width: ${r.breakpoints[d]})`;n.media[f]={...n.media[f],[u]:pB[i.type](xle(t[a],d),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function hw(){return`__m__-${y.useId().replace(/:/g,"")}`}function Fz(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...Fz(n,e)}),{}):typeof t=="function"?t(e):t??{}}function Rz(t){return t.startsWith("data-")?t:`data-${t}`}function vle(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return n===void 0||n===""||n===!1||n===null||(e[Rz(r)]=t[r]),e},{})}function Mz(t){return t?typeof t=="string"?{[Rz(t)]:!0}:Array.isArray(t)?[...t].reduce((e,r)=>({...e,...Mz(r)}),{}):vle(t):null}function P4(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...P4(n,e)}),{}):typeof t=="function"?t(e):t??{}}function ble({theme:t,style:e,vars:r,styleProps:n}){const a=P4(e,t),i=P4(r,t);return{...a,...i,...n}}const Lz=y.forwardRef(({component:t,style:e,__vars:r,className:n,variant:a,mod:i,size:o,hiddenFrom:l,visibleFrom:c,lightHidden:u,darkHidden:d,renderRoot:f,__size:A,...h},m)=>{var E;const p=Qs(),g=t||"div",{styleProps:x,rest:v}=cx(h),b=voe(),C=(E=b==null?void 0:b())==null?void 0:E(x.sx),j=hw(),w=Oz({styleProps:x,theme:p,data:nle}),N={ref:m,style:ble({theme:p,style:e,vars:r,styleProps:w.inlineStyles}),className:qt(n,C,{[j]:w.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":d,[`mantine-hidden-from-${l}`]:l,[`mantine-visible-from-${c}`]:c}),"data-variant":a,"data-size":yz(o)?void 0:o||void 0,size:A,...Mz(i),...v};return s.jsxs(s.Fragment,{children:[w.hasResponsiveStyles&&s.jsx(lx,{selector:`.${j}`,styles:w.styles,media:w.media}),typeof f=="function"?f(N):s.jsx(g,{...N})]})});Lz.displayName="@mantine/core/Box";const ut=Lz;function Uz(t){return t}function yle(t){const e=t;return r=>{const n=y.forwardRef((a,i)=>s.jsx(e,{...r,...a,ref:i}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n}}function wt(t){const e=y.forwardRef(t);return e.extend=Uz,e.withProps=r=>{const n=y.forwardRef((a,i)=>s.jsx(e,{...r,...a,ref:i}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e}function Si(t){const e=y.forwardRef(t);return e.withProps=r=>{const n=y.forwardRef((a,i)=>s.jsx(e,{...r,...a,ref:i}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e.extend=Uz,e}const wle=y.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Jm(){return y.useContext(wle)}function MN(){return typeof window<"u"}function ux(t){return $z(t)?(t.nodeName||"").toLowerCase():"#document"}function Eo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Uu(t){var e;return(e=($z(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $z(t){return MN()?t instanceof Node||t instanceof Eo(t).Node:!1}function is(t){return MN()?t instanceof Element||t instanceof Eo(t).Element:!1}function al(t){return MN()?t instanceof HTMLElement||t instanceof Eo(t).HTMLElement:!1}function k4(t){return!MN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Eo(t).ShadowRoot}function Aw(t){const{overflow:e,overflowX:r,overflowY:n,display:a}=_l(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(a)}function jle(t){return["table","td","th"].includes(ux(t))}function LN(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function AP(t){const e=UN(),r=is(t)?_l(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Cle(t){let e=zd(t);for(;al(e)&&!Ph(e);){if(AP(e))return e;if(LN(e))return null;e=zd(e)}return null}function UN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ph(t){return["html","body","#document"].includes(ux(t))}function _l(t){return Eo(t).getComputedStyle(t)}function $N(t){return is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zd(t){if(ux(t)==="html")return t;const e=t.assignedSlot||t.parentNode||k4(t)&&t.host||Uu(t);return k4(e)?e.host:e}function Hz(t){const e=zd(t);return Ph(e)?t.ownerDocument?t.ownerDocument.body:t.body:al(e)&&Aw(e)?e:Hz(e)}function kd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=Hz(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),o=Eo(a);if(i){const l=O4(o);return e.concat(o,o.visualViewport||[],Aw(a)?a:[],l&&r?kd(l):[])}return e.concat(a,kd(a,[],r))}function O4(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VR(t){let e=t.activeElement;for(;((r=e)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;e=e.shadowRoot.activeElement}return e}function Zb(t,e){if(!t||!e)return!1;const r=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(r&&k4(r)){let n=e;for(;n;){if(t===n)return!0;n=n.parentNode||n.host}}return!1}function Qz(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function zz(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}function Nle(t){return Ble()?!1:!WR()&&t.width===0&&t.height===0||WR()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function Sle(){return/apple/i.test(navigator.vendor)}function WR(){const t=/android/i;return t.test(Qz())||t.test(zz())}function Ele(){return Qz().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Ble(){return zz().includes("jsdom/")}function F4(t,e){const r=["mouse","pen"];return r.push("",void 0),r.includes(t)}function Tle(t){return"nativeEvent"in t}function Dle(t){return t.matches("html,body")}function XA(t){return(t==null?void 0:t.ownerDocument)||document}function gB(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const r=t;return r.target!=null&&e.contains(r.target)}function Ig(t){return"composedPath"in t?t.composedPath()[0]:t.target}const Ile="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function _le(t){return al(t)&&t.matches(Ile)}const yc=Math.min,hi=Math.max,N2=Math.round,U1=Math.floor,Cu=t=>({x:t,y:t}),Ple={left:"right",right:"left",bottom:"top",top:"bottom"},kle={start:"end",end:"start"};function R4(t,e,r){return hi(t,yc(e,r))}function Vd(t,e){return typeof t=="function"?t(e):t}function wc(t){return t.split("-")[0]}function dx(t){return t.split("-")[1]}function mP(t){return t==="x"?"y":"x"}function pP(t){return t==="y"?"height":"width"}function mc(t){return["top","bottom"].includes(wc(t))?"y":"x"}function gP(t){return mP(mc(t))}function Ole(t,e,r){r===void 0&&(r=!1);const n=dx(t),a=gP(t),i=pP(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=S2(o)),[o,S2(o)]}function Fle(t){const e=S2(t);return[M4(t),e,M4(e)]}function M4(t){return t.replace(/start|end/g,e=>kle[e])}function Rle(t,e,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?a:n:e?n:a;case"left":case"right":return e?i:o;default:return[]}}function Mle(t,e,r,n){const a=dx(t);let i=Rle(wc(t),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),e&&(i=i.concat(i.map(M4)))),i}function S2(t){return t.replace(/left|right|bottom|top/g,e=>Ple[e])}function Lle(t){return{top:0,right:0,bottom:0,left:0,...t}}function xP(t){return typeof t!="number"?Lle(t):{top:t,right:t,bottom:t,left:t}}function A0(t){const{x:e,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:e,right:e+n,bottom:r+a,x:e,y:r}}function GR(t,e,r){let{reference:n,floating:a}=t;const i=mc(e),o=gP(e),l=pP(o),c=wc(e),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,A=n[l]/2-a[l]/2;let h;switch(c){case"top":h={x:d,y:n.y-a.height};break;case"bottom":h={x:d,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-a.width,y:f};break;default:h={x:n.x,y:n.y}}switch(dx(e)){case"start":h[o]-=A*(r&&u?-1:1);break;case"end":h[o]+=A*(r&&u?-1:1);break}return h}const Ule=async(t,e,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:a}),{x:d,y:f}=GR(u,n,c),A=n,h={},m=0;for(let p=0;p<l.length;p++){const{name:g,fn:x}=l[p],{x:v,y:b,data:C,reset:j}=await x({x:d,y:f,initialPlacement:n,placement:A,strategy:a,middlewareData:h,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,f=b??f,h={...h,[g]:{...h[g],...C}},j&&m<=50&&(m++,typeof j=="object"&&(j.placement&&(A=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:a}):j.rects),{x:d,y:f}=GR(u,A,c)),p=-1)}return{x:d,y:f,placement:A,strategy:a,middlewareData:h}};async function vP(t,e){var r;e===void 0&&(e={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:A=!1,padding:h=0}=Vd(e,t),m=xP(h),g=l[A?f==="floating"?"reference":"floating":f],x=A0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(g)))==null||r?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},j=A0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-j.top+m.top)/C.y,bottom:(j.bottom-x.bottom+m.bottom)/C.y,left:(x.left-j.left+m.left)/C.x,right:(j.right-x.right+m.right)/C.x}}const $le=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Vd(t,e)||{};if(u==null)return{};const f=xP(d),A={x:r,y:n},h=gP(a),m=pP(h),p=await o.getDimensions(u),g=h==="y",x=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",C=i.reference[m]+i.reference[h]-A[h]-i.floating[m],j=A[h]-i.reference[h],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=w?w[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(w)))&&(N=l.floating[b]||i.floating[m]);const E=C/2-j/2,_=N/2-p[m]/2-1,k=yc(f[x],_),D=yc(f[v],_),S=k,F=N-p[m]-D,M=N/2-p[m]/2+E,R=R4(S,M,F),U=!c.arrow&&dx(a)!=null&&M!==R&&i.reference[m]/2-(M<S?k:D)-p[m]/2<0,z=U?M<S?M-S:M-F:0;return{[h]:A[h]+z,data:{[h]:R,centerOffset:M-R-z,...U&&{alignmentOffset:z}},reset:U}}}),Hle=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:A,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=Vd(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=wc(a),v=mc(l),b=wc(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=A||(b||!p?[S2(l)]:Fle(l)),w=m!=="none";!A&&w&&j.push(...Mle(l,p,m,C));const N=[l,...j],E=await vP(e,g),_=[];let k=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&_.push(E[x]),f){const M=Ole(a,o,C);_.push(E[M[0]],E[M[1]])}if(k=[...k,{placement:a,overflows:_}],!_.every(M=>M<=0)){var D,S;const M=(((D=i.flip)==null?void 0:D.index)||0)+1,R=N[M];if(R&&(!(f==="alignment"?v!==mc(R):!1)||k.every(Q=>Q.overflows[0]>0&&mc(Q.placement)===v)))return{data:{index:M,overflows:k},reset:{placement:R}};let U=(S=k.filter(z=>z.overflows[0]<=0).sort((z,Q)=>z.overflows[1]-Q.overflows[1])[0])==null?void 0:S.placement;if(!U)switch(h){case"bestFit":{var F;const z=(F=k.filter(Q=>{if(w){const H=mc(Q.placement);return H===v||H==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(H=>H>0).reduce((H,q)=>H+q,0)]).sort((Q,H)=>Q[1]-H[1])[0])==null?void 0:F[0];z&&(U=z);break}case"initialPlacement":U=l;break}if(a!==U)return{reset:{placement:U}}}return{}}}};function Vz(t){const e=yc(...t.map(i=>i.left)),r=yc(...t.map(i=>i.top)),n=hi(...t.map(i=>i.right)),a=hi(...t.map(i=>i.bottom));return{x:e,y:r,width:n-e,height:a-r}}function Qle(t){const e=t.slice().sort((a,i)=>a.y-i.y),r=[];let n=null;for(let a=0;a<e.length;a++){const i=e[a];!n||i.y-n.y>n.height/2?r.push([i]):r[r.length-1].push(i),n=i}return r.map(a=>A0(Vz(a)))}const zle=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:r,elements:n,rects:a,platform:i,strategy:o}=e,{padding:l=2,x:c,y:u}=Vd(t,e),d=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(n.reference))||[]),f=Qle(d),A=A0(Vz(d)),h=xP(l);function m(){if(f.length===2&&f[0].left>f[1].right&&c!=null&&u!=null)return f.find(g=>c>g.left-h.left&&c<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||A;if(f.length>=2){if(mc(r)==="y"){const k=f[0],D=f[f.length-1],S=wc(r)==="top",F=k.top,M=D.bottom,R=S?k.left:D.left,U=S?k.right:D.right,z=U-R,Q=M-F;return{top:F,bottom:M,left:R,right:U,width:z,height:Q,x:R,y:F}}const g=wc(r)==="left",x=hi(...f.map(k=>k.right)),v=yc(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===x),C=b[0].top,j=b[b.length-1].bottom,w=v,N=x,E=N-w,_=j-C;return{top:C,bottom:j,left:w,right:N,width:E,height:_,x:w,y:C}}return A}const p=await i.getElementRects({reference:{getBoundingClientRect:m},floating:n.floating,strategy:o});return a.reference.x!==p.reference.x||a.reference.y!==p.reference.y||a.reference.width!==p.reference.width||a.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function Vle(t,e){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=wc(r),l=dx(r),c=mc(r)==="y",u=["left","top"].includes(o)?-1:1,d=i&&c?-1:1,f=Vd(e,t);let{mainAxis:A,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof m=="number"&&(h=l==="end"?m*-1:m),c?{x:h*d,y:A*u}:{x:A*u,y:h*d}}const Wle=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=e,c=await Vle(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},Gle=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x,y:v}=g;return{x,y:v}}},...c}=Vd(t,e),u={x:r,y:n},d=await vP(e,c),f=mc(wc(a)),A=mP(f);let h=u[A],m=u[f];if(i){const g=A==="y"?"top":"left",x=A==="y"?"bottom":"right",v=h+d[g],b=h-d[x];h=R4(v,h,b)}if(o){const g=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=m+d[g],b=m-d[x];m=R4(v,m,b)}const p=l.fn({...e,[A]:h,[f]:m});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[A]:i,[f]:o}}}}}},qle=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Vd(t,e),d={x:r,y:n},f=mc(a),A=mP(f);let h=d[A],m=d[f];const p=Vd(l,e),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=A==="y"?"height":"width",C=i.reference[A]-i.floating[b]+g.mainAxis,j=i.reference[A]+i.reference[b]-g.mainAxis;h<C?h=C:h>j&&(h=j)}if(u){var x,v;const b=A==="y"?"width":"height",C=["top","left"].includes(wc(a)),j=i.reference[f]-i.floating[b]+(C&&((x=o.offset)==null?void 0:x[f])||0)+(C?0:g.crossAxis),w=i.reference[f]+i.reference[b]+(C?0:((v=o.offset)==null?void 0:v[f])||0)-(C?g.crossAxis:0);m<j?m=j:m>w&&(m=w)}return{[A]:h,[f]:m}}}},Kle=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:a,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Vd(t,e),d=await vP(e,u),f=wc(a),A=dx(a),h=mc(a)==="y",{width:m,height:p}=i.floating;let g,x;f==="top"||f==="bottom"?(g=f,x=A===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,g=A==="end"?"top":"bottom");const v=p-d.top-d.bottom,b=m-d.left-d.right,C=yc(p-d[g],v),j=yc(m-d[x],b),w=!e.middlewareData.shift;let N=C,E=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(E=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(N=v),w&&!A){const k=hi(d.left,0),D=hi(d.right,0),S=hi(d.top,0),F=hi(d.bottom,0);h?E=m-2*(k!==0||D!==0?k+D:hi(d.left,d.right)):N=p-2*(S!==0||F!==0?S+F:hi(d.top,d.bottom))}await c({...e,availableWidth:E,availableHeight:N});const _=await o.getDimensions(l.floating);return m!==_.width||p!==_.height?{reset:{rects:!0}}:{}}}};function Wz(t){const e=_l(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=al(t),i=a?t.offsetWidth:r,o=a?t.offsetHeight:n,l=N2(r)!==i||N2(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function bP(t){return is(t)?t:t.contextElement}function Kg(t){const e=bP(t);if(!al(e))return Cu(1);const r=e.getBoundingClientRect(),{width:n,height:a,$:i}=Wz(e);let o=(i?N2(r.width):r.width)/n,l=(i?N2(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Yle=Cu(0);function Gz(t){const e=Eo(t);return!UN()||!e.visualViewport?Yle:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xle(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Eo(t)?!1:e}function Sm(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=bP(t);let o=Cu(1);e&&(n?is(n)&&(o=Kg(n)):o=Kg(t));const l=Xle(i,r,n)?Gz(i):Cu(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const A=Eo(i),h=n&&is(n)?Eo(n):n;let m=A,p=O4(m);for(;p&&n&&h!==m;){const g=Kg(p),x=p.getBoundingClientRect(),v=_l(p),b=x.left+(p.clientLeft+parseFloat(v.paddingLeft))*g.x,C=x.top+(p.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,f*=g.y,c+=b,u+=C,m=Eo(p),p=O4(m)}}return A0({width:d,height:f,x:c,y:u})}function yP(t,e){const r=$N(t).scrollLeft;return e?e.left+r:Sm(Uu(t)).left+r}function qz(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+e.scrollLeft-(r?0:yP(t,n)),i=n.top+e.scrollTop;return{x:a,y:i}}function Jle(t){let{elements:e,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",o=Uu(n),l=e?LN(e.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Cu(1);const d=Cu(0),f=al(n);if((f||!f&&!i)&&((ux(n)!=="body"||Aw(o))&&(c=$N(n)),al(n))){const h=Sm(n);u=Kg(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}const A=o&&!f&&!i?qz(o,c,!0):Cu(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+A.x,y:r.y*u.y-c.scrollTop*u.y+d.y+A.y}}function Zle(t){return Array.from(t.getClientRects())}function ece(t){const e=Uu(t),r=$N(t),n=t.ownerDocument.body,a=hi(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=hi(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+yP(t);const l=-r.scrollTop;return _l(n).direction==="rtl"&&(o+=hi(e.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function tce(t,e){const r=Eo(t),n=Uu(t),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=UN();(!u||u&&e==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function rce(t,e){const r=Sm(t,!0,e==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=al(t)?Kg(t):Cu(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function qR(t,e,r){let n;if(e==="viewport")n=tce(t,r);else if(e==="document")n=ece(Uu(t));else if(is(e))n=rce(e,r);else{const a=Gz(t);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return A0(n)}function Kz(t,e){const r=zd(t);return r===e||!is(r)||Ph(r)?!1:_l(r).position==="fixed"||Kz(r,e)}function nce(t,e){const r=e.get(t);if(r)return r;let n=kd(t,[],!1).filter(l=>is(l)&&ux(l)!=="body"),a=null;const i=_l(t).position==="fixed";let o=i?zd(t):t;for(;is(o)&&!Ph(o);){const l=_l(o),c=AP(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Aw(o)&&!c&&Kz(t,o))?n=n.filter(d=>d!==o):a=l,o=zd(o)}return e.set(t,n),n}function sce(t){let{element:e,boundary:r,rootBoundary:n,strategy:a}=t;const o=[...r==="clippingAncestors"?LN(e)?[]:nce(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=qR(e,d,a);return u.top=hi(f.top,u.top),u.right=yc(f.right,u.right),u.bottom=yc(f.bottom,u.bottom),u.left=hi(f.left,u.left),u},qR(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function ace(t){const{width:e,height:r}=Wz(t);return{width:e,height:r}}function ice(t,e,r){const n=al(e),a=Uu(e),i=r==="fixed",o=Sm(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Cu(0);function u(){c.x=yP(a)}if(n||!n&&!i)if((ux(e)!=="body"||Aw(a))&&(l=$N(e)),n){const h=Sm(e,!0,i,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?qz(a,l):Cu(0),f=o.left+l.scrollLeft-c.x-d.x,A=o.top+l.scrollTop-c.y-d.y;return{x:f,y:A,width:o.width,height:o.height}}function xB(t){return _l(t).position==="static"}function KR(t,e){if(!al(t)||_l(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Uu(t)===r&&(r=r.ownerDocument.body),r}function Yz(t,e){const r=Eo(t);if(LN(t))return r;if(!al(t)){let a=zd(t);for(;a&&!Ph(a);){if(is(a)&&!xB(a))return a;a=zd(a)}return r}let n=KR(t,e);for(;n&&jle(n)&&xB(n);)n=KR(n,e);return n&&Ph(n)&&xB(n)&&!AP(n)?r:n||Cle(t)||r}const oce=async function(t){const e=this.getOffsetParent||Yz,r=this.getDimensions,n=await r(t.floating);return{reference:ice(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function lce(t){return _l(t).direction==="rtl"}const cce={convertOffsetParentRelativeRectToViewportRelativeRect:Jle,getDocumentElement:Uu,getClippingRect:sce,getOffsetParent:Yz,getElementRects:oce,getClientRects:Zle,getDimensions:ace,getScale:Kg,isElement:is,isRTL:lce};function Xz(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function uce(t,e){let r=null,n;const a=Uu(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:f,width:A,height:h}=u;if(l||e(),!A||!h)return;const m=U1(f),p=U1(a.clientWidth-(d+A)),g=U1(a.clientHeight-(f+h)),x=U1(d),b={rootMargin:-m+"px "+-p+"px "+-g+"px "+-x+"px",threshold:hi(0,yc(1,c))||1};let C=!0;function j(w){const N=w[0].intersectionRatio;if(N!==c){if(!C)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!Xz(u,t.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(j,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,b)}r.observe(t)}return o(!0),i}function dce(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=bP(t),d=a||i?[...u?kd(u):[],...kd(e)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&l?uce(u,r):null;let A=-1,h=null;o&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),r()}),u&&!c&&h.observe(u),h.observe(e));let m,p=c?Sm(t):null;c&&g();function g(){const x=Sm(t);p&&!Xz(p,x)&&r(),p=x,m=requestAnimationFrame(g)}return r(),()=>{var x;d.forEach(v=>{a&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const fce=Wle,hce=Gle,Ace=Hle,mce=Kle,YR=$le,pce=zle,gce=qle,xce=(t,e,r)=>{const n=new Map,a={platform:cce,...r},i={...a.platform,_c:n};return Ule(t,e,{...a,platform:i})};var vce=typeof document<"u",bce=function(){},Wj=vce?y.useLayoutEffect:bce;function E2(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!E2(t[n],e[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!E2(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Jz(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XR(t,e){const r=Jz(t);return Math.round(e*r)/r}function vB(t){const e=y.useRef(t);return Wj(()=>{e.current=t}),e}function yce(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=y.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[A,h]=y.useState(n);E2(A,n)||h(n);const[m,p]=y.useState(null),[g,x]=y.useState(null),v=y.useCallback(Q=>{Q!==w.current&&(w.current=Q,p(Q))},[]),b=y.useCallback(Q=>{Q!==N.current&&(N.current=Q,x(Q))},[]),C=i||m,j=o||g,w=y.useRef(null),N=y.useRef(null),E=y.useRef(d),_=c!=null,k=vB(c),D=vB(a),S=vB(u),F=y.useCallback(()=>{if(!w.current||!N.current)return;const Q={placement:e,strategy:r,middleware:A};D.current&&(Q.platform=D.current),xce(w.current,N.current,Q).then(H=>{const q={...H,isPositioned:S.current!==!1};M.current&&!E2(E.current,q)&&(E.current=q,hc.flushSync(()=>{f(q)}))})},[A,e,r,D,S]);Wj(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(Q=>({...Q,isPositioned:!1})))},[u]);const M=y.useRef(!1);Wj(()=>(M.current=!0,()=>{M.current=!1}),[]),Wj(()=>{if(C&&(w.current=C),j&&(N.current=j),C&&j){if(k.current)return k.current(C,j,F);F()}},[C,j,F,k,_]);const R=y.useMemo(()=>({reference:w,floating:N,setReference:v,setFloating:b}),[v,b]),U=y.useMemo(()=>({reference:C,floating:j}),[C,j]),z=y.useMemo(()=>{const Q={position:r,left:0,top:0};if(!U.floating)return Q;const H=XR(U.floating,d.x),q=XR(U.floating,d.y);return l?{...Q,transform:"translate("+H+"px, "+q+"px)",...Jz(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:q}},[r,l,U.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:F,refs:R,elements:U,floatingStyles:z}),[d,F,R,U,z])}const wce=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?YR({element:n.current,padding:a}).fn(r):{}:n?YR({element:n,padding:a}).fn(r):{}}}},Zz=(t,e)=>({...fce(t),options:[t,e]}),wP=(t,e)=>({...hce(t),options:[t,e]}),JR=(t,e)=>({...gce(t),options:[t,e]}),B2=(t,e)=>({...Ace(t),options:[t,e]}),jce=(t,e)=>({...mce(t),options:[t,e]}),mb=(t,e)=>({...pce(t),options:[t,e]}),eV=(t,e)=>({...wce(t),options:[t,e]});function Cce(t){return y.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})},t)}const tV={...bae},Nce=tV.useInsertionEffect,Sce=Nce||(t=>t());function yd(t){const e=y.useRef(()=>{});return Sce(()=>{e.current=t}),y.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}var Nu=typeof document<"u"?y.useLayoutEffect:y.useEffect;let ZR=!1,Ece=0;const eM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ece++;function Bce(){const[t,e]=y.useState(()=>ZR?eM():void 0);return Nu(()=>{t==null&&e(eM())},[]),y.useEffect(()=>{ZR=!0},[]),t}const Tce=tV.useId,rV=Tce||Bce;function Dce(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(a=>a(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(a=>a!==r))||[])}}}const Ice=y.createContext(null),_ce=y.createContext(null),jP=()=>{var t;return((t=y.useContext(Ice))==null?void 0:t.id)||null},CP=()=>y.useContext(_ce);function NP(t){return"data-floating-ui-"+t}function bB(t){const e=y.useRef(t);return Nu(()=>{e.current=t}),e}const tM=NP("safe-polygon");function Gj(t,e,r){return r&&!F4(r)?0:typeof t=="number"?t:t==null?void 0:t[e]}function Pce(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,dataRef:a,events:i,elements:o}=t,{enabled:l=!0,delay:c=0,handleClose:u=null,mouseOnly:d=!1,restMs:f=0,move:A=!0}=e,h=CP(),m=jP(),p=bB(u),g=bB(c),x=bB(r),v=y.useRef(),b=y.useRef(-1),C=y.useRef(),j=y.useRef(-1),w=y.useRef(!0),N=y.useRef(!1),E=y.useRef(()=>{}),_=y.useRef(!1),k=y.useCallback(()=>{var z;const Q=(z=a.current.openEvent)==null?void 0:z.type;return(Q==null?void 0:Q.includes("mouse"))&&Q!=="mousedown"},[a]);y.useEffect(()=>{if(!l)return;function z(Q){let{open:H}=Q;H||(clearTimeout(b.current),clearTimeout(j.current),w.current=!0,_.current=!1)}return i.on("openchange",z),()=>{i.off("openchange",z)}},[l,i]),y.useEffect(()=>{if(!l||!p.current||!r)return;function z(H){k()&&n(!1,H,"hover")}const Q=XA(o.floating).documentElement;return Q.addEventListener("mouseleave",z),()=>{Q.removeEventListener("mouseleave",z)}},[o.floating,r,n,l,p,k]);const D=y.useCallback(function(z,Q,H){Q===void 0&&(Q=!0),H===void 0&&(H="hover");const q=Gj(g.current,"close",v.current);q&&!C.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>n(!1,z,H),q)):Q&&(clearTimeout(b.current),n(!1,z,H))},[g,n]),S=yd(()=>{E.current(),C.current=void 0}),F=yd(()=>{if(N.current){const z=XA(o.floating).body;z.style.pointerEvents="",z.removeAttribute(tM),N.current=!1}}),M=yd(()=>a.current.openEvent?["click","mousedown"].includes(a.current.openEvent.type):!1);y.useEffect(()=>{if(!l)return;function z(X){if(clearTimeout(b.current),w.current=!1,d&&!F4(v.current)||f>0&&!Gj(g.current,"open"))return;const $=Gj(g.current,"open",v.current);$?b.current=window.setTimeout(()=>{x.current||n(!0,X,"hover")},$):r||n(!0,X,"hover")}function Q(X){if(M())return;E.current();const $=XA(o.floating);if(clearTimeout(j.current),_.current=!1,p.current&&a.current.floatingContext){r||clearTimeout(b.current),C.current=p.current({...a.current.floatingContext,tree:h,x:X.clientX,y:X.clientY,onClose(){F(),S(),M()||D(X,!0,"safe-polygon")}});const se=C.current;$.addEventListener("mousemove",se),E.current=()=>{$.removeEventListener("mousemove",se)};return}(v.current==="touch"?!Zb(o.floating,X.relatedTarget):!0)&&D(X)}function H(X){M()||a.current.floatingContext&&(p.current==null||p.current({...a.current.floatingContext,tree:h,x:X.clientX,y:X.clientY,onClose(){F(),S(),M()||D(X)}})(X))}if(is(o.domReference)){var q;const X=o.domReference;return r&&X.addEventListener("mouseleave",H),(q=o.floating)==null||q.addEventListener("mouseleave",H),A&&X.addEventListener("mousemove",z,{once:!0}),X.addEventListener("mouseenter",z),X.addEventListener("mouseleave",Q),()=>{var $;r&&X.removeEventListener("mouseleave",H),($=o.floating)==null||$.removeEventListener("mouseleave",H),A&&X.removeEventListener("mousemove",z),X.removeEventListener("mouseenter",z),X.removeEventListener("mouseleave",Q)}}},[o,l,t,d,f,A,D,S,F,n,r,x,h,g,p,a,M]),Nu(()=>{var z;if(l&&r&&(z=p.current)!=null&&z.__options.blockPointerEvents&&k()){N.current=!0;const H=o.floating;if(is(o.domReference)&&H){var Q;const q=XA(o.floating).body;q.setAttribute(tM,"");const X=o.domReference,$=h==null||(Q=h.nodesRef.current.find(K=>K.id===m))==null||(Q=Q.context)==null?void 0:Q.elements.floating;return $&&($.style.pointerEvents=""),q.style.pointerEvents="none",X.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{q.style.pointerEvents="",X.style.pointerEvents="",H.style.pointerEvents=""}}}},[l,r,m,o,h,p,k]),Nu(()=>{r||(v.current=void 0,_.current=!1,S(),F())},[r,S,F]),y.useEffect(()=>()=>{S(),clearTimeout(b.current),clearTimeout(j.current),F()},[l,o.domReference,S,F]);const R=y.useMemo(()=>{function z(Q){v.current=Q.pointerType}return{onPointerDown:z,onPointerEnter:z,onMouseMove(Q){const{nativeEvent:H}=Q;function q(){!w.current&&!x.current&&n(!0,H,"hover")}d&&!F4(v.current)||r||f===0||_.current&&Q.movementX**2+Q.movementY**2<2||(clearTimeout(j.current),v.current==="touch"?q():(_.current=!0,j.current=window.setTimeout(q,f)))}}},[d,n,r,x,f]),U=y.useMemo(()=>({onMouseEnter(){clearTimeout(b.current)},onMouseLeave(z){M()||D(z.nativeEvent,!1)}}),[D,M]);return y.useMemo(()=>l?{reference:R,floating:U}:{},[l,R,U])}const L4=()=>{},nV=y.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:L4,setState:L4,isInstantPhase:!1}),kce=()=>y.useContext(nV);function Oce(t){const{children:e,delay:r,timeoutMs:n=0}=t,[a,i]=y.useReducer((c,u)=>({...c,...u}),{delay:r,timeoutMs:n,initialDelay:r,currentId:null,isInstantPhase:!1}),o=y.useRef(null),l=y.useCallback(c=>{i({currentId:c})},[]);return Nu(()=>{a.currentId?o.current===null?o.current=a.currentId:a.isInstantPhase||i({isInstantPhase:!0}):(a.isInstantPhase&&i({isInstantPhase:!1}),o.current=null)},[a.currentId,a.isInstantPhase]),y.createElement(nV.Provider,{value:y.useMemo(()=>({...a,setState:i,setCurrentId:l}),[a,l])},e)}function Fce(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,floatingId:a}=t,{id:i,enabled:o=!0}=e,l=i??a,c=kce(),{currentId:u,setCurrentId:d,initialDelay:f,setState:A,timeoutMs:h}=c;return Nu(()=>{o&&u&&(A({delay:{open:1,close:Gj(f,"close")}}),u!==l&&n(!1))},[o,l,n,A,u,f]),Nu(()=>{function m(){n(!1),A({delay:f,currentId:null})}if(o&&u&&!r&&u===l){if(h){const p=window.setTimeout(m,h);return()=>{clearTimeout(p)}}m()}},[o,r,A,u,l,n,f,h]),Nu(()=>{o&&(d===L4||!r||d(l))},[o,r,d,l]),c}function yB(t,e){let r=t.filter(a=>{var i;return a.parentId===e&&((i=a.context)==null?void 0:i.open)}),n=r;for(;n.length;)n=t.filter(a=>{var i;return(i=n)==null?void 0:i.some(o=>{var l;return a.parentId===o.id&&((l=a.context)==null?void 0:l.open)})}),r=r.concat(n);return r}const Rce="data-floating-ui-focusable",Mce={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Lce={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},rM=t=>{var e,r;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(r=t==null?void 0:t.outsidePress)!=null?r:!0}};function Uce(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,elements:a,dataRef:i}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:A=!1,bubbles:h,capture:m}=e,p=CP(),g=yd(typeof c=="function"?c:()=>!1),x=typeof c=="function"?g:c,v=y.useRef(!1),b=y.useRef(!1),{escapeKey:C,outsidePress:j}=rM(h),{escapeKey:w,outsidePress:N}=rM(m),E=y.useRef(!1),_=yd(R=>{var U;if(!r||!o||!l||R.key!=="Escape"||E.current)return;const z=(U=i.current.floatingContext)==null?void 0:U.nodeId,Q=p?yB(p.nodesRef.current,z):[];if(!C&&(R.stopPropagation(),Q.length>0)){let H=!0;if(Q.forEach(q=>{var X;if((X=q.context)!=null&&X.open&&!q.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}n(!1,Tle(R)?R.nativeEvent:R,"escape-key")}),k=yd(R=>{var U;const z=()=>{var Q;_(R),(Q=Ig(R))==null||Q.removeEventListener("keydown",z)};(U=Ig(R))==null||U.addEventListener("keydown",z)}),D=yd(R=>{var U;const z=v.current;v.current=!1;const Q=b.current;if(b.current=!1,u==="click"&&Q||z||typeof x=="function"&&!x(R))return;const H=Ig(R),q="["+NP("inert")+"]",X=XA(a.floating).querySelectorAll(q);let $=is(H)?H:null;for(;$&&!Ph($);){const ie=zd($);if(Ph(ie)||!is(ie))break;$=ie}if(X.length&&is(H)&&!Dle(H)&&!Zb(H,a.floating)&&Array.from(X).every(ie=>!Zb($,ie)))return;if(al(H)&&M){const ie=H.clientWidth>0&&H.scrollWidth>H.clientWidth,ee=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let ue=ee&&R.offsetX>H.clientWidth;if(ee&&_l(H).direction==="rtl"&&(ue=R.offsetX<=H.offsetWidth-H.clientWidth),ue||ie&&R.offsetY>H.clientHeight)return}const K=(U=i.current.floatingContext)==null?void 0:U.nodeId,se=p&&yB(p.nodesRef.current,K).some(ie=>{var ee;return gB(R,(ee=ie.context)==null?void 0:ee.elements.floating)});if(gB(R,a.floating)||gB(R,a.domReference)||se)return;const Z=p?yB(p.nodesRef.current,K):[];if(Z.length>0){let ie=!0;if(Z.forEach(ee=>{var ue;if((ue=ee.context)!=null&&ue.open&&!ee.context.dataRef.current.__outsidePressBubbles){ie=!1;return}}),!ie)return}n(!1,R,"outside-press")}),S=yd(R=>{var U;const z=()=>{var Q;D(R),(Q=Ig(R))==null||Q.removeEventListener(u,z)};(U=Ig(R))==null||U.addEventListener(u,z)});y.useEffect(()=>{if(!r||!o)return;i.current.__escapeKeyBubbles=C,i.current.__outsidePressBubbles=j;let R=-1;function U(X){n(!1,X,"ancestor-scroll")}function z(){window.clearTimeout(R),E.current=!0}function Q(){R=window.setTimeout(()=>{E.current=!1},UN()?5:0)}const H=XA(a.floating);l&&(H.addEventListener("keydown",w?k:_,w),H.addEventListener("compositionstart",z),H.addEventListener("compositionend",Q)),x&&H.addEventListener(u,N?S:D,N);let q=[];return A&&(is(a.domReference)&&(q=kd(a.domReference)),is(a.floating)&&(q=q.concat(kd(a.floating))),!is(a.reference)&&a.reference&&a.reference.contextElement&&(q=q.concat(kd(a.reference.contextElement)))),q=q.filter(X=>{var $;return X!==(($=H.defaultView)==null?void 0:$.visualViewport)}),q.forEach(X=>{X.addEventListener("scroll",U,{passive:!0})}),()=>{l&&(H.removeEventListener("keydown",w?k:_,w),H.removeEventListener("compositionstart",z),H.removeEventListener("compositionend",Q)),x&&H.removeEventListener(u,N?S:D,N),q.forEach(X=>{X.removeEventListener("scroll",U)}),window.clearTimeout(R)}},[i,a,l,x,u,r,n,A,o,C,j,_,w,k,D,N,S]),y.useEffect(()=>{v.current=!1},[x,u]);const F=y.useMemo(()=>({onKeyDown:_,[Mce[f]]:R=>{d&&n(!1,R.nativeEvent,"reference-press")}}),[_,n,d,f]),M=y.useMemo(()=>({onKeyDown:_,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[Lce[u]]:()=>{v.current=!0}}),[_,u]);return y.useMemo(()=>o?{reference:F,floating:M}:{},[o,F,M])}function $ce(t){const{open:e=!1,onOpenChange:r,elements:n}=t,a=rV(),i=y.useRef({}),[o]=y.useState(()=>Dce()),l=jP()!=null,[c,u]=y.useState(n.reference),d=yd((h,m,p)=>{i.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:p,nested:l}),r==null||r(h,m,p)}),f=y.useMemo(()=>({setPositionReference:u}),[]),A=y.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return y.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:A,events:o,floatingId:a,refs:f}),[e,d,A,o,a,f])}function SP(t){t===void 0&&(t={});const{nodeId:e}=t,r=$ce({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,a=n.elements,[i,o]=y.useState(null),[l,c]=y.useState(null),d=(a==null?void 0:a.domReference)||i,f=y.useRef(null),A=CP();Nu(()=>{d&&(f.current=d)},[d]);const h=yce({...t,elements:{...a,...l&&{reference:l}}}),m=y.useCallback(b=>{const C=is(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;c(C),h.refs.setReference(C)},[h.refs]),p=y.useCallback(b=>{(is(b)||b===null)&&(f.current=b,o(b)),(is(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!is(b))&&h.refs.setReference(b)},[h.refs]),g=y.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),x=y.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),v=y.useMemo(()=>({...h,...n,refs:g,elements:x,nodeId:e}),[h,g,x,e,n]);return Nu(()=>{n.dataRef.current.floatingContext=v;const b=A==null?void 0:A.nodesRef.current.find(C=>C.id===e);b&&(b.context=v)}),y.useMemo(()=>({...h,context:v,refs:g,elements:x}),[h,g,x,v])}function Hce(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,events:a,dataRef:i,elements:o}=t,{enabled:l=!0,visibleOnly:c=!0}=e,u=y.useRef(!1),d=y.useRef(),f=y.useRef(!0);y.useEffect(()=>{if(!l)return;const h=Eo(o.domReference);function m(){!r&&al(o.domReference)&&o.domReference===VR(XA(o.domReference))&&(u.current=!0)}function p(){f.current=!0}return h.addEventListener("blur",m),h.addEventListener("keydown",p,!0),()=>{h.removeEventListener("blur",m),h.removeEventListener("keydown",p,!0)}},[o.domReference,r,l]),y.useEffect(()=>{if(!l)return;function h(m){let{reason:p}=m;(p==="reference-press"||p==="escape-key")&&(u.current=!0)}return a.on("openchange",h),()=>{a.off("openchange",h)}},[a,l]),y.useEffect(()=>()=>{clearTimeout(d.current)},[]);const A=y.useMemo(()=>({onPointerDown(h){Nle(h.nativeEvent)||(f.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const m=Ig(h.nativeEvent);if(c&&is(m))try{if(Sle()&&Ele())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!_le(m))return}n(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const m=h.relatedTarget,p=h.nativeEvent,g=is(m)&&m.hasAttribute(NP("focus-guard"))&&m.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var x;const v=VR(o.domReference?o.domReference.ownerDocument:document);!m&&v===o.domReference||Zb((x=i.current.floatingContext)==null?void 0:x.refs.floating.current,v)||Zb(o.domReference,v)||g||n(!1,p,"focus")})}}),[i,o.domReference,n,c]);return y.useMemo(()=>l?{reference:A}:{},[l,A])}const nM="active",sM="selected";function wB(t,e,r){const n=new Map,a=r==="item";let i=t;if(a&&t){const{[nM]:o,[sM]:l,...c}=t;i=c}return{...r==="floating"&&{tabIndex:-1,[Rce]:""},...i,...e.map(o=>{const l=o?o[r]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(c=>{let[u,d]=c;if(!(a&&[nM,sM].includes(u)))if(u.indexOf("on")===0){if(n.has(u)||n.set(u,[]),typeof d=="function"){var f;(f=n.get(u))==null||f.push(d),o[u]=function(){for(var A,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(A=n.get(u))==null?void 0:A.map(g=>g(...m)).find(g=>g!==void 0)}}}else o[u]=d}),o),{})}}function Qce(t){t===void 0&&(t=[]);const e=t.map(l=>l==null?void 0:l.reference),r=t.map(l=>l==null?void 0:l.floating),n=t.map(l=>l==null?void 0:l.item),a=y.useCallback(l=>wB(l,t,"reference"),e),i=y.useCallback(l=>wB(l,t,"floating"),r),o=y.useCallback(l=>wB(l,t,"item"),n);return y.useMemo(()=>({getReferenceProps:a,getFloatingProps:i,getItemProps:o}),[a,i,o])}const zce=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Vce(t,e){var r;e===void 0&&(e={});const{open:n,floatingId:a}=t,{enabled:i=!0,role:o="dialog"}=e,l=(r=zce.get(o))!=null?r:o,c=rV(),d=jP()!=null,f=y.useMemo(()=>l==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:n?a:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":l==="alertdialog"?"dialog":l,"aria-controls":n?a:void 0,...l==="listbox"&&{role:"combobox"},...l==="menu"&&{id:c},...l==="menu"&&d&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[l,a,d,n,c,o]),A=y.useMemo(()=>{const m={id:a,...l&&{role:l}};return l==="tooltip"||o==="label"?m:{...m,...l==="menu"&&{"aria-labelledby":c}}},[l,a,c,o]),h=y.useCallback(m=>{let{active:p,selected:g}=m;const x={role:"option",...p&&{id:a+"-option"}};switch(o){case"select":return{...x,"aria-selected":p&&g};case"combobox":return{...x,...p&&{"aria-selected":!0}}}return{}},[a,o]);return y.useMemo(()=>i?{reference:f,floating:A,item:h}:{},[i,f,A,h])}const[Wce,$l]=so("ScrollArea.Root component was not found in tree");function m0(t,e){const r=WA(e);dw(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}const Gce=y.forwardRef((t,e)=>{const{style:r,...n}=t,a=$l(),[i,o]=y.useState(0),[l,c]=y.useState(0),u=!!(i&&l);return m0(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),m0(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx("div",{...n,ref:e,style:{...r,width:i,height:l}}):null}),qce=y.forwardRef((t,e)=>{const r=$l(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(Gce,{...t,ref:e}):null}),Kce={scrollHideDelay:1e3,type:"hover"},sV=y.forwardRef((t,e)=>{const r=nt("ScrollAreaRoot",Kce,t),{type:n,scrollHideDelay:a,scrollbars:i,...o}=r,[l,c]=y.useState(null),[u,d]=y.useState(null),[f,A]=y.useState(null),[h,m]=y.useState(null),[p,g]=y.useState(null),[x,v]=y.useState(0),[b,C]=y.useState(0),[j,w]=y.useState(!1),[N,E]=y.useState(!1),_=Zs(e,k=>c(k));return s.jsx(Wce,{value:{type:n,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:A,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:j,onScrollbarXEnabledChange:w,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:E,onCornerWidthChange:v,onCornerHeightChange:C},children:s.jsx(ut,{...o,ref:_,__vars:{"--sa-corner-width":i!=="xy"?"0px":`${x}px`,"--sa-corner-height":i!=="xy"?"0px":`${b}px`}})})});sV.displayName="@mantine/core/ScrollAreaRoot";function aV(t,e){const r=t/e;return Number.isNaN(r)?0:r}function HN(t){const e=aV(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function iV(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function Yce(t,[e,r]){return Math.min(r,Math.max(e,t))}function aM(t,e,r="ltr"){const n=HN(e),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-a,o=e.content-e.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Yce(t,c);return iV([0,o],[0,l])(u)}function Xce(t,e,r,n="ltr"){const a=HN(r),i=a/2,o=e||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return iV([c,u],f)(t)}function oV(t,e){return t>0&&t<e}function hh(t){return t?parseInt(t,10):0}function um(t,e,{checkForDefaultPrevented:r=!0}={}){return n=>{t==null||t(n),(r===!1||!n.defaultPrevented)&&(e==null||e(n))}}const[Jce,lV]=so("ScrollAreaScrollbar was not found in tree"),cV=y.forwardRef((t,e)=>{const{sizes:r,hasThumb:n,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...f}=t,A=$l(),[h,m]=y.useState(null),p=Zs(e,E=>m(E)),g=y.useRef(null),x=y.useRef(""),{viewport:v}=A,b=r.content-r.viewport,C=WA(u),j=WA(l),w=ON(d,10),N=E=>{if(g.current){const _=E.clientX-g.current.left,k=E.clientY-g.current.top;c({x:_,y:k})}};return y.useEffect(()=>{const E=_=>{const k=_.target;(h==null?void 0:h.contains(k))&&C(_,b)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[v,h,b,C]),y.useEffect(j,[r,j]),m0(h,w),m0(A.content,w),s.jsx(Jce,{value:{scrollbar:h,hasThumb:n,onThumbChange:WA(a),onThumbPointerUp:WA(i),onThumbPositionChange:j,onThumbPointerDown:WA(o)},children:s.jsx("div",{...f,ref:p,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:um(t.onPointerDown,E=>{E.preventDefault(),E.button===0&&(E.target.setPointerCapture(E.pointerId),g.current=h.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",N(E))}),onPointerMove:um(t.onPointerMove,N),onPointerUp:um(t.onPointerUp,E=>{const _=E.target;_.hasPointerCapture(E.pointerId)&&(E.preventDefault(),_.releasePointerCapture(E.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=x.current,g.current=null}})})}),uV=y.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:a,...i}=t,o=$l(),[l,c]=y.useState(),u=y.useRef(null),d=Zs(e,u,o.onScrollbarXChange);return y.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(cV,{"data-orientation":"horizontal",...i,ref:d,sizes:r,style:{...a,"--sa-thumb-width":`${HN(r)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,A)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(h),oV(h,A)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:hh(l.paddingLeft),paddingEnd:hh(l.paddingRight)}})}})});uV.displayName="@mantine/core/ScrollAreaScrollbarX";const dV=y.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:a,...i}=t,o=$l(),[l,c]=y.useState(),u=y.useRef(null),d=Zs(e,u,o.onScrollbarYChange);return y.useEffect(()=>{u.current&&c(window.getComputedStyle(u.current))},[]),s.jsx(cV,{...i,"data-orientation":"vertical",ref:d,sizes:r,style:{"--sa-thumb-height":`${HN(r)}px`,...a},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,A)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(h),oV(h,A)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:hh(l.paddingTop),paddingEnd:hh(l.paddingBottom)}})}})});dV.displayName="@mantine/core/ScrollAreaScrollbarY";const QN=y.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,{dir:a}=Jm(),i=$l(),o=y.useRef(null),l=y.useRef(0),[c,u]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=aV(c.viewport,c.content),f={...n,sizes:c,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{l.current=0},onThumbPointerDown:h=>{l.current=h}},A=(h,m)=>Xce(h,l.current,c,m);return r==="horizontal"?s.jsx(uV,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollLeft,m=aM(h,c,a);o.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=A(h,a))}}):r==="vertical"?s.jsx(dV,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollTop,m=aM(h,c);c.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=A(h))}}):null});QN.displayName="@mantine/core/ScrollAreaScrollbarVisible";const EP=y.forwardRef((t,e)=>{const r=$l(),{forceMount:n,...a}=t,[i,o]=y.useState(!1),l=t.orientation==="horizontal",c=ON(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return m0(r.viewport,c),m0(r.content,c),n||i?s.jsx(QN,{"data-state":i?"visible":"hidden",...a,ref:e}):null});EP.displayName="@mantine/core/ScrollAreaScrollbarAuto";const fV=y.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=$l(),[i,o]=y.useState(!1);return y.useEffect(()=>{const{scrollArea:l}=a;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),r||i?s.jsx(EP,{"data-state":i?"visible":"hidden",...n,ref:e}):null});fV.displayName="@mantine/core/ScrollAreaScrollbarHover";const Zce=y.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=$l(),i=t.orientation==="horizontal",[o,l]=y.useState("hidden"),c=ON(()=>l("idle"),100);return y.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("hidden"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay]),y.useEffect(()=>{const{viewport:u}=a,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const A=()=>{const h=u[d];f!==h&&(l("scrolling"),c()),f=h};return u.addEventListener("scroll",A),()=>u.removeEventListener("scroll",A)}},[a.viewport,i,c]),r||o!=="hidden"?s.jsx(QN,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:um(t.onPointerEnter,()=>l("interacting")),onPointerLeave:um(t.onPointerLeave,()=>l("idle"))}):null}),U4=y.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=$l(),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=t.orientation==="horizontal";return y.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(fV,{...n,ref:e,forceMount:r}):a.type==="scroll"?s.jsx(Zce,{...n,ref:e,forceMount:r}):a.type==="auto"?s.jsx(EP,{...n,ref:e,forceMount:r}):a.type==="always"?s.jsx(QN,{...n,ref:e}):null});U4.displayName="@mantine/core/ScrollAreaScrollbar";function eue(t,e=()=>{}){let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&e(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)}const hV=y.forwardRef((t,e)=>{const{style:r,...n}=t,a=$l(),i=lV(),{onThumbPositionChange:o}=i,l=Zs(e,d=>i.onThumbChange(d)),c=y.useRef(void 0),u=ON(()=>{c.current&&(c.current(),c.current=void 0)},100);return y.useEffect(()=>{const{viewport:d}=a;if(d){const f=()=>{if(u(),!c.current){const A=eue(d,o);c.current=A,o()}};return o(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[a.viewport,u,o]),s.jsx("div",{"data-state":i.hasThumb?"visible":"hidden",...n,ref:l,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:um(t.onPointerDownCapture,d=>{const A=d.target.getBoundingClientRect(),h=d.clientX-A.left,m=d.clientY-A.top;i.onThumbPointerDown({x:h,y:m})}),onPointerUp:um(t.onPointerUp,i.onThumbPointerUp)})});hV.displayName="@mantine/core/ScrollAreaThumb";const $4=y.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=lV();return r||a.hasThumb?s.jsx(hV,{ref:e,...n}):null});$4.displayName="@mantine/core/ScrollAreaThumb";const AV=y.forwardRef(({children:t,style:e,...r},n)=>{const a=$l(),i=Zs(n,a.onViewportChange);return s.jsx(ut,{...r,ref:i,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e},children:s.jsx("div",{style:{minWidth:"100%"},ref:a.onContentChange,children:t})})});AV.displayName="@mantine/core/ScrollAreaViewport";var BP={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const mV={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},tue=(t,{scrollbarSize:e,overscrollBehavior:r})=>({root:{"--scrollarea-scrollbar-size":vt(e),"--scrollarea-over-scroll-behavior":r}}),Zm=wt((t,e)=>{const r=nt("ScrollArea",mV,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,scrollbarSize:c,vars:u,type:d,scrollHideDelay:f,viewportProps:A,viewportRef:h,onScrollPositionChange:m,children:p,offsetScrollbars:g,scrollbars:x,onBottomReached:v,onTopReached:b,overscrollBehavior:C,...j}=r,[w,N]=y.useState(!1),[E,_]=y.useState(!1),[k,D]=y.useState(!1),S=Wt({name:"ScrollArea",props:r,classes:BP,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:u,varsResolver:tue}),F=y.useRef(null),M=Cce([h,F]);return y.useEffect(()=>{if(!F.current||g!=="present")return;const R=F.current,U=new ResizeObserver(()=>{const{scrollHeight:z,clientHeight:Q,scrollWidth:H,clientWidth:q}=R;_(z>Q),D(H>q)});return U.observe(R),()=>U.disconnect()},[F,g]),s.jsxs(sV,{type:d==="never"?"always":d,scrollHideDelay:f,ref:e,scrollbars:x,...S("root"),...j,children:[s.jsx(AV,{...A,...S("viewport",{style:A==null?void 0:A.style}),ref:M,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":x||void 0,"data-horizontal-hidden":g==="present"&&!k?"true":void 0,"data-vertical-hidden":g==="present"&&!E?"true":void 0,onScroll:R=>{var H;(H=A==null?void 0:A.onScroll)==null||H.call(A,R),m==null||m({x:R.currentTarget.scrollLeft,y:R.currentTarget.scrollTop});const{scrollTop:U,scrollHeight:z,clientHeight:Q}=R.currentTarget;U-(z-Q)>=-.6&&(v==null||v()),U===0&&(b==null||b())},children:p}),(x==="xy"||x==="x")&&s.jsx(U4,{...S("scrollbar"),orientation:"horizontal","data-hidden":d==="never"||g==="present"&&!k?!0:void 0,forceMount:!0,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:s.jsx($4,{...S("thumb")})}),(x==="xy"||x==="y")&&s.jsx(U4,{...S("scrollbar"),orientation:"vertical","data-hidden":d==="never"||g==="present"&&!E?!0:void 0,forceMount:!0,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:s.jsx($4,{...S("thumb")})}),s.jsx(qce,{...S("corner"),"data-hovered":w||void 0,"data-hidden":d==="never"||void 0})]})});Zm.displayName="@mantine/core/ScrollArea";const TP=wt((t,e)=>{const{children:r,classNames:n,styles:a,scrollbarSize:i,scrollHideDelay:o,type:l,dir:c,offsetScrollbars:u,viewportRef:d,onScrollPositionChange:f,unstyled:A,variant:h,viewportProps:m,scrollbars:p,style:g,vars:x,onBottomReached:v,onTopReached:b,...C}=nt("ScrollAreaAutosize",mV,t);return s.jsx(ut,{...C,ref:e,style:[{display:"flex",overflow:"auto"},g],children:s.jsx(ut,{style:{display:"flex",flexDirection:"column",flex:1},children:s.jsx(Zm,{classNames:n,styles:a,scrollHideDelay:o,scrollbarSize:i,type:l,dir:c,offsetScrollbars:u,viewportRef:d,onScrollPositionChange:f,unstyled:A,variant:h,viewportProps:m,vars:x,scrollbars:p,onBottomReached:v,onTopReached:b,children:r})})})});Zm.classes=BP;TP.displayName="@mantine/core/ScrollAreaAutosize";TP.classes=BP;Zm.Autosize=TP;var pV={root:"m_87cf2631"};const rue={__staticSelector:"UnstyledButton"},yi=Si((t,e)=>{const r=nt("UnstyledButton",rue,t),{className:n,component:a="button",__staticSelector:i,unstyled:o,classNames:l,styles:c,style:u,...d}=r,f=Wt({name:i,props:r,classes:pV,className:n,style:u,classNames:l,styles:c,unstyled:o});return s.jsx(ut,{...f("root",{focusable:!0}),component:a,ref:e,type:a==="button"?"button":void 0,...d})});yi.classes=pV;yi.displayName="@mantine/core/UnstyledButton";var gV={root:"m_515a97f8"};const nue={},DP=wt((t,e)=>{const r=nt("VisuallyHidden",nue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,...u}=r,d=Wt({name:"VisuallyHidden",classes:gV,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l});return s.jsx(ut,{component:"span",ref:e,...d("root"),...u})});DP.classes=gV;DP.displayName="@mantine/core/VisuallyHidden";var xV={root:"m_1b7284a3"};const sue={},aue=(t,{radius:e,shadow:r})=>({root:{"--paper-radius":e===void 0?void 0:es(e),"--paper-shadow":aP(r)}}),Hn=Si((t,e)=>{const r=nt("Paper",sue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,withBorder:c,vars:u,radius:d,shadow:f,variant:A,mod:h,...m}=r,p=Wt({name:"Paper",props:r,classes:xV,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:u,varsResolver:aue});return s.jsx(ut,{ref:e,mod:[{"data-with-border":c},h],...p("root"),variant:A,...m})});Hn.classes=xV;Hn.displayName="@mantine/core/Paper";function vV(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[r,n]=e.split("-"),a=r==="right"?"left":"right";return n===void 0?a:`${a}-${n}`}return e}function iM(t,e,r,n){return t==="center"||n==="center"?{top:e}:t==="end"?{bottom:r}:t==="start"?{top:r}:{}}function oM(t,e,r,n,a){return t==="center"||n==="center"?{left:e}:t==="end"?{[a==="ltr"?"right":"left"]:r}:t==="start"?{[a==="ltr"?"left":"right"]:r}:{}}const iue={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function oue({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:a,arrowX:i,arrowY:o,dir:l}){const[c,u="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[iue[c]]:n},f=-e/2;return c==="left"?{...d,...iM(u,o,r,a),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:c==="right"?{...d,...iM(u,o,r,a),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:c==="top"?{...d,...oM(u,i,r,a,l),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:c==="bottom"?{...d,...oM(u,i,r,a,l),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const IP=y.forwardRef(({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:a,visible:i,arrowX:o,arrowY:l,style:c,...u},d)=>{const{dir:f}=Jm();return i?s.jsx("div",{...u,ref:d,style:{...c,...oue({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:a,dir:f,arrowX:o,arrowY:l})}}):null});IP.displayName="@mantine/core/FloatingArrow";var bV={root:"m_9814e45f"};const lue={zIndex:Ec("modal")},cue=(t,{gradient:e,color:r,backgroundOpacity:n,blur:a,radius:i,zIndex:o})=>({root:{"--overlay-bg":e||(r!==void 0||n!==void 0)&&au(r||"#000",n??.6)||void 0,"--overlay-filter":a?`blur(${vt(a)})`:void 0,"--overlay-radius":i===void 0?void 0:es(i),"--overlay-z-index":o==null?void 0:o.toString()}}),p0=Si((t,e)=>{const r=nt("Overlay",lue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,fixed:u,center:d,children:f,radius:A,zIndex:h,gradient:m,blur:p,color:g,backgroundOpacity:x,mod:v,...b}=r,C=Wt({name:"Overlay",props:r,classes:bV,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:cue});return s.jsx(ut,{ref:e,...C("root"),mod:[{center:d,fixed:u},v],...b,children:f})});p0.classes=bV;p0.displayName="@mantine/core/Overlay";function jB(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function uue({target:t,reuseTargetNode:e,...r}){if(t)return typeof t=="string"?document.querySelector(t)||jB(r):t;if(e){const n=document.querySelector("[data-mantine-shared-portal-node]");if(n)return n;const a=jB(r);return a.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(a),a}return jB(r)}const due={},yV=wt((t,e)=>{const{children:r,target:n,reuseTargetNode:a,...i}=nt("Portal",due,t),[o,l]=y.useState(!1),c=y.useRef(null);return dw(()=>(l(!0),c.current=uue({target:n,reuseTargetNode:a,...i}),j2(e,c.current),!n&&!a&&c.current&&document.body.appendChild(c.current),()=>{!n&&!a&&c.current&&document.body.removeChild(c.current)}),[n]),!o||!c.current?null:hc.createPortal(s.jsx(s.Fragment,{children:r}),c.current)});yV.displayName="@mantine/core/Portal";const ep=wt(({withinPortal:t=!0,children:e,...r},n)=>Dz()==="test"||!t?s.jsx(s.Fragment,{children:e}):s.jsx(yV,{ref:n,...r,children:e}));ep.displayName="@mantine/core/OptionalPortal";const Pv=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),$1={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Pv("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Pv("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Pv("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Pv("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Pv("top"),common:{transformOrigin:"top right"}}},lM={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function fue({transition:t,state:e,duration:r,timingFunction:n}){const a={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof t=="string"?t in $1?{transitionProperty:$1[t].transitionProperty,...a,...$1[t].common,...$1[t][lM[e]]}:{}:{transitionProperty:t.transitionProperty,...a,...t.common,...t[lM[e]]}}function hue({duration:t,exitDuration:e,timingFunction:r,mounted:n,onEnter:a,onExit:i,onEntered:o,onExited:l,enterDelay:c,exitDelay:u}){const d=Qs(),f=oP(),A=d.respectReducedMotion?f:!1,[h,m]=y.useState(A?0:t),[p,g]=y.useState(n?"entered":"exited"),x=y.useRef(-1),v=y.useRef(-1),b=y.useRef(-1);function C(){window.clearTimeout(x.current),window.clearTimeout(v.current),cancelAnimationFrame(b.current)}const j=N=>{C();const E=N?a:i,_=N?o:l,k=A?0:N?t:e;m(k),k===0?(typeof E=="function"&&E(),typeof _=="function"&&_(),g(N?"entered":"exited")):b.current=requestAnimationFrame(()=>{Fg.flushSync(()=>{g(N?"pre-entering":"pre-exiting")}),b.current=requestAnimationFrame(()=>{typeof E=="function"&&E(),g(N?"entering":"exiting"),x.current=window.setTimeout(()=>{typeof _=="function"&&_(),g(N?"entered":"exited")},k)})})},w=N=>{if(C(),typeof(N?c:u)!="number"){j(N);return}v.current=window.setTimeout(()=>{j(N)},N?c:u)};return Ou(()=>{w(n)},[n]),y.useEffect(()=>()=>{C()},[]),{transitionDuration:h,transitionStatus:p,transitionTimingFunction:r||"ease"}}function Bc({keepMounted:t,transition:e="fade",duration:r=250,exitDuration:n=r,mounted:a,children:i,timingFunction:o="ease",onExit:l,onEntered:c,onEnter:u,onExited:d,enterDelay:f,exitDelay:A}){const h=Dz(),{transitionDuration:m,transitionStatus:p,transitionTimingFunction:g}=hue({mounted:a,exitDuration:n,duration:r,timingFunction:o,onExit:l,onEntered:c,onEnter:u,onExited:d,enterDelay:f,exitDelay:A});return m===0||h==="test"?a?s.jsx(s.Fragment,{children:i({})}):t?i({display:"none"}):null:p==="exited"?t?i({display:"none"}):null:s.jsx(s.Fragment,{children:i(fue({transition:e,duration:m,state:p,timingFunction:g}))})}Bc.displayName="@mantine/core/Transition";const[Aue,wV]=so("Popover component was not found in the tree");function zN({children:t,active:e=!0,refProp:r="ref",innerRef:n}){const a=Yie(e),i=Zs(a,n);return rf(t)?y.cloneElement(t,{[r]:i}):t}function jV(t){return s.jsx(DP,{tabIndex:-1,"data-autofocus":!0,...t})}zN.displayName="@mantine/core/FocusTrap";jV.displayName="@mantine/core/FocusTrapInitialFocus";zN.InitialFocus=jV;var CV={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const mue={},_P=wt((t,e)=>{var g,x,v,b;const r=nt("PopoverDropdown",mue,t),{className:n,style:a,vars:i,children:o,onKeyDownCapture:l,variant:c,classNames:u,styles:d,...f}=r,A=wV(),h=Cz({opened:A.opened,shouldReturnFocus:A.returnFocus}),m=A.withRoles?{"aria-labelledby":A.getTargetId(),id:A.getDropdownId(),role:"dialog",tabIndex:-1}:{},p=Zs(e,A.floating);return A.disabled?null:s.jsx(ep,{...A.portalProps,withinPortal:A.withinPortal,children:s.jsx(Bc,{mounted:A.opened,...A.transitionProps,transition:((g=A.transitionProps)==null?void 0:g.transition)||"fade",duration:((x=A.transitionProps)==null?void 0:x.duration)??150,keepMounted:A.keepMounted,exitDuration:typeof((v=A.transitionProps)==null?void 0:v.exitDuration)=="number"?A.transitionProps.exitDuration:(b=A.transitionProps)==null?void 0:b.duration,children:C=>s.jsx(zN,{active:A.trapFocus&&A.opened,innerRef:p,children:s.jsxs(ut,{...m,...f,variant:c,onKeyDownCapture:Fie(()=>{var j,w;(j=A.onClose)==null||j.call(A),(w=A.onDismiss)==null||w.call(A)},{active:A.closeOnEscape,onTrigger:h,onKeyDown:l}),"data-position":A.placement,"data-fixed":A.floatingStrategy==="fixed"||void 0,...A.getStyles("dropdown",{className:n,props:r,classNames:u,styles:d,style:[{...C,zIndex:A.zIndex,top:A.y??0,left:A.x??0,width:A.width==="target"?void 0:vt(A.width)},A.resolvedStyles.dropdown,d==null?void 0:d.dropdown,a]}),children:[o,s.jsx(IP,{ref:A.arrowRef,arrowX:A.arrowX,arrowY:A.arrowY,visible:A.withArrow,position:A.placement,arrowSize:A.arrowSize,arrowRadius:A.arrowRadius,arrowOffset:A.arrowOffset,arrowPosition:A.arrowPosition,...A.getStyles("arrow",{props:r,classNames:u,styles:d})})]})})})})});_P.classes=CV;_P.displayName="@mantine/core/PopoverDropdown";const pue={refProp:"ref",popupType:"dialog"},NV=wt((t,e)=>{const{children:r,refProp:n,popupType:a,...i}=nt("PopoverTarget",pue,t);if(!rf(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=i,l=wV(),c=Zs(l.reference,FN(r),e),u=l.withRoles?{"aria-haspopup":a,"aria-expanded":l.opened,"aria-controls":l.getDropdownId(),id:l.getTargetId()}:{};return y.cloneElement(r,{...o,...u,...l.targetProps,className:qt(l.targetProps.className,o.className,r.props.className),[n]:c,...l.controlled?null:{onClick:l.onToggle}})});NV.displayName="@mantine/core/PopoverTarget";function SV({opened:t,floating:e,position:r,positionDependencies:n}){const[a,i]=y.useState(0);y.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return dce(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,a,r]),Ou(()=>{e.update()},n),Ou(()=>{i(o=>o+1)},[t])}function gue(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function xue(t,e){const r=gue(t.middlewares),n=[Zz(t.offset)];return r.shift&&n.push(wP(typeof r.shift=="boolean"?{limiter:JR(),padding:5}:{limiter:JR(),padding:5,...r.shift})),r.flip&&n.push(typeof r.flip=="boolean"?B2():B2(r.flip)),r.inline&&n.push(typeof r.inline=="boolean"?mb():mb(r.inline)),n.push(eV({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&n.push(jce({...typeof r.size=="boolean"?{}:r.size,apply({rects:a,availableWidth:i,availableHeight:o,...l}){var d;const u=((d=e().refs.floating.current)==null?void 0:d.style)??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:a,availableWidth:i,availableHeight:o,...l}):Object.assign(u,{maxWidth:`${i}px`,maxHeight:`${o}px`})),t.width==="target"&&Object.assign(u,{width:`${a.reference.width}px`})}})),n}function vue(t){const[e,r]=qa({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),n=y.useRef(e),a=()=>{e&&!t.disabled&&r(!1)},i=()=>!t.disabled&&r(!e),o=SP({strategy:t.strategy,placement:t.position,middleware:xue(t,()=>o)});return SV({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:o}),Ou(()=>{var l;(l=t.onPositionChange)==null||l.call(t,o.placement)},[o.placement]),Ou(()=>{var l,c;e!==n.current&&(e?(c=t.onOpen)==null||c.call(t):(l=t.onClose)==null||l.call(t)),n.current=e},[e,t.onClose,t.onOpen]),{floating:o,controlled:typeof t.opened=="boolean",opened:e,onClose:a,onToggle:i}}const bue={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ec("popover"),__staticSelector:"Popover",width:"max-content"},yue=(t,{radius:e,shadow:r})=>({dropdown:{"--popover-radius":e===void 0?void 0:es(e),"--popover-shadow":aP(r)}});function Ga(t){var ze,ht,gt,Ct,xt,Ie;const e=nt("Popover",bue,t),{children:r,position:n,offset:a,onPositionChange:i,positionDependencies:o,opened:l,transitionProps:c,onExitTransitionEnd:u,onEnterTransitionEnd:d,width:f,middlewares:A,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:x,unstyled:v,classNames:b,styles:C,closeOnClickOutside:j,withinPortal:w,portalProps:N,closeOnEscape:E,clickOutsideEvents:_,trapFocus:k,onClose:D,onDismiss:S,onOpen:F,onChange:M,zIndex:R,radius:U,shadow:z,id:Q,defaultOpened:H,__staticSelector:q,withRoles:X,disabled:$,returnFocus:K,variant:se,keepMounted:Z,vars:ie,floatingStrategy:ee,withOverlay:ue,overlayProps:ae,...re}=e,fe=Wt({name:q,props:e,classes:CV,classNames:b,styles:C,unstyled:v,rootSelector:"dropdown",vars:ie,varsResolver:yue}),{resolvedStyles:G}=Ul({classNames:b,styles:C,props:e}),oe=y.useRef(null),[Se,ge]=y.useState(null),[te,ye]=y.useState(null),{dir:we}=Jm(),be=Ll(Q),Te=vue({middlewares:A,width:f,position:vV(we,n),offset:typeof a=="number"?a+(h?m/2:0):a,arrowRef:oe,arrowOffset:p,onPositionChange:i,positionDependencies:o,opened:l,defaultOpened:H,onChange:M,onOpen:F,onClose:D,onDismiss:S,strategy:ee,disabled:$});jz(()=>{j&&(Te.onClose(),S==null||S())},_,[Se,te]);const Oe=y.useCallback(De=>{ge(De),Te.floating.refs.setReference(De)},[Te.floating.refs.setReference]),Me=y.useCallback(De=>{ye(De),Te.floating.refs.setFloating(De)},[Te.floating.refs.setFloating]),Ve=y.useCallback(()=>{var De;(De=c==null?void 0:c.onExited)==null||De.call(c),u==null||u()},[c==null?void 0:c.onExited,u]),Pe=y.useCallback(()=>{var De;(De=c==null?void 0:c.onEntered)==null||De.call(c),d==null||d()},[c==null?void 0:c.onEntered,d]);return s.jsxs(Aue,{value:{returnFocus:K,disabled:$,controlled:Te.controlled,reference:Oe,floating:Me,x:Te.floating.x,y:Te.floating.y,arrowX:(gt=(ht=(ze=Te.floating)==null?void 0:ze.middlewareData)==null?void 0:ht.arrow)==null?void 0:gt.x,arrowY:(Ie=(xt=(Ct=Te.floating)==null?void 0:Ct.middlewareData)==null?void 0:xt.arrow)==null?void 0:Ie.y,opened:Te.opened,arrowRef:oe,transitionProps:{...c,onExited:Ve,onEntered:Pe},width:f,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:x,placement:Te.floating.placement,trapFocus:k,withinPortal:w,portalProps:N,zIndex:R,radius:U,shadow:z,closeOnEscape:E,onDismiss:S,onClose:Te.onClose,onToggle:Te.onToggle,getTargetId:()=>`${be}-target`,getDropdownId:()=>`${be}-dropdown`,withRoles:X,targetProps:re,__staticSelector:q,classNames:b,styles:C,unstyled:v,variant:se,keepMounted:Z,getStyles:fe,resolvedStyles:G,floatingStrategy:ee},children:[r,ue&&s.jsx(Bc,{transition:"fade",mounted:Te.opened,duration:(c==null?void 0:c.duration)||250,exitDuration:(c==null?void 0:c.exitDuration)||250,children:De=>s.jsx(ep,{withinPortal:w,children:s.jsx(p0,{...ae,...fe("overlay",{className:ae==null?void 0:ae.className,style:[De,ae==null?void 0:ae.style]})})})})]})}Ga.Target=NV;Ga.Dropdown=_P;Ga.displayName="@mantine/core/Popover";Ga.extend=t=>t;var pc={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const EV=y.forwardRef(({className:t,...e},r)=>s.jsxs(ut,{component:"span",className:qt(pc.barsLoader,t),...e,ref:r,children:[s.jsx("span",{className:pc.bar}),s.jsx("span",{className:pc.bar}),s.jsx("span",{className:pc.bar})]}));EV.displayName="@mantine/core/Bars";const BV=y.forwardRef(({className:t,...e},r)=>s.jsxs(ut,{component:"span",className:qt(pc.dotsLoader,t),...e,ref:r,children:[s.jsx("span",{className:pc.dot}),s.jsx("span",{className:pc.dot}),s.jsx("span",{className:pc.dot})]}));BV.displayName="@mantine/core/Dots";const TV=y.forwardRef(({className:t,...e},r)=>s.jsx(ut,{component:"span",className:qt(pc.ovalLoader,t),...e,ref:r}));TV.displayName="@mantine/core/Oval";const DV={bars:EV,oval:TV,dots:BV},wue={loaders:DV,type:"oval"},jue=(t,{size:e,color:r})=>({root:{"--loader-size":vr(e,"loader-size"),"--loader-color":r?Is(r,t):void 0}}),Zi=wt((t,e)=>{const r=nt("Loader",wue,t),{size:n,color:a,type:i,vars:o,className:l,style:c,classNames:u,styles:d,unstyled:f,loaders:A,variant:h,children:m,...p}=r,g=Wt({name:"Loader",props:r,classes:pc,className:l,style:c,classNames:u,styles:d,unstyled:f,vars:o,varsResolver:jue});return m?s.jsx(ut,{...g("root"),ref:e,...p,children:m}):s.jsx(ut,{...g("root"),ref:e,component:A[i],variant:h,size:n,...p})});Zi.defaultLoaders=DV;Zi.classes=pc;Zi.displayName="@mantine/core/Loader";var fx={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const cM={orientation:"horizontal"},Cue=(t,{borderWidth:e})=>({group:{"--ai-border-width":vt(e)}}),PP=wt((t,e)=>{const r=nt("ActionIconGroup",cM,t),{className:n,style:a,classNames:i,styles:o,unstyled:l,orientation:c,vars:u,borderWidth:d,variant:f,mod:A,...h}=nt("ActionIconGroup",cM,t),m=Wt({name:"ActionIconGroup",props:r,classes:fx,className:n,style:a,classNames:i,styles:o,unstyled:l,vars:u,varsResolver:Cue,rootSelector:"group"});return s.jsx(ut,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":c},A],role:"group",...h})});PP.classes=fx;PP.displayName="@mantine/core/ActionIconGroup";const uM={},Nue=(t,{radius:e,color:r,gradient:n,variant:a,autoContrast:i,size:o})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:a||"filled",autoContrast:i});return{groupSection:{"--section-height":vr(o,"section-height"),"--section-padding-x":vr(o,"section-padding-x"),"--section-fz":Ds(o),"--section-radius":e===void 0?void 0:es(e),"--section-bg":r||a?l.background:void 0,"--section-color":l.color,"--section-bd":r||a?l.border:void 0}}},kP=wt((t,e)=>{const r=nt("ActionIconGroupSection",uM,t),{className:n,style:a,classNames:i,styles:o,unstyled:l,vars:c,variant:u,gradient:d,radius:f,autoContrast:A,...h}=nt("ActionIconGroupSection",uM,t),m=Wt({name:"ActionIconGroupSection",props:r,classes:fx,className:n,style:a,classNames:i,styles:o,unstyled:l,vars:c,varsResolver:Nue,rootSelector:"groupSection"});return s.jsx(ut,{...m("groupSection"),ref:e,variant:u,...h})});kP.classes=fx;kP.displayName="@mantine/core/ActionIconGroupSection";const Sue={},Eue=(t,{size:e,radius:r,variant:n,gradient:a,color:i,autoContrast:o})=>{const l=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:a,variant:n||"filled",autoContrast:o});return{root:{"--ai-size":vr(e,"ai-size"),"--ai-radius":r===void 0?void 0:es(r),"--ai-bg":i||n?l.background:void 0,"--ai-hover":i||n?l.hover:void 0,"--ai-hover-color":i||n?l.hoverColor:void 0,"--ai-color":l.color,"--ai-bd":i||n?l.border:void 0}}},Dn=Si((t,e)=>{const r=nt("ActionIcon",Sue,t),{className:n,unstyled:a,variant:i,classNames:o,styles:l,style:c,loading:u,loaderProps:d,size:f,color:A,radius:h,__staticSelector:m,gradient:p,vars:g,children:x,disabled:v,"data-disabled":b,autoContrast:C,mod:j,...w}=r,N=Wt({name:["ActionIcon",m],props:r,className:n,style:c,classes:fx,classNames:o,styles:l,unstyled:a,vars:g,varsResolver:Eue});return s.jsxs(yi,{...N("root",{active:!v&&!u&&!b}),...w,unstyled:a,variant:i,size:f,disabled:v||u,ref:e,mod:[{loading:u,disabled:v||b},j],children:[s.jsx(Bc,{mounted:!!u,transition:"slide-down",duration:150,children:E=>s.jsx(ut,{component:"span",...N("loader",{style:E}),"aria-hidden":!0,children:s.jsx(Zi,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),s.jsx(ut,{component:"span",mod:{loading:u},...N("icon"),children:x})]})});Dn.classes=fx;Dn.displayName="@mantine/core/ActionIcon";Dn.Group=PP;Dn.GroupSection=kP;const IV=y.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...r},n)=>s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:n,...r,children:s.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));IV.displayName="@mantine/core/CloseIcon";var _V={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Bue={variant:"subtle"},Tue=(t,{size:e,radius:r,iconSize:n})=>({root:{"--cb-size":vr(e,"cb-size"),"--cb-radius":r===void 0?void 0:es(r),"--cb-icon-size":vt(n)}}),Vh=Si((t,e)=>{const r=nt("CloseButton",Bue,t),{iconSize:n,children:a,vars:i,radius:o,className:l,classNames:c,style:u,styles:d,unstyled:f,"data-disabled":A,disabled:h,variant:m,icon:p,mod:g,__staticSelector:x,...v}=r,b=Wt({name:x||"CloseButton",props:r,className:l,style:u,classes:_V,classNames:c,styles:d,unstyled:f,vars:i,varsResolver:Tue});return s.jsxs(yi,{ref:e,...v,unstyled:f,variant:m,disabled:h,mod:[{disabled:h||A},g],...b("root",{variant:m,active:!h&&!A}),children:[p||s.jsx(IV,{}),a]})});Vh.classes=_V;Vh.displayName="@mantine/core/CloseButton";function Due(t){return y.Children.toArray(t).filter(Boolean)}var PV={root:"m_4081bf90"};const Iue={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},_ue=(t,{grow:e,preventGrowOverflow:r,gap:n,align:a,justify:i,wrap:o},{childWidth:l})=>({root:{"--group-child-width":e&&r?l:void 0,"--group-gap":$s(n),"--group-align":a,"--group-justify":i,"--group-wrap":o}}),Bt=wt((t,e)=>{const r=nt("Group",Iue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,children:c,gap:u,align:d,justify:f,wrap:A,grow:h,preventGrowOverflow:m,vars:p,variant:g,__size:x,mod:v,...b}=r,C=Due(c),j=C.length,w=$s(u??"md"),E={childWidth:`calc(${100/j}% - (${w} - ${w} / ${j}))`},_=Wt({name:"Group",props:r,stylesCtx:E,className:a,style:i,classes:PV,classNames:n,styles:o,unstyled:l,vars:p,varsResolver:_ue});return s.jsx(ut,{..._("root"),ref:e,variant:g,mod:[{grow:h},v],size:x,...b,children:C})});Bt.classes=PV;Bt.displayName="@mantine/core/Group";const[Pue,nf]=so("ModalBase component was not found in tree");function kue({opened:t,transitionDuration:e}){const[r,n]=y.useState(t),a=y.useRef(-1),o=oP()?0:e;return y.useEffect(()=>(t?(n(!0),window.clearTimeout(a.current)):o===0?n(!1):a.current=window.setTimeout(()=>n(!1),o),()=>window.clearTimeout(a.current)),[t,o]),r}function Oue({id:t,transitionProps:e,opened:r,trapFocus:n,closeOnEscape:a,onClose:i,returnFocus:o}){const l=Ll(t),[c,u]=y.useState(!1),[d,f]=y.useState(!1),A=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,h=kue({opened:r,transitionDuration:A});return toe("keydown",m=>{var p;m.key==="Escape"&&a&&!m.isComposing&&r&&((p=m.target)==null?void 0:p.getAttribute("data-mantine-stop-propagation"))!=="true"&&i()},{capture:!0}),Cz({opened:r,shouldReturnFocus:n&&o}),{_id:l,titleMounted:c,bodyMounted:d,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:f}}const kV=y.forwardRef(({keepMounted:t,opened:e,onClose:r,id:n,transitionProps:a,onExitTransitionEnd:i,onEnterTransitionEnd:o,trapFocus:l,closeOnEscape:c,returnFocus:u,closeOnClickOutside:d,withinPortal:f,portalProps:A,lockScroll:h,children:m,zIndex:p,shadow:g,padding:x,__vars:v,unstyled:b,removeScrollProps:C,...j},w)=>{const{_id:N,titleMounted:E,bodyMounted:_,shouldLockScroll:k,setTitleMounted:D,setBodyMounted:S}=Oue({id:n,transitionProps:a,opened:e,trapFocus:l,closeOnEscape:c,onClose:r,returnFocus:u}),{key:F,...M}=C||{};return s.jsx(ep,{...A,withinPortal:f,children:s.jsx(Pue,{value:{opened:e,onClose:r,closeOnClickOutside:d,onExitTransitionEnd:i,onEnterTransitionEnd:o,transitionProps:{...a,keepMounted:t},getTitleId:()=>`${N}-title`,getBodyId:()=>`${N}-body`,titleMounted:E,bodyMounted:_,setTitleMounted:D,setBodyMounted:S,trapFocus:l,closeOnEscape:c,zIndex:p,unstyled:b},children:s.jsx(b2,{enabled:k&&h,...M,children:s.jsx(ut,{ref:w,...j,__vars:{...v,"--mb-z-index":(p||Ec("modal")).toString(),"--mb-shadow":aP(g),"--mb-padding":$s(x)},children:m})},F)})})});kV.displayName="@mantine/core/ModalBase";function Fue(){const t=nf();return y.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var g0={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const OV=y.forwardRef(({className:t,...e},r)=>{const n=Fue(),a=nf();return s.jsx(ut,{ref:r,...e,id:n,className:qt({[g0.body]:!a.unstyled},t)})});OV.displayName="@mantine/core/ModalBaseBody";const FV=y.forwardRef(({className:t,onClick:e,...r},n)=>{const a=nf();return s.jsx(Vh,{ref:n,...r,onClick:i=>{a.onClose(),e==null||e(i)},className:qt({[g0.close]:!a.unstyled},t),unstyled:a.unstyled})});FV.displayName="@mantine/core/ModalBaseCloseButton";const RV=y.forwardRef(({transitionProps:t,className:e,innerProps:r,onKeyDown:n,style:a,...i},o)=>{const l=nf();return s.jsx(Bc,{mounted:l.opened,transition:"pop",...l.transitionProps,onExited:()=>{var c,u,d;(c=l.onExitTransitionEnd)==null||c.call(l),(d=(u=l.transitionProps)==null?void 0:u.onExited)==null||d.call(u)},onEntered:()=>{var c,u,d;(c=l.onEnterTransitionEnd)==null||c.call(l),(d=(u=l.transitionProps)==null?void 0:u.onEntered)==null||d.call(u)},...t,children:c=>s.jsx("div",{...r,className:qt({[g0.inner]:!l.unstyled},r.className),children:s.jsx(zN,{active:l.opened&&l.trapFocus,innerRef:o,children:s.jsx(Hn,{...i,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":l.bodyMounted?l.getBodyId():void 0,"aria-labelledby":l.titleMounted?l.getTitleId():void 0,style:[a,c],className:qt({[g0.content]:!l.unstyled},e),unstyled:l.unstyled,children:i.children})})})})});RV.displayName="@mantine/core/ModalBaseContent";const MV=y.forwardRef(({className:t,...e},r)=>{const n=nf();return s.jsx(ut,{component:"header",ref:r,className:qt({[g0.header]:!n.unstyled},t),...e})});MV.displayName="@mantine/core/ModalBaseHeader";const Rue={duration:200,timingFunction:"ease",transition:"fade"};function Mue(t){const e=nf();return{...Rue,...e.transitionProps,...t}}const LV=y.forwardRef(({onClick:t,transitionProps:e,style:r,visible:n,...a},i)=>{const o=nf(),l=Mue(e);return s.jsx(Bc,{mounted:n!==void 0?n:o.opened,...l,transition:"fade",children:c=>s.jsx(p0,{ref:i,fixed:!0,style:[r,c],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{t==null||t(u),o.closeOnClickOutside&&o.onClose()},...a})})});LV.displayName="@mantine/core/ModalBaseOverlay";function Lue(){const t=nf();return y.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const UV=y.forwardRef(({className:t,...e},r)=>{const n=Lue(),a=nf();return s.jsx(ut,{component:"h2",ref:r,className:qt({[g0.title]:!a.unstyled},t),...e,id:n})});UV.displayName="@mantine/core/ModalBaseTitle";function Uue({children:t}){return s.jsx(s.Fragment,{children:t})}const[$ue,Hue]=uw({size:"sm"}),Que={},$V=wt((t,e)=>{const r=nt("InputClearButton",Que,t),{size:n,variant:a,vars:i,classNames:o,styles:l,...c}=r,u=Hue(),{resolvedClassNames:d,resolvedStyles:f}=Ul({classNames:o,styles:l,props:r});return s.jsx(Vh,{variant:a||"transparent",ref:e,size:n||(u==null?void 0:u.size)||"sm",classNames:d,styles:f,__staticSelector:"InputClearButton",...c})});$V.displayName="@mantine/core/InputClearButton";const[zue,hx]=uw({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Hl={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const dM={},Vue=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Ds(e)} - ${vt(2)})`}}),VN=wt((t,e)=>{const r=nt("InputDescription",dM,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,size:u,__staticSelector:d,__inheritStyles:f=!0,variant:A,...h}=nt("InputDescription",dM,r),m=hx(),p=Wt({name:["InputWrapper",d],props:r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,rootSelector:"description",vars:c,varsResolver:Vue}),g=f&&(m==null?void 0:m.getStyles)||p;return s.jsx(ut,{component:"p",ref:e,variant:A,size:u,...g("description",m!=null&&m.getStyles?{className:a,style:i}:void 0),...h})});VN.classes=Hl;VN.displayName="@mantine/core/InputDescription";const Wue={},Gue=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Ds(e)} - ${vt(2)})`}}),WN=wt((t,e)=>{const r=nt("InputError",Wue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,size:u,__staticSelector:d,__inheritStyles:f=!0,variant:A,...h}=r,m=Wt({name:["InputWrapper",d],props:r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,rootSelector:"error",vars:c,varsResolver:Gue}),p=hx(),g=f&&(p==null?void 0:p.getStyles)||m;return s.jsx(ut,{component:"p",ref:e,variant:A,size:u,...g("error",p!=null&&p.getStyles?{className:a,style:i}:void 0),...h})});WN.classes=Hl;WN.displayName="@mantine/core/InputError";const fM={labelElement:"label"},que=(t,{size:e})=>({label:{"--input-label-size":Ds(e),"--input-asterisk-color":void 0}}),GN=wt((t,e)=>{const r=nt("InputLabel",fM,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,labelElement:u,size:d,required:f,htmlFor:A,onMouseDown:h,children:m,__staticSelector:p,variant:g,mod:x,...v}=nt("InputLabel",fM,r),b=Wt({name:["InputWrapper",p],props:r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,rootSelector:"label",vars:c,varsResolver:que}),C=hx(),j=(C==null?void 0:C.getStyles)||b;return s.jsxs(ut,{...j("label",C!=null&&C.getStyles?{className:a,style:i}:void 0),component:u,variant:g,size:d,ref:e,htmlFor:u==="label"?A:void 0,mod:[{required:f},x],onMouseDown:w=>{h==null||h(w),!w.defaultPrevented&&w.detail>1&&w.preventDefault()},...v,children:[m,f&&s.jsx("span",{...j("required"),"aria-hidden":!0,children:" *"})]})});GN.classes=Hl;GN.displayName="@mantine/core/InputLabel";const hM={},OP=wt((t,e)=>{const r=nt("InputPlaceholder",hM,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,__staticSelector:u,variant:d,error:f,mod:A,...h}=nt("InputPlaceholder",hM,r),m=Wt({name:["InputPlaceholder",u],props:r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,rootSelector:"placeholder"});return s.jsx(ut,{...m("placeholder"),mod:[{error:!!f},A],component:"span",variant:d,ref:e,...h})});OP.classes=Hl;OP.displayName="@mantine/core/InputPlaceholder";function Kue(t,{hasDescription:e,hasError:r}){const n=t.findIndex(c=>c==="input"),a=t.slice(0,n),i=t.slice(n+1),o=e&&a.includes("description")||r&&a.includes("error");return{offsetBottom:e&&i.includes("description")||r&&i.includes("error"),offsetTop:o}}const Yue={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},Xue=(t,{size:e})=>({label:{"--input-label-size":Ds(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Ds(e)} - ${vt(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Ds(e)} - ${vt(2)})`}}),FP=wt((t,e)=>{const r=nt("InputWrapper",Yue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,size:u,variant:d,__staticSelector:f,inputContainer:A,inputWrapperOrder:h,label:m,error:p,description:g,labelProps:x,descriptionProps:v,errorProps:b,labelElement:C,children:j,withAsterisk:w,id:N,required:E,__stylesApiProps:_,mod:k,...D}=r,S=Wt({name:["InputWrapper",f],props:_||r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Xue}),F={size:u,variant:d,__staticSelector:f},M=Ll(N),R=typeof w=="boolean"?w:E,U=(b==null?void 0:b.id)||`${M}-error`,z=(v==null?void 0:v.id)||`${M}-description`,Q=M,H=!!p&&typeof p!="boolean",q=!!g,X=`${H?U:""} ${q?z:""}`,$=X.trim().length>0?X.trim():void 0,K=(x==null?void 0:x.id)||`${M}-label`,se=m&&s.jsx(GN,{labelElement:C,id:K,htmlFor:Q,required:R,...F,...x,children:m},"label"),Z=q&&s.jsx(VN,{...v,...F,size:(v==null?void 0:v.size)||F.size,id:(v==null?void 0:v.id)||z,children:g},"description"),ie=s.jsx(y.Fragment,{children:A(j)},"input"),ee=H&&y.createElement(WN,{...b,...F,size:(b==null?void 0:b.size)||F.size,key:"error",id:(b==null?void 0:b.id)||U},p),ue=h.map(ae=>{switch(ae){case"label":return se;case"input":return ie;case"description":return Z;case"error":return ee;default:return null}});return s.jsx(zue,{value:{getStyles:S,describedBy:$,inputId:Q,labelId:K,...Kue(h,{hasDescription:q,hasError:H})},children:s.jsx(ut,{ref:e,variant:d,size:u,mod:[{error:!!p},k],...S("root"),...D,children:ue})})});FP.classes=Hl;FP.displayName="@mantine/core/InputWrapper";const Jue={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Zue=(t,e,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":vr(e.size,"input-height"),"--input-fz":Ds(e.size),"--input-radius":e.radius===void 0?void 0:es(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?vt(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?vt(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?vr(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Qn=Si((t,e)=>{const r=nt("Input",Jue,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,required:c,__staticSelector:u,__stylesApiProps:d,size:f,wrapperProps:A,error:h,disabled:m,leftSection:p,leftSectionProps:g,leftSectionWidth:x,rightSection:v,rightSectionProps:b,rightSectionWidth:C,rightSectionPointerEvents:j,leftSectionPointerEvents:w,variant:N,vars:E,pointer:_,multiline:k,radius:D,id:S,withAria:F,withErrorStyles:M,mod:R,inputSize:U,__clearSection:z,__clearable:Q,__defaultRightSection:H,...q}=r,{styleProps:X,rest:$}=cx(q),K=hx(),se={offsetBottom:K==null?void 0:K.offsetBottom,offsetTop:K==null?void 0:K.offsetTop},Z=Wt({name:["Input",u],props:d||r,classes:Hl,className:a,style:i,classNames:n,styles:o,unstyled:l,stylesCtx:se,rootSelector:"wrapper",vars:E,varsResolver:Zue}),ie=F?{required:c,disabled:m,"aria-invalid":!!h,"aria-describedby":K==null?void 0:K.describedBy,id:(K==null?void 0:K.inputId)||S}:{},ee=v||Q&&z||H;return s.jsx($ue,{value:{size:f||"sm"},children:s.jsxs(ut,{...Z("wrapper"),...X,...A,mod:[{error:!!h&&M,pointer:_,disabled:m,multiline:k,"data-with-right-section":!!ee,"data-with-left-section":!!p},R],variant:N,size:f,children:[p&&s.jsx("div",{...g,"data-position":"left",...Z("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:p}),s.jsx(ut,{component:"input",...$,...ie,ref:e,required:c,mod:{disabled:m,error:!!h&&M},variant:N,__size:U,...Z("input")}),ee&&s.jsx("div",{...b,"data-position":"right",...Z("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:ee})]})})});Qn.classes=Hl;Qn.Wrapper=FP;Qn.Label=GN;Qn.Error=WN;Qn.Description=VN;Qn.Placeholder=OP;Qn.ClearButton=$V;Qn.displayName="@mantine/core/Input";function RP(t,e,r){const n=nt(t,e,r),{label:a,description:i,error:o,required:l,classNames:c,styles:u,className:d,unstyled:f,__staticSelector:A,__stylesApiProps:h,errorProps:m,labelProps:p,descriptionProps:g,wrapperProps:x,id:v,size:b,style:C,inputContainer:j,inputWrapperOrder:w,withAsterisk:N,variant:E,vars:_,mod:k,...D}=n,{styleProps:S,rest:F}=cx(D),M={label:a,description:i,error:o,required:l,classNames:c,className:d,__staticSelector:A,__stylesApiProps:h||n,errorProps:m,labelProps:p,descriptionProps:g,unstyled:f,styles:u,size:b,style:C,inputContainer:j,inputWrapperOrder:w,withAsterisk:N,variant:E,id:v,mod:k,...x};return{...F,classNames:c,styles:u,unstyled:f,wrapperProps:{...M,...S},inputProps:{required:l,classNames:c,styles:u,unstyled:f,size:b,__staticSelector:A,__stylesApiProps:h||n,error:o,variant:E,id:v}}}const ede={__staticSelector:"InputBase",withAria:!0},eo=Si((t,e)=>{const{inputProps:r,wrapperProps:n,...a}=RP("InputBase",ede,t);return s.jsx(Qn.Wrapper,{...n,children:s.jsx(Qn,{...r,...a,ref:e})})});eo.classes={...Qn.classes,...Qn.Wrapper.classes};eo.displayName="@mantine/core/InputBase";const tde={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var HV={root:"m_8bffd616"};const rde={},MP=Si((t,e)=>{const r=nt("Flex",rde,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,gap:u,rowGap:d,columnGap:f,align:A,justify:h,wrap:m,direction:p,...g}=r,x=Wt({name:"Flex",classes:HV,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c}),v=Qs(),b=hw(),C=Oz({styleProps:{gap:u,rowGap:d,columnGap:f,align:A,justify:h,wrap:m,direction:p},theme:v,data:tde});return s.jsxs(s.Fragment,{children:[C.hasResponsiveStyles&&s.jsx(lx,{selector:`.${b}`,styles:C.styles,media:C.media}),s.jsx(ut,{ref:e,...x("root",{className:b,style:Qh(C.inlineStyles)}),...g})]})});MP.classes=HV;MP.displayName="@mantine/core/Flex";function nde(t,e){if(!e||!t)return!1;let r=e.parentNode;for(;r!=null;){if(r===t)return!0;r=r.parentNode}return!1}function sde({target:t,parent:e,ref:r,displayAfterTransitionEnd:n}){const a=y.useRef(-1),[i,o]=y.useState(!1),[l,c]=y.useState(typeof n=="boolean"?n:!1),u=()=>{if(!t||!e||!r.current)return;const h=t.getBoundingClientRect(),m=e.getBoundingClientRect(),p=window.getComputedStyle(t),g=window.getComputedStyle(e),x=hh(p.borderTopWidth)+hh(g.borderTopWidth),v=hh(p.borderLeftWidth)+hh(g.borderLeftWidth),b={top:h.top-m.top-x,left:h.left-m.left-v,width:h.width,height:h.height};r.current.style.transform=`translateY(${b.top}px) translateX(${b.left}px)`,r.current.style.width=`${b.width}px`,r.current.style.height=`${b.height}px`},d=()=>{window.clearTimeout(a.current),r.current&&(r.current.style.transitionDuration="0ms"),u(),a.current=window.setTimeout(()=>{r.current&&(r.current.style.transitionDuration="")},30)},f=y.useRef(null),A=y.useRef(null);return y.useEffect(()=>{if(u(),t)return f.current=new ResizeObserver(d),f.current.observe(t),e&&(A.current=new ResizeObserver(d),A.current.observe(e)),()=>{var h,m;(h=f.current)==null||h.disconnect(),(m=A.current)==null||m.disconnect()}},[e,t]),y.useEffect(()=>{if(e){const h=m=>{nde(m.target,e)&&(d(),c(!1))};return e.addEventListener("transitionend",h),()=>{e.removeEventListener("transitionend",h)}}},[e]),loe(()=>{Bz()!=="test"&&o(!0)},20,{autoInvoke:!0}),uoe(h=>{h.forEach(m=>{m.type==="attributes"&&m.attributeName==="dir"&&d()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:i,hidden:l}}var QV={root:"m_96b553a6"};const ade={},ide=(t,{transitionDuration:e})=>({root:{"--transition-duration":typeof e=="number"?`${e}ms`:e}}),LP=wt((t,e)=>{const r=nt("FloatingIndicator",ade,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,target:u,parent:d,transitionDuration:f,mod:A,displayAfterTransitionEnd:h,...m}=r,p=Wt({name:"FloatingIndicator",classes:QV,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:ide}),g=y.useRef(null),{initialized:x,hidden:v}=sde({target:u,parent:d,ref:g,displayAfterTransitionEnd:h}),b=Zs(e,g);return!u||!d?null:s.jsx(ut,{ref:b,mod:[{initialized:x,hidden:v},A],...p("root"),...m})});LP.displayName="@mantine/core/FloatingIndicator";LP.classes=QV;function H4({style:t,size:e=16,...r}){return s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:vt(e),height:vt(e),display:"block"},...r,children:s.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}H4.displayName="@mantine/core/AccordionChevron";var zV={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const ode={},lde=(t,{radius:e,color:r,variant:n,autoContrast:a})=>{const i=t.variantColorResolver({color:r||t.primaryColor,theme:t,variant:n||"light",autoContrast:a});return{root:{"--alert-radius":e===void 0?void 0:es(e),"--alert-bg":r||n?i.background:void 0,"--alert-color":i.color,"--alert-bd":r||n?i.border:void 0}}},Ia=wt((t,e)=>{const r=nt("Alert",ode,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,radius:u,color:d,title:f,children:A,id:h,icon:m,withCloseButton:p,onClose:g,closeButtonLabel:x,variant:v,autoContrast:b,...C}=r,j=Wt({name:"Alert",classes:zV,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:lde}),w=Ll(h),N=f&&`${w}-title`||void 0,E=`${w}-body`;return s.jsx(ut,{id:w,...j("root",{variant:v}),variant:v,ref:e,...C,role:"alert","aria-describedby":E,"aria-labelledby":N,children:s.jsxs("div",{...j("wrapper"),children:[m&&s.jsx("div",{...j("icon"),children:m}),s.jsxs("div",{...j("body"),children:[f&&s.jsx("div",{...j("title"),"data-with-close-button":p||void 0,children:s.jsx("span",{id:N,...j("label"),children:f})}),A&&s.jsx("div",{id:E,...j("message"),"data-variant":v,children:A})]}),p&&s.jsx(Vh,{...j("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":x,unstyled:l})]})})});Ia.classes=zV;Ia.displayName="@mantine/core/Alert";var VV={root:"m_b6d8b162"};function cde(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const ude={inherit:!1},dde=(t,{variant:e,lineClamp:r,gradient:n,size:a,color:i})=>({root:{"--text-fz":Ds(a),"--text-lh":Rie(a),"--text-gradient":e==="gradient"?I4(n,t):void 0,"--text-line-clamp":typeof r=="number"?r.toString():void 0,"--text-color":i?Is(i,t):void 0}}),He=Si((t,e)=>{const r=nt("Text",ude,t),{lineClamp:n,truncate:a,inline:i,inherit:o,gradient:l,span:c,__staticSelector:u,vars:d,className:f,style:A,classNames:h,styles:m,unstyled:p,variant:g,mod:x,size:v,...b}=r,C=Wt({name:["Text",u],props:r,classes:VV,className:f,style:A,classNames:h,styles:m,unstyled:p,vars:d,varsResolver:dde});return s.jsx(ut,{...C("root",{focusable:!0}),ref:e,component:c?"span":"p",variant:g,mod:[{"data-truncate":cde(a),"data-line-clamp":typeof n=="number","data-inline":i,"data-inherit":o},x],size:v,...b})});He.classes=VV;He.displayName="@mantine/core/Text";var WV={root:"m_849cf0da"};const fde={underline:"hover"},qN=Si((t,e)=>{const{underline:r,className:n,unstyled:a,mod:i,...o}=nt("Anchor",fde,t);return s.jsx(He,{component:"a",ref:e,className:qt({[WV.root]:!a},n),...o,mod:[{underline:r},i],__staticSelector:"Anchor",unstyled:a})});qN.classes=WV;qN.displayName="@mantine/core/Anchor";function GV(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>GV(e))}:t}function qV(t){return t?t.map(e=>GV(e)):[]}function UP(t){return t.reduce((e,r)=>"group"in r?{...e,...UP(r.items)}:(e[r.value]=r,e),{})}var _o={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const hde={error:null},Ade=(t,{size:e,color:r})=>({chevron:{"--combobox-chevron-size":vr(e,"combobox-chevron-size"),"--combobox-chevron-color":r?Is(r,t):void 0}}),$P=wt((t,e)=>{const r=nt("ComboboxChevron",hde,t),{size:n,error:a,style:i,className:o,classNames:l,styles:c,unstyled:u,vars:d,mod:f,...A}=r,h=Wt({name:"ComboboxChevron",classes:_o,props:r,style:i,className:o,classNames:l,styles:c,unstyled:u,vars:d,varsResolver:Ade,rootSelector:"chevron"});return s.jsx(ut,{component:"svg",...A,...h("chevron"),size:n,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:a},f],ref:e,children:s.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});$P.classes=_o;$P.displayName="@mantine/core/ComboboxChevron";const[mde,Ql]=so("Combobox component was not found in tree"),KV=y.forwardRef(({size:t,onMouseDown:e,onClick:r,onClear:n,...a},i)=>s.jsx(Qn.ClearButton,{ref:i,tabIndex:-1,"aria-hidden":!0,...a,onMouseDown:o=>{o.preventDefault(),e==null||e(o)},onClick:o=>{n(),r==null||r(o)}}));KV.displayName="@mantine/core/ComboboxClearButton";const pde={},HP=wt((t,e)=>{const{classNames:r,styles:n,className:a,style:i,hidden:o,...l}=nt("ComboboxDropdown",pde,t),c=Ql();return s.jsx(Ga.Dropdown,{...l,ref:e,role:"presentation","data-hidden":o||void 0,...c.getStyles("dropdown",{className:a,style:i,classNames:r,styles:n})})});HP.classes=_o;HP.displayName="@mantine/core/ComboboxDropdown";const gde={refProp:"ref"},YV=wt((t,e)=>{const{children:r,refProp:n}=nt("ComboboxDropdownTarget",gde,t);if(Ql(),!rf(r))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return s.jsx(Ga.Target,{ref:e,refProp:n,children:r})});YV.displayName="@mantine/core/ComboboxDropdownTarget";const xde={},QP=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("ComboboxEmpty",xde,t),c=Ql();return s.jsx(ut,{ref:e,...c.getStyles("empty",{className:n,classNames:r,styles:i,style:a}),...l})});QP.classes=_o;QP.displayName="@mantine/core/ComboboxEmpty";function zP({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:r,withExpandedAttribute:n,targetType:a,autoComplete:i}){const o=Ql(),[l,c]=y.useState(null),u=f=>{if(t==null||t(f),!o.readOnly&&e){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?c(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?c(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),c(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const A=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&A!==-1?(f.preventDefault(),o.store.clickSelectedOption()):a==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.key==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&a==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...r?{"aria-haspopup":"listbox","aria-expanded":n&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&l||void 0,autoComplete:i,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const vde={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},XV=wt((t,e)=>{const{children:r,refProp:n,withKeyboardNavigation:a,withAriaAttributes:i,withExpandedAttribute:o,targetType:l,autoComplete:c,...u}=nt("ComboboxEventsTarget",vde,t);if(!rf(r))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Ql(),f=zP({targetType:l,withAriaAttributes:i,withKeyboardNavigation:a,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:c});return y.cloneElement(r,{...f,...u,[n]:Zs(e,d.store.targetRef,FN(r))})});XV.displayName="@mantine/core/ComboboxEventsTarget";const bde={},VP=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("ComboboxFooter",bde,t),c=Ql();return s.jsx(ut,{ref:e,...c.getStyles("footer",{className:n,classNames:r,style:a,styles:i}),...l,onMouseDown:u=>{u.preventDefault()}})});VP.classes=_o;VP.displayName="@mantine/core/ComboboxFooter";const yde={},WP=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,children:l,label:c,...u}=nt("ComboboxGroup",yde,t),d=Ql();return s.jsxs(ut,{ref:e,...d.getStyles("group",{className:n,classNames:r,style:a,styles:i}),...u,children:[c&&s.jsx("div",{...d.getStyles("groupLabel",{classNames:r,styles:i}),children:c}),l]})});WP.classes=_o;WP.displayName="@mantine/core/ComboboxGroup";const wde={},GP=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("ComboboxHeader",wde,t),c=Ql();return s.jsx(ut,{ref:e,...c.getStyles("header",{className:n,classNames:r,style:a,styles:i}),...l,onMouseDown:u=>{u.preventDefault()}})});GP.classes=_o;GP.displayName="@mantine/core/ComboboxHeader";function JV({value:t,valuesDivider:e=",",...r}){return s.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...r})}JV.displayName="@mantine/core/ComboboxHiddenInput";const jde={},qP=wt((t,e)=>{const r=nt("ComboboxOption",jde,t),{classNames:n,className:a,style:i,styles:o,vars:l,onClick:c,id:u,active:d,onMouseDown:f,onMouseOver:A,disabled:h,selected:m,mod:p,...g}=r,x=Ql(),v=y.useId(),b=u||v;return s.jsx(ut,{...x.getStyles("option",{className:a,classNames:n,styles:o,style:i}),...g,ref:e,id:b,mod:["combobox-option",{"combobox-active":d,"combobox-disabled":h,"combobox-selected":m},p],role:"option",onClick:C=>{var j;h?C.preventDefault():((j=x.onOptionSubmit)==null||j.call(x,r.value,r),c==null||c(C))},onMouseDown:C=>{C.preventDefault(),f==null||f(C)},onMouseOver:C=>{x.resetSelectionOnOptionHover&&x.store.resetSelectedOption(),A==null||A(C)}})});qP.classes=_o;qP.displayName="@mantine/core/ComboboxOption";const Cde={},KP=wt((t,e)=>{const r=nt("ComboboxOptions",Cde,t),{classNames:n,className:a,style:i,styles:o,id:l,onMouseDown:c,labelledBy:u,...d}=r,f=Ql(),A=Ll(l);return y.useEffect(()=>{f.store.setListId(A)},[A]),s.jsx(ut,{ref:e,...f.getStyles("options",{className:a,style:i,classNames:n,styles:o}),...d,id:A,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),c==null||c(h)}})});KP.classes=_o;KP.displayName="@mantine/core/ComboboxOptions";const Nde={withAriaAttributes:!0,withKeyboardNavigation:!0},YP=wt((t,e)=>{const r=nt("ComboboxSearch",Nde,t),{classNames:n,styles:a,unstyled:i,vars:o,withAriaAttributes:l,onKeyDown:c,withKeyboardNavigation:u,size:d,...f}=r,A=Ql(),h=A.getStyles("search"),m=zP({targetType:"input",withAriaAttributes:l,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:c,autoComplete:"off"});return s.jsx(Qn,{ref:Zs(e,A.store.searchRef),classNames:[{input:h.className},n],styles:[{input:h.style},a],size:d||A.size,...m,...f,__staticSelector:"Combobox"})});YP.classes=_o;YP.displayName="@mantine/core/ComboboxSearch";const Sde={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ZV=wt((t,e)=>{const{children:r,refProp:n,withKeyboardNavigation:a,withAriaAttributes:i,withExpandedAttribute:o,targetType:l,autoComplete:c,...u}=nt("ComboboxTarget",Sde,t);if(!rf(r))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Ql(),f=zP({targetType:l,withAriaAttributes:i,withKeyboardNavigation:a,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:c}),A=y.cloneElement(r,{...f,...u});return s.jsx(Ga.Target,{ref:Zs(e,d.store.targetRef),children:A})});ZV.displayName="@mantine/core/ComboboxTarget";function Ede(t,e,r){for(let n=t-1;n>=0;n-=1)if(!e[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=e.length-1;n>-1;n-=1)if(!e[n].hasAttribute("data-combobox-disabled"))return n}return t}function Bde(t,e,r){for(let n=t+1;n<e.length;n+=1)if(!e[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=0;n<e.length;n+=1)if(!e[n].hasAttribute("data-combobox-disabled"))return n}return t}function Tde(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function KN({defaultOpened:t,opened:e,onOpenedChange:r,onDropdownClose:n,onDropdownOpen:a,loop:i=!0,scrollBehavior:o="instant"}={}){const[l,c]=qa({value:e,defaultValue:t,finalValue:!1,onChange:r}),u=y.useRef(null),d=y.useRef(-1),f=y.useRef(null),A=y.useRef(null),h=y.useRef(-1),m=y.useRef(-1),p=y.useRef(-1),g=y.useCallback((U="unknown")=>{l||(c(!0),a==null||a(U))},[c,a,l]),x=y.useCallback((U="unknown")=>{l&&(c(!1),n==null||n(U))},[c,n,l]),v=y.useCallback((U="unknown")=>{l?x(U):g(U)},[x,g,l]),b=y.useCallback(()=>{const U=document.querySelector(`#${u.current} [data-combobox-selected]`);U==null||U.removeAttribute("data-combobox-selected"),U==null||U.removeAttribute("aria-selected")},[]),C=y.useCallback(U=>{const z=document.getElementById(u.current),Q=z==null?void 0:z.querySelectorAll("[data-combobox-option]");if(!Q)return null;const H=U>=Q.length?0:U<0?Q.length-1:U;return d.current=H,Q!=null&&Q[H]&&!Q[H].hasAttribute("data-combobox-disabled")?(b(),Q[H].setAttribute("data-combobox-selected","true"),Q[H].setAttribute("aria-selected","true"),Q[H].scrollIntoView({block:"nearest",behavior:o}),Q[H].id):null},[o,b]),j=y.useCallback(()=>{const U=document.querySelector(`#${u.current} [data-combobox-active]`);if(U){const z=document.querySelectorAll(`#${u.current} [data-combobox-option]`),Q=Array.from(z).findIndex(H=>H===U);return C(Q)}return C(0)},[C]),w=y.useCallback(()=>C(Bde(d.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[C,i]),N=y.useCallback(()=>C(Ede(d.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),i)),[C,i]),E=y.useCallback(()=>C(Tde(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[C]),_=y.useCallback((U="selected",z)=>{p.current=window.setTimeout(()=>{var q;const Q=document.querySelectorAll(`#${u.current} [data-combobox-option]`),H=Array.from(Q).findIndex(X=>X.hasAttribute(`data-combobox-${U}`));d.current=H,z!=null&&z.scrollIntoView&&((q=Q[H])==null||q.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=y.useCallback(()=>{d.current=-1,b()},[b]),D=y.useCallback(()=>{const U=document.querySelectorAll(`#${u.current} [data-combobox-option]`),z=U==null?void 0:U[d.current];z==null||z.click()},[]),S=y.useCallback(U=>{u.current=U},[]),F=y.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),M=y.useCallback(()=>{m.current=window.setTimeout(()=>A.current.focus(),0)},[]),R=y.useCallback(()=>d.current,[]);return y.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(m.current),window.clearTimeout(p.current)},[]),{dropdownOpened:l,openDropdown:g,closeDropdown:x,toggleDropdown:v,selectedOptionIndex:d.current,getSelectedOptionIndex:R,selectOption:C,selectFirstOption:E,selectActiveOption:j,selectNextOption:w,selectPreviousOption:N,resetSelectedOption:k,updateSelectedOptionIndex:_,listId:u.current,setListId:S,clickSelectedOption:D,searchRef:f,focusSearchInput:F,targetRef:A,focusTarget:M}}const Dde={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Ide=(t,{size:e,dropdownPadding:r})=>({options:{"--combobox-option-fz":Ds(e),"--combobox-option-padding":vr(e,"combobox-option-padding")},dropdown:{"--combobox-padding":r===void 0?void 0:vt(r),"--combobox-option-fz":Ds(e),"--combobox-option-padding":vr(e,"combobox-option-padding")}});function Or(t){const e=nt("Combobox",Dde,t),{classNames:r,styles:n,unstyled:a,children:i,store:o,vars:l,onOptionSubmit:c,onClose:u,size:d,dropdownPadding:f,resetSelectionOnOptionHover:A,__staticSelector:h,readOnly:m,...p}=e,g=KN(),x=o||g,v=Wt({name:h||"Combobox",classes:_o,props:e,classNames:r,styles:n,unstyled:a,vars:l,varsResolver:Ide}),b=()=>{u==null||u(),x.closeDropdown()};return s.jsx(mde,{value:{getStyles:v,store:x,onOptionSubmit:c,size:d,resetSelectionOnOptionHover:A,readOnly:m},children:s.jsx(Ga,{opened:x.dropdownOpened,...p,onChange:C=>!C&&b(),withRoles:!1,unstyled:a,children:i})})}const _de=t=>t;Or.extend=_de;Or.classes=_o;Or.displayName="@mantine/core/Combobox";Or.Target=ZV;Or.Dropdown=HP;Or.Options=KP;Or.Option=qP;Or.Search=YP;Or.Empty=QP;Or.Chevron=$P;Or.Footer=VP;Or.Header=GP;Or.EventsTarget=XV;Or.DropdownTarget=YV;Or.Group=WP;Or.ClearButton=KV;Or.HiddenInput=JV;var eW={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Pde=eW,tW=y.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:r,classNames:n,styles:a,unstyled:i,children:o,label:l,description:c,id:u,disabled:d,error:f,size:A,labelPosition:h="left",bodyElement:m="div",labelElement:p="label",variant:g,style:x,vars:v,mod:b,...C},j)=>{const w=Wt({name:t,props:e,className:r,style:x,classes:eW,classNames:n,styles:a,unstyled:i});return s.jsx(ut,{...w("root"),ref:j,__vars:{"--label-fz":Ds(A),"--label-lh":vr(A,"label-lh")},mod:[{"label-position":h},b],variant:g,size:A,...C,children:s.jsxs(ut,{component:m,htmlFor:m==="label"?u:void 0,...w("body"),children:[o,s.jsxs("div",{...w("labelWrapper"),"data-disabled":d||void 0,children:[l&&s.jsx(ut,{component:p,htmlFor:p==="label"?u:void 0,...w("label"),"data-disabled":d||void 0,children:l}),c&&s.jsx(Qn.Description,{size:A,__inheritStyles:!1,...w("description"),children:c}),f&&typeof f!="boolean"&&s.jsx(Qn.Error,{size:A,__inheritStyles:!1,...w("error"),children:f})]})]})})});tW.displayName="@mantine/core/InlineInput";function kde({children:t,role:e}){const r=hx();return r?s.jsx("div",{role:e,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy,children:t}):s.jsx(s.Fragment,{children:t})}function rW({size:t,style:e,...r}){const n=t!==void 0?{width:vt(t),height:vt(t),...e}:e;return s.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r,children:s.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function x0(t){return"group"in t}function nW({options:t,search:e,limit:r}){const n=e.trim().toLowerCase(),a=[];for(let i=0;i<t.length;i+=1){const o=t[i];if(a.length===r)return a;x0(o)&&a.push({group:o.group,items:nW({options:o.items,search:e,limit:r-a.length})}),x0(o)||o.label.toLowerCase().includes(n)&&a.push(o)}return a}function Ode(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function sW(t,e=new Set){if(Array.isArray(t))for(const r of t)if(x0(r))sW(r.items,e);else{if(typeof r.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof r.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof r.value}`);if(e.has(r.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${r.value}" was provided more than once`);e.add(r.value)}}function Fde(t,e){return Array.isArray(t)?t.includes(e):t===e}function aW({data:t,withCheckIcon:e,value:r,checkIconPosition:n,unstyled:a,renderOption:i}){if(!x0(t)){const l=Fde(r,t.value),c=e&&l&&s.jsx(rW,{className:_o.optionsDropdownCheckIcon}),u=s.jsxs(s.Fragment,{children:[n==="left"&&c,s.jsx("span",{children:t.label}),n==="right"&&c]});return s.jsx(Or.Option,{value:t.value,disabled:t.disabled,className:qt({[_o.optionsDropdownOption]:!a}),"data-reverse":n==="right"||void 0,"data-checked":l||void 0,"aria-selected":l,active:l,children:typeof i=="function"?i({option:t,checked:l}):u})}const o=t.items.map(l=>s.jsx(aW,{data:l,value:r,unstyled:a,withCheckIcon:e,checkIconPosition:n,renderOption:i},l.value));return s.jsx(Or.Group,{label:t.group,children:o})}function iW({data:t,hidden:e,hiddenWhenEmpty:r,filter:n,search:a,limit:i,maxDropdownHeight:o,withScrollArea:l=!0,filterOptions:c=!0,withCheckIcon:u=!1,value:d,checkIconPosition:f,nothingFoundMessage:A,unstyled:h,labelId:m,renderOption:p,scrollAreaProps:g,"aria-label":x}){sW(t);const b=typeof a=="string"?(n||nW)({options:t,search:c?a:"",limit:i??1/0}):t,C=Ode(b),j=b.map(w=>s.jsx(aW,{data:w,withCheckIcon:u,value:d,checkIconPosition:f,unstyled:h,renderOption:p},x0(w)?w.group:w.value));return s.jsx(Or.Dropdown,{hidden:e||r&&C,"data-composed":!0,children:s.jsxs(Or.Options,{labelledBy:m,"aria-label":x,children:[l?s.jsx(Zm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:j}):j,C&&A&&s.jsx(Or.Empty,{children:A})]})})}const oW=y.createContext(null),Rde=oW.Provider;function Mde(){return{withinGroup:!!y.useContext(oW)}}var YN={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const Lde={},Ude=(t,{spacing:e})=>({group:{"--ag-spacing":$s(e)}}),XP=wt((t,e)=>{const r=nt("AvatarGroup",Lde,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,spacing:u,...d}=r,f=Wt({name:"AvatarGroup",classes:YN,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Ude,rootSelector:"group"});return s.jsx(Rde,{value:!0,children:s.jsx(ut,{ref:e,...f("group"),...d})})});XP.classes=YN;XP.displayName="@mantine/core/AvatarGroup";function $de(t){return s.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Hde(t){let e=0;for(let r=0;r<t.length;r+=1){const n=t.charCodeAt(r);e=(e<<5)-e+n,e|=0}return e}const Qde=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function zde(t,e=Qde){const r=Hde(t),n=Math.abs(r)%e.length;return e[n]}function Vde(t,e=2){const r=t.split(" ");return r.length===1?t.slice(0,e).toUpperCase():r.map(n=>n[0]).slice(0,e).join("").toUpperCase()}const Wde={},Gde=(t,{size:e,radius:r,variant:n,gradient:a,color:i,autoContrast:o,name:l,allowedInitialsColors:c})=>{const u=i==="initials"&&typeof l=="string"?zde(l,c):i,d=t.variantColorResolver({color:u||"gray",theme:t,gradient:a,variant:n||"light",autoContrast:o});return{root:{"--avatar-size":vr(e,"avatar-size"),"--avatar-radius":r===void 0?void 0:es(r),"--avatar-bg":u||n?d.background:void 0,"--avatar-color":u||n?d.color:void 0,"--avatar-bd":u||n?d.border:void 0}}},Ch=Si((t,e)=>{const r=nt("Avatar",Wde,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,src:u,alt:d,radius:f,color:A,gradient:h,imageProps:m,children:p,autoContrast:g,mod:x,name:v,allowedInitialsColors:b,...C}=r,j=Mde(),[w,N]=y.useState(!u),E=Wt({name:"Avatar",props:r,classes:YN,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Gde});return y.useEffect(()=>N(!u),[u]),s.jsx(ut,{...E("root"),mod:[{"within-group":j.withinGroup},x],ref:e,...C,children:w?s.jsx("span",{...E("placeholder"),title:d,children:p||typeof v=="string"&&Vde(v)||s.jsx($de,{})}):s.jsx("img",{...m,...E("image"),src:u,alt:d,onError:_=>{var k;N(!0),(k=m==null?void 0:m.onError)==null||k.call(m,_)}})})});Ch.classes=YN;Ch.displayName="@mantine/core/Avatar";Ch.Group=XP;var lW={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const qde={},Kde=(t,{radius:e,color:r,gradient:n,variant:a,size:i,autoContrast:o})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:a||"filled",autoContrast:o});return{root:{"--badge-height":vr(i,"badge-height"),"--badge-padding-x":vr(i,"badge-padding-x"),"--badge-fz":vr(i,"badge-fz"),"--badge-radius":e===void 0?void 0:es(e),"--badge-bg":r||a?l.background:void 0,"--badge-color":r||a?l.color:void 0,"--badge-bd":r||a?l.border:void 0,"--badge-dot-color":a==="dot"?Is(r,t):void 0}}},bn=Si((t,e)=>{const r=nt("Badge",qde,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,radius:u,color:d,gradient:f,leftSection:A,rightSection:h,children:m,variant:p,fullWidth:g,autoContrast:x,circle:v,mod:b,...C}=r,j=Wt({name:"Badge",props:r,classes:lW,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Kde});return s.jsxs(ut,{variant:p,mod:[{block:g,circle:v,"with-right-section":!!h,"with-left-section":!!A},b],...j("root",{variant:p}),ref:e,...C,children:[A&&s.jsx("span",{...j("section"),"data-position":"left",children:A}),s.jsx("span",{...j("label"),children:m}),h&&s.jsx("span",{...j("section"),"data-position":"right",children:h})]})});bn.classes=lW;bn.displayName="@mantine/core/Badge";var cW={root:"m_8b3717df",breadcrumb:"m_f678d540",separator:"m_3b8f2208"};const Yde={separator:"/"},Xde=(t,{separatorMargin:e})=>({root:{"--bc-separator-margin":$s(e)}}),JP=wt((t,e)=>{const r=nt("Breadcrumbs",Yde,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,children:u,separator:d,separatorMargin:f,...A}=r,h=Wt({name:"Breadcrumbs",classes:cW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Xde}),m=y.Children.toArray(u).reduce((p,g,x,v)=>{var C;const b=rf(g)?y.cloneElement(g,{...h("breadcrumb",{className:(C=g.props)==null?void 0:C.className}),key:x}):y.createElement("div",{...h("breadcrumb"),key:x},g);return p.push(b),x!==v.length-1&&p.push(y.createElement(ut,{...h("separator"),key:`separator-${x}`},d)),p},[]);return s.jsx(ut,{ref:e,...h("root"),...A,children:m})});JP.classes=cW;JP.displayName="@mantine/core/Breadcrumbs";var Ax={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const AM={orientation:"horizontal"},Jde=(t,{borderWidth:e})=>({group:{"--button-border-width":vt(e)}}),ZP=wt((t,e)=>{const r=nt("ButtonGroup",AM,t),{className:n,style:a,classNames:i,styles:o,unstyled:l,orientation:c,vars:u,borderWidth:d,variant:f,mod:A,...h}=nt("ButtonGroup",AM,t),m=Wt({name:"ButtonGroup",props:r,classes:Ax,className:n,style:a,classNames:i,styles:o,unstyled:l,vars:u,varsResolver:Jde,rootSelector:"group"});return s.jsx(ut,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":c},A],role:"group",...h})});ZP.classes=Ax;ZP.displayName="@mantine/core/ButtonGroup";const mM={},Zde=(t,{radius:e,color:r,gradient:n,variant:a,autoContrast:i,size:o})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:a||"filled",autoContrast:i});return{groupSection:{"--section-height":vr(o,"section-height"),"--section-padding-x":vr(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?Ds(o.replace("compact-","")):Ds(o),"--section-radius":e===void 0?void 0:es(e),"--section-bg":r||a?l.background:void 0,"--section-color":l.color,"--section-bd":r||a?l.border:void 0}}},ek=wt((t,e)=>{const r=nt("ButtonGroupSection",mM,t),{className:n,style:a,classNames:i,styles:o,unstyled:l,vars:c,variant:u,gradient:d,radius:f,autoContrast:A,...h}=nt("ButtonGroupSection",mM,t),m=Wt({name:"ButtonGroupSection",props:r,classes:Ax,className:n,style:a,classNames:i,styles:o,unstyled:l,vars:c,varsResolver:Zde,rootSelector:"groupSection"});return s.jsx(ut,{...m("groupSection"),ref:e,variant:u,...h})});ek.classes=Ax;ek.displayName="@mantine/core/ButtonGroupSection";const efe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${vt(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},tfe={},rfe=(t,{radius:e,color:r,gradient:n,variant:a,size:i,justify:o,autoContrast:l})=>{const c=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:a||"filled",autoContrast:l});return{root:{"--button-justify":o,"--button-height":vr(i,"button-height"),"--button-padding-x":vr(i,"button-padding-x"),"--button-fz":i!=null&&i.includes("compact")?Ds(i.replace("compact-","")):Ds(i),"--button-radius":e===void 0?void 0:es(e),"--button-bg":r||a?c.background:void 0,"--button-hover":r||a?c.hover:void 0,"--button-color":c.color,"--button-bd":r||a?c.border:void 0,"--button-hover-color":r||a?c.hoverColor:void 0}}},rr=Si((t,e)=>{const r=nt("Button",tfe,t),{style:n,vars:a,className:i,color:o,disabled:l,children:c,leftSection:u,rightSection:d,fullWidth:f,variant:A,radius:h,loading:m,loaderProps:p,gradient:g,classNames:x,styles:v,unstyled:b,"data-disabled":C,autoContrast:j,mod:w,...N}=r,E=Wt({name:"Button",props:r,classes:Ax,className:i,style:n,classNames:x,styles:v,unstyled:b,vars:a,varsResolver:rfe}),_=!!u,k=!!d;return s.jsxs(yi,{ref:e,...E("root",{active:!l&&!m&&!C}),unstyled:b,variant:A,disabled:l||m,mod:[{disabled:l||C,loading:m,block:f,"with-left-section":_,"with-right-section":k},w],...N,children:[s.jsx(Bc,{mounted:!!m,transition:efe,duration:150,children:D=>s.jsx(ut,{component:"span",...E("loader",{style:D}),"aria-hidden":!0,children:s.jsx(Zi,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...p})})}),s.jsxs("span",{...E("inner"),children:[u&&s.jsx(ut,{component:"span",...E("section"),mod:{position:"left"},children:u}),s.jsx(ut,{component:"span",mod:{loading:m},...E("label"),children:c}),d&&s.jsx(ut,{component:"span",...E("section"),mod:{position:"right"},children:d})]})]})});rr.classes=Ax;rr.displayName="@mantine/core/Button";rr.Group=ZP;rr.GroupSection=ek;const[nfe,sfe]=so("Card component was not found in tree");var tk={root:"m_e615b15f",section:"m_599a2148"};const afe={},XN=Si((t,e)=>{const r=nt("CardSection",afe,t),{classNames:n,className:a,style:i,styles:o,vars:l,withBorder:c,inheritPadding:u,mod:d,...f}=r,A=sfe();return s.jsx(ut,{ref:e,mod:[{"with-border":c,"inherit-padding":u},d],...A.getStyles("section",{className:a,style:i,styles:o,classNames:n}),...f})});XN.classes=tk;XN.displayName="@mantine/core/CardSection";const ife={},ofe=(t,{padding:e})=>({root:{"--card-padding":$s(e)}}),Hr=Si((t,e)=>{const r=nt("Card",ife,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,children:u,padding:d,...f}=r,A=Wt({name:"Card",props:r,classes:tk,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:ofe}),h=y.Children.toArray(u),m=h.map((p,g)=>typeof p=="object"&&p&&"type"in p&&p.type===XN?y.cloneElement(p,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):p);return s.jsx(nfe,{value:{getStyles:A},children:s.jsx(Hn,{ref:e,unstyled:l,...A("root"),...f,children:m})})});Hr.classes=tk;Hr.displayName="@mantine/core/Card";Hr.Section=XN;var uW={root:"m_7485cace"};const lfe={},cfe=(t,{size:e,fluid:r})=>({root:{"--container-size":r?void 0:vr(e,"container-size")}}),Od=wt((t,e)=>{const r=nt("Container",lfe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,fluid:u,mod:d,...f}=r,A=Wt({name:"Container",classes:uW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:cfe});return s.jsx(ut,{ref:e,mod:[{fluid:u},d],...A("root"),...f})});Od.classes=uW;Od.displayName="@mantine/core/Container";var dW={root:"m_3eebeb36",label:"m_9e365f20"};const ufe={orientation:"horizontal"},dfe=(t,{color:e,variant:r,size:n})=>({root:{"--divider-color":e?Is(e,t):void 0,"--divider-border-style":r,"--divider-size":vr(n,"divider-size")}}),wi=wt((t,e)=>{const r=nt("Divider",ufe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,color:u,orientation:d,label:f,labelPosition:A,mod:h,...m}=r,p=Wt({name:"Divider",classes:dW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:dfe});return s.jsx(ut,{ref:e,mod:[{orientation:d,"with-label":!!f},h],...p("root"),...m,role:"separator",children:f&&s.jsx(ut,{component:"span",mod:{position:A},...p("label"),children:f})})});wi.classes=dW;wi.displayName="@mantine/core/Divider";function ffe({open:t,close:e,openDelay:r,closeDelay:n}){const a=y.useRef(-1),i=y.useRef(-1),o=()=>{window.clearTimeout(a.current),window.clearTimeout(i.current)},l=()=>{o(),r===0||r===void 0?t():a.current=window.setTimeout(t,r)},c=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)};return y.useEffect(()=>o,[]),{openDropdown:l,closeDropdown:c}}const[pM,fW]=so("Grid component was not found in tree"),Q4=(t,e)=>t==="content"?"auto":t==="auto"?"0rem":t?`${100/(e/t)}%`:void 0,gM=(t,e,r)=>r||t==="auto"?"100%":t==="content"?"unset":Q4(t,e),xM=(t,e)=>{if(t)return t==="auto"||e?"1":"auto"},vM=(t,e)=>t===0?"0":t?`${100/(e/t)}%`:void 0;function hfe({span:t,order:e,offset:r,selector:n}){var h;const a=Qs(),i=fW(),o=i.breakpoints||a.breakpoints,c=Ac(t)===void 0?12:Ac(t),u=Qh({"--col-order":(h=Ac(e))==null?void 0:h.toString(),"--col-flex-grow":xM(c,i.grow),"--col-flex-basis":Q4(c,i.columns),"--col-width":c==="content"?"auto":void 0,"--col-max-width":gM(c,i.columns,i.grow),"--col-offset":vM(Ac(r),i.columns)}),d=ua(o).reduce((m,p)=>{var g;return m[p]||(m[p]={}),typeof e=="object"&&e[p]!==void 0&&(m[p]["--col-order"]=(g=e[p])==null?void 0:g.toString()),typeof t=="object"&&t[p]!==void 0&&(m[p]["--col-flex-grow"]=xM(t[p],i.grow),m[p]["--col-flex-basis"]=Q4(t[p],i.columns),m[p]["--col-width"]=t[p]==="content"?"auto":void 0,m[p]["--col-max-width"]=gM(t[p],i.columns,i.grow)),typeof r=="object"&&r[p]!==void 0&&(m[p]["--col-offset"]=vM(r[p],i.columns)),m},{}),A=iP(ua(d),o).filter(m=>ua(d[m.value]).length>0).map(m=>({query:i.type==="container"?`mantine-grid (min-width: ${o[m.value]})`:`(min-width: ${o[m.value]})`,styles:d[m.value]}));return s.jsx(lx,{styles:u,media:i.type==="container"?void 0:A,container:i.type==="container"?A:void 0,selector:n})}var rk={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Afe={span:12},nk=wt((t,e)=>{const r=nt("GridCol",Afe,t),{classNames:n,className:a,style:i,styles:o,vars:l,span:c,order:u,offset:d,...f}=r,A=fW(),h=hw();return s.jsxs(s.Fragment,{children:[s.jsx(hfe,{selector:`.${h}`,span:c,order:u,offset:d}),s.jsx(ut,{ref:e,...A.getStyles("col",{className:qt(a,h),style:i,classNames:n,styles:o}),...f})]})});nk.classes=rk;nk.displayName="@mantine/core/GridCol";function bM({gutter:t,selector:e,breakpoints:r,type:n}){const a=Qs(),i=r||a.breakpoints,o=Qh({"--grid-gutter":$s(Ac(t))}),l=ua(i).reduce((d,f)=>(d[f]||(d[f]={}),typeof t=="object"&&t[f]!==void 0&&(d[f]["--grid-gutter"]=$s(t[f])),d),{}),u=iP(ua(l),i).filter(d=>ua(l[d.value]).length>0).map(d=>({query:n==="container"?`mantine-grid (min-width: ${i[d.value]})`:`(min-width: ${i[d.value]})`,styles:l[d.value]}));return s.jsx(lx,{styles:o,media:n==="container"?void 0:u,container:n==="container"?u:void 0,selector:e})}const mfe={gutter:"md",grow:!1,columns:12},pfe=(t,{justify:e,align:r,overflow:n})=>({root:{"--grid-justify":e,"--grid-align":r,"--grid-overflow":n}}),tt=wt((t,e)=>{const r=nt("Grid",mfe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,grow:u,gutter:d,columns:f,align:A,justify:h,children:m,breakpoints:p,type:g,...x}=r,v=Wt({name:"Grid",classes:rk,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:pfe}),b=hw();return g==="container"&&p?s.jsxs(pM,{value:{getStyles:v,grow:u,columns:f||12,breakpoints:p,type:g},children:[s.jsx(bM,{selector:`.${b}`,...r}),s.jsx("div",{...v("container"),children:s.jsx(ut,{ref:e,...v("root",{className:b}),...x,children:s.jsx("div",{...v("inner"),children:m})})})]}):s.jsxs(pM,{value:{getStyles:v,grow:u,columns:f||12,breakpoints:p,type:g},children:[s.jsx(bM,{selector:`.${b}`,...r}),s.jsx(ut,{ref:e,...v("root",{className:b}),...x,children:s.jsx("div",{...v("inner"),children:m})})]})});tt.classes=rk;tt.displayName="@mantine/core/Grid";tt.Col=nk;function gfe(t="top-end",e=0){const r={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},n=vt(e),[a,i]=t.split("-");return a==="top"&&(r["--indicator-top"]=n,r["--indicator-translate-y"]="-50%"),a==="middle"&&(r["--indicator-top"]="50%",r["--indicator-translate-y"]="-50%"),a==="bottom"&&(r["--indicator-bottom"]=n,r["--indicator-translate-y"]="50%"),i==="start"&&(r["--indicator-left"]=n,r["--indicator-translate-x"]="-50%"),i==="center"&&(r["--indicator-left"]="50%",r["--indicator-translate-x"]="-50%"),i==="end"&&(r["--indicator-right"]=n,r["--indicator-translate-x"]="50%"),r}var hW={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const xfe={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},vfe=(t,{color:e,position:r,offset:n,size:a,radius:i,zIndex:o,autoContrast:l})=>({root:{"--indicator-color":e?Is(e,t):void 0,"--indicator-text-color":fw(l,t)?Xm({color:e,theme:t,autoContrast:l}):void 0,"--indicator-size":vt(a),"--indicator-radius":i===void 0?void 0:es(i),"--indicator-z-index":o==null?void 0:o.toString(),...gfe(r,n)}}),sk=wt((t,e)=>{const r=nt("Indicator",xfe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,children:u,position:d,offset:f,inline:A,label:h,radius:m,color:p,withBorder:g,disabled:x,processing:v,zIndex:b,autoContrast:C,mod:j,...w}=r,N=Wt({name:"Indicator",classes:hW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:vfe});return s.jsxs(ut,{ref:e,...N("root"),mod:[{inline:A},j],...w,children:[!x&&s.jsx(ut,{mod:{"with-label":!!h,"with-border":g,processing:v},...N("indicator"),children:h}),u]})});sk.classes=hW;sk.displayName="@mantine/core/Indicator";function T2(){return T2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T2.apply(null,arguments)}function ak(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bfe=y.useLayoutEffect,yfe=function(e){var r=le.useRef(e);return bfe(function(){r.current=e}),r},yM=function(e,r){if(typeof e=="function"){e(r);return}e.current=r},wfe=function(e,r){var n=le.useRef();return le.useCallback(function(a){e.current=a,n.current&&yM(n.current,null),n.current=r,r&&yM(r,a)},[r])},wM={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},jfe=function(e){Object.keys(wM).forEach(function(r){e.style.setProperty(r,wM[r],"important")})},jM=jfe,Mi=null,CM=function(e,r){var n=e.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?n+r.borderSize:n-r.paddingSize};function Cfe(t,e,r,n){r===void 0&&(r=1),n===void 0&&(n=1/0),Mi||(Mi=document.createElement("textarea"),Mi.setAttribute("tabindex","-1"),Mi.setAttribute("aria-hidden","true"),jM(Mi)),Mi.parentNode===null&&document.body.appendChild(Mi);var a=t.paddingSize,i=t.borderSize,o=t.sizingStyle,l=o.boxSizing;Object.keys(o).forEach(function(A){var h=A;Mi.style[h]=o[h]}),jM(Mi),Mi.value=e;var c=CM(Mi,t);Mi.value=e,c=CM(Mi,t),Mi.value="x";var u=Mi.scrollHeight-a,d=u*r;l==="border-box"&&(d=d+a+i),c=Math.max(d,c);var f=u*n;return l==="border-box"&&(f=f+a+i),c=Math.min(f,c),[c,u]}var NM=function(){},Nfe=function(e,r){return e.reduce(function(n,a){return n[a]=r[a],n},{})},Sfe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Efe=!!document.documentElement.currentStyle,Bfe=function(e){var r=window.getComputedStyle(e);if(r===null)return null;var n=Nfe(Sfe,r),a=n.boxSizing;if(a==="")return null;Efe&&a==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),o=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:o}},Tfe=Bfe;function ik(t,e,r){var n=yfe(r);y.useLayoutEffect(function(){var a=function(o){return n.current(o)};if(t)return t.addEventListener(e,a),function(){return t.removeEventListener(e,a)}},[])}var Dfe=function(e,r){ik(document.body,"reset",function(n){e.current.form===n.target&&r(n)})},Ife=function(e){ik(window,"resize",e)},_fe=function(e){ik(document.fonts,"loadingdone",e)},Pfe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],kfe=function(e,r){var n=e.cacheMeasurements,a=e.maxRows,i=e.minRows,o=e.onChange,l=o===void 0?NM:o,c=e.onHeightChange,u=c===void 0?NM:c,d=ak(e,Pfe),f=d.value!==void 0,A=y.useRef(null),h=wfe(A,r),m=y.useRef(0),p=y.useRef(),g=function(){var b=A.current,C=n&&p.current?p.current:Tfe(b);if(C){p.current=C;var j=Cfe(C,b.value||b.placeholder||"x",i,a),w=j[0],N=j[1];m.current!==w&&(m.current=w,b.style.setProperty("height",w+"px","important"),u(w,{rowHeight:N}))}},x=function(b){f||g(),l(b)};return y.useLayoutEffect(g),Dfe(A,function(){if(!f){var v=A.current.value;requestAnimationFrame(function(){var b=A.current;b&&v!==b.value&&g()})}}),Ife(g),_fe(g),y.createElement("textarea",T2({},d,{onChange:x,ref:h}))},Ofe=y.forwardRef(kfe);const Ffe={},Pl=wt((t,e)=>{const{autosize:r,maxRows:n,minRows:a,__staticSelector:i,resize:o,...l}=nt("Textarea",Ffe,t),c=r&&Bz()!=="test",u=c?{maxRows:n,minRows:a}:{};return s.jsx(eo,{component:c?Ofe:"textarea",ref:e,...l,__staticSelector:i||"Textarea",multiline:!0,"data-no-overflow":r&&n===void 0||void 0,__vars:{"--input-resize":o},...u})});Pl.classes=eo.classes;Pl.displayName="@mantine/core/Textarea";var AW={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const SM={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ec("overlay")},Rfe=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),to=wt((t,e)=>{const r=nt("LoadingOverlay",SM,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,transitionProps:u,loaderProps:d,overlayProps:f,visible:A,zIndex:h,...m}=r,p=Qs(),g=Wt({name:"LoadingOverlay",classes:AW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Rfe}),x={...SM.overlayProps,...f};return s.jsx(Bc,{transition:"fade",...u,mounted:!!A,children:v=>s.jsxs(ut,{...g("root",{style:v}),ref:e,...m,children:[s.jsx(Zi,{...g("loader"),unstyled:l,...d}),s.jsx(p0,{...x,...g("overlay"),darkHidden:!0,unstyled:l,color:(f==null?void 0:f.color)||p.white}),s.jsx(p0,{...x,...g("overlay"),lightHidden:!0,unstyled:l,color:(f==null?void 0:f.color)||p.colors.dark[5]})]})})});to.classes=AW;to.displayName="@mantine/core/LoadingOverlay";const[Mfe,mw]=so("Menu component was not found in the tree");var mx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Lfe={},ok=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("MenuDivider",Lfe,t),c=mw();return s.jsx(ut,{ref:e,...c.getStyles("divider",{className:n,style:a,styles:i,classNames:r}),...l})});ok.classes=mx;ok.displayName="@mantine/core/MenuDivider";const Ufe={},lk=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,onMouseEnter:l,onMouseLeave:c,onKeyDown:u,children:d,...f}=nt("MenuDropdown",Ufe,t),A=y.useRef(null),h=mw(),m=Co(u,x=>{var v,b;(x.key==="ArrowUp"||x.key==="ArrowDown")&&(x.preventDefault(),(b=(v=A.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||b.focus())}),p=Co(l,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=Co(c,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return s.jsxs(Ga.Dropdown,{...f,onMouseEnter:p,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:Zs(e,A),...h.getStyles("dropdown",{className:n,style:a,styles:i,classNames:r,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[h.withInitialFocusPlaceholder&&s.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});lk.classes=mx;lk.displayName="@mantine/core/MenuDropdown";const $fe={},ck=Si((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,color:l,closeMenuOnClick:c,leftSection:u,rightSection:d,children:f,disabled:A,"data-disabled":h,...m}=nt("MenuItem",$fe,t),p=mw(),g=Qs(),{dir:x}=Jm(),v=y.useRef(null),b=p.getItemIndex(v.current),C=m,j=Co(C.onMouseLeave,()=>p.setHovered(-1)),w=Co(C.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),N=Co(C.onClick,()=>{h||(typeof c=="boolean"?c&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately())}),E=Co(C.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),_=l?g.variantColorResolver({color:l,theme:g,variant:"light"}):void 0,k=l?ox({color:l,theme:g}):null;return s.jsxs(yi,{...m,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:E,...p.getStyles("item",{className:n,style:a,styles:i,classNames:r}),ref:Zs(v,e),role:"menuitem",disabled:A,"data-menu-item":!0,"data-disabled":A||h||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:w,onMouseLeave:j,onClick:N,onKeyDown:wz({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:x,orientation:"vertical",onKeyDown:C.onKeyDown}),__vars:{"--menu-item-color":k!=null&&k.isThemeColor&&(k==null?void 0:k.shade)===void 0?`var(--mantine-color-${k.color}-6)`:_==null?void 0:_.color,"--menu-item-hover":_==null?void 0:_.hover},children:[u&&s.jsx("div",{...p.getStyles("itemSection",{styles:i,classNames:r}),"data-position":"left",children:u}),f&&s.jsx("div",{...p.getStyles("itemLabel",{styles:i,classNames:r}),children:f}),d&&s.jsx("div",{...p.getStyles("itemSection",{styles:i,classNames:r}),"data-position":"right",children:d})]})});ck.classes=mx;ck.displayName="@mantine/core/MenuItem";const Hfe={},uk=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("MenuLabel",Hfe,t),c=mw();return s.jsx(ut,{ref:e,...c.getStyles("label",{className:n,style:a,styles:i,classNames:r}),...l})});uk.classes=mx;uk.displayName="@mantine/core/MenuLabel";const Qfe={refProp:"ref"},mW=y.forwardRef((t,e)=>{const{children:r,refProp:n,...a}=nt("MenuTarget",Qfe,t);if(!rf(r))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=mw(),o=r.props,l=Co(o.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),c=Co(o.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),u=Co(o.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return s.jsx(Ga.Target,{refProp:n,popupType:"menu",ref:e,...a,children:y.cloneElement(r,{onClick:l,onMouseEnter:c,onMouseLeave:u,"data-expanded":i.opened?!0:void 0})})});mW.displayName="@mantine/core/MenuTarget";const zfe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ar(t){const e=nt("Menu",zfe,t),{children:r,onOpen:n,onClose:a,opened:i,defaultOpened:o,trapFocus:l,onChange:c,closeOnItemClick:u,loop:d,closeOnEscape:f,trigger:A,openDelay:h,closeDelay:m,classNames:p,styles:g,unstyled:x,variant:v,vars:b,menuItemTabIndex:C,keepMounted:j,withInitialFocusPlaceholder:w,...N}=e,E=Wt({name:"Menu",classes:mx,props:e,classNames:p,styles:g,unstyled:x}),[_,{setHovered:k,resetHovered:D}]=Uie(),[S,F]=qa({value:i,defaultValue:o,finalValue:!1,onChange:c}),[M,R]=y.useState(!1),U=()=>{F(!1),R(!1),S&&(a==null||a())},z=()=>{F(!0),!S&&(n==null||n())},Q=()=>{S?U():z()},{openDropdown:H,closeDropdown:q}=ffe({open:z,close:U,closeDelay:m,openDelay:h}),X=se=>Lie("[data-menu-item]","[data-menu-dropdown]",se),{resolvedClassNames:$,resolvedStyles:K}=Ul({classNames:p,styles:g,props:e});return Ou(()=>{D()},[S]),s.jsx(Mfe,{value:{getStyles:E,opened:S,toggleDropdown:Q,getItemIndex:X,hovered:_,setHovered:k,openedViaClick:M,setOpenedViaClick:R,closeOnItemClick:u,closeDropdown:A==="click"?U:q,openDropdown:A==="click"?z:H,closeDropdownImmediately:U,loop:d,trigger:A,unstyled:x,menuItemTabIndex:C,withInitialFocusPlaceholder:w},children:s.jsx(Ga,{...N,opened:S,onChange:Q,defaultOpened:o,trapFocus:j?!1:l,closeOnEscape:f,__staticSelector:"Menu",classNames:$,styles:K,unstyled:x,variant:v,keepMounted:j,children:r})})}Ar.extend=t=>t;Ar.withProps=yle(Ar);Ar.classes=mx;Ar.displayName="@mantine/core/Menu";Ar.Item=ck;Ar.Label=uk;Ar.Dropdown=lk;Ar.Target=mW;Ar.Divider=ok;const[Vfe,px]=so("Modal component was not found in tree");var sf={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Wfe={},JN=wt((t,e)=>{const r=nt("ModalBody",Wfe,t),{classNames:n,className:a,style:i,styles:o,vars:l,...c}=r,u=px();return s.jsx(OV,{ref:e,...u.getStyles("body",{classNames:n,style:i,styles:o,className:a}),...c})});JN.classes=sf;JN.displayName="@mantine/core/ModalBody";const Gfe={},ZN=wt((t,e)=>{const r=nt("ModalCloseButton",Gfe,t),{classNames:n,className:a,style:i,styles:o,vars:l,...c}=r,u=px();return s.jsx(FV,{ref:e,...u.getStyles("close",{classNames:n,style:i,styles:o,className:a}),...c})});ZN.classes=sf;ZN.displayName="@mantine/core/ModalCloseButton";const qfe={},eS=wt((t,e)=>{const r=nt("ModalContent",qfe,t),{classNames:n,className:a,style:i,styles:o,vars:l,children:c,__hidden:u,...d}=r,f=px(),A=f.scrollAreaComponent||Uue;return s.jsx(RV,{...f.getStyles("content",{className:a,style:i,styles:o,classNames:n}),innerProps:f.getStyles("inner",{className:a,style:i,styles:o,classNames:n}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":u||void 0,ref:e,...d,children:s.jsx(A,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${vt(f.yOffset)} * 2))`},children:c})})});eS.classes=sf;eS.displayName="@mantine/core/ModalContent";const Kfe={},tS=wt((t,e)=>{const r=nt("ModalHeader",Kfe,t),{classNames:n,className:a,style:i,styles:o,vars:l,...c}=r,u=px();return s.jsx(MV,{ref:e,...u.getStyles("header",{classNames:n,style:i,styles:o,className:a}),...c})});tS.classes=sf;tS.displayName="@mantine/core/ModalHeader";const Yfe={},rS=wt((t,e)=>{const r=nt("ModalOverlay",Yfe,t),{classNames:n,className:a,style:i,styles:o,vars:l,...c}=r,u=px();return s.jsx(LV,{ref:e,...u.getStyles("overlay",{classNames:n,style:i,styles:o,className:a}),...c})});rS.classes=sf;rS.displayName="@mantine/core/ModalOverlay";const Xfe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},Jfe=(t,{radius:e,size:r,yOffset:n,xOffset:a})=>({root:{"--modal-radius":e===void 0?void 0:es(e),"--modal-size":vr(r,"modal-size"),"--modal-y-offset":vt(n),"--modal-x-offset":vt(a)}}),nS=wt((t,e)=>{const r=nt("ModalRoot",Xfe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,yOffset:u,scrollAreaComponent:d,radius:f,fullScreen:A,centered:h,xOffset:m,__staticSelector:p,...g}=r,x=Wt({name:p,classes:sf,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Jfe});return s.jsx(Vfe,{value:{yOffset:u,scrollAreaComponent:d,getStyles:x,fullScreen:A},children:s.jsx(kV,{ref:e,...x("root"),"data-full-screen":A||void 0,"data-centered":h||void 0,"data-offset-scrollbars":d===Zm.Autosize||void 0,unstyled:l,...g})})});nS.classes=sf;nS.displayName="@mantine/core/ModalRoot";const[Zfe,ehe]=uw();function pW({children:t}){const[e,r]=y.useState([]),[n,a]=y.useState(Ec("modal"));return s.jsx(Zfe,{value:{stack:e,addModal:(i,o)=>{r(l=>[...new Set([...l,i])]),a(l=>typeof o=="number"&&typeof l=="number"?Math.max(l,o):l)},removeModal:i=>r(o=>o.filter(l=>l!==i)),getZIndex:i=>`calc(${n} + ${e.indexOf(i)} + 1)`,currentId:e[e.length-1],maxZIndex:n},children:t})}pW.displayName="@mantine/core/ModalStack";const the={},sS=wt((t,e)=>{const r=nt("ModalTitle",the,t),{classNames:n,className:a,style:i,styles:o,vars:l,...c}=r,u=px();return s.jsx(UV,{ref:e,...u.getStyles("title",{classNames:n,style:i,styles:o,className:a}),...c})});sS.classes=sf;sS.displayName="@mantine/core/ModalTitle";const rhe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},fa=wt((t,e)=>{const{title:r,withOverlay:n,overlayProps:a,withCloseButton:i,closeButtonProps:o,children:l,radius:c,opened:u,stackId:d,zIndex:f,...A}=nt("Modal",rhe,t),h=ehe(),m=!!r||i,p=h&&d?{closeOnEscape:h.currentId===d,trapFocus:h.currentId===d,zIndex:h.getZIndex(d)}:{},g=n===!1?!1:d&&h?h.currentId===d:u;return y.useEffect(()=>{h&&d&&(u?h.addModal(d,f||Ec("modal")):h.removeModal(d))},[u,d,f]),s.jsxs(nS,{ref:e,radius:c,opened:u,zIndex:h&&d?h.getZIndex(d):f,...A,...p,children:[n&&s.jsx(rS,{visible:g,transitionProps:h&&d?{duration:0}:void 0,...a}),s.jsxs(eS,{radius:c,__hidden:h&&d&&u?d!==h.currentId:!1,children:[m&&s.jsxs(tS,{children:[r&&s.jsx(sS,{children:r}),i&&s.jsx(ZN,{...o})]}),s.jsx(JN,{children:l})]})]})});fa.classes=sf;fa.displayName="@mantine/core/Modal";fa.Root=nS;fa.Overlay=rS;fa.Content=eS;fa.Body=JN;fa.Header=tS;fa.Title=sS;fa.CloseButton=ZN;fa.Stack=pW;const[nhe,dk]=uw(),[she,ahe]=uw();var aS={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const ihe={},ohe=(t,{gap:e},{size:r})=>({group:{"--pg-gap":e!==void 0?vr(e):vr(r,"pg-gap")}}),fk=wt((t,e)=>{const r=nt("PillGroup",ihe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,size:u,disabled:d,...f}=r,A=dk(),h=(A==null?void 0:A.size)||u||void 0,m=Wt({name:"PillGroup",classes:aS,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:ohe,stylesCtx:{size:h},rootSelector:"group"});return s.jsx(she,{value:{size:h,disabled:d},children:s.jsx(ut,{ref:e,size:h,...m("group"),...f})})});fk.classes=aS;fk.displayName="@mantine/core/PillGroup";const lhe={variant:"default"},che=(t,{radius:e},{size:r})=>({root:{"--pill-fz":vr(r,"pill-fz"),"--pill-height":vr(r,"pill-height"),"--pill-radius":e===void 0?void 0:es(e)}}),ey=wt((t,e)=>{const r=nt("Pill",lhe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,variant:u,children:d,withRemoveButton:f,onRemove:A,removeButtonProps:h,radius:m,size:p,disabled:g,mod:x,...v}=r,b=ahe(),C=dk(),j=p||(b==null?void 0:b.size)||void 0,w=(C==null?void 0:C.variant)==="filled"?"contrast":u||"default",N=Wt({name:"Pill",classes:aS,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:che,stylesCtx:{size:j}});return s.jsxs(ut,{component:"span",ref:e,variant:w,size:j,...N("root",{variant:w}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},x],...v,children:[s.jsx("span",{...N("label"),children:d}),f&&s.jsx(Vh,{variant:"transparent",radius:m,tabIndex:-1,"aria-hidden":!0,unstyled:l,...h,...N("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:E=>{var _;E.preventDefault(),E.stopPropagation(),(_=h==null?void 0:h.onMouseDown)==null||_.call(h,E)},onClick:E=>{var _;E.stopPropagation(),A==null||A(),(_=h==null?void 0:h.onClick)==null||_.call(h,E)}})]})});ey.classes=aS;ey.displayName="@mantine/core/Pill";ey.Group=fk;var gW={field:"m_45c4369d"};const uhe={type:"visible"},hk=wt((t,e)=>{const r=nt("PillsInputField",uhe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,type:u,disabled:d,id:f,pointer:A,mod:h,...m}=r,p=dk(),g=hx(),x=Wt({name:"PillsInputField",classes:gW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,rootSelector:"field"}),v=d||(p==null?void 0:p.disabled);return s.jsx(ut,{component:"input",ref:Zs(e,p==null?void 0:p.fieldRef),"data-type":u,disabled:v,mod:[{disabled:v,pointer:A},h],...x("field"),...m,id:(g==null?void 0:g.inputId)||f,"aria-invalid":p==null?void 0:p.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!A&&b.stopPropagation()})});hk.classes=gW;hk.displayName="@mantine/core/PillsInputField";const dhe={},D2=wt((t,e)=>{const r=nt("PillsInput",dhe,t),{children:n,onMouseDown:a,onClick:i,size:o,disabled:l,__staticSelector:c,error:u,variant:d,...f}=r,A=y.useRef(null);return s.jsx(nhe,{value:{fieldRef:A,size:o,disabled:l,hasError:!!u,variant:d},children:s.jsx(eo,{size:o,error:u,variant:d,component:"div",ref:e,onMouseDown:h=>{var m;h.preventDefault(),a==null||a(h),(m=A.current)==null||m.focus()},onClick:h=>{var p;h.preventDefault();const m=h.currentTarget.closest("fieldset");m!=null&&m.disabled||((p=A.current)==null||p.focus(),i==null||i(h))},...f,multiline:!0,disabled:l,__staticSelector:c||"PillsInput",withAria:!1,children:n})})});D2.displayName="@mantine/core/PillsInput";D2.Field=hk;function fhe({data:t,value:e}){const r=e.map(a=>a.trim().toLowerCase());return t.reduce((a,i)=>(x0(i)?a.push({group:i.group,items:i.items.filter(o=>r.indexOf(o.value.toLowerCase().trim())===-1)}):r.indexOf(i.value.toLowerCase().trim())===-1&&a.push(i),a),[])}const hhe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},iS=wt((t,e)=>{const r=nt("MultiSelect",hhe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,size:u,value:d,defaultValue:f,onChange:A,onKeyDown:h,variant:m,data:p,dropdownOpened:g,defaultDropdownOpened:x,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:C,onOptionSubmit:j,comboboxProps:w,filter:N,limit:E,withScrollArea:_,maxDropdownHeight:k,searchValue:D,defaultSearchValue:S,onSearchChange:F,readOnly:M,disabled:R,onFocus:U,onBlur:z,radius:Q,rightSection:H,rightSectionWidth:q,rightSectionPointerEvents:X,rightSectionProps:$,leftSection:K,leftSectionWidth:se,leftSectionPointerEvents:Z,leftSectionProps:ie,inputContainer:ee,inputWrapperOrder:ue,withAsterisk:ae,labelProps:re,descriptionProps:fe,errorProps:G,wrapperProps:oe,description:Se,label:ge,error:te,maxValues:ye,searchable:we,nothingFoundMessage:be,withCheckIcon:Te,checkIconPosition:Oe,hidePickedOptions:Me,withErrorStyles:Ve,name:Pe,form:ze,id:ht,clearable:gt,clearButtonProps:Ct,hiddenInputProps:xt,placeholder:Ie,hiddenInputValuesDivider:De,required:Je,mod:Ke,renderOption:St,onRemove:it,onClear:Pt,scrollAreaProps:dr,chevronColor:ar,...gn}=r,ir=Ll(ht),nn=qV(p),Mt=UP(nn),At=KN({opened:g,defaultOpened:x,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),At.resetSelectedOption()}}),{styleProps:yt,rest:{type:dt,autoComplete:Ot,...Dt}}=cx(gn),[Zt,Pr]=qa({value:d,defaultValue:f,finalValue:[],onChange:A}),[_t,cn]=qa({value:D,defaultValue:S,finalValue:"",onChange:F}),Rr=$r=>{cn($r),At.resetSelectedOption()},Mr=Wt({name:"MultiSelect",classes:{},props:r,classNames:n,styles:o,unstyled:l}),{resolvedClassNames:Xt,resolvedStyles:Jr}=Ul({props:r,styles:o,classNames:n}),Pn=$r=>{h==null||h($r),$r.key===" "&&!we&&($r.preventDefault(),At.toggleDropdown()),$r.key==="Backspace"&&_t.length===0&&Zt.length>0&&(it==null||it(Zt[Zt.length-1]),Pr(Zt.slice(0,Zt.length-1)))},us=Zt.map(($r,Oa)=>{var Fa,Bi;return s.jsx(ey,{withRemoveButton:!M&&!((Fa=Mt[$r])!=null&&Fa.disabled),onRemove:()=>{Pr(Zt.filter(Ro=>$r!==Ro)),it==null||it($r)},unstyled:l,disabled:R,...Mr("pill"),children:((Bi=Mt[$r])==null?void 0:Bi.label)||$r},`${$r}-${Oa}`)});y.useEffect(()=>{C&&At.selectFirstOption()},[C,_t]);const ea=s.jsx(Or.ClearButton,{...Ct,onClear:()=>{Pt==null||Pt(),Pr([]),Rr("")}}),Xa=fhe({data:nn,value:Zt}),ka=gt&&Zt.length>0&&!R&&!M;return s.jsxs(s.Fragment,{children:[s.jsxs(Or,{store:At,classNames:Xt,styles:Jr,unstyled:l,size:u,readOnly:M,__staticSelector:"MultiSelect",onOptionSubmit:$r=>{j==null||j($r),Rr(""),At.updateSelectedOptionIndex("selected"),Zt.includes(Mt[$r].value)?(Pr(Zt.filter(Oa=>Oa!==Mt[$r].value)),it==null||it(Mt[$r].value)):Zt.length<ye&&Pr([...Zt,Mt[$r].value])},...w,children:[s.jsx(Or.DropdownTarget,{children:s.jsx(D2,{...yt,__staticSelector:"MultiSelect",classNames:Xt,styles:Jr,unstyled:l,size:u,className:a,style:i,variant:m,disabled:R,radius:Q,__defaultRightSection:s.jsx(Or.Chevron,{size:u,error:te,unstyled:l,color:ar}),__clearSection:ea,__clearable:ka,rightSection:H,rightSectionPointerEvents:X||(ea?"all":"none"),rightSectionWidth:q,rightSectionProps:$,leftSection:K,leftSectionWidth:se,leftSectionPointerEvents:Z,leftSectionProps:ie,inputContainer:ee,inputWrapperOrder:ue,withAsterisk:ae,labelProps:re,descriptionProps:fe,errorProps:G,wrapperProps:oe,description:Se,label:ge,error:te,withErrorStyles:Ve,__stylesApiProps:{...r,rightSectionPointerEvents:X||(ka?"all":"none"),multiline:!0},pointer:!we,onClick:()=>we?At.openDropdown():At.toggleDropdown(),"data-expanded":At.dropdownOpened||void 0,id:ir,required:Je,mod:Ke,children:s.jsxs(ey.Group,{disabled:R,unstyled:l,...Mr("pillsList"),children:[us,s.jsx(Or.EventsTarget,{autoComplete:Ot,children:s.jsx(D2.Field,{...Dt,ref:e,id:ir,placeholder:Ie,type:!we&&!Ie?"hidden":"visible",...Mr("inputField"),unstyled:l,onFocus:$r=>{U==null||U($r),we&&At.openDropdown()},onBlur:$r=>{z==null||z($r),At.closeDropdown(),Rr("")},onKeyDown:Pn,value:_t,onChange:$r=>{Rr($r.currentTarget.value),we&&At.openDropdown(),C&&At.selectFirstOption()},disabled:R,readOnly:M||!we,pointer:!we})})]})})}),s.jsx(iW,{data:Me?Xa:nn,hidden:M||R,filter:N,search:_t,limit:E,hiddenWhenEmpty:!be,withScrollArea:_,maxDropdownHeight:k,filterOptions:we,value:Zt,checkIconPosition:Oe,withCheckIcon:Te,nothingFoundMessage:be,unstyled:l,labelId:ge?`${ir}-label`:void 0,"aria-label":ge?void 0:gn["aria-label"],renderOption:St,scrollAreaProps:dr})]}),s.jsx(Or.HiddenInput,{name:Pe,valuesDivider:De,value:Zt,form:ze,disabled:R,...xt})]})});iS.classes={...eo.classes,...Or.classes};iS.displayName="@mantine/core/MultiSelect";var xW={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Ahe={withCloseButton:!0},mhe=(t,{radius:e,color:r})=>({root:{"--notification-radius":e===void 0?void 0:es(e),"--notification-color":r?Is(r,t):void 0}}),Ak=wt((t,e)=>{const r=nt("Notification",Ahe,t),{className:n,color:a,radius:i,loading:o,withCloseButton:l,withBorder:c,title:u,icon:d,children:f,onClose:A,closeButtonProps:h,classNames:m,style:p,styles:g,unstyled:x,variant:v,vars:b,mod:C,loaderProps:j,role:w,...N}=r,E=Wt({name:"Notification",classes:xW,props:r,className:n,style:p,classNames:m,styles:g,unstyled:x,vars:b,varsResolver:mhe});return s.jsxs(ut,{...E("root"),mod:[{"data-with-icon":!!d||o,"data-with-border":c},C],ref:e,variant:v,role:w||"alert",...N,children:[d&&!o&&s.jsx("div",{...E("icon"),children:d}),o&&s.jsx(Zi,{size:28,color:a,...j,...E("loader")}),s.jsxs("div",{...E("body"),children:[u&&s.jsx("div",{...E("title"),children:u}),s.jsx(ut,{...E("description"),mod:{"data-with-title":!!u},children:f})]}),l&&s.jsx(Vh,{iconSize:16,color:"gray",...h,unstyled:x,onClick:A,...E("closeButton")})]})});Ak.classes=xW;Ak.displayName="@mantine/core/Notification";function vW(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}var ty;(function(t){t.event="event",t.props="prop"})(ty||(ty={}));function nh(){}function phe(t){var e,r=void 0;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return e&&n.length===e.length&&n.every(function(i,o){return i===e[o]})||(e=n,r=t.apply(void 0,n)),r}}function ry(t){return!!(t||"").match(/\d/)}function Yg(t){return t==null}function ghe(t){return typeof t=="number"&&isNaN(t)}function bW(t){return Yg(t)||ghe(t)||typeof t=="number"&&!isFinite(t)}function yW(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function xhe(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function vhe(t,e,r){var n=xhe(r),a=t.search(/[1-9]/);return a=a===-1?t.length:a,t.substring(0,a)+t.substring(a,t.length).replace(n,"$1"+e)}function bhe(t){var e=y.useRef(t);e.current=t;var r=y.useRef(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return e.current.apply(e,n)});return r.current}function mk(t,e){e===void 0&&(e=!0);var r=t[0]==="-",n=r&&e;t=t.replace("-","");var a=t.split("."),i=a[0],o=a[1]||"";return{beforeDecimal:i,afterDecimal:o,hasNegation:r,addNegation:n}}function yhe(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var r=t.split("."),n=r[0].replace(/^0+/,"")||"0",a=r[1]||"";return(e?"-":"")+n+(a?"."+a:"")}function wW(t,e,r){for(var n="",a=r?"0":"",i=0;i<=e-1;i++)n+=t[i]||a;return n}function EM(t,e){return Array(e+1).join(t)}function jW(t){var e=t+"",r=e[0]==="-"?"-":"";r&&(e=e.substring(1));var n=e.split(/[eE]/g),a=n[0],i=n[1];if(i=Number(i),!i)return r+a;a=a.replace(".","");var o=1+i,l=a.length;return o<0?a="0."+EM("0",Math.abs(o))+a:o>=l?a=a+EM("0",o-l):a=(a.substring(0,o)||"0")+"."+a.substring(o),r+a}function BM(t,e,r){if(["","-"].indexOf(t)!==-1)return t;var n=(t.indexOf(".")!==-1||r)&&e,a=mk(t),i=a.beforeDecimal,o=a.afterDecimal,l=a.hasNegation,c=parseFloat("0."+(o||"0")),u=o.length<=e?"0."+o:c.toFixed(e),d=u.split("."),f=i;i&&Number(d[0])&&(f=i.split("").reverse().reduce(function(p,g,x){return p.length>x?(Number(p[0])+Number(g)).toString()+p.substring(1,p.length):g+p},d[0]));var A=wW(d[1]||"",e,r),h=l?"-":"",m=n?".":"";return""+h+f+m+A}function GA(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var r=t.createTextRange();return r.move("character",e),r.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var CW=phe(function(t,e){for(var r=0,n=0,a=t.length,i=e.length;t[r]===e[r]&&r<a;)r++;for(;t[a-1-n]===e[i-1-n]&&i-n>r&&a-n>r;)n++;return{from:{start:r,end:a-n},to:{start:r,end:i-n}}}),whe=function(t,e){var r=Math.min(t.selectionStart,e);return{from:{start:r,end:t.selectionEnd},to:{start:r,end:e}}};function jhe(t,e,r){return Math.min(Math.max(t,e),r)}function CB(t){return Math.max(t.selectionStart,t.selectionEnd)}function Che(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Nhe(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function She(t){var e=t.currentValue,r=t.formattedValue,n=t.currentValueIndex,a=t.formattedValueIndex;return e[n]===r[a]}function Ehe(t,e,r,n,a,i,o){o===void 0&&(o=She);var l=a.findIndex(function(C){return C}),c=t.slice(0,l);!e&&!r.startsWith(c)&&(e=c,r=c+r,n=n+c.length);for(var u=r.length,d=t.length,f={},A=new Array(u),h=0;h<u;h++){A[h]=-1;for(var m=0,p=d;m<p;m++){var g=o({currentValue:r,lastValue:e,formattedValue:t,currentValueIndex:h,formattedValueIndex:m});if(g&&f[m]!==!0){A[h]=m,f[m]=!0;break}}}for(var x=n;x<u&&(A[x]===-1||!i(r[x]));)x++;var v=x===u||A[x]===-1?d:A[x];for(x=n-1;x>0&&A[x]===-1;)x--;var b=x===-1||A[x]===-1?0:A[x]+1;return b>v?v:n-b<v-n?b:v}function TM(t,e,r,n){var a=t.length;if(e=jhe(e,0,a),n==="left"){for(;e>=0&&!r[e];)e--;e===-1&&(e=r.indexOf(!0))}else{for(;e<=a&&!r[e];)e++;e>a&&(e=r.lastIndexOf(!0))}return e===-1&&(e=a),e}function Bhe(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),r=0,n=e.length;r<n;r++)e[r]=!!(ry(t[r])||ry(t[r-1]));return e}function NW(t,e,r,n,a,i){i===void 0&&(i=nh);var o=bhe(function(m,p){var g,x;return bW(m)?(x="",g=""):typeof m=="number"||p?(x=typeof m=="number"?jW(m):m,g=n(x)):(x=a(m,void 0),g=n(x)),{formattedValue:g,numAsString:x}}),l=y.useState(function(){return o(Yg(t)?e:t,r)}),c=l[0],u=l[1],d=function(m,p){m.formattedValue!==c.formattedValue&&u({formattedValue:m.formattedValue,numAsString:m.value}),i(m,p)},f=t,A=r;Yg(t)&&(f=c.numAsString,A=!0);var h=o(f,A);return y.useMemo(function(){u(h)},[h.formattedValue]),[c,d]}function The(t){return t.replace(/[^0-9]/g,"")}function Dhe(t){return t}function Ihe(t){var e=t.type;e===void 0&&(e="text");var r=t.displayType;r===void 0&&(r="input");var n=t.customInput,a=t.renderText,i=t.getInputRef,o=t.format;o===void 0&&(o=Dhe);var l=t.removeFormatting;l===void 0&&(l=The);var c=t.defaultValue,u=t.valueIsNumericString,d=t.onValueChange,f=t.isAllowed,A=t.onChange;A===void 0&&(A=nh);var h=t.onKeyDown;h===void 0&&(h=nh);var m=t.onMouseUp;m===void 0&&(m=nh);var p=t.onFocus;p===void 0&&(p=nh);var g=t.onBlur;g===void 0&&(g=nh);var x=t.value,v=t.getCaretBoundary;v===void 0&&(v=Bhe);var b=t.isValidInputCharacter;b===void 0&&(b=ry);var C=t.isCharacterSame,j=vW(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),w=NW(x,c,!!u,o,l,d),N=w[0],E=N.formattedValue,_=N.numAsString,k=w[1],D=y.useRef(),S=y.useRef({formattedValue:E,numAsString:_}),F=function(ye,we){S.current={formattedValue:ye.formattedValue,numAsString:ye.value},k(ye,we)},M=y.useState(!1),R=M[0],U=M[1],z=y.useRef(null),Q=y.useRef({setCaretTimeout:null,focusTimeout:null});y.useEffect(function(){return U(!0),function(){clearTimeout(Q.current.setCaretTimeout),clearTimeout(Q.current.focusTimeout)}},[]);var H=o,q=function(ye,we){var be=parseFloat(we);return{formattedValue:ye,value:we,floatValue:isNaN(be)?void 0:be}},X=function(ye,we,be){ye.selectionStart===0&&ye.selectionEnd===ye.value.length||(GA(ye,we),Q.current.setCaretTimeout=setTimeout(function(){ye.value===be&&ye.selectionStart!==we&&GA(ye,we)},0))},$=function(ye,we,be){return TM(ye,we,v(ye),be)},K=function(ye,we,be){var Te=v(we),Oe=Ehe(we,E,ye,be,Te,b,C);return Oe=TM(we,Oe,Te),Oe},se=function(ye){var we=ye.formattedValue;we===void 0&&(we="");var be=ye.input,Te=ye.source,Oe=ye.event,Me=ye.numAsString,Ve;if(be){var Pe=ye.inputValue||be.value,ze=CB(be);be.value=we,Ve=K(Pe,we,ze),Ve!==void 0&&X(be,Ve,we)}we!==E&&F(q(we,Me),{event:Oe,source:Te})};y.useEffect(function(){var ye=S.current,we=ye.formattedValue,be=ye.numAsString;(E!==we||_!==be)&&F(q(E,_),{event:void 0,source:ty.props})},[E,_]);var Z=z.current?CB(z.current):void 0,ie=typeof window<"u"?y.useLayoutEffect:y.useEffect;ie(function(){var ye=z.current;if(E!==S.current.formattedValue&&ye){var we=K(S.current.formattedValue,E,Z);ye.value=E,X(ye,we,E)}},[E]);var ee=function(ye,we,be){var Te=we.target,Oe=D.current?whe(D.current,Te.selectionEnd):CW(E,ye),Me=Object.assign(Object.assign({},Oe),{lastValue:E}),Ve=l(ye,Me),Pe=H(Ve);if(Ve=l(Pe,void 0),f&&!f(q(Pe,Ve))){var ze=we.target,ht=CB(ze),gt=K(ye,E,ht);return ze.value=E,X(ze,gt,E),!1}return se({formattedValue:Pe,numAsString:Ve,inputValue:ye,event:we,source:be,input:we.target}),!0},ue=function(ye,we){we===void 0&&(we=0);var be=ye.selectionStart,Te=ye.selectionEnd;D.current={selectionStart:be,selectionEnd:Te+we}},ae=function(ye){var we=ye.target,be=we.value,Te=ee(be,ye,ty.event);Te&&A(ye),D.current=void 0},re=function(ye){var we=ye.target,be=ye.key,Te=we.selectionStart,Oe=we.selectionEnd,Me=we.value;Me===void 0&&(Me="");var Ve;be==="ArrowLeft"||be==="Backspace"?Ve=Math.max(Te-1,0):be==="ArrowRight"?Ve=Math.min(Te+1,Me.length):be==="Delete"&&(Ve=Te);var Pe=0;be==="Delete"&&Te===Oe&&(Pe=1);var ze=be==="ArrowLeft"||be==="ArrowRight";if(Ve===void 0||Te!==Oe&&!ze){h(ye),ue(we,Pe);return}var ht=Ve;if(ze){var gt=be==="ArrowLeft"?"left":"right";ht=$(Me,Ve,gt),ht!==Ve&&ye.preventDefault()}else be==="Delete"&&!b(Me[Ve])?ht=$(Me,Ve,"right"):be==="Backspace"&&!b(Me[Ve])&&(ht=$(Me,Ve,"left"));ht!==Ve&&X(we,ht,Me),h(ye),ue(we,Pe)},fe=function(ye){var we=ye.target,be=function(){var Te=we.selectionStart,Oe=we.selectionEnd,Me=we.value;if(Me===void 0&&(Me=""),Te===Oe){var Ve=$(Me,Te);Ve!==Te&&X(we,Ve,Me)}};be(),requestAnimationFrame(function(){be()}),m(ye),ue(we)},G=function(ye){ye.persist&&ye.persist();var we=ye.target,be=ye.currentTarget;z.current=we,Q.current.focusTimeout=setTimeout(function(){var Te=we.selectionStart,Oe=we.selectionEnd,Me=we.value;Me===void 0&&(Me="");var Ve=$(Me,Te);Ve!==Te&&!(Te===0&&Oe===Me.length)&&X(we,Ve,Me),p(Object.assign(Object.assign({},ye),{currentTarget:be}))},0)},oe=function(ye){z.current=null,clearTimeout(Q.current.focusTimeout),clearTimeout(Q.current.setCaretTimeout),g(ye)},Se=R&&Che()?"numeric":void 0,ge=Object.assign({inputMode:Se},j,{type:e,value:E,onChange:ae,onKeyDown:re,onMouseUp:fe,onFocus:G,onBlur:oe});if(r==="text")return a?le.createElement(le.Fragment,null,a(E,j)||null):le.createElement("span",Object.assign({},j,{ref:i}),E);if(n){var te=n;return le.createElement(te,Object.assign({},ge,{ref:i}))}return le.createElement("input",Object.assign({},ge,{ref:i}))}function DM(t,e){var r=e.decimalScale,n=e.fixedDecimalScale,a=e.prefix;a===void 0&&(a="");var i=e.suffix;i===void 0&&(i="");var o=e.allowNegative,l=e.thousandsGroupStyle;if(l===void 0&&(l="thousand"),t===""||t==="-")return t;var c=oS(e),u=c.thousandSeparator,d=c.decimalSeparator,f=r!==0&&t.indexOf(".")!==-1||r&&n,A=mk(t,o),h=A.beforeDecimal,m=A.afterDecimal,p=A.addNegation;return r!==void 0&&(m=wW(m,r,!!n)),u&&(h=vhe(h,u,l)),a&&(h=a+h),i&&(m=m+i),p&&(h="-"+h),t=h+(f&&d||"")+m,t}function oS(t){var e=t.decimalSeparator;e===void 0&&(e=".");var r=t.thousandSeparator,n=t.allowedDecimalSeparators;return r===!0&&(r=","),n||(n=[e,"."]),{decimalSeparator:e,thousandSeparator:r,allowedDecimalSeparators:n}}function _he(t,e){t===void 0&&(t="");var r=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=r.test(t),i=n.test(t);return t=t.replace(/-/g,""),a&&!i&&e&&(t="-"+t),t}function Phe(t,e){return new RegExp("(^-)|[0-9]|"+yW(t),"g")}function khe(t,e,r){return t===""?!0:!(e!=null&&e.match(/\d/))&&!(r!=null&&r.match(/\d/))&&typeof t=="string"&&!isNaN(Number(t))}function Ohe(t,e,r){var n;e===void 0&&(e=Nhe(t));var a=r.allowNegative,i=r.prefix;i===void 0&&(i="");var o=r.suffix;o===void 0&&(o="");var l=r.decimalScale,c=e.from,u=e.to,d=u.start,f=u.end,A=oS(r),h=A.allowedDecimalSeparators,m=A.decimalSeparator,p=t[f]===m;if(ry(t)&&(t===i||t===o)&&e.lastValue==="")return t;if(f-d===1&&h.indexOf(t[d])!==-1){var g=l===0?"":m;t=t.substring(0,d)+g+t.substring(d+1,t.length)}var x=function(z,Q,H){var q=!1,X=!1;i.startsWith("-")?q=!1:z.startsWith("--")?(q=!1,X=!0):o.startsWith("-")&&z.length===o.length?q=!1:z[0]==="-"&&(q=!0);var $=q?1:0;return X&&($=2),$&&(z=z.substring($),Q-=$,H-=$),{value:z,start:Q,end:H,hasNegation:q}},v=x(t,d,f),b=v.hasNegation;n=v,t=n.value,d=n.start,f=n.end;var C=x(e.lastValue,c.start,c.end),j=C.start,w=C.end,N=C.value,E=t.substring(d,f);t.length&&N.length&&(j>N.length-o.length||w<i.length)&&!(E&&o.startsWith(E))&&(t=N);var _=0;t.startsWith(i)?_+=i.length:d<i.length&&(_=d),t=t.substring(_),f-=_;var k=t.length,D=t.length-o.length;t.endsWith(o)?k=D:(f>D||f>t.length-o.length)&&(k=f),t=t.substring(0,k),t=_he(b?"-"+t:t,a),t=(t.match(Phe(m))||[]).join("");var S=t.indexOf(m);t=t.replace(new RegExp(yW(m),"g"),function(z,Q){return Q===S?".":""});var F=mk(t,a),M=F.beforeDecimal,R=F.afterDecimal,U=F.addNegation;return u.end-u.start<c.end-c.start&&M===""&&p&&!parseFloat(R)&&(t=U?"-":""),t}function Fhe(t,e){var r=e.prefix;r===void 0&&(r="");var n=e.suffix;n===void 0&&(n="");var a=Array.from({length:t.length+1}).map(function(){return!0}),i=t[0]==="-";a.fill(!1,0,r.length+(i?1:0));var o=t.length;return a.fill(!1,o-n.length+1,o+1),a}function Rhe(t){var e=oS(t),r=e.thousandSeparator,n=e.decimalSeparator,a=t.prefix;a===void 0&&(a="");var i=t.allowNegative;if(i===void 0&&(i=!0),r===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return a.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+a+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},t),{allowNegative:i})}function Mhe(t){t=Rhe(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,r=t.allowNegative,n=t.allowLeadingZeros,a=t.onKeyDown;a===void 0&&(a=nh);var i=t.onBlur;i===void 0&&(i=nh);var o=t.thousandSeparator,l=t.decimalScale,c=t.fixedDecimalScale,u=t.prefix;u===void 0&&(u="");var d=t.defaultValue,f=t.value,A=t.valueIsNumericString,h=t.onValueChange,m=vW(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),p=oS(t),g=p.decimalSeparator,x=p.allowedDecimalSeparators,v=function(U){return DM(U,t)},b=function(U,z){return Ohe(U,z,t)},C=Yg(f)?d:f,j=A??khe(C,u,e);Yg(f)?Yg(d)||(j=j||typeof d=="number"):j=j||typeof f=="number";var w=function(U){return bW(U)?U:(typeof U=="number"&&(U=jW(U)),j&&typeof l=="number"?BM(U,l,!!c):U)},N=NW(w(f),w(d),!!j,v,b,h),E=N[0],_=E.numAsString,k=E.formattedValue,D=N[1],S=function(U){var z=U.target,Q=U.key,H=z.selectionStart,q=z.selectionEnd,X=z.value;if(X===void 0&&(X=""),(Q==="Backspace"||Q==="Delete")&&q<u.length){U.preventDefault();return}if(H!==q){a(U);return}Q==="Backspace"&&X[0]==="-"&&H===u.length+1&&r&&GA(z,1),l&&c&&(Q==="Backspace"&&X[H-1]===g?(GA(z,H-1),U.preventDefault()):Q==="Delete"&&X[H]===g&&U.preventDefault()),x!=null&&x.includes(Q)&&X[H]===g&&GA(z,H+1);var $=o===!0?",":o;Q==="Backspace"&&X[H-1]===$&&GA(z,H-1),Q==="Delete"&&X[H]===$&&GA(z,H+1),a(U)},F=function(U){var z=_;if(z.match(/\d/g)||(z=""),n||(z=yhe(z)),c&&l&&(z=BM(z,l,c)),z!==_){var Q=DM(z,t);D({formattedValue:Q,value:z,floatValue:parseFloat(z)},{event:U,source:ty.event})}i(U)},M=function(U){return U===g?!0:ry(U)},R=function(U){var z=U.currentValue,Q=U.lastValue,H=U.formattedValue,q=U.currentValueIndex,X=U.formattedValueIndex,$=z[q],K=H[X],se=CW(Q,z),Z=se.to,ie=function(ee){return b(ee).indexOf(".")+u.length};return f===0&&c&&l&&z[Z.start]===g&&ie(z)<q&&ie(H)>X?!1:q>=Z.start&&q<Z.end&&x&&x.includes($)&&K===g?!0:$===K};return Object.assign(Object.assign({},m),{value:k,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:R,onValueChange:D,format:v,removeFormatting:b,getCaretBoundary:function(U){return Fhe(U,t)},onKeyDown:S,onBlur:F})}function Lhe(t){var e=Mhe(t);return le.createElement(Ihe,Object.assign({},e))}function IM({direction:t,style:e,...r}){return s.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:t==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:s.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var z4={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Uhe=/^(0\.0*|-0(\.0*)?)$/,$he=/^-?0\d+(\.\d+)?\.?$/;function V4(t){return typeof t=="string"&&t!==""&&!Number.isNaN(Number(t))}function NB(t){return typeof t=="number"?t<Number.MAX_SAFE_INTEGER:t===""||V4(t)&&Number(t)<Number.MAX_SAFE_INTEGER}function Hhe(t){return t.toString().replace(".","").length}function Qhe(t,e){return(typeof t=="number"?t<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(t)))&&!Number.isNaN(t)&&Hhe(e)<14&&e!==""}function _M(t,e,r){if(t===void 0)return!0;const n=e===void 0||t>=e,a=r===void 0||t<=r;return n&&a}const zhe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Vhe=(t,{size:e})=>({controls:{"--ni-chevron-size":vr(e,"ni-chevron-size")}});function Whe(t,e,r){const n=t.toString().replace(/^0+/,""),a=parseFloat(n);return Number.isNaN(a)?n:a>Number.MAX_SAFE_INTEGER?e!==void 0?String(e):n:ju(a,r,e)}const Hi=wt((t,e)=>{const r=nt("NumberInput",zhe,t),{className:n,classNames:a,styles:i,unstyled:o,vars:l,onChange:c,onValueChange:u,value:d,defaultValue:f,max:A,min:h,step:m,hideControls:p,rightSection:g,isAllowed:x,clampBehavior:v,onBlur:b,allowDecimal:C,decimalScale:j,onKeyDown:w,onKeyDownCapture:N,handlersRef:E,startValue:_,disabled:k,rightSectionPointerEvents:D,allowNegative:S,readOnly:F,size:M,rightSectionWidth:R,stepHoldInterval:U,stepHoldDelay:z,allowLeadingZeros:Q,withKeyboardEvents:H,trimLeadingZeroesOnBlur:q,...X}=r,$=Wt({name:"NumberInput",classes:z4,props:r,classNames:a,styles:i,unstyled:o,vars:l,varsResolver:Vhe}),{resolvedClassNames:K,resolvedStyles:se}=Ul({classNames:a,styles:i,props:r}),[Z,ie]=qa({value:d,defaultValue:f,finalValue:"",onChange:c}),ee=z!==void 0&&U!==void 0,ue=y.useRef(null),ae=y.useRef(null),re=y.useRef(0),fe=(Pe,ze)=>{ze.source==="event"&&ie(Qhe(Pe.floatValue,Pe.value)&&!Uhe.test(Pe.value)&&!(Q&&$he.test(Pe.value))?Pe.floatValue:Pe.value),u==null||u(Pe,ze)},G=Pe=>{const ze=String(Pe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ze?Math.max(0,(ze[1]?ze[1].length:0)-(ze[2]?+ze[2]:0)):0},oe=Pe=>{ue.current&&typeof Pe<"u"&&ue.current.setSelectionRange(Pe,Pe)},Se=y.useRef(T4);Se.current=()=>{if(!NB(Z))return;let Pe;const ze=G(Z),ht=G(m),gt=Math.max(ze,ht),Ct=10**gt;if(!V4(Z)&&(typeof Z!="number"||Number.isNaN(Z)))Pe=ju(_,h,A);else if(A!==void 0){const Ie=(Math.round(Number(Z)*Ct)+Math.round(m*Ct))/Ct;Pe=Ie<=A?Ie:A}else Pe=(Math.round(Number(Z)*Ct)+Math.round(m*Ct))/Ct;const xt=Pe.toFixed(gt);ie(parseFloat(xt)),u==null||u({floatValue:parseFloat(xt),formattedValue:xt,value:xt},{source:"increment"}),setTimeout(()=>{var Ie;return oe((Ie=ue.current)==null?void 0:Ie.value.length)},0)};const ge=y.useRef(T4);ge.current=()=>{if(!NB(Z))return;let Pe;const ze=h!==void 0?h:S?Number.MIN_SAFE_INTEGER:0,ht=G(Z),gt=G(m),Ct=Math.max(ht,gt),xt=10**Ct;if(!V4(Z)&&typeof Z!="number"||Number.isNaN(Z))Pe=ju(_,ze,A);else{const De=(Math.round(Number(Z)*xt)-Math.round(m*xt))/xt;Pe=ze!==void 0&&De<ze?ze:De}const Ie=Pe.toFixed(Ct);ie(parseFloat(Ie)),u==null||u({floatValue:parseFloat(Ie),formattedValue:Ie,value:Ie},{source:"decrement"}),setTimeout(()=>{var De;return oe((De=ue.current)==null?void 0:De.value.length)},0)};const te=Pe=>{w==null||w(Pe),!(F||!H)&&(Pe.key==="ArrowUp"&&(Pe.preventDefault(),Se.current()),Pe.key==="ArrowDown"&&(Pe.preventDefault(),ge.current()))},ye=Pe=>{if(N==null||N(Pe),Pe.key==="Backspace"){const ze=ue.current;ze.selectionStart===0&&ze.selectionStart===ze.selectionEnd&&(Pe.preventDefault(),window.setTimeout(()=>oe(0),0))}},we=Pe=>{let ze=Z;v==="blur"&&typeof ze=="number"&&(ze=ju(ze,h,A)),q&&typeof ze=="string"&&G(ze)<15&&(ze=Whe(ze,A,h)),Z!==ze&&ie(ze),b==null||b(Pe)};j2(E,{increment:Se.current,decrement:ge.current});const be=Pe=>{Pe?Se.current():ge.current(),re.current+=1},Te=Pe=>{if(be(Pe),ee){const ze=typeof U=="number"?U:U(re.current);ae.current=window.setTimeout(()=>Te(Pe),ze)}},Oe=(Pe,ze)=>{var ht;Pe.preventDefault(),(ht=ue.current)==null||ht.focus(),be(ze),ee&&(ae.current=window.setTimeout(()=>Te(ze),z))},Me=()=>{ae.current&&window.clearTimeout(ae.current),ae.current=null,re.current=0},Ve=s.jsxs("div",{...$("controls"),children:[s.jsx(yi,{...$("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Z=="number"&&A!==void 0&&Z>=A,mod:{direction:"up"},onMouseDown:Pe=>Pe.preventDefault(),onPointerDown:Pe=>{Oe(Pe,!0)},onPointerUp:Me,onPointerLeave:Me,children:s.jsx(IM,{direction:"up"})}),s.jsx(yi,{...$("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:Pe=>Pe.preventDefault(),onPointerDown:Pe=>{Oe(Pe,!1)},onPointerUp:Me,onPointerLeave:Me,children:s.jsx(IM,{direction:"down"})})]});return s.jsx(eo,{component:Lhe,allowNegative:S,className:qt(z4.root,n),size:M,...X,readOnly:F,disabled:k,value:Z,getInputRef:Zs(e,ue),onValueChange:fe,rightSection:p||F||!NB(Z)?g:g||Ve,classNames:K,styles:se,unstyled:o,__staticSelector:"NumberInput",decimalScale:C?j:0,onKeyDown:te,onKeyDownCapture:ye,rightSectionPointerEvents:D??(k?"none":void 0),rightSectionWidth:R??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:Q,onBlur:we,isAllowed:Pe=>v==="strict"?x?x(Pe)&&_M(Pe.floatValue,h,A):_M(Pe.floatValue,h,A):x?x(Pe):!0})});Hi.classes={...eo.classes,...z4};Hi.displayName="@mantine/core/NumberInput";const[Ghe,lS]=so("Pagination.Root component was not found in tree");var pw={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const qhe={withPadding:!0},gw=wt((t,e)=>{const r=nt("PaginationControl",qhe,t),{classNames:n,className:a,style:i,styles:o,vars:l,active:c,disabled:u,withPadding:d,mod:f,...A}=r,h=lS(),m=u||h.disabled;return s.jsx(yi,{ref:e,disabled:m,mod:[{active:c,disabled:m,"with-padding":d},f],...h.getStyles("control",{className:a,style:i,classNames:n,styles:o,active:!m}),...A})});gw.classes=pw;gw.displayName="@mantine/core/PaginationControl";function xw({style:t,children:e,path:r,...n}){return s.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...t},...n,children:s.jsx("path",{d:r,fill:"currentColor"})})}const Khe=t=>s.jsx(xw,{...t,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),Yhe=t=>s.jsx(xw,{...t,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),Xhe=t=>s.jsx(xw,{...t,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),Jhe=t=>s.jsx(xw,{...t,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),Zhe=t=>s.jsx(xw,{...t,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),eAe={icon:Zhe},cS=wt((t,e)=>{const r=nt("PaginationDots",eAe,t),{classNames:n,className:a,style:i,styles:o,vars:l,icon:c,...u}=r,d=lS(),f=c;return s.jsx(ut,{ref:e,...d.getStyles("dots",{className:a,style:i,styles:o,classNames:n}),...u,children:s.jsx(f,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});cS.classes=pw;cS.displayName="@mantine/core/PaginationDots";function uS({icon:t,name:e,action:r,type:n}){const a={icon:t},i=y.forwardRef((o,l)=>{const{icon:c,...u}=nt(e,a,o),d=c,f=lS(),A=n==="next"?f.active===f.total:f.active===1;return s.jsx(gw,{disabled:f.disabled||A,ref:l,onClick:f[r],withPadding:!1,...u,children:s.jsx(d,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return i.displayName=`@mantine/core/${e}`,i}const SW=uS({icon:Khe,name:"PaginationNext",action:"onNext",type:"next"}),EW=uS({icon:Yhe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),BW=uS({icon:Xhe,name:"PaginationFirst",action:"onFirst",type:"previous"}),TW=uS({icon:Jhe,name:"PaginationLast",action:"onLast",type:"next"});function pk({dotsIcon:t}){const e=lS(),r=e.range.map((n,a)=>{var i,o,l;return n==="dots"?s.jsx(cS,{icon:t},a):s.jsx(gw,{active:n===e.active,"aria-current":n===e.active?"page":void 0,onClick:()=>e.onChange(n),disabled:e.disabled,...(i=e.getItemProps)==null?void 0:i.call(e,n),children:((l=(o=e.getItemProps)==null?void 0:o.call(e,n))==null?void 0:l.children)??n},a)});return s.jsx(s.Fragment,{children:r})}pk.displayName="@mantine/core/PaginationItems";const tAe={siblings:1,boundaries:1},rAe=(t,{size:e,radius:r,color:n,autoContrast:a})=>({root:{"--pagination-control-radius":r===void 0?void 0:es(r),"--pagination-control-size":vr(e,"pagination-control-size"),"--pagination-control-fz":Ds(e),"--pagination-active-bg":n?Is(n,t):void 0,"--pagination-active-color":fw(a,t)?Xm({color:n,theme:t,autoContrast:a}):void 0}}),dS=wt((t,e)=>{const r=nt("PaginationRoot",tAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,total:u,value:d,defaultValue:f,onChange:A,disabled:h,siblings:m,boundaries:p,color:g,radius:x,onNextPage:v,onPreviousPage:b,onFirstPage:C,onLastPage:j,getItemProps:w,autoContrast:N,...E}=r,_=Wt({name:"Pagination",classes:pw,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:rAe}),{range:k,setPage:D,next:S,previous:F,active:M,first:R,last:U}=soe({page:d,initialPage:f,onChange:A,total:u,siblings:m,boundaries:p}),z=Co(v,S),Q=Co(b,F),H=Co(C,R),q=Co(j,U);return s.jsx(Ghe,{value:{total:u,range:k,active:M,disabled:h,getItemProps:w,onChange:D,onNext:z,onPrevious:Q,onFirst:H,onLast:q,getStyles:_},children:s.jsx(ut,{ref:e,..._("root"),...E})})});dS.classes=pw;dS.displayName="@mantine/core/PaginationRoot";const nAe={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},Ei=wt((t,e)=>{const r=nt("Pagination",nAe,t),{withEdges:n,withControls:a,getControlProps:i,nextIcon:o,previousIcon:l,lastIcon:c,firstIcon:u,dotsIcon:d,total:f,gap:A,hideWithOnePage:h,withPages:m,...p}=r;return f<=0||h&&f===1?null:s.jsx(dS,{ref:e,total:f,...p,children:s.jsxs(Bt,{gap:A,children:[n&&s.jsx(BW,{icon:u,...i==null?void 0:i("first")}),a&&s.jsx(EW,{icon:l,...i==null?void 0:i("previous")}),m&&s.jsx(pk,{dotsIcon:d}),a&&s.jsx(SW,{icon:o,...i==null?void 0:i("next")}),n&&s.jsx(TW,{icon:c,...i==null?void 0:i("last")})]})})});Ei.classes=pw;Ei.displayName="@mantine/core/Pagination";Ei.Root=dS;Ei.Control=gw;Ei.Dots=cS;Ei.First=BW;Ei.Last=TW;Ei.Next=SW;Ei.Previous=EW;Ei.Items=pk;const sAe=({reveal:t})=>s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:s.jsx("path",{d:t?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var W4={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const aAe={visibilityToggleIcon:sAe},iAe=(t,{size:e})=>({root:{"--psi-icon-size":vr(e,"psi-icon-size"),"--psi-button-size":vr(e,"psi-button-size")}}),v0=wt((t,e)=>{const r=nt("PasswordInput",aAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,required:u,error:d,leftSection:f,disabled:A,id:h,variant:m,inputContainer:p,description:g,label:x,size:v,errorProps:b,descriptionProps:C,labelProps:j,withAsterisk:w,inputWrapperOrder:N,wrapperProps:E,radius:_,rightSection:k,rightSectionWidth:D,rightSectionPointerEvents:S,leftSectionWidth:F,visible:M,defaultVisible:R,onVisibilityChange:U,visibilityToggleIcon:z,visibilityToggleButtonProps:Q,rightSectionProps:H,leftSectionProps:q,leftSectionPointerEvents:X,withErrorStyles:$,mod:K,...se}=r,Z=Ll(h),[ie,ee]=qa({value:M,defaultValue:R,finalValue:!1,onChange:U}),ue=()=>ee(!ie),ae=Wt({name:"PasswordInput",classes:W4,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:iAe}),{resolvedClassNames:re,resolvedStyles:fe}=Ul({classNames:n,styles:o,props:r}),{styleProps:G,rest:oe}=cx(se),Se=z,ge=(b==null?void 0:b.id)||`${Z}-error`,te=(C==null?void 0:C.id)||`${Z}-description`,be=`${!!d&&typeof d!="boolean"?ge:""} ${!!g?te:""}`,Te=be.trim().length>0?be.trim():void 0,Oe=s.jsx(Dn,{...ae("visibilityToggle"),disabled:A,radius:_,"aria-hidden":!Q,tabIndex:-1,...Q,variant:(Q==null?void 0:Q.variant)??"subtle",color:"gray",unstyled:l,onTouchEnd:Me=>{var Ve;Me.preventDefault(),(Ve=Q==null?void 0:Q.onTouchEnd)==null||Ve.call(Q,Me),ue()},onMouseDown:Me=>{var Ve;Me.preventDefault(),(Ve=Q==null?void 0:Q.onMouseDown)==null||Ve.call(Q,Me),ue()},onKeyDown:Me=>{var Ve;(Ve=Q==null?void 0:Q.onKeyDown)==null||Ve.call(Q,Me),Me.key===" "&&(Me.preventDefault(),ue())},children:s.jsx(Se,{reveal:ie})});return s.jsx(Qn.Wrapper,{required:u,id:Z,label:x,error:d,description:g,size:v,classNames:re,styles:fe,__staticSelector:"PasswordInput",unstyled:l,withAsterisk:w,inputWrapperOrder:N,inputContainer:p,variant:m,labelProps:{...j,htmlFor:Z},descriptionProps:{...C,id:te},errorProps:{...b,id:ge},mod:K,...ae("root"),...G,...E,children:s.jsx(Qn,{component:"div",error:d,leftSection:f,size:v,classNames:{...re,input:qt(W4.input,re.input)},styles:fe,radius:_,disabled:A,__staticSelector:"PasswordInput",rightSectionWidth:D,rightSection:k??Oe,variant:m,unstyled:l,leftSectionWidth:F,rightSectionPointerEvents:S||"all",rightSectionProps:H,leftSectionProps:q,leftSectionPointerEvents:X,withAria:!1,withErrorStyles:$,children:s.jsx("input",{required:u,"data-invalid":!!d||void 0,"data-with-left-section":!!f||void 0,...ae("innerInput"),disabled:A,id:Z,ref:e,...oe,"aria-describedby":Te,autoComplete:oe.autoComplete||"off",type:ie?"text":"password"})})})});v0.classes={...eo.classes,...W4};v0.displayName="@mantine/core/PasswordInput";const[oAe,DW]=so("Progress.Root component was not found in tree");var vw={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const lAe={},gk=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,...l}=nt("ProgressLabel",lAe,t),c=DW();return s.jsx(ut,{ref:e,...c.getStyles("label",{className:n,style:a,classNames:r,styles:i}),...l})});gk.classes=vw;gk.displayName="@mantine/core/ProgressLabel";const cAe={},uAe=(t,{size:e,radius:r,transitionDuration:n})=>({root:{"--progress-size":vr(e,"progress-size"),"--progress-radius":r===void 0?void 0:es(r),"--progress-transition-duration":typeof n=="number"?`${n}ms`:void 0}}),fS=wt((t,e)=>{const r=nt("ProgressRoot",cAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,autoContrast:u,transitionDuration:d,...f}=r,A=Wt({name:"Progress",classes:vw,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:uAe});return s.jsx(oAe,{value:{getStyles:A,autoContrast:u},children:s.jsx(ut,{ref:e,...A("root"),...f})})});fS.classes=vw;fS.displayName="@mantine/core/ProgressRoot";const dAe={withAria:!0},hS=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,value:l,withAria:c,color:u,striped:d,animated:f,mod:A,...h}=nt("ProgressSection",dAe,t),m=DW(),p=Qs(),g=c?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":l,"aria-valuetext":`${l}%`}:{};return s.jsx(ut,{ref:e,...m.getStyles("section",{className:n,classNames:r,styles:i,style:a}),...h,...g,mod:[{striped:d||f,animated:f},A],__vars:{"--progress-section-width":`${l}%`,"--progress-section-color":Is(u,p),"--progress-label-color":fw(m.autoContrast,p)?Xm({color:u,theme:p,autoContrast:m.autoContrast}):void 0}})});hS.classes=vw;hS.displayName="@mantine/core/ProgressSection";const fAe={},gx=wt((t,e)=>{const r=nt("Progress",fAe,t),{value:n,classNames:a,styles:i,vars:o,color:l,striped:c,animated:u,"aria-label":d,...f}=r,{resolvedClassNames:A,resolvedStyles:h}=Ul({classNames:a,styles:i,props:r});return s.jsx(fS,{ref:e,classNames:A,styles:h,vars:o,...f,children:s.jsx(hS,{value:n,color:l,striped:c,animated:u,"aria-label":d})})});gx.classes=vw;gx.displayName="@mantine/core/Progress";gx.Section=hS;gx.Root=fS;gx.Label=gk;const hAe={duration:100,transition:"fade"};function AAe(t,e){return{...hAe,...e,...t}}function mAe({offset:t,position:e,defaultOpened:r}){const[n,a]=y.useState(r),i=y.useRef(null),{x:o,y:l,elements:c,refs:u,update:d,placement:f}=SP({placement:e,middleware:[wP({crossAxis:!0,padding:5,rootBoundary:"document"})]}),A=f.includes("right")?t:e.includes("left")?t*-1:0,h=f.includes("bottom")?t:e.includes("top")?t*-1:0,m=y.useCallback(({clientX:p,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:g,left:p+A,top:g+h,right:p,bottom:g}}})},[c.reference]);return y.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",m);const g=kd(u.floating.current);return g.forEach(x=>{x.addEventListener("scroll",d)}),()=>{p.removeEventListener("mousemove",m),g.forEach(x=>{x.removeEventListener("scroll",d)})}}},[c.reference,u.floating.current,d,m,n]),{handleMouseMove:m,x:o,y:l,opened:n,setOpened:a,boundaryRef:i,floating:u.setFloating}}var AS={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const pAe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Ec("popover")},gAe=(t,{radius:e,color:r})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:es(e),"--tooltip-bg":r?Is(r,t):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),xk=wt((t,e)=>{const r=nt("TooltipFloating",pAe,t),{children:n,refProp:a,withinPortal:i,style:o,className:l,classNames:c,styles:u,unstyled:d,radius:f,color:A,label:h,offset:m,position:p,multiline:g,zIndex:x,disabled:v,defaultOpened:b,variant:C,vars:j,portalProps:w,...N}=r,E=Qs(),_=Wt({name:"TooltipFloating",props:r,classes:AS,className:l,style:o,classNames:c,styles:u,unstyled:d,rootSelector:"tooltip",vars:j,varsResolver:gAe}),{handleMouseMove:k,x:D,y:S,opened:F,boundaryRef:M,floating:R,setOpened:U}=mAe({offset:m,position:p,defaultOpened:b});if(!rf(n))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const z=Zs(M,FN(n),e),Q=n.props,H=X=>{var $;($=Q.onMouseEnter)==null||$.call(Q,X),k(X),U(!0)},q=X=>{var $;($=Q.onMouseLeave)==null||$.call(Q,X),U(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(ep,{...w,withinPortal:i,children:s.jsx(ut,{...N,..._("tooltip",{style:{...Fz(o,E),zIndex:x,display:!v&&F?"block":"none",top:(S&&Math.round(S))??"",left:(D&&Math.round(D))??""}}),variant:C,ref:R,mod:{multiline:g},children:h})}),y.cloneElement(n,{...Q,[a]:z,onMouseEnter:H,onMouseLeave:q})]})});xk.classes=AS;xk.displayName="@mantine/core/TooltipFloating";const IW=y.createContext(!1),xAe=IW.Provider,vAe=()=>y.useContext(IW),bAe={openDelay:0,closeDelay:0};function vk(t){const{openDelay:e,closeDelay:r,children:n}=nt("TooltipGroup",bAe,t);return s.jsx(xAe,{value:!0,children:s.jsx(Oce,{delay:{open:e,close:r},children:n})})}vk.displayName="@mantine/core/TooltipGroup";vk.extend=t=>t;function yAe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function wAe(t){const e=yAe(t.middlewares),r=[Zz(t.offset)];return e.shift&&r.push(wP(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&r.push(typeof e.flip=="boolean"?B2():B2(e.flip)),r.push(eV({element:t.arrowRef,padding:t.arrowOffset})),e.inline?r.push(typeof e.inline=="boolean"?mb():mb(e.inline)):t.inline&&r.push(mb()),r}function jAe(t){var w,N,E;const[e,r]=y.useState(t.defaultOpened),a=typeof t.opened=="boolean"?t.opened:e,i=vAe(),o=Ll(),l=y.useCallback(_=>{r(_),_&&v(o)},[o]),{x:c,y:u,context:d,refs:f,update:A,placement:h,middlewareData:{arrow:{x:m,y:p}={}}}=SP({strategy:t.strategy,placement:t.position,open:a,onOpenChange:l,middleware:wAe(t)}),{delay:g,currentId:x,setCurrentId:v}=Fce(d,{id:o}),{getReferenceProps:b,getFloatingProps:C}=Qce([Pce(d,{enabled:(w=t.events)==null?void 0:w.hover,delay:i?g:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((N=t.events)!=null&&N.touch)}),Hce(d,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),Vce(d,{role:"tooltip"}),Uce(d,{enabled:typeof t.opened>"u"})]);SV({opened:a,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:f,update:A}}),Ou(()=>{var _;(_=t.onPositionChange)==null||_.call(t,h)},[h]);const j=a&&x&&x!==o;return{x:c,y:u,arrowX:m,arrowY:p,reference:f.setReference,floating:f.setFloating,getFloatingProps:C,getReferenceProps:b,isGroupPhase:j,opened:a,placement:h}}const PM={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ec("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},CAe=(t,{radius:e,color:r})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:es(e),"--tooltip-bg":r?Is(r,t):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),Ai=wt((t,e)=>{const r=nt("Tooltip",PM,t),{children:n,position:a,refProp:i,label:o,openDelay:l,closeDelay:c,onPositionChange:u,opened:d,defaultOpened:f,withinPortal:A,radius:h,color:m,classNames:p,styles:g,unstyled:x,style:v,className:b,withArrow:C,arrowSize:j,arrowOffset:w,arrowRadius:N,arrowPosition:E,offset:_,transitionProps:k,multiline:D,events:S,zIndex:F,disabled:M,positionDependencies:R,onClick:U,onMouseEnter:z,onMouseLeave:Q,inline:H,variant:q,keepMounted:X,vars:$,portalProps:K,mod:se,floatingStrategy:Z,middlewares:ie,...ee}=nt("Tooltip",PM,r),{dir:ue}=Jm(),ae=y.useRef(null),re=jAe({position:vV(ue,a),closeDelay:c,openDelay:l,onPositionChange:u,opened:d,defaultOpened:f,events:S,arrowRef:ae,arrowOffset:w,offset:typeof _=="number"?_+(C?j/2:0):_,positionDependencies:[...R,n],inline:H,strategy:Z,middlewares:ie}),fe=Wt({name:"Tooltip",props:r,classes:AS,className:b,style:v,classNames:p,styles:g,unstyled:x,rootSelector:"tooltip",vars:$,varsResolver:CAe});if(!rf(n))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const G=Zs(re.reference,FN(n),e),oe=AAe(k,{duration:100,transition:"fade"}),Se=n.props;return s.jsxs(s.Fragment,{children:[s.jsx(ep,{...K,withinPortal:A,children:s.jsx(Bc,{...oe,keepMounted:X,mounted:!M&&!!re.opened,duration:re.isGroupPhase?10:oe.duration,children:ge=>s.jsxs(ut,{...ee,"data-fixed":Z==="fixed"||void 0,variant:q,mod:[{multiline:D},se],...re.getFloatingProps({ref:re.floating,className:fe("tooltip").className,style:{...fe("tooltip").style,...ge,zIndex:F,top:re.y??0,left:re.x??0}}),children:[o,s.jsx(IP,{ref:ae,arrowX:re.arrowX,arrowY:re.arrowY,visible:C,position:re.placement,arrowSize:j,arrowOffset:w,arrowRadius:N,arrowPosition:E,...fe("arrow")})]})})}),y.cloneElement(n,re.getReferenceProps({onClick:U,onMouseEnter:z,onMouseLeave:Q,onMouseMove:r.onMouseMove,onPointerDown:r.onPointerDown,onPointerEnter:r.onPointerEnter,className:qt(b,Se.className),...Se,[i]:G}))]})});Ai.classes=AS;Ai.displayName="@mantine/core/Tooltip";Ai.Floating=xk;Ai.Group=vk;var _W={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const NAe={withItemsBorders:!0},SAe=(t,{radius:e,color:r,transitionDuration:n,size:a,transitionTimingFunction:i})=>({root:{"--sc-radius":e===void 0?void 0:es(e),"--sc-color":r?Is(r,t):void 0,"--sc-shadow":r?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":n===void 0?void 0:`${n}ms`,"--sc-transition-timing-function":i,"--sc-padding":vr(a,"sc-padding"),"--sc-font-size":Ds(a)}}),bk=wt((t,e)=>{var ue,ae;const r=nt("SegmentedControl",NAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,data:u,value:d,defaultValue:f,onChange:A,size:h,name:m,disabled:p,readOnly:g,fullWidth:x,orientation:v,radius:b,color:C,transitionDuration:j,transitionTimingFunction:w,variant:N,autoContrast:E,withItemsBorders:_,mod:k,...D}=r,S=Wt({name:"SegmentedControl",props:r,classes:_W,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:SAe}),F=Qs(),M=u.map(re=>typeof re=="string"?{label:re,value:re}:re),R=doe(),[U,z]=y.useState(w2()),[Q,H]=y.useState(null),[q,X]=y.useState({}),$=(re,fe)=>{q[fe]=re,X(q)},[K,se]=qa({value:d,defaultValue:f,finalValue:Array.isArray(u)?((ue=M.find(re=>!re.disabled))==null?void 0:ue.value)??((ae=u[0])==null?void 0:ae.value)??null:null,onChange:A}),Z=Ll(m),ie=M.map(re=>y.createElement(ut,{...S("control"),mod:{active:K===re.value,orientation:v},key:re.value},y.createElement("input",{...S("input"),disabled:p||re.disabled,type:"radio",name:Z,value:re.value,id:`${Z}-${re.value}`,checked:K===re.value,onChange:()=>!g&&se(re.value),"data-focus-ring":F.focusRing,key:`${re.value}-input`}),y.createElement(ut,{component:"label",...S("label"),mod:{active:K===re.value&&!(p||re.disabled),disabled:p||re.disabled,"read-only":g},htmlFor:`${Z}-${re.value}`,ref:fe=>$(fe,re.value),__vars:{"--sc-label-color":C!==void 0?Xm({color:C,theme:F,autoContrast:E}):void 0},key:`${re.value}-label`},s.jsx("span",{...S("innerLabel"),children:re.label})))),ee=Zs(e,re=>H(re));return ooe(()=>{z(w2())},[u.length]),u.length===0?null:s.jsxs(ut,{...S("root"),variant:N,size:h,ref:ee,mod:[{"full-width":x,orientation:v,initialized:R,"with-items-borders":_},k],...D,role:"radiogroup","data-disabled":p,children:[typeof K=="string"&&s.jsx(LP,{target:q[K],parent:Q,component:"span",transitionDuration:"var(--sc-transition-duration)",...S("indicator")},U),ie]})});bk.classes=_W;bk.displayName="@mantine/core/SegmentedControl";const EAe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Wr=wt((t,e)=>{const r=nt("Select",EAe,t),{classNames:n,styles:a,unstyled:i,vars:o,dropdownOpened:l,defaultDropdownOpened:c,onDropdownClose:u,onDropdownOpen:d,onFocus:f,onBlur:A,onClick:h,onChange:m,data:p,value:g,defaultValue:x,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:C,readOnly:j,disabled:w,filter:N,limit:E,withScrollArea:_,maxDropdownHeight:k,size:D,searchable:S,rightSection:F,checkIconPosition:M,withCheckIcon:R,nothingFoundMessage:U,name:z,form:Q,searchValue:H,defaultSearchValue:q,onSearchChange:X,allowDeselect:$,error:K,rightSectionPointerEvents:se,id:Z,clearable:ie,clearButtonProps:ee,hiddenInputProps:ue,renderOption:ae,onClear:re,autoComplete:fe,scrollAreaProps:G,__defaultRightSection:oe,__clearSection:Se,__clearable:ge,chevronColor:te,...ye}=r,we=y.useMemo(()=>qV(p),[p]),be=y.useMemo(()=>UP(we),[we]),Te=Ll(Z),[Oe,Me,Ve]=qa({value:g,defaultValue:x,finalValue:null,onChange:m}),Pe=typeof Oe=="string"?be[Oe]:void 0,ze=coe(Pe),[ht,gt,Ct]=qa({value:H,defaultValue:q,finalValue:Pe?Pe.label:"",onChange:X}),xt=KN({opened:l,defaultOpened:c,onDropdownOpen:()=>{d==null||d(),xt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),xt.resetSelectedOption()}}),Ie=it=>{gt(it),xt.resetSelectedOption()},{resolvedClassNames:De,resolvedStyles:Je}=Ul({props:r,styles:a,classNames:n});y.useEffect(()=>{v&&xt.selectFirstOption()},[v,ht]),y.useEffect(()=>{g===null&&Ie(""),typeof g=="string"&&Pe&&((ze==null?void 0:ze.value)!==Pe.value||(ze==null?void 0:ze.label)!==Pe.label)&&Ie(Pe.label)},[g,Pe]),y.useEffect(()=>{var it;!Ve&&!Ct&&Ie(typeof Oe=="string"&&((it=be[Oe])==null?void 0:it.label)||"")},[p,Oe]);const Ke=s.jsx(Or.ClearButton,{...ee,onClear:()=>{Me(null,null),Ie(""),re==null||re()}}),St=ie&&!!Oe&&!w&&!j;return s.jsxs(s.Fragment,{children:[s.jsxs(Or,{store:xt,__staticSelector:"Select",classNames:De,styles:Je,unstyled:i,readOnly:j,onOptionSubmit:it=>{b==null||b(it);const Pt=$&&be[it].value===Oe?null:be[it],dr=Pt?Pt.value:null;dr!==Oe&&Me(dr,Pt),!Ve&&Ie(typeof dr=="string"&&(Pt==null?void 0:Pt.label)||""),xt.closeDropdown()},size:D,...C,children:[s.jsx(Or.Target,{targetType:S?"input":"button",autoComplete:fe,children:s.jsx(eo,{id:Te,ref:e,__defaultRightSection:s.jsx(Or.Chevron,{size:D,error:K,unstyled:i,color:te}),__clearSection:Ke,__clearable:St,rightSection:F,rightSectionPointerEvents:se||(St?"all":"none"),...ye,size:D,__staticSelector:"Select",disabled:w,readOnly:j||!S,value:ht,onChange:it=>{Ie(it.currentTarget.value),xt.openDropdown(),v&&xt.selectFirstOption()},onFocus:it=>{S&&xt.openDropdown(),f==null||f(it)},onBlur:it=>{var Pt;S&&xt.closeDropdown(),Ie(Oe!=null&&((Pt=be[Oe])==null?void 0:Pt.label)||""),A==null||A(it)},onClick:it=>{S?xt.openDropdown():xt.toggleDropdown(),h==null||h(it)},classNames:De,styles:Je,unstyled:i,pointer:!S,error:K})}),s.jsx(iW,{data:we,hidden:j||w,filter:N,search:ht,limit:E,hiddenWhenEmpty:!U,withScrollArea:_,maxDropdownHeight:k,filterOptions:S&&(Pe==null?void 0:Pe.label)!==ht,value:Oe,checkIconPosition:M,withCheckIcon:R,nothingFoundMessage:U,unstyled:i,labelId:ye.label?`${Te}-label`:void 0,"aria-label":ye.label?void 0:ye["aria-label"],renderOption:ae,scrollAreaProps:G})]}),s.jsx(Or.HiddenInput,{value:Oe,name:z,form:Q,disabled:w,...ue})]})});Wr.classes={...eo.classes,...Or.classes};Wr.displayName="@mantine/core/Select";function BAe({spacing:t,verticalSpacing:e,cols:r,selector:n}){var d;const a=Qs(),i=e===void 0?t:e,o=Qh({"--sg-spacing-x":$s(Ac(t)),"--sg-spacing-y":$s(Ac(i)),"--sg-cols":(d=Ac(r))==null?void 0:d.toString()}),l=ua(a.breakpoints).reduce((f,A)=>(f[A]||(f[A]={}),typeof t=="object"&&t[A]!==void 0&&(f[A]["--sg-spacing-x"]=$s(t[A])),typeof i=="object"&&i[A]!==void 0&&(f[A]["--sg-spacing-y"]=$s(i[A])),typeof r=="object"&&r[A]!==void 0&&(f[A]["--sg-cols"]=r[A]),f),{}),u=iP(ua(l),a.breakpoints).filter(f=>ua(l[f.value]).length>0).map(f=>({query:`(min-width: ${a.breakpoints[f.value]})`,styles:l[f.value]}));return s.jsx(lx,{styles:o,media:u,selector:n})}function SB(t){return typeof t=="object"&&t!==null?ua(t):[]}function TAe(t){return t.sort((e,r)=>Xb(e)-Xb(r))}function DAe({spacing:t,verticalSpacing:e,cols:r}){const n=Array.from(new Set([...SB(t),...SB(e),...SB(r)]));return TAe(n)}function IAe({spacing:t,verticalSpacing:e,cols:r,selector:n}){var u;const a=e===void 0?t:e,i=Qh({"--sg-spacing-x":$s(Ac(t)),"--sg-spacing-y":$s(Ac(a)),"--sg-cols":(u=Ac(r))==null?void 0:u.toString()}),o=DAe({spacing:t,verticalSpacing:e,cols:r}),l=o.reduce((d,f)=>(d[f]||(d[f]={}),typeof t=="object"&&t[f]!==void 0&&(d[f]["--sg-spacing-x"]=$s(t[f])),typeof a=="object"&&a[f]!==void 0&&(d[f]["--sg-spacing-y"]=$s(a[f])),typeof r=="object"&&r[f]!==void 0&&(d[f]["--sg-cols"]=r[f]),d),{}),c=o.map(d=>({query:`simple-grid (min-width: ${d})`,styles:l[d]}));return s.jsx(lx,{styles:i,container:c,selector:n})}var PW={container:"m_925c2d2c",root:"m_2415a157"};const _Ae={cols:1,spacing:"md",type:"media"},yk=wt((t,e)=>{const r=nt("SimpleGrid",_Ae,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,cols:u,verticalSpacing:d,spacing:f,type:A,...h}=r,m=Wt({name:"SimpleGrid",classes:PW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c}),p=hw();return A==="container"?s.jsxs(s.Fragment,{children:[s.jsx(IAe,{...r,selector:`.${p}`}),s.jsx("div",{...m("container"),children:s.jsx(ut,{ref:e,...m("root",{className:p}),...h})})]}):s.jsxs(s.Fragment,{children:[s.jsx(BAe,{...r,selector:`.${p}`}),s.jsx(ut,{ref:e,...m("root",{className:p}),...h})]})});yk.classes=PW;yk.displayName="@mantine/core/SimpleGrid";const[PAe,mS]=so("SliderProvider was not found in tree"),kW=y.forwardRef(({size:t,disabled:e,variant:r,color:n,thumbSize:a,radius:i,...o},l)=>{const{getStyles:c}=mS();return s.jsx(ut,{tabIndex:-1,variant:r,size:t,ref:l,...c("root"),...o})});kW.displayName="@mantine/core/SliderRoot";const OW=y.forwardRef(({max:t,min:e,value:r,position:n,label:a,dragging:i,onMouseDown:o,onKeyDownCapture:l,labelTransitionProps:c,labelAlwaysOn:u,thumbLabel:d,onFocus:f,onBlur:A,showLabelOnHover:h,isHovered:m,children:p=null,disabled:g},x)=>{const{getStyles:v}=mS(),[b,C]=y.useState(!1),j=u||i||b||h&&m;return s.jsxs(ut,{tabIndex:0,role:"slider","aria-label":d,"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":r,ref:x,__vars:{"--slider-thumb-offset":`${n}%`},...v("thumb",{focusable:!0}),mod:{dragging:i,disabled:g},onFocus:w=>{C(!0),typeof f=="function"&&f(w)},onBlur:w=>{C(!1),typeof A=="function"&&A(w)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:l,onClick:w=>w.stopPropagation(),children:[p,s.jsx(Bc,{mounted:a!=null&&!!j,transition:"fade",duration:0,...c,children:w=>s.jsx("div",{...v("label",{style:w}),children:a})})]})});OW.displayName="@mantine/core/SliderThumb";function FW({value:t,min:e,max:r}){const n=(t-e)/(r-e)*100;return Math.min(Math.max(n,0),100)}function kAe({mark:t,offset:e,value:r,inverted:n=!1}){return n?typeof e=="number"&&t.value<=e||t.value>=r:typeof e=="number"?t.value>=e&&t.value<=r:t.value<=r}function RW({marks:t,min:e,max:r,disabled:n,value:a,offset:i,inverted:o}){const{getStyles:l}=mS();if(!t)return null;const c=t.map((u,d)=>y.createElement(ut,{...l("markWrapper"),__vars:{"--mark-offset":`${FW({value:u.value,min:e,max:r})}%`},key:d},s.jsx(ut,{...l("mark"),mod:{filled:kAe({mark:u,value:a,offset:i,inverted:o}),disabled:n}}),u.label&&s.jsx("div",{...l("markLabel"),children:u.label})));return s.jsx("div",{children:c})}RW.displayName="@mantine/core/SliderMarks";function MW({filled:t,children:e,offset:r,disabled:n,marksOffset:a,inverted:i,containerProps:o,...l}){const{getStyles:c}=mS();return s.jsx(ut,{...c("trackContainer"),mod:{disabled:n},...o,children:s.jsxs(ut,{...c("track"),mod:{inverted:i,disabled:n},children:[s.jsx(ut,{mod:{inverted:i,disabled:n},__vars:{"--slider-bar-width":`calc(${t}% + var(--slider-size))`,"--slider-bar-offset":`calc(${r}% - var(--slider-size))`},...c("bar")}),e,s.jsx(RW,{...l,offset:a,disabled:n,inverted:i})]})})}MW.displayName="@mantine/core/SliderTrack";function OAe({value:t,containerWidth:e,min:r,max:n,step:a,precision:i}){const l=(e?Math.min(Math.max(t,0),e)/e:t)*(n-r),c=(l!==0?Math.round(l/a)*a:0)+r,u=Math.max(c,r);return i!==void 0?Number(u.toFixed(i)):u}function H1(t,e){return parseFloat(t.toFixed(e))}function FAe(t){if(!t)return 0;const e=t.toString().split(".");return e.length>1?e[1].length:0}function EB(t,e){const n=[...e].sort((a,i)=>a.value-i.value).find(a=>a.value>t);return n?n.value:t}function BB(t,e){const n=[...e].sort((a,i)=>i.value-a.value).find(a=>a.value<t);return n?n.value:t}function kM(t){const e=[...t].sort((r,n)=>r.value-n.value);return e.length>0?e[0].value:0}function OM(t){const e=[...t].sort((r,n)=>r.value-n.value);return e.length>0?e[e.length-1].value:100}var LW={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const RAe={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:t=>t},MAe=(t,{size:e,color:r,thumbSize:n,radius:a})=>({root:{"--slider-size":vr(e,"slider-size"),"--slider-color":r?Is(r,t):void 0,"--slider-radius":a===void 0?void 0:es(a),"--slider-thumb-size":n!==void 0?vt(n):"calc(var(--slider-size) * 2)"}}),wk=wt((t,e)=>{const r=nt("Slider",RAe,t),{classNames:n,styles:a,value:i,onChange:o,onChangeEnd:l,size:c,min:u,max:d,step:f,precision:A,defaultValue:h,name:m,marks:p,label:g,labelTransitionProps:x,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:C,thumbChildren:j,disabled:w,unstyled:N,scale:E,inverted:_,className:k,style:D,vars:S,hiddenInputProps:F,restrictToMarks:M,thumbProps:R,...U}=r,z=Wt({name:"Slider",props:r,classes:LW,classNames:n,className:k,styles:a,style:D,vars:S,varsResolver:MAe,unstyled:N}),{dir:Q}=Jm(),[H,q]=y.useState(!1),[X,$]=qa({value:typeof i=="number"?ju(i,u,d):i,defaultValue:typeof h=="number"?ju(h,u,d):h,finalValue:ju(0,u,d),onChange:o}),K=y.useRef(X),se=y.useRef(l);y.useEffect(()=>{se.current=l},[l]);const Z=y.useRef(null),ie=y.useRef(null),ee=FW({value:X,min:u,max:d}),ue=E(X),ae=typeof g=="function"?g(ue):g,re=A??FAe(f),fe=y.useCallback(({x:ye})=>{if(!w){const we=OAe({value:ye,min:u,max:d,step:f,precision:re});$(M&&(p!=null&&p.length)?FR(we,p.map(be=>be.value)):we),K.current=we}},[w,u,d,f,re,$,p,M]),G=y.useCallback(()=>{if(!w&&se.current){const ye=M&&(p!=null&&p.length)?FR(K.current,p.map(we=>we.value)):K.current;se.current(ye)}},[w,p,M]),{ref:oe,active:Se}=noe(fe,{onScrubEnd:G},Q),ge=y.useCallback(ye=>{!w&&se.current&&se.current(ye)},[w]),te=ye=>{var we,be,Te,Oe,Me,Ve;if(!w)switch(ye.key){case"ArrowUp":{if(ye.preventDefault(),(we=ie.current)==null||we.focus(),M&&p){const ze=EB(X,p);$(ze),ge(ze);break}const Pe=H1(Math.min(Math.max(X+f,u),d),re);$(Pe),ge(Pe);break}case"ArrowRight":{if(ye.preventDefault(),(be=ie.current)==null||be.focus(),M&&p){const ze=Q==="rtl"?BB(X,p):EB(X,p);$(ze),ge(ze);break}const Pe=H1(Math.min(Math.max(Q==="rtl"?X-f:X+f,u),d),re);$(Pe),ge(Pe);break}case"ArrowDown":{if(ye.preventDefault(),(Te=ie.current)==null||Te.focus(),M&&p){const ze=BB(X,p);$(ze),ge(ze);break}const Pe=H1(Math.min(Math.max(X-f,u),d),re);$(Pe),ge(Pe);break}case"ArrowLeft":{if(ye.preventDefault(),(Oe=ie.current)==null||Oe.focus(),M&&p){const ze=Q==="rtl"?EB(X,p):BB(X,p);$(ze),ge(ze);break}const Pe=H1(Math.min(Math.max(Q==="rtl"?X+f:X-f,u),d),re);$(Pe),ge(Pe);break}case"Home":{if(ye.preventDefault(),(Me=ie.current)==null||Me.focus(),M&&p){$(kM(p)),ge(kM(p));break}$(u),ge(u);break}case"End":{if(ye.preventDefault(),(Ve=ie.current)==null||Ve.focus(),M&&p){$(OM(p)),ge(OM(p));break}$(d),ge(d);break}}};return s.jsx(PAe,{value:{getStyles:z},children:s.jsxs(kW,{...U,ref:Zs(e,Z),onKeyDownCapture:te,onMouseDownCapture:()=>{var ye;return(ye=Z.current)==null?void 0:ye.focus()},size:c,disabled:w,children:[s.jsx(MW,{inverted:_,offset:0,filled:ee,marks:p,min:u,max:d,value:ue,disabled:w,containerProps:{ref:oe,onMouseEnter:C?()=>q(!0):void 0,onMouseLeave:C?()=>q(!1):void 0},children:s.jsx(OW,{max:d,min:u,value:ue,position:ee,dragging:Se,label:ae,ref:ie,labelTransitionProps:x,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:C,isHovered:H,disabled:w,...R,children:j})}),s.jsx("input",{type:"hidden",name:m,value:ue,...F})]})})});wk.classes=LW;wk.displayName="@mantine/core/Slider";var UW={root:"m_6d731127"};const LAe={gap:"md",align:"stretch",justify:"flex-start"},UAe=(t,{gap:e,align:r,justify:n})=>({root:{"--stack-gap":$s(e),"--stack-align":r,"--stack-justify":n}}),ps=wt((t,e)=>{const r=nt("Stack",LAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,align:u,justify:d,gap:f,variant:A,...h}=r,m=Wt({name:"Stack",props:r,classes:UW,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:UAe});return s.jsx(ut,{ref:e,...m("root"),variant:A,...h})});ps.classes=UW;ps.displayName="@mantine/core/Stack";const[$Ae,HAe]=so("Stepper component was not found in tree"),I2=()=>null;I2.displayName="@mantine/core/StepperCompleted";var jk={root:"m_cbb4ea7e",steps:"m_aaf89d0b",separator:"m_2a371ac9",content:"m_78da155d",step:"m_cbb57068","step--horizontal":"m_f56b1e2c","step--vertical":"m_833edb7e",verticalSeparator:"m_6496b3f3",stepWrapper:"m_818e70b",stepIcon:"m_1959ad01",stepCompletedIcon:"m_a79331dc",stepBody:"m_1956aa2a",stepLabel:"m_12051f6c",stepDescription:"m_164eea74"};const Q1=(t,e)=>typeof t=="function"?s.jsx(t,{step:e||0}):t,QAe={withIcon:!0,allowStepClick:!0,iconPosition:"left"},Ck=wt((t,e)=>{const{classNames:r,className:n,style:a,styles:i,vars:o,step:l,state:c,color:u,icon:d,completedIcon:f,progressIcon:A,label:h,description:m,withIcon:p,iconSize:g,loading:x,allowStepClick:v,allowStepSelect:b,iconPosition:C,orientation:j,mod:w,...N}=nt("StepperStep",QAe,t),E=HAe(),_=Qs(),k={classNames:r,styles:i},D=c==="stepCompleted"?null:c==="stepProgress"?A:d,S={"data-progress":c==="stepProgress"||void 0,"data-completed":c==="stepCompleted"||void 0};return s.jsxs(yi,{...E.getStyles("step",{className:n,style:a,variant:E.orientation,...k}),mod:[{"icon-position":C||E.iconPosition,"allow-click":v},w],ref:e,...S,...N,__vars:{"--step-color":u?Is(u,_):void 0},tabIndex:v?0:-1,children:[p&&s.jsxs("span",{...E.getStyles("stepWrapper",k),children:[s.jsxs("span",{...E.getStyles("stepIcon",k),...S,children:[s.jsx(Bc,{mounted:c==="stepCompleted",transition:"pop",duration:200,children:F=>s.jsx("span",{...E.getStyles("stepCompletedIcon",{style:F,...k}),children:x?s.jsx(Zi,{color:"var(--mantine-color-white)",size:"calc(var(--stepper-icon-size) / 2)",...E.getStyles("stepLoader",k)}):Q1(f,l)||s.jsx(rW,{size:"60%"})})}),c!=="stepCompleted"?x?s.jsx(Zi,{...E.getStyles("stepLoader",k),size:"calc(var(--stepper-icon-size) / 2)",color:u}):Q1(D||d,l):null]}),j==="vertical"&&s.jsx("span",{...E.getStyles("verticalSeparator",k),"data-active":c==="stepCompleted"||void 0})]}),(h||m)&&s.jsxs("span",{...E.getStyles("stepBody",k),"data-orientation":E.orientation,"data-icon-position":C||E.iconPosition,children:[h&&s.jsx("span",{...E.getStyles("stepLabel",k),children:Q1(h,l)}),m&&s.jsx("span",{...E.getStyles("stepDescription",k),children:Q1(m,l)})]})]})});Ck.classes=jk;Ck.displayName="@mantine/core/StepperStep";const zAe={orientation:"horizontal",iconPosition:"left",allowNextStepsSelect:!0,wrap:!0},VAe=(t,{color:e,iconSize:r,size:n,contentPadding:a,radius:i,autoContrast:o})=>({root:{"--stepper-color":e?Is(e,t):void 0,"--stepper-icon-color":fw(o,t)?Xm({color:e,theme:t,autoContrast:o}):void 0,"--stepper-icon-size":r===void 0?vr(n,"stepper-icon-size"):vt(r),"--stepper-content-padding":$s(a),"--stepper-radius":i===void 0?void 0:es(i),"--stepper-fz":Ds(n),"--stepper-spacing":$s(n)}}),wd=wt((t,e)=>{var Q,H,q;const r=nt("Stepper",zAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,children:u,onStepClick:d,active:f,icon:A,completedIcon:h,progressIcon:m,color:p,iconSize:g,contentPadding:x,orientation:v,iconPosition:b,size:C,radius:j,allowNextStepsSelect:w,wrap:N,autoContrast:E,..._}=r,k=Wt({name:"Stepper",classes:jk,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:VAe}),D=y.Children.toArray(u),S=D.filter(X=>X.type!==I2),F=D.find(X=>X.type===I2),M=S.reduce((X,$,K)=>{const se=f===K?"stepProgress":f>K?"stepCompleted":"stepInactive",ie=typeof d!="function"?!1:typeof $.props.allowStepSelect=="boolean"?$.props.allowStepSelect:se==="stepCompleted"||w;return X.push(y.cloneElement($,{icon:$.props.icon||A||K+1,key:K,step:K,state:se,onClick:()=>ie&&(d==null?void 0:d(K)),allowStepClick:ie,completedIcon:$.props.completedIcon||h,progressIcon:$.props.progressIcon||m,color:$.props.color||p,iconSize:g,iconPosition:$.props.iconPosition||b,orientation:v})),v==="horizontal"&&K!==S.length-1&&X.push(y.createElement("div",{...k("separator"),"data-active":K<f||void 0,"data-orientation":v,key:`separator-${K}`})),X},[]),R=(H=(Q=S[f])==null?void 0:Q.props)==null?void 0:H.children,U=(q=F==null?void 0:F.props)==null?void 0:q.children,z=f>S.length-1?U:R;return s.jsx($Ae,{value:{getStyles:k,orientation:v,iconPosition:b},children:s.jsxs(ut,{...k("root"),ref:e,size:C,..._,children:[s.jsx(ut,{...k("steps"),mod:{orientation:v,"icon-position":b,wrap:N&&v!=="vertical"},children:M}),z&&s.jsx("div",{...k("content"),children:z})]})})});wd.classes=jk;wd.displayName="@mantine/core/Stepper";wd.Completed=I2;wd.Step=Ck;const $W=y.createContext(null),WAe=$W.Provider,GAe=()=>y.useContext($W),qAe={},Nk=wt((t,e)=>{const{value:r,defaultValue:n,onChange:a,size:i,wrapperProps:o,children:l,readOnly:c,...u}=nt("SwitchGroup",qAe,t),[d,f]=qa({value:r,defaultValue:n,finalValue:[],onChange:a}),A=h=>{const m=h.currentTarget.value;!c&&f(d.includes(m)?d.filter(p=>p!==m):[...d,m])};return s.jsx(WAe,{value:{value:d,onChange:A,size:i},children:s.jsx(Qn.Wrapper,{size:i,ref:e,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:s.jsx(kde,{role:"group",children:l})})})});Nk.classes=Qn.Wrapper.classes;Nk.displayName="@mantine/core/SwitchGroup";var HW={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const KAe={labelPosition:"right"},YAe=(t,{radius:e,color:r,size:n})=>({root:{"--switch-radius":e===void 0?void 0:es(e),"--switch-height":vr(n,"switch-height"),"--switch-width":vr(n,"switch-width"),"--switch-thumb-size":vr(n,"switch-thumb-size"),"--switch-label-font-size":vr(n,"switch-label-font-size"),"--switch-track-label-padding":vr(n,"switch-track-label-padding"),"--switch-color":r?Is(r,t):void 0}}),Em=wt((t,e)=>{const r=nt("Switch",KAe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,color:u,label:d,offLabel:f,onLabel:A,id:h,size:m,radius:p,wrapperProps:g,thumbIcon:x,checked:v,defaultChecked:b,onChange:C,labelPosition:j,description:w,error:N,disabled:E,variant:_,rootRef:k,mod:D,...S}=r,F=GAe(),M=m||(F==null?void 0:F.size),R=Wt({name:"Switch",props:r,classes:HW,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:YAe}),{styleProps:U,rest:z}=cx(S),Q=Ll(h),H=F?{checked:F.value.includes(z.value),onChange:F.onChange}:{},[q,X]=qa({value:H.checked??v,defaultValue:b,finalValue:!1});return s.jsxs(tW,{...R("root"),__staticSelector:"Switch",__stylesApiProps:r,id:Q,size:M,labelPosition:j,label:d,description:w,error:N,disabled:E,bodyElement:"label",labelElement:"span",classNames:n,styles:o,unstyled:l,"data-checked":H.checked||v||void 0,variant:_,ref:k,mod:D,...U,...g,children:[s.jsx("input",{...z,disabled:E,checked:q,"data-checked":H.checked||v||void 0,onChange:$=>{var K;F?(K=H.onChange)==null||K.call(H,$):C==null||C($),X($.currentTarget.checked)},id:Q,ref:e,type:"checkbox",role:"switch",...R("input")}),s.jsxs(ut,{"aria-hidden":"true",component:"span",mod:{error:N,"label-position":j,"without-labels":!A&&!f},...R("track"),children:[s.jsx(ut,{component:"span",mod:"reduce-motion",...R("thumb"),children:x}),s.jsx("span",{...R("trackLabel"),children:q?A:f})]})]})});Em.classes={...HW,...Pde};Em.displayName="@mantine/core/Switch";Em.Group=Nk;const[XAe,JAe]=so("Table component was not found in the tree");var bw={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function ZAe(t,e){if(!e)return;const r={};return e.columnBorder&&t.withColumnBorders&&(r["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(r["data-with-row-border"]=!0),e.striped&&t.striped&&(r["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(r["data-hover"]=!0),e.captionSide&&t.captionSide&&(r["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(r["data-sticky"]=!0),r}function tp(t,e){const r=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,n=wt((a,i)=>{const o=nt(r,{},a),{classNames:l,className:c,style:u,styles:d,...f}=o,A=JAe();return s.jsx(ut,{component:t,ref:i,...ZAe(A,e),...A.getStyles(t,{className:c,classNames:l,style:u,styles:d,props:o}),...f})});return n.displayName=`@mantine/core/${r}`,n.classes=bw,n}const G4=tp("th",{columnBorder:!0}),QW=tp("td",{columnBorder:!0}),qj=tp("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),zW=tp("thead",{stickyHeader:!0}),VW=tp("tbody"),WW=tp("tfoot"),GW=tp("caption",{captionSide:!0});function Sk({data:t}){return s.jsxs(s.Fragment,{children:[t.caption&&s.jsx(GW,{children:t.caption}),t.head&&s.jsx(zW,{children:s.jsx(qj,{children:t.head.map((e,r)=>s.jsx(G4,{children:e},r))})}),t.body&&s.jsx(VW,{children:t.body.map((e,r)=>s.jsx(qj,{children:e.map((n,a)=>s.jsx(QW,{children:n},a))},r))}),t.foot&&s.jsx(WW,{children:s.jsx(qj,{children:t.foot.map((e,r)=>s.jsx(G4,{children:e},r))})})]})}Sk.displayName="@mantine/core/TableDataRenderer";const eme={type:"scrollarea"},tme=(t,{minWidth:e,maxHeight:r,type:n})=>({scrollContainer:{"--table-min-width":vt(e),"--table-max-height":vt(r),"--table-overflow":n==="native"?"auto":void 0}}),Ek=wt((t,e)=>{const r=nt("TableScrollContainer",eme,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,children:u,minWidth:d,maxHeight:f,type:A,scrollAreaProps:h,...m}=r,p=Wt({name:"TableScrollContainer",classes:bw,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:tme,rootSelector:"scrollContainer"});return s.jsx(ut,{component:A==="scrollarea"?Zm:"div",...A==="scrollarea"?f?{offsetScrollbars:"xy",...h}:{offsetScrollbars:"x",...h}:{},ref:e,...p("scrollContainer"),...m,children:s.jsx("div",{...p("scrollContainerInner"),children:u})})});Ek.classes=bw;Ek.displayName="@mantine/core/TableScrollContainer";const rme={withRowBorders:!0,verticalSpacing:7},nme=(t,{layout:e,captionSide:r,horizontalSpacing:n,verticalSpacing:a,borderColor:i,stripedColor:o,highlightOnHoverColor:l,striped:c,highlightOnHover:u,stickyHeaderOffset:d,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":r,"--table-horizontal-spacing":$s(n),"--table-vertical-spacing":$s(a),"--table-border-color":i?Is(i,t):void 0,"--table-striped-color":c&&o?Is(o,t):void 0,"--table-highlight-on-hover-color":u&&l?Is(l,t):void 0,"--table-sticky-header-offset":f?vt(d):void 0}}),Ye=wt((t,e)=>{const r=nt("Table",rme,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,horizontalSpacing:u,verticalSpacing:d,captionSide:f,stripedColor:A,highlightOnHoverColor:h,striped:m,highlightOnHover:p,withColumnBorders:g,withRowBorders:x,withTableBorder:v,borderColor:b,layout:C,variant:j,data:w,children:N,stickyHeader:E,stickyHeaderOffset:_,mod:k,tabularNums:D,...S}=r,F=Wt({name:"Table",props:r,className:a,style:i,classes:bw,classNames:n,styles:o,unstyled:l,rootSelector:"table",vars:c,varsResolver:nme});return s.jsx(XAe,{value:{getStyles:F,stickyHeader:E,striped:m===!0?"odd":m||void 0,highlightOnHover:p,withColumnBorders:g,withRowBorders:x,captionSide:f||"bottom"},children:s.jsx(ut,{component:"table",variant:j,ref:e,mod:[{"data-with-table-border":v,"data-tabular-nums":D},k],...F("table"),...S,children:N||!!w&&s.jsx(Sk,{data:w})})})});Ye.classes=bw;Ye.displayName="@mantine/core/Table";Ye.Td=QW;Ye.Th=G4;Ye.Tr=qj;Ye.Thead=zW;Ye.Tbody=VW;Ye.Tfoot=WW;Ye.Caption=GW;Ye.ScrollContainer=Ek;Ye.DataRenderer=Sk;const[sme,Bk]=so("Tabs component was not found in the tree");var yw={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const ame={},Tk=wt((t,e)=>{const r=nt("TabsList",ame,t),{children:n,className:a,grow:i,justify:o,classNames:l,styles:c,style:u,mod:d,...f}=r,A=Bk();return s.jsx(ut,{...f,...A.getStyles("list",{className:a,style:u,classNames:l,styles:c,props:r,variant:A.variant}),ref:e,role:"tablist",variant:A.variant,mod:[{grow:i,orientation:A.orientation,placement:A.orientation==="vertical"&&A.placement,inverted:A.inverted},d],"aria-orientation":A.orientation,__vars:{"--tabs-justify":o},children:n})});Tk.classes=yw;Tk.displayName="@mantine/core/TabsList";const ime={},Dk=wt((t,e)=>{const r=nt("TabsPanel",ime,t),{children:n,className:a,value:i,classNames:o,styles:l,style:c,mod:u,keepMounted:d,...f}=r,A=Bk(),h=A.value===i,m=A.keepMounted||d||h?n:null;return s.jsx(ut,{...f,...A.getStyles("panel",{className:a,classNames:o,styles:l,style:[c,h?void 0:{display:"none"}],props:r}),ref:e,mod:[{orientation:A.orientation},u],role:"tabpanel",id:A.getPanelId(i),"aria-labelledby":A.getTabId(i),children:m})});Dk.classes=yw;Dk.displayName="@mantine/core/TabsPanel";const ome={},Ik=wt((t,e)=>{const r=nt("TabsTab",ome,t),{className:n,children:a,rightSection:i,leftSection:o,value:l,onClick:c,onKeyDown:u,disabled:d,color:f,style:A,classNames:h,styles:m,vars:p,mod:g,tabIndex:x,...v}=r,b=Qs(),{dir:C}=Jm(),j=Bk(),w=l===j.value,N=_=>{j.onChange(j.allowTabDeactivation&&l===j.value?null:l),c==null||c(_)},E={classNames:h,styles:m,props:r};return s.jsxs(yi,{...v,...j.getStyles("tab",{className:n,style:A,variant:j.variant,...E}),disabled:d,unstyled:j.unstyled,variant:j.variant,mod:[{active:w,disabled:d,orientation:j.orientation,inverted:j.inverted,placement:j.orientation==="vertical"&&j.placement},g],ref:e,role:"tab",id:j.getTabId(l),"aria-selected":w,tabIndex:x!==void 0?x:w||j.value===null?0:-1,"aria-controls":j.getPanelId(l),onClick:N,__vars:{"--tabs-color":f?Is(f,b):void 0},onKeyDown:wz({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:j.activateTabWithKeyboard,loop:j.loop,orientation:j.orientation||"horizontal",dir:C,onKeyDown:u}),children:[o&&s.jsx("span",{...j.getStyles("tabSection",E),"data-position":"left",children:o}),a&&s.jsx("span",{...j.getStyles("tabLabel",E),children:a}),i&&s.jsx("span",{...j.getStyles("tabSection",E),"data-position":"right",children:i})]})});Ik.classes=yw;Ik.displayName="@mantine/core/TabsTab";const FM="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",lme={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},cme=(t,{radius:e,color:r,autoContrast:n})=>({root:{"--tabs-radius":es(e),"--tabs-color":Is(r,t),"--tabs-text-color":fw(n,t)?Xm({color:r,theme:t,autoContrast:n}):void 0}}),qn=wt((t,e)=>{const r=nt("Tabs",lme,t),{defaultValue:n,value:a,onChange:i,orientation:o,children:l,loop:c,id:u,activateTabWithKeyboard:d,allowTabDeactivation:f,variant:A,color:h,radius:m,inverted:p,placement:g,keepMounted:x,classNames:v,styles:b,unstyled:C,className:j,style:w,vars:N,autoContrast:E,mod:_,...k}=r,D=Ll(u),[S,F]=qa({value:a,defaultValue:n,finalValue:null,onChange:i}),M=Wt({name:"Tabs",props:r,classes:yw,className:j,style:w,classNames:v,styles:b,unstyled:C,vars:N,varsResolver:cme});return s.jsx(sme,{value:{placement:g,value:S,orientation:o,id:D,loop:c,activateTabWithKeyboard:d,getTabId:kR(`${D}-tab`,FM),getPanelId:kR(`${D}-panel`,FM),onChange:F,allowTabDeactivation:f,variant:A,color:h,radius:m,inverted:p,keepMounted:x,unstyled:C,getStyles:M},children:s.jsx(ut,{ref:e,id:D,variant:A,mod:[{orientation:o,inverted:o==="horizontal"&&p,placement:o==="vertical"&&g},_],...M("root"),...k,children:l})})});qn.classes=yw;qn.displayName="@mantine/core/Tabs";qn.Tab=Ik;qn.Panel=Dk;qn.List=Tk;const ume={},dn=wt((t,e)=>{const r=nt("TextInput",ume,t);return s.jsx(eo,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});dn.classes=eo.classes;dn.displayName="@mantine/core/TextInput";var qW={root:"m_7341320d"};const dme={},fme=(t,{size:e,radius:r,variant:n,gradient:a,color:i,autoContrast:o})=>{const l=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:a,variant:n||"filled",autoContrast:o});return{root:{"--ti-size":vr(e,"ti-size"),"--ti-radius":r===void 0?void 0:es(r),"--ti-bg":i||n?l.background:void 0,"--ti-color":i||n?l.color:void 0,"--ti-bd":i||n?l.border:void 0}}},_2=wt((t,e)=>{const r=nt("ThemeIcon",dme,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,autoContrast:u,...d}=r,f=Wt({name:"ThemeIcon",classes:qW,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:fme});return s.jsx(ut,{ref:e,...f("root"),...d})});_2.classes=qW;_2.displayName="@mantine/core/ThemeIcon";const hme=["h1","h2","h3","h4","h5","h6"],Ame=["xs","sm","md","lg","xl"];function mme(t,e){const r=e!==void 0?e:`h${t}`;return hme.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:Ame.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:vt(r),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var KW={root:"m_8a5d1357"};const pme={order:1},gme=(t,{order:e,size:r,lineClamp:n,textWrap:a})=>{const i=mme(e,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":a}}},Kr=wt((t,e)=>{const r=nt("Title",pme,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,order:c,vars:u,size:d,variant:f,lineClamp:A,textWrap:h,mod:m,...p}=r,g=Wt({name:"Title",props:r,classes:KW,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:u,varsResolver:gme});return[1,2,3,4,5,6].includes(c)?s.jsx(ut,{...g("root"),component:`h${c}`,variant:f,ref:e,mod:[{order:c,"data-line-clamp":typeof A=="number"},m],size:d,...p}):null});Kr.classes=KW;Kr.displayName="@mantine/core/Title";function xme(t){let e=t,r=!1;const n=new Set;return{getState(){return e},updateState(a){e=typeof a=="function"?a(e):a},setState(a){this.updateState(a),n.forEach(i=>i(e))},initialize(a){r||(e=a,r=!0)},subscribe(a){return n.add(a),()=>n.delete(a)}}}function vme(t){return y.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function bme(t,e,r){const n=[],a=[],i={};for(const o of t){const l=o.position||e;i[l]=i[l]||0,i[l]+=1,i[l]<=r?a.push(o):n.push(o)}return{notifications:a,queue:n}}const yme=()=>xme({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),rp=yme(),wme=(t=rp)=>vme(t);function xx(t,e){const r=t.getState(),n=e([...r.notifications,...r.queue]),a=bme(n,r.defaultPosition,r.limit);t.setState({notifications:a.notifications,queue:a.queue,limit:r.limit,defaultPosition:r.defaultPosition})}function jme(t,e=rp){const r=t.id||w2();return xx(e,n=>t.id&&n.some(a=>a.id===t.id)?n:[...n,{...t,id:r}]),r}function YW(t,e=rp){return xx(e,r=>r.filter(n=>{var a;return n.id===t?((a=n.onClose)==null||a.call(n,n),!1):!0})),t}function Cme(t,e=rp){return xx(e,r=>r.map(n=>n.id===t.id?{...n,...t}:n)),t.id}function Nme(t=rp){xx(t,()=>[])}function Sme(t=rp){xx(t,e=>e.slice(0,t.getState().limit))}const Vt={show:jme,hide:YW,update:Cme,clean:Nme,cleanQueue:Sme,updateState:xx};function q4(t,e){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},q4(t,e)}function XW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,q4(t,e)}const RM={disabled:!1},P2=le.createContext(null);var Eme=function(e){return e.scrollTop},ib="unmounted",kA="exited",OA="entering",_g="entered",K4="exiting",af=function(t){XW(e,t);function e(n,a){var i;i=t.call(this,n,a)||this;var o=a,l=o&&!o.isMounting?n.enter:n.appear,c;return i.appearStatus=null,n.in?l?(c=kA,i.appearStatus=OA):c=_g:n.unmountOnExit||n.mountOnEnter?c=ib:c=kA,i.state={status:c},i.nextCallback=null,i}e.getDerivedStateFromProps=function(a,i){var o=a.in;return o&&i.status===ib?{status:kA}:null};var r=e.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var i=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==OA&&o!==_g&&(i=OA):(o===OA||o===_g)&&(i=K4)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,i,o,l;return i=o=l=a,a!=null&&typeof a!="number"&&(i=a.exit,o=a.enter,l=a.appear!==void 0?a.appear:o),{exit:i,enter:o,appear:l}},r.updateStatus=function(a,i){if(a===void 0&&(a=!1),i!==null)if(this.cancelNextCallback(),i===OA){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Fg.findDOMNode(this);o&&Eme(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kA&&this.setState({status:ib})},r.performEnter=function(a){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:a,c=this.props.nodeRef?[l]:[Fg.findDOMNode(this),l],u=c[0],d=c[1],f=this.getTimeouts(),A=l?f.appear:f.enter;if(!a&&!o||RM.disabled){this.safeSetState({status:_g},function(){i.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:OA},function(){i.props.onEntering(u,d),i.onTransitionEnd(A,function(){i.safeSetState({status:_g},function(){i.props.onEntered(u,d)})})})},r.performExit=function(){var a=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Fg.findDOMNode(this);if(!i||RM.disabled){this.safeSetState({status:kA},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:K4},function(){a.props.onExiting(l),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:kA},function(){a.props.onExited(l)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,i){i=this.setNextCallback(i),this.setState(a,i)},r.setNextCallback=function(a){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,a(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},r.onTransitionEnd=function(a,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Fg.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===ib)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=ak(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return le.createElement(P2.Provider,{value:null},typeof o=="function"?o(a,l):le.cloneElement(le.Children.only(o),l))},e}(le.Component);af.contextType=P2;af.propTypes={};function vg(){}af.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vg,onEntering:vg,onEntered:vg,onExit:vg,onExiting:vg,onExited:vg};af.UNMOUNTED=ib;af.EXITED=kA;af.ENTERING=OA;af.ENTERED=_g;af.EXITING=K4;function Bme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _k(t,e){var r=function(i){return e&&y.isValidElement(i)?e(i):i},n=Object.create(null);return t&&y.Children.map(t,function(a){return a}).forEach(function(a){n[a.key]=r(a)}),n}function Tme(t,e){t=t||{},e=e||{};function r(d){return d in e?e[d]:t[d]}var n=Object.create(null),a=[];for(var i in t)i in e?a.length&&(n[i]=a,a=[]):a.push(i);var o,l={};for(var c in e){if(n[c])for(o=0;o<n[c].length;o++){var u=n[c][o];l[n[c][o]]=r(u)}l[c]=r(c)}for(o=0;o<a.length;o++)l[a[o]]=r(a[o]);return l}function JA(t,e,r){return r[e]!=null?r[e]:t.props[e]}function Dme(t,e){return _k(t.children,function(r){return y.cloneElement(r,{onExited:e.bind(null,r),in:!0,appear:JA(r,"appear",t),enter:JA(r,"enter",t),exit:JA(r,"exit",t)})})}function Ime(t,e,r){var n=_k(t.children),a=Tme(e,n);return Object.keys(a).forEach(function(i){var o=a[i];if(y.isValidElement(o)){var l=i in e,c=i in n,u=e[i],d=y.isValidElement(u)&&!u.props.in;c&&(!l||d)?a[i]=y.cloneElement(o,{onExited:r.bind(null,o),in:!0,exit:JA(o,"exit",t),enter:JA(o,"enter",t)}):!c&&l&&!d?a[i]=y.cloneElement(o,{in:!1}):c&&l&&y.isValidElement(u)&&(a[i]=y.cloneElement(o,{onExited:r.bind(null,o),in:u.props.in,exit:JA(o,"exit",t),enter:JA(o,"enter",t)}))}}),a}var _me=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Pme={component:"div",childFactory:function(e){return e}},eh=function(t){XW(e,t);function e(n,a){var i;i=t.call(this,n,a)||this;var o=i.handleExited.bind(Bme(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var r=e.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(a,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?Dme(a,l):Ime(a,o,l),firstRender:!1}},r.handleExited=function(a,i){var o=_k(this.props.children);a.key in o||(a.props.onExited&&a.props.onExited(i),this.mounted&&this.setState(function(l){var c=T2({},l.children);return delete c[a.key],{children:c}}))},r.render=function(){var a=this.props,i=a.component,o=a.childFactory,l=ak(a,["component","childFactory"]),c=this.state.contextValue,u=_me(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?le.createElement(P2.Provider,{value:c},u):le.createElement(P2.Provider,{value:c},le.createElement(i,l,u))},e}(le.Component);eh.propTypes={};eh.defaultProps=Pme;const JW=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function kme(t,e){return t.reduce((r,n)=>(r[n.position||e].push(n),r),JW.reduce((r,n)=>(r[n]=[],r),{}))}const MM={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Ome={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Fme({state:t,maxHeight:e,position:r,transitionDuration:n}){const[a,i]=r.split("-"),o=i==="center"?`${a}-center`:i,l={opacity:0,maxHeight:e,transform:MM[o],transitionDuration:`${n}ms, ${n}ms, ${n}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},c={opacity:1,transform:Ome[o]},u={opacity:0,maxHeight:0,transform:MM[o]};return{...l,...{entering:c,entered:c,exiting:u,exited:u}[t]}}function Rme(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const ZW=y.forwardRef(({data:t,onHide:e,autoClose:r,...n},a)=>{const{autoClose:i,message:o,...l}=t,c=Rme(r,t.autoClose),u=y.useRef(-1),d=()=>window.clearTimeout(u.current),f=()=>{e(t.id),d()},A=()=>{typeof c=="number"&&(u.current=window.setTimeout(f,c))};return y.useEffect(()=>{var h;(h=t.onOpen)==null||h.call(t,t)},[]),y.useEffect(()=>(A(),d),[c]),s.jsx(Ak,{...n,...l,onClose:f,ref:a,onMouseEnter:d,onMouseLeave:A,children:o})});ZW.displayName="@mantine/notifications/NotificationContainer";var eG={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Mme=af,Lme={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Ec("overlay"),store:rp,withinPortal:!0},Ume=(t,{zIndex:e,containerWidth:r})=>({root:{"--notifications-z-index":e==null?void 0:e.toString(),"--notifications-container-width":vt(r)}}),of=wt((t,e)=>{const r=nt("Notifications",Lme,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,position:u,autoClose:d,transitionDuration:f,containerWidth:A,notificationMaxHeight:h,limit:m,zIndex:p,store:g,portalProps:x,withinPortal:v,...b}=r,C=Qs(),j=wme(g),w=Jie(),N=oP(),E=y.useRef({}),_=y.useRef(0),D=(C.respectReducedMotion?N:!1)?1:f,S=Wt({name:"Notifications",classes:eG,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Ume});y.useEffect(()=>{g==null||g.updateState(R=>({...R,limit:m||5,defaultPosition:u}))},[m,u]),Ou(()=>{j.notifications.length>_.current&&setTimeout(()=>w(),0),_.current=j.notifications.length},[j.notifications]);const F=kme(j.notifications,u),M=JW.reduce((R,U)=>(R[U]=F[U].map(({style:z,...Q})=>s.jsx(Mme,{timeout:D,onEnter:()=>E.current[Q.id].offsetHeight,nodeRef:{current:E.current[Q.id]},children:H=>s.jsx(ZW,{ref:q=>{E.current[Q.id]=q},data:Q,onHide:q=>YW(q,g),autoClose:d,...S("notification",{style:{...Fme({state:H,position:U,transitionDuration:D,maxHeight:h}),...z}})})},Q.id)),R),{});return s.jsxs(ep,{withinPortal:v,...x,children:[s.jsx(ut,{...S("root"),"data-position":"top-center",ref:e,...b,children:s.jsx(eh,{children:M["top-center"]})}),s.jsx(ut,{...S("root"),"data-position":"top-left",...b,children:s.jsx(eh,{children:M["top-left"]})}),s.jsx(ut,{...S("root",{className:b2.classNames.fullWidth}),"data-position":"top-right",...b,children:s.jsx(eh,{children:M["top-right"]})}),s.jsx(ut,{...S("root",{className:b2.classNames.fullWidth}),"data-position":"bottom-right",...b,children:s.jsx(eh,{children:M["bottom-right"]})}),s.jsx(ut,{...S("root"),"data-position":"bottom-left",...b,children:s.jsx(eh,{children:M["bottom-left"]})}),s.jsx(ut,{...S("root"),"data-position":"bottom-center",...b,children:s.jsx(eh,{children:M["bottom-center"]})})]})});of.classes=eG;of.displayName="@mantine/notifications/Notifications";of.show=Vt.show;of.hide=Vt.hide;of.update=Vt.update;of.clean=Vt.clean;of.cleanQueue=Vt.cleanQueue;of.updateState=Vt.updateState;const tG=y.createContext(),Pk=()=>{const t=y.useContext(tG);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},$me=({children:t})=>{const[e,r]=y.useState(!1),[n,a]=y.useState("blue"),[i,o]=y.useState(!1),[l,c]=y.useState(!0);y.useEffect(()=>{const C=localStorage.getItem("theme"),j=localStorage.getItem("primaryColor")||"blue",w=localStorage.getItem("compactMode")==="true",N=localStorage.getItem("animations")!=="false",E=window.matchMedia("(prefers-color-scheme: dark)").matches,_=C==="dark"||!C&&E;r(_),a(j),o(w),c(N),u(_),d(j),f(w),A(N)},[]),y.useEffect(()=>{const C=window.matchMedia("(prefers-color-scheme: dark)"),j=w=>{localStorage.getItem("theme")||(r(w.matches),u(w.matches))};return C.addEventListener("change",j),()=>C.removeEventListener("change",j)},[]);const u=C=>{document.documentElement.classList.toggle("dark",C),C?document.documentElement.style.colorScheme="dark":document.documentElement.style.colorScheme="light"},d=C=>{document.documentElement.setAttribute("data-primary-color",C)},f=C=>{document.documentElement.classList.toggle("compact",C)},A=C=>{document.documentElement.classList.toggle("no-animations",!C)},b={isDark:e,primaryColor:n,compactMode:i,animations:l,toggleTheme:()=>{const C=!e;r(C),localStorage.setItem("theme",C?"dark":"light"),u(C)},setTheme:C=>{const j=C==="dark";r(j),localStorage.setItem("theme",C),u(j)},changePrimaryColor:C=>{a(C),localStorage.setItem("primaryColor",C),d(C)},toggleCompactMode:()=>{const C=!i;o(C),localStorage.setItem("compactMode",C.toString()),f(C)},toggleAnimations:()=>{const C=!l;c(C),localStorage.setItem("animations",C.toString()),A(C)},resetToDefaults:()=>{r(!1),a("blue"),o(!1),c(!0),localStorage.removeItem("theme"),localStorage.removeItem("primaryColor"),localStorage.removeItem("compactMode"),localStorage.removeItem("animations"),u(!1),d("blue"),f(!1),A(!0)},theme:e?"dark":"light"};return s.jsx(tG.Provider,{value:b,children:t})},rG=y.createContext(),nG=()=>{const t=y.useContext(rG);if(!t)throw new Error("useUsers doit être utilisé dans un UsersProvider");return t},Hme=({children:t})=>{const[e,r]=y.useState(0),[n,a]=y.useState(null),i=y.useCallback((c="update",u=null)=>{console.log("🔄 Déclenchement refresh utilisateurs:",c,u),r(d=>d+1),a({action:c,userData:u,timestamp:Date.now()})},[]),o=y.useCallback(()=>e,[e]),l={triggerRefresh:i,useRefreshTrigger:o,lastUpdate:n,refreshTrigger:e};return s.jsx(rG.Provider,{value:l,children:t})};var Qme=t=>{switch(t){case"success":return Wme;case"info":return qme;case"warning":return Gme;case"error":return Kme;default:return null}},zme=Array(12).fill(0),Vme=({visible:t,className:e})=>le.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},le.createElement("div",{className:"sonner-spinner"},zme.map((r,n)=>le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Wme=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Gme=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),qme=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Kme=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yme=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Xme=()=>{let[t,e]=le.useState(document.hidden);return le.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Y4=1,Jme=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...a}=e,i=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:Y4++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let a=e instanceof Promise?e:e(),i=n!==void 0,o,l=a.then(async u=>{if(o=["resolve",u],le.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(epe(u)&&!u.ok){i=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,f=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:f})}else if(r.success!==void 0){i=!1;let d=typeof r.success=="function"?await r.success(u):r.success,f=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:f})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;let d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:f})}}).finally(()=>{var u;i&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||Y4++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},vo=new Jme,Zme=(t,e)=>{let r=(e==null?void 0:e.id)||Y4++;return vo.addToast({title:t,...e,id:r}),r},epe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",tpe=Zme,rpe=()=>vo.toasts,npe=()=>vo.getActiveToasts(),ve=Object.assign(tpe,{success:vo.success,info:vo.info,warning:vo.warning,error:vo.error,custom:vo.custom,message:vo.message,promise:vo.promise,dismiss:vo.dismiss,loading:vo.loading},{getHistory:rpe,getToasts:npe});function spe(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}spe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function z1(t){return t.label!==void 0}var ape=3,ipe="32px",ope="16px",LM=4e3,lpe=356,cpe=14,upe=20,dpe=200;function sc(...t){return t.filter(Boolean).join(" ")}function fpe(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var hpe=t=>{var e,r,n,a,i,o,l,c,u,d,f;let{invert:A,toast:h,unstyled:m,interacting:p,setHeights:g,visibleToasts:x,heights:v,index:b,toasts:C,expanded:j,removeToast:w,defaultRichColors:N,closeButton:E,style:_,cancelButtonStyle:k,actionButtonStyle:D,className:S="",descriptionClassName:F="",duration:M,position:R,gap:U,loadingIcon:z,expandByDefault:Q,classNames:H,icons:q,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:$}=t,[K,se]=le.useState(null),[Z,ie]=le.useState(null),[ee,ue]=le.useState(!1),[ae,re]=le.useState(!1),[fe,G]=le.useState(!1),[oe,Se]=le.useState(!1),[ge,te]=le.useState(!1),[ye,we]=le.useState(0),[be,Te]=le.useState(0),Oe=le.useRef(h.duration||M||LM),Me=le.useRef(null),Ve=le.useRef(null),Pe=b===0,ze=b+1<=x,ht=h.type,gt=h.dismissible!==!1,Ct=h.className||"",xt=h.descriptionClassName||"",Ie=le.useMemo(()=>v.findIndex(dt=>dt.toastId===h.id)||0,[v,h.id]),De=le.useMemo(()=>{var dt;return(dt=h.closeButton)!=null?dt:E},[h.closeButton,E]),Je=le.useMemo(()=>h.duration||M||LM,[h.duration,M]),Ke=le.useRef(0),St=le.useRef(0),it=le.useRef(0),Pt=le.useRef(null),[dr,ar]=R.split("-"),gn=le.useMemo(()=>v.reduce((dt,Ot,Dt)=>Dt>=Ie?dt:dt+Ot.height,0),[v,Ie]),ir=Xme(),nn=h.invert||A,Mt=ht==="loading";St.current=le.useMemo(()=>Ie*U+gn,[Ie,gn]),le.useEffect(()=>{Oe.current=Je},[Je]),le.useEffect(()=>{ue(!0)},[]),le.useEffect(()=>{let dt=Ve.current;if(dt){let Ot=dt.getBoundingClientRect().height;return Te(Ot),g(Dt=>[{toastId:h.id,height:Ot,position:h.position},...Dt]),()=>g(Dt=>Dt.filter(Zt=>Zt.toastId!==h.id))}},[g,h.id]),le.useLayoutEffect(()=>{if(!ee)return;let dt=Ve.current,Ot=dt.style.height;dt.style.height="auto";let Dt=dt.getBoundingClientRect().height;dt.style.height=Ot,Te(Dt),g(Zt=>Zt.find(Pr=>Pr.toastId===h.id)?Zt.map(Pr=>Pr.toastId===h.id?{...Pr,height:Dt}:Pr):[{toastId:h.id,height:Dt,position:h.position},...Zt])},[ee,h.title,h.description,g,h.id]);let At=le.useCallback(()=>{re(!0),we(St.current),g(dt=>dt.filter(Ot=>Ot.toastId!==h.id)),setTimeout(()=>{w(h)},dpe)},[h,w,g,St]);le.useEffect(()=>{if(h.promise&&ht==="loading"||h.duration===1/0||h.type==="loading")return;let dt;return j||p||$&&ir?(()=>{if(it.current<Ke.current){let Ot=new Date().getTime()-Ke.current;Oe.current=Oe.current-Ot}it.current=new Date().getTime()})():Oe.current!==1/0&&(Ke.current=new Date().getTime(),dt=setTimeout(()=>{var Ot;(Ot=h.onAutoClose)==null||Ot.call(h,h),At()},Oe.current)),()=>clearTimeout(dt)},[j,p,h,ht,$,ir,At]),le.useEffect(()=>{h.delete&&At()},[At,h.delete]);function yt(){var dt,Ot,Dt;return q!=null&&q.loading?le.createElement("div",{className:sc(H==null?void 0:H.loader,(dt=h==null?void 0:h.classNames)==null?void 0:dt.loader,"sonner-loader"),"data-visible":ht==="loading"},q.loading):z?le.createElement("div",{className:sc(H==null?void 0:H.loader,(Ot=h==null?void 0:h.classNames)==null?void 0:Ot.loader,"sonner-loader"),"data-visible":ht==="loading"},z):le.createElement(Vme,{className:sc(H==null?void 0:H.loader,(Dt=h==null?void 0:h.classNames)==null?void 0:Dt.loader),visible:ht==="loading"})}return le.createElement("li",{tabIndex:0,ref:Ve,className:sc(S,Ct,H==null?void 0:H.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,H==null?void 0:H.default,H==null?void 0:H[ht],(r=h==null?void 0:h.classNames)==null?void 0:r[ht]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:N,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":ee,"data-promise":!!h.promise,"data-swiped":ge,"data-removed":ae,"data-visible":ze,"data-y-position":dr,"data-x-position":ar,"data-index":b,"data-front":Pe,"data-swiping":fe,"data-dismissible":gt,"data-type":ht,"data-invert":nn,"data-swipe-out":oe,"data-swipe-direction":Z,"data-expanded":!!(j||Q&&ee),style:{"--index":b,"--toasts-before":b,"--z-index":C.length-b,"--offset":`${ae?ye:St.current}px`,"--initial-height":Q?"auto":`${be}px`,..._,...h.style},onDragEnd:()=>{G(!1),se(null),Pt.current=null},onPointerDown:dt=>{Mt||!gt||(Me.current=new Date,we(St.current),dt.target.setPointerCapture(dt.pointerId),dt.target.tagName!=="BUTTON"&&(G(!0),Pt.current={x:dt.clientX,y:dt.clientY}))},onPointerUp:()=>{var dt,Ot,Dt,Zt;if(oe||!gt)return;Pt.current=null;let Pr=Number(((dt=Ve.current)==null?void 0:dt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_t=Number(((Ot=Ve.current)==null?void 0:Ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),cn=new Date().getTime()-((Dt=Me.current)==null?void 0:Dt.getTime()),Rr=K==="x"?Pr:_t,Mr=Math.abs(Rr)/cn;if(Math.abs(Rr)>=upe||Mr>.11){we(St.current),(Zt=h.onDismiss)==null||Zt.call(h,h),ie(K==="x"?Pr>0?"right":"left":_t>0?"down":"up"),At(),Se(!0),te(!1);return}G(!1),se(null)},onPointerMove:dt=>{var Ot,Dt,Zt,Pr;if(!Pt.current||!gt||((Ot=window.getSelection())==null?void 0:Ot.toString().length)>0)return;let _t=dt.clientY-Pt.current.y,cn=dt.clientX-Pt.current.x,Rr=(Dt=t.swipeDirections)!=null?Dt:fpe(R);!K&&(Math.abs(cn)>1||Math.abs(_t)>1)&&se(Math.abs(cn)>Math.abs(_t)?"x":"y");let Mr={x:0,y:0};K==="y"?(Rr.includes("top")||Rr.includes("bottom"))&&(Rr.includes("top")&&_t<0||Rr.includes("bottom")&&_t>0)&&(Mr.y=_t):K==="x"&&(Rr.includes("left")||Rr.includes("right"))&&(Rr.includes("left")&&cn<0||Rr.includes("right")&&cn>0)&&(Mr.x=cn),(Math.abs(Mr.x)>0||Math.abs(Mr.y)>0)&&te(!0),(Zt=Ve.current)==null||Zt.style.setProperty("--swipe-amount-x",`${Mr.x}px`),(Pr=Ve.current)==null||Pr.style.setProperty("--swipe-amount-y",`${Mr.y}px`)}},De&&!h.jsx?le.createElement("button",{"aria-label":X,"data-disabled":Mt,"data-close-button":!0,onClick:Mt||!gt?()=>{}:()=>{var dt;At(),(dt=h.onDismiss)==null||dt.call(h,h)},className:sc(H==null?void 0:H.closeButton,(a=h==null?void 0:h.classNames)==null?void 0:a.closeButton)},(i=q==null?void 0:q.close)!=null?i:Yme):null,h.jsx||y.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:le.createElement(le.Fragment,null,ht||h.icon||h.promise?le.createElement("div",{"data-icon":"",className:sc(H==null?void 0:H.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||yt():null,h.type!=="loading"?h.icon||(q==null?void 0:q[ht])||Qme(ht):null):null,le.createElement("div",{"data-content":"",className:sc(H==null?void 0:H.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},le.createElement("div",{"data-title":"",className:sc(H==null?void 0:H.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?le.createElement("div",{"data-description":"",className:sc(F,xt,H==null?void 0:H.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),y.isValidElement(h.cancel)?h.cancel:h.cancel&&z1(h.cancel)?le.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:dt=>{var Ot,Dt;z1(h.cancel)&&gt&&((Dt=(Ot=h.cancel).onClick)==null||Dt.call(Ot,dt),At())},className:sc(H==null?void 0:H.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,y.isValidElement(h.action)?h.action:h.action&&z1(h.action)?le.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||D,onClick:dt=>{var Ot,Dt;z1(h.action)&&((Dt=(Ot=h.action).onClick)==null||Dt.call(Ot,dt),!dt.defaultPrevented&&At())},className:sc(H==null?void 0:H.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function UM(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Ape(t,e){let r={};return[t,e].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?ope:ipe;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}y.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:A,style:h,visibleToasts:m=ape,toastOptions:p,dir:g=UM(),gap:x=cpe,loadingIcon:v,icons:b,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:j}=t,[w,N]=le.useState([]),E=le.useMemo(()=>Array.from(new Set([n].concat(w.filter($=>$.position).map($=>$.position)))),[w,n]),[_,k]=le.useState([]),[D,S]=le.useState(!1),[F,M]=le.useState(!1),[R,U]=le.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=le.useRef(null),Q=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=le.useRef(null),q=le.useRef(!1),X=le.useCallback($=>{N(K=>{var se;return(se=K.find(Z=>Z.id===$.id))!=null&&se.delete||vo.dismiss($.id),K.filter(({id:Z})=>Z!==$.id)})},[]);return le.useEffect(()=>vo.subscribe($=>{if($.dismiss){N(K=>K.map(se=>se.id===$.id?{...se,delete:!0}:se));return}setTimeout(()=>{Fg.flushSync(()=>{N(K=>{let se=K.findIndex(Z=>Z.id===$.id);return se!==-1?[...K.slice(0,se),{...K[se],...$},...K.slice(se+1)]:[$,...K]})})})}),[]),le.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:K})=>{U(K?"dark":"light")})}catch{$.addListener(({matches:se})=>{try{U(se?"dark":"light")}catch(Z){console.error(Z)}})}},[d]),le.useEffect(()=>{w.length<=1&&S(!1)},[w]),le.useEffect(()=>{let $=K=>{var se,Z;a.every(ie=>K[ie]||K.code===ie)&&(S(!0),(se=z.current)==null||se.focus()),K.code==="Escape"&&(document.activeElement===z.current||(Z=z.current)!=null&&Z.contains(document.activeElement))&&S(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[a]),le.useEffect(()=>{if(z.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,q.current=!1)}},[z.current]),le.createElement("section",{ref:e,"aria-label":`${C} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map(($,K)=>{var se;let[Z,ie]=$.split("-");return w.length?le.createElement("ol",{key:$,dir:g==="auto"?UM():g,tabIndex:-1,ref:z,className:l,"data-sonner-toaster":!0,"data-theme":R,"data-y-position":Z,"data-lifted":D&&w.length>1&&!i,"data-x-position":ie,style:{"--front-toast-height":`${((se=_[0])==null?void 0:se.height)||0}px`,"--width":`${lpe}px`,"--gap":`${x}px`,...h,...Ape(c,u)},onBlur:ee=>{q.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(q.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||q.current||(q.current=!0,H.current=ee.relatedTarget)},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{F||S(!1)},onDragEnd:()=>S(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},w.filter(ee=>!ee.position&&K===0||ee.position===$).map((ee,ue)=>{var ae,re;return le.createElement(hpe,{key:ee.id,icons:b,index:ue,toast:ee,defaultRichColors:f,duration:(ae=p==null?void 0:p.duration)!=null?ae:A,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:m,closeButton:(re=p==null?void 0:p.closeButton)!=null?re:o,interacting:F,position:$,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:X,toasts:w.filter(fe=>fe.position==ee.position),heights:_.filter(fe=>fe.position==ee.position),setHeights:k,expandByDefault:i,gap:x,loadingIcon:v,expanded:D,pauseWhenPageIsHidden:j,swipeDirections:t.swipeDirections})})):null}))});function sG(t,e){return function(){return t.apply(e,arguments)}}const{toString:mpe}=Object.prototype,{getPrototypeOf:kk}=Object,{iterator:pS,toStringTag:aG}=Symbol,gS=(t=>e=>{const r=mpe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Tc=t=>(t=t.toLowerCase(),e=>gS(e)===t),xS=t=>e=>typeof e===t,{isArray:vx}=Array,ny=xS("undefined");function ppe(t){return t!==null&&!ny(t)&&t.constructor!==null&&!ny(t.constructor)&&Bo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const iG=Tc("ArrayBuffer");function gpe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&iG(t.buffer),e}const xpe=xS("string"),Bo=xS("function"),oG=xS("number"),vS=t=>t!==null&&typeof t=="object",vpe=t=>t===!0||t===!1,Kj=t=>{if(gS(t)!=="object")return!1;const e=kk(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(aG in t)&&!(pS in t)},bpe=Tc("Date"),ype=Tc("File"),wpe=Tc("Blob"),jpe=Tc("FileList"),Cpe=t=>vS(t)&&Bo(t.pipe),Npe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Bo(t.append)&&((e=gS(t))==="formdata"||e==="object"&&Bo(t.toString)&&t.toString()==="[object FormData]"))},Spe=Tc("URLSearchParams"),[Epe,Bpe,Tpe,Dpe]=["ReadableStream","Request","Response","Headers"].map(Tc),Ipe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ww(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),vx(t))for(n=0,a=t.length;n<a;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(n=0;n<o;n++)l=i[n],e.call(null,t[l],l,t)}}function lG(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],e===a.toLowerCase())return a;return null}const ZA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cG=t=>!ny(t)&&t!==ZA;function X4(){const{caseless:t}=cG(this)&&this||{},e={},r=(n,a)=>{const i=t&&lG(e,a)||a;Kj(e[i])&&Kj(n)?e[i]=X4(e[i],n):Kj(n)?e[i]=X4({},n):vx(n)?e[i]=n.slice():e[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ww(arguments[n],r);return e}const _pe=(t,e,r,{allOwnKeys:n}={})=>(ww(e,(a,i)=>{r&&Bo(a)?t[i]=sG(a,r):t[i]=a},{allOwnKeys:n}),t),Ppe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kpe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Ope=(t,e,r,n)=>{let a,i,o;const l={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)o=a[i],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=r!==!1&&kk(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Fpe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Rpe=t=>{if(!t)return null;if(vx(t))return t;let e=t.length;if(!oG(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Mpe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kk(Uint8Array)),Lpe=(t,e)=>{const n=(t&&t[pS]).call(t);let a;for(;(a=n.next())&&!a.done;){const i=a.value;e.call(t,i[0],i[1])}},Upe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},$pe=Tc("HTMLFormElement"),Hpe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),$M=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Qpe=Tc("RegExp"),uG=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ww(r,(a,i)=>{let o;(o=e(a,i,t))!==!1&&(n[i]=o||a)}),Object.defineProperties(t,n)},zpe=t=>{uG(t,(e,r)=>{if(Bo(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Bo(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Vpe=(t,e)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return vx(t)?n(t):n(String(t).split(e)),r},Wpe=()=>{},Gpe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function qpe(t){return!!(t&&Bo(t.append)&&t[aG]==="FormData"&&t[pS])}const Kpe=t=>{const e=new Array(10),r=(n,a)=>{if(vS(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[a]=n;const i=vx(n)?[]:{};return ww(n,(o,l)=>{const c=r(o,a+1);!ny(c)&&(i[l]=c)}),e[a]=void 0,i}}return n};return r(t,0)},Ype=Tc("AsyncFunction"),Xpe=t=>t&&(vS(t)||Bo(t))&&Bo(t.then)&&Bo(t.catch),dG=((t,e)=>t?setImmediate:e?((r,n)=>(ZA.addEventListener("message",({source:a,data:i})=>{a===ZA&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ZA.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Bo(ZA.postMessage)),Jpe=typeof queueMicrotask<"u"?queueMicrotask.bind(ZA):typeof process<"u"&&process.nextTick||dG,Zpe=t=>t!=null&&Bo(t[pS]),at={isArray:vx,isArrayBuffer:iG,isBuffer:ppe,isFormData:Npe,isArrayBufferView:gpe,isString:xpe,isNumber:oG,isBoolean:vpe,isObject:vS,isPlainObject:Kj,isReadableStream:Epe,isRequest:Bpe,isResponse:Tpe,isHeaders:Dpe,isUndefined:ny,isDate:bpe,isFile:ype,isBlob:wpe,isRegExp:Qpe,isFunction:Bo,isStream:Cpe,isURLSearchParams:Spe,isTypedArray:Mpe,isFileList:jpe,forEach:ww,merge:X4,extend:_pe,trim:Ipe,stripBOM:Ppe,inherits:kpe,toFlatObject:Ope,kindOf:gS,kindOfTest:Tc,endsWith:Fpe,toArray:Rpe,forEachEntry:Lpe,matchAll:Upe,isHTMLForm:$pe,hasOwnProperty:$M,hasOwnProp:$M,reduceDescriptors:uG,freezeMethods:zpe,toObjectSet:Vpe,toCamelCase:Hpe,noop:Wpe,toFiniteNumber:Gpe,findKey:lG,global:ZA,isContextDefined:cG,isSpecCompliantForm:qpe,toJSONObject:Kpe,isAsyncFn:Ype,isThenable:Xpe,setImmediate:dG,asap:Jpe,isIterable:Zpe};function Dr(t,e,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}at.inherits(Dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:at.toJSONObject(this.config),code:this.code,status:this.status}}});const fG=Dr.prototype,hG={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hG[t]={value:t}});Object.defineProperties(Dr,hG);Object.defineProperty(fG,"isAxiosError",{value:!0});Dr.from=(t,e,r,n,a,i)=>{const o=Object.create(fG);return at.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Dr.call(o,t.message,e,r,n,a),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const ege=null;function J4(t){return at.isPlainObject(t)||at.isArray(t)}function AG(t){return at.endsWith(t,"[]")?t.slice(0,-2):t}function HM(t,e,r){return t?t.concat(e).map(function(a,i){return a=AG(a),!r&&i?"["+a+"]":a}).join(r?".":""):e}function tge(t){return at.isArray(t)&&!t.some(J4)}const rge=at.toFlatObject(at,{},null,function(e){return/^is[A-Z]/.test(e)});function bS(t,e,r){if(!at.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=at.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!at.isUndefined(g[p])});const n=r.metaTokens,a=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&at.isSpecCompliantForm(e);if(!at.isFunction(a))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(at.isDate(m))return m.toISOString();if(!c&&at.isBlob(m))throw new Dr("Blob is not supported. Use a Buffer instead.");return at.isArrayBuffer(m)||at.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,p,g){let x=m;if(m&&!g&&typeof m=="object"){if(at.endsWith(p,"{}"))p=n?p:p.slice(0,-2),m=JSON.stringify(m);else if(at.isArray(m)&&tge(m)||(at.isFileList(m)||at.endsWith(p,"[]"))&&(x=at.toArray(m)))return p=AG(p),x.forEach(function(b,C){!(at.isUndefined(b)||b===null)&&e.append(o===!0?HM([p],C,i):o===null?p:p+"[]",u(b))}),!1}return J4(m)?!0:(e.append(HM(g,p,i),u(m)),!1)}const f=[],A=Object.assign(rge,{defaultVisitor:d,convertValue:u,isVisitable:J4});function h(m,p){if(!at.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(m),at.forEach(m,function(x,v){(!(at.isUndefined(x)||x===null)&&a.call(e,x,at.isString(v)?v.trim():v,p,A))===!0&&h(x,p?p.concat(v):[v])}),f.pop()}}if(!at.isObject(t))throw new TypeError("data must be an object");return h(t),e}function QM(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ok(t,e){this._pairs=[],t&&bS(t,this,e)}const mG=Ok.prototype;mG.append=function(e,r){this._pairs.push([e,r])};mG.toString=function(e){const r=e?function(n){return e.call(this,n,QM)}:QM;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function nge(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pG(t,e,r){if(!e)return t;const n=r&&r.encode||nge;at.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(e,r):i=at.isURLSearchParams(e)?e.toString():new Ok(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class zM{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){at.forEach(this.handlers,function(n){n!==null&&e(n)})}}const gG={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sge=typeof URLSearchParams<"u"?URLSearchParams:Ok,age=typeof FormData<"u"?FormData:null,ige=typeof Blob<"u"?Blob:null,oge={isBrowser:!0,classes:{URLSearchParams:sge,FormData:age,Blob:ige},protocols:["http","https","file","blob","url","data"]},Fk=typeof window<"u"&&typeof document<"u",Z4=typeof navigator=="object"&&navigator||void 0,lge=Fk&&(!Z4||["ReactNative","NativeScript","NS"].indexOf(Z4.product)<0),cge=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uge=Fk&&window.location.href||"http://localhost",dge=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fk,hasStandardBrowserEnv:lge,hasStandardBrowserWebWorkerEnv:cge,navigator:Z4,origin:uge},Symbol.toStringTag,{value:"Module"})),pi={...dge,...oge};function fge(t,e){return bS(t,new pi.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,i){return pi.isNode&&at.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function hge(t){return at.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Age(t){const e={},r=Object.keys(t);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],e[i]=t[i];return e}function xG(t){function e(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&at.isArray(a)?a.length:o,c?(at.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!at.isObject(a[o]))&&(a[o]=[]),e(r,n,a[o],i)&&at.isArray(a[o])&&(a[o]=Age(a[o])),!l)}if(at.isFormData(t)&&at.isFunction(t.entries)){const r={};return at.forEachEntry(t,(n,a)=>{e(hge(n),a,r,0)}),r}return null}function mge(t,e,r){if(at.isString(t))try{return(e||JSON.parse)(t),at.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const jw={transitional:gG,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=at.isObject(e);if(i&&at.isHTMLForm(e)&&(e=new FormData(e)),at.isFormData(e))return a?JSON.stringify(xG(e)):e;if(at.isArrayBuffer(e)||at.isBuffer(e)||at.isStream(e)||at.isFile(e)||at.isBlob(e)||at.isReadableStream(e))return e;if(at.isArrayBufferView(e))return e.buffer;if(at.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fge(e,this.formSerializer).toString();if((l=at.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bS(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),mge(e)):e}],transformResponse:[function(e){const r=this.transitional||jw.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(at.isResponse(e)||at.isReadableStream(e))return e;if(e&&at.isString(e)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Dr.from(l,Dr.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pi.classes.FormData,Blob:pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};at.forEach(["delete","get","head","post","put","patch"],t=>{jw.headers[t]={}});const pge=at.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gge=t=>{const e={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||e[r]&&pge[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},VM=Symbol("internals");function kv(t){return t&&String(t).trim().toLowerCase()}function Yj(t){return t===!1||t==null?t:at.isArray(t)?t.map(Yj):String(t)}function xge(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const vge=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function TB(t,e,r,n,a){if(at.isFunction(n))return n.call(this,e,r);if(a&&(e=r),!!at.isString(e)){if(at.isString(n))return e.indexOf(n)!==-1;if(at.isRegExp(n))return n.test(e)}}function bge(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function yge(t,e){const r=at.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,i,o){return this[n].call(this,e,a,i,o)},configurable:!0})})}let To=class{constructor(e){e&&this.set(e)}set(e,r,n){const a=this;function i(l,c,u){const d=kv(c);if(!d)throw new Error("header name must be a non-empty string");const f=at.findKey(a,d);(!f||a[f]===void 0||u===!0||u===void 0&&a[f]!==!1)&&(a[f||c]=Yj(l))}const o=(l,c)=>at.forEach(l,(u,d)=>i(u,d,c));if(at.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(at.isString(e)&&(e=e.trim())&&!vge(e))o(gge(e),r);else if(at.isObject(e)&&at.isIterable(e)){let l={},c,u;for(const d of e){if(!at.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?at.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=kv(e),e){const n=at.findKey(this,e);if(n){const a=this[n];if(!r)return a;if(r===!0)return xge(a);if(at.isFunction(r))return r.call(this,a,n);if(at.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=kv(e),e){const n=at.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||TB(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let a=!1;function i(o){if(o=kv(o),o){const l=at.findKey(n,o);l&&(!r||TB(n,n[l],l,r))&&(delete n[l],a=!0)}}return at.isArray(e)?e.forEach(i):i(e),a}clear(e){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!e||TB(this,this[i],i,e,!0))&&(delete this[i],a=!0)}return a}normalize(e){const r=this,n={};return at.forEach(this,(a,i)=>{const o=at.findKey(n,i);if(o){r[o]=Yj(a),delete r[i];return}const l=e?bge(i):String(i).trim();l!==i&&delete r[i],r[l]=Yj(a),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return at.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=e&&at.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[VM]=this[VM]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=kv(o);n[l]||(yge(a,o),n[l]=!0)}return at.isArray(e)?e.forEach(i):i(e),this}};To.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);at.reduceDescriptors(To.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});at.freezeMethods(To);function DB(t,e){const r=this||jw,n=e||r,a=To.from(n.headers);let i=n.data;return at.forEach(t,function(l){i=l.call(r,i,a.normalize(),e?e.status:void 0)}),a.normalize(),i}function vG(t){return!!(t&&t.__CANCEL__)}function bx(t,e,r){Dr.call(this,t??"canceled",Dr.ERR_CANCELED,e,r),this.name="CanceledError"}at.inherits(bx,Dr,{__CANCEL__:!0});function bG(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Dr("Request failed with status code "+r.status,[Dr.ERR_BAD_REQUEST,Dr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function wge(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function jge(t,e){t=t||10;const r=new Array(t),n=new Array(t);let a=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=n[i];o||(o=u),r[a]=c,n[a]=u;let f=i,A=0;for(;f!==a;)A+=r[f++],f=f%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),u-o<e)return;const h=d&&u-d;return h?Math.round(A*1e3/h):void 0}}function Cge(t,e){let r=0,n=1e3/e,a,i;const o=(u,d=Date.now())=>{r=d,a=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?o(u,d):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},n-f)))},()=>a&&o(a)]}const k2=(t,e,r=3)=>{let n=0;const a=jge(50,250);return Cge(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,u=a(c),d=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},r)},WM=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},GM=t=>(...e)=>at.asap(()=>t(...e)),Nge=pi.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,pi.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(pi.origin),pi.navigator&&/(msie|trident)/i.test(pi.navigator.userAgent)):()=>!0,Sge=pi.hasStandardBrowserEnv?{write(t,e,r,n,a,i){const o=[t+"="+encodeURIComponent(e)];at.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),at.isString(n)&&o.push("path="+n),at.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ege(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Bge(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yG(t,e,r){let n=!Ege(e);return t&&(n||r==!1)?Bge(t,e):e}const qM=t=>t instanceof To?{...t}:t;function Bm(t,e){e=e||{};const r={};function n(u,d,f,A){return at.isPlainObject(u)&&at.isPlainObject(d)?at.merge.call({caseless:A},u,d):at.isPlainObject(d)?at.merge({},d):at.isArray(d)?d.slice():d}function a(u,d,f,A){if(at.isUndefined(d)){if(!at.isUndefined(u))return n(void 0,u,f,A)}else return n(u,d,f,A)}function i(u,d){if(!at.isUndefined(d))return n(void 0,d)}function o(u,d){if(at.isUndefined(d)){if(!at.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in e)return n(u,d);if(f in t)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>a(qM(u),qM(d),f,!0)};return at.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=c[d]||a,A=f(t[d],e[d],d);at.isUndefined(A)&&f!==l||(r[d]=A)}),r}const wG=t=>{const e=Bm({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=To.from(o),e.url=pG(yG(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(at.isFormData(r)){if(pi.hasStandardBrowserEnv||pi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(pi.hasStandardBrowserEnv&&(n&&at.isFunction(n)&&(n=n(e)),n||n!==!1&&Nge(e.url))){const u=a&&i&&Sge.read(i);u&&o.set(a,u)}return e},Tge=typeof XMLHttpRequest<"u",Dge=Tge&&function(t){return new Promise(function(r,n){const a=wG(t);let i=a.data;const o=To.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,f,A,h,m;function p(){h&&h(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(a.method.toUpperCase(),a.url,!0),g.timeout=a.timeout;function x(){if(!g)return;const b=To.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:t,request:g};bG(function(N){r(N),p()},function(N){n(N),p()},j),g=null}"onloadend"in g?g.onloadend=x:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(x)},g.onabort=function(){g&&(n(new Dr("Request aborted",Dr.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new Dr("Network Error",Dr.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const j=a.transitional||gG;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),n(new Dr(C,j.clarifyTimeoutError?Dr.ETIMEDOUT:Dr.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&at.forEach(o.toJSON(),function(C,j){g.setRequestHeader(j,C)}),at.isUndefined(a.withCredentials)||(g.withCredentials=!!a.withCredentials),l&&l!=="json"&&(g.responseType=a.responseType),u&&([A,m]=k2(u,!0),g.addEventListener("progress",A)),c&&g.upload&&([f,h]=k2(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",h)),(a.cancelToken||a.signal)&&(d=b=>{g&&(n(!b||b.type?new bx(null,t,g):b),g.abort(),g=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const v=wge(a.url);if(v&&pi.protocols.indexOf(v)===-1){n(new Dr("Unsupported protocol "+v+":",Dr.ERR_BAD_REQUEST,t));return}g.send(i||null)})},Ige=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,a;const i=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Dr?d:new bx(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new Dr(`timeout ${e} of ms exceeded`,Dr.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>at.asap(l),c}},_ge=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,a;for(;n<r;)a=n+e,yield t.slice(n,a),n=a},Pge=async function*(t,e){for await(const r of kge(t))yield*_ge(r,e)},kge=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},KM=(t,e,r,n)=>{const a=Pge(t,e);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let A=i+=f;r(A)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},yS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jG=yS&&typeof ReadableStream=="function",Oge=yS&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),CG=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Fge=jG&&CG(()=>{let t=!1;const e=new Request(pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),YM=64*1024,eD=jG&&CG(()=>at.isReadableStream(new Response("").body)),O2={stream:eD&&(t=>t.body)};yS&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!O2[e]&&(O2[e]=at.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Dr(`Response type '${e}' is not supported`,Dr.ERR_NOT_SUPPORT,n)})})})(new Response);const Rge=async t=>{if(t==null)return 0;if(at.isBlob(t))return t.size;if(at.isSpecCompliantForm(t))return(await new Request(pi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(at.isArrayBufferView(t)||at.isArrayBuffer(t))return t.byteLength;if(at.isURLSearchParams(t)&&(t=t+""),at.isString(t))return(await Oge(t)).byteLength},Mge=async(t,e)=>{const r=at.toFiniteNumber(t.getContentLength());return r??Rge(e)},Lge=yS&&(async t=>{let{url:e,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:A}=wG(t);u=u?(u+"").toLowerCase():"text";let h=Ige([a,i&&i.toAbortSignal()],o),m;const p=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(c&&Fge&&r!=="get"&&r!=="head"&&(g=await Mge(d,n))!==0){let j=new Request(e,{method:"POST",body:n,duplex:"half"}),w;if(at.isFormData(n)&&(w=j.headers.get("content-type"))&&d.setContentType(w),j.body){const[N,E]=WM(g,k2(GM(c)));n=KM(j.body,YM,N,E)}}at.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;m=new Request(e,{...A,signal:h,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:x?f:void 0});let v=await fetch(m);const b=eD&&(u==="stream"||u==="response");if(eD&&(l||b&&p)){const j={};["status","statusText","headers"].forEach(_=>{j[_]=v[_]});const w=at.toFiniteNumber(v.headers.get("content-length")),[N,E]=l&&WM(w,k2(GM(l),!0))||[];v=new Response(KM(v.body,YM,N,()=>{E&&E(),p&&p()}),j)}u=u||"text";let C=await O2[at.findKey(O2,u)||"text"](v,t);return!b&&p&&p(),await new Promise((j,w)=>{bG(j,w,{data:C,headers:To.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:m})})}catch(x){throw p&&p(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Dr("Network Error",Dr.ERR_NETWORK,t,m),{cause:x.cause||x}):Dr.from(x,x&&x.code,t,m)}}),tD={http:ege,xhr:Dge,fetch:Lge};at.forEach(tD,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const XM=t=>`- ${t}`,Uge=t=>at.isFunction(t)||t===null||t===!1,NG={getAdapter:t=>{t=at.isArray(t)?t:[t];const{length:e}=t;let r,n;const a={};for(let i=0;i<e;i++){r=t[i];let o;if(n=r,!Uge(r)&&(n=tD[(o=String(r)).toLowerCase()],n===void 0))throw new Dr(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(XM).join(`
`):" "+XM(i[0]):"as no adapter specified";throw new Dr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:tD};function IB(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bx(null,t)}function JM(t){return IB(t),t.headers=To.from(t.headers),t.data=DB.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NG.getAdapter(t.adapter||jw.adapter)(t).then(function(n){return IB(t),n.data=DB.call(t,t.transformResponse,n),n.headers=To.from(n.headers),n},function(n){return vG(n)||(IB(t),n&&n.response&&(n.response.data=DB.call(t,t.transformResponse,n.response),n.response.headers=To.from(n.response.headers))),Promise.reject(n)})}const SG="1.9.0",wS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{wS[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ZM={};wS.transitional=function(e,r,n){function a(i,o){return"[Axios v"+SG+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(e===!1)throw new Dr(a(o," has been removed"+(r?" in "+r:"")),Dr.ERR_DEPRECATED);return r&&!ZM[o]&&(ZM[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,l):!0}};wS.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function $ge(t,e,r){if(typeof t!="object")throw new Dr("options must be an object",Dr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const i=n[a],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Dr("option "+i+" must be "+c,Dr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dr("Unknown option "+i,Dr.ERR_BAD_OPTION)}}const Xj={assertOptions:$ge,validators:wS},Zc=Xj.validators;let dm=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zM,response:new zM}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Bm(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Xj.assertOptions(n,{silentJSONParsing:Zc.transitional(Zc.boolean),forcedJSONParsing:Zc.transitional(Zc.boolean),clarifyTimeoutError:Zc.transitional(Zc.boolean)},!1),a!=null&&(at.isFunction(a)?r.paramsSerializer={serialize:a}:Xj.assertOptions(a,{encode:Zc.function,serialize:Zc.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Xj.assertOptions(r,{baseUrl:Zc.spelling("baseURL"),withXsrfToken:Zc.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&at.merge(i.common,i[r.method]);i&&at.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=To.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let d,f=0,A;if(!c){const m=[JM.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,u),A=m.length,d=Promise.resolve(r);f<A;)d=d.then(m[f++],m[f++]);return d}A=l.length;let h=r;for(f=0;f<A;){const m=l[f++],p=l[f++];try{h=m(h)}catch(g){p.call(this,g);break}}try{d=JM.call(this,h)}catch(m){return Promise.reject(m)}for(f=0,A=u.length;f<A;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=Bm(this.defaults,e);const r=yG(e.baseURL,e.url,e.allowAbsoluteUrls);return pG(r,e.params,e.paramsSerializer)}};at.forEach(["delete","get","head","options"],function(e){dm.prototype[e]=function(r,n){return this.request(Bm(n||{},{method:e,url:r,data:(n||{}).data}))}});at.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,l){return this.request(Bm(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}dm.prototype[e]=r(),dm.prototype[e+"Form"]=r(!0)});let Hge=class EG{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,l){n.reason||(n.reason=new bx(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new EG(function(a){e=a}),cancel:e}}};function Qge(t){return function(r){return t.apply(null,r)}}function zge(t){return at.isObject(t)&&t.isAxiosError===!0}const rD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rD).forEach(([t,e])=>{rD[e]=t});function BG(t){const e=new dm(t),r=sG(dm.prototype.request,e);return at.extend(r,dm.prototype,e,{allOwnKeys:!0}),at.extend(r,e,null,{allOwnKeys:!0}),r.create=function(a){return BG(Bm(t,a))},r}const Yn=BG(jw);Yn.Axios=dm;Yn.CanceledError=bx;Yn.CancelToken=Hge;Yn.isCancel=vG;Yn.VERSION=SG;Yn.toFormData=bS;Yn.AxiosError=Dr;Yn.Cancel=Yn.CanceledError;Yn.all=function(e){return Promise.all(e)};Yn.spread=Qge;Yn.isAxiosError=zge;Yn.mergeConfig=Bm;Yn.AxiosHeaders=To;Yn.formToJSON=t=>xG(at.isHTMLForm(t)?new FormData(t):t);Yn.getAdapter=NG.getAdapter;Yn.HttpStatusCode=rD;Yn.default=Yn;const{Axios:Mut,AxiosError:Lut,CanceledError:Uut,isCancel:$ut,CancelToken:Hut,VERSION:Qut,all:zut,Cancel:Vut,isAxiosError:Wut,spread:Gut,toFormData:qut,AxiosHeaders:Kut,HttpStatusCode:Yut,formToJSON:Xut,getAdapter:Jut,mergeConfig:Zut}=Yn,Vge="https://sauvegarde-mai-gestion-production.up.railway.app/api",Ee=Yn.create({baseURL:Vge,headers:{"Content-Type":"application/json"},timeout:1e4});Ee.interceptors.request.use(t=>{const e=localStorage.getItem("auth_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ee.interceptors.response.use(t=>t,t=>{var e,r,n,a,i,o;return(((e=t.response)==null?void 0:e.status)===401||((r=t.response)==null?void 0:r.status)===403)&&(console.warn("🚫 Erreur d'authentification détectée:",{status:(n=t.response)==null?void 0:n.status,message:(i=(a=t.response)==null?void 0:a.data)==null?void 0:i.message,url:(o=t.config)==null?void 0:o.url}),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.pathname.includes("/auth/")||(console.log("🔄 Redirection vers la page de connexion..."),window.location.href="/auth/login")),Promise.reject(t)});const Ov="auth_token",bg="user_data",cc={register:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/register",t),a=n.accessToken||n.token,i=n.user;if(a&&i)return localStorage.setItem(Ov,a),localStorage.setItem(bg,JSON.stringify(i)),{token:a,user:i};throw new Error("Réponse du serveur invalide: token ou utilisateur manquant")}catch(n){console.error("Erreur lors de l'inscription:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Erreur d'inscription";throw new Error(a)}},login:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/login",t),a=n.accessToken||n.token,i=n.user;if(a&&i)return localStorage.setItem(Ov,a),localStorage.setItem(bg,JSON.stringify(i)),{token:a,user:i};throw new Error("Réponse du serveur invalide: token ou utilisateur manquant")}catch(n){console.error("Erreur lors de la connexion:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Email ou mot de passe incorrect";throw new Error(a)}},logout:()=>{localStorage.removeItem(Ov),localStorage.removeItem(bg)},isAuthenticated:()=>!!localStorage.getItem(Ov),getToken:()=>localStorage.getItem(Ov),getCurrentUser:()=>{const t=localStorage.getItem(bg);return t?JSON.parse(t):null},getProfile:async()=>{var t,e;try{const{data:r}=await Ee.get("/auth/profile");return r&&localStorage.setItem(bg,JSON.stringify(r)),{user:r}}catch(r){console.error("Erreur lors de la récupération du profil:",r);const n=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||r.message||"Erreur lors de la récupération du profil";throw new Error(n)}},updateProfile:async t=>{var e,r;try{const{data:n}=await Ee.put("/auth/profile",t);return n&&(n.user||n)&&localStorage.setItem(bg,JSON.stringify(n.user||n)),{user:n.user||n}}catch(n){console.error("Erreur lors de la mise à jour du profil:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Erreur lors de la mise à jour du profil";throw new Error(a)}},changePassword:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/change-password",t);return n}catch(n){console.error("Erreur lors du changement de mot de passe:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Erreur lors du changement de mot de passe";throw new Error(a)}},forgotPassword:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/forgot-password",{email:t});return n}catch(n){console.error("Erreur lors de la demande de réinitialisation:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Erreur lors de la demande de réinitialisation";throw new Error(a)}},resetPassword:async(t,e)=>{var r,n;try{const{data:a}=await Ee.post(`/auth/reset-password/${t}`,{password:e});return a}catch(a){console.error("Erreur lors de la réinitialisation du mot de passe:",a);const i=((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message||"Erreur lors de la réinitialisation du mot de passe";throw new Error(i)}},verifyEmail:async t=>{var e,r;try{const{data:n}=await Ee.get(`/auth/verify-email/${t}`);return n}catch(n){console.error("Erreur lors de la vérification de l'email:",n);const a=((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||n.message||"Erreur lors de la vérification de l'email";throw new Error(a)}},resendVerificationEmail:async()=>{var t,e;try{const{data:r}=await Ee.post("/auth/resend-verification");return r}catch(r){console.error("Erreur lors du renvoi de l'email de vérification:",r);const n=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||r.message||"Erreur lors du renvoi de l'email de vérification";throw new Error(n)}}};function Wge(t){if(!t||typeof t!="string")return{isValid:!1,reason:"Token manquant ou invalide"};const e=t.split(".");if(e.length!==3)return{isValid:!1,reason:"Structure JWT invalide"};try{const r=JSON.parse(atob(e[1]));if(!r.sub||!r.email||!r.exp)return{isValid:!1,reason:"Payload JWT incomplet"};const n=Math.floor(Date.now()/1e3);return r.exp<n?{isValid:!1,reason:"Token expiré",expired:!0}:{isValid:!0,payload:r,expiresIn:r.exp-n}}catch{return{isValid:!1,reason:"Erreur de décodage JWT"}}}function TG(){const t=localStorage.getItem("auth_token"),e=localStorage.getItem("user_data");if(t){const r=Wge(t);if(!r.isValid)return console.warn("🧹 Token invalide détecté, nettoyage automatique:",r.reason),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),{cleaned:!0,reason:r.reason};r.expiresIn<3600&&console.warn("⚠️ Token expirera bientôt:",{expiresIn:r.expiresIn,expiresAt:new Date(r.payload.exp*1e3).toLocaleString()})}return t&&!e?(console.warn("🧹 Données utilisateur manquantes, nettoyage du token"),localStorage.removeItem("auth_token"),{cleaned:!0,reason:"Données utilisateur incohérentes"}):!t&&e?(console.warn("🧹 Token manquant, nettoyage des données utilisateur"),localStorage.removeItem("user_data"),{cleaned:!0,reason:"Token manquant"}):{cleaned:!1}}function Gge(t=null){const r=()=>{const a=TG();a.cleaned&&t&&t(a.reason)};r();const n=setInterval(r,6e4);return()=>clearInterval(n)}const DG=y.createContext(),Ya=()=>y.useContext(DG),qge=({children:t})=>{const[e,r]=y.useState(null),[n,a]=y.useState(!0),[i,o]=y.useState(!1),l=Fr();y.useEffect(()=>{(async()=>{a(!0);try{const p=TG();if(p.cleaned){console.warn("🧹 Tokens invalides nettoyés:",p.reason),a(!1);return}if(cc.isAuthenticated()){const g=cc.getCurrentUser();if(g)r(g),o(!0);else try{const{user:x}=await cc.getProfile();r(x),o(!0)}catch(x){console.error("Erreur lors de la récupération du profil:",x),d()}}}catch(p){console.error("Erreur d'authentification:",p),d()}finally{a(!1)}})();const m=Gge(p=>{console.warn("🔒 Token invalidé automatiquement:",p),ve.warning("Session expirée",{description:"Veuillez vous reconnecter",duration:3e3}),d()});return()=>m()},[]);const c=async h=>{a(!0);try{const m=await cc.login(h);return r(m.user),o(!0),ve.success("Connexion réussie",{description:`Bienvenue, ${m.user.prenom} ${m.user.nom}`,duration:2e3}),l("/"),m}catch(m){const p=m.message||"Erreur lors de la connexion";throw ve.error("Erreur de connexion",{description:p,duration:4e3}),m}finally{a(!1)}},u=async h=>{a(!0);try{const m=await cc.register(h);return r(m.user),o(!0),ve.success("Inscription réussie",{description:`Bienvenue, ${m.user.prenom} ${m.user.nom}`,duration:2e3}),l("/"),m}catch(m){const p=m.message||"Erreur lors de l'inscription";throw ve.error("Erreur d'inscription",{description:p,duration:4e3}),m}finally{a(!1)}},d=()=>{cc.logout(),r(null),o(!1),window.location.href="/auth/login"},A={user:e,loading:n,isAuthenticated:i,login:c,register:u,logout:d,updateProfile:async h=>{a(!0);try{const m=await cc.updateProfile(h);return r(m.user),ve.success("Profil mis à jour",{description:"Vos informations ont été mises à jour avec succès",duration:2e3}),m}catch(m){const p=m.message||"Erreur lors de la mise à jour du profil";throw ve.error("Erreur",{description:p,duration:4e3}),m}finally{a(!1)}}};return s.jsx(DG.Provider,{value:A,children:t})},Kge=()=>{const t=Fr(),[e,r]=y.useState(!0);return y.useEffect(()=>{const n=setTimeout(()=>{r(!1)},1e3);return()=>clearTimeout(n)},[]),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tableau de bord"}),s.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Générer un rapport"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase",children:"Plannings actifs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:"📅"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase",children:"Collaborateurs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"28"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:"👥"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-yellow-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase",children:"Tâches en cours"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"45"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:"💼"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-purple-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase",children:"Projets terminés"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"94"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:"📈"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-2 bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Tâches récentes"}),s.jsx("button",{onClick:()=>t("/taches"),className:"text-blue-500 hover:text-blue-600 text-sm font-medium",children:"Voir tout"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"En cours"}),s.jsx("span",{className:"font-medium",children:"Mise à jour du site web"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Assigné à Sophie M. • Échéance: 18/05/2025"})]}),s.jsx("button",{className:"text-blue-500 hover:text-blue-600 text-sm",children:"Détails"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Terminé"}),s.jsx("span",{className:"font-medium",children:"Réunion équipe marketing"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Assigné à Marc D. • Échéance: 15/05/2025"})]}),s.jsx("button",{className:"text-blue-500 hover:text-blue-600 text-sm",children:"Détails"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"En attente"}),s.jsx("span",{className:"font-medium",children:"Préparation présentation client"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Assigné à Jean D. • Échéance: 20/05/2025"})]}),s.jsx("button",{className:"text-blue-500 hover:text-blue-600 text-sm",children:"Détails"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Progression des projets"}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"w-32 h-32 mx-auto mb-4 relative",children:[s.jsx("div",{className:"w-full h-full rounded-full bg-gray-200",children:s.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-blue-500 to-purple-600 opacity-75"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-white",children:"12"})})]}),s.jsx("p",{className:"font-medium text-gray-700 mb-4",children:"Projets en cours"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),"En cours"]}),s.jsx("span",{className:"font-semibold",children:"45%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"Terminés"]}),s.jsx("span",{className:"font-semibold",children:"25%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"En attente"]}),s.jsx("span",{className:"font-semibold",children:"30%"})]})]})]})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Accès rapides"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:"📅"}),s.jsx("h3",{className:"font-semibold text-gray-800",children:"Planning"}),s.jsx("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"12 actifs"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gestion du planning des équipes et attribution des tâches"}),s.jsx("button",{onClick:()=>t("/plannings"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg",children:"Accéder"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:"👥"}),s.jsx("h3",{className:"font-semibold text-gray-800",children:"Collaborateurs"}),s.jsx("span",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"28 actifs"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gestion des équipes et des compétences"}),s.jsx("button",{onClick:()=>t("/collaborateurs"),className:"w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg",children:"Accéder"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-3",children:"🏭"}),s.jsx("h3",{className:"font-semibold text-gray-800",children:"Chantiers"}),s.jsx("span",{className:"text-sm bg-teal-100 text-teal-800 px-2 py-1 rounded-full",children:"Finances"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gestion financière des chantiers et suivi des budgets"}),s.jsx("button",{onClick:()=>t("/chantiers"),className:"w-full bg-teal-500 hover:bg-teal-600 text-white py-2 px-4 rounded-lg",children:"Accéder"})]})]})]})]})};function Yge(){return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md mx-auto text-center px-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"text-8xl font-bold text-gray-300 dark:text-gray-700 mb-4",children:"404"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Page non trouvée"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."})]}),s.jsxs(Xi,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[s.jsx(Nae,{className:"w-5 h-5"}),"Retour à l'accueil"]})]})})}/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xge={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(t,e,r,n)=>{const a=y.forwardRef(({color:i="currentColor",size:o=24,stroke:l=2,title:c,className:u,children:d,...f},A)=>y.createElement("svg",{ref:A,...Xge[t],width:o,height:o,className:["tabler-icon",`tabler-icon-${e}`,u].join(" "),strokeWidth:l,stroke:i,...f},[c&&y.createElement("title",{key:"svg-title"},c),...n.map(([h,m])=>y.createElement(h,m)),...Array.isArray(d)?d:[d]]));return a.displayName=`${r}`,a};/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jge=bt("outline","activity-heartbeat","IconActivityHeartbeat",[["path",{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rk=bt("outline","activity","IconActivity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ls=bt("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e6=bt("outline","alert-octagon","IconAlertOctagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wo=bt("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zge=bt("outline","arrow-down","IconArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ci=bt("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e0e=bt("outline","arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mk=bt("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t0e=bt("outline","battery","IconBattery",[["path",{d:"M6 7h11a2 2 0 0 1 2 2v.5a.5 .5 0 0 0 .5 .5a.5 .5 0 0 1 .5 .5v3a.5 .5 0 0 1 -.5 .5a.5 .5 0 0 0 -.5 .5v.5a2 2 0 0 1 -2 2h-11a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fd=bt("outline","bell","IconBell",[["path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b0=bt("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r0e=bt("outline","bug","IconBug",[["path",{d:"M9 9v-1a3 3 0 0 1 6 0v1",key:"svg-0"}],["path",{d:"M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3",key:"svg-1"}],["path",{d:"M3 13l4 0",key:"svg-2"}],["path",{d:"M17 13l4 0",key:"svg-3"}],["path",{d:"M12 20l0 -6",key:"svg-4"}],["path",{d:"M4 19l3.35 -2",key:"svg-5"}],["path",{d:"M20 19l-3.35 -2",key:"svg-6"}],["path",{d:"M4 7l3.75 2.4",key:"svg-7"}],["path",{d:"M20 7l-3.75 2.4",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IG=bt("outline","building-factory","IconBuildingFactory",[["path",{d:"M4 21c1.147 -4.02 1.983 -8.027 2 -12h6c.017 3.973 .853 7.98 2 12",key:"svg-0"}],["path",{d:"M12.5 13h4.5c.025 2.612 .894 5.296 2 8",key:"svg-1"}],["path",{d:"M9 5a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1",key:"svg-2"}],["path",{d:"M3 21l19 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ro=bt("outline","building","IconBuilding",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M9 8l1 0",key:"svg-1"}],["path",{d:"M9 12l1 0",key:"svg-2"}],["path",{d:"M9 16l1 0",key:"svg-3"}],["path",{d:"M14 8l1 0",key:"svg-4"}],["path",{d:"M14 12l1 0",key:"svg-5"}],["path",{d:"M14 16l1 0",key:"svg-6"}],["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yx=bt("outline","calculator","IconCalculator",[["path",{d:"M4 3m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M8 14l0 .01",key:"svg-2"}],["path",{d:"M12 14l0 .01",key:"svg-3"}],["path",{d:"M16 14l0 .01",key:"svg-4"}],["path",{d:"M8 17l0 .01",key:"svg-5"}],["path",{d:"M12 17l0 .01",key:"svg-6"}],["path",{d:"M16 17l0 .01",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n0e=bt("outline","calendar-check","IconCalendarCheck",[["path",{d:"M11.5 21h-5.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var il=bt("outline","calendar-event","IconCalendarEvent",[["path",{d:"M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 3l0 4",key:"svg-1"}],["path",{d:"M8 3l0 4",key:"svg-2"}],["path",{d:"M4 11l16 0",key:"svg-3"}],["path",{d:"M8 15h2v2h-2z",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _B=bt("outline","calendar-stats","IconCalendarStats",[["path",{d:"M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4",key:"svg-0"}],["path",{d:"M18 14v4h4",key:"svg-1"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-2"}],["path",{d:"M15 3v4",key:"svg-3"}],["path",{d:"M7 3v4",key:"svg-4"}],["path",{d:"M3 11h16",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _s=bt("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PB=bt("outline","cash","IconCash",[["path",{d:"M7 15h-3a1 1 0 0 1 -1 -1v-8a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v3",key:"svg-0"}],["path",{d:"M7 9m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M12 14a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s0e=bt("outline","chart-area-line","IconChartAreaLine",[["path",{d:"M4 19l4 -6l4 2l4 -5l4 4l0 5l-16 0",key:"svg-0"}],["path",{d:"M4 12l3 -4l4 2l5 -6l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Do=bt("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _G=bt("outline","chart-line","IconChartLine",[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gr=bt("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PG=bt("outline","checks","IconChecks",[["path",{d:"M7 12l5 5l10 -10",key:"svg-0"}],["path",{d:"M2 12l5 5m5 -5l5 -5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y0=bt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wx=bt("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jx=bt("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nD=bt("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lk=bt("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a0e=bt("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jS=bt("outline","clipboard-list","IconClipboardList",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 12l.01 0",key:"svg-2"}],["path",{d:"M13 12l2 0",key:"svg-3"}],["path",{d:"M9 16l.01 0",key:"svg-4"}],["path",{d:"M13 16l2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kG=bt("outline","clock-hour-4","IconClockHour4",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 12l3 2",key:"svg-1"}],["path",{d:"M12 7v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wn=bt("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V1=bt("outline","coin","IconCoin",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uk=bt("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i0e=bt("outline","currency-dollar","IconCurrencyDollar",[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tm=bt("outline","currency-euro","IconCurrencyEuro",[["path",{d:"M17.2 7a6 7 0 1 0 0 10",key:"svg-0"}],["path",{d:"M13 10h-8m0 4h8",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t6=bt("outline","currency","IconCurrency",[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o0e=bt("outline","dashboard","IconDashboard",[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OG=bt("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kl=bt("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $k=bt("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l0e=bt("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Va=bt("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cx=bt("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c0e=bt("outline","equal","IconEqual",[["path",{d:"M5 10h14",key:"svg-0"}],["path",{d:"M5 14h14",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FG=bt("outline","exclamation-mark","IconExclamationMark",[["path",{d:"M12 19v.01",key:"svg-0"}],["path",{d:"M12 15v-10",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jj=bt("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sD=bt("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ha=bt("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CS=bt("outline","file-analytics","IconFileAnalytics",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17l0 -5",key:"svg-2"}],["path",{d:"M12 17l0 -1",key:"svg-3"}],["path",{d:"M15 17l0 -3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r6=bt("outline","file-excel","IconFileExcel",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2",key:"svg-1"}],["path",{d:"M10 12l4 5",key:"svg-2"}],["path",{d:"M10 17l4 -5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u0e=bt("outline","file-export","IconFileExport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Su=bt("outline","file-invoice","IconFileInvoice",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 7l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M13 17l2 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zi=bt("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RG=bt("outline","file-zip","IconFileZip",[["path",{d:"M6 20.735a2 2 0 0 1 -1 -1.735v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-1",key:"svg-0"}],["path",{d:"M11 17a2 2 0 0 1 2 2v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a2 2 0 0 1 2 -2z",key:"svg-1"}],["path",{d:"M11 5l-1 0",key:"svg-2"}],["path",{d:"M13 7l-1 0",key:"svg-3"}],["path",{d:"M11 9l-1 0",key:"svg-4"}],["path",{d:"M13 11l-1 0",key:"svg-5"}],["path",{d:"M11 13l-1 0",key:"svg-6"}],["path",{d:"M13 15l-1 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nh=bt("outline","file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jc=bt("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zj=bt("outline","folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n6=bt("outline","hammer","IconHammer",[["path",{d:"M11.414 10l-7.383 7.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l7.407 -7.385",key:"svg-0"}],["path",{d:"M18.121 15.293l2.586 -2.586a1 1 0 0 0 0 -1.414l-7.586 -7.586a1 1 0 0 0 -1.414 0l-2.586 2.586a1 1 0 0 0 0 1.414l7.586 7.586a1 1 0 0 0 1.414 0z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d0e=bt("outline","hash","IconHash",[["path",{d:"M5 9l14 0",key:"svg-0"}],["path",{d:"M5 15l14 0",key:"svg-1"}],["path",{d:"M11 4l-4 16",key:"svg-2"}],["path",{d:"M17 4l-4 16",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Io=bt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f0e=bt("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MG=bt("outline","layout-grid","IconLayoutGrid",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LG=bt("outline","list-details","IconListDetails",[["path",{d:"M13 5h8",key:"svg-0"}],["path",{d:"M13 9h5",key:"svg-1"}],["path",{d:"M13 15h8",key:"svg-2"}],["path",{d:"M13 19h5",key:"svg-3"}],["path",{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h0e=bt("outline","list-numbers","IconListNumbers",[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UG=bt("outline","list","IconList",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A0e=bt("outline","loader-2","IconLoader2",[["path",{d:"M12 3a9 9 0 1 0 9 9",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hu=bt("outline","loader","IconLoader",[["path",{d:"M12 6l0 -3",key:"svg-0"}],["path",{d:"M16.25 7.75l2.15 -2.15",key:"svg-1"}],["path",{d:"M18 12l3 0",key:"svg-2"}],["path",{d:"M16.25 16.25l2.15 2.15",key:"svg-3"}],["path",{d:"M12 18l0 3",key:"svg-4"}],["path",{d:"M7.75 16.25l-2.15 2.15",key:"svg-5"}],["path",{d:"M6 12l-3 0",key:"svg-6"}],["path",{d:"M7.75 7.75l-2.15 -2.15",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w0=bt("outline","lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $G=bt("outline","logout","IconLogout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m0e=bt("outline","map-pin-2","IconMapPin2",[["path",{d:"M12 18.5l-3 -1.5l-6 3v-13l6 -3l6 3l6 -3v7",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v5",key:"svg-2"}],["path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z",key:"svg-3"}],["path",{d:"M19 18v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Au=bt("outline","map-pin","IconMapPin",[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p0e=bt("outline","menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F2=bt("outline","minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hk=bt("outline","moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g0e=bt("outline","notes","IconNotes",[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 7l6 0",key:"svg-1"}],["path",{d:"M9 11l6 0",key:"svg-2"}],["path",{d:"M9 15l4 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sl=bt("outline","package","IconPackage",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M16 5.25l-8 4.5",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Po=bt("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NS=bt("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s6=bt("outline","pig-money","IconPigMoney",[["path",{d:"M15 11v.01",key:"svg-0"}],["path",{d:"M5.173 8.378a3 3 0 1 1 4.656 -1.377",key:"svg-1"}],["path",{d:"M16 4v3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342c-.336 .95 -.907 1.8 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3h0z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jn=bt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var x0e=bt("outline","printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mu=bt("outline","receipt","IconReceipt",[["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16l-3 -2l-2 2l-2 -2l-2 2l-2 -2l-3 2m4 -14h6m-6 4h6m-2 4h2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _a=bt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v0e=bt("outline","robot","IconRobot",[["path",{d:"M6 4m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 2v2",key:"svg-1"}],["path",{d:"M9 12v9",key:"svg-2"}],["path",{d:"M15 12v9",key:"svg-3"}],["path",{d:"M5 16l4 -2",key:"svg-4"}],["path",{d:"M15 14l4 2",key:"svg-5"}],["path",{d:"M9 18h6",key:"svg-6"}],["path",{d:"M10 8v.01",key:"svg-7"}],["path",{d:"M14 8v.01",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kB=bt("outline","route","IconRoute",[["path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z",key:"svg-1"}],["path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ol=bt("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kh=bt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b0e=bt("outline","shield","IconShield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nx=bt("outline","shopping-cart","IconShoppingCart",[["path",{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 17h-11v-14h-2",key:"svg-2"}],["path",{d:"M6 5l14 1l-1 7h-13",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y0e=bt("outline","sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w0e=bt("outline","sort-descending","IconSortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j0e=bt("outline","sparkles","IconSparkles",[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qk=bt("outline","sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C0e=bt("outline","tags","IconTags",[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a6=bt("outline","target-arrow","IconTargetArrow",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 7a5 5 0 1 0 5 5",key:"svg-1"}],["path",{d:"M13 3.055a9 9 0 1 0 7.941 7.945",key:"svg-2"}],["path",{d:"M15 6v3h3l3 -3h-3v-3z",key:"svg-3"}],["path",{d:"M15 9l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oh=bt("outline","target","IconTarget",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R2=bt("outline","tool","IconTool",[["path",{d:"M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zn=bt("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dm=bt("outline","trending-down","IconTrendingDown",[["path",{d:"M3 7l6 6l4 -4l8 8",key:"svg-0"}],["path",{d:"M21 10l0 7l-7 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tl=bt("outline","trending-up","IconTrendingUp",[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i6=bt("outline","truck-delivery","IconTruckDelivery",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5",key:"svg-2"}],["path",{d:"M3 9l4 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rd=bt("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N0e=bt("outline","user-circle","IconUserCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S0e=bt("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wa=bt("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ji=bt("outline","users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o6=bt("outline","wand","IconWand",[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E0e=bt("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ls=bt("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const B0e="modulepreload",T0e=function(t,e){return new URL(t,e).href},l6={},Fh=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=T0e(u,n),u in l6)return;l6[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const p=o[m];if(p.href===u&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":B0e,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Sd={async getNotifications(){try{return(await Ee.get("/notifications")).data}catch(t){throw console.error("Erreur lors de la récupération des notifications:",t),t}},async getUnreadCount(){try{return(await Ee.get("/notifications/unread-count")).data}catch(t){throw console.error("Erreur lors de la récupération du nombre de notifications:",t),t}},async markAsRead(t){try{return(await Ee.patch(`/notifications/${t}/read`)).data}catch(e){throw console.error("Erreur lors du marquage de la notification:",e),e}},async getNotificationStats(){try{return(await Ee.get("/notifications/stats")).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},async getNotificationsByType(t){var e,r;try{return(await Ee.get(`/notifications/by-type?type=${t}`)).data}catch(n){throw console.error(`Erreur lors de la récupération des notifications ${t}:`,n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des notifications")}},async getStockFaibleNotifications(){var t,e;try{return(await Ee.get("/notifications/stock-faible")).data}catch(r){throw console.error("Erreur lors de la récupération des notifications de stock:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des notifications de stock")}},async getEcheanceNotifications(){var t,e;try{return(await Ee.get("/notifications/echeances")).data}catch(r){throw console.error("Erreur lors de la récupération des notifications d'échéances:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des notifications d'échéances")}},async getBdcAttenteNotifications(){var t,e;try{return(await Ee.get("/notifications/bdc-attente")).data}catch(r){throw console.error("Erreur lors de la récupération des notifications BDC:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des notifications BDC")}},async getPointageManquantNotifications(){var t,e;try{return(await Ee.get("/notifications/pointages-manquants")).data}catch(r){throw console.error("Erreur lors de la récupération des notifications de pointages:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des notifications de pointages")}},getPriorityColor(t){switch(t){case"urgent":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"blue";default:return"gray"}},getPriorityIcon(t){switch(t){case"urgent":return"IconAlertTriangle";case"high":return"IconExclamationMark";case"medium":return"IconInfoCircle";case"low":return"IconBell";default:return"IconBell"}},getTypeIcon(t){switch(t){case"stock_faible":return"IconPackage";case"echeance_affaire":return"IconCalendarEvent";case"bdc_en_attente":return"IconClipboardList";case"pointage_manquant":return"IconClock";case"info":return"IconInfoCircle";default:return"IconBell"}},getTypeLabel(t){switch(t){case"stock_faible":return"Stock faible";case"echeance_affaire":return"Échéance proche";case"bdc_en_attente":return"BDC en attente";case"pointage_manquant":return"Pointage manquant";case"info":return"Information";default:return"Notification"}},formatTimeAgo(t){const e=new Date,r=new Date(t),n=Math.floor((e-r)/(1e3*60));if(n<1)return"À l'instant";if(n<60)return`Il y a ${n} min`;const a=Math.floor(n/60);if(a<24)return`Il y a ${a}h`;const i=Math.floor(a/24);return i<7?`Il y a ${i}j`:r.toLocaleDateString("fr-FR")}},D0e=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(0),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(null),d=async()=>{i(!0),u(null);try{const[m,p]=await Promise.all([Sd.getNotifications(),Sd.getUnreadCount()]);e(m.slice(0,10)),n(p)}catch(m){console.error("Erreur chargement notifications:",m),u("Erreur de chargement"),e([]),n(0)}finally{i(!1)}};y.useEffect(()=>{d();const m=setInterval(d,6e4);return()=>clearInterval(m)},[]);const f=m=>{switch(m){case"stock_faible":return s.jsx(Sl,{size:16,className:"text-orange-600"});case"echeance_affaire":return s.jsx(il,{size:16,className:"text-blue-600"});case"bdc_en_attente":return s.jsx(jS,{size:16,className:"text-purple-600"});case"pointage_manquant":return s.jsx(wn,{size:16,className:"text-yellow-600"});default:return s.jsx(Io,{size:16,className:"text-gray-600"})}},A=m=>{switch(m){case"urgent":return"border-l-red-500 bg-red-50";case"high":return"border-l-orange-500 bg-orange-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},h=m=>{switch(m){case"urgent":return s.jsx(wo,{size:12,className:"text-red-600"});case"high":return s.jsx(FG,{size:12,className:"text-orange-600"});default:return null}};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:`${r} notification(s)`,children:[s.jsx(Fd,{size:20}),r>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:r>99?"99+":r})]}),o&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:d,disabled:a,className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Actualiser",children:s.jsx(_a,{size:16,className:a?"animate-spin":""})}),s.jsx("button",{onClick:()=>l(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:s.jsx(ls,{size:16})})]})]}),s.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[c&&s.jsxs("div",{className:"p-4 text-center text-red-600 text-sm",children:[c,s.jsx("button",{onClick:d,className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Réessayer"})]}),a&&t.length===0&&s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-gray-300 border-t-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-sm",children:"Chargement..."})]}),!a&&t.length===0&&!c&&s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx(Fd,{size:24,className:"mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"Aucune notification"})]}),t.map(m=>s.jsx("div",{className:`p-3 border-l-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${A(m.priority)}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f(m.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),s.jsxs("div",{className:"flex items-center space-x-1",children:[h(m.priority),s.jsx("span",{className:"text-xs text-gray-500",children:Sd.formatTimeAgo(m.createdAt)})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m.priority==="urgent"?"bg-red-100 text-red-800":m.priority==="high"?"bg-orange-100 text-orange-800":m.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:Sd.getTypeLabel(m.type)})})]})]})},m.id))]}),t.length>0&&s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:s.jsx("button",{onClick:()=>{l(!1)},className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Voir toutes les notifications"})})]}),o&&s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})},oa={isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},isFirefox(){return/Firefox/.test(navigator.userAgent)},isSafari(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)},getAxiosConfig(){const t={withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}};return this.isChrome()?{...t,headers:{...t.headers,"Cache-Control":"no-cache",Pragma:"no-cache"},withCredentials:!0,retry:3,retryDelay:1e3}:this.isFirefox()?{...t,timeout:6e4}:t},setSecureStorage(t,e){try{this.isChrome()&&sessionStorage.setItem(`chrome_${t}`,JSON.stringify(e)),localStorage.setItem(t,JSON.stringify(e))}catch(r){console.warn("Erreur stockage:",r)}},getSecureStorage(t){try{if(this.isChrome()){const r=sessionStorage.getItem(`chrome_${t}`);if(r)return JSON.parse(r)}const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.warn("Erreur lecture stockage:",e),null}},removeSecureStorage(t){try{localStorage.removeItem(t),sessionStorage.removeItem(`chrome_${t}`)}catch(e){console.warn("Erreur suppression stockage:",e)}},setAuthToken(t){this.setSecureStorage("auth_token",t),this.isChrome()&&(document.cookie=`auth_token=${t}; path=/; SameSite=Lax; Secure=${location.protocol==="https:"}`)},getAuthToken(){let t=this.getSecureStorage("auth_token");if(!t&&this.isChrome()){const r=document.cookie.split(";").find(n=>n.trim().startsWith("auth_token="));r&&(t=r.split("=")[1])}return t},removeAuthToken(){this.removeSecureStorage("auth_token"),this.isChrome()&&(document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")},getBrowserInfo(){return{userAgent:navigator.userAgent,vendor:navigator.vendor,isChrome:this.isChrome(),isFirefox:this.isFirefox(),isSafari:this.isSafari(),supportsCredentials:"withCredentials"in new XMLHttpRequest,supportsFetch:typeof fetch<"u",supportsLocalStorage:typeof Storage<"u",cookiesEnabled:navigator.cookieEnabled}},logBrowserCompat(){const t=this.getBrowserInfo();console.log("🌐 Informations navigateur:",t),t.isChrome?console.log("🔧 Configuration Chrome activée"):t.isFirefox&&console.log("🦊 Configuration Firefox activée"),t.cookiesEnabled||console.warn("⚠️ Les cookies sont désactivés")}},I0e=({onClose:t})=>{const[e,r]=y.useState(null),[n,a]=y.useState({status:"pending",message:""});y.useEffect(()=>{const u=oa.getBrowserInfo();r(u),i()},[]);const i=async()=>{try{const u=await fetch("/api/health",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});u.ok?a({status:"success",message:"Connexion API réussie"}):a({status:"error",message:`Erreur API: ${u.status} ${u.statusText}`})}catch(u){a({status:"error",message:`Erreur de connexion: ${u.message}`})}},o=u=>{switch(u){case"success":return s.jsx(jh,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(ez,{className:"w-5 h-5 text-red-500"});case"warning":return s.jsx(wu,{className:"w-5 h-5 text-yellow-500"});default:return s.jsx(Gb,{className:"w-5 h-5 text-blue-500"})}},l=()=>e?[{name:"Navigateur supporté",status:e.isChrome||e.isFirefox?"success":"warning",message:e.isChrome?"Chrome détecté":e.isFirefox?"Firefox détecté":"Navigateur non optimisé"},{name:"Cookies activés",status:e.cookiesEnabled?"success":"error",message:e.cookiesEnabled?"Cookies activés":"Cookies désactivés"},{name:"LocalStorage disponible",status:e.supportsLocalStorage?"success":"error",message:e.supportsLocalStorage?"LocalStorage disponible":"LocalStorage non disponible"},{name:"Fetch API disponible",status:e.supportsFetch?"success":"warning",message:e.supportsFetch?"Fetch API disponible":"Fetch API non disponible"},{name:"Credentials supportés",status:e.supportsCredentials?"success":"error",message:e.supportsCredentials?"Credentials supportés":"Credentials non supportés"}]:[],c=()=>{oa.removeAuthToken(),oa.removeSecureStorage("user_data"),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(function(u){document.cookie=u.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),alert("Toutes les données ont été supprimées. Rechargez la page.")};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Diagnostic Navigateur"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Informations Navigateur"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"User Agent:"})," ",e.userAgent]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vendor:"})," ",e.vendor]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",e.isChrome?"Chrome":e.isFirefox?"Firefox":e.isSafari?"Safari":"Autre"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Tests de Compatibilité"}),s.jsx("div",{className:"space-y-3",children:l().map((u,d)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:u.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[o(u.status),s.jsx("span",{className:`text-sm ${u.status==="success"?"text-green-600":u.status==="error"?"text-red-600":"text-yellow-600"}`,children:u.message})]})]},d))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Test de Connexion API"}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Connexion Backend"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[o(n.status),s.jsx("span",{className:`text-sm ${n.status==="success"?"text-green-600":n.status==="error"?"text-red-600":"text-blue-600"}`,children:n.message||"Test en cours..."})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recommandations"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[!e.cookiesEnabled&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-800",children:"⚠️ Activez les cookies dans votre navigateur"})}),!e.supportsLocalStorage&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-800",children:"⚠️ LocalStorage non disponible - mode privé ?"})}),e.isChrome&&s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-blue-800",children:"💡 Chrome détecté - Configuration optimisée activée"})}),e.isFirefox&&s.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:s.jsx("p",{className:"text-orange-800",children:"🦊 Firefox détecté - Configuration optimisée activée"})}),!e.isChrome&&!e.isFirefox&&s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsx("p",{className:"text-yellow-800",children:"⚠️ Navigateur non optimisé - Utilisez Chrome ou Firefox pour une meilleure expérience"})})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retester API"}),s.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Nettoyer Données"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Fermer"})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2",children:"Diagnostic en cours..."})]})})})},ob={logError(t,e,r={}){var a,i,o;const n={timestamp:new Date().toISOString(),context:t,browser:oa.getBrowserInfo(),error:{message:e.message,stack:e.stack,name:e.name,code:e.code,status:(a=e.response)==null?void 0:a.status,statusText:(i=e.response)==null?void 0:i.statusText,data:(o=e.response)==null?void 0:o.data},additionalData:r,url:window.location.href,userAgent:navigator.userAgent};return console.group(`🐛 Erreur Debug - ${t}`),console.error("Détails de l'erreur:",n),console.groupEnd(),this.storeError(n),n},storeError(t){try{const e=JSON.parse(localStorage.getItem("debug_errors")||"[]");e.push(t),e.length>50&&e.splice(0,e.length-50),localStorage.setItem("debug_errors",JSON.stringify(e))}catch(e){console.warn("Impossible de stocker l'erreur:",e)}},getStoredErrors(){try{return JSON.parse(localStorage.getItem("debug_errors")||"[]")}catch{return[]}},clearStoredErrors(){localStorage.removeItem("debug_errors")},async testApiConnectivity(){const t=[];try{const e=await fetch("/api/health",{method:"GET",credentials:"include"});t.push({name:"Health Check",status:e.ok?"success":"error",details:`${e.status} ${e.statusText}`})}catch(e){t.push({name:"Health Check",status:"error",details:e.message})}try{const e=await fetch("/api/health",{method:"OPTIONS",credentials:"include"});t.push({name:"CORS Preflight",status:e.ok?"success":"error",details:`${e.status} ${e.statusText}`})}catch(e){t.push({name:"CORS Preflight",status:"error",details:e.message})}try{const e=await fetch("/api/auth/profile",{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${oa.getAuthToken()}`}});t.push({name:"Auth Endpoint",status:e.status===401?"warning":e.ok?"success":"error",details:`${e.status} ${e.statusText}`})}catch(e){t.push({name:"Auth Endpoint",status:"error",details:e.message})}return t},async testUserCreation(t){console.group("🧪 Test création utilisateur");try{console.log("Données utilisateur:",t),console.log("Token auth:",oa.getAuthToken()),console.log("Configuration navigateur:",oa.getBrowserInfo());const e=await fetch("/api/users",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oa.getAuthToken()}`},body:JSON.stringify(t)}),r=await e.text();let n;try{n=JSON.parse(r)}catch{n=r}return console.log("Réponse serveur:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries()),data:n}),console.groupEnd(),{success:e.ok,status:e.status,data:n,headers:Object.fromEntries(e.headers.entries())}}catch(e){throw console.error("Erreur test création:",e),console.groupEnd(),this.logError("Test création utilisateur",e,{userData:t}),e}},async runFullDiagnostic(){console.group("🔍 Diagnostic complet");const t={browser:oa.getBrowserInfo(),connectivity:await this.testApiConnectivity(),storage:this.testStorage(),errors:this.getStoredErrors(),timestamp:new Date().toISOString()};return console.log("Résultats diagnostic:",t),console.groupEnd(),t},testStorage(){const t=[];try{const e="debug_test_"+Date.now();localStorage.setItem(e,"test");const r=localStorage.getItem(e);localStorage.removeItem(e),t.push({name:"LocalStorage",status:r==="test"?"success":"error",details:"Lecture/écriture OK"})}catch(e){t.push({name:"LocalStorage",status:"error",details:e.message})}try{const e="debug_test_"+Date.now();sessionStorage.setItem(e,"test");const r=sessionStorage.getItem(e);sessionStorage.removeItem(e),t.push({name:"SessionStorage",status:r==="test"?"success":"error",details:"Lecture/écriture OK"})}catch(e){t.push({name:"SessionStorage",status:"error",details:e.message})}try{const e="debug_test="+Date.now();document.cookie=e+"; path=/";const r=document.cookie.includes("debug_test");document.cookie="debug_test=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",t.push({name:"Cookies",status:r?"success":"error",details:"Lecture/écriture OK"})}catch(e){t.push({name:"Cookies",status:"error",details:e.message})}return t},exportDebugData(){const t={browser:oa.getBrowserInfo(),errors:this.getStoredErrors(),storage:this.testStorage(),timestamp:new Date().toISOString(),url:window.location.href},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`debug-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},_0e=({onClose:t})=>{const[e,r]=y.useState("problems"),[n,a]=y.useState(null),[i,o]=y.useState(!1),l=async()=>{o(!0);try{const A=await ob.runFullDiagnostic();a(A)}catch(A){console.error("Erreur diagnostic:",A)}finally{o(!1)}},c=[{title:"L'application ne fonctionne que sur Firefox, pas sur Chrome",symptoms:["Erreurs de connexion sur Chrome","Problèmes d'authentification","Requêtes bloquées par CORS"],solutions:["Vider le cache et les cookies de Chrome","Désactiver les extensions qui bloquent les requêtes","Vérifier que les cookies sont activés","Utiliser le mode navigation privée pour tester","Mettre à jour Chrome vers la dernière version"]},{title:"Impossible d'enregistrer des données",symptoms:["Erreur 409 lors de la création d'utilisateurs","Formulaires qui ne se soumettent pas","Messages d'erreur 'Email déjà utilisé'"],solutions:["Vérifier que l'email n'existe pas déjà","Contrôler la connexion internet","Rafraîchir la page et réessayer","Vider le cache du navigateur","Vérifier les logs de la console (F12)"]},{title:"Problèmes d'authentification",symptoms:["Déconnexion automatique","Token expiré","Erreurs 401 Unauthorized"],solutions:["Se reconnecter","Vider les données de l'application","Vérifier que les cookies sont activés","Contrôler la date/heure du système","Utiliser un autre navigateur"]},{title:"Interface qui ne se met pas à jour",symptoms:["Données obsolètes affichées","Besoin de rafraîchir manuellement","Listes qui ne se mettent pas à jour"],solutions:["Rafraîchir la page (F5)","Vider le cache du navigateur","Fermer et rouvrir l'onglet","Redémarrer le navigateur","Vérifier la connexion réseau"]}],u=[{title:"Vider le cache navigateur",description:"Supprime les données temporaires qui peuvent causer des conflits",action:()=>{confirm("Cela va supprimer toutes les données de l'application. Continuer ?")&&(oa.removeAuthToken(),oa.removeSecureStorage("user_data"),localStorage.clear(),sessionStorage.clear(),location.reload())}},{title:"Redémarrer la session",description:"Déconnecte et reconnecte l'utilisateur",action:()=>{oa.removeAuthToken(),oa.removeSecureStorage("user_data"),window.location.href="/auth/login"}},{title:"Télécharger les données de debug",description:"Exporte les informations techniques pour le support",action:()=>{ob.exportDebugData()}},{title:"Nettoyer les erreurs stockées",description:"Supprime l'historique des erreurs",action:()=>{ob.clearStoredErrors(),alert("Erreurs supprimées")}}],d={chrome:["Désactiver les extensions qui bloquent les requêtes","Vérifier les paramètres de confidentialité","Autoriser les cookies tiers si nécessaire","Utiliser le mode navigation privée pour tester"],firefox:["Vérifier les paramètres de protection contre le pistage","Autoriser les cookies pour le site","Désactiver temporairement les bloqueurs de contenu","Vider le cache et les cookies"],other:["Utiliser Chrome ou Firefox pour une meilleure compatibilité","Mettre à jour le navigateur","Vérifier que JavaScript est activé","Autoriser les cookies et le stockage local"]},f=()=>oa.isChrome()?d.chrome:oa.isFirefox()?d.firefox:d.other;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Guide de Résolution des Problèmes"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),s.jsxs("div",{className:"flex space-x-4 mb-6 border-b",children:[s.jsx("button",{onClick:()=>r("problems"),className:`pb-2 px-1 ${e==="problems"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Problèmes Courants"}),s.jsx("button",{onClick:()=>r("fixes"),className:`pb-2 px-1 ${e==="fixes"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Solutions Rapides"}),s.jsx("button",{onClick:()=>r("diagnostic"),className:`pb-2 px-1 ${e==="diagnostic"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Diagnostic"}),s.jsx("button",{onClick:()=>r("browser"),className:`pb-2 px-1 ${e==="browser"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Conseils Navigateur"})]}),e==="problems"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Problèmes Fréquents et Solutions"}),c.map((A,h)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-red-600 mb-2",children:A.title}),s.jsxs("div",{className:"mb-3",children:[s.jsx("h5",{className:"font-medium text-gray-700 mb-1",children:"Symptômes :"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:A.symptoms.map((m,p)=>s.jsx("li",{children:m},p))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-700 mb-1",children:"Solutions :"}),s.jsx("ol",{className:"list-decimal list-inside text-sm text-gray-600",children:A.solutions.map((m,p)=>s.jsx("li",{children:m},p))})]})]},h))]}),e==="fixes"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Solutions Rapides"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map((A,h)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:A.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),s.jsx("button",{onClick:A.action,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Appliquer"})]},h))})]}),e==="diagnostic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Diagnostic Technique"}),s.jsxs("button",{onClick:l,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(Cm,{className:`w-4 h-4 ${i?"animate-spin":""}`}),s.jsx("span",{children:"Lancer Diagnostic"})]})]}),n&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Informations Navigateur"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",n.browser.isChrome?"Chrome":n.browser.isFirefox?"Firefox":"Autre"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Cookies:"})," ",n.browser.cookiesEnabled?"✅ Activés":"❌ Désactivés"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"LocalStorage:"})," ",n.browser.supportsLocalStorage?"✅ Supporté":"❌ Non supporté"]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Tests de Connectivité"}),n.connectivity.map((A,h)=>s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[A.status==="success"?s.jsx(jh,{className:"w-4 h-4 text-green-500"}):A.status==="warning"?s.jsx(wu,{className:"w-4 h-4 text-yellow-500"}):s.jsx(ez,{className:"w-4 h-4 text-red-500"}),s.jsxs("span",{className:"text-sm",children:[A.name,": ",A.details]})]},h))]}),n.errors.length>0&&s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsxs("h4",{className:"font-semibold mb-2 text-red-800",children:["Erreurs Récentes (",n.errors.length,")"]}),s.jsx("div",{className:"max-h-32 overflow-y-auto",children:n.errors.slice(-5).map((A,h)=>s.jsxs("div",{className:"text-sm text-red-700 mb-1",children:[s.jsxs("strong",{children:[A.context,":"]})," ",A.error.message]},h))})]})]})]}),e==="browser"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Conseils pour ",oa.isChrome()?"Chrome":oa.isFirefox()?"Firefox":"votre navigateur"]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsx("ul",{className:"space-y-2",children:f().map((A,h)=>s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx(Gb,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-sm",children:A})]},h))})}),!oa.isChrome()&&!oa.isFirefox()&&s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ Navigateur non optimisé"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Pour une meilleure expérience, nous recommandons d'utiliser Chrome ou Firefox. Votre navigateur actuel peut présenter des incompatibilités."})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t flex justify-between",children:[s.jsxs("button",{onClick:()=>ob.exportDebugData(),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{children:"Exporter Debug"})]}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Fermer"})]})]})})},c6=[{group:"Gestion Principale",items:[{path:"/",label:"Affaires",icon:b0,color:"text-amber-700"},{path:"/devis",label:"Devis",icon:CS,color:"text-orange-700"},{path:"/achats",label:"Achats",icon:Nx,color:"text-red-700"},{path:"/fournisseurs",label:"Fournisseurs",icon:IG,color:"text-orange-700"}]},{group:"Pilotage & Suivi",items:[{path:"/dashboard",label:"Tableau de Bord",icon:o0e,color:"text-blue-700"},{path:"/notifications",label:"Notifications",icon:Fd,color:"text-orange-600"},{path:"/pointages",label:"Pointages",icon:kG,color:"text-lime-700"},{path:"/gestion-heures",label:"Gestion des heures",icon:wn,color:"text-blue-700"}]},{group:"Planification",items:[{path:"/planning-interactif",label:"Planning Interactif",icon:_s,color:"text-amber-700"},{path:"/planning-equipe",label:"Planning Équipe",icon:Ji,color:"text-blue-700"},{path:"/ressources",label:"Ressources",icon:R2,color:"text-lime-700"},{path:"/temps-passe",label:"Temps passé",icon:wn,color:"text-red-700"}]},{group:"Analyses",items:[{path:"/analyses-avancees",label:"Analyses avancées",icon:s0e,color:"text-teal-600"},{path:"/claude",label:"Claude Assistant",icon:v0e,color:"text-red-700"}]},{group:"Gestion Financière",items:[{path:"/frais-generaux",label:"Frais Généraux",icon:i0e,color:"text-green-700"}]},{group:"Outils Production",items:[{path:"/opti-coupe",label:"OptiCoupe",icon:R2,color:"text-blue-700"},{path:"/caca-boudin",label:"💩 CACA Boudin",icon:Sl,color:"text-yellow-700"}]},{group:"Administration",items:[{path:"/users",label:"Gestion de l'Équipe",icon:Ji,color:"text-orange-700"},{path:"/parametres",label:"Paramètres Utilisateur",icon:kh,color:"text-stone-500"},{path:"/parametres-entreprise",label:"Paramètres Entreprise",icon:ro,color:"text-blue-700"},{path:"/parametres-globaux",label:"Paramètres Globaux",icon:kh,color:"text-gray-700"},{path:"/migration",label:"Migration Excel",icon:OG,color:"text-teal-700"}]}],P0e=()=>{var S,F,M,R;const[t,e]=y.useState(!0),[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState([]),[A,h]=y.useState(!1),m=J9(),p=Fr(),{user:g,logout:x}=Ya(),{isDark:v,toggleTheme:b}=Pk(),C=()=>{e(!t)},j=()=>{x(),p("/login")},w=U=>{console.log("🚀 Navigation vers:",U),console.log("🔍 État actuel de userMenuOpen:",r),console.log("🔍 Fonction navigate disponible:",typeof p),n(!1);try{p(U),console.log("✅ Navigation réussie vers:",U)}catch(z){console.error("❌ Erreur de navigation:",z)}},N=async()=>{try{h(!0);const z=(await Sd.getNotifications(5)).filter(Q=>Q.priority==="urgent"||Q.priority==="high");f(z),z.length>0&&m.pathname==="/"&&!sessionStorage.getItem("alertes_viewed")&&(u(!0),sessionStorage.setItem("alertes_viewed","true"))}catch(U){console.error("Erreur chargement alertes:",U)}finally{h(!1)}},E=U=>{switch(U){case"echeance_affaire":return s.jsx(il,{size:16,className:"text-blue-600"});case"bdc_en_attente":return s.jsx(jS,{size:16,className:"text-purple-600"});case"pointage_manquant":return s.jsx(wn,{size:16,className:"text-yellow-600"});default:return s.jsx(Fd,{size:16,className:"text-gray-600"})}};y.useEffect(()=>{N();const U=setInterval(N,3e5);return()=>clearInterval(U)},[m.pathname]);const _=U=>U==="/"?m.pathname==="/"||m.pathname==="/affaires":m.pathname.startsWith(U),k=()=>{for(const U of c6){const z=U.items.find(Q=>_(Q.path));if(z)return z.label}return"Entreprise Organiser"},D=()=>!c||d.length===0?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:s.jsx(e6,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"🚨 Alertes Critiques"}),s.jsxs("p",{className:"text-red-100 text-sm",children:[d.length," alerte",d.length>1?"s":""," nécessite",d.length>1?"nt":""," votre attention immédiate"]})]})]}),s.jsx("button",{onClick:()=>u(!1),className:"w-10 h-10 rounded-xl bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:s.jsx(ls,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:s.jsx("div",{className:"space-y-4",children:d.map((U,z)=>s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[E(U.type),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-300",children:U.title||`Alerte ${z+1}`}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.priority==="urgent"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}`,children:U.priority==="urgent"?"🔴 URGENT":"🟠 PRIORITÉ HAUTE"})]}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm leading-relaxed",children:U.message}),s.jsxs("p",{className:"text-red-500 dark:text-red-400 text-xs mt-2",children:["📅 ",new Date(U.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})},U.id))})}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>p("/notifications"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium text-sm flex items-center",children:[s.jsx(Fd,{className:"w-4 h-4 mr-2"}),"Voir toutes les notifications"]}),s.jsx("button",{onClick:()=>u(!1),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"J'ai compris"})]})]})});return s.jsxs(s.Fragment,{children:[s.jsx(D,{}),s.jsxs("div",{className:"min-h-screen bg-stone-100 dark:bg-stone-900",children:[s.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:s.jsxs("div",{className:"flex h-full flex-col bg-white/95 backdrop-blur-xl border-r border-stone-200/60 dark:bg-stone-800/95 dark:border-stone-700/60 shadow-xl",children:[s.jsxs("div",{className:"flex h-20 items-center justify-between px-6 border-b border-stone-200/60 dark:border-stone-700/60",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:"https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/Logo%2FLOGO.png?alt=media&token=b236b3a0-eb50-4f46-b8d6-46d54e252ace",alt:"M.AI Gestion Logo",className:"w-12 h-12 object-contain"}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-stone-800 dark:text-white",children:"M.AI Gestion"})})]}),s.jsx("button",{onClick:C,className:"lg:hidden p-2 rounded-lg hover:bg-stone-100/80 dark:hover:bg-stone-700/80 transition-colors border border-transparent hover:border-stone-200/40 dark:hover:border-stone-600/40",children:s.jsx(ls,{className:"w-5 h-5"})})]}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-8 overflow-y-auto",children:c6.map(U=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"px-3 text-xs font-semibold text-stone-500 uppercase tracking-wider dark:text-stone-400 flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-0.5 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full"},`${U.group}-line`),U.group]},`${U.group}-header`),s.jsx("div",{className:"space-y-2",children:U.items.map(z=>{const Q=z.icon,H=_(z.path);return s.jsxs(wae,{to:z.path,className:`sidebar-nav-item flex items-center space-x-3 px-4 py-3.5 rounded-xl transition-all duration-200 group relative ${H?"text-white shadow-md":"text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/50"}`,style:H?{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/essence_de_bois%2Fdoussie.JPG?alt=media&token=d4d6dcc0-5166-47dd-8d4e-cc655d8f8792')",backgroundSize:"cover",backgroundPosition:"center"}:{},children:[H&&s.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-white/80 rounded-r-full"}),s.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all duration-200 ${H?"bg-white/20 border border-white/25":"bg-stone-100 dark:bg-stone-700/50 group-hover:bg-stone-200 dark:group-hover:bg-stone-700"}`,children:s.jsx(Q,{className:`w-5 h-5 ${H?"text-white":z.color}`})}),s.jsx("span",{className:`font-medium text-sm ${H?"text-white":"text-stone-800 dark:text-stone-200"}`,children:z.label})]},z.path)})},`${U.group}-items`)]},U.group))}),s.jsx("div",{className:"border-t border-stone-200/50 dark:border-stone-700/50 p-4",children:s.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-xl bg-stone-100 dark:bg-stone-800/80 border border-stone-200/40 dark:border-stone-600/40",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-md border-2 border-white/20",children:s.jsxs("span",{className:"text-white font-bold text-sm",children:[(S=g==null?void 0:g.nom)==null?void 0:S[0],(F=g==null?void 0:g.prenom)==null?void 0:F[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-semibold text-stone-900 dark:text-white truncate",children:[g==null?void 0:g.prenom," ",g==null?void 0:g.nom]}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 truncate font-medium",children:(g==null?void 0:g.role)==="ADMIN_SYS"?"Administrateur":(g==null?void 0:g.role)==="CHEF_ATELIER"?"Chef d'atelier":"Employé"})]})]})})]})}),t&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm lg:hidden",onClick:C}),s.jsxs("div",{className:`transition-all duration-300 ${t?"lg:ml-72":"lg:ml-0"}`,children:[s.jsx("header",{className:"sticky top-0 z-30 h-20 border-b border-stone-200/60 bg-white/95 backdrop-blur-xl dark:bg-stone-800/95 dark:border-stone-700/60 shadow-sm",children:s.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:C,className:"p-2.5 rounded-lg hover:bg-stone-100/80 dark:hover:bg-stone-700/80 transition-colors border border-transparent hover:border-stone-200/50 dark:hover:border-stone-600/50",children:s.jsx(p0e,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-stone-900 dark:text-white",children:k()}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 font-medium",children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[d.length>0&&s.jsxs("button",{onClick:()=>u(!0),className:"relative inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-lg bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 border border-transparent transition-all duration-200 ease-in-out shadow-sm hover:shadow-lg active:scale-95 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",type:"button",children:[s.jsx(e6,{size:16,className:"mr-2 animate-pulse"}),s.jsx("span",{className:"hidden sm:inline",children:"Alertes"}),s.jsxs("span",{className:"ml-1",children:["(",d.length,")"]}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full animate-ping"})]}),s.jsx("button",{onClick:b,className:"p-2.5 rounded-lg hover:bg-stone-100/80 dark:hover:bg-stone-700/80 transition-colors border border-transparent hover:border-stone-200/50 dark:hover:border-stone-600/50",title:v?"Mode clair":"Mode sombre",children:v?s.jsx(Qk,{className:"w-5 h-5 text-yellow-500"}):s.jsx(Hk,{className:"w-5 h-5 text-gray-600"})}),s.jsx(D0e,{}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{console.log("🖱️ Clic sur avatar utilisateur, userMenuOpen:",r),n(!r)},className:"flex items-center space-x-2 p-2.5 rounded-lg hover:bg-stone-100/80 dark:hover:bg-stone-700/80 transition-colors border border-transparent hover:border-stone-200/50 dark:hover:border-stone-600/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center border border-white/20 shadow-sm",children:s.jsxs("span",{className:"text-white font-semibold text-xs",children:[(M=g==null?void 0:g.nom)==null?void 0:M[0],(R=g==null?void 0:g.prenom)==null?void 0:R[0]]})}),s.jsx(y0,{className:`w-4 h-4 transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&s.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white/98 dark:bg-stone-800/98 rounded-xl shadow-lg border border-stone-200/60 dark:border-stone-700/60 py-2 z-50 backdrop-blur-xl pointer-events-auto",onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{className:"px-4 py-3 border-b border-stone-200/50 dark:border-stone-700/50",children:[s.jsxs("p",{className:"text-sm font-semibold text-stone-900 dark:text-white",children:[g==null?void 0:g.prenom," ",g==null?void 0:g.nom]}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 font-medium",children:g==null?void 0:g.email})]}),s.jsxs("button",{onClick:()=>{console.log("🖱️ Clic bouton Mon profil"),w("/profil")},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/80 transition-colors",children:[s.jsx(N0e,{className:"w-4 h-4"}),s.jsx("span",{children:"Mon profil"})]}),s.jsxs("button",{onClick:()=>{console.log("🖱️ Clic bouton Sécurité"),w("/securite")},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/80 transition-colors",children:[s.jsx(b0e,{className:"w-4 h-4"}),s.jsx("span",{children:"Sécurité"})]}),s.jsxs("button",{onClick:()=>{w("/parametres")},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/80 transition-colors",children:[s.jsx(kh,{className:"w-4 h-4"}),s.jsx("span",{children:"Paramètres"})]}),s.jsxs("button",{onClick:()=>{n(!1),i(!0)},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/80 transition-colors",children:[s.jsx(r0e,{className:"w-4 h-4"}),s.jsx("span",{children:"Diagnostic Navigateur"})]}),s.jsxs("button",{onClick:()=>{n(!1),l(!0)},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-700/80 transition-colors",children:[s.jsx(CS,{className:"w-4 h-4"}),s.jsx("span",{children:"Guide de Résolution"})]}),s.jsx("div",{className:"border-t border-stone-200/50 dark:border-stone-700/50 my-2"}),s.jsxs("button",{onClick:()=>{console.log("🖱️ Clic bouton Déconnexion"),n(!1),j()},className:"flex items-center space-x-3 w-full px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50/80 dark:hover:bg-red-900/20 transition-colors",children:[s.jsx($G,{className:"w-4 h-4"}),s.jsx("span",{children:"Se déconnecter"})]})]})]})]})]})}),s.jsx("main",{className:"flex-1 bg-stone-100 dark:bg-stone-900 overflow-y-auto",children:s.jsx("div",{className:"w-full p-4 md:p-6 lg:p-8",children:s.jsx(Z9,{})})})]}),r&&s.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>n(!1)}),a&&s.jsx(I0e,{onClose:()=>i(!1)}),o&&s.jsx(_0e,{onClose:()=>l(!1)})]})]})},HG=()=>s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(Z9,{})}),Xe=({children:t,onClick:e,type:r="button",variant:n="default",size:a="default",className:i="",disabled:o=!1,loading:l=!1,icon:c,fullWidth:u,...d})=>{const f="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",A={default:"bg-primary-600 text-white hover:bg-primary-700",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 bg-red-600 text-white hover:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground border-gray-300 hover:bg-gray-50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-accent hover:text-accent-foreground hover:bg-gray-100",link:"text-primary-600 underline-offset-4 hover:underline"},h={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"},m=`${f} ${A[n]} ${h[a]} ${i}`;return s.jsxs("button",{type:r,onClick:e,disabled:o||l,className:m,...d,children:[l&&s.jsx("span",{className:"mr-2",children:"⏳"}),c&&s.jsx("span",{className:"mr-2",children:"🔑"}),t]})},Kt=({children:t,className:e="",...r})=>s.jsx("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm bg-white border-gray-200 ${e}`,...r,children:t}),Er=({children:t,className:e="",...r})=>s.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${e}`,...r,children:t}),Br=({children:t,className:e="",...r})=>s.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...r,children:t}),fm=({children:t,className:e="",...r})=>s.jsx("p",{className:`text-sm text-muted-foreground text-gray-600 ${e}`,...r,children:t}),nr=({children:t,className:e="",...r})=>s.jsx("div",{className:`p-6 pt-0 ${e}`,...r,children:t}),k0e=()=>{const[t,e]=y.useState({email:"",password:"",rememberMe:!1}),[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState({});Fr();const{login:c}=Ya(),{isDark:u,toggleTheme:d}=Pk(),f=p=>{const{name:g,value:x,type:v,checked:b}=p.target;e(C=>({...C,[g]:v==="checkbox"?b:x})),o[g]&&l(C=>({...C,[g]:""}))},A=()=>{const p={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(p.email="Format d'email invalide"):p.email="L'email est requis",t.password?t.password.length<6&&(p.password="Le mot de passe doit contenir au moins 6 caractères"):p.password="Le mot de passe est requis",l(p),Object.keys(p).length===0},h=async p=>{if(p.preventDefault(),!!A()){i(!0);try{await c({email:t.email,password:t.password})}catch(g){console.error("Erreur de connexion:",g),ve.error("Erreur de connexion",{description:g.message||"Vérifiez vos identifiants et réessayez"})}finally{i(!1)}}};return s.jsxs("div",{className:"min-h-screen flex justify-center items-center font-sans p-8",children:[s.jsx("button",{onClick:d,className:"fixed top-4 right-4 p-3 rounded-xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-stone-200 dark:border-gray-700 transition-all z-50",title:u?"Mode clair":"Mode sombre",children:u?s.jsx(Qk,{className:"w-5 h-5 text-amber-400"}):s.jsx(Hk,{className:"w-5 h-5 text-stone-600"})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",style:{width:"900px",height:"400px"},children:s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center rounded-l-2xl p-8 relative",style:{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/Divers%20belles%20images%2F2a1b3c2fd0d4438568726f2d6059afc0.jpg?alt=media&token=8a778fc8-5681-4b40-bb9f-1669cf13a036')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-l-2xl"}),s.jsxs("div",{className:"relative z-10 text-center",children:[s.jsx("img",{src:"https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/Logo%2FLOGO.png?alt=media&token=b236b3a0-eb50-4f46-b8d6-46d54e252ace",alt:"M.AI Gestion",className:"w-24 h-24 mb-6 mx-auto"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg",children:"M.AI Gestion"}),s.jsxs("p",{className:"text-white/90 text-center text-sm leading-relaxed drop-shadow",children:["Plateforme intelligente de",s.jsx("br",{}),"gestion d'entreprise"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center p-10",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-normal text-gray-900 dark:text-white mb-1",children:"Connexion"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Accéder à votre espace"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsx("div",{children:s.jsx("input",{type:"email",name:"email",placeholder:"Adresse e-mail",value:t.email,onChange:f,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-olive-500 focus:ring-1 focus:ring-olive-500 focus:outline-none transition-colors"})}),s.jsx("div",{children:s.jsx("input",{type:"password",name:"password",placeholder:"Mot de passe",value:t.password,onChange:f,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-olive-500 focus:ring-1 focus:ring-olive-500 focus:outline-none transition-colors"})}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-olive-600 hover:bg-olive-700 disabled:bg-olive-400 text-white font-medium py-3 rounded-lg transition-colors shadow-sm",children:a?"Connexion...":"Se connecter"})]}),s.jsx("div",{className:"text-center mt-4",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Identifiants oubliés ?",s.jsx("span",{className:"text-olive-600 hover:text-olive-700 cursor-pointer ml-1",children:"Contactez votre administrateur"})]})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-6",children:["© ",new Date().getFullYear()," M.AI Gestion - Tous droits réservés"]})]})]})})]})};function O0e(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const F0e=typeof window<"u"?y.useLayoutEffect:y.useEffect;function $a(t,e){F0e(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function R0e(t,e){t&&O0e(t),$a(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),$a(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),$a(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),$a(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),$a(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),$a(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),$a(`mantine-form:${t}:clear-errors`,e.clearErrors),$a(`mantine-form:${t}:reset`,e.reset),$a(`mantine-form:${t}:validate`,e.validate),$a(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),$a(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),$a(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),$a(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),$a(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),$a(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),$a(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),$a(`mantine-form:${t}:reset-touched`,e.resetTouched)}function M0e(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function aD(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function L0e(t){const[e,r]=y.useState(aD(t)),n=y.useRef(e),a=y.useCallback(c=>{r(u=>{const d=aD(typeof c=="function"?c(u):c);return n.current=d,d})},[]),i=y.useCallback(()=>a({}),[]),o=y.useCallback(c=>{n.current[c]!==void 0&&a(u=>{const d={...u};return delete d[c],d})},[e]),l=y.useCallback((c,u)=>{u==null||u===!1?o(c):n.current[c]!==u&&a(d=>({...d,[c]:u}))},[e]);return{errorsState:e,setErrors:a,clearErrors:i,setFieldError:l,clearFieldError:o}}function iD(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function u6(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function d6(t,e,r,n){if(e===void 0)return r;const a=`${String(t)}`;let i=r;n===-1&&(i=iD(`${a}.${e}`,i));const o={...i},l=new Set;return Object.entries(i).filter(([c])=>{if(!c.startsWith(`${a}.`))return!1;const u=u6(c,a);return Number.isNaN(u)?!1:u>=e}).forEach(([c,u])=>{const d=u6(c,a),f=c.replace(`${a}.${d}`,`${a}.${d+n}`);o[f]=u,l.add(f),l.has(c)||delete o[c]}),o}function U0e(t,{from:e,to:r},n){const a=`${t}.${e}`,i=`${t}.${r}`,o={...n},l=new Set;return Object.keys(n).forEach(c=>{if(l.has(c))return;let u,d;if(c.startsWith(a)?(u=c,d=c.replace(a,i)):c.startsWith(i)&&(u=c.replace(i,a),d=c),u&&d){const f=o[u],A=o[d];A===void 0?delete o[u]:o[u]=A,f===void 0?delete o[d]:o[d]=f,l.add(u),l.add(d)}}),o}function f6(t,e,r){typeof r.value=="object"&&(r.value=Rg(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function Rg(t){if(typeof t!="object")return t;var e=0,r,n,a,i=Object.prototype.toString.call(t);if(i==="[object Object]"?a=Object.create(t.__proto__||null):i==="[object Array]"?a=Array(t.length):i==="[object Set]"?(a=new Set,t.forEach(function(o){a.add(Rg(o))})):i==="[object Map]"?(a=new Map,t.forEach(function(o,l){a.set(Rg(l),Rg(o))})):i==="[object Date]"?a=new Date(+t):i==="[object RegExp]"?a=new RegExp(t.source,t.flags):i==="[object DataView]"?a=new t.constructor(Rg(t.buffer)):i==="[object ArrayBuffer]"?a=t.slice(0):i.slice(-6)==="Array]"&&(a=new t.constructor(t)),a){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)f6(a,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(a,r=n[e])&&a[r]===t[r]||f6(a,r,Object.getOwnPropertyDescriptor(t,r))}return a||t}function QG(t){return typeof t!="string"?[]:t.split(".")}function za(t,e){const r=QG(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let a=1;a<r.length&&n!=null;a+=1)n=n[r[a]];return n}function Cw(t,e,r){const n=QG(t);if(n.length===0)return r;const a=Rg(r);if(n.length===1)return a[n[0]]=e,a;let i=a[n[0]];for(let o=1;o<n.length-1;o+=1){if(i===void 0)return a;i=i[n[o]]}return i[n[n.length-1]]=e,a}function $0e(t,{from:e,to:r},n){const a=za(t,n);if(!Array.isArray(a))return n;const i=[...a],o=a[e];return i.splice(e,1),i.splice(r,0,o),Cw(t,i,n)}function H0e(t,e,r,n){const a=za(t,n);if(!Array.isArray(a))return n;const i=[...a];return i.splice(typeof r=="number"?r:i.length,0,e),Cw(t,i,n)}function Q0e(t,e,r){const n=za(t,r);return Array.isArray(n)?Cw(t,n.filter((a,i)=>i!==e),r):r}function z0e(t,e,r,n){const a=za(t,n);if(!Array.isArray(a)||a.length<=r)return n;const i=[...a];return i[r]=e,Cw(t,i,n)}function V0e({$values:t,$errors:e,$status:r}){const n=y.useCallback((l,c)=>{r.clearFieldDirty(l),e.setErrors(u=>U0e(l,c,u)),t.setValues({values:$0e(l,c,t.refValues.current),updateState:!0})},[]),a=y.useCallback((l,c)=>{r.clearFieldDirty(l),e.setErrors(u=>d6(l,c,u,-1)),t.setValues({values:Q0e(l,c,t.refValues.current),updateState:!0})},[]),i=y.useCallback((l,c,u)=>{r.clearFieldDirty(l),e.setErrors(d=>d6(l,u,d,1)),t.setValues({values:H0e(l,c,u,t.refValues.current),updateState:!0})},[]),o=y.useCallback((l,c,u)=>{r.clearFieldDirty(l),t.setValues({values:z0e(l,u,c,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:a,insertListItem:i,replaceListItem:o}}var W0e=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const lb=ln(W0e);function Fv(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(a=>a.startsWith(`${e}.`));return t[e]||n.some(a=>t[a])||!1}return r.some(n=>t[n])}function G0e({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[a,i]=y.useState(e),[o,l]=y.useState(t),c=y.useRef(e),u=y.useRef(t),d=y.useCallback(w=>{const N=typeof w=="function"?w(c.current):w;c.current=N,r==="controlled"&&i(N)},[]),f=y.useCallback((w,N=!1)=>{const E=typeof w=="function"?w(u.current):w;u.current=E,(r==="controlled"||N)&&l(E)},[]),A=y.useCallback(()=>d({}),[]),h=y.useCallback(w=>{const N=w?{...n.refValues.current,...w}:n.refValues.current;n.setValuesSnapshot(N),f({})},[]),m=y.useCallback((w,N)=>{d(E=>Fv(E,w)===N?E:{...E,[w]:N})},[]),p=y.useCallback((w,N,E)=>{f(_=>Fv(_,w)===N?_:{..._,[w]:N},E)},[]),g=y.useCallback((w,N)=>{const E=Fv(u.current,w),_=!lb(za(w,n.getValuesSnapshot()),N),k=iD(w,u.current);k[w]=_,f(k,E!==_)},[]),x=y.useCallback(w=>Fv(c.current,w),[]),v=y.useCallback(w=>f(N=>{if(typeof w!="string")return N;const E=iD(w,N);return delete E[w],lb(E,N)?N:E}),[]),b=y.useCallback(w=>{if(w){const E=za(w,u.current);if(typeof E=="boolean")return E;const _=za(w,n.refValues.current),k=za(w,n.valuesSnapshot.current);return!lb(_,k)}return Object.keys(u.current).length>0?Fv(u.current):!lb(n.refValues.current,n.valuesSnapshot.current)},[]),C=y.useCallback(()=>u.current,[]),j=y.useCallback(()=>c.current,[]);return{touchedState:a,dirtyState:o,touchedRef:c,dirtyRef:u,setTouched:d,setDirty:f,resetDirty:h,resetTouched:A,isTouched:x,setFieldTouched:m,setFieldDirty:p,setTouchedState:i,setDirtyState:l,clearFieldDirty:v,isDirty:b,getDirty:C,getTouched:j,setCalculatedFieldDirty:g}}function q0e({initialValues:t,onValuesChange:e,mode:r}){const n=y.useRef(!1),[a,i]=y.useState(t||{}),o=y.useRef(a),l=y.useRef(a),c=y.useCallback(({values:p,subscribers:g,updateState:x=!0,mergeWithPreviousValues:v=!0})=>{const b=o.current,C=p instanceof Function?p(o.current):p,j=v?{...b,...C}:C;o.current=j,x&&i(j),e==null||e(j,b),g==null||g.filter(Boolean).forEach(w=>w({updatedValues:j,previousValues:b}))},[e]),u=y.useCallback(p=>{var v;const g=za(p.path,o.current),x=p.value instanceof Function?p.value(g):p.value;if(g!==x){const b=o.current,C=Cw(p.path,x,o.current);c({values:C,updateState:p.updateState}),(v=p.subscribers)==null||v.filter(Boolean).forEach(j=>j({path:p.path,updatedValues:C,previousValues:b}))}},[c]),d=y.useCallback(p=>{l.current=p},[]),f=y.useCallback((p,g)=>{n.current||(n.current=!0,c({values:p,updateState:r==="controlled"}),d(p),g())},[c]),A=y.useCallback(()=>{c({values:l.current,updateState:!0,mergeWithPreviousValues:!1})},[c]),h=y.useCallback(()=>o.current,[]),m=y.useCallback(()=>l.current,[]);return{initialized:n,stateValues:a,refValues:o,valuesSnapshot:l,setValues:c,setFieldValue:u,resetValues:A,setValuesSnapshot:d,initialize:f,getValues:h,getValuesSnapshot:m}}function K0e({$status:t}){const e=y.useRef({}),r=y.useCallback((a,i)=>{y.useEffect(()=>(e.current[a]=e.current[a]||[],e.current[a].push(i),()=>{e.current[a]=e.current[a].filter(o=>o!==i)}),[i])},[]),n=y.useCallback(a=>e.current[a]?e.current[a].map(i=>o=>i({previousValue:za(a,o.previousValues),value:za(a,o.updatedValues),touched:t.isTouched(a),dirty:t.isDirty(a)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function h6(t,e){return t?`${t}-${e.toString()}`:e.toString()}const W1=Symbol("root-rule");function A6(t){const e=aD(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function oD(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((a,i)=>{const o=t[i],l=`${r===""?"":`${r}.`}${i}`,c=za(l,e);let u=!1;return typeof o=="function"&&(a[l]=o(c,e,l)),typeof o=="object"&&Array.isArray(c)&&(u=!0,c.forEach((d,f)=>oD(o,e,`${l}.${f}`,a)),W1 in o&&(a[l]=o[W1](c,e,l))),typeof o=="object"&&typeof c=="object"&&c!==null&&(u||oD(o,e,l,a),W1 in o&&(a[l]=o[W1](c,e,l))),a},n)}function lD(t,e){return A6(typeof t=="function"?t(e):oD(t,e))}function G1(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=lD(e,r),a=Object.keys(n.errors).find(i=>t.split(".").every((o,l)=>o===i.split(".")[l]));return{hasError:!!a,error:a?n.errors[a]:null}}const Y0e="__MANTINE_FORM_INDEX__";function m6(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${Y0e}`)):!1:!1}function Fl({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:a={},initialTouched:i={},clearInputErrorOnChange:o=!0,validateInputOnChange:l=!1,validateInputOnBlur:c=!1,onValuesChange:u,transformValues:d=p=>p,enhanceGetInputProps:f,validate:A,onSubmitPreventDefault:h="always",touchTrigger:m="change"}={}){const p=L0e(n),g=q0e({initialValues:r,onValuesChange:u,mode:e}),x=G0e({initialDirty:a,initialTouched:i,$values:g,mode:e}),v=V0e({$values:g,$errors:p,$status:x}),b=K0e({$status:x}),[C,j]=y.useState(0),[w,N]=y.useState({}),[E,_]=y.useState(!1),k=y.useCallback(()=>{g.resetValues(),p.clearErrors(),x.resetDirty(),x.resetTouched(),e==="uncontrolled"&&j(Z=>Z+1)},[]),D=y.useCallback(Z=>{o&&p.clearErrors(),e==="uncontrolled"&&j(ie=>ie+1),Object.keys(b.subscribers.current).forEach(ie=>{const ee=za(ie,g.refValues.current),ue=za(ie,Z);ee!==ue&&b.getFieldSubscribers(ie).forEach(ae=>ae({previousValues:Z,updatedValues:g.refValues.current}))})},[o]),S=y.useCallback(Z=>{const ie=g.refValues.current;g.initialize(Z,()=>e==="uncontrolled"&&j(ee=>ee+1)),D(ie)},[D]),F=y.useCallback((Z,ie,ee)=>{const ue=m6(Z,l),ae=ie instanceof Function?ie(za(Z,g.refValues.current)):ie;x.setCalculatedFieldDirty(Z,ae),m==="change"&&x.setFieldTouched(Z,!0),!ue&&o&&p.clearFieldError(Z),g.setFieldValue({path:Z,value:ie,updateState:e==="controlled",subscribers:[...b.getFieldSubscribers(Z),ue?re=>{const fe=G1(Z,A,re.updatedValues);fe.hasError?p.setFieldError(Z,fe.error):p.clearFieldError(Z)}:null,(ee==null?void 0:ee.forceUpdate)!==!1&&e!=="controlled"?()=>N(re=>({...re,[Z]:(re[Z]||0)+1})):null]})},[u,A]),M=y.useCallback(Z=>{const ie=g.refValues.current;g.setValues({values:Z,updateState:e==="controlled"}),D(ie)},[u,D]),R=y.useCallback(()=>{const Z=lD(A,g.refValues.current);return p.setErrors(Z.errors),Z},[A]),U=y.useCallback(Z=>{const ie=G1(Z,A,g.refValues.current);return ie.hasError?p.setFieldError(Z,ie.error):p.clearFieldError(Z),ie},[A]),z=(Z,{type:ie="input",withError:ee=!0,withFocus:ue=!0,...ae}={})=>{const fe={onChange:M0e(G=>F(Z,G,{forceUpdate:!1})),"data-path":h6(t,Z)};return ee&&(fe.error=p.errorsState[Z]),ie==="checkbox"?fe[e==="controlled"?"checked":"defaultChecked"]=za(Z,g.refValues.current):fe[e==="controlled"?"value":"defaultValue"]=za(Z,g.refValues.current),ue&&(fe.onFocus=()=>x.setFieldTouched(Z,!0),fe.onBlur=()=>{if(m6(Z,c)){const G=G1(Z,A,g.refValues.current);G.hasError?p.setFieldError(Z,G.error):p.clearFieldError(Z)}}),Object.assign(fe,f==null?void 0:f({inputProps:fe,field:Z,options:{type:ie,withError:ee,withFocus:ue,...ae},form:se}))},Q=(Z,ie)=>ee=>{h==="always"&&(ee==null||ee.preventDefault());const ue=R();if(ue.hasErrors)h==="validation-failed"&&(ee==null||ee.preventDefault()),ie==null||ie(ue.errors,g.refValues.current,ee);else{const ae=Z==null?void 0:Z(d(g.refValues.current),ee);ae instanceof Promise&&(_(!0),ae.finally(()=>_(!1)))}},H=Z=>d(Z||g.refValues.current),q=y.useCallback(Z=>{Z.preventDefault(),k()},[]),X=y.useCallback(Z=>Z?!G1(Z,A,g.refValues.current).hasError:!lD(A,g.refValues.current).hasErrors,[A]),$=Z=>`${C}-${Z}-${w[Z]||0}`,K=y.useCallback(Z=>document.querySelector(`[data-path="${h6(t,Z)}"]`),[]),se={watch:b.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,getInitialValues:g.getValuesSnapshot,setInitialValues:g.setValuesSnapshot,initialize:S,setValues:M,setFieldValue:F,submitting:E,setSubmitting:_,errors:p.errorsState,setErrors:p.setErrors,setFieldError:p.setFieldError,clearFieldError:p.clearFieldError,clearErrors:p.clearErrors,resetDirty:x.resetDirty,setTouched:x.setTouched,setDirty:x.setDirty,isTouched:x.isTouched,resetTouched:x.resetTouched,isDirty:x.isDirty,getTouched:x.getTouched,getDirty:x.getDirty,reorderListItem:v.reorderListItem,insertListItem:v.insertListItem,removeListItem:v.removeListItem,replaceListItem:v.replaceListItem,reset:k,validate:R,validateField:U,getInputProps:z,onSubmit:Q,onReset:q,isValid:X,getTransformedValues:H,key:$,getInputNode:K};return R0e(t,se),se}const X0e=({password:t})=>{if(!t)return null;const e=[{re:/[0-9]/,label:"Contient des chiffres"},{re:/[a-z]/,label:"Contient des lettres minuscules"},{re:/[A-Z]/,label:"Contient des lettres majuscules"},{re:/[$&+,:;=?@#|'<>.^*()%!-]/,label:"Contient des caractères spéciaux"}],r=e.filter(i=>i.re.test(t)).length,n=r===0?"red":r===1?"orange":r===2?"yellow":r===3?"lime":"green",a=e.map((i,o)=>s.jsxs(He,{color:i.re.test(t)?"teal":"red",size:"sm",mt:5,style:{display:"flex",alignItems:"center"},children:[i.re.test(t)?s.jsx(Gr,{size:14}):s.jsx(ls,{size:14})," ",i.label]},o));return s.jsxs(ut,{mt:"md",children:[s.jsx(gx,{value:r/4*100,color:n,size:"sm",mb:"md"}),a]})},J0e=()=>{const{register:t}=Ya(),[e,r]=y.useState(!1),n=Fl({initialValues:{nom:"",prenom:"",email:"",poste:"",password:"",confirmPassword:""},validate:{nom:i=>i.length>=2?null:"Le nom doit contenir au moins 2 caractères",prenom:i=>i.length>=2?null:"Le prénom doit contenir au moins 2 caractères",email:i=>/^\S+@\S+\.\S+$/.test(i)?null:"Email invalide",poste:i=>i.length>=2?null:"Le poste doit contenir au moins 2 caractères",password:i=>i.length<6?"Le mot de passe doit contenir au moins 6 caractères":[{re:/[0-9]/},{re:/[a-z]/},{re:/[A-Z]/},{re:/[$&+,:;=?@#|'<>.^*()%!-]/}].filter(c=>c.re.test(i)).length<2?"Le mot de passe est trop faible":null,confirmPassword:(i,o)=>i!==o.password?"Les mots de passe ne correspondent pas":null}}),a=async i=>{r(!0);try{const{confirmPassword:o,...l}=i;await t(l)}catch(o){console.error("Erreur d'inscription:",o)}finally{r(!1)}};return s.jsx("form",{onSubmit:n.onSubmit(a),children:s.jsxs(ps,{spacing:"md",children:[s.jsxs(Bt,{grow:!0,children:[s.jsx(dn,{required:!0,label:"Nom",placeholder:"Votre nom",icon:s.jsx(Wa,{size:16}),...n.getInputProps("nom"),disabled:e}),s.jsx(dn,{required:!0,label:"Prénom",placeholder:"Votre prénom",icon:s.jsx(Wa,{size:16}),...n.getInputProps("prenom"),disabled:e})]}),s.jsx(dn,{required:!0,label:"Email",placeholder:"votre.email@exemple.com",icon:s.jsx(Mk,{size:16}),...n.getInputProps("email"),disabled:e}),s.jsx(dn,{required:!0,label:"Poste",placeholder:"Votre poste dans l'entreprise",icon:s.jsx(b0,{size:16}),...n.getInputProps("poste"),disabled:e}),s.jsx(v0,{required:!0,label:"Mot de passe",placeholder:"Choisissez un mot de passe sécurisé",icon:s.jsx(w0,{size:16}),...n.getInputProps("password"),disabled:e}),s.jsx(X0e,{password:n.values.password}),s.jsx(v0,{required:!0,label:"Confirmer le mot de passe",placeholder:"Répétez votre mot de passe",icon:s.jsx(w0,{size:16}),...n.getInputProps("confirmPassword"),disabled:e}),s.jsx(Bt,{position:"apart",mt:"md",children:s.jsx(qN,{component:Xi,to:"/auth/login",size:"sm",children:"Déjà un compte ? Connectez-vous"})}),s.jsx(rr,{fullWidth:!0,type:"submit",leftSection:s.jsx(S0e,{size:18}),loading:e,children:"Créer un compte"})]})})},pb={getStatus:async()=>{var t,e;try{const{data:r}=await Ee.get("/auth/2fa/status");return r}catch(r){throw console.error("Erreur lors de la récupération du statut 2FA:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération du statut 2FA")}},setup:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/2fa/setup",{email:t});return n}catch(n){throw console.error("Erreur lors de la configuration 2FA:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la configuration 2FA")}},verifyAndEnable:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/2fa/verify",{token:t});return n}catch(n){throw console.error("Erreur lors de la vérification 2FA:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Code de vérification invalide")}},verifyLogin:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/2fa/verify-login",{token:t});return n}catch(n){throw console.error("Erreur lors de la vérification 2FA de connexion:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Code de vérification invalide")}},disable:async()=>{var t,e;try{const{data:r}=await Ee.delete("/auth/2fa/disable");return r}catch(r){throw console.error("Erreur lors de la désactivation 2FA:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la désactivation 2FA")}},regenerateBackupCodes:async()=>{var t,e;try{const{data:r}=await Ee.post("/auth/2fa/regenerate-backup-codes");return r}catch(r){throw console.error("Erreur lors de la génération des codes de récupération:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la génération des codes de récupération")}}};var Z0e=Object.defineProperty,M2=Object.getOwnPropertySymbols,zG=Object.prototype.hasOwnProperty,VG=Object.prototype.propertyIsEnumerable,p6=(t,e,r)=>e in t?Z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cD=(t,e)=>{for(var r in e||(e={}))zG.call(e,r)&&p6(t,r,e[r]);if(M2)for(var r of M2(e))VG.call(e,r)&&p6(t,r,e[r]);return t},uD=(t,e)=>{var r={};for(var n in t)zG.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&M2)for(var n of M2(t))e.indexOf(n)<0&&VG.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Im;(t=>{const e=class Vr{constructor(c,u,d,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<Vr.MIN_VERSION||c>Vr.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let A=[];for(let m=0;m<this.size;m++)A.push(!1);for(let m=0;m<this.size;m++)this.modules.push(A.slice()),this.isFunction.push(A.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(d);if(this.drawCodewords(h),f==-1){let m=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const g=this.getPenaltyScore();g<m&&(f=p,m=g),this.applyMask(p)}}a(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const d=t.QrSegment.makeSegments(c);return Vr.encodeSegments(d,u)}static encodeBinary(c,u){const d=t.QrSegment.makeBytes(c);return Vr.encodeSegments([d],u)}static encodeSegments(c,u,d=1,f=40,A=-1,h=!0){if(!(Vr.MIN_VERSION<=d&&d<=f&&f<=Vr.MAX_VERSION)||A<-1||A>7)throw new RangeError("Invalid value");let m,p;for(m=d;;m++){const b=Vr.getNumDataCodewords(m,u)*8,C=o.getTotalBits(c,m);if(C<=b){p=C;break}if(m>=f)throw new RangeError("Data too long")}for(const b of[Vr.Ecc.MEDIUM,Vr.Ecc.QUARTILE,Vr.Ecc.HIGH])h&&p<=Vr.getNumDataCodewords(m,b)*8&&(u=b);let g=[];for(const b of c){r(b.mode.modeBits,4,g),r(b.numChars,b.mode.numCharCountBits(m),g);for(const C of b.getData())g.push(C)}a(g.length==p);const x=Vr.getNumDataCodewords(m,u)*8;a(g.length<=x),r(0,Math.min(4,x-g.length),g),r(0,(8-g.length%8)%8,g),a(g.length%8==0);for(let b=236;g.length<x;b^=253)r(b,8,g);let v=[];for(;v.length*8<g.length;)v.push(0);return g.forEach((b,C)=>v[C>>>3]|=b<<7-(C&7)),new Vr(m,u,v,A)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d==0&&f==0||d==0&&f==u-1||d==u-1&&f==0||this.drawAlignmentPattern(c[d],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let A=0;A<10;A++)d=d<<1^(d>>>9)*1335;const f=(u<<10|d)^21522;a(f>>>15==0);for(let A=0;A<=5;A++)this.setFunctionModule(8,A,n(f,A));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let A=9;A<15;A++)this.setFunctionModule(14-A,8,n(f,A));for(let A=0;A<8;A++)this.setFunctionModule(this.size-1-A,8,n(f,A));for(let A=8;A<15;A++)this.setFunctionModule(8,this.size-15+A,n(f,A));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;a(u>>>18==0);for(let d=0;d<18;d++){const f=n(u,d),A=this.size-11+d%3,h=Math.floor(d/3);this.setFunctionModule(A,h,f),this.setFunctionModule(h,A,f)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let f=-4;f<=4;f++){const A=Math.max(Math.abs(f),Math.abs(d)),h=c+f,m=u+d;0<=h&&h<this.size&&0<=m&&m<this.size&&this.setFunctionModule(h,m,A!=2&&A!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+d,Math.max(Math.abs(f),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=Vr.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const f=Vr.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],A=Vr.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],h=Math.floor(Vr.getNumRawDataModules(u)/8),m=f-h%f,p=Math.floor(h/f);let g=[];const x=Vr.reedSolomonComputeDivisor(A);for(let b=0,C=0;b<f;b++){let j=c.slice(C,C+p-A+(b<m?0:1));C+=j.length;const w=Vr.reedSolomonComputeRemainder(j,x);b<m&&j.push(0),g.push(j.concat(w))}let v=[];for(let b=0;b<g[0].length;b++)g.forEach((C,j)=>{(b!=p-A||j>=m)&&v.push(C[b])});return a(v.length==h),v}drawCodewords(c){if(c.length!=Math.floor(Vr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let f=0;f<this.size;f++)for(let A=0;A<2;A++){const h=d-A,p=(d+1&2)==0?this.size-1-f:f;!this.isFunction[p][h]&&u<c.length*8&&(this.modules[p][h]=n(c[u>>>3],7-(u&7)),u++)}}a(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let f;switch(c){case 0:f=(d+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=d%3==0;break;case 3:f=(d+u)%3==0;break;case 4:f=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:f=d*u%2+d*u%3==0;break;case 6:f=(d*u%2+d*u%3)%2==0;break;case 7:f=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&f&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let A=0;A<this.size;A++){let h=!1,m=0,p=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[A][g]==h?(m++,m==5?c+=Vr.PENALTY_N1:m>5&&c++):(this.finderPenaltyAddHistory(m,p),h||(c+=this.finderPenaltyCountPatterns(p)*Vr.PENALTY_N3),h=this.modules[A][g],m=1);c+=this.finderPenaltyTerminateAndCount(h,m,p)*Vr.PENALTY_N3}for(let A=0;A<this.size;A++){let h=!1,m=0,p=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][A]==h?(m++,m==5?c+=Vr.PENALTY_N1:m>5&&c++):(this.finderPenaltyAddHistory(m,p),h||(c+=this.finderPenaltyCountPatterns(p)*Vr.PENALTY_N3),h=this.modules[g][A],m=1);c+=this.finderPenaltyTerminateAndCount(h,m,p)*Vr.PENALTY_N3}for(let A=0;A<this.size-1;A++)for(let h=0;h<this.size-1;h++){const m=this.modules[A][h];m==this.modules[A][h+1]&&m==this.modules[A+1][h]&&m==this.modules[A+1][h+1]&&(c+=Vr.PENALTY_N2)}let u=0;for(const A of this.modules)u=A.reduce((h,m)=>h+(m?1:0),u);const d=this.size*this.size,f=Math.ceil(Math.abs(u*20-d*10)/d)-1;return a(0<=f&&f<=9),c+=f*Vr.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let f=this.size-7;d.length<c;f-=u)d.splice(1,0,f);return d}}static getNumRawDataModules(c){if(c<Vr.MIN_VERSION||c>Vr.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(Vr.getNumRawDataModules(c)/8)-Vr.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*Vr.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let d=1;for(let f=0;f<c;f++){for(let A=0;A<u.length;A++)u[A]=Vr.reedSolomonMultiply(u[A],d),A+1<u.length&&(u[A]^=u[A+1]);d=Vr.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(f=>0);for(const f of c){const A=f^d.shift();d.push(0),u.forEach((h,m)=>d[m]^=Vr.reedSolomonMultiply(h,A))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let f=7;f>=0;f--)d=d<<1^(d>>>7)*285,d^=(u>>>f&1)*c;return a(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];a(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function n(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class Fs{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new Fs(Fs.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!Fs.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const f=Math.min(c.length-d,3);r(parseInt(c.substring(d,d+f),10),f*3+1,u),d+=f}return new Fs(Fs.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!Fs.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let f=Fs.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;f+=Fs.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(f,11,u)}return d<c.length&&r(Fs.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new Fs(Fs.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:Fs.isNumeric(c)?[Fs.makeNumeric(c)]:Fs.isAlphanumeric(c)?[Fs.makeAlphanumeric(c)]:[Fs.makeBytes(Fs.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new Fs(Fs.Mode.ECI,0,u)}static isNumeric(c){return Fs.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Fs.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const f of c){const A=f.mode.numCharCountBits(u);if(f.numChars>=1<<A)return 1/0;d+=4+A+f.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substring(d+1,d+3),16)),d+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;t.QrSegment=i})(Im||(Im={}));(t=>{(e=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Im||(Im={}));(t=>{(e=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Im||(Im={}));var Mg=Im;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var exe={L:Mg.QrCode.Ecc.LOW,M:Mg.QrCode.Ecc.MEDIUM,Q:Mg.QrCode.Ecc.QUARTILE,H:Mg.QrCode.Ecc.HIGH},WG=128,GG="L",qG="#FFFFFF",KG="#000000",YG=!1,XG=1,txe=4,rxe=0,nxe=.1;function JG(t,e=0){const r=[];return t.forEach(function(n,a){let i=null;n.forEach(function(o,l){if(!o&&i!==null){r.push(`M${i+e} ${a+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!o)return;i===null?r.push(`M${l+e},${a+e} h1v1H${l+e}z`):r.push(`M${i+e},${a+e} h${l+1-i}v1H${i+e}z`);return}o&&i===null&&(i=l)})}),r.join("")}function ZG(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((a,i)=>i<e.x||i>=e.x+e.w?a:!1))}function sxe(t,e,r,n){if(n==null)return null;const a=t.length+r*2,i=Math.floor(e*nxe),o=a/e,l=(n.width||i)*o,c=(n.height||i)*o,u=n.x==null?t.length/2-l/2:n.x*o,d=n.y==null?t.length/2-c/2:n.y*o,f=n.opacity==null?1:n.opacity;let A=null;if(n.excavate){let m=Math.floor(u),p=Math.floor(d),g=Math.ceil(l+u-m),x=Math.ceil(c+d-p);A={x:m,y:p,w:g,h:x}}const h=n.crossOrigin;return{x:u,y:d,h:c,w:l,excavation:A,opacity:f,crossOrigin:h}}function axe(t,e){return e!=null?Math.max(Math.floor(e),0):t?txe:rxe}function eq({value:t,level:e,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:o,boostLevel:l}){let c=le.useMemo(()=>{const m=(Array.isArray(t)?t:[t]).reduce((p,g)=>(p.push(...Mg.QrSegment.makeSegments(g)),p),[]);return Mg.QrCode.encodeSegments(m,exe[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:u,margin:d,numCells:f,calculatedImageSettings:A}=le.useMemo(()=>{let h=c.getModules();const m=axe(n,a),p=h.length+m*2,g=sxe(h,o,m,i);return{cells:h,margin:m,numCells:p,calculatedImageSettings:g}},[c,o,i,n,a]);return{qrcode:c,margin:d,cells:u,numCells:f,calculatedImageSettings:A}}var ixe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),oxe=le.forwardRef(function(e,r){const n=e,{value:a,size:i=WG,level:o=GG,bgColor:l=qG,fgColor:c=KG,includeMargin:u=YG,minVersion:d=XG,boostLevel:f,marginSize:A,imageSettings:h}=n,p=uD(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=p,x=uD(p,["style"]),v=h==null?void 0:h.src,b=le.useRef(null),C=le.useRef(null),j=le.useCallback(M=>{b.current=M,typeof r=="function"?r(M):r&&(r.current=M)},[r]),[w,N]=le.useState(!1),{margin:E,cells:_,numCells:k,calculatedImageSettings:D}=eq({value:a,level:o,minVersion:d,boostLevel:f,includeMargin:u,marginSize:A,imageSettings:h,size:i});le.useEffect(()=>{if(b.current!=null){const M=b.current,R=M.getContext("2d");if(!R)return;let U=_;const z=C.current,Q=D!=null&&z!==null&&z.complete&&z.naturalHeight!==0&&z.naturalWidth!==0;Q&&D.excavation!=null&&(U=ZG(_,D.excavation));const H=window.devicePixelRatio||1;M.height=M.width=i*H;const q=i/k*H;R.scale(q,q),R.fillStyle=l,R.fillRect(0,0,k,k),R.fillStyle=c,ixe?R.fill(new Path2D(JG(U,E))):_.forEach(function(X,$){X.forEach(function(K,se){K&&R.fillRect(se+E,$+E,1,1)})}),D&&(R.globalAlpha=D.opacity),Q&&R.drawImage(z,D.x+E,D.y+E,D.w,D.h)}}),le.useEffect(()=>{N(!1)},[v]);const S=cD({height:i,width:i},g);let F=null;return v!=null&&(F=le.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{N(!0)},ref:C,crossOrigin:D==null?void 0:D.crossOrigin})),le.createElement(le.Fragment,null,le.createElement("canvas",cD({style:S,height:i,width:i,ref:j,role:"img"},x)),F)});oxe.displayName="QRCodeCanvas";var tq=le.forwardRef(function(e,r){const n=e,{value:a,size:i=WG,level:o=GG,bgColor:l=qG,fgColor:c=KG,includeMargin:u=YG,minVersion:d=XG,boostLevel:f,title:A,marginSize:h,imageSettings:m}=n,p=uD(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:x,numCells:v,calculatedImageSettings:b}=eq({value:a,level:o,minVersion:d,boostLevel:f,includeMargin:u,marginSize:h,imageSettings:m,size:i});let C=x,j=null;m!=null&&b!=null&&(b.excavation!=null&&(C=ZG(x,b.excavation)),j=le.createElement("image",{href:m.src,height:b.h,width:b.w,x:b.x+g,y:b.y+g,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const w=JG(C,g);return le.createElement("svg",cD({height:i,width:i,viewBox:`0 0 ${v} ${v}`,ref:r,role:"img"},p),!!A&&le.createElement("title",null,A),le.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),le.createElement("path",{fill:c,d:w,shapeRendering:"crispEdges"}),j)});tq.displayName="QRCodeSVG";const lxe=({user:t,onSetupComplete:e})=>{const[r,n]=y.useState(1),[a,i]=y.useState(!1),[o,l]=y.useState(null),[c,u]=y.useState(""),[d,f]=y.useState(!1),A=async()=>{i(!0);try{const x=await pb.setup(t.email);l(x),n(2),ve.success("Configuration 2FA initialisée")}catch(x){ve.error(x.message)}finally{i(!1)}},h=async x=>{if(x.preventDefault(),c.length!==6){ve.error("Le code doit contenir 6 chiffres");return}i(!0);try{await pb.verifyAndEnable(c),n(4),ve.success("2FA activée avec succès !")}catch(v){ve.error(v.message)}finally{i(!1)}},m=()=>{navigator.clipboard.writeText(o.manualEntryKey),ve.success("Secret copié dans le presse-papiers")},p=()=>{const x=`Codes de récupération Mai Gestion - ${t.prenom} ${t.nom}
Date: ${new Date().toLocaleDateString()}

${o.backupCodes.join(`
`)}

⚠️ Conservez ces codes dans un endroit sûr.
Chaque code ne peut être utilisé qu'une seule fois.`,v=new Blob([x],{type:"text/plain"}),b=URL.createObjectURL(v),C=document.createElement("a");C.href=b,C.download=`mai-gestion-backup-codes-${Date.now()}.txt`,C.click(),URL.revokeObjectURL(b),ve.success("Codes de récupération téléchargés")},g=()=>{e()};return s.jsxs("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4",style:{backgroundColor:"#f0f4e8",border:"1px solid #d9e2c4"},children:s.jsx(Nd,{className:"w-8 h-8",style:{color:"#6b7c3d"}})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"#000000"},children:"Authentification à deux facteurs"}),s.jsx("p",{style:{color:"#333333"},children:"Sécurisez votre compte avec la 2FA"})]}),r===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-lg p-4",style:{backgroundColor:"#f0f4e8",border:"1px solid #d9e2c4"},children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(dh,{className:"w-5 h-5 mt-0.5",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",style:{color:"#000000"},children:"Pourquoi activer la 2FA ?"}),s.jsx("p",{className:"text-sm mt-1",style:{color:"#333333"},children:"La 2FA ajoute une couche de sécurité supplémentaire à votre compte en demandant un code de votre téléphone en plus de votre mot de passe."})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold",style:{color:"#000000"},children:"Vous aurez besoin de :"}),s.jsxs("div",{className:"flex items-center space-x-3",style:{color:"#333333"},children:[s.jsx(_N,{className:"w-5 h-5"}),s.jsx("span",{children:"Une application d'authentification (Google Authenticator, Authy, etc.)"})]})]}),s.jsx("button",{onClick:A,disabled:a,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:x=>!a&&(x.target.style.backgroundColor="#556533"),onMouseLeave:x=>!a&&(x.target.style.backgroundColor="#6b7c3d"),children:a?"Configuration...":"Commencer la configuration"})]}),r===2&&o&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"#000000"},children:"Scanner le QR code"}),s.jsx("p",{className:"text-sm mb-4",style:{color:"#333333"},children:"Utilisez votre application d'authentification pour scanner ce code :"}),s.jsx("div",{className:"bg-white p-4 rounded-lg inline-block",children:s.jsx(tq,{value:o.qrCode,size:200,level:"M",includeMargin:!0})})]}),s.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"#faf6f0",border:"1px solid #f0e6d2"},children:[s.jsx("h4",{className:"font-semibold mb-2",style:{color:"#000000"},children:"Configuration manuelle"}),s.jsx("p",{className:"text-sm mb-2",style:{color:"#333333"},children:"Si vous ne pouvez pas scanner le QR code, saisissez cette clé manuellement :"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("code",{className:"flex-1 bg-white border rounded px-3 py-2 text-sm font-mono",style:{borderColor:"#d1d5db",color:"#374151"},children:o.manualEntryKey}),s.jsx("button",{onClick:m,className:"p-2 hover:opacity-70 transition-opacity",style:{color:"#6b7c3d"},title:"Copier la clé",children:s.jsx(Sae,{className:"w-4 h-4"})})]})]}),s.jsx("button",{onClick:()=>n(3),className:"w-full text-white font-semibold py-3 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:x=>x.target.style.backgroundColor="#556533",onMouseLeave:x=>x.target.style.backgroundColor="#6b7c3d",children:"J'ai configuré l'application"})]}),r===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"#000000"},children:"Vérifier la configuration"}),s.jsx("p",{className:"text-sm mb-4",style:{color:"#333333"},children:"Entrez le code à 6 chiffres généré par votre application :"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsx("div",{children:s.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"w-full text-center text-2xl font-mono tracking-widest border rounded-lg px-4 py-3 bg-white focus:ring-2 focus:border-transparent",style:{borderColor:"#d1d5db",color:"#374151",focusRingColor:"#6b7c3d",outline:"none"},onFocus:x=>x.target.style.borderColor="#6b7c3d",onBlur:x=>x.target.style.borderColor="#d1d5db",maxLength:6,autoComplete:"off"})}),s.jsx("button",{type:"submit",disabled:a||c.length!==6,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:x=>!a&&c.length===6&&(x.target.style.backgroundColor="#556533"),onMouseLeave:x=>!a&&(x.target.style.backgroundColor="#6b7c3d"),children:a?"Vérification...":"Vérifier et activer"})]}),s.jsx("button",{onClick:()=>n(2),className:"w-full py-2 hover:opacity-70 transition-opacity",style:{color:"#333333"},children:"Retour au QR code"})]}),r===4&&o&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(jh,{className:"w-16 h-16 mx-auto mb-4",style:{color:"#6b7c3d"}}),s.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"#000000"},children:"2FA activée avec succès !"}),s.jsx("p",{className:"text-sm mb-4",style:{color:"#333333"},children:"Sauvegardez ces codes de récupération dans un endroit sûr :"})]}),s.jsx("div",{className:"rounded-lg p-4",style:{backgroundColor:"#f5f0e8",border:"1px solid #e8dcc0"},children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(dh,{className:"w-5 h-5 mt-0.5",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",style:{color:"#000000"},children:"Important !"}),s.jsx("p",{className:"text-sm mt-1",style:{color:"#333333"},children:"Ces codes vous permettront de récupérer l'accès à votre compte si vous perdez votre téléphone. Chaque code ne peut être utilisé qu'une seule fois."})]})]})}),s.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"#faf6f0",border:"1px solid #f0e6d2"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold",style:{color:"#000000"},children:"Codes de récupération"}),s.jsxs("button",{onClick:()=>f(!d),className:"flex items-center space-x-1 hover:opacity-70 transition-opacity",style:{color:"#6b7c3d"},children:[d?s.jsx(qb,{className:"w-4 h-4"}):s.jsx(ix,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:d?"Masquer":"Afficher"})]})]}),d&&s.jsx("div",{className:"grid grid-cols-2 gap-2 font-mono text-sm",children:o.backupCodes.map((x,v)=>s.jsx("div",{className:"bg-white border rounded px-3 py-2 text-center",style:{borderColor:"#d1d5db",color:"#374151"},children:x},v))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:p,className:"flex-1 flex items-center justify-center space-x-2 font-semibold py-3 px-4 rounded-lg transition-colors",style:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",fontSize:"13px",fontWeight:"500",minHeight:"36px"},children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{children:"Télécharger"})]}),s.jsx("button",{onClick:g,className:"flex-1 text-white font-semibold py-3 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:x=>x.target.style.backgroundColor="#556533",onMouseLeave:x=>x.target.style.backgroundColor="#6b7c3d",children:"Terminer"})]})]})]})},cxe=({user:t})=>{const[e,r]=y.useState(null),[n,a]=y.useState(!0),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(null),[f,A]=y.useState(!1),h=async()=>{a(!0);try{const b=await pb.getStatus();r(b)}catch(b){ve.error("Erreur lors du chargement du statut 2FA"),console.error(b)}finally{a(!1)}};y.useEffect(()=>{h()},[]);const m=()=>{o(!0)},p=()=>{o(!1),h(),ve.success("2FA configurée avec succès !")},g=async()=>{a(!0);try{await pb.disable(),await h(),c(!1),ve.success("2FA désactivée avec succès")}catch(b){ve.error(b.message)}finally{a(!1)}},x=async()=>{a(!0);try{const b=await pb.regenerateBackupCodes();d(b.backupCodes),await h(),ve.success("Nouveaux codes de récupération générés")}catch(b){ve.error(b.message)}finally{a(!1)}},v=b=>{const C=`Codes de récupération Mai Gestion - ${t.prenom} ${t.nom}
Date: ${new Date().toLocaleDateString()}

${b.join(`
`)}

⚠️ Conservez ces codes dans un endroit sûr.
Chaque code ne peut être utilisé qu'une seule fois.`,j=new Blob([C],{type:"text/plain"}),w=URL.createObjectURL(j),N=document.createElement("a");N.href=w,N.download=`mai-gestion-backup-codes-${Date.now()}.txt`,N.click(),URL.revokeObjectURL(w),ve.success("Codes de récupération téléchargés")};return n&&!e?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#6b7c3d"}})}):i||!(e!=null&&e.isConfigured)&&!n?s.jsx(lxe,{user:t,onSetupComplete:p}):s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[e!=null&&e.isEnabled?s.jsx(g2,{className:"w-8 h-8",style:{color:"#6b7c3d"}}):s.jsx(y4,{className:"w-8 h-8",style:{color:"#dc2626"}}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",style:{color:"#000000"},children:"Authentification à deux facteurs"}),s.jsx("p",{className:"text-sm",style:{color:"#333333"},children:e!=null&&e.isEnabled?"Activée et protégeant votre compte":"Désactivée"})]})]}),s.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:e!=null&&e.isEnabled?"#f0f4e8":"#fee2e2",border:e!=null&&e.isEnabled?"1px solid #d9e2c4":"1px solid #fecaca",color:e!=null&&e.isEnabled?"#000000":"#dc2626"},children:e!=null&&e.isEnabled?"Activée":"Désactivée"})]}),(e==null?void 0:e.isEnabled)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.lastUsed&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg",style:{backgroundColor:"#f5f0e8",border:"1px solid #e8dcc0"},children:[s.jsx(Il,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#000000"},children:"Dernière utilisation"}),s.jsx("p",{className:"text-xs",style:{color:"#333333"},children:new Date(e.lastUsed).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg",style:{backgroundColor:"#faf6f0",border:"1px solid #f0e6d2"},children:[s.jsx(tz,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",style:{color:"#000000"},children:"Codes de récupération"}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[e.backupCodesCount," code(s) disponible(s)"]})]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:e!=null&&e.isEnabled?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:x,disabled:n,className:"flex items-center space-x-2 disabled:opacity-50 text-white font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:b=>!n&&(b.target.style.backgroundColor="#556533"),onMouseLeave:b=>!n&&(b.target.style.backgroundColor="#6b7c3d"),children:[s.jsx(Cm,{className:`w-4 h-4 ${n?"animate-spin":""}`}),s.jsx("span",{children:"Régénérer les codes"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",fontSize:"13px",fontWeight:"500",minHeight:"36px"},children:[s.jsx(y4,{className:"w-4 h-4"}),s.jsx("span",{children:"Désactiver la 2FA"})]})]}):s.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-white font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:b=>b.target.style.backgroundColor="#556533",onMouseLeave:b=>b.target.style.backgroundColor="#6b7c3d",children:[s.jsx(Nd,{className:"w-4 h-4"}),s.jsx("span",{children:"Activer la 2FA"})]})})]}),u&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(rz,{className:"w-6 h-6",style:{color:"#6b7c3d"}}),s.jsx("h3",{className:"text-lg font-semibold",style:{color:"#000000"},children:"Nouveaux codes de récupération"})]}),s.jsx("div",{className:"rounded-lg p-4 mb-4",style:{backgroundColor:"#f5f0e8",border:"1px solid #e8dcc0"},children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(wu,{className:"w-5 h-5 mt-0.5",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",style:{color:"#000000"},children:"Sauvegardez ces codes !"}),s.jsx("p",{className:"text-sm mt-1",style:{color:"#333333"},children:"Ces nouveaux codes remplacent les anciens. Sauvegardez-les dans un endroit sûr."})]})]})}),s.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"#faf6f0",border:"1px solid #f0e6d2"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold",style:{color:"#000000"},children:"Codes de récupération"}),s.jsxs("button",{onClick:()=>A(!f),className:"flex items-center space-x-1 hover:opacity-70 transition-opacity",style:{color:"#6b7c3d"},children:[f?s.jsx(qb,{className:"w-4 h-4"}):s.jsx(ix,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:f?"Masquer":"Afficher"})]})]}),f&&s.jsx("div",{className:"grid grid-cols-2 gap-2 font-mono text-sm mb-4",children:u.map((b,C)=>s.jsx("div",{className:"bg-white border rounded px-3 py-2 text-center",style:{borderColor:"#d1d5db",color:"#374151"},children:b},C))}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>v(u),className:"flex items-center space-x-2 text-white font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#6b7c3d",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:b=>b.target.style.backgroundColor="#556533",onMouseLeave:b=>b.target.style.backgroundColor="#6b7c3d",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{children:"Télécharger"})]}),s.jsx("button",{onClick:()=>d(null),className:"font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",fontSize:"13px",fontWeight:"500",minHeight:"36px"},children:"J'ai sauvegardé les codes"})]})]})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(wu,{className:"w-6 h-6",style:{color:"#dc2626"}}),s.jsx("h3",{className:"text-lg font-semibold",style:{color:"#000000"},children:"Désactiver la 2FA"})]}),s.jsx("p",{className:"mb-6",style:{color:"#333333"},children:"Êtes-vous sûr de vouloir désactiver l'authentification à deux facteurs ? Cela réduira la sécurité de votre compte."}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>c(!1),className:"flex-1 font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",fontSize:"13px",fontWeight:"500",minHeight:"36px"},children:"Annuler"}),s.jsx("button",{onClick:g,disabled:n,className:"flex-1 disabled:opacity-50 text-white font-semibold py-2 px-4 rounded-lg transition-colors",style:{backgroundColor:"#dc2626",border:"none",fontSize:"13px",fontWeight:"500",minHeight:"36px"},onMouseEnter:b=>!n&&(b.target.style.backgroundColor="#b91c1c"),onMouseLeave:b=>!n&&(b.target.style.backgroundColor="#dc2626"),children:n?"Désactivation...":"Désactiver"})]})]})})]})},q1={changePassword:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/change-password",t);return n}catch(n){throw new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors du changement de mot de passe")}},validatePassword:async t=>{var e,r;try{const{data:n}=await Ee.post("/auth/validate-password",{password:t});return n}catch(n){throw new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la validation du mot de passe")}},getLoginHistory:async(t=1,e=20)=>{var r,n;try{const{data:a}=await Ee.get("/auth/login-history",{params:{page:t,limit:e}});return a}catch(a){throw new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la récupération de l'historique")}},getActiveSessions:async()=>{var t,e;try{const{data:r}=await Ee.get("/auth/active-sessions");return r}catch(r){throw new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des sessions")}},terminateSession:async t=>{var e,r;try{const{data:n}=await Ee.post(`/auth/terminate-session/${t}`);return n}catch(n){throw new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la déconnexion de la session")}},logoutAllSessions:async()=>{var t,e;try{const{data:r}=await Ee.post("/auth/logout-all");return r}catch(r){throw new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la déconnexion des sessions")}},getSecuritySettings:async()=>{var t,e;try{const{data:r}=await Ee.get("/auth/security-settings");return r}catch(r){throw new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des paramètres de sécurité")}},getDeviceInfo:()=>{const e=new UAParser().getResult();return{browser:`${e.browser.name} ${e.browser.version}`,os:`${e.os.name} ${e.os.version}`,device:e.device.type||"Desktop",userAgent:navigator.userAgent}},getClientIP:async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"Non disponible"}},calculatePasswordStrength:t=>{let e=0,r=[];if(!t)return{score:0,strength:"Très faible",feedback:["Mot de passe requis"]};t.length>=8?e+=1:r.push("Au moins 8 caractères"),t.length>=12&&(e+=1),/[A-Z]/.test(t)?e+=1:r.push("Au moins une majuscule"),/[a-z]/.test(t)?e+=1:r.push("Au moins une minuscule"),/\d/.test(t)?e+=1:r.push("Au moins un chiffre"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)?e+=1:r.push("Au moins un caractère spécial");let n="Très faible";return e>=5?n="Très forte":e>=4?n="Forte":e>=3?n="Moyenne":e>=2&&(n="Faible"),{score:e,strength:n,feedback:r}},formatLastLogin:t=>{if(!t)return"Jamais";const e=new Date,r=new Date(t),n=Math.floor((e-r)/(1e3*60));if(n<1)return"À l'instant";if(n<60)return`Il y a ${n} minute${n>1?"s":""}`;const a=Math.floor(n/60);if(a<24)return`Il y a ${a} heure${a>1?"s":""}`;const i=Math.floor(a/24);return i<30?`Il y a ${i} jour${i>1?"s":""}`:r.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}},uxe=()=>{const{user:t}=Ya(),e=()=>{const[a,i]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=y.useState(!1),c=d=>{i({...a,[d.target.name]:d.target.value})},u=async d=>{if(d.preventDefault(),a.newPassword!==a.confirmPassword){ve.error("Le nouveau mot de passe et sa confirmation ne correspondent pas.");return}if(a.newPassword.length<8){ve.error("Le nouveau mot de passe doit contenir au moins 8 caractères.");return}l(!0);const f=cc.changePassword({currentPassword:a.currentPassword,newPassword:a.newPassword});ve.promise(f,{loading:"Changement de mot de passe en cours...",success:A=>(i({currentPassword:"",newPassword:"",confirmPassword:""}),"Mot de passe changé avec succès !"),error:A=>A.message||"Une erreur est survenue.",finally:()=>l(!1)})};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-stone-200/50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(rz,{className:"w-6 h-6 text-stone-600"}),s.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Gestion du mot de passe"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"rounded-lg p-4 bg-stone-50 border border-stone-200",children:[s.jsx("h3",{className:"font-semibold mb-2 text-stone-800",children:"Force du mot de passe actuel"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-1 rounded-full h-2 bg-stone-200",children:s.jsx("div",{className:"h-2 rounded-full w-4/5",style:{backgroundColor:"#6b7c3d"}})}),s.jsx("span",{className:"text-sm font-medium",style:{color:"#6b7c3d"},children:"Fort"})]}),s.jsx("p",{className:"text-sm mt-2 text-stone-600",children:"Votre mot de passe respecte les critères de sécurité recommandés."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-4 text-stone-800",children:"Changer le mot de passe"}),s.jsxs("form",{className:"space-y-4",onSubmit:u,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-stone-700",htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx("input",{id:"currentPassword",name:"currentPassword",type:"password",value:a.currentPassword,onChange:c,className:"w-full border rounded-lg px-3 py-2 bg-white focus:ring-2 focus:ring-olive-500 focus:border-transparent transition-colors",placeholder:"Votre mot de passe actuel",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-stone-700",htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx("input",{id:"newPassword",name:"newPassword",type:"password",value:a.newPassword,onChange:c,className:"w-full border rounded-lg px-3 py-2 bg-white focus:ring-2 focus:ring-olive-500 focus:border-transparent transition-colors",placeholder:"Votre nouveau mot de passe",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-stone-700",htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:c,className:"w-full border rounded-lg px-3 py-2 bg-white focus:ring-2 focus:ring-olive-500 focus:border-transparent transition-colors",placeholder:"Confirmer le nouveau mot de passe",required:!0})]}),s.jsx("button",{type:"submit",className:"text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",style:{backgroundColor:"#6b7c3d"},disabled:o,children:o?"Changement en cours...":"Changer le mot de passe"})]})]})]})]})},r=()=>{const[a,i]=y.useState([]),[o,l]=y.useState(!0),c=async()=>{l(!0);try{const f=await q1.getActiveSessions();if(!f.some(A=>A.isCurrent)){const A={id:"current_session_mock",ipAddress:"127.0.0.1",userAgent:navigator.userAgent,lastActivity:new Date().toISOString(),isCurrent:!0,location:"Paris, France (simulé)",device:"Cet appareil"};f.unshift(A)}i(f)}catch(f){ve.error(f.message||"Erreur lors du chargement des sessions.")}finally{l(!1)}};y.useEffect(()=>{c()},[]);const u=async f=>{const A=q1.terminateSession(f).then(()=>{c()});ve.promise(A,{loading:"Déconnexion de la session...",success:"Session déconnectée avec succès.",error:"Erreur lors de la déconnexion."})},d=()=>{const f=q1.logoutAllSessions().then(()=>{c()});ve.promise(f,{loading:"Déconnexion de toutes les autres sessions...",success:"Toutes les autres sessions ont été déconnectées.",error:"Erreur lors de la déconnexion de masse."})};return o?s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{children:"Chargement des sessions..."})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-stone-200/50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(cm,{className:"w-6 h-6 text-stone-600"}),s.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Sessions actives"})]}),s.jsx("div",{className:"space-y-4",children:a.map(f=>s.jsx("div",{className:`rounded-lg p-4 border ${f.isCurrent?"bg-olive-100/50 border-olive-200":"bg-stone-50 border-stone-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${f.isCurrent?"bg-olive-600 text-white":"bg-stone-200 text-stone-600"}`,children:s.jsx(_N,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-stone-800",children:f.device||"Appareil inconnu"}),s.jsx("p",{className:"text-sm text-stone-600",children:f.location||"Lieu inconnu"}),s.jsxs("p",{className:`text-xs ${f.isCurrent?"font-semibold text-olive-700":"text-stone-500"}`,children:["Dernière activité: ",new Date(f.lastActivity).toLocaleString("fr-FR")]})]})]}),f.isCurrent?s.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Actif"}):s.jsx("button",{onClick:()=>u(f.id),className:"text-sm font-medium text-red-600 hover:text-red-800 transition-colors",children:"Déconnecter"})]})},f.id))}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:d,className:"text-sm font-medium text-red-600 hover:text-red-800 transition-colors p-2 rounded-lg hover:bg-red-50",children:"Déconnecter toutes les autres sessions"})})]})},n=()=>{const[a,i]=y.useState([]),[o,l]=y.useState(!0),c=async()=>{l(!0);try{const u=await q1.getLoginHistory();i(u)}catch(u){ve.error(u.message||"Erreur lors du chargement de l'historique.")}finally{l(!1)}};return y.useEffect(()=>{c()},[]),o?s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{children:"Chargement de l'historique..."})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-stone-200/50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(Eae,{className:"w-6 h-6 text-stone-600"}),s.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Historique de sécurité"})]}),s.jsx("ul",{className:"space-y-4",children:a.map(u=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[u.isSuccess?s.jsx(g2,{className:"w-5 h-5 text-green-600"}):s.jsx(y4,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-stone-700",children:u.isSuccess?"Connexion réussie":"Échec de la connexion"}),s.jsx("p",{className:"text-sm text-stone-500",children:new Date(u.createdAt).toLocaleString("fr-FR")})]})]}),s.jsxs("p",{className:"text-sm text-stone-500",children:["IP: ",u.ipAddress]})]},u.id))}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{className:"text-sm font-medium text-olive-700 hover:text-olive-900 transition-colors",children:"Voir tout l'historique"})})]})};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-stone-200/50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Nd,{className:"w-6 h-6 text-stone-600"}),s.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Authentification à deux facteurs (2FA)"})]}),s.jsx(cxe,{})]}),s.jsx(e,{}),s.jsx(r,{}),s.jsx(n,{})]})},dxe=()=>{const[t,e]=y.useState(!1),[r,n]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState({}),c=()=>{const f={};return a?/^\S+@\S+$/.test(a)||(f.email="Format d'email invalide"):f.email="L'email est requis",l(f),Object.keys(f).length===0},u=async f=>{if(f.preventDefault(),!!c()){e(!0);try{await cc.forgotPassword(a),n(!0),ve.success("Email envoyé",{description:"Si votre adresse email est enregistrée, vous recevrez un lien de réinitialisation"})}catch(A){console.error("Erreur lors de la demande de réinitialisation:",A),ve.error("Erreur",{description:"Une erreur est survenue lors de la demande de réinitialisation"})}finally{e(!1)}}},d=f=>{i(f.target.value),o.email&&l(A=>({...A,email:""}))};return s.jsx("div",{children:r?s.jsxs("div",{className:"flex items-start space-x-3 p-4 mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[s.jsx(Ls,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Email envoyé"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Si votre adresse email est enregistrée, vous recevrez un lien de réinitialisation. Veuillez vérifier votre boîte de réception et vos courriers indésirables."})]})]}):s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Entrez votre adresse email ci-dessous et nous vous enverrons un lien pour réinitialiser votre mot de passe."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse email"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Mk,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"email",value:a,onChange:d,className:`modern-input pl-10 ${o.email?"border-red-500":""}`,placeholder:"votre.email@exemple.com",disabled:t,required:!0})]}),o.email&&s.jsx("p",{className:"text-sm text-red-600",children:o.email})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4",children:[s.jsxs(Xi,{to:"/auth/login",className:"inline-flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[s.jsx(Ci,{className:"w-4 h-4"}),s.jsx("span",{children:"Retour à la connexion"})]}),s.jsx(Xe,{type:"submit",loading:t,disabled:t,variant:"primary",children:"Envoyer le lien"})]})]})})},fxe=({password:t})=>{if(!t)return null;const e=[{re:/[0-9]/,label:"Contient des chiffres"},{re:/[a-z]/,label:"Contient des lettres minuscules"},{re:/[A-Z]/,label:"Contient des lettres majuscules"},{re:/[$&+,:;=?@#|'<>.^*()%!-]/,label:"Contient des caractères spéciaux"}],r=e.filter(i=>i.re.test(t)).length,n=()=>r===0?"bg-red-500":r===1?"bg-orange-500":r===2?"bg-yellow-500":r===3?"bg-lime-500":"bg-green-500",a=e.map((i,o)=>s.jsxs("div",{className:`flex items-center space-x-2 text-sm mt-2 ${i.re.test(t)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.re.test(t)?s.jsx(Gr,{className:"w-4 h-4"}):s.jsx(ls,{className:"w-4 h-4"}),s.jsx("span",{children:i.label})]},o));return s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${n()}`,style:{width:`${r/4*100}%`}})}),a]})},hxe=()=>{const{token:t}=Ka(),e=Fr(),{login:r}=Ya(),[n,a]=y.useState(!1),[i,o]=y.useState(!0),[l,c]=y.useState(!1),[u,d]=y.useState({password:"",confirmPassword:""}),[f,A]=y.useState(!1),[h,m]=y.useState(!1),[p,g]=y.useState({});y.useEffect(()=>{t||(o(!1),ve.error("Erreur",{description:"Token de réinitialisation manquant ou invalide"}))},[t]);const x=()=>{const C={};return u.password?u.password.length<6?C.password="Le mot de passe doit contenir au moins 6 caractères":[{re:/[0-9]/},{re:/[a-z]/},{re:/[A-Z]/},{re:/[$&+,:;=?@#|'<>.^*()%!-]/}].filter(N=>N.re.test(u.password)).length<2&&(C.password="Le mot de passe est trop faible"):C.password="Le mot de passe est requis",u.confirmPassword?u.confirmPassword!==u.password&&(C.confirmPassword="Les mots de passe ne correspondent pas"):C.confirmPassword="La confirmation est requise",g(C),Object.keys(C).length===0},v=C=>{const{name:j,value:w}=C.target;d(N=>({...N,[j]:w})),p[j]&&g(N=>({...N,[j]:""}))},b=async C=>{if(C.preventDefault(),!!x()){a(!0);try{const j=await cc.resetPassword(t,u.password);c(!0),j.token&&setTimeout(()=>{r({token:j.token}),e("/")},2e3),ve.success("Succès",{description:"Votre mot de passe a été réinitialisé avec succès"})}catch(j){console.error("Erreur lors de la réinitialisation du mot de passe:",j),j.message==="Token invalide ou expiré"&&o(!1),ve.error("Erreur",{description:j.message||"Une erreur est survenue lors de la réinitialisation du mot de passe"})}finally{a(!1)}}};return i?l?s.jsx("div",{className:"flex items-start space-x-3 p-4 mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100 mb-1",children:"Mot de passe réinitialisé"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Votre mot de passe a été réinitialisé avec succès. Vous allez être connecté automatiquement..."})]})}):s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Entrez votre nouveau mot de passe ci-dessous pour réinitialiser votre compte."}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(w0,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:f?"text":"password",name:"password",value:u.password,onChange:v,className:`modern-input pl-10 pr-10 ${p.password?"border-red-500":""}`,placeholder:"Votre nouveau mot de passe",disabled:n,required:!0}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>A(!f),children:f?s.jsx(sD,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):s.jsx(ha,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),p.password&&s.jsx("p",{className:"text-sm text-red-600",children:p.password})]}),s.jsx(fxe,{password:u.password}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(w0,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:h?"text":"password",name:"confirmPassword",value:u.confirmPassword,onChange:v,className:`modern-input pl-10 pr-10 ${p.confirmPassword?"border-red-500":""}`,placeholder:"Confirmez votre nouveau mot de passe",disabled:n,required:!0}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?s.jsx(sD,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):s.jsx(ha,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),p.confirmPassword&&s.jsx("p",{className:"text-sm text-red-600",children:p.confirmPassword})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4",children:[s.jsxs(Xi,{to:"/auth/login",className:"inline-flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[s.jsx(Ci,{className:"w-4 h-4"}),s.jsx("span",{children:"Retour à la connexion"})]}),s.jsx(Xe,{type:"submit",loading:n,disabled:n,variant:"primary",children:"Réinitialiser le mot de passe"})]})]})]}):s.jsx("div",{className:"flex items-start space-x-3 p-4 mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-1",children:"Lien invalide ou expiré"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Le lien de réinitialisation de mot de passe est invalide ou a expiré. Veuillez demander un nouveau lien de réinitialisation."}),s.jsx("div",{className:"text-center",children:s.jsx(Xi,{to:"/auth/forgot-password",children:s.jsx(Xe,{variant:"secondary",children:"Demander un nouveau lien"})})})]})})},Axe=()=>{const{token:t}=Ka(),e=Fr(),[r,n]=y.useState(!0),[a,i]=y.useState(!1),[o,l]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t){l("Token de vérification manquant"),n(!1);return}try{await cc.verifyEmail(t),i(!0),ve.success("Email vérifié",{description:"Votre adresse email a été vérifiée avec succès"})}catch(d){console.error("Erreur lors de la vérification de l'email:",d),l(d.message||"Erreur lors de la vérification de l'email"),ve.error("Erreur de vérification",{description:d.message||"Une erreur est survenue lors de la vérification"})}finally{n(!1)}})()},[t]);const c=()=>{e("/auth/login")};return r?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx(hu,{className:"w-8 h-8 text-blue-500 animate-spin"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Vérification en cours..."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Veuillez patienter pendant que nous vérifions votre adresse email."})]}):a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:s.jsx(Gr,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Email vérifié avec succès !"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Votre adresse email a été vérifiée. Vous pouvez maintenant vous connecter."}),s.jsx(Xe,{onClick:c,variant:"primary",children:"Se connecter"})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:s.jsx(ls,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Erreur de vérification"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:o||"Une erreur est survenue lors de la vérification de votre email."}),s.jsxs("div",{className:"space-x-4",children:[s.jsx(Xi,{to:"/auth/login",children:s.jsx(Xe,{variant:"secondary",children:"Retour à la connexion"})}),s.jsx(Xi,{to:"/auth/register",children:s.jsx(Xe,{variant:"primary",children:"S'inscrire à nouveau"})})]})]})},zk=y.createContext(),j0=({defaultValue:t,value:e,onValueChange:r,children:n,className:a,...i})=>{const[o,l]=y.useState(t),c=e!==void 0?e:o,u=d=>{e===void 0&&l(d),r==null||r(d)};return s.jsx(zk.Provider,{value:{value:c,onValueChange:u},children:s.jsx("div",{className:`${a||""}`,...i,children:n})})},C0=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("div",{ref:n,className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${t||""}`,...r,children:e})),Vi=le.forwardRef(({className:t,children:e,value:r,disabled:n,...a},i)=>{const o=y.useContext(zk),l=(o==null?void 0:o.value)===r;return s.jsx("button",{ref:i,className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${l?"bg-white text-gray-950 shadow-sm":"hover:bg-gray-200"} ${t||""}`,disabled:n,onClick:()=>{var c;return!n&&((c=o==null?void 0:o.onValueChange)==null?void 0:c.call(o,r))},...a,children:e})}),Wi=le.forwardRef(({className:t,children:e,value:r,...n},a)=>{const i=y.useContext(zk);return(i==null?void 0:i.value)===r?s.jsx("div",{ref:a,className:`mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 ${t||""}`,...n,children:e}):null});j0.displayName="Tabs";C0.displayName="TabsList";Vi.displayName="TabsTrigger";Wi.displayName="TabsContent";const mxe=()=>{const{user:t,updateProfile:e}=Ya(),[r,n]=y.useState(!1),[a,i]=y.useState({prenom:"",nom:"",email:"",telephone:"",adresse:"",ville:"",codePostal:"",dateNaissance:"",poste:"",bio:""}),[o,l]=y.useState(null),[c,u]=y.useState(null);y.useEffect(()=>{var m,p,g,x,v,b;t&&(i({prenom:t.prenom||"",nom:t.nom||"",email:t.email||"",telephone:t.telephone||"",adresse:((m=t.profile)==null?void 0:m.adresse)||"",ville:((p=t.profile)==null?void 0:p.ville)||"",codePostal:((g=t.profile)==null?void 0:g.codePostal)||"",dateNaissance:(x=t.profile)!=null&&x.dateNaissance?t.profile.dateNaissance.split("T")[0]:"",poste:((v=t.profile)==null?void 0:v.poste)||"",bio:((b=t.profile)==null?void 0:b.bio)||""}),u(t.avatar||null))},[t]);const d=m=>{const{name:p,value:g}=m.target;i(x=>({...x,[p]:g}))},f=m=>{const p=m.target.files[0];if(p){if(p.size>5*1024*1024){ve.error("L'image ne doit pas dépasser 5MB");return}l(p);const g=new FileReader;g.onloadend=()=>{u(g.result)},g.readAsDataURL(p)}},A=()=>{l(null),u(null)},h=async m=>{m.preventDefault(),n(!0);try{const p={...a};if(o){const g=new FormData;Object.keys(p).forEach(x=>{g.append(x,p[x])}),g.append("avatar",o),await e(p)}else await e(p);ve.success("Profil mis à jour avec succès !")}catch(p){ve.error("Erreur lors de la mise à jour du profil"),console.error(p)}finally{n(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 mb-2",children:"Informations du profil"}),s.jsx("p",{className:"text-stone-600",children:"Gérez vos informations personnelles et votre photo de profil."})]}),s.jsxs("form",{onSubmit:h,className:"space-y-8",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(Bae,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Photo de profil"]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-stone-200 flex items-center justify-center",children:c?s.jsx("img",{src:c,alt:"Aperçu du profil",className:"w-full h-full object-cover"}):s.jsx(x2,{className:"w-12 h-12 text-stone-400"})}),c&&s.jsx("button",{type:"button",onClick:A,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Hh,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-stone-100 hover:bg-stone-200 text-stone-700 rounded-lg transition-colors",children:[s.jsx(J_,{className:"w-4 h-4"}),"Choisir une photo",s.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"hidden"})]}),s.jsx("p",{className:"text-sm text-stone-500",children:"JPG, PNG ou GIF. Maximum 5MB."})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(x2,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Informations personnelles"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Prénom *"}),s.jsx("input",{type:"text",name:"prenom",value:a.prenom,onChange:d,required:!0,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Nom *"}),s.jsx("input",{type:"text",name:"nom",value:a.nom,onChange:d,required:!0,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1 flex items-center gap-1",children:[s.jsx(Kb,{className:"w-4 h-4"}),"Email *"]}),s.jsx("input",{type:"email",name:"email",value:a.email,onChange:d,required:!0,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1 flex items-center gap-1",children:[s.jsx(Z_,{className:"w-4 h-4"}),"Téléphone"]}),s.jsx("input",{type:"tel",name:"telephone",value:a.telephone,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1 flex items-center gap-1",children:[s.jsx(Il,{className:"w-4 h-4"}),"Date de naissance"]}),s.jsx("input",{type:"date",name:"dateNaissance",value:a.dateNaissance,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1 flex items-center gap-1",children:[s.jsx(Tae,{className:"w-4 h-4"}),"Poste"]}),s.jsx("input",{type:"text",name:"poste",value:a.poste,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(nz,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Adresse"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Adresse"}),s.jsx("input",{type:"text",name:"adresse",value:a.adresse,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Ville"}),s.jsx("input",{type:"text",name:"ville",value:a.ville,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Code postal"}),s.jsx("input",{type:"text",name:"codePostal",value:a.codePostal,onChange:d,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-stone-800 mb-4",children:"À propos"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Biographie"}),s.jsx("textarea",{name:"bio",value:a.bio,onChange:d,rows:4,className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent resize-none",style:{backgroundColor:"#fefefe"},placeholder:"Parlez-nous un peu de vous..."}),s.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Maximum 500 caractères"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-6 py-3 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#6b7c3d",border:"none"},onMouseEnter:m=>!r&&(m.target.style.backgroundColor="#556533"),onMouseLeave:m=>!r&&(m.target.style.backgroundColor="#6b7c3d"),children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(eP,{className:"w-4 h-4"}),"Sauvegarder les modifications"]})})})]})]})},pxe=()=>{const{user:t}=Ya(),[e,r]=y.useState(!1),[n,a]=y.useState({emailNewConnection:!0,emailSecurityAlert:!0,emailProjectUpdate:!1,emailTaskAssigned:!0,emailReminder:!0,emailWeeklyReport:!1,pushNewConnection:!0,pushSecurityAlert:!0,pushProjectUpdate:!1,pushTaskAssigned:!0,pushReminder:!0,pushMessage:!0,inAppAll:!0,inAppSounds:!0,digestFrequency:"daily",quietHoursEnabled:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00"});y.useEffect(()=>{},[]);const i=f=>{a(A=>({...A,[f]:!A[f]}))},o=(f,A)=>{a(h=>({...h,[f]:A}))},l=async f=>{f.preventDefault(),r(!0);try{await new Promise(A=>setTimeout(A,1e3)),ve.success("Préférences de notification sauvegardées !")}catch(A){ve.error("Erreur lors de la sauvegarde des préférences"),console.error(A)}finally{r(!1)}},c=async()=>{"Notification"in window&&(await Notification.requestPermission()==="granted"?ve.success("Notifications autorisées !"):ve.error("Notifications refusées"))},u=({checked:f,onChange:A,disabled:h=!1})=>s.jsx("button",{type:"button",onClick:A,disabled:h,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-stone-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${f?"bg-stone-600":"bg-stone-200"}`,style:f?{backgroundColor:"#6b7c3d"}:{},children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})}),d=({icon:f,title:A,description:h,settingName:m,type:p="toggle",options:g=null})=>s.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-stone-200 last:border-b-0",children:[s.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[s.jsx(f,{className:"w-5 h-5 mt-0.5",style:{color:"#6b7c3d"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-stone-800",children:A}),s.jsx("p",{className:"text-sm text-stone-600 mt-1",children:h})]})]}),s.jsx("div",{className:"ml-4",children:p==="toggle"?s.jsx(u,{checked:n[m],onChange:()=>i(m)}):s.jsx("select",{value:n[m],onChange:x=>o(m,x.target.value),className:"px-3 py-1 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"},children:g.map(x=>s.jsx("option",{value:x.value,children:x.label},x.value))})})]});return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 mb-2",children:"Préférences de notification"}),s.jsx("p",{className:"text-stone-600",children:"Configurez comment et quand vous souhaitez être notifié."})]}),s.jsxs("form",{onSubmit:l,className:"space-y-8",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(Kb,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Notifications par email"]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(d,{icon:Nd,title:"Nouvelles connexions",description:"Être notifié lorsque votre compte est connecté depuis un nouvel appareil",settingName:"emailNewConnection"}),s.jsx(d,{icon:Nd,title:"Alertes de sécurité",description:"Notifications importantes concernant la sécurité de votre compte",settingName:"emailSecurityAlert"}),s.jsx(d,{icon:cm,title:"Mises à jour de projets",description:"Changements importants sur les projets auxquels vous participez",settingName:"emailProjectUpdate"}),s.jsx(d,{icon:v2,title:"Tâches assignées",description:"Nouvelles tâches qui vous sont assignées",settingName:"emailTaskAssigned"}),s.jsx(d,{icon:Il,title:"Rappels",description:"Rappels de deadlines et échéances importantes",settingName:"emailReminder"}),s.jsx(d,{icon:cm,title:"Rapport hebdomadaire",description:"Résumé de votre activité de la semaine",settingName:"emailWeeklyReport"})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 flex items-center gap-2",children:[s.jsx(_N,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Notifications push (navigateur)"]}),Notification.permission!=="granted"&&s.jsx("button",{type:"button",onClick:c,className:"px-3 py-1 text-sm bg-stone-100 hover:bg-stone-200 text-stone-700 rounded-lg transition-colors",children:"Autoriser"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(d,{icon:Nd,title:"Nouvelles connexions",description:"Notifications instantanées pour les nouvelles connexions",settingName:"pushNewConnection"}),s.jsx(d,{icon:Nd,title:"Alertes de sécurité",description:"Alertes de sécurité critiques",settingName:"pushSecurityAlert"}),s.jsx(d,{icon:cm,title:"Mises à jour de projets",description:"Notifications en temps réel des changements de projets",settingName:"pushProjectUpdate"}),s.jsx(d,{icon:v2,title:"Tâches assignées",description:"Notification immédiate des nouvelles tâches",settingName:"pushTaskAssigned"}),s.jsx(d,{icon:Il,title:"Rappels",description:"Rappels push pour les échéances",settingName:"pushReminder"}),s.jsx(d,{icon:tP,title:"Messages",description:"Nouveaux messages et communications",settingName:"pushMessage"})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(w4,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Préférences générales"]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(d,{icon:w4,title:"Toutes les notifications in-app",description:"Afficher les notifications dans l'interface de l'application",settingName:"inAppAll"}),s.jsx(d,{icon:n.inAppSounds?Dae:jR,title:"Sons de notification",description:"Jouer un son lors des notifications",settingName:"inAppSounds"}),s.jsx(d,{icon:Kb,title:"Fréquence des résumés",description:"À quelle fréquence recevoir un résumé par email",settingName:"digestFrequency",type:"select",options:[{value:"none",label:"Jamais"},{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"}]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(jR,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Heures de silence"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-800",children:"Activer les heures de silence"}),s.jsx("p",{className:"text-sm text-stone-600 mt-1",children:"Désactiver les notifications push pendant certaines heures"})]}),s.jsx(u,{checked:n.quietHoursEnabled,onChange:()=>i("quietHoursEnabled")})]}),n.quietHoursEnabled&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 p-4 bg-stone-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Début"}),s.jsx("input",{type:"time",value:n.quietHoursStart,onChange:f=>o("quietHoursStart",f.target.value),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Fin"}),s.jsx("input",{type:"time",value:n.quietHoursEnd,onChange:f=>o("quietHoursEnd",f.target.value),className:"w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"}})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:e,className:"flex items-center gap-2 px-6 py-3 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#6b7c3d",border:"none"},onMouseEnter:f=>!e&&(f.target.style.backgroundColor="#556533"),onMouseLeave:f=>!e&&(f.target.style.backgroundColor="#6b7c3d"),children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(eP,{className:"w-4 h-4"}),"Sauvegarder les préférences"]})})})]})]})},gxe=[{id:1,action:"Connexion réussie",type:"auth",createdAt:new Date(Date.now()-2*60*60*1e3).toISOString(),ipAddress:"192.168.1.10",location:"Paris, France",device:"Desktop",userAgent:"Chrome on macOS"},{id:2,action:"Mot de passe modifié",type:"security",createdAt:new Date(Date.now()-24*60*60*1e3).toISOString(),ipAddress:"192.168.1.10",location:"Paris, France",device:"Desktop",userAgent:"Chrome on macOS"},{id:3,action:'Affaire "Nouveau Siège Social" créée',type:"creation",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),ipAddress:"88.123.45.67",location:"Lyon, France",device:"Mobile",userAgent:"Safari on iOS"},{id:4,action:"2FA activée",type:"security",createdAt:new Date(Date.now()-5*24*60*60*1e3).toISOString(),ipAddress:"88.123.45.67",location:"Lyon, France",device:"Mobile",userAgent:"Safari on iOS"},{id:5,action:"Connexion échouée",type:"auth_fail",createdAt:new Date(Date.now()-5*24*60*60*1e3-10*60*1e3).toISOString(),ipAddress:"109.87.65.43",location:"Inconnue",device:"Unknown",userAgent:"Unknown"}],xxe=({type:t})=>({auth:s.jsx(oz,{className:"w-4 h-4 text-green-600"}),security:s.jsx(Nd,{className:"w-4 h-4 text-orange-500"}),creation:s.jsx(Iae,{className:"w-4 h-4 text-blue-500"}),update:s.jsx(Ym,{className:"w-4 h-4 text-yellow-500"}),deletion:s.jsx(Km,{className:"w-4 h-4 text-red-500"}),auth_fail:s.jsx(wu,{className:"w-4 h-4 text-red-600"})})[t]||s.jsx(cm,{className:"w-4 h-4 text-stone-500"}),vxe=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState({}),[o,l]=y.useState("all");y.useEffect(()=>{n(!0),setTimeout(()=>{e(gxe),n(!1)},1e3)},[]);const c=f=>{i(A=>({...A,[f]:!A[f]}))},u=t.filter(f=>o==="all"?!0:o==="security"?["security","auth_fail","auth"].includes(f.type):o==="actions"?["creation","update","deletion"].includes(f.type):!0),d=()=>{ve.info("Fonctionnalité d'export bientôt disponible !")};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 mb-2",children:"Historique d'activité"}),s.jsx("p",{className:"text-stone-600",children:"Consultez les actions et connexions récentes sur votre compte."})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sz,{className:"w-5 h-5 text-stone-500"}),s.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"px-3 py-1 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-stone-500 focus:border-transparent",style:{backgroundColor:"#fefefe"},children:[s.jsx("option",{value:"all",children:"Toute l'activité"}),s.jsx("option",{value:"security",children:"Sécurité & Connexions"}),s.jsx("option",{value:"actions",children:"Actions & Modifications"})]})]}),s.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-1 text-sm bg-stone-100 hover:bg-stone-200 text-stone-700 rounded-lg transition-colors",children:[s.jsx(ku,{className:"w-4 h-4"}),"Exporter"]})]}),r?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-800 mx-auto"}),s.jsx("p",{className:"mt-4 text-stone-600",children:"Chargement de l'historique..."})]}):s.jsx("div",{className:"space-y-2",children:u.map(f=>s.jsxs("div",{className:"bg-stone-50 rounded-lg p-3 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(f.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-stone-200 rounded-full",children:s.jsx(xxe,{type:f.type})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-stone-800",children:f.action}),s.jsxs("p",{className:"text-sm text-stone-600 flex items-center gap-1",children:[s.jsx(rP,{className:"w-3 h-3"}),new Date(f.createdAt).toLocaleString("fr-FR")]})]})]}),a[f.id]?s.jsx(az,{className:"w-5 h-5 text-stone-500"}):s.jsx(iz,{className:"w-5 h-5 text-stone-500"})]}),a[f.id]&&s.jsxs("div",{className:"mt-3 pt-3 pl-12 border-t border-stone-200 text-sm text-stone-700 space-y-2",children:[s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(nz,{className:"w-4 h-4",style:{color:"#6b7c3d"}})," ",s.jsx("strong",{children:"Lieu:"})," ",f.location]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(cm,{className:"w-4 h-4",style:{color:"#6b7c3d"}})," ",s.jsx("strong",{children:"IP:"})," ",f.ipAddress]}),s.jsxs("p",{className:"flex items-center gap-2",children:[f.device==="Desktop"?s.jsx(oz,{className:"w-4 h-4",style:{color:"#6b7c3d"}}):s.jsx(_N,{className:"w-4 h-4",style:{color:"#6b7c3d"}}),s.jsx("strong",{children:"Appareil:"})," ",f.userAgent]})]})]},f.id))}),!r&&u.length===0&&s.jsx("div",{className:"text-center py-8 text-stone-600",children:s.jsx("p",{children:"Aucune activité à afficher pour ce filtre."})})]})]})},bxe=()=>{const{user:t}=Ya(),[e,r]=y.useState({export:!1,delete:!1}),[n,a]=y.useState(!1),[i,o]=y.useState(""),l=async()=>{r(d=>({...d,export:!0}));try{await new Promise(d=>setTimeout(d,1500)),ve.success("Votre exportation de données a commencé. Vous recevrez un email lorsque ce sera prêt.")}catch{ve.error("Erreur lors de la demande d'exportation.")}finally{r(d=>({...d,export:!1}))}},c=async()=>{if(i!==`supprimer/${t.email}`){ve.error("Le texte de confirmation est incorrect.");return}r(d=>({...d,delete:!0}));try{await new Promise(d=>setTimeout(d,2e3)),ve.success("Votre compte a été supprimé avec succès.")}catch{ve.error("Erreur lors de la suppression du compte.")}finally{r(d=>({...d,delete:!1}))}},u=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(g2,{className:"w-5 h-5 mt-0.5 mr-3",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-800",children:"Consentement marketing"}),s.jsx("p",{className:"text-sm text-stone-600 mt-1",children:"Vous avez accepté de recevoir nos communications marketing."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(Qi,{className:"w-5 h-5 mt-0.5 mr-3",style:{color:"#6b7c3d"}}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-stone-800",children:"Conditions d'utilisation"}),s.jsx("p",{className:"text-sm text-stone-600 mt-1",children:"Vous avez accepté nos conditions d'utilisation lors de votre inscription."})]})]}),s.jsx("p",{className:"text-sm text-stone-500 italic",children:"Pour modifier vos consentements, veuillez contacter le support."})]});return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 mb-2",children:"Confidentialité et Données"}),s.jsx("p",{className:"text-stone-600",children:"Gérez vos données personnelles et la confidentialité de votre compte."})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(ku,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Exporter vos données"]}),s.jsx("p",{className:"text-stone-600 mb-4",children:"Vous pouvez demander une exportation de toutes les données que nous détenons vous concernant au format JSON."}),s.jsx("button",{onClick:l,disabled:e.export,className:"flex items-center gap-2 px-4 py-2 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:e.export?"#a8b884":"#6b7c3d",border:"none"},children:e.export?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Demande en cours..."]}):"Demander l'exportation"})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-lg border border-stone-200/50",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[s.jsx(g2,{className:"w-5 h-5",style:{color:"#6b7c3d"}}),"Gestion des consentements"]}),u()]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 p-6 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2",children:[s.jsx(wu,{className:"w-5 h-5"}),"Zone de danger"]}),s.jsx("p",{className:"text-red-700 mb-4",children:"La suppression de votre compte est une action irréversible. Toutes vos données seront définitivement perdues."}),n?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-red-800 font-medium",children:["Pour confirmer, veuillez taper ",s.jsx("code",{className:"bg-red-200 text-red-900 px-1 py-0.5 rounded font-mono",children:`supprimer/${t==null?void 0:t.email}`})," dans le champ ci-dessous."]}),s.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:c,disabled:e.delete||i!==`supprimer/${t==null?void 0:t.email}`,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.delete?"Suppression...":"Je confirme la suppression"}),s.jsx("button",{onClick:()=>a(!1),className:"flex-1 bg-stone-200 hover:bg-stone-300 text-stone-800 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Annuler"})]})]}):s.jsx("button",{onClick:()=>a(!0),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Supprimer mon compte"})]})]})]})},yxe=()=>s.jsx("div",{className:"min-h-screen bg-olive-100 p-4 sm:p-6 lg:p-8 font-sans",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("header",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-olive-800",style:{fontFamily:"'Georgia', 'serif'"},children:"Paramètres du Compte"}),s.jsx("p",{className:"text-lg text-stone-600 mt-2",children:"Gérez vos informations, votre sécurité et vos préférences."})]}),s.jsxs(j0,{defaultValue:"profile",className:"w-full",children:[s.jsxs(C0,{className:"bg-transparent p-0 border-b-2 border-olive-200",children:[s.jsxs(Vi,{value:"profile",className:"data-[state=active]:bg-olive-200 data-[state=active]:text-olive-800 text-stone-600 hover:bg-olive-100/50 flex items-center gap-2 px-4 py-3 text-base font-semibold transition-all rounded-t-lg border-b-2 border-transparent data-[state=active]:border-olive-500 -mb-px",children:[s.jsx(x2,{size:18})," Profil"]}),s.jsxs(Vi,{value:"security",className:"data-[state=active]:bg-olive-200 data-[state=active]:text-olive-800 text-stone-600 hover:bg-olive-100/50 flex items-center gap-2 px-4 py-3 text-base font-semibold transition-all rounded-t-lg border-b-2 border-transparent data-[state=active]:border-olive-500 -mb-px",children:[s.jsx(Nd,{size:18})," Sécurité"]}),s.jsxs(Vi,{value:"notifications",className:"data-[state=active]:bg-olive-200 data-[state=active]:text-olive-800 text-stone-600 hover:bg-olive-100/50 flex items-center gap-2 px-4 py-3 text-base font-semibold transition-all rounded-t-lg border-b-2 border-transparent data-[state=active]:border-olive-500 -mb-px",children:[s.jsx(w4,{size:18})," Notifications"]}),s.jsxs(Vi,{value:"privacy",className:"data-[state=active]:bg-olive-200 data-[state=active]:text-olive-800 text-stone-600 hover:bg-olive-100/50 flex items-center gap-2 px-4 py-3 text-base font-semibold transition-all rounded-t-lg border-b-2 border-transparent data-[state=active]:border-olive-500 -mb-px",children:[s.jsx(lz,{size:18})," Confidentialité"]}),s.jsxs(Vi,{value:"activity",className:"data-[state=active]:bg-olive-200 data-[state=active]:text-olive-800 text-stone-600 hover:bg-olive-100/50 flex items-center gap-2 px-4 py-3 text-base font-semibold transition-all rounded-t-lg border-b-2 border-transparent data-[state=active]:border-olive-500 -mb-px",children:[s.jsx(cm,{size:18})," Activité"]})]}),s.jsxs("div",{className:"bg-white/70 backdrop-blur-sm mt-4 p-6 rounded-lg shadow-lg border border-olive-200/50",children:[s.jsx(Wi,{value:"profile",children:s.jsx(mxe,{})}),s.jsx(Wi,{value:"security",children:s.jsx(uxe,{})}),s.jsx(Wi,{value:"notifications",children:s.jsx(pxe,{})}),s.jsx(Wi,{value:"privacy",children:s.jsx(bxe,{})}),s.jsx(Wi,{value:"activity",children:s.jsx(vxe,{})})]})]})]})}),wxe=async t=>{var e,r;try{const{data:n}=await Ee.post("/parametres",t);return n}catch(n){throw console.error("Erreur lors de la création du paramètre:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},jxe=async()=>{var t,e;try{const{data:r}=await Ee.get("/parametres");return r}catch(r){throw console.error("Erreur lors de la récupération des paramètres:",((t=r.response)==null?void 0:t.data)||r.message),((e=r.response)==null?void 0:e.data)||r}},Cxe=async t=>{var e,r;try{const{data:n}=await Ee.get(`/parametres/${t}`);return n}catch(n){throw console.error(`Erreur lors de la récupération du paramètre ${t}:`,((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Nxe=async(t,e)=>{var r,n;try{const{data:a}=await Ee.patch(`/parametres/${t}`,e);return a}catch(a){throw console.error(`Erreur lors de la mise à jour du paramètre ${t}:`,((r=a.response)==null?void 0:r.data)||a.message),((n=a.response)==null?void 0:n.data)||a}},Sxe=async t=>{var e,r;try{const{data:n}=await Ee.delete(`/parametres/${t}`);return n}catch(n){throw console.error(`Erreur lors de la suppression du paramètre ${t}:`,((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Exe=async()=>{var t,e;try{const{data:r}=await Ee.post("/parametres/initialize");return r}catch(r){throw console.error("Erreur lors de l'initialisation des paramètres par défaut:",((t=r.response)==null?void 0:t.data)||r.message),((e=r.response)==null?void 0:e.data)||r}},Bxe=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(null),o=async()=>{try{n(!0);const u=await jxe();e(u),i(null)}catch(u){i("Erreur lors du chargement des paramètres"),console.error(u)}finally{n(!1)}},l=async(u,d)=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer le paramètre "${d}" ?`))try{await Sxe(u),await o()}catch(f){i("Erreur lors de la suppression du paramètre"),console.error(f)}},c=async()=>{if(window.confirm("Êtes-vous sûr de vouloir initialiser les paramètres par défaut ?"))try{await Exe(),await o()}catch(u){i("Erreur lors de l'initialisation des paramètres par défaut"),console.error(u)}};return y.useEffect(()=>{o()},[]),r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Paramètres Globaux"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:c,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Initialiser par défaut"}),s.jsx(Xi,{to:"/parametres/nouveau",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Nouveau Paramètre"})]})]}),a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),s.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clé"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valeur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernière modification"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"Aucun paramètre trouvé"})}):t.map(u=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.cle})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:u.valeur})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900",children:u.description||"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:new Date(u.updatedAt).toLocaleDateString("fr-FR")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Xi,{to:`/parametres/${u.id}/modifier`,className:"text-indigo-600 hover:text-indigo-900",children:"Modifier"}),s.jsx("button",{onClick:()=>l(u.id,u.cle),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})})]},u.id))})]})})]})},g6=()=>{const t=Fr(),{id:e}=Ka(),r=!!e,[n,a]=y.useState({cle:"",valeur:"",description:""}),[i,o]=y.useState(!1),[l,c]=y.useState(null);y.useEffect(()=>{r&&u()},[e,r]);const u=async()=>{try{o(!0);const h=await Cxe(e);a({cle:h.cle,valeur:h.valeur,description:h.description||""}),c(null)}catch(h){c("Erreur lors du chargement du paramètre"),console.error(h)}finally{o(!1)}},d=h=>{const{name:m,value:p}=h.target;a(g=>({...g,[m]:p}))},f=async h=>{if(h.preventDefault(),!n.cle.trim()||!n.valeur.trim()){c("La clé et la valeur sont obligatoires");return}try{o(!0),c(null),r?await Nxe(e,n):await wxe(n),t("/parametres")}catch(m){c(m.message||"Erreur lors de la sauvegarde du paramètre"),console.error(m)}finally{o(!1)}},A=()=>{t("/parametres")};return i&&r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:r?"Modifier le Paramètre":"Nouveau Paramètre"}),l&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Clé *"}),s.jsx("input",{type:"text",id:"cle",name:"cle",value:n.cle,onChange:d,disabled:r,className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"Ex: TAUX_HORAIRE_DEFAUT",required:!0}),r&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"La clé ne peut pas être modifiée"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"valeur",className:"block text-sm font-medium text-gray-700 mb-2",children:"Valeur *"}),s.jsx("input",{type:"text",id:"valeur",name:"valeur",value:n.valeur,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 45.00",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:d,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Description du paramètre..."})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Sauvegarde...":r?"Modifier":"Créer"})]})]})]})})})},Txe=()=>{const[t,e]=y.useState({ENTREPRISE_NOM:"",ENTREPRISE_ADRESSE:"",ENTREPRISE_TEL:"",ENTREPRISE_EMAIL:"",ENTREPRISE_SIRET:"",ENTREPRISE_CODE_POSTAL:"",ENTREPRISE_VILLE:""}),[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,l]=y.useState(""),c=async()=>{n(!0);try{const g=localStorage.getItem("auth_token"),x=await fetch("/api/parametres",{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error("Erreur de chargement");const v=await x.json(),b={};v.forEach(C=>{C.cle.startsWith("ENTREPRISE_")&&(b[C.cle]=C.valeur||"")}),e(C=>({...C,...b}))}catch(g){console.error("Erreur lors du chargement des paramètres:",g),alert("Erreur lors du chargement des paramètres")}finally{n(!1)}},u=async(g,x)=>{try{const v=localStorage.getItem("auth_token"),b=await fetch(`/api/parametres/key/${g}`,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});let C;if(b.ok){const j=await b.json();C=await fetch(`/api/parametres/${j.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({valeur:x})})}else C=await fetch("/api/parametres",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({cle:g,valeur:x,description:m(g)})});if(!C.ok)throw new Error("Erreur de sauvegarde");return e(j=>({...j,[g]:x})),alert(`${h(g)} mis à jour !`),!0}catch(v){return console.error("Erreur lors de la sauvegarde:",v),alert("Erreur lors de la sauvegarde"),!1}},d=g=>{i(g),l(t[g]||"")},f=async()=>{await u(a,o)&&(i(null),l(""))},A=()=>{i(null),l("")},h=g=>({ENTREPRISE_NOM:"Nom de l'entreprise",ENTREPRISE_ADRESSE:"Adresse",ENTREPRISE_TEL:"Téléphone",ENTREPRISE_EMAIL:"Email",ENTREPRISE_SIRET:"SIRET",ENTREPRISE_CODE_POSTAL:"Code postal",ENTREPRISE_VILLE:"Ville"})[g]||g,m=g=>({ENTREPRISE_NOM:"Nom de l'entreprise affiché sur les documents",ENTREPRISE_ADRESSE:"Adresse complète de l'entreprise",ENTREPRISE_TEL:"Numéro de téléphone principal",ENTREPRISE_EMAIL:"Adresse email de contact",ENTREPRISE_SIRET:"Numéro SIRET de l'entreprise",ENTREPRISE_CODE_POSTAL:"Code postal",ENTREPRISE_VILLE:"Ville de l'entreprise"})[g]||"",p=g=>({ENTREPRISE_NOM:"Ex: MAI GESTION",ENTREPRISE_ADRESSE:"Ex: 123 Rue de la République",ENTREPRISE_TEL:"Ex: 01 23 45 67 89",ENTREPRISE_EMAIL:"Ex: contact@mai-gestion.fr",ENTREPRISE_SIRET:"Ex: 12345678901234",ENTREPRISE_CODE_POSTAL:"Ex: 75001",ENTREPRISE_VILLE:"Ex: Paris"})[g]||"";return y.useEffect(()=>{c()},[]),s.jsx("div",{className:"p-6 md:p-8 lg:p-10 bg-stone-50 min-h-screen",children:s.jsxs("div",{className:"w-full mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Paramètres Entreprise"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Configuration des informations de votre entreprise"}),s.jsx("button",{onClick:c,disabled:r,className:"mr-3 px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"🔄 Actualiser"})]}),s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"📋 Utilisation de ces paramètres"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:["• Ces informations apparaîtront sur tous vos ",s.jsx("strong",{children:"bons de commande PDF"})]}),s.jsx("li",{children:"• Elles remplacent les valeurs par défaut dans les documents officiels"}),s.jsx("li",{children:"• Assurez-vous que toutes les informations sont correctes et à jour"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsx("h2",{className:"text-xl font-semibold",children:"🏢 Informations de l'entreprise"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(t).map(g=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:h(g)}),s.jsx("div",{className:"flex items-center gap-2",children:a===g?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:p(g),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),s.jsx("button",{onClick:f,className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"✓"}),s.jsx("button",{onClick:A,className:"px-3 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"✗"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 text-sm min-h-[40px] flex items-center",children:t[g]||s.jsx("span",{className:"text-gray-400 italic",children:p(g)})}),s.jsx("button",{onClick:()=>d(g),className:"px-3 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"✏️"})]})}),s.jsx("p",{className:"text-xs text-gray-500",children:m(g)})]},g))})})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsx("h2",{className:"text-xl font-semibold",children:"📄 Aperçu sur les documents"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-6",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Aperçu sur un bon de commande :"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("div",{className:"font-semibold",children:t.ENTREPRISE_NOM||"MAI GESTION"}),t.ENTREPRISE_ADRESSE&&s.jsx("div",{children:t.ENTREPRISE_ADRESSE}),(t.ENTREPRISE_CODE_POSTAL||t.ENTREPRISE_VILLE)&&s.jsxs("div",{children:[t.ENTREPRISE_CODE_POSTAL," ",t.ENTREPRISE_VILLE]}),t.ENTREPRISE_TEL&&s.jsxs("div",{children:["Tél: ",t.ENTREPRISE_TEL]}),t.ENTREPRISE_EMAIL&&s.jsxs("div",{children:["Email: ",t.ENTREPRISE_EMAIL]}),t.ENTREPRISE_SIRET&&s.jsxs("div",{children:["SIRET: ",t.ENTREPRISE_SIRET]})]})]})})]})]})})},As="/affaires",$n={async getAffaires(t={}){try{return(await Ee.get(As,{params:t})).data}catch(e){throw console.error("Erreur lors de la récupération des affaires:",e),e}},async getAffaireById(t){try{return(await Ee.get(`${As}/${t}`)).data}catch(e){throw console.error(`Erreur lors de la récupération de l'affaire ${t}:`,e),e}},async createAffaire(t){try{return(await Ee.post(As,t)).data}catch(e){throw console.error("Erreur lors de la création de l'affaire:",e),e}},async updateAffaire(t,e){try{return(await Ee.patch(`${As}/${t}`,e)).data}catch(r){throw console.error(`Erreur lors de la mise à jour de l'affaire ${t}:`,r),r}},async deleteAffaire(t){try{return(await Ee.delete(`${As}/${t}`)).data}catch(e){throw console.error(`Erreur lors de la suppression de l'affaire ${t}:`,e),e}},async forceDeleteAffaire(t){try{return(await Ee.delete(`${As}/${t}/force`)).data}catch(e){throw console.error(`Erreur lors de la suppression forcée de l'affaire ${t}:`,e),e}},async duplicateAffaire(t){try{return(await Ee.post(`${As}/${t}/duplicate`)).data}catch(e){throw console.error(`Erreur lors de la duplication de l'affaire ${t}:`,e),e}},async getGlobalStats(){try{return(await Ee.get(`${As}/stats`)).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},async getAffairesByStatus(t){try{return(await Ee.get(As,{params:{statut:t}})).data}catch(e){throw console.error("Erreur lors de la récupération des affaires par statut:",e),e}},async getAffairesEnRetard(){try{const t=new Date;return(await Ee.get(As,{params:{dateCloturePrevue_lt:t.toISOString(),statut_ne:"TERMINE"}})).data}catch(t){throw console.error("Erreur lors de la récupération des affaires en retard:",t),t}},async getChiffreAffaires(t,e){try{return(await Ee.get(`${As}/chiffre-affaires`,{params:{dateDebut:t,dateFin:e}})).data}catch(r){throw console.error("Erreur lors de la récupération du chiffre d'affaires:",r),r}},async cloturerAffaire(t,e={}){try{return(await Ee.patch(`${As}/${t}/cloturer`,e)).data}catch(r){throw console.error("Erreur lors de la clôture de l'affaire:",r),r}},async getAffairesClient(t){try{return(await Ee.get(As,{params:{client:t}})).data}catch(e){throw console.error("Erreur lors de la récupération des affaires du client:",e),e}},async searchAffaires(t){try{return(await Ee.get(`${As}/search`,{params:{q:t}})).data}catch(e){throw console.error("Erreur lors de la recherche d'affaires:",e),e}},async getRecentAffaires(t=5){try{return(await Ee.get(`${As}/recent`,{params:{limit:t}})).data}catch(e){throw console.error("Erreur lors de la récupération des affaires récentes:",e),e}},formatStatut(t){return{EN_ATTENTE:"En attente",EN_COURS:"En cours",SUSPENDU:"Suspendu",TERMINE:"Terminé",ANNULE:"Annulé"}[t]||t},getStatutColor(t){return{EN_ATTENTE:"yellow",EN_COURS:"blue",SUSPENDU:"orange",TERMINE:"green",ANNULE:"red"}[t]||"gray"},formatMontant(t){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t||0)},formatDate(t){return t?new Date(t).toLocaleDateString("fr-FR"):""},calculerProgression(t){switch(t){case"EN_ATTENTE":return 25;case"EN_COURS":return 50;case"SUSPENDU":return 75;case"TERMINE":return 100;case"ANNULE":return 0;default:return 0}},async updateAffaireReel(t,e){try{return(await Ee.patch(`${As}/${t}/reel`,e)).data}catch(r){throw console.error("Erreur lors de la mise à jour des données réelles:",r),r}},async calculateRealData(t){try{return(await Ee.post(`${As}/${t}/calculate-real`)).data}catch(e){throw console.error("Erreur lors du calcul des données réelles:",e),e}},async getComparativeStats(t){try{return(await Ee.get(`${As}/${t}/comparative-stats`)).data}catch(e){throw console.error("Erreur lors de la récupération des statistiques comparatives:",e),e}},formatEcartPercentage(t,e){if(!e||e===0)return"N/A";const r=(t-e)/e*100;return`${r>=0?"+":""}${r.toFixed(1)}%`},getEcartColor(t,e){if(!e||e===0)return"text-gray-500";const r=(t-e)/e*100;return r>10?"text-red-600":r>0?"text-orange-600":r>-10?"text-green-600":"text-blue-600"},async getFinancialSituation(t){try{return(await Ee.get(`${As}/${t}/financial-situation`)).data}catch(e){throw console.error("Erreur lors de la récupération de la situation financière:",e),e}},async getPhasesCosts(t){try{return(await Ee.get(`${As}/${t}/phases-costs`)).data}catch(e){throw console.error("Erreur lors du calcul des coûts des phases:",e),e}},async getAchatsParCategorie(t){try{return(await Ee.get(`${As}/${t}/achats-categorie`)).data}catch(e){throw console.error("Erreur lors de la récupération des achats par catégorie:",e),e}},async updateEstimationsAchatCategorie(t,e){try{return(await Ee.put(`${As}/${t}/estimations-achat-categorie`,{estimations:e})).data}catch(r){throw console.error("Erreur lors de la mise à jour des estimations par catégorie:",r),r}},async calculateCosts(t){try{return(await Ee.post(`${As}/${t}/calculate-costs`)).data}catch(e){throw console.error(`Erreur lors du calcul des coûts de l'affaire ${t}:`,e),e}},async changeStatus(t,e){try{return(await Ee.patch(`${As}/${t}/status`,{status:e})).data}catch(r){throw console.error(`Erreur lors du changement de statut de l'affaire ${t}:`,r),r}}},x6=Object.freeze(Object.defineProperty({__proto__:null,affairesService:$n},Symbol.toStringTag,{value:"Module"})),K1=({icon:t,title:e,value:r,change:n,description:a})=>{const i=n&&n.startsWith("+");return s.jsxs(Kt,{className:"bg-white rounded-2xl shadow-md p-5 transition-all duration-300 hover:shadow-lg hover:scale-105",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-amber-100 rounded-full",children:t}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-stone-500",children:e}),s.jsx("p",{className:"text-2xl font-bold text-stone-800",children:r})]})]}),(n||a)&&s.jsxs("div",{className:"mt-3 text-xs text-stone-500 flex items-center",children:[n&&s.jsxs("span",{className:`flex items-center mr-2 ${i?"text-green-600":"text-red-600"}`,children:[i?s.jsx(Tl,{className:"w-4 h-4"}):s.jsx(Dm,{className:"w-4 h-4"}),s.jsx("span",{className:"font-semibold ml-1",children:n})]}),a&&s.jsx("span",{children:a})]})]})},Ur=le.forwardRef(({className:t,type:e="text",...r},n)=>s.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,ref:n,...r}));Ur.displayName="Input";function bs(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Cc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function cb(t,e){const r=bs(t);return isNaN(e)?Cc(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function rq(t,e){const r=bs(t);if(isNaN(e))return Cc(t,NaN);if(!e)return r;const n=r.getDate(),a=Cc(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const nq=6048e5,Dxe=864e5;let Ixe={};function Nw(){return Ixe}function Gi(t,e){var l,c,u,d;const r=Nw(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=bs(t),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function L2(t){return Gi(t,{weekStartsOn:1})}function sq(t){const e=bs(t),r=e.getFullYear(),n=Cc(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=L2(n),i=Cc(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=L2(i);return e.getTime()>=a.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function U2(t){const e=bs(t);return e.setHours(0,0,0,0),e}function v6(t){const e=bs(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function _xe(t,e){const r=U2(t),n=U2(e),a=+r-v6(r),i=+n-v6(n);return Math.round((a-i)/Dxe)}function Pxe(t){const e=sq(t),r=Cc(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),L2(r)}function Vk(t,e){const r=e*7;return cb(t,r)}function kxe(t){return Cc(t,Date.now())}function $2(t,e){const r=U2(t),n=U2(e);return+r==+n}function Oxe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Fxe(t){if(!Oxe(t)&&typeof t!="number")return!1;const e=bs(t);return!isNaN(Number(e))}function dD(t){const e=bs(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function b6(t,e){const r=bs(t.start),n=bs(t.end);let a=+r>+n;const i=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(bs(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function Rxe(t,e){const r=bs(t.start),n=bs(t.end);let a=+r>+n;const i=Gi(a?n:r,e),o=Gi(a?r:n,e);i.setHours(15),o.setHours(15);const l=+o.getTime();let c=i,u=(e==null?void 0:e.step)??1;if(!u)return[];u<0&&(u=-u,a=!a);const d=[];for(;+c<=l;)c.setHours(0),d.push(bs(c)),c=Vk(c,u),c.setHours(15);return a?d.reverse():d}function fD(t){const e=bs(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Mxe(t){const e=bs(t),r=Cc(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function H2(t,e){var l,c,u,d;const r=Nw(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=bs(t),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const Lxe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uxe=(t,e,r)=>{let n;const a=Lxe[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Xg(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const $xe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hxe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qxe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zxe={date:Xg({formats:$xe,defaultWidth:"full"}),time:Xg({formats:Hxe,defaultWidth:"full"}),dateTime:Xg({formats:Qxe,defaultWidth:"full"})},Vxe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wxe=(t,e,r,n)=>Vxe[t];function uu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const Gxe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qxe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kxe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yxe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zxe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},eve={ordinalNumber:Zxe,era:uu({values:Gxe,defaultWidth:"wide"}),quarter:uu({values:qxe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:uu({values:Kxe,defaultWidth:"wide"}),day:uu({values:Yxe,defaultWidth:"wide"}),dayPeriod:uu({values:Xxe,defaultWidth:"wide",formattingValues:Jxe,defaultFormattingWidth:"wide"})};function du(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?rve(l,f=>f.test(o)):tve(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function tve(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function rve(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function aq(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const nve=/^(\d+)(th|st|nd|rd)?/i,sve=/\d+/i,ave={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ive={any:[/^b/i,/^(a|c)/i]},ove={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lve={any:[/1/i,/2/i,/3/i,/4/i]},cve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uve={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dve={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fve={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hve={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ave={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mve={ordinalNumber:aq({matchPattern:nve,parsePattern:sve,valueCallback:t=>parseInt(t,10)}),era:du({matchPatterns:ave,defaultMatchWidth:"wide",parsePatterns:ive,defaultParseWidth:"any"}),quarter:du({matchPatterns:ove,defaultMatchWidth:"wide",parsePatterns:lve,defaultParseWidth:"any",valueCallback:t=>t+1}),month:du({matchPatterns:cve,defaultMatchWidth:"wide",parsePatterns:uve,defaultParseWidth:"any"}),day:du({matchPatterns:dve,defaultMatchWidth:"wide",parsePatterns:fve,defaultParseWidth:"any"}),dayPeriod:du({matchPatterns:hve,defaultMatchWidth:"any",parsePatterns:Ave,defaultParseWidth:"any"})},pve={code:"en-US",formatDistance:Uxe,formatLong:zxe,formatRelative:Wxe,localize:eve,match:mve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gve(t){const e=bs(t);return _xe(e,Mxe(e))+1}function xve(t){const e=bs(t),r=+L2(e)-+Pxe(e);return Math.round(r/nq)+1}function iq(t,e){var d,f,A,h;const r=bs(t),n=r.getFullYear(),a=Nw(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=Cc(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Gi(o,e),c=Cc(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Gi(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function vve(t,e){var l,c,u,d;const r=Nw(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=iq(t,e),i=Cc(t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Gi(i,e)}function bve(t,e){const r=bs(t),n=+Gi(r,e)-+vve(r,e);return Math.round(n/nq)+1}function Bn(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Vf={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Bn(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Bn(r+1,2)},d(t,e){return Bn(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Bn(t.getHours()%12||12,e.length)},H(t,e){return Bn(t.getHours(),e.length)},m(t,e){return Bn(t.getMinutes(),e.length)},s(t,e){return Bn(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Bn(a,e.length)}},yg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},y6={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Vf.y(t,e)},Y:function(t,e,r,n){const a=iq(t,n),i=a>0?a:1-a;if(e==="YY"){const o=i%100;return Bn(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Bn(i,e.length)},R:function(t,e){const r=sq(t);return Bn(r,e.length)},u:function(t,e){const r=t.getFullYear();return Bn(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Bn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Bn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Vf.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Bn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=bve(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Bn(a,e.length)},I:function(t,e,r){const n=xve(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Bn(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Vf.d(t,e)},D:function(t,e,r){const n=gve(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Bn(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Bn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Bn(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Bn(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=yg.noon:n===0?a=yg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=yg.evening:n>=12?a=yg.afternoon:n>=4?a=yg.morning:a=yg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Vf.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Vf.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Bn(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Bn(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vf.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Vf.s(t,e)},S:function(t,e){return Vf.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return j6(n);case"XXXX":case"XX":return FA(n);case"XXXXX":case"XXX":default:return FA(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return j6(n);case"xxxx":case"xx":return FA(n);case"xxxxx":case"xxx":default:return FA(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+w6(n,":");case"OOOO":default:return"GMT"+FA(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+w6(n,":");case"zzzz":default:return"GMT"+FA(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Bn(n,e.length)},T:function(t,e,r){const n=t.getTime();return Bn(n,e.length)}};function w6(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+e+Bn(i,2)}function j6(t,e){return t%60===0?(t>0?"-":"+")+Bn(Math.abs(t)/60,2):FA(t,e)}function FA(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Bn(Math.trunc(n/60),2),i=Bn(n%60,2);return r+a+e+i}const C6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oq=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yve=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return C6(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",C6(n,e)).replace("{{time}}",oq(a,e))},wve={p:oq,P:yve},jve=/^D+$/,Cve=/^Y+$/,Nve=["D","DD","YY","YYYY"];function Sve(t){return jve.test(t)}function Eve(t){return Cve.test(t)}function Bve(t,e,r){const n=Tve(t,e,r);if(console.warn(n),Nve.includes(t))throw new RangeError(n)}function Tve(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ive=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_ve=/^'([^]*?)'?$/,Pve=/''/g,kve=/[a-zA-Z]/;function on(t,e,r){var d,f,A,h,m,p,g,x;const n=Nw(),a=(r==null?void 0:r.locale)??n.locale??pve,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((x=(g=n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=bs(t);if(!Fxe(l))throw new RangeError("Invalid time value");let c=e.match(Ive).map(v=>{const b=v[0];if(b==="p"||b==="P"){const C=wve[b];return C(v,a.formatLong)}return v}).join("").match(Dve).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:Ove(v)};if(y6[b])return{isToken:!0,value:v};if(b.match(kve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Eve(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Sve(b))&&Bve(b,e,String(t));const C=y6[b[0]];return C(l,b,a.localize,u)}).join("")}function Ove(t){const e=t.match(_ve);return e?e[1].replace(Pve,"'"):t}function Fve(t,e){const r=bs(t),n=bs(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Rve(t){return $2(t,kxe(t))}function lq(t,e){return rq(t,-e)}function Mve(t,e){return Vk(t,-1)}const N6=["#E91E63","#FF9800","#FFC107","#4CAF50","#2196F3","#9C27B0","#F06292","#26A69A","#FF5722","#673AB7","#009688","#795548"],S6=(t,e=null)=>{if(e&&e.couleurPlanning)return e.couleurPlanning;const r=t%N6.length;return N6[r]},Wk={SALARIE:{label:"Salarié",description:"Employé permanent de l'entreprise",color:"bg-green-800 text-white"},SOUS_TRAITANT:{label:"Sous-traitant",description:"Intervenant externe ou prestataire",color:"text-white"}},Lve={SOUS_TRAITANT:{backgroundColor:"rgb(102, 102, 102)",color:"white"}},np={ADMIN_SYS:{label:"Administrateur Système",description:"Accès total, gestion des paramètres",color:"red"},DIRIGEANT:{label:"Dirigeant",description:"Direction de l'entreprise, accès complet",color:"purple"},CHARGE_AFFAIRE:{label:"Chargé d'Affaire",description:"Crée/édite les affaires, valide les BDC, consulte reporting",color:"blue"},CHEF_CHANTIER:{label:"Chef de Chantier",description:"Supervision des chantiers, validation pointages chantier",color:"orange"},CHEF_ATELIER:{label:"Chef d'Atelier",description:"Supervision atelier, validation pointages atelier",color:"green"},ACHETEUR:{label:"Acheteur",description:"Crée/édite BDC, voit les coûts, pas la marge",color:"indigo"},OUVRIER_CHANTIER:{label:"Ouvrier Chantier",description:"Travail sur chantier, saisie pointages",color:"yellow"},OUVRIER_ATELIER:{label:"Ouvrier Atelier",description:"Travail en atelier, saisie pointages",color:"teal"}},Uve={specialitePoseur:{label:"Poseur",description:"Spécialisé dans la pose",color:"blue"},specialiteFabriquant:{label:"Fabriquant",description:"Spécialisé dans la fabrication",color:"green"},specialiteDessinateur:{label:"Dessinateur",description:"Spécialisé dans le dessin technique",color:"purple"},specialiteChargeAffaire:{label:"Chargé d'Affaire",description:"Spécialisé dans le suivi commercial",color:"orange"}},Gk=async(t={})=>{try{const{data:e}=await Ee.get("/users",{params:t});return e}catch(e){throw console.error("Erreur lors de la récupération des utilisateurs:",e),e}},cq=async t=>{try{const{data:e}=await Ee.get(`/users/${t}`);return e}catch(e){throw console.error("Erreur lors de la récupération de l'utilisateur:",e),e}},uq=async t=>{try{const{data:e}=await Ee.post("/users",t);return e}catch(e){throw console.error("Erreur lors de la création de l'utilisateur:",e),e}},dq=async(t,e)=>{try{const{data:r}=await Ee.put(`/users/${t}`,e);return r}catch(r){throw console.error("Erreur lors de la mise à jour de l'utilisateur:",r),r}},fq=async t=>{try{const{data:e}=await Ee.delete(`/users/${t}`);return e}catch(e){throw console.error("Erreur lors de la suppression de l'utilisateur:",e),e}},hq=async t=>{try{const{data:e}=await Ee.patch(`/users/${t}/reactivate`);return e}catch(e){throw console.error("Erreur lors de la réactivation de l'utilisateur:",e),e}},$ve=async(t,e)=>{try{const{data:r}=await Ee.patch(`/users/${t}/password`,e);return r}catch(r){throw console.error("Erreur lors du changement de mot de passe:",r),r}},Aq=async()=>{try{const{data:t}=await Ee.get("/users/stats");return t}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},Hve=async t=>{try{const{data:e}=await Ee.get(`/users/by-role/${t}`);return e}catch(e){throw console.error("Erreur lors de la récupération des utilisateurs par rôle:",e),e}},mq=async(t,e=null)=>{try{const r=await Gk({search:t,page:1,limit:10});return!((r==null?void 0:r.users)||[]).find(i=>i.email.toLowerCase()===t.toLowerCase()&&(!e||i.id!==e))}catch(r){return console.error("Erreur lors de la vérification de l'email:",r),!0}},pq=t=>{var e;return((e=np[t])==null?void 0:e.label)||t},Qve=t=>{var e;return((e=np[t])==null?void 0:e.color)||"gray"},zve=t=>{var e;return((e=np[t])==null?void 0:e.description)||""},Q2=()=>Object.entries(np).map(([t,e])=>({value:t,label:e.label,description:e.description})),E6=t=>{if(t==="SALARIE")return Q2();if(t==="SOUS_TRAITANT"){const e=["OUVRIER_CHANTIER","OUVRIER_ATELIER"];return Object.entries(np).filter(([r])=>e.includes(r)).map(([r,n])=>({value:r,label:n.label,description:n.description}))}return Q2()},Vve=t=>{var e;return((e=Wk[t])==null?void 0:e.label)||t},Wve=t=>{var e;return((e=Wk[t])==null?void 0:e.color)||"gray"},Gve=()=>Object.entries(Uve).map(([t,e])=>({key:t,label:e.label,description:e.description})),gq=t=>{var r,n,a;const e={};return(r=t.nom)!=null&&r.trim()||(e.nom="Le nom est obligatoire"),(n=t.prenom)!=null&&n.trim()||(e.prenom="Le prénom est obligatoire"),(a=t.email)!=null&&a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Format d'email invalide"):e.email="L'email est obligatoire",t.role||(e.role="Le rôle est obligatoire"),t.tarifHoraireBase!==void 0&&t.tarifHoraireBase<0&&(e.tarifHoraireBase="Le tarif horaire ne peut pas être négatif"),t.telephone&&!/^[0-9\s\-\+\(\)]+$/.test(t.telephone)&&(e.telephone="Format de téléphone invalide"),{isValid:Object.keys(e).length===0,errors:e}},qve={getUsers:Gk,getUserById:cq,createUser:uq,updateUser:dq,deleteUser:fq,reactivateUser:hq,changeUserPassword:$ve,getUsersStats:Aq,getUsersByRole:Hve,checkEmailAvailability:mq,getRoleLabel:pq,getRoleColor:Qve,getRoleDescription:zve,getRolesForSelect:Q2,validateUserData:gq,ROLES_CONFIG:np};class xq{async getPlanningHebdomadaire(e,r=!1){var n,a;try{return(await Ee.get("/planning-equipe/semaine",{params:{dateDebut:e,inclureTerminees:r}})).data}catch(i){throw console.error("Erreur lors de la récupération du planning hebdomadaire:",i),new Error(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Erreur lors de la récupération du planning")}}async getOuvriersDisponibles(){try{console.log("🔄 [PlanningEquipeService] Récupération équipe disponible");const e=await Ee.get("/planning-equipe/ouvriers-disponibles");console.log("✅ [PlanningEquipeService] Équipe récupérée:",e.data);const{salaries:r,sousTraitants:n}=e.data;return{salaries:r||[],sousTraitants:n||[]}}catch(e){throw console.error("❌ [PlanningEquipeService] Erreur récupération équipe:",e),e}}async getAffairesActives(){var e,r;try{return(await Ee.get("/planning-equipe/affaires-actives")).data}catch(n){throw console.error("Erreur lors de la récupération des affaires:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des affaires")}}async getStatistiquesPlanning(e){var r,n;try{return(await Ee.get("/planning-equipe/statistiques",{params:{dateDebut:e}})).data}catch(a){throw console.error("Erreur lors de la récupération des statistiques:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la récupération des statistiques")}}async affecterOuvrier(e){var r,n;try{return(await Ee.post("/planning-equipe/affecter",e)).data}catch(a){throw console.error("Erreur lors de l'affectation:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de l'affectation")}}async updateAffectation(e,r){var n,a;try{return(await Ee.put(`/planning-equipe/affectation/${e}`,r)).data}catch(i){throw console.error("Erreur lors de la mise à jour:",i),new Error(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Erreur lors de la mise à jour")}}async modifierTypeActivite(e,r){var n,a;try{return(await Ee.put(`/planning-equipe/modifier-activite/${e}`,{typeActivite:r})).data}catch(i){throw console.error("Erreur lors de la modification du type d'activité:",i),new Error(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Erreur lors de la modification")}}async desaffecterOuvrier(e){var r,n;try{return(await Ee.delete(`/planning-equipe/desaffecter/${e}`)).data}catch(a){throw console.error("Erreur lors de la désaffectation:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la désaffectation")}}async validerDisponibilite(e,r,n,a){var i,o;try{return(await Ee.get(`/planning-equipe/validation/${e}/${r}`,{params:{dateAffectation:n,periode:a}})).data}catch(l){throw console.error("Erreur lors de la validation:",l),new Error(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Erreur lors de la validation")}}async getHistoriqueOuvrierAffaire(e,r){try{console.log(`📊 Récupération historique ouvrier ${e} sur affaire ${r}...`);const n=await Ee.get(`/planning-equipe/historique/${e}/${r}`);return console.log("📊 Historique récupéré:",n.data),n.data}catch(n){throw console.error("❌ Erreur lors de la récupération de l'historique ouvrier-affaire:",n),n}}async getTotauxHistoriquesAffaire(e){try{console.log(`📊 Récupération totaux historiques pour affaire ${e}...`);const r=await Ee.get(`/planning-equipe/totaux-historiques-affaire/${e}`);return console.log("📊 Totaux historiques récupérés:",r.data),r.data}catch(r){throw console.error("❌ Erreur lors de la récupération des totaux historiques affaire:",r),r}}async getFraisGenerauxSemaine(e){var r,n;try{console.log(`📊 Récupération frais généraux semaine pour date: ${e}`);const a=await Ee.get("/planning-equipe/frais-generaux-semaine",{params:{dateRef:e}});return console.log("📊 Frais généraux semaine récupérés:",{semaine:a.data.semaine,annee:a.data.annee,fraisGenerauxRestants:a.data.fraisGenerauxRestants,tauxAbsorption:a.data.tauxAbsorption}),a.data}catch(a){throw console.error("❌ Erreur lors de la récupération des frais généraux semaine:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la récupération des frais généraux de la semaine")}}getDebutSemaine(e=new Date){const r=new Date(e),n=r.getDay(),a=n===0?1:-(n-1);return r.setDate(r.getDate()+a),r.setHours(0,0,0,0),r.toISOString().split("T")[0]}getDatesJoursSemaine(e){const r=[];for(let n=0;n<5;n++){const a=new Date(e);a.setDate(a.getDate()+n),r.push({date:a.toISOString().split("T")[0],nom:a.toLocaleDateString("fr-FR",{weekday:"long"}).toUpperCase(),numeroJour:a.getDate(),mois:a.toLocaleDateString("fr-FR",{month:"2-digit"}),annee:a.getFullYear()})}return r}getEmployeeColorClass(e){return e!=null&&e.couleurPlanning&&{"#8B4513":"bg-yellow-100 text-yellow-800 border-yellow-200","#A0522D":"bg-orange-100 text-orange-800 border-orange-200","#CD853F":"bg-amber-100 text-amber-800 border-amber-200","#D2691E":"bg-orange-100 text-orange-700 border-orange-200","#DEB887":"bg-yellow-50 text-yellow-700 border-yellow-200","#BC8F8F":"bg-rose-100 text-rose-700 border-rose-200","#F4A460":"bg-orange-100 text-orange-700 border-orange-200","#DAA520":"bg-yellow-100 text-yellow-700 border-yellow-200","#556B2F":"bg-green-100 text-green-800 border-green-200","#6B8E23":"bg-lime-100 text-lime-800 border-lime-200","#808000":"bg-yellow-100 text-yellow-800 border-yellow-200","#9ACD32":"bg-lime-100 text-lime-700 border-lime-200","#FF8C00":"bg-orange-100 text-orange-700 border-orange-200","#FFB347":"bg-orange-100 text-orange-600 border-orange-200","#FFA500":"bg-orange-100 text-orange-700 border-orange-200","#F0E68C":"bg-yellow-100 text-yellow-700 border-yellow-200","#B22222":"bg-red-100 text-red-800 border-red-200","#CD5C5C":"bg-red-100 text-red-700 border-red-200","#D2B48C":"bg-yellow-100 text-yellow-700 border-yellow-200","#F5DEB3":"bg-yellow-50 text-yellow-700 border-yellow-200"}[e.couleurPlanning]||"bg-gray-100 text-gray-700 border-gray-200"}getEmployeeBackgroundColor(e){return(e==null?void 0:e.couleurPlanning)||"#9CA3AF"}getContrastTextColor(e){if(!e)return"#000000";const r=e.replace("#",""),n=parseInt(r.substr(0,2),16),a=parseInt(r.substr(2,2),16),i=parseInt(r.substr(4,2),16);return(.299*n+.587*a+.114*i)/255>.5?"#000000":"#FFFFFF"}async supprimerToutesLesAffectations(){var e,r;try{return(await Ee.delete("/planning-equipe/affectations/all")).data}catch(n){throw console.error("Erreur lors de la suppression de toutes les affectations:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la suppression des affectations")}}async supprimerAffectationsAffaire(e){var r,n;try{return(await Ee.delete(`/planning-equipe/affectations/affaire/${e}`)).data}catch(a){throw console.error(`Erreur lors de la suppression des affectations de l'affaire ${e}:`,a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la suppression des affectations")}}}const Bs=new xq,Kve=Object.freeze(Object.defineProperty({__proto__:null,PlanningEquipeService:xq,default:Bs,planningEquipeService:Bs},Symbol.toStringTag,{value:"Module"})),vq=({isVisible:t,isActive:e,onDrop:r,onDragOver:n,onDragLeave:a})=>{const[i,o]=y.useState(!1),l=y.useRef(null),c=f=>{f.preventDefault(),l.current&&clearTimeout(l.current),o(!0),n(f)},u=f=>{f.preventDefault(),l.current=setTimeout(()=>{o(!1),a(f)},100)},d=f=>{f.preventDefault(),l.current&&clearTimeout(l.current),o(!1),r(f)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`
          fixed bottom-8 right-8 z-40 transition-all duration-300 ease-in-out
          ${t?"translate-y-0 opacity-100":"translate-y-full opacity-0"}
          w-32 h-32 rounded-full flex items-center justify-center
          ${t?"pointer-events-auto":"pointer-events-none"}
        `,onDrop:d,onDragOver:c,onDragLeave:u,children:s.jsxs("div",{className:`
            transition-all duration-300 ease-in-out
            ${e||i?"scale-125 bg-red-500 shadow-2xl":"scale-100 bg-gray-500 shadow-lg"}
            w-20 h-20 rounded-full flex items-center justify-center
            hover:shadow-2xl cursor-pointer relative
          `,children:[s.jsx(Zn,{size:32,className:`
              text-white transition-all duration-200 z-10
              ${e||i?"scale-110":"scale-100"}
            `}),(e||i)&&s.jsx("div",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75"}),t&&s.jsx("div",{className:`
                absolute inset-0 rounded-full border-2 border-dashed transition-all duration-200
                ${e||i?"border-red-300 scale-150":"border-gray-300 scale-125"}
                opacity-50
              `})]})}),t&&(e||i)&&s.jsx("div",{className:"fixed bottom-8 right-8 z-30 w-40 h-40 rounded-full border-4 border-red-300 border-dashed opacity-30 animate-pulse pointer-events-none",style:{transform:"translate(-50%, 50%)",marginLeft:"50%",marginBottom:"-50%"}})]})},eu="/frais-generaux",ru={async getAll(t=!1){try{return(await Ee.get(`${eu}?includeInactifs=${t}`)).data}catch(e){throw console.error("Erreur lors de la récupération des frais généraux:",e),e}},async getById(t){var e,r;try{const{data:n}=await Ee.get(`${eu}/${t}`);return n}catch(n){throw console.error("Erreur lors de la récupération du frais général:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},async create(t){var e,r;try{const{data:n}=await Ee.post(eu,t);return n}catch(n){throw console.error("Erreur lors de la création du frais général:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},async update(t,e){var r,n;try{const{data:a}=await Ee.patch(`${eu}/${t}`,e);return a}catch(a){throw console.error("Erreur lors de la mise à jour du frais général:",((r=a.response)==null?void 0:r.data)||a.message),((n=a.response)==null?void 0:n.data)||a}},async delete(t){var e,r;try{const{data:n}=await Ee.delete(`${eu}/${t}`);return n}catch(n){throw console.error("Erreur lors de la suppression du frais général:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},async permanentDelete(t){var e,r;try{const{data:n}=await Ee.delete(`${eu}/${t}/permanent`);return n}catch(n){throw console.error("Erreur lors de la suppression définitive du frais général:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},async reactivate(t){var e,r;try{const{data:n}=await Ee.patch(`${eu}/${t}/reactivate`);return n}catch(n){throw console.error("Erreur lors de la réactivation du frais général:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},async getStats(){try{return(await Ee.get(`${eu}/stats`)).data}catch(t){throw console.error("Erreur lors de la récupération des stats frais généraux:",t),t}},async calculerFraisGenerauxPeriode(t){try{return(await Ee.post(`${eu}/calcul`,t)).data}catch(e){throw console.error("Erreur lors du calcul des frais généraux:",e),e}},async initialiserDefaut(){var t,e;try{const{data:r}=await Ee.post(`${eu}/initialiser`);return r}catch(r){throw console.error("Erreur lors de l'initialisation:",((t=r.response)==null?void 0:t.data)||r.message),((e=r.response)==null?void 0:e.data)||r}},calculerJoursOuvres(t,e,r=5){let n=0;const a=new Date(t),i=new Date(e);for(i.setHours(23,59,59,999);a<=i;){const o=a.getDay();r===5?o>=1&&o<=5&&n++:r===6?o>=1&&o<=6&&n++:r===7&&n++,a.setDate(a.getDate()+1)}return n}},bq=({planningData:t,ouvriers:e,affaires:r,weekDays:n,loading:a=!1,className:i=""})=>{var K,se,Z,ie,ee,ue,ae,re;const[o,l]=y.useState({}),[c,u]=y.useState({}),[d,f]=y.useState(!0),[A,h]=y.useState([]),[m,p]=y.useState(!1),[g,x]=y.useState({}),[v,b]=y.useState(null),[C,j]=y.useState(!1),w={MATIN:4,APREM:4},N=(fe,G)=>{console.log("🧮 Calcul SIMPLE des frais généraux...");const oe=254.29,{dateDebut:Se,dateFin:ge}=E(fe),te=_(Se,ge),ye=D(fe),we=oe,be=ye*oe;return console.log("📊 Période analysée:",{dateDebut:Se,dateFin:ge,nombreDemiJourneesPeriode:te}),console.log("💰 SYSTÈME SIMPLE: 254,29 € FIXE par affectation"),console.log("👥 Total affectations:",ye),console.log("💼 Coût par affectation:",we,"€ (FIXE)"),console.log("💡 Calcul total:",ye,"× 254,29 € =",be.toFixed(2),"€"),console.log("✅ Calcul simple terminé"),{fraisGenerauxParPersonne:we,totalFraisGenerauxPeriode:be,totalAffectations:ye,detailsPeriode:{dateDebut:Se,dateFin:ge,nombreDemiJourneesPeriode:te},fraisGenerauxParDemiJournee:oe,baseFixes:be}},E=fe=>{const G=Object.values(fe).flat();if(G.length===0){const Se=new Date;return{dateDebut:Se,dateFin:Se}}const oe=G.map(Se=>new Date(Se.dateAffectation));return{dateDebut:new Date(Math.min(...oe)),dateFin:new Date(Math.max(...oe))}},_=(fe,G)=>k(fe,G)*2,k=(fe,G)=>{let oe=0;const Se=new Date(fe);for(;Se<=G;){const ge=Se.getDay();ge>=1&&ge<=5&&oe++,Se.setDate(Se.getDate()+1)}return oe},D=fe=>Object.values(fe).reduce((G,oe)=>G+oe.length,0);y.useEffect(()=>{(async()=>{try{p(!0);const G=await ru.getAll(!1);h(G)}catch(G){console.error("Erreur lors de la récupération des frais généraux:",G)}finally{p(!1)}})()},[]);const S=async()=>{if(!n||n.length===0){console.log("📊 Pas de jours de semaine disponibles pour récupérer les frais généraux");return}j(!0);try{const fe=n[0];console.log(`📊 Récupération des frais généraux pour la semaine du ${fe}... (${new Date().toISOString()})`),console.log("📊 weekDays complets:",n);const G=await Bs.getFraisGenerauxSemaine(fe);b(G),console.log("📊 Frais généraux semaine récupérés:",G),console.log("📊 Détails par jour reçus:",G==null?void 0:G.detailsParJour)}catch(fe){console.error("❌ Erreur lors de la récupération des frais généraux de la semaine:",fe),b(null)}finally{j(!1)}},[F,M]=y.useState({}),R=async()=>{if(!r)return;const fe={};console.log("🔄 Début récupération totaux historiques par affaire...");try{for(const G of r)try{console.log(`📊 Récupération totaux historiques pour affaire ${G.numero}...`);const oe=await Bs.getTotauxHistoriquesAffaire(G.id);fe[G.id]=oe,console.log(`✅ Totaux récupérés pour affaire ${G.numero}:`,{totalAffectations:oe.totalAffectations,totalHeures:oe.totalHeures,nombreOuvriersTotal:oe.nombreOuvriersTotal})}catch(oe){console.error(`❌ Erreur totaux affaire ${G.id}:`,oe),fe[G.id]=null}return console.log("📊 Tous les totaux historiques récupérés:",fe),M(fe),fe}catch(G){return console.error("❌ Erreur globale récupération totaux historiques:",G),{}}},U=async()=>{if(!t||!r)return;const fe={};console.log("🔄 Début récupération historiques ouvriers...");try{for(const G of r){const oe=t[G.id]||[],Se=[...new Set(oe.map(ge=>ge.userId))];for(const ge of Se){const te=`${ge}-${G.id}`;try{const ye=await Bs.getHistoriqueOuvrierAffaire(ge,G.id);fe[te]=ye}catch(ye){console.error(`❌ Erreur historique ${ge}-${G.id}:`,ye),fe[te]=null}}}return x(fe),fe}catch(G){return console.error("❌ Erreur globale récupération historiques:",G),{}}};y.useEffect(()=>{t&&r&&r.length>0&&(console.log("🔄 Déclenchement fetchHistoriquesOuvriers..."),U())},[t,r]),y.useEffect(()=>{r&&r.length>0&&(console.log("🔄 Déclenchement fetchTotauxHistoriquesAffaires..."),R())},[r]),y.useEffect(()=>{n&&n.length>0&&(console.log("🔄 Déclenchement fetchFraisGenerauxSemaine..."),S())},[n]);const[z,Q]=y.useState(!1);y.useEffect(()=>{(async()=>{t&&r&&r.length>0&&(console.log("🔄 Vérification état historiques..."),await U(),await R(),Q(!0))})()},[t,r]);const H=y.useMemo(()=>{if(!t||!e||!r)return{coutsParAffaire:{},totaux:{}};console.log("🧮 Calcul des coûts de main d'œuvre avec frais généraux...");const fe=[...e.salaries||[],...e.sousTraitants||[]],G=N(t),ge=A.reduce((Ie,De)=>Ie+De.montantHt,0)/20,te=ge/2,ye={};let we=0,be=0,Te=0,Oe=0,Me=0;Object.entries(t).forEach(([Ie,De])=>{if(!De||De.length===0)return;const Je=r.find(St=>St.id===Ie);if(!Je)return;const Ke={affaire:Je,ouvriers:{},totalHeures:0,totalCoutMainOeuvre:0,totalVenteMainOeuvre:0,totalCoutFraisGeneraux:0,totalPeriodes:0,details:[]};De.forEach(St=>{const it=fe.find(At=>At.id===St.userId);if(!it)return;const Pt=`${it.id}`;Ke.ouvriers[Pt]||(Ke.ouvriers[Pt]={ouvrier:it,totalHeures:0,totalCoutMainOeuvre:0,totalVenteMainOeuvre:0,totalCoutFraisGeneraux:0,totalPeriodes:0,details:[]});const dr=w[St.periode]||4,ar=it.tarifHoraireCout||it.tarifHoraireBase||0,gn=it.tarifHoraireVente||it.tarifHoraireBase||0,ir=dr*ar,nn=dr*gn;console.log(`👤 ${it.nom} ${it.prenom}:`,{tarifCout:`${ar}€/h`,tarifVente:`${gn}€/h`,heures:`${dr}h`,coutTotal:`${ir}€`,venteTotal:`${nn}€`});const Mt=G.fraisGenerauxParPersonne;Ke.ouvriers[Pt].totalHeures+=dr,Ke.ouvriers[Pt].totalCoutMainOeuvre+=ir,Ke.ouvriers[Pt].totalVenteMainOeuvre+=nn,Ke.ouvriers[Pt].totalCoutFraisGeneraux+=Mt,Ke.ouvriers[Pt].totalPeriodes+=1,Ke.ouvriers[Pt].details.push({date:St.dateAffectation,periode:St.periode,typeActivite:St.typeActivite,heures:dr,tarifCout:ar,tarifVente:gn,coutMainOeuvreAffectation:ir,venteMainOeuvreAffectation:nn,coutFraisGenerauxAffectation:Mt}),Ke.totalHeures+=dr,Ke.totalCoutMainOeuvre+=ir,Ke.totalVenteMainOeuvre+=nn,Ke.totalCoutFraisGeneraux+=Mt,Ke.totalPeriodes+=1}),Ke.totalCoutTotal=Ke.totalCoutMainOeuvre+Ke.totalCoutFraisGeneraux,Ke.totalVenteTotal=Ke.totalVenteMainOeuvre+Ke.totalCoutFraisGeneraux,Ke.details=Object.values(Ke.ouvriers).sort((St,it)=>`${St.ouvrier.nom} ${St.ouvrier.prenom}`.localeCompare(`${it.ouvrier.nom} ${it.ouvrier.prenom}`)),ye[Ie]=Ke,we+=Ke.totalHeures,be+=Ke.totalCoutMainOeuvre,Te+=Ke.totalVenteMainOeuvre,Oe+=Ke.totalCoutFraisGeneraux,Me+=Ke.totalPeriodes});const Ve=[],Pe=[];let ze=0,ht=0;Object.values(ye).forEach(Ie=>{Object.values(Ie.ouvriers).forEach(De=>{const Je=De.ouvrier,Ke=De.totalHeures;Je.tarifHoraireVente>0&&(Ve.push({tarif:Je.tarifHoraireVente,heures:Ke}),ze+=Ke),Je.tarifHoraireCout>0&&(Pe.push({tarif:Je.tarifHoraireCout,heures:Ke}),ht+=Ke)})});const gt=ze>0?Ve.reduce((Ie,De)=>Ie+De.tarif*De.heures,0)/ze:0,Ct=ht>0?Pe.reduce((Ie,De)=>Ie+De.tarif*De.heures,0)/ht:0,xt={nombreAffaires:Object.keys(ye).length,totalHeures:we,totalCoutMainOeuvre:be,totalVenteMainOeuvre:Te,totalCoutFraisGeneraux:Oe,totalCoutTotal:be+Oe,totalVenteTotal:Te+Oe,totalPeriodes:Me,fraisGenerauxParJour:ge,fraisGenerauxParDemiJournee:te,coutMoyenHeure:we>0?be/we:0,venteMoyenneHeure:we>0?Te/we:0,coutMoyenAffaire:Object.keys(ye).length>0?(be+Oe)/Object.keys(ye).length:0,venteMoyenneAffaire:Object.keys(ye).length>0?(Te+Oe)/Object.keys(ye).length:0,tarifVenteMoyenPondere:gt,tarifCoutMoyenPondere:Ct,mutualisation:G};return console.log("✅ Coûts calculés avec frais généraux:",{coutsParAffaire:ye,totaux:xt}),{coutsParAffaire:ye,totaux:xt}},[t,e,r,A]);y.useEffect(()=>{l(H.coutsParAffaire),u(H.totaux)},[H]);const q=fe=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(fe||0),X=fe=>`${fe||0}h`;if(a||m)return s.jsxs("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 ${i}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"text-xl",children:"🧮"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Coûts de Main d'Œuvre avec Frais Généraux"})]}),s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Calcul des coûts en cours..."})]})]});const $=Object.values(o).sort((fe,G)=>fe.affaire.numero.localeCompare(G.affaire.numero));return s.jsxs("div",{className:`bg-white rounded-3xl shadow-lg border border-gray-200 p-8 ${i}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🧮"}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:"Coûts de Main d'Œuvre avec Frais Généraux - Semaine"})]}),s.jsx("button",{onClick:()=>f(!d),className:"text-sm text-gray-600 hover:text-gray-800 px-4 py-2 rounded-full bg-gray-50 hover:bg-gray-100 transition-all duration-300",children:d?"Réduire":"Développer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 text-gray-600 mb-3",children:[s.jsx("span",{className:"text-xl",children:"💰"}),s.jsx("span",{className:"font-medium",children:"Coût M.O."})]}),s.jsx("div",{className:"text-3xl font-light text-gray-900",children:q(c.totalCoutMainOeuvre)}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Interne / Semaine"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 text-gray-600 mb-3",children:[s.jsx("span",{className:"text-xl",children:"💸"}),s.jsx("span",{className:"font-medium",children:"Vente M.O."})]}),s.jsx("div",{className:"text-3xl font-light text-green-600",children:q(c.totalVenteMainOeuvre)}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Facturation / Semaine"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 text-gray-600 mb-3",children:[s.jsx("span",{className:"text-xl",children:"🏢"}),s.jsx("span",{className:"font-medium",children:"Frais généraux"})]}),s.jsx("div",{className:"text-3xl font-light text-gray-900",children:q(c.totalCoutFraisGeneraux)}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"/ Semaine"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 text-gray-600 mb-3",children:[s.jsx("span",{className:"text-xl",children:"💼"}),s.jsx("span",{className:"font-medium",children:"Total Vente"})]}),s.jsx("div",{className:"text-3xl font-light text-green-600",children:q(c.totalVenteTotal)}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Client / Semaine"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 text-gray-600 mb-3",children:[s.jsx("span",{className:"text-xl",children:"⏱️"}),s.jsx("span",{className:"font-medium",children:"Heures"})]}),s.jsx("div",{className:"text-3xl font-light text-gray-900",children:X(c.totalHeures)}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"/ Semaine"})]})]}),s.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-gray-200 mb-8 shadow-lg",children:[s.jsxs("h4",{className:"font-semibold text-gray-900 mb-6 flex items-center gap-3 text-xl",children:[s.jsx("span",{className:"text-2xl",children:"🚀"}),"Mutualisation Dynamique des Frais Généraux"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl border border-gray-200 hover:bg-gray-100 transition-all duration-300",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-3 font-medium",children:"🎯 Base fixe semaine"}),s.jsx("div",{className:"font-light text-2xl text-gray-900",children:q(((K=c.mutualisation)==null?void 0:K.baseFixes)||0)})]}),s.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl border border-gray-200 hover:bg-gray-100 transition-all duration-300",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-3 font-medium",children:"👥 Total affectations / Semaine"}),s.jsxs("div",{className:"font-light text-2xl text-gray-900",children:[((se=c.mutualisation)==null?void 0:se.totalAffectations)||0," affectations"]})]}),s.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl border border-gray-200 hover:bg-gray-100 transition-all duration-300",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-3 font-medium",children:"📊 Calcul mutualisation / Semaine"}),s.jsxs("div",{className:"font-light text-lg text-gray-900",children:[q(((Z=c.mutualisation)==null?void 0:Z.baseFixes)||0)," ÷ ",((ie=c.mutualisation)==null?void 0:ie.totalAffectations)||0," affectations"]})]}),s.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl border border-gray-200 hover:bg-gray-100 transition-all duration-300",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-3 font-medium",children:"💰 Coût par affectation / Semaine"}),s.jsx("div",{className:"font-light text-2xl text-green-600",children:q(((ee=c.mutualisation)==null?void 0:ee.fraisGenerauxParPersonne)||0)})]})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-200",children:[s.jsx("div",{className:"text-base text-gray-800 mb-4 font-medium",children:"📊 Logique de Mutualisation :"}),s.jsxs("div",{className:"text-sm space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"🎯 Base fixe semaine :"}),s.jsx("span",{className:"font-light text-gray-900 text-lg",children:q(((ue=c.mutualisation)==null?void 0:ue.baseFixes)||0)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"👥 Nombre d'affectations / Semaine :"}),s.jsxs("span",{className:"font-light text-gray-900 text-lg",children:[((ae=c.mutualisation)==null?void 0:ae.totalAffectations)||0," affectations"]})]}),s.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"💰 Coût par affectation / Semaine :"}),s.jsx("span",{className:"font-light text-green-600 text-lg",children:q(((re=c.mutualisation)==null?void 0:re.fraisGenerauxParPersonne)||0)})]}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 p-3 rounded-xl",children:"💡 Plus il y a d'affectations dans la semaine, moins chaque affectation coûte !"})]})]}),v&&s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-2xl border border-orange-200 mt-6",children:[s.jsxs("div",{className:"text-base text-orange-800 mb-4 font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"⚠️"}),"Frais Généraux Restants à Absorber - Semaine ",v.semaine," (",v.annee,")",s.jsx("span",{className:"text-sm bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"254,29€ fixe par demi-journée"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-700 font-medium mb-2",children:"💰 Total Semaine"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:q(v.fraisGenerauxTotalSemaine)})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-green-200",children:[s.jsx("div",{className:"text-sm text-green-700 font-medium mb-2",children:"✅ Absorbés"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:q(v.fraisGenerauxAbsorbes)})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:[s.jsx("div",{className:"text-sm text-red-700 font-medium mb-2",children:"❌ Restants"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:q(v.fraisGenerauxRestants)})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-700 font-medium mb-2",children:"📊 Taux"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[v.tauxAbsorption.toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-800 font-medium mb-2",children:"📅 Détails par Jour"}),s.jsx("div",{className:"grid grid-cols-5 gap-2 text-xs mb-3",children:v.detailsParJour.map(fe=>s.jsxs("div",{className:`p-2 rounded-lg border ${fe.affectationsDuJour>0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[s.jsx("div",{className:"font-medium",children:new Date(fe.jour).toLocaleDateString("fr-FR",{weekday:"short"})}),s.jsxs("div",{className:"text-xs text-gray-600",children:[fe.affectationsDuJour," demi-journées"]}),s.jsxs("div",{className:`text-xs font-bold ${fe.affectationsDuJour>0?"text-green-600":"text-red-600"}`,children:[fe.affectationsDuJour>0?"✅":"❌"," ",q(fe.affectationsDuJour>0?fe.fraisGenerauxAbsorbesJour:fe.fraisGenerauxRestantsJour)]})]},fe.jour))}),s.jsxs("div",{className:"text-xs text-orange-700 bg-orange-50 p-2 rounded-lg",children:["💡 ",s.jsx("strong",{children:"Logique SIMPLE :"})," 1 affectation = 1 demi-journée = 254,29€ FIXE. 2 demi-journées/jour = 2 × 254,29€ = 508,58€. Calcul direct sans mutualisation."]})]})]}),C&&s.jsx("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-200 mt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-800 font-medium",children:"Chargement des frais généraux de la semaine..."}),s.jsx("p",{className:"text-blue-600 text-sm",children:"Calcul des montants restants à absorber..."})]})]})})]}),d&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"font-semibold text-gray-800 mb-3",children:["📋 Détails par Affaire (",$.length," affaires)"]}),$.map(fe=>s.jsxs("div",{className:"border border-gray-200 rounded-3xl p-6 bg-white shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:"📁"}),s.jsxs("h5",{className:"font-semibold text-gray-900 text-lg",children:[fe.affaire.numero," - ",fe.affaire.libelle]})]}),s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 px-4 py-2 rounded-full",children:[X(fe.totalHeures)," | ",q(fe.totalCoutTotal)," / Semaine"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600",children:"📅"}),"Coûts Hebdomadaires"]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl hover:bg-blue-100 transition-all duration-300 border border-blue-200",children:[s.jsx("span",{className:"text-blue-700 font-medium",children:"💰 M.O. Coût / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-blue-900 text-lg",children:q(fe.totalCoutMainOeuvre)})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl hover:bg-blue-100 transition-all duration-300 border border-blue-200",children:[s.jsx("span",{className:"text-blue-700 font-medium",children:"💸 M.O. Vente / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-green-600 text-lg",children:q(fe.totalVenteMainOeuvre)})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl hover:bg-blue-100 transition-all duration-300 border border-blue-200",children:[s.jsx("span",{className:"text-blue-700 font-medium",children:"🏢 Frais gén. / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-blue-900 text-lg",children:q(fe.totalCoutFraisGeneraux)})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl hover:bg-blue-100 transition-all duration-300 border border-blue-200",children:[s.jsx("span",{className:"text-blue-700 font-medium",children:"💼 Total Vente / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-green-600 text-lg",children:q(fe.totalVenteTotal)})]})]})]}),(()=>{const G=F[fe.affaire.id];if(console.log(`🔍 Totaux historiques pour affaire ${fe.affaire.numero}:`,{affaireId:fe.affaire.id,totauxDisponibles:!!G,totaux:G}),!G)return s.jsxs("div",{className:"mb-6",children:[s.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600 animate-spin",children:"⏳"}),"Récupération Totaux Historiques en cours..."]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-800 font-medium",children:"Chargement des totaux historiques..."}),s.jsx("p",{className:"text-blue-600 text-sm",children:"Récupération depuis toutes les semaines..."})]})]})})]});const oe=G.totalAffectations,Se=G.totalHeures,ge=G.totalCoutMainOeuvre,te=G.totalVenteMainOeuvre,ye=G.totalFraisGeneraux,we=G.nombreOuvriersTotal;return s.jsxs("div",{className:"mb-6",children:[s.jsxs("h6",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-purple-600",children:"📊"}),"Total RÉEL Accumulé pour l'Affaire"]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl hover:bg-purple-100 transition-all duration-300 border border-purple-200",children:[s.jsx("span",{className:"text-purple-700 font-medium",children:"👥 Total Affectations :"}),s.jsx("span",{className:"font-bold ml-2 text-purple-900 text-lg",children:oe})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl hover:bg-purple-100 transition-all duration-300 border border-purple-200",children:[s.jsx("span",{className:"text-purple-700 font-medium",children:"⏱️ Total Heures :"}),s.jsx("span",{className:"font-bold ml-2 text-purple-900 text-lg",children:X(Se)})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl hover:bg-purple-100 transition-all duration-300 border border-purple-200",children:[s.jsx("span",{className:"text-purple-700 font-medium",children:"💰 M.O. Coût TOTAL :"}),s.jsx("span",{className:"font-bold ml-2 text-purple-900 text-lg",children:q(ge)})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl hover:bg-purple-100 transition-all duration-300 border border-purple-200",children:[s.jsx("span",{className:"text-purple-700 font-medium",children:"🏢 Frais Gén. TOTAL :"}),s.jsx("span",{className:"font-bold ml-2 text-purple-900 text-lg",children:q(ye)})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl hover:bg-purple-100 transition-all duration-300 border border-purple-200",children:[s.jsx("span",{className:"text-purple-700 font-medium",children:"💼 Vente TOTALE :"}),s.jsx("span",{className:"font-bold ml-2 text-green-600 text-xl",children:q(te)})]})]}),s.jsxs("div",{className:"mt-3 text-xs text-gray-600 bg-purple-50 p-3 rounded-xl border border-purple-200",children:[s.jsx("span",{className:"font-medium",children:"📊 Info :"})," Totaux accumulés depuis le début de l'affaire",s.jsxs("span",{className:"font-bold text-green-600",children:["(✅ Données historiques complètes - ",we," ouvriers TOTAL analysés)"]}),s.jsx("br",{}),s.jsx("span",{className:"text-purple-600 font-medium",children:"🔄 Ces totaux restent identiques quelle que soit la semaine affichée"})]})]})})(),s.jsx("div",{className:"space-y-3",children:fe.details.map(G=>{var oe;return s.jsxs("div",{className:"bg-white p-4 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all duration-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"px-5 py-3 rounded-full font-bold text-white text-lg shadow-lg",style:{backgroundColor:G.ouvrier.couleurPlanning||"#9CA3AF",color:"#ffffff"},children:G.ouvrier.prenom||G.ouvrier.nom}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-gray-600 text-base font-medium",children:[G.ouvrier.nom," ",G.ouvrier.prenom]}),s.jsxs("div",{className:"text-gray-500 text-sm",children:[G.totalPeriodes," affectation(s) • ",X(G.totalHeures)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:q(G.totalCoutMainOeuvre+G.totalCoutFraisGeneraux)}),s.jsx("div",{className:"text-sm text-gray-500",children:"Coût total / Semaine"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"📅 Affectations :"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:G.details.map((Se,ge)=>{const te=G.details.reduce((ye,we)=>(ye[we.typeActivite]=(ye[we.typeActivite]||0)+1,ye),{});return ge===G.details.findIndex(ye=>ye.typeActivite===Se.typeActivite)?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-3 py-2 rounded-lg font-bold text-sm shadow-sm ${Se.typeActivite==="POSE"?"bg-green-100 text-green-800 border-2 border-green-300":"bg-blue-100 text-blue-800 border-2 border-blue-300"}`,children:Se.typeActivite==="POSE"?"🏗️ POSE":"🔨 FABRICATION"}),s.jsxs("span",{className:"text-base font-semibold text-gray-700",children:[te[Se.typeActivite]," période(s)"]})]},Se.typeActivite):null})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-orange-700 font-semibold text-sm",children:"💰 M.O. Coût / Semaine"}),s.jsx("div",{className:"text-orange-900 font-bold text-base",children:q(G.totalCoutMainOeuvre)})]}),s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-green-700 font-semibold text-sm",children:"💸 M.O. Vente / Semaine"}),s.jsx("div",{className:"text-green-900 font-bold text-base",children:q(G.totalVenteMainOeuvre)})]}),s.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[s.jsx("div",{className:"text-purple-700 font-semibold text-sm",children:"🏢 Frais Gén. / Semaine"}),s.jsx("div",{className:"text-purple-900 font-bold text-base",children:q(G.totalCoutFraisGeneraux)})]}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-blue-700 font-semibold text-sm",children:"📊 Mutualisation / Semaine"}),s.jsxs("div",{className:"text-blue-900 font-bold text-base",children:[q(((oe=c.mutualisation)==null?void 0:oe.fraisGenerauxParPersonne)||0)," × ",G.totalPeriodes]})]})]}),(()=>{const Se=`${G.ouvrier.id}-${fe.affaire.id}`,ge=g[Se];return ge?s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 border-t border-gray-200 pt-3",children:[s.jsxs("div",{className:"bg-orange-100 p-3 rounded-lg border-2 border-orange-300",children:[s.jsx("div",{className:"text-orange-800 font-bold text-sm",children:"💰 M.O. Coût TOTAL Affaire"}),s.jsx("div",{className:"text-orange-950 font-bold text-lg",children:q(ge.totalCoutMainOeuvre)}),s.jsxs("div",{className:"text-orange-600 text-xs",children:[ge.totalAffectations," affectations totales"]})]}),s.jsxs("div",{className:"bg-green-100 p-3 rounded-lg border-2 border-green-300",children:[s.jsx("div",{className:"text-green-800 font-bold text-sm",children:"💸 M.O. Vente TOTALE Affaire"}),s.jsx("div",{className:"text-green-950 font-bold text-lg",children:q(ge.totalVenteMainOeuvre)}),s.jsxs("div",{className:"text-green-600 text-xs",children:[ge.semaines.length," semaine(s) travaillée(s)"]})]}),s.jsxs("div",{className:"bg-purple-100 p-3 rounded-lg border-2 border-purple-300",children:[s.jsx("div",{className:"text-purple-800 font-bold text-sm",children:"🏢 Frais Gén. TOTAL Affaire"}),s.jsx("div",{className:"text-purple-950 font-bold text-lg",children:q(ge.totalFraisGeneraux)}),s.jsx("div",{className:"text-purple-600 text-xs",children:"Frais généraux absorbés"})]}),s.jsxs("div",{className:"bg-blue-100 p-3 rounded-lg border-2 border-blue-300",children:[s.jsx("div",{className:"text-blue-800 font-bold text-sm",children:"⏱️ Heures TOTALES Affaire"}),s.jsx("div",{className:"text-blue-950 font-bold text-lg",children:X(ge.totalHeures)}),s.jsxs("div",{className:"text-blue-600 text-xs",children:["Du ",ge.premiereAffectation?new Date(ge.premiereAffectation).toLocaleDateString("fr-FR"):"N/A"," au ",ge.derniereAffectation?new Date(ge.derniereAffectation).toLocaleDateString("fr-FR"):"N/A"]})]})]}):s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 border-t border-gray-200 pt-3",children:[s.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border-2 border-gray-300 animate-pulse",children:[s.jsx("div",{className:"text-gray-600 font-bold text-sm",children:"💰 M.O. Coût TOTAL Affaire"}),s.jsx("div",{className:"text-gray-700 font-bold text-lg",children:"Chargement..."}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Récupération historique"})]}),s.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border-2 border-gray-300 animate-pulse",children:[s.jsx("div",{className:"text-gray-600 font-bold text-sm",children:"💸 M.O. Vente TOTALE Affaire"}),s.jsx("div",{className:"text-gray-700 font-bold text-lg",children:"Chargement..."}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Récupération historique"})]}),s.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border-2 border-gray-300 animate-pulse",children:[s.jsx("div",{className:"text-gray-600 font-bold text-sm",children:"🏢 Frais Gén. TOTAL Affaire"}),s.jsx("div",{className:"text-gray-700 font-bold text-lg",children:"Chargement..."}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Récupération historique"})]}),s.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border-2 border-gray-300 animate-pulse",children:[s.jsx("div",{className:"text-gray-600 font-bold text-sm",children:"⏱️ Heures TOTALES Affaire"}),s.jsx("div",{className:"text-gray-700 font-bold text-lg",children:"Chargement..."}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Récupération historique"})]})]})})()]},G.ouvrier.id)})})]},fe.affaire.id))]}),s.jsxs("div",{className:"mt-8 p-8 bg-white rounded-3xl border border-gray-200 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),s.jsx("h4",{className:"font-semibold text-gray-900 text-xl",children:"Résumé Final"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-sm",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl hover:bg-gray-100 transition-all duration-300",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Affaires :"}),s.jsx("span",{className:"font-light ml-2 text-gray-900 text-2xl",children:c.nombreAffaires})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl hover:bg-gray-100 transition-all duration-300",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Heures totales / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-gray-900 text-2xl",children:X(c.totalHeures)})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl hover:bg-gray-100 transition-all duration-300",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Tarif moyen/heure / Semaine :"}),s.jsxs("div",{className:"ml-2 space-y-1",children:[c.tarifVenteMoyenPondere>0?s.jsxs("div",{className:"font-light text-green-600",children:["💸 ",q(c.tarifVenteMoyenPondere)," ",s.jsx("span",{className:"text-xs text-gray-500",children:"(vente)"})]}):null,c.tarifCoutMoyenPondere>0?s.jsxs("div",{className:"text-sm text-gray-700 font-light",children:["💰 ",q(c.tarifCoutMoyenPondere)," ",s.jsx("span",{className:"text-xs text-gray-500",children:"(coût)"})]}):null,c.tarifVenteMoyenPondere===0&&c.tarifCoutMoyenPondere===0?s.jsxs("div",{className:"font-light text-gray-600",children:[q(c.coutMoyenHeure)," ",s.jsx("span",{className:"text-xs text-gray-500",children:"(ancien)"})]}):null]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl hover:bg-gray-100 transition-all duration-300",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Coût moyen/affaire / Semaine :"}),s.jsx("span",{className:"font-light ml-2 text-gray-900 text-2xl",children:q(c.coutMoyenAffaire)})]})]})]})]})},yq=({className:t=""})=>{var Z,ie,ee,ue;const[e,r]=y.useState(new Date),[n,a]=y.useState({salaries:[],sousTraitants:[]}),[i,o]=y.useState([]),[l,c]=y.useState({}),[u,d]=y.useState(!0),[f,A]=y.useState(null),[h,m]=y.useState(!1),[p,g]=y.useState(!1),[x,v]=y.useState({});y.useEffect(()=>{j()},[e]);const b=ae=>{const re=new Date(ae);re.setUTCDate(re.getUTCDate()+4-(re.getUTCDay()||7));const fe=new Date(Date.UTC(re.getUTCFullYear(),0,1));return Math.ceil(((re-fe)/864e5+1)/7)},C=()=>{const ae=new Date(e),re=ae.getDay(),fe=ae.getDate()-re+(re===0?-6:1);ae.setDate(fe);const G=[];for(let oe=0;oe<5;oe++){const Se=new Date(ae);Se.setDate(ae.getDate()+oe),G.push(Se)}return G},j=async()=>{try{d(!0);const ae=C(),re=on(ae[0],"yyyy-MM-dd"),[fe,G,oe]=await Promise.all([Bs.getOuvriersDisponibles(),Bs.getAffairesActives(),Bs.getPlanningHebdomadaire(re,!1)]);a(fe),o(G);const Se={};oe&&oe.length&&oe.forEach(ge=>{const te=new Date(ge.dateAffectation).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),ye=ge.periode.toLowerCase()==="aprem"?"aprem":"matin",we=`${ge.affaire.libelle}-${te}-${ye}`;Se[we]||(Se[we]=[]);const be={id:ge.id,nom:ge.user.prenom||ge.user.nom,user:ge.user,affaire:ge.affaire,periode:ge.periode,dateAffectation:ge.dateAffectation};Se[we].push(be)}),c(Se)}catch(ae){console.error("Erreur lors du chargement des données:",ae)}finally{d(!1)}},w=ae=>{const re=new Date(e);re.setDate(e.getDate()+ae*7),r(re)},N=()=>{r(new Date)},E=ae=>(ae==null?void 0:ae.couleurPlanning)||"#9CA3AF",_=ae=>{v(re=>({...re,[ae]:re[ae]==="ATELIER"?"POSE":"ATELIER"}))},k=ae=>x[ae]||"POSE",D=(ae,re)=>{const fe={type:"employe",nom:re.prenom||re.nom,prenom:re.prenom,id:re.id};ae.dataTransfer.setData("text/plain",JSON.stringify(fe)),A(fe),m(!0)},S=(ae,re)=>{var G,oe,Se;const fe={type:"affectation",id:re.id,nom:((G=re.user)==null?void 0:G.prenom)||((oe=re.user)==null?void 0:oe.nom)||re.nom,prenom:(Se=re.user)==null?void 0:Se.prenom,user:re.user,affaire:re.affaire,periode:re.periode,dateAffectation:re.dateAffectation};ae.dataTransfer.setData("text/plain",JSON.stringify(fe)),A(fe),m(!0),ae.target.style.opacity="0.5"},F=ae=>{A(null),m(!1),g(!1),ae.target&&(ae.target.style.opacity="1")},M=ae=>new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),12,0,0,0).toISOString(),R=(ae,re,fe,G)=>{var Se,ge;if(!l||!l.length)return null;const oe=M(re).split("T")[0];for(const te of l)if(((Se=te.user)==null?void 0:Se.id)===ae&&te.dateAffectation.split("T")[0]===oe&&te.periode===fe.toUpperCase()&&((ge=te.affaire)==null?void 0:ge.id)!==G)return te;return null},U=async(ae,re,fe,G)=>{var Se,ge,te,ye,we,be,Te,Oe;ae.preventDefault(),ae.stopPropagation();const oe=ae.currentTarget;try{const Me=JSON.parse(ae.dataTransfer.getData("text/plain"));if(Me.type==="affectation"){const Ve=R((Se=Me.user)==null?void 0:Se.id,fe,G,re.id);if(Ve){const ze=Me.nom||Me.prenom||"Cet ouvrier",ht=fe.toLocaleDateString("fr-FR"),gt=G==="MATIN"?"matin":"après-midi",Ct=((ge=Ve.affaire)==null?void 0:ge.numero)||((te=Ve.affaire)==null?void 0:te.libelle);if(!confirm(`⚠️ CONFLIT D'AFFECTATION DÉTECTÉ
          
${ze} est déjà affecté à l'affaire "${Ct}" pour le ${ht} ${gt}.

Voulez-vous continuer ? Cela remplacera l'affectation existante.

✅ OUI = Remplacer l'affectation
❌ NON = Annuler l'opération`))return}const Pe={affaireId:re.id,dateAffectation:M(fe),periode:G.toUpperCase()};await Bs.updateAffectation(Me.id,Pe),await j()}else{const Ve=R(Me.id,fe,G,re.id);if(Ve){const ze=Me.nom||Me.prenom||"Cet ouvrier",ht=fe.toLocaleDateString("fr-FR"),gt=G==="MATIN"?"matin":"après-midi",Ct=((ye=Ve.affaire)==null?void 0:ye.numero)||((we=Ve.affaire)==null?void 0:we.libelle);alert(`⚠️ CONFLIT D'AFFECTATION
          
${ze} est déjà affecté à l'affaire "${Ct}" pour le ${ht} ${gt}.

Solutions possibles :
• Supprimer l'affectation existante en la glissant vers la poubelle
• Choisir une autre période (matin/après-midi)
• Choisir une autre date
• Utiliser un autre ouvrier disponible`);return}const Pe={affaireId:re.id,userId:Me.id,dateAffectation:M(fe),periode:G.toUpperCase(),typeActivite:"FABRICATION"};await Bs.affecterOuvrier(Pe),await j()}oe.style.backgroundColor="#dcfce7",oe.style.borderColor="#16a34a",setTimeout(()=>{oe&&(oe.style.backgroundColor="",oe.style.borderColor="")},1e3)}catch(Me){if(console.error("Erreur lors de l'affectation:",Me),((be=Me.response)==null?void 0:be.status)===409){const Ve=data.nom||data.prenom||"Cet ouvrier",Pe=fe.toLocaleDateString("fr-FR");alert(`⚠️ CONFLIT D'AFFECTATION
        
${Ve} est déjà affecté à une autre affaire pour le ${Pe} ${G==="MATIN"?"matin":"après-midi"}.

Solutions possibles :
• Supprimer l'affectation existante en la glissant vers la poubelle
• Choisir une autre période (matin/après-midi)
• Choisir une autre date
• Utiliser un autre ouvrier disponible`)}else alert(`❌ Erreur lors de l'affectation : ${((Oe=(Te=Me.response)==null?void 0:Te.data)==null?void 0:Oe.message)||Me.message}`);oe.style.backgroundColor="#fee2e2",oe.style.borderColor="#dc2626",setTimeout(()=>{oe&&(oe.style.backgroundColor="",oe.style.borderColor="")},1e3)}finally{A(null),m(!1)}},z=ae=>{ae.preventDefault(),ae.currentTarget.style.backgroundColor="#f0fdf4",ae.currentTarget.style.borderColor="#22c55e"},Q=ae=>{ae.currentTarget.style.backgroundColor="",ae.currentTarget.style.borderColor=""},H=ae=>{ae.preventDefault(),p||g(!0)},q=ae=>{ae.preventDefault(),g(!1)},X=async ae=>{ae.preventDefault(),ae.stopPropagation(),g(!1);try{const re=JSON.parse(ae.dataTransfer.getData("text/plain"));re.type==="affectation"&&(await Bs.desaffecterOuvrier(re.id),await j())}catch(re){console.error("Erreur lors de la suppression:",re)}finally{A(null),m(!1)}},$=ae=>{const re={};return Object.entries(ae).forEach(([fe,G])=>{G.forEach(oe=>{var ge,te;const Se=(ge=oe.affaire)==null?void 0:ge.id;Se&&(re[Se]||(re[Se]=[]),re[Se].push({id:oe.id,userId:(te=oe.user)==null?void 0:te.id,dateAffectation:oe.dateAffectation,periode:oe.periode,typeActivite:k(oe.id)==="POSE"?"POSE":"FABRICATION",user:oe.user,affaire:oe.affaire}))})}),re},K=C(),se=b(e);return s.jsxs("div",{className:`planning-equipe-integre ${t}`,children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"PLANNING DES AFFAIRES"}),s.jsxs("div",{className:"mt-6 flex flex-col items-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-6 mb-4",children:s.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 px-4 py-2 rounded-lg border",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-500 border-2 border-green-500"}),s.jsx("span",{className:"font-medium text-gray-700",children:"Contour vert = POSE"})]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-500"}),s.jsx("span",{className:"font-medium text-gray-700",children:"Pas de contour = ATELIER"})]}),s.jsx("span",{className:"text-xs text-gray-500 ml-2 italic",children:"(Double-clic pour changer)"})]})}),s.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-green-200 border border-green-300"}),"Chef d'Atelier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-200 border border-blue-300"}),"Chef de Chantier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-200 border border-purple-300"}),"Ouvrier Atelier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-cyan-200 border border-cyan-300"}),"Ouvrier Chantier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-200 border border-orange-300"}),"Sous-traitant"]})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs("div",{className:"w-32 text-lg font-medium text-gray-600",children:["Salarié",s.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",((Z=n.salaries)==null?void 0:Z.length)||0,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:u?s.jsx("div",{className:"text-gray-500",children:"Chargement..."}):(ie=n.salaries)==null?void 0:ie.map(ae=>s.jsx("button",{draggable:!0,onDragStart:re=>D(re,ae),onDragEnd:F,className:`px-6 py-3 rounded-full font-semibold text-base transition-all duration-200 
                    hover:scale-105 hover:shadow-md cursor-grab active:cursor-grabbing`,style:{backgroundColor:E(ae),color:"#ffffff"},children:ae.prenom||ae.nom},ae.id))})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"w-32 text-lg font-medium text-gray-600",children:["Sous traitant",s.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",((ee=n.sousTraitants)==null?void 0:ee.length)||0,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:u?s.jsx("div",{className:"text-gray-500",children:"Chargement..."}):(ue=n.sousTraitants)==null?void 0:ue.map(ae=>s.jsx("button",{draggable:!0,onDragStart:re=>D(re,ae),onDragEnd:F,className:`px-6 py-3 rounded-full font-semibold text-base transition-all duration-200 
                    hover:scale-105 hover:shadow-md cursor-grab active:cursor-grabbing`,style:{backgroundColor:E(ae),color:"#ffffff"},children:ae.prenom||ae.nom},ae.id))})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-[300px_repeat(5,1fr)] gap-0",children:[s.jsx("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 font-semibold text-gray-600",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>w(-1),className:"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors duration-200 shadow-sm",children:s.jsx(wx,{size:20})}),s.jsx("div",{className:"bg-gray-100 px-4 py-2 rounded-lg shadow-sm",children:s.jsxs("span",{className:"text-base font-semibold text-gray-700",children:["Semaine ",se]})}),s.jsx("button",{onClick:()=>w(1),className:"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors duration-200 shadow-sm",children:s.jsx(jx,{size:20})})]}),s.jsxs("button",{onClick:N,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors duration-200 shadow-sm text-sm font-medium",children:["Aujourd'hui (",new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),")"]})]})}),K.map((ae,re)=>s.jsxs("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-600",children:ae.toLocaleDateString("fr-FR",{weekday:"long"}).toUpperCase()}),s.jsx("div",{className:"text-base font-semibold text-gray-500",children:ae.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[s.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm font-medium text-gray-500",children:"MATIN"}),s.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm font-medium text-gray-500",children:"APREM"})]})]},re)),u?s.jsx("div",{className:"col-span-6 text-center py-16 text-gray-500",children:"Chargement des affaires..."}):i.map(ae=>s.jsxs(le.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 flex flex-col justify-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-700",children:ae.libelle}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:"Livraison le "}),s.jsx("span",{className:"font-medium",children:ae.dateCloturePrevue?new Date(ae.dateCloturePrevue).toLocaleDateString("fr-FR"):"N/A"})]})]}),K.map((re,fe)=>s.jsx("div",{className:"border-b border-r border-gray-200 p-2",children:s.jsx("div",{className:"grid grid-cols-2 gap-2 h-[210px]",children:["matin","aprem"].map(G=>{var ge;const oe=re.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),Se=`${ae.libelle}-${oe}-${G}`;return s.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-3 min-h-[190px] flex flex-wrap gap-1 items-start content-start transition-colors duration-200",onDrop:te=>U(te,ae,re,G),onDragOver:te=>z(te),onDragLeave:te=>Q(te),children:(ge=l[Se])==null?void 0:ge.map((te,ye)=>{const we=k(te.id||`${Se}-${ye}`),be=we==="POSE"?{border:"4px solid #22c55e",boxShadow:"0 0 0 2px #16a34a"}:{};return s.jsx("span",{draggable:!0,className:`block w-full px-4 py-3 rounded-full text-sm font-semibold cursor-grab hover:cursor-grabbing 
                                    hover:scale-105 transition-all duration-200 mb-2 text-center`,style:{backgroundColor:te.user?E(te.user):"#9CA3AF",color:"#ffffff",...be},onDragStart:Te=>S(Te,te),onDragEnd:F,onDoubleClick:()=>_(te.id||`${Se}-${ye}`),title:`Double-clic pour changer: ${we==="POSE"?"POSE → ATELIER":"ATELIER → POSE"}`,children:te.nom},ye)})},G)})})},fe))]},ae.id))]})}),s.jsx("div",{className:"mt-8",children:s.jsx(bq,{planningData:$(l),ouvriers:n,affaires:i,weekDays:C(),loading:u,className:"w-full"})}),s.jsx(vq,{isVisible:h,isActive:p,onDrop:X,onDragOver:H,onDragLeave:q})]})},B6=()=>{const[t,e]=y.useState([]),[r,n]=y.useState({}),[a,i]=y.useState(!0),[o,l]=y.useState(""),[c,u]=y.useState(null),[d,f]=y.useState({key:"createdAt",direction:"desc"}),[A,h]=y.useState({page:1,limit:50,total:0,totalPages:0}),m=Fr(),p=y.useCallback(k=>{const D=k.caReelHt||0,S=k.achatReelHt||0;if(D===0)return{taux:0,couleur:"text-gray-500",bg:"bg-gray-100"};const M=(D-S)/D*100;let R,U;return M>=30?(R="text-green-700",U="bg-green-100"):M>=15?(R="text-amber-700",U="bg-amber-100"):M>=0?(R="text-orange-700",U="bg-orange-100"):(R="text-red-700",U="bg-red-100"),{taux:M,couleur:R,bg:U}},[]),g=y.useCallback(k=>{var U,z,Q,H,q;if(!k)return!1;const D=((U=k._count)==null?void 0:U.bdc)>0,S=((z=k._count)==null?void 0:z.pointages)>0,F=((Q=k._count)==null?void 0:Q.phases)>0,M=((H=k._count)==null?void 0:H.devis)>0,R=((q=k._count)==null?void 0:q.achats)>0;return!D&&!S&&!F&&!M&&!R},[]),x=y.useCallback(k=>{if(!k||!k._count)return"";const D=[];return k._count.bdc>0&&D.push(`${k._count.bdc} bon(s) de commande`),k._count.pointages>0&&D.push(`${k._count.pointages} pointage(s)`),k._count.phases>0&&D.push(`${k._count.phases} phase(s)`),k._count.devis>0&&D.push(`${k._count.devis} devis`),k._count.achats>0&&D.push(`${k._count.achats} achat(s)`),D.length===0?"":`Cette affaire contient : ${D.join(", ")}`},[]),v=y.useCallback(async()=>{try{i(!0);const k={skip:(A.page-1)*A.limit,take:A.limit,search:o,statut:c,sortBy:d.key,sortOrder:d.direction};console.log("🔍 Paramètres de requête:",k);const D=await $n.getAffaires(k);console.log("📊 Données reçues du backend:",D),e(D.affaires||[]),h(S=>({...S,total:D.total,totalPages:Math.ceil(D.total/S.limit)}))}catch(k){console.error("Erreur chargement affaires:",k),ve.error("Impossible de charger les affaires.")}finally{i(!1)}},[A.page,A.limit,o,c,d]),b=y.useCallback(async()=>{try{const k=await $n.getGlobalStats();n(k)}catch(k){console.error("Erreur chargement stats:",k),ve.error("Impossible de charger les statistiques.")}},[]);y.useEffect(()=>{console.log("🚀 AffairesList mounted - Vérification des filtres stockés...");const k=Object.keys(localStorage);console.log("📦 LocalStorage keys:",k),k.forEach(D=>{(D.includes("affaire")||D.includes("filter")||D.includes("search"))&&console.log(`📦 ${D}:`,localStorage.getItem(D))})},[]),y.useEffect(()=>{console.log("📊 Chargement des affaires avec filtres:",{searchTerm:o,filterStatus:c,pagination:A}),v(),b()},[v,b]);const C=()=>{l(""),u(null),h(k=>({...k,page:1})),v(),b(),ve.success("Données actualisées")},j=async k=>{var S,F;const D=x(k);if(!g(k)){const M=`${D}

Voulez-vous :
- Annuler (recommandé)
- Supprimer AVEC toutes les données associées (IRRÉVERSIBLE)`;window.confirm(M+`

Cliquez OK pour une suppression FORCÉE ou Annuler pour abandonner.`)&&window.prompt(`⚠️ ATTENTION : Suppression forcée !

${D}

Toutes ces données seront DÉFINITIVEMENT supprimées.

Tapez "1234" pour confirmer :`)==="1234"&&await w(k);return}if(window.confirm(`Êtes-vous sûr de vouloir supprimer l'affaire "${k.numero}" ?`))try{await $n.deleteAffaire(k.id),ve.success("Affaire supprimée avec succès"),C()}catch(M){console.error("Erreur lors de la suppression:",M);const R=((F=(S=M.response)==null?void 0:S.data)==null?void 0:F.message)||"Erreur lors de la suppression de l'affaire";ve.error(R)}},w=async k=>{var D,S;try{const F=await $n.forceDeleteAffaire(k.id);ve.success(F.message||"Affaire et toutes ses dépendances supprimées avec succès"),C()}catch(F){console.error("Erreur lors de la suppression forcée:",F);const M=((S=(D=F.response)==null?void 0:D.data)==null?void 0:S.message)||"Erreur lors de la suppression forcée";ve.error(M)}},N=async k=>{if(window.confirm(`Voulez-vous copier l'affaire "${k.numero}" ?`))try{const D=await $n.duplicateAffaire(k.id);ve.success(`Affaire copiée avec succès ! Nouveau numéro : ${D.numero}`),C(),m(`/affaires/${D.id}`)}catch(D){console.error("Erreur lors de la duplication:",D),ve.error("Erreur lors de la copie de l'affaire")}},E=k=>{switch(k){case"EN_COURS":return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-amber-800 bg-amber-100 rounded-full",children:"En cours"});case"TERMINEE":return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-green-800 bg-green-100 rounded-full",children:"Terminée"});case"EN_ATTENTE":return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-stone-800 bg-stone-200 rounded-full",children:"En attente"});case"PLANIFIEE":return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-indigo-800 bg-indigo-100 rounded-full",children:"Planifiée"});case"CLOTUREE":return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-purple-800 bg-purple-100 rounded-full",children:"Clôturée"});default:return s.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-800 bg-gray-100 rounded-full",children:k})}},_=t;return console.log("🔍 Toutes les affaires:",t),console.log("🔍 Nombre d'affaires:",t.length),console.log("🔍 FilteredAffaires:",_),console.log("🔍 Nombre filteredAffaires:",_.length),a&&t.length===0?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement des affaires..."})]})}):s.jsx("div",{className:"p-6 md:p-8 lg:p-10 bg-stone-50 min-h-screen",children:s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"p-8 rounded-2xl shadow-lg mb-8 text-white relative overflow-hidden h-80 flex flex-col justify-end",style:{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/Divers%20belles%20images%2FCapture%20d%E2%80%99%C3%A9cran%202025-07-01%20192449.png?alt=media&token=18a57ff9-297e-4978-b387-d2f77f0fa0d0')",backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/40"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("h1",{className:"text-4xl font-bold",children:"Gestion des Affaires"}),s.jsx("p",{className:"mt-2 text-lg text-white/80",children:"Suivez et gérez toutes vos affaires."}),s.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[s.jsx(Xe,{onClick:()=>m("/affaires/apple"),className:"text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 backdrop-blur-sm border-2 border-white/30",style:{backgroundColor:"#007AFF",color:"white"},onMouseEnter:k=>k.target.style.backgroundColor="#0056CC",onMouseLeave:k=>k.target.style.backgroundColor="#007AFF",children:"🍎 VERSION APPLE PLANNING"}),s.jsxs(Xe,{onClick:()=>m("/affaires/resultats"),variant:"outline",className:"bg-white/10 hover:bg-white/20 border-white/30 text-white backdrop-blur-md",children:[s.jsx(Do,{className:"w-5 h-5 mr-2"}),"Résultats condensés"]}),s.jsxs(Xe,{onClick:C,variant:"outline",className:"bg-white/10 hover:bg-white/20 border-white/30 text-white backdrop-blur-md",children:[s.jsx(_a,{className:"w-5 h-5 mr-2"}),"Actualiser"]}),s.jsx(Xe,{onClick:async()=>{console.log("🔧 DEBUG: Forcer le chargement de TOUTES les affaires"),l(""),u(null),h({page:1,limit:100,total:0,totalPages:0});try{const k=await $n.getAffaires({take:100,skip:0});console.log("🔧 DEBUG: Réponse complète:",k),e(k.affaires||[]),ve.success(`${k.total} affaires chargées`)}catch(k){console.error("🔧 DEBUG: Erreur:",k),ve.error("Erreur lors du chargement")}},variant:"outline",className:"bg-red-600 hover:bg-red-700 text-white",children:"DEBUG: Voir TOUTES"}),s.jsxs(Xe,{className:"text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 backdrop-blur-sm",style:{backgroundColor:"#424632",color:"white"},onMouseEnter:k=>k.target.style.backgroundColor="#3a3c2a",onMouseLeave:k=>k.target.style.backgroundColor="#424632",onClick:()=>m("/affaires/nouveau"),children:[s.jsx(Jn,{className:"w-5 h-5 mr-2"}),"Nouvelle affaire"]})]})]})]}),s.jsx("div",{className:"w-full",children:s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(K1,{icon:s.jsx(h0e,{className:"text-amber-600"}),title:"Total Affaires",value:r.totalAffaires||0}),s.jsx(K1,{icon:s.jsx(kG,{className:"text-orange-600"}),title:"En Cours",value:r.enCours||0}),s.jsx(K1,{icon:s.jsx(Lk,{className:"text-green-600"}),title:"Terminées",value:r.terminees||0}),s.jsx(K1,{icon:s.jsx(PB,{className:"text-emerald-600"}),title:"CA Total",value:`${(r.caTotal||0).toLocaleString("fr-FR")} €`})]}),s.jsxs("div",{className:"mb-6 p-4 bg-white rounded-2xl shadow-md",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"w-full sm:w-auto flex-grow relative",children:[s.jsx(Ol,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx(Ur,{type:"text",placeholder:"Rechercher par numéro, libellé, client...",value:o,onChange:k=>l(k.target.value),className:"w-full pl-10"})]}),(o||c)&&s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>{l(""),u(null),h(k=>({...k,page:1}))},className:"text-red-600 hover:text-red-700",children:[s.jsx(ls,{className:"h-4 w-4 mr-1"}),"Réinitialiser"]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-stone-600",children:"Filtrer par statut:"}),["TOUS","EN_COURS","TERMINEE","EN_ATTENTE","PLANIFIEE","CLOTUREE"].map(k=>s.jsx("button",{onClick:()=>u(k==="TOUS"?null:k),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors duration-200 ${c===k||c===null&&k==="TOUS"?"bg-amber-600 text-white shadow":"bg-stone-100 text-stone-700 hover:bg-stone-200"}`,children:k.replace("_"," ").charAt(0).toUpperCase()+k.replace("_"," ").slice(1).toLowerCase()},k))]})]}),t.length>0&&s.jsx("div",{className:"p-4 mb-6 bg-amber-50 border-l-4 border-amber-400 text-amber-800 rounded-r-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"py-1",children:s.jsx(Io,{className:"h-5 w-5"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Règles de suppression"}),s.jsxs("p",{className:"text-sm",children:["Les affaires contenant des ",s.jsx("strong",{children:"bons de commande"}),", ",s.jsx("strong",{children:"pointages"}),", ",s.jsx("strong",{children:"phases"}),", ",s.jsx("strong",{children:"devis"})," ou ",s.jsx("strong",{children:"achats"})," nécessitent une suppression forcée.",s.jsx("br",{}),"⚠️ La suppression forcée supprime définitivement toutes les données associées. (Code de confirmation : ",s.jsx("strong",{children:"1234"}),")"]})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 flex justify-between items-center border-b border-stone-200",children:s.jsxs("h2",{className:"text-xl font-bold text-stone-800 flex items-center",children:[s.jsx(LG,{className:"mr-3 text-amber-600"}),"Liste des Affaires (",_.length,")",o&&s.jsxs("span",{className:"ml-2 text-sm text-stone-500",children:['(Recherche: "',o,'")']}),c&&s.jsxs("span",{className:"ml-2 text-sm text-stone-500",children:["(Filtre: ",c,")"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-stone-600",children:[s.jsx("thead",{className:"text-xs text-stone-700 uppercase bg-stone-100/70",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-4 font-bold",children:"Test"}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(d0e,{className:"mr-2 inline"}),"Numéro"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(zi,{className:"mr-2 inline"}),"Libellé"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(Jge,{className:"mr-2 inline"}),"Statut"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(a6,{className:"mr-2 inline"}),"Objectif CA HT"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(PB,{className:"mr-2 inline"}),"CA Réel"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(Do,{className:"mr-2 inline"}),"Obj. Dépense"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(Dm,{className:"mr-2 inline"}),"Dép. Réelles"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(Tl,{className:"mr-2 inline",style:{color:"#7c3aed"}}),"Taux Marge Réel"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold",children:[s.jsx(il,{className:"mr-2 inline"}),"Date Clôture"]}),s.jsxs("th",{scope:"col",className:"px-4 py-4 font-bold text-center",children:[s.jsx(kh,{className:"mr-2 inline"}),"Actions"]})]})}),s.jsx("tbody",{children:_.map(k=>s.jsxs("tr",{className:"border-b border-stone-200/60 hover:bg-stone-50/80 transition-colors duration-150 bg-white",children:[s.jsx("td",{className:"px-4 py-4 text-center",children:"-"}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 text-amber-700 flex items-center justify-center mr-3 font-bold text-lg",children:k.numero.substring(k.numero.length-2)}),s.jsx("span",{className:"font-semibold text-stone-800 text-sm",children:k.numero})]})}),s.jsxs("td",{className:"px-4 py-4",children:[s.jsx("div",{className:"font-semibold text-stone-800 text-sm",children:k.libelle}),s.jsxs("div",{className:"text-xs text-stone-500 mt-1 flex items-center",children:[s.jsx(Wa,{className:"inline mr-1.5"})," ",k.client]})]}),s.jsx("td",{className:"px-4 py-4",children:E(k.statut)}),s.jsx("td",{className:"px-4 py-4 font-medium text-stone-800 text-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(a6,{className:"w-4 h-4 mr-1 text-blue-500"}),(k.objectifCaHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{className:"px-4 py-4 font-medium text-stone-800 text-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(PB,{className:"w-4 h-4 mr-1 text-green-500"}),(k.caReelHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{className:"px-4 py-4 font-medium text-stone-800 text-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Do,{className:"w-4 h-4 mr-1 text-red-500"}),(k.objectifAchatHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{className:"px-4 py-4 font-medium text-stone-800 text-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Dm,{className:"w-4 h-4 mr-1 text-orange-500"}),(k.achatReelHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{className:"px-4 py-4 font-medium text-sm",children:s.jsx("div",{className:`flex items-center px-2 py-1 rounded ${p(k).bg}`,children:s.jsxs("span",{className:p(k).couleur,children:[p(k).taux.toFixed(1),"%"]})})}),s.jsx("td",{className:"px-4 py-4 text-xs text-stone-500",children:k.dateCloturePrevue?new Date(k.dateCloturePrevue).toLocaleDateString("fr-FR"):"N/A"}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center space-x-1",onClick:D=>D.stopPropagation(),children:[s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>m(`/affaires/${k.id}`),children:[s.jsx(ha,{className:"h-4 w-4 mr-1"}),"Voir"]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>m(`/affaires/${k.id}/modifier`),children:[s.jsx(Po,{className:"h-4 w-4 mr-1"}),"Modifier"]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>N(k),children:[s.jsx(Uk,{className:"h-4 w-4 mr-1"}),"Copier"]}),s.jsx(Xe,{variant:"outline",size:"icon",onClick:()=>j(k),className:g(k)?"":"bg-orange-50 border-orange-200 hover:bg-orange-100",title:g(k)?"Supprimer":`Suppression forcée requise - ${x(k)}`,children:s.jsx(Zn,{className:`h-4 w-4 ${g(k)?"text-red-500":"text-orange-500"}`})})]})})]},k.id))})]})})]}),s.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-stone-200",children:[s.jsxs("h2",{className:"text-xl font-bold text-stone-800 flex items-center",children:[s.jsx(_s,{className:"mr-3 text-amber-600"}),"Planning Équipe"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-stone-600",children:"Semaine 28 - Juillet 2025"}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>m("/planning-equipe"),children:[s.jsx(ha,{className:"h-4 w-4 mr-1"}),"Voir complet"]})]})]}),s.jsx("div",{className:"p-4",children:s.jsx(yq,{})})]})]})})]})})},wq=({icon:t,label:e,value:r,color:n="primary",trend:a=null,onClick:i=null,className:o=""})=>{const l=()=>{i&&typeof i=="function"&&i()};return s.jsxs("div",{className:`stat-card stat-card--${n} ${o} ${i?"stat-card--clickable":""}`,onClick:l,role:i?"button":"presentation",tabIndex:i?0:-1,children:[s.jsx("div",{className:"stat-card__icon",children:s.jsx("span",{className:"icon",children:t})}),s.jsxs("div",{className:"stat-card__content",children:[s.jsx("div",{className:"stat-card__label",children:e}),s.jsx("div",{className:"stat-card__value",children:r}),a&&s.jsxs("div",{className:`stat-card__trend stat-card__trend--${a.type}`,children:[a.type==="up"?"↗":"↘"," ",a.value]})]})]})};wq.propTypes={icon:Ze.oneOfType([Ze.string,Ze.element]).isRequired,label:Ze.string.isRequired,value:Ze.oneOfType([Ze.string,Ze.number]).isRequired,color:Ze.oneOf(["primary","secondary","accent","success","warning","error","info"]),trend:Ze.shape({type:Ze.oneOf(["up","down"]).isRequired,value:Ze.string.isRequired}),onClick:Ze.func,className:Ze.string};const jq=({label:t,active:e=!1,onClick:r,variant:n="default",disabled:a=!1,className:i="",icon:o=null})=>{const l=()=>{!a&&r&&typeof r=="function"&&r()},c=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),l())};return s.jsxs("button",{className:`filter-button filter-button--${n} ${e?"filter-button--active":""} ${a?"filter-button--disabled":""} ${i}`,onClick:l,onKeyDown:c,disabled:a,role:"button","aria-pressed":e,tabIndex:a?-1:0,children:[o&&s.jsx("span",{className:"filter-button__icon",children:o}),s.jsx("span",{className:"filter-button__label",children:t}),e&&s.jsx("span",{className:"filter-button__check",role:"presentation",children:"✓"})]})};jq.propTypes={label:Ze.string.isRequired,active:Ze.bool,onClick:Ze.func.isRequired,variant:Ze.oneOf(["default","primary","secondary","accent"]),disabled:Ze.bool,className:Ze.string,icon:Ze.oneOfType([Ze.string,Ze.element])};const Cq=({stats:t=[],filters:e=[],activeFilters:r=[],onFilterChange:n=()=>{},title:a="Gestion des Affaires",subtitle:i="Suivi et gestion avancée avec planning intégré"})=>{const o=l=>{n(l)};return s.jsxs("div",{className:"header-section",children:[s.jsxs("div",{className:"hero-header",children:[s.jsx("h1",{className:"title",children:a}),s.jsx("p",{className:"subtitle",children:i})]}),s.jsx("div",{className:"stats-grid",children:t.map((l,c)=>s.jsx(wq,{icon:l.icon,label:l.label,value:l.value,color:l.color,trend:l.trend,onClick:l.onClick},l.id||c))}),s.jsx("div",{className:"team-filters",children:e.map((l,c)=>s.jsxs("div",{className:"filter-group",children:[s.jsxs("span",{className:"filter-label",children:[l.label," :"]}),l.items.map(u=>s.jsx(jq,{label:u.label,active:r.includes(u.id),onClick:()=>o(u.id),variant:u.variant||"default"},u.id))]},c))})]})};Cq.propTypes={stats:Ze.arrayOf(Ze.shape({id:Ze.string,icon:Ze.oneOfType([Ze.string,Ze.element]).isRequired,label:Ze.string.isRequired,value:Ze.oneOfType([Ze.string,Ze.number]).isRequired,color:Ze.string,trend:Ze.object,onClick:Ze.func})),filters:Ze.arrayOf(Ze.shape({label:Ze.string.isRequired,items:Ze.arrayOf(Ze.shape({id:Ze.string.isRequired,label:Ze.string.isRequired,variant:Ze.string})).isRequired})),activeFilters:Ze.arrayOf(Ze.string),onFilterChange:Ze.func,title:Ze.string,subtitle:Ze.string};const sh=({icon:t,onClick:e,variant:r="default",size:n="default",disabled:a=!1,className:i="",title:o="",ariaLabel:l=""})=>{const c=()=>{!a&&e&&typeof e=="function"&&e()},u=d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),c())};return s.jsx("button",{className:`icon-button icon-button--${r} icon-button--${n} ${a?"icon-button--disabled":""} ${i}`,onClick:c,onKeyDown:u,disabled:a,title:o,"aria-label":l||o,role:"button",tabIndex:a?-1:0,children:s.jsx("span",{className:"icon-button__icon",children:t})})};sh.propTypes={icon:Ze.oneOfType([Ze.string,Ze.element]).isRequired,onClick:Ze.func.isRequired,variant:Ze.oneOf(["default","primary","secondary","accent","success","warning","error","info"]),size:Ze.oneOf(["xs","sm","default","lg"]),disabled:Ze.bool,className:Ze.string,title:Ze.string,ariaLabel:Ze.string};const Nq=({children:t,title:e="Liste des Affaires",searchPlaceholder:r="Rechercher une affaire...",onSearch:n=()=>{},onAdd:a=()=>{},onFilter:i=()=>{},actions:o=[],loading:l=!1})=>s.jsxs("div",{className:"table-section",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("h2",{className:"section-title",children:e}),s.jsxs("div",{className:"table-actions",children:[s.jsx("div",{className:"search-input-container",children:s.jsx("input",{type:"text",placeholder:r,onChange:c=>n(c.target.value),className:"search-input"})}),s.jsx(sh,{icon:"⚙️",onClick:i,title:"Filtres",variant:"default"}),o.map((c,u)=>s.jsx(sh,{icon:c.icon,onClick:c.onClick,title:c.title,variant:c.variant||"default"},u)),s.jsxs("button",{onClick:a,className:"add-button",title:"Nouvelle Affaire",children:[s.jsx("span",{className:"add-button__icon",children:"+"}),s.jsx("span",{className:"add-button__label",children:"Nouvelle Affaire"})]})]})]}),s.jsx("div",{className:"table-container",children:l?s.jsxs("div",{className:"table-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Chargement des affaires..."})]}):t})]});Nq.propTypes={children:Ze.node.isRequired,title:Ze.string,searchPlaceholder:Ze.string,onSearch:Ze.func,onAdd:Ze.func,onFilter:Ze.func,actions:Ze.arrayOf(Ze.shape({icon:Ze.oneOfType([Ze.string,Ze.element]).isRequired,onClick:Ze.func.isRequired,title:Ze.string.isRequired,variant:Ze.string})),loading:Ze.bool};const Sq=({children:t,title:e="Planning Équipe",currentWeek:r="Semaine 28 - Juillet 2025",onPreviousWeek:n=()=>{},onNextWeek:a=()=>{},onSettings:i=()=>{},onViewToggle:o=()=>{},viewMode:l="grid",loading:c=!1,actions:u=[]})=>s.jsxs("div",{className:"planning-section",children:[s.jsxs("div",{className:"planning-header",children:[s.jsx("h2",{className:"section-title",children:e}),s.jsxs("div",{className:"planning-controls",children:[s.jsxs("div",{className:"week-navigation",children:[s.jsx(sh,{icon:"◀",onClick:n,title:"Semaine précédente",size:"sm"}),s.jsx("span",{className:"week-label",children:r}),s.jsx(sh,{icon:"▶",onClick:a,title:"Semaine suivante",size:"sm"})]}),s.jsx(sh,{icon:l==="grid"?"📅":"📋",onClick:o,title:`Basculer vers ${l==="grid"?"liste":"grille"}`,variant:"default"}),u.map((d,f)=>s.jsx(sh,{icon:d.icon,onClick:d.onClick,title:d.title,variant:d.variant||"default"},f)),s.jsx(sh,{icon:"⚙️",onClick:i,title:"Paramètres",variant:"default"})]})]}),s.jsx("div",{className:"planning-container",children:c?s.jsxs("div",{className:"planning-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Chargement du planning..."})]}):t})]});Sq.propTypes={children:Ze.node.isRequired,title:Ze.string,currentWeek:Ze.string,onPreviousWeek:Ze.func,onNextWeek:Ze.func,onSettings:Ze.func,onViewToggle:Ze.func,viewMode:Ze.oneOf(["grid","list"]),loading:Ze.bool,actions:Ze.arrayOf(Ze.shape({icon:Ze.oneOfType([Ze.string,Ze.element]).isRequired,onClick:Ze.func.isRequired,title:Ze.string.isRequired,variant:Ze.string}))};const Eq=({headerStats:t=[],headerFilters:e=[],activeFilters:r=[],onFilterChange:n=()=>{},title:a="Gestion des Affaires",subtitle:i="Suivi et gestion avancée avec planning intégré",tableTitle:o="Liste des Affaires",searchPlaceholder:l="Rechercher une affaire...",onSearch:c=()=>{},onAddAffaire:u=()=>{},onFilterAffaires:d=()=>{},tableActions:f=[],tableLoading:A=!1,planningTitle:h="Planning Équipe",currentWeek:m="Semaine 28 - Juillet 2025",onPreviousWeek:p=()=>{},onNextWeek:g=()=>{},onPlanningSettings:x=()=>{},onViewToggle:v=()=>{},viewMode:b="grid",planningLoading:C=!1,planningActions:j=[],tableContent:w,planningContent:N})=>s.jsxs("div",{className:"affaires-page-container",children:[s.jsx(Cq,{stats:t,filters:e,activeFilters:r,onFilterChange:n,title:a,subtitle:i}),s.jsx(Nq,{title:o,searchPlaceholder:l,onSearch:c,onAdd:u,onFilter:d,actions:f,loading:A,children:w}),s.jsx(Sq,{title:h,currentWeek:m,onPreviousWeek:p,onNextWeek:g,onSettings:x,onViewToggle:v,viewMode:b,loading:C,actions:j,children:N})]});Eq.propTypes={headerStats:Ze.array,headerFilters:Ze.array,activeFilters:Ze.array,onFilterChange:Ze.func,title:Ze.string,subtitle:Ze.string,tableTitle:Ze.string,searchPlaceholder:Ze.string,onSearch:Ze.func,onAddAffaire:Ze.func,onFilterAffaires:Ze.func,tableActions:Ze.array,tableLoading:Ze.bool,planningTitle:Ze.string,currentWeek:Ze.string,onPreviousWeek:Ze.func,onNextWeek:Ze.func,onPlanningSettings:Ze.func,onViewToggle:Ze.func,viewMode:Ze.string,planningLoading:Ze.bool,planningActions:Ze.array,tableContent:Ze.node,planningContent:Ze.node};const Yve=()=>{const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState({}),[i,o]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState(""),[f,A]=y.useState(null),[h,m]=y.useState(["statut-chargé"]),[p,g]=y.useState({page:1,limit:10,total:0,totalPages:0}),x=y.useCallback(async()=>{try{o(!0),c(null);const R={skip:(p.page-1)*p.limit,take:p.limit,search:u,statut:f,sortBy:"createdAt",sortOrder:"desc"},U=await $n.getAffaires(R);r(U.affaires||[]),g(z=>({...z,total:U.total,totalPages:Math.ceil(U.total/z.limit)}))}catch(R){c("Erreur lors du chargement des affaires"),console.error("Erreur chargement affaires:",R),ve.error("Impossible de charger les affaires")}finally{o(!1)}},[p.page,p.limit,u,f]),v=y.useCallback(async()=>{try{const R=await $n.getGlobalStats();a(R)}catch(R){console.error("Erreur chargement stats:",R),ve.error("Impossible de charger les statistiques")}},[]);y.useEffect(()=>{x(),v()},[x,v]);const b=y.useCallback(()=>{x(),v(),ve.success("Données actualisées")},[x,v]),C=y.useCallback(R=>{d(R),g(U=>({...U,page:1}))},[]),j=y.useCallback(R=>{m(U=>U.includes(R)?U.filter(z=>z!==R):[...U,R])},[]),w=y.useCallback(()=>{t("/affaires/nouveau")},[t]),N=y.useCallback(async R=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer l'affaire "${R.numero}" ?`))try{await $n.deleteAffaire(R.id),ve.success("Affaire supprimée avec succès"),b()}catch(U){console.error("Erreur suppression:",U),ve.error("Erreur lors de la suppression")}},[b]),E=y.useCallback(R=>{const U=R.caReelHt||0,z=R.achatReelHt||0;return U===0?0:(U-z)/U*100},[]),_=[{id:"total",icon:"💰",label:"CA Total",value:`${(n.caTotal||0).toLocaleString("fr-FR")} €`,color:"primary"},{id:"achats",icon:"🛒",label:"Achats",value:`${(n.achatsTotal||0).toLocaleString("fr-FR")} €`,color:"secondary"},{id:"affaires",icon:"📊",label:"Affaires",value:n.totalAffaires||0,color:"accent"},{id:"en-cours",icon:"⚙️",label:"En cours",value:n.enCours||0,color:"info"}],k=[{label:"Statut",items:[{id:"statut-chargé",label:"Chargé",variant:"primary"},{id:"statut-poseur",label:"Poseur",variant:"secondary"},{id:"statut-dessinateur",label:"Dessinateur",variant:"accent"},{id:"statut-fabricant",label:"Fabricant",variant:"secondary"}]},{label:"Sous Traitant",items:[{id:"sous-traitant-maçon",label:"Maçon",variant:"default"},{id:"sous-traitant-béton",label:"Béton",variant:"default"},{id:"sous-traitant-finition",label:"Finition",variant:"default"},{id:"sous-traitant-situation",label:"Situation",variant:"default"}]}],D=[{icon:"📊",onClick:()=>console.log("Statistiques"),title:"Statistiques",variant:"default"},{icon:"📄",onClick:()=>console.log("Export"),title:"Export",variant:"default"}],S=[{icon:"📄",onClick:()=>console.log("Export Planning"),title:"Export Planning",variant:"default"}],F=()=>i?s.jsxs("div",{className:"table-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Chargement des affaires..."})]}):l?s.jsxs("div",{className:"table-error",children:[s.jsx("p",{children:l}),s.jsx("button",{onClick:b,children:"Réessayer"})]}):e.length===0?s.jsxs("div",{className:"table-empty",children:[s.jsx("p",{children:"Aucune affaire trouvée"}),s.jsx("button",{onClick:w,children:"Créer une affaire"})]}):s.jsxs("table",{className:"affaires-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Numéro"}),s.jsx("th",{children:"Libellé"}),s.jsx("th",{children:"Client"}),s.jsx("th",{children:"Statut"}),s.jsx("th",{children:"Date Clôture"}),s.jsx("th",{children:"CA Prévu"}),s.jsx("th",{children:"CA Réel"}),s.jsx("th",{children:"Marge"}),s.jsx("th",{children:"Planning"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:e.map(R=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("div",{className:"affaire-numero",children:s.jsx("span",{className:"numero-badge",children:R.numero})})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-libelle",children:s.jsx("span",{className:"libelle-text",children:R.libelle})})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-client",children:s.jsx("span",{className:"client-text",children:R.client})})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-statut",children:s.jsx("span",{className:`statut-badge statut-${R.statut.toLowerCase()}`,children:R.statut})})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-date",children:R.dateCloturePrevue?new Date(R.dateCloturePrevue).toLocaleDateString("fr-FR"):"N/A"})}),s.jsx("td",{children:s.jsxs("div",{className:"affaire-ca-prevu",children:[(R.objectifCaHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{children:s.jsxs("div",{className:"affaire-ca-reel",children:[(R.caReelHt||0).toLocaleString("fr-FR")," €"]})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-marge",children:s.jsxs("span",{className:"marge-value",children:[E(R).toFixed(1),"%"]})})}),s.jsx("td",{children:s.jsx("div",{className:"affaire-planning",children:s.jsx("button",{onClick:()=>t(`/affaires/${R.id}/planning`),className:"planning-button",children:"📅 Planning"})})}),s.jsx("td",{children:s.jsxs("div",{className:"affaire-actions",children:[s.jsx("button",{onClick:()=>t(`/affaires/${R.id}`),className:"action-button action-view",title:"Voir",children:"👁️"}),s.jsx("button",{onClick:()=>t(`/affaires/${R.id}/modifier`),className:"action-button action-edit",title:"Modifier",children:"✏️"}),s.jsx("button",{onClick:()=>N(R),className:"action-button action-delete",title:"Supprimer",children:"🗑️"})]})})]},R.id))})]}),M=()=>s.jsx(yq,{className:"planning-equipe-affaires"});return s.jsx(Eq,{headerStats:_,headerFilters:k,activeFilters:h,onFilterChange:j,title:"Gestion des Affaires",subtitle:"Suivi et gestion avancée avec planning intégré",tableTitle:"Liste des Affaires",searchPlaceholder:"Rechercher une affaire...",onSearch:C,onAddAffaire:w,onFilterAffaires:()=>console.log("Filtrer affaires"),tableActions:D,tableLoading:i,planningTitle:"Planning Équipe",currentWeek:"Semaine 28 - Juillet 2025",onPreviousWeek:()=>console.log("Semaine précédente"),onNextWeek:()=>console.log("Semaine suivante"),onPlanningSettings:()=>console.log("Paramètres planning"),onViewToggle:()=>console.log("Toggle view"),viewMode:"grid",planningLoading:!1,planningActions:S,tableContent:F(),planningContent:M()})},jr=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${t||""}`,...r,children:e}));jr.displayName="Label";const Sw=y.createContext(),Xo=({defaultValue:t,value:e,onValueChange:r,children:n,...a})=>{const[i,o]=y.useState(t||""),[l,c]=y.useState(!1),u=e!==void 0?e:i,d=f=>{e===void 0&&o(f),r==null||r(f),c(!1)};return s.jsx(Sw.Provider,{value:{value:u,onValueChange:d,isOpen:l,setIsOpen:c},children:s.jsx("div",{className:"relative",...a,children:n})})},Jo=le.forwardRef(({className:t,children:e,...r},n)=>{const a=y.useContext(Sw);return s.jsxs("button",{ref:n,type:"button",className:`flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,onClick:()=>a==null?void 0:a.setIsOpen(!a.isOpen),...r,children:[e,s.jsx("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),Zo=({placeholder:t,className:e,...r})=>{const n=y.useContext(Sw);return s.jsx("span",{className:`block truncate ${e||""}`,...r,children:(n==null?void 0:n.value)||t})},el=le.forwardRef(({className:t,children:e,...r},n)=>{const a=y.useContext(Sw);return a!=null&&a.isOpen?s.jsx("div",{ref:n,className:`absolute top-full z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white shadow-md animate-in fade-in-0 zoom-in-95 ${t||""}`,...r,children:s.jsx("div",{className:"p-1",children:e})}):null}),la=le.forwardRef(({className:t,children:e,value:r,...n},a)=>{const i=y.useContext(Sw),o=(i==null?void 0:i.value)===r;return s.jsxs("div",{ref:a,className:`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-gray-100 focus:bg-gray-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${o?"bg-gray-100":""} ${t||""}`,onClick:()=>i==null?void 0:i.onValueChange(r),...n,children:[o&&s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e]})});Xo.displayName="Select";Jo.displayName="SelectTrigger";Zo.displayName="SelectValue";el.displayName="SelectContent";la.displayName="SelectItem";function Xve(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function Jve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zve=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},ebe=Jve(Zve);const T6="__googleMapsScriptId";var Lg;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Lg||(Lg={}));class qA{constructor({apiKey:e,authReferrerPolicy:r,channel:n,client:a,id:i=T6,language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:A="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=i||T6,this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=A,this.version=h,qA.instance){if(!ebe(this.options,qA.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(qA.instance.options)}`);return qA.instance}qA.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Lg.FAILURE:this.done?Lg.SUCCESS:this.loading?Lg.LOADING:Lg.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(n=>{n?r(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((r=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(i=>{let o,l,c,u="The Google Maps JavaScript API",d="google",f="importLibrary",A="__ib__",h=document,m=window;m=m[d]||(m[d]={});const p=m.maps||(m.maps={}),g=new Set,x=new URLSearchParams,v=()=>o||(o=new Promise((b,C)=>Xve(this,void 0,void 0,function*(){var j;yield l=h.createElement("script"),l.id=this.id,x.set("libraries",[...g]+"");for(c in i)x.set(c.replace(/[A-Z]/g,w=>"_"+w[0].toLowerCase()),i[c]);x.set("callback",d+".maps."+A),l.src=this.url+"?"+x,p[A]=b,l.onerror=()=>o=C(Error(u+" could not load.")),l.nonce=this.nonce||((j=h.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",h.head.append(l)})));p[f]?console.warn(u+" only loads once. Ignoring:",i):p[f]=(b,...C)=>g.add(b)&&v().then(()=>p[f](b,...C))})(n);const a=this.libraries.map(i=>this.importLibrary(i));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),i=>{const o=new ErrorEvent("error",{error:i});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const tbe=({onAddressSelect:t,initialValue:e="",placeholder:r="Tapez l'adresse du chantier...",className:n="",error:a=null})=>{const[i,o]=y.useState(e),[l,c]=y.useState(!1),[u,d]=y.useState([]),[f,A]=y.useState(!1),h=y.useRef(null),m=y.useRef(null);new qA({apiKey:"VOTRE_CLE_API",version:"weekly",libraries:["places"]}),y.useEffect(()=>((async()=>{{console.info("Google Maps API désactivée : clé API non configurée");return}})(),()=>{m.current&&window.google&&window.google.maps.event.clearInstanceListeners(m.current)}),[]);const p=v=>{o(v.target.value),A(!1)},g=()=>{A(!0)},x=()=>{setTimeout(()=>A(!1),200)};return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:h,type:"text",value:i,onChange:p,onFocus:g,onBlur:x,placeholder:r,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white transition-colors ${a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"} ${n}`}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:l?s.jsx(hu,{className:"w-5 h-5 text-gray-400 animate-spin"}):s.jsx(Au,{className:"w-5 h-5 text-gray-400"})})]}),a&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[s.jsx(Au,{className:"w-4 h-4"}),a]}),s.jsxs("div",{className:"mt-1 p-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded text-xs",children:[s.jsx("p",{className:"text-amber-700 dark:text-amber-300 font-medium",children:"💡 Mode saisie manuelle"}),s.jsx("p",{className:"text-amber-600 dark:text-amber-400",children:"L'auto-complétion Google Maps n'est pas activée. Vous pouvez saisir l'adresse manuellement."})]})]})},rbe=({addressData:t,onAddressChange:e,errors:r={},readOnly:n=!1,showCoordinates:a=!1})=>{var c,u;const i=(d,f)=>{e&&e({...t,[d]:f})},o=`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white transition-colors ${n?"bg-gray-50 dark:bg-gray-700 cursor-not-allowed":""}`,l=d=>`${o} ${r[d]?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(Au,{className:"w-4 h-4 inline mr-1"}),"Rue *"]}),s.jsx("input",{type:"text",value:(t==null?void 0:t.rue)||"",onChange:d=>i("rue",d.target.value),placeholder:"Ex: 123 Rue des Érables",className:l("rue"),readOnly:n}),r.rue&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.rue})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(m0e,{className:"w-4 h-4 inline mr-1"}),"Code Postal *"]}),s.jsx("input",{type:"text",value:(t==null?void 0:t.codePostal)||"",onChange:d=>i("codePostal",d.target.value),placeholder:"Ex: 75000",maxLength:"5",className:l("codePostal"),readOnly:n}),r.codePostal&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.codePostal})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(ro,{className:"w-4 h-4 inline mr-1"}),"Ville *"]}),s.jsx("input",{type:"text",value:(t==null?void 0:t.ville)||"",onChange:d=>i("ville",d.target.value),placeholder:"Ex: Paris",className:l("ville"),readOnly:n}),r.ville&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.ville})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(E0e,{className:"w-4 h-4 inline mr-1"}),"Pays"]}),s.jsx("input",{type:"text",value:(t==null?void 0:t.pays)||"France",onChange:d=>i("pays",d.target.value),placeholder:"France",className:l("pays"),readOnly:n}),r.pays&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.pays})]}),a&&((t==null?void 0:t.latitude)||(t==null?void 0:t.longitude))&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Coordonnées GPS"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Latitude:"}),s.jsx("span",{className:"ml-2 font-mono",children:(c=t.latitude)==null?void 0:c.toFixed(6)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Longitude:"}),s.jsx("span",{className:"ml-2 font-mono",children:(u=t.longitude)==null?void 0:u.toFixed(6)})]})]})]}),(t==null?void 0:t.adresse)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Adresse complète"}),s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:t.adresse})]})]})},Mn=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:2}).format(t||0),nbe=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",D6=t=>{const e={NOUVELLE:{label:"Nouvelle",color:"bg-blue-100 text-blue-800",icon:"IconPlus",severity:"info"},PLANIFIEE:{label:"Planifiée",color:"bg-purple-100 text-purple-800",icon:"IconCalendarEvent",severity:"info"},EN_COURS:{label:"En cours",color:"bg-orange-100 text-orange-800",icon:"IconClock",severity:"warning"},TERMINEE:{label:"Terminée",color:"bg-green-100 text-green-800",icon:"IconCheck",severity:"success"},CLOTUREE:{label:"Clôturée",color:"bg-slate-100 text-slate-800",icon:"IconCheck",severity:"success"},SUSPENDUE:{label:"Suspendue",color:"bg-yellow-100 text-yellow-800",icon:"IconAlertTriangle",severity:"warning"},ANNULEE:{label:"Annulée",color:"bg-red-100 text-red-800",icon:"IconX",severity:"error"}};return e[t]||e.NOUVELLE},sbe=t=>{var r,n;const e={};return(r=t.libelle)!=null&&r.trim()||(e.libelle="Le libellé est requis"),(n=t.client)!=null&&n.trim()||(e.client="Le nom du client est requis"),{isValid:Object.keys(e).length===0,errors:e}},I6=({title:t,children:e})=>s.jsxs("div",{className:"p-6 rounded-lg bg-card text-card-foreground shadow-sm",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-primary",children:t}),e]}),_6=()=>{const{id:t}=Ka(),e=Fr(),r=!!t,[n,a]=y.useState(!1),[i,o]=y.useState({}),[l,c]=y.useState({numero:"",libelle:"",client:"",adresse:"",rue:"",codePostal:"",ville:"",pays:"France",latitude:null,longitude:null}),u=y.useCallback(async()=>{if(r)try{a(!0);const h=await $n.getAffaireById(t);c({numero:h.numero||"",libelle:h.libelle||"",client:h.client||"",adresse:h.adresse||"",rue:h.rue||"",codePostal:h.codePostal||"",ville:h.ville||"",pays:h.pays||"France",latitude:h.latitude||null,longitude:h.longitude||null})}catch{ve.error("Erreur lors du chargement de l'affaire."),e("/affaires")}finally{a(!1)}},[t,r,e]);y.useEffect(()=>{u()},[u]);const d=h=>{const{name:m,value:p}=h.target;c(g=>({...g,[m]:p})),i[m]&&o(g=>({...g,[m]:null}))},f=h=>{c(m=>({...m,...h}))},A=async h=>{var x,v,b,C,j,w,N;h.preventDefault();const m={...l},{isValid:p,errors:g}=sbe(m);if(!p){o(g),ve.error("Certains champs sont incorrects ou manquants.");return}o({}),a(!0);try{const E={...l,objectifCaHt:0,dateCommencement:null,dateCloturePrevue:null,statut:"PLANIFIEE",latitude:l.latitude||null,longitude:l.longitude||null,adresse:((x=l.adresse)==null?void 0:x.trim())||null,rue:((v=l.rue)==null?void 0:v.trim())||null,codePostal:((b=l.codePostal)==null?void 0:b.trim())||null,ville:((C=l.ville)==null?void 0:C.trim())||null,pays:((j=l.pays)==null?void 0:j.trim())||null};console.log("Données à envoyer:",E),r?(await $n.updateAffaire(t,E),ve.success("Affaire modifiée avec succès.")):(await $n.createAffaire(E),ve.success("Affaire créée avec succès.")),e("/affaires")}catch(E){console.error("Erreur détaillée:",E),console.error("Réponse du serveur:",(w=E.response)==null?void 0:w.data),console.error("Statut de l'erreur:",(N=E.response)==null?void 0:N.status),ve.error("Erreur lors de la sauvegarde de l'affaire.")}finally{a(!1)}};return n&&r?s.jsx("div",{className:"p-8",children:"Chargement de l'affaire..."}):s.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(b0,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r?"Modifier l'affaire":"Créer une nouvelle affaire"}),s.jsxs("p",{className:"text-muted-foreground",children:["Remplissez les informations ci-dessous pour ",r?"mettre à jour":"créer"," une affaire."]})]})]}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsx(I6,{title:"Informations Générales",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"numero",children:"Numéro d'affaire"}),s.jsx(Ur,{id:"numero",name:"numero",value:r?l.numero:"Généré automatiquement",readOnly:!0,disabled:!0})]}),s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"libelle",children:"Libellé de l'affaire *"}),s.jsx(Ur,{id:"libelle",name:"libelle",value:l.libelle,onChange:d}),i.libelle&&s.jsx("p",{className:"text-destructive text-sm mt-1",children:i.libelle})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(jr,{htmlFor:"client",children:"Client *"}),s.jsx(Ur,{id:"client",name:"client",value:l.client,onChange:d}),i.client&&s.jsx("p",{className:"text-destructive text-sm mt-1",children:i.client})]})]})}),s.jsx(I6,{title:"Adresse du chantier",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(tbe,{onAddressSelect:f,initialValue:l.adresse}),s.jsx(rbe,{addressData:l,onAddressChange:h=>c(m=>({...m,...h})),errors:i})]})}),s.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[s.jsxs(Xe,{type:"button",variant:"secondary",onClick:()=>e(-1),disabled:n,children:[s.jsx(Ci,{size:16,className:"mr-2"}),"Annuler"]}),s.jsxs(Xe,{type:"submit",disabled:n,className:"bg-olive-700 hover:bg-olive-600 text-white font-bold",children:[s.jsx(kl,{size:16,className:"mr-2"}),n?"Sauvegarde...":"Sauvegarder"]})]})]})]})})},abe=t=>{const[e,r]=y.useState(null),[n,a]=y.useState(!0),[i,o]=y.useState(null),l=async()=>{if(t)try{a(!0),o(null);const d=await $n.getAffaireById(t);r(d)}catch(d){console.error("Erreur lors du chargement de l'affaire:",d),o(d),ve.error("Erreur lors du chargement de l'affaire")}finally{a(!1)}},c=async d=>{try{const f=await $n.updateAffaire(t,d);return r(f),ve.success("Affaire mise à jour avec succès"),f}catch(f){throw console.error("Erreur lors de la mise à jour de l'affaire:",f),ve.error("Erreur lors de la mise à jour de l'affaire"),f}},u=()=>{l()};return y.useEffect(()=>{l()},[t]),{affaire:e,loading:n,error:i,updateAffaire:c,refreshAffaire:u,setAffaire:r}},SS="/api/estimation-reel",ibe=async t=>{try{return(await Ee.post(`${SS}/estimations`,t)).data}catch(e){throw console.error("Erreur lors de la création de l'estimation:",e),e}},ES=async t=>{try{return(await Ee.get(`${SS}/estimations/affaire/${t}`)).data}catch(e){throw console.error("Erreur lors de la récupération des estimations:",e),e}},obe=async(t,e)=>{try{return(await Ee.put(`${SS}/estimations/${t}`,e)).data}catch(r){throw console.error("Erreur lors de la mise à jour de l'estimation:",r),r}},lbe=async t=>{try{return(await Ee.delete(`${SS}/estimations/${t}`)).data}catch(e){throw console.error("Erreur lors de la suppression de l'estimation:",e),e}},cbe=async t=>{try{const e=await ES(t),r=e.map(n=>lbe(n.id));return await Promise.all(r),{success:!0,deletedCount:e.length}}catch(e){throw console.error("Erreur lors de la suppression des estimations de l'affaire:",e),e}},ube=(t,e)=>{const[r,n]=y.useState({totalDevisValides:0,totalAchatsValides:0,heuresReelles:0,objectifCA:0,objectifAchats:0,objectifHeures:0,margeReelle:0,margeObjectif:0,pourcentageMargeReelle:0,pourcentageMargeObjectif:0}),[a,i]=y.useState(!1),[o,l]=y.useState(null),c=async()=>{if(t)try{i(!0),l(null);let f=null;try{const X=await ES(t);f=X&&X.length>0?X[0]:null}catch(X){console.warn("Aucune estimation trouvée pour cette affaire:",X)}const A=await $n.getFinancialSituation(t),{affaire:h,devis:m,achats:p,phases:g,planning:x,bdc:v,fraisGeneraux:b,marges:C}=A;let j,w,N,E,_,k;const D=100,S=75,F=50;if(f){console.log("📊 Utilisation des données d'estimation intelligente:",f),j=f.coutMainOeuvreEstime||0,_=f.coutAchatsEstime||0,k=f.coutFraisGenerauxEstime||0;const X=f.tauxHoraireMoyenEstime||85,$=j/X,K=(f.demiJourneesFabricationEstimees||0)*4,se=(f.demiJourneesPoseEstimees||0)*4;w=K,N=Math.max(0,$-K-se),E=se}else console.log("📊 Fallback vers les anciens objectifs d'affaire"),w=h.objectifHeuresFab||0,N=h.objectifHeuresSer||0,E=h.objectifHeuresPose||0,j=w*D+N*S+E*F,_=h.objectifAchatHt||0,k=h.objectifFraisGeneraux||0;const M=w*D,R=N*S,U=E*F,z=p.totalValides+v.totalReceptionnes,Q=x.coutTotalReel,H=_+j,q={totalDevisValides:m.totalValides,caReel:m.totalValides,objectifCA:(f==null?void 0:f.montantTotalEstime)||h.objectifCaHt,totalAchatsValides:z,totalAchatsFactures:p.totalValides,totalBdcReceptionnes:v.totalReceptionnes,achatReel:z,objectifAchats:_,totalMainOeuvreReelle:Q,totalMainOeuvreEstimee:j,tempsTotalEstime:x.tempsTotalReel||0,tempsTotalReel:x.tempsTotalReel,nbAffectations:x.nbAffectations,nbDevis:m.nbDevisValides,nbAchats:p.nbAchatsValides,nbBdc:v.nbBdcReceptionnes,heuresReelles:x.tempsTotalReel||0,objectifHeures:w+N+E,objectifHeuresFab:w,objectifHeuresSer:N,objectifHeuresPose:E,coutObjectifHeuresFab:M,coutObjectifHeuresSer:R,coutObjectifHeuresPose:U,coutObjectifMainOeuvre:j,fraisGenerauxReels:(b==null?void 0:b.montantReel)||0,fraisGenerauxObjectifs:k||(b==null?void 0:b.montantObjectif)||0,pourcentageFraisGeneraux:(b==null?void 0:b.pourcentage)||30,margeReelle:C.margeReelle,margeObjectif:((f==null?void 0:f.montantTotalEstime)||h.objectifCaHt)-(k||(b==null?void 0:b.montantObjectif)||0)-H,pourcentageMargeReelle:C.pourcentageMargeReelle,pourcentageMargeObjectif:((f==null?void 0:f.montantTotalEstime)||h.objectifCaHt)>0?(((f==null?void 0:f.montantTotalEstime)||h.objectifCaHt)-(k||(b==null?void 0:b.montantObjectif)||0)-H)/((f==null?void 0:f.montantTotalEstime)||h.objectifCaHt)*100:0,totalCoutsReels:z+Q+((b==null?void 0:b.montantReel)||0),totalCoutsObjectifs:_+j+(k||(b==null?void 0:b.montantObjectif)||0)};n(q)}catch(f){console.error("Erreur lors du chargement des données financières:",f),l(f),ve.error("Erreur lors du chargement des données financières")}finally{i(!1)}},u=()=>{c()},d=()=>{if(!r||r.totalDevisValides===0)return{alerteMargeReelle:!1,alerteMargeObjectif:!1,coefficientMargeReel:0,coefficientMargeObjectif:0,totalCoutsReels:0,totalCoutsObjectifs:0};const f=r.totalAchatsValides+(r.totalMainOeuvreReelle||0),A=r.objectifAchats+(r.coutObjectifMainOeuvre||0),h=f>0?r.totalDevisValides/f:0,m=A>0?r.objectifCA/A:0,p=1.6;return{alerteMargeReelle:h>0&&h<p,alerteMargeObjectif:m>0&&m<p,coefficientMargeReel:h,coefficientMargeObjectif:m,totalCoutsReels:f,totalCoutsObjectifs:A}};return y.useEffect(()=>{e&&c();const f=x=>{const{affaireId:v}=x.detail;v===t&&(console.log("🔄 Rafraîchissement automatique des données financières suite à une action BDC"),c())},A=x=>{const{affaireId:v}=x.detail;v===t&&(console.log("🔄 Rafraîchissement automatique des données financières suite à une mise à jour d'affaire"),c())},h=x=>{const{affaireId:v,action:b}=x.detail;v===t&&(console.log(`🔄 Rafraîchissement automatique des données financières suite à une action achat: ${b}`),c())},m=x=>{const{userId:v,action:b,tarifHoraireCout:C,tarifHoraireVente:j}=x.detail;console.log(`🔄 Rafraîchissement financier suite à modification utilisateur: ${b}`),c()},p=x=>{const{affaireId:v}=x.detail;v===t&&(console.log("🔄 Rafraîchissement automatique des données financières suite à une réinitialisation d'estimation"),c())},g=x=>{const{affaireId:v}=x.detail;v===t&&(console.log("🔄 Rafraîchissement automatique des données financières suite à une mise à jour d'estimation"),c())};return window.addEventListener("bdc_updated",f),window.addEventListener("affaire_updated",A),window.addEventListener("devis_updated",A),window.addEventListener("achat_updated",h),window.addEventListener("user_updated",m),window.addEventListener("estimation_reset",p),window.addEventListener("estimation_updated",g),()=>{window.removeEventListener("bdc_updated",f),window.removeEventListener("affaire_updated",A),window.removeEventListener("devis_updated",A),window.removeEventListener("achat_updated",h),window.removeEventListener("user_updated",m),window.removeEventListener("estimation_reset",p),window.removeEventListener("estimation_updated",g)}},[t,e]),{financialData:r,loading:a,error:o,refreshFinancialData:u,getMarginAlerts:d,setFinancialData:n}},dbe=t=>{const[e,r]=y.useState(null),[n,a]=y.useState(!1),[i,o]=y.useState(null),l=async()=>{if(t)try{a(!0),o(null);const u=await $n.getAchatsParCategorie(t);r(u)}catch(u){console.error("Erreur lors de la récupération des achats par catégorie:",u),o(u),ve.error("Erreur lors du chargement des achats")}finally{a(!1)}},c=()=>{l()};return y.useEffect(()=>{t&&l()},[t]),{achatsParCategorie:e,loading:n,error:i,refreshAchatsData:c,setAchatsParCategorie:r}},Kn=le.forwardRef(({className:t,variant:e="default",children:r,...n},a)=>{const i={default:"bg-gray-100 text-gray-900 hover:bg-gray-200",secondary:"bg-secondary-100 text-secondary-900 hover:bg-secondary-200",destructive:"bg-red-100 text-red-900 hover:bg-red-200",outline:"border border-gray-300 text-gray-900",success:"bg-green-100 text-green-900 hover:bg-green-200",warning:"bg-yellow-100 text-yellow-900 hover:bg-yellow-200"};return s.jsx("div",{ref:a,className:qt("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",i[e],t),...n,children:r})});Kn.displayName="Badge";const BS=async()=>{try{const{data:t}=await Ee.get("/categories-achat");return t}catch(t){throw t}},sp=async(t={})=>{try{const{data:e}=await Ee.get("/bdc",{params:t});return e}catch(e){throw e}},Bq=async t=>{try{const{data:e}=await Ee.get(`/bdc/${t}`);return e}catch(e){throw e}},z2=async t=>{try{const{data:e}=await Ee.post("/bdc",t);return e}catch(e){throw e}},gb=async(t,e)=>{try{const{data:r}=await Ee.patch(`/bdc/${t}`,e);return r}catch(r){throw r}},sy=async(t,e=null)=>{try{const r={method:"DELETE",url:`/bdc/${t}`,headers:{"Content-Type":"application/json"}};e&&(r.data={password:e});const{data:n}=await Ee(r);return n}catch(r){throw r}},TS=async(t,e=new Date)=>{try{const{data:r}=await Ee.patch(`/bdc/${t}/receptionner`,{dateReception:e.toISOString()});return r}catch(r){throw r}},DS=async t=>{try{const{data:e}=await Ee.patch(`/bdc/${t}/valider`);return e}catch(e){throw e}},qk=async t=>{try{const{data:e}=await Ee.patch(`/bdc/${t}/annuler`);return e}catch(e){throw e}},fbe=async t=>{try{const{data:e}=await Ee.get(`/bdc/affaire/${t}/stats`);return e}catch(e){throw e}},ay=async()=>{try{console.log("📡 [CATEGORIES] Appel API vers /categories-achat");const{data:t}=await Ee.get("/categories-achat");return console.log("✅ [CATEGORIES] Catégories reçues du backend:",t),t}catch(t){throw console.error("❌ [CATEGORIES] Erreur lors du chargement des catégories:",t),t}},IS=async()=>{try{const{data:t}=await Ee.get("/affaires",{params:{take:1e3,skip:0}});return t.affaires||[]}catch(t){throw console.error("❌ [ACHAT-SERVICE] Erreur lors de la récupération des affaires:",t),t}},Sx=async(t={})=>{try{const{data:e}=await Ee.get("/achats",{params:t});return e}catch(e){throw e}},hbe=async t=>{try{const{data:e}=await Ee.get(`/achats/${t}`);return e}catch(e){throw e}},_S=async t=>{try{const{data:e}=await Ee.post("/achats",t);return e}catch(e){throw e}},em=async(t,e)=>{try{const{data:r}=await Ee.patch(`/achats/${t}`,e);return r}catch(r){throw r}},Kk=async t=>{try{const{data:e}=await Ee.delete(`/achats/${t}`);return e}catch(e){throw e}},Tq=async t=>{try{const{data:e}=await Ee.patch(`/achats/${t}/valider`);return e}catch(e){throw console.error("Erreur validation achat:",e),e}},Abe=async(t,e)=>{try{const{data:r}=await Ee.patch(`/achats/${t}/payer`,{datePaiement:e});return r}catch(r){throw r}},Dq=async t=>{var e,r,n,a;console.log("🔽 downloadBdcPdf appelé avec bdcId:",t),console.trace("🔍 Stack trace pour identifier l'appelant:");try{const i=await Ee.get(`/bdc/${t}/download-pdf`,{responseType:"blob"}),o=new Blob([i.data],{type:"application/pdf"}),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l;const u=i.headers["content-disposition"]||i.headers["Content-Disposition"]||((r=(e=i.headers).get)==null?void 0:r.call(e,"content-disposition"))||((a=(n=i.headers).get)==null?void 0:a.call(n,"Content-Disposition"));let d="bon-de-commande.pdf";if(console.log("🔍 Headers de réponse:",i.headers),console.log("🔍 Content-Disposition:",u),u){const f=u.match(/filename="?([^"]+)"?/);f&&(d=f[1],console.log("✅ Nom de fichier extrait:",d))}else console.warn("⚠️ Aucun header Content-Disposition trouvé. Le backend ne renvoie pas le bon header.");return c.setAttribute("download",d),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(l),document.body.removeChild(c),{success:!0,fileName:d}}catch(i){throw console.error("Erreur lors du téléchargement du PDF:",i),i}};var Iq={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Yo,function(){var r=1e3,n=6e4,a=36e5,i="millisecond",o="second",l="minute",c="hour",u="day",d="week",f="month",A="quarter",h="year",m="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var R=["th","st","nd","rd"],U=M%100;return"["+M+(R[(U-20)%10]||R[U]||R[0])+"]"}},b=function(M,R,U){var z=String(M);return!z||z.length>=R?M:""+Array(R+1-z.length).join(U)+M},C={s:b,z:function(M){var R=-M.utcOffset(),U=Math.abs(R),z=Math.floor(U/60),Q=U%60;return(R<=0?"+":"-")+b(z,2,"0")+":"+b(Q,2,"0")},m:function M(R,U){if(R.date()<U.date())return-M(U,R);var z=12*(U.year()-R.year())+(U.month()-R.month()),Q=R.clone().add(z,f),H=U-Q<0,q=R.clone().add(z+(H?-1:1),f);return+(-(z+(U-Q)/(H?Q-q:q-Q))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:h,w:d,d:u,D:m,h:c,m:l,s:o,ms:i,Q:A}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},j="en",w={};w[j]=v;var N="$isDayjsObject",E=function(M){return M instanceof S||!(!M||!M[N])},_=function M(R,U,z){var Q;if(!R)return j;if(typeof R=="string"){var H=R.toLowerCase();w[H]&&(Q=H),U&&(w[H]=U,Q=H);var q=R.split("-");if(!Q&&q.length>1)return M(q[0])}else{var X=R.name;w[X]=R,Q=X}return!z&&Q&&(j=Q),Q||!z&&j},k=function(M,R){if(E(M))return M.clone();var U=typeof R=="object"?R:{};return U.date=M,U.args=arguments,new S(U)},D=C;D.l=_,D.i=E,D.w=function(M,R){return k(M,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var S=function(){function M(U){this.$L=_(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[N]=!0}var R=M.prototype;return R.parse=function(U){this.$d=function(z){var Q=z.date,H=z.utc;if(Q===null)return new Date(NaN);if(D.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var q=Q.match(g);if(q){var X=q[2]-1||0,$=(q[7]||"0").substring(0,3);return H?new Date(Date.UTC(q[1],X,q[3]||1,q[4]||0,q[5]||0,q[6]||0,$)):new Date(q[1],X,q[3]||1,q[4]||0,q[5]||0,q[6]||0,$)}}return new Date(Q)}(U),this.init()},R.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},R.$utils=function(){return D},R.isValid=function(){return this.$d.toString()!==p},R.isSame=function(U,z){var Q=k(U);return this.startOf(z)<=Q&&Q<=this.endOf(z)},R.isAfter=function(U,z){return k(U)<this.startOf(z)},R.isBefore=function(U,z){return this.endOf(z)<k(U)},R.$g=function(U,z,Q){return D.u(U)?this[z]:this.set(Q,U)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(U,z){var Q=this,H=!!D.u(z)||z,q=D.p(U),X=function(ae,re){var fe=D.w(Q.$u?Date.UTC(Q.$y,re,ae):new Date(Q.$y,re,ae),Q);return H?fe:fe.endOf(u)},$=function(ae,re){return D.w(Q.toDate()[ae].apply(Q.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(re)),Q)},K=this.$W,se=this.$M,Z=this.$D,ie="set"+(this.$u?"UTC":"");switch(q){case h:return H?X(1,0):X(31,11);case f:return H?X(1,se):X(0,se+1);case d:var ee=this.$locale().weekStart||0,ue=(K<ee?K+7:K)-ee;return X(H?Z-ue:Z+(6-ue),se);case u:case m:return $(ie+"Hours",0);case c:return $(ie+"Minutes",1);case l:return $(ie+"Seconds",2);case o:return $(ie+"Milliseconds",3);default:return this.clone()}},R.endOf=function(U){return this.startOf(U,!1)},R.$set=function(U,z){var Q,H=D.p(U),q="set"+(this.$u?"UTC":""),X=(Q={},Q[u]=q+"Date",Q[m]=q+"Date",Q[f]=q+"Month",Q[h]=q+"FullYear",Q[c]=q+"Hours",Q[l]=q+"Minutes",Q[o]=q+"Seconds",Q[i]=q+"Milliseconds",Q)[H],$=H===u?this.$D+(z-this.$W):z;if(H===f||H===h){var K=this.clone().set(m,1);K.$d[X]($),K.init(),this.$d=K.set(m,Math.min(this.$D,K.daysInMonth())).$d}else X&&this.$d[X]($);return this.init(),this},R.set=function(U,z){return this.clone().$set(U,z)},R.get=function(U){return this[D.p(U)]()},R.add=function(U,z){var Q,H=this;U=Number(U);var q=D.p(z),X=function(se){var Z=k(H);return D.w(Z.date(Z.date()+Math.round(se*U)),H)};if(q===f)return this.set(f,this.$M+U);if(q===h)return this.set(h,this.$y+U);if(q===u)return X(1);if(q===d)return X(7);var $=(Q={},Q[l]=n,Q[c]=a,Q[o]=r,Q)[q]||1,K=this.$d.getTime()+U*$;return D.w(K,this)},R.subtract=function(U,z){return this.add(-1*U,z)},R.format=function(U){var z=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||p;var H=U||"YYYY-MM-DDTHH:mm:ssZ",q=D.z(this),X=this.$H,$=this.$m,K=this.$M,se=Q.weekdays,Z=Q.months,ie=Q.meridiem,ee=function(re,fe,G,oe){return re&&(re[fe]||re(z,H))||G[fe].slice(0,oe)},ue=function(re){return D.s(X%12||12,re,"0")},ae=ie||function(re,fe,G){var oe=re<12?"AM":"PM";return G?oe.toLowerCase():oe};return H.replace(x,function(re,fe){return fe||function(G){switch(G){case"YY":return String(z.$y).slice(-2);case"YYYY":return D.s(z.$y,4,"0");case"M":return K+1;case"MM":return D.s(K+1,2,"0");case"MMM":return ee(Q.monthsShort,K,Z,3);case"MMMM":return ee(Z,K);case"D":return z.$D;case"DD":return D.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return ee(Q.weekdaysMin,z.$W,se,2);case"ddd":return ee(Q.weekdaysShort,z.$W,se,3);case"dddd":return se[z.$W];case"H":return String(X);case"HH":return D.s(X,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return ae(X,$,!0);case"A":return ae(X,$,!1);case"m":return String($);case"mm":return D.s($,2,"0");case"s":return String(z.$s);case"ss":return D.s(z.$s,2,"0");case"SSS":return D.s(z.$ms,3,"0");case"Z":return q}return null}(re)||q.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(U,z,Q){var H,q=this,X=D.p(z),$=k(U),K=($.utcOffset()-this.utcOffset())*n,se=this-$,Z=function(){return D.m(q,$)};switch(X){case h:H=Z()/12;break;case f:H=Z();break;case A:H=Z()/3;break;case d:H=(se-K)/6048e5;break;case u:H=(se-K)/864e5;break;case c:H=se/a;break;case l:H=se/n;break;case o:H=se/r;break;default:H=se}return Q?H:D.a(H)},R.daysInMonth=function(){return this.endOf(f).$D},R.$locale=function(){return w[this.$L]},R.locale=function(U,z){if(!U)return this.$L;var Q=this.clone(),H=_(U,z,!0);return H&&(Q.$L=H),Q},R.clone=function(){return D.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},M}(),F=S.prototype;return k.prototype=F,[["$ms",i],["$s",o],["$m",l],["$H",c],["$W",u],["$M",f],["$y",h],["$D",m]].forEach(function(M){F[M[1]]=function(R){return this.$g(R,M[0],M[1])}}),k.extend=function(M,R){return M.$i||(M(R,S,k),M.$i=!0),k},k.locale=_,k.isDayjs=E,k.unix=function(M){return k(1e3*M)},k.en=w[j],k.Ls=w,k.p={},k})})(Iq);var mbe=Iq.exports;const Ft=ln(mbe);function pbe({type:t,date:e,locale:r,format:n,labelSeparator:a}){const i=o=>Ft(o).locale(r).format(n);return t==="default"?e===null?"":i(e):t==="multiple"?e.map(i).join(", "):t==="range"&&Array.isArray(e)?e[0]&&e[1]?`${i(e[0])} ${a} ${i(e[1])}`:e[0]?`${i(e[0])} ${a} `:"":""}function gbe({formatter:t,...e}){return(t||pbe)(e)}function xbe({direction:t,levelIndex:e,rowIndex:r,cellIndex:n,size:a}){switch(t){case"up":return e===0&&r===0?null:r===0?{levelIndex:e-1,rowIndex:n<=a[e-1][a[e-1].length-1]-1?a[e-1].length-1:a[e-1].length-2,cellIndex:n}:{levelIndex:e,rowIndex:r-1,cellIndex:n};case"down":return r===a[e].length-1?{levelIndex:e+1,rowIndex:0,cellIndex:n}:r===a[e].length-2&&n>=a[e][a[e].length-1]?{levelIndex:e+1,rowIndex:0,cellIndex:n}:{levelIndex:e,rowIndex:r+1,cellIndex:n};case"left":return e===0&&r===0&&n===0?null:r===0&&n===0?{levelIndex:e-1,rowIndex:a[e-1].length-1,cellIndex:a[e-1][a[e-1].length-1]-1}:n===0?{levelIndex:e,rowIndex:r-1,cellIndex:a[e][r-1]-1}:{levelIndex:e,rowIndex:r,cellIndex:n-1};case"right":return r===a[e].length-1&&n===a[e][r]-1?{levelIndex:e+1,rowIndex:0,cellIndex:0}:n===a[e][r]-1?{levelIndex:e,rowIndex:r+1,cellIndex:0}:{levelIndex:e,rowIndex:r,cellIndex:n+1};default:return{levelIndex:e,rowIndex:r,cellIndex:n}}}function _q({controlsRef:t,direction:e,levelIndex:r,rowIndex:n,cellIndex:a,size:i}){var c,u,d;const o=xbe({direction:e,size:i,rowIndex:n,cellIndex:a,levelIndex:r});if(!o)return;const l=(d=(u=(c=t.current)==null?void 0:c[o.levelIndex])==null?void 0:u[o.rowIndex])==null?void 0:d[o.cellIndex];l&&(l.disabled||l.getAttribute("data-hidden")||l.getAttribute("data-outside")?_q({controlsRef:t,direction:e,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:i}):l.focus())}function vbe(t){switch(t){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function bbe(t){var e;return(e=t.current)==null?void 0:e.map(r=>r.map(n=>n.length))}function Yk({controlsRef:t,levelIndex:e,rowIndex:r,cellIndex:n,event:a}){const i=vbe(a.key);if(i){a.preventDefault();const o=bbe(t);_q({controlsRef:t,direction:i,levelIndex:e,rowIndex:r,cellIndex:n,size:o})}}function ybe(t,e){if(!t||!e)return e;const r=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),i=t.getMilliseconds(),o=new Date(e);return o.setHours(r),o.setMinutes(n),o.setSeconds(a),o.setMilliseconds(i),o}var Pq={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Yo,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(a,i,o){var l,c=function(A,h,m){m===void 0&&(m={});var p=new Date(A),g=function(x,v){v===void 0&&(v={});var b=v.timeZoneName||"short",C=x+"|"+b,j=n[C];return j||(j=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:x,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),n[C]=j),j}(h,m);return g.formatToParts(p)},u=function(A,h){for(var m=c(A,h),p=[],g=0;g<m.length;g+=1){var x=m[g],v=x.type,b=x.value,C=r[v];C>=0&&(p[C]=parseInt(b,10))}var j=p[3],w=j===24?0:j,N=p[0]+"-"+p[1]+"-"+p[2]+" "+w+":"+p[4]+":"+p[5]+":000",E=+A;return(o.utc(N).valueOf()-(E-=E%1e3))/6e4},d=i.prototype;d.tz=function(A,h){A===void 0&&(A=l);var m,p=this.utcOffset(),g=this.toDate(),x=g.toLocaleString("en-US",{timeZone:A}),v=Math.round((g-new Date(x))/1e3/60),b=15*-Math.round(g.getTimezoneOffset()/15)-v;if(!Number(b))m=this.utcOffset(0,h);else if(m=o(x,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),h){var C=m.utcOffset();m=m.add(p-C,"minute")}return m.$x.$timezone=A,m},d.offsetName=function(A){var h=this.$x.$timezone||o.tz.guess(),m=c(this.valueOf(),h,{timeZoneName:A}).find(function(p){return p.type.toLowerCase()==="timezonename"});return m&&m.value};var f=d.startOf;d.startOf=function(A,h){if(!this.$x||!this.$x.$timezone)return f.call(this,A,h);var m=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(m,A,h).tz(this.$x.$timezone,!0)},o.tz=function(A,h,m){var p=m&&h,g=m||h||l,x=u(+o(),g);if(typeof A!="string")return o(A).tz(g);var v=function(w,N,E){var _=w-60*N*1e3,k=u(_,E);if(N===k)return[_,N];var D=u(_-=60*(k-N)*1e3,E);return k===D?[_,k]:[w-60*Math.min(k,D)*1e3,Math.max(k,D)]}(o.utc(A,p).valueOf(),x,g),b=v[0],C=v[1],j=o(b).utcOffset(C);return j.$x.$timezone=g,j},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(A){l=A}}})})(Pq);var wbe=Pq.exports;const jbe=ln(wbe);var kq={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Yo,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(p){var g={date:p,utc:!0,args:arguments};return new o(g)},c.utc=function(p){var g=l(this.toDate(),{locale:this.$L,utc:!0});return p?g.add(this.utcOffset(),r):g},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),u.call(this,p)};var d=c.init;c.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else d.call(this)};var f=c.utcOffset;c.utcOffset=function(p,g){var x=this.$utils().u;if(x(p))return this.$u?0:x(this.$offset)?f.call(this):this.$offset;if(typeof p=="string"&&(p=function(j){j===void 0&&(j="");var w=j.match(n);if(!w)return null;var N=(""+w[0]).match(a)||["-",0,0],E=N[0],_=60*+N[1]+ +N[2];return _===0?0:E==="+"?_:-_}(p),p===null))return this;var v=Math.abs(p)<=16?60*p:p,b=this;if(g)return b.$offset=v,b.$u=p===0,b;if(p!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+C,r)).$offset=v,b.$x.$localOffset=C}else b=this.utc();return b};var A=c.format;c.format=function(p){var g=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return A.call(this,g)},c.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var h=c.toDate;c.toDate=function(p){return p==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var m=c.diff;c.diff=function(p,g,x){if(p&&this.$u===p.$u)return m.call(this,p,g,x);var v=this.local(),b=l(p).local();return m.call(v,b,g,x)}}})})(kq);var Cbe=kq.exports;const Nbe=ln(Cbe);Ft.extend(Nbe);Ft.extend(jbe);function Sbe(t,e){return e?Ft(t).tz(e).utcOffset()+t.getTimezoneOffset():0}const P6=(t,e,r)=>{if(!t)return null;if(!e)return t;let n=Sbe(t,e);return r==="remove"&&(n*=-1),Ft(t).add(n,"minutes").toDate()};function Eu(t,e,r,n){return n||!e?e:Array.isArray(e)?e.map(a=>P6(a,r,t)):P6(e,r,t)}function Ebe({minDate:t,maxDate:e,timezone:r}){const n=Eu("add",new Date,r);return!t&&!e?n:t&&Ft(n).isBefore(t)?t:e&&Ft(n).isAfter(e)?e:n}const Bbe={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},Tbe=y.createContext(Bbe);function ao(){const t=y.useContext(Tbe),e=y.useCallback(o=>o||t.locale,[t.locale]),r=y.useCallback(o=>o||t.timezone||void 0,[t.timezone]),n=y.useCallback(o=>typeof o=="number"?o:t.firstDayOfWeek,[t.firstDayOfWeek]),a=y.useCallback(o=>Array.isArray(o)?o:t.weekendDays,[t.weekendDays]),i=y.useCallback(o=>typeof o=="string"?o:t.labelSeparator,[t.labelSeparator]);return{...t,getLocale:e,getTimezone:r,getFirstDayOfWeek:n,getWeekendDays:a,getLabelSeparator:i}}function Dbe(t,e){const r=ao(),n=a=>Eu("remove",a,r.getTimezone()).toISOString();if(e==="range"&&Array.isArray(t)){const[a,i]=t;return a?i?`${n(a)} – ${n(i)}`:`${n(a)} –`:""}return e==="multiple"&&Array.isArray(t)?t.map(a=>a&&n(a)).filter(Boolean).join(", "):!Array.isArray(t)&&t?n(t):""}function Xk({value:t,type:e,name:r,form:n}){return s.jsx("input",{type:"hidden",value:Dbe(t,e),name:r,form:n})}Xk.displayName="@mantine/dates/HiddenDatesInput";var Oq={day:"m_396ce5cb"};const Ibe={},_be=(t,{size:e})=>({day:{"--day-size":vr(e,"day-size")}}),Jk=wt((t,e)=>{const r=nt("Day",Ibe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,date:u,disabled:d,__staticSelector:f,weekend:A,outside:h,selected:m,renderDay:p,inRange:g,firstInRange:x,lastInRange:v,hidden:b,static:C,highlightToday:j,...w}=r,N=Wt({name:f||"Day",classes:Oq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:_be,rootSelector:"day"}),E=ao();return s.jsx(yi,{...N("day",{style:b?{display:"none"}:void 0}),component:C?"div":"button",ref:e,disabled:d,"data-today":Ft(u).isSame(Eu("add",new Date,E.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-highlight-today":j||void 0,"data-disabled":d||void 0,"data-weekend":!d&&!h&&A||void 0,"data-outside":!d&&h||void 0,"data-selected":!d&&m||void 0,"data-in-range":g&&!d||void 0,"data-first-in-range":x&&!d||void 0,"data-last-in-range":v&&!d||void 0,"data-static":C||void 0,unstyled:l,...w,children:(p==null?void 0:p(u))||Ft(u).date()})});Jk.classes=Oq;Jk.displayName="@mantine/dates/Day";function Pbe({locale:t,format:e="dd",firstDayOfWeek:r=1}){const n=Ft().day(r),a=[];for(let i=0;i<7;i+=1)typeof e=="string"?a.push(Ft(n).add(i,"days").locale(t).format(e)):a.push(e(Ft(n).add(i,"days").toDate()));return a}var Fq={weekday:"m_18a3eca"};const kbe={},Obe=(t,{size:e})=>({weekdaysRow:{"--wr-fz":Ds(e),"--wr-spacing":$s(e)}}),Zk=wt((t,e)=>{const r=nt("WeekdaysRow",kbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,locale:u,firstDayOfWeek:d,weekdayFormat:f,cellComponent:A="th",__staticSelector:h,withWeekNumbers:m,...p}=r,g=Wt({name:h||"WeekdaysRow",classes:Fq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Obe,rootSelector:"weekdaysRow"}),x=ao(),v=Pbe({locale:x.getLocale(u),format:f,firstDayOfWeek:x.getFirstDayOfWeek(d)}).map((b,C)=>s.jsx(A,{...g("weekday"),children:b},C));return s.jsxs(ut,{component:"tr",ref:e,...g("weekdaysRow"),...p,children:[m&&s.jsx(A,{...g("weekday"),children:"#"}),v]})});Zk.classes=Fq;Zk.displayName="@mantine/dates/WeekdaysRow";function Fbe(t,e=1){let r=Ft(t);const n=e===0?6:e-1;for(;r.day()!==n;)r=r.add(1,"day");return r.toDate()}function Rbe(t,e=1){let r=Ft(t);for(;r.day()!==e;)r=r.subtract(1,"day");return r.toDate()}function Mbe({month:t,firstDayOfWeek:e=1,consistentWeeks:r}){const n=Ft(t).subtract(Ft(t).date()-1,"day"),a=Ft(n).startOf("day"),i=a.toDate(),o=a.add(+a.daysInMonth()-1,"day").toDate(),l=Fbe(o,e),c=Rbe(i,e),u=[];for(;c<=l;){const d=[];for(let f=0;f<7;f+=1)d.push(new Date(c)),c.setDate(c.getDate()+1);u.push(d)}if(r&&u.length<6){const d=u[u.length-1],f=d[d.length-1],A=new Date(f);for(A.setDate(A.getDate()+1);u.length<6;){const h=[];for(let m=0;m<7;m+=1)h.push(new Date(A)),A.setDate(A.getDate()+1);u.push(h)}}return u}function Rq(t,e){return Ft(t).format("YYYY-MM")===Ft(e).format("YYYY-MM")}function Mq(t,e){return e instanceof Date?Ft(t).isAfter(Ft(e).subtract(1,"day"),"day"):!0}function Lq(t,e){return e instanceof Date?Ft(t).isBefore(Ft(e).add(1,"day"),"day"):!0}function Lbe(t,e,r,n,a,i,o){const l=t.flat().filter(d=>{var f;return Lq(d,r)&&Mq(d,e)&&!(a!=null&&a(d))&&!((f=n==null?void 0:n(d))!=null&&f.disabled)&&(!i||Rq(d,o))}),c=l.find(d=>{var f;return(f=n==null?void 0:n(d))==null?void 0:f.selected});if(c)return c;const u=l.find(d=>Ft().isSame(d,"date"));return u||l[0]}var Uq={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Yo,function(){var r="day";return function(n,a,i){var o=function(u){return u.add(4-u.isoWeekday(),r)},l=a.prototype;l.isoWeekYear=function(){return o(this).year()},l.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),r);var d,f,A,h,m=o(this),p=(d=this.isoWeekYear(),f=this.$u,A=(f?i.utc:i)().year(d).startOf("year"),h=4-A.isoWeekday(),A.isoWeekday()>4&&(h+=7),A.add(h,r));return m.diff(p,"week")+1},l.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var c=l.startOf;l.startOf=function(u,d){var f=this.$utils(),A=!!f.u(d)||d;return f.p(u)==="isoweek"?A?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):c.bind(this)(u,d)}}})})(Uq);var Ube=Uq.exports;const $be=ln(Ube);Ft.extend($be);function Hbe(t){const e=t.find(r=>Ft(r).day()===1);return Ft(e).isoWeek()}var $q={month:"m_cc9820d3",monthCell:"m_8f457cd5",weekNumber:"m_6cff9dea"};const Qbe={withCellSpacing:!0},zbe=(t,{size:e})=>({weekNumber:{"--wn-fz":Ds(e),"--wn-size":vr(e,"wn-size")}}),PS=wt((t,e)=>{const r=nt("Month",Qbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,__staticSelector:u,locale:d,firstDayOfWeek:f,weekdayFormat:A,month:h,weekendDays:m,getDayProps:p,excludeDate:g,minDate:x,maxDate:v,renderDay:b,hideOutsideDates:C,hideWeekdays:j,getDayAriaLabel:w,static:N,__getDayRef:E,__onDayKeyDown:_,__onDayClick:k,__onDayMouseEnter:D,__preventFocus:S,__stopPropagation:F,withCellSpacing:M,size:R,highlightToday:U,withWeekNumbers:z,...Q}=r,H=Wt({name:u||"Month",classes:$q,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:zbe,rootSelector:"month"}),q=ao(),X=Mbe({month:h,firstDayOfWeek:q.getFirstDayOfWeek(f),consistentWeeks:q.consistentWeeks}),$=Lbe(X,x,v,p,g,C,h),{resolvedClassNames:K,resolvedStyles:se}=Ul({classNames:n,styles:o,props:r}),Z=X.map((ie,ee)=>{const ue=ie.map((ae,re)=>{const fe=!Rq(ae,h),G=(w==null?void 0:w(ae))||Ft(ae).locale(d||q.locale).format("D MMMM YYYY"),oe=p==null?void 0:p(ae),Se=Ft(ae).isSame($,"date");return s.jsx("td",{...H("monthCell"),"data-with-spacing":M||void 0,children:s.jsx(Jk,{__staticSelector:u||"Month",classNames:K,styles:se,unstyled:l,"data-mantine-stop-propagation":F||void 0,highlightToday:U,renderDay:b,date:ae,size:R,weekend:q.getWeekendDays(m).includes(ae.getDay()),outside:fe,hidden:C?fe:!1,"aria-label":G,static:N,disabled:(g==null?void 0:g(ae))||!Lq(ae,v)||!Mq(ae,x),ref:ge=>E==null?void 0:E(ee,re,ge),...oe,onKeyDown:ge=>{var te;(te=oe==null?void 0:oe.onKeyDown)==null||te.call(oe,ge),_==null||_(ge,{rowIndex:ee,cellIndex:re,date:ae})},onMouseEnter:ge=>{var te;(te=oe==null?void 0:oe.onMouseEnter)==null||te.call(oe,ge),D==null||D(ge,ae)},onClick:ge=>{var te;(te=oe==null?void 0:oe.onClick)==null||te.call(oe,ge),k==null||k(ge,ae)},onMouseDown:ge=>{var te;(te=oe==null?void 0:oe.onMouseDown)==null||te.call(oe,ge),S&&ge.preventDefault()},tabIndex:S||!Se?-1:0})},ae.toString())});return s.jsxs("tr",{...H("monthRow"),children:[z&&s.jsx("td",{...H("weekNumber"),children:Hbe(ie)}),ue]},ee)});return s.jsxs(ut,{component:"table",...H("month"),size:R,ref:e,...Q,children:[!j&&s.jsx("thead",{...H("monthThead"),children:s.jsx(Zk,{__staticSelector:u||"Month",locale:d,firstDayOfWeek:f,weekdayFormat:A,size:R,classNames:K,styles:se,unstyled:l,withWeekNumbers:z})}),s.jsx("tbody",{...H("monthTbody"),children:Z})]})});PS.classes=$q;PS.displayName="@mantine/dates/Month";var Hq={pickerControl:"m_dc6a3c71"};const Vbe={},Wbe=(t,{size:e})=>({pickerControl:{"--dpc-fz":Ds(e),"--dpc-size":vr(e,"dpc-size")}}),kS=wt((t,e)=>{const r=nt("PickerControl",Vbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,firstInRange:u,lastInRange:d,inRange:f,__staticSelector:A,selected:h,disabled:m,...p}=r,g=Wt({name:A||"PickerControl",classes:Hq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Wbe,rootSelector:"pickerControl"});return s.jsx(yi,{...g("pickerControl"),ref:e,unstyled:l,"data-picker-control":!0,"data-selected":h&&!m||void 0,"data-disabled":m||void 0,"data-in-range":f&&!m&&!h||void 0,"data-first-in-range":u&&!m||void 0,"data-last-in-range":d&&!m||void 0,disabled:m,...p})});kS.classes=Hq;kS.displayName="@mantine/dates/PickerControl";function Qq(t,e,r){return!e&&!r?!1:!!(e&&Ft(t).isBefore(e,"year")||r&&Ft(t).isAfter(r,"year"))}function Gbe(t,e,r,n){const a=t.flat().filter(l=>{var c;return!Qq(l,e,r)&&!((c=n==null?void 0:n(l))!=null&&c.disabled)}),i=a.find(l=>{var c;return(c=n==null?void 0:n(l))==null?void 0:c.selected});if(i)return i;const o=a.find(l=>Ft().isSame(l,"year"));return o||a[0]}function zq(t){const e=t.getFullYear(),r=e-e%10;let n=0;const a=[[],[],[],[]];for(let i=0;i<4;i+=1){const o=i===3?1:3;for(let l=0;l<o;l+=1)a[i].push(new Date(r+n,0)),n+=1}return a}var Vq={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const qbe={yearsListFormat:"YYYY",withCellSpacing:!0},OS=wt((t,e)=>{const r=nt("YearsList",qbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,decade:u,yearsListFormat:d,locale:f,minDate:A,maxDate:h,getYearControlProps:m,__staticSelector:p,__getControlRef:g,__onControlKeyDown:x,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:C,__stopPropagation:j,withCellSpacing:w,size:N,...E}=r,_=Wt({name:p||"YearsList",classes:Vq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,rootSelector:"yearsList"}),k=ao(),D=zq(u),S=Gbe(D,A,h,m),F=D.map((M,R)=>{const U=M.map((z,Q)=>{const H=m==null?void 0:m(z),q=Ft(z).isSame(S,"year");return s.jsx("td",{..._("yearsListCell"),"data-with-spacing":w||void 0,children:s.jsx(kS,{..._("yearsListControl"),size:N,unstyled:l,"data-mantine-stop-propagation":j||void 0,disabled:Qq(z,A,h),ref:X=>g==null?void 0:g(R,Q,X),...H,onKeyDown:X=>{var $;($=H==null?void 0:H.onKeyDown)==null||$.call(H,X),x==null||x(X,{rowIndex:R,cellIndex:Q,date:z})},onClick:X=>{var $;($=H==null?void 0:H.onClick)==null||$.call(H,X),v==null||v(X,z)},onMouseEnter:X=>{var $;($=H==null?void 0:H.onMouseEnter)==null||$.call(H,X),b==null||b(X,z)},onMouseDown:X=>{var $;($=H==null?void 0:H.onMouseDown)==null||$.call(H,X),C&&X.preventDefault()},tabIndex:C||!q?-1:0,children:Ft(z).locale(k.getLocale(f)).format(d)})},Q)});return s.jsx("tr",{..._("yearsListRow"),children:U},R)});return s.jsx(ut,{component:"table",ref:e,size:N,..._("yearsList"),...E,children:s.jsx("tbody",{children:F})})});OS.classes=Vq;OS.displayName="@mantine/dates/YearsList";function Wq(t,e,r){return!e&&!r?!1:!!(e&&Ft(t).isBefore(e,"month")||r&&Ft(t).isAfter(r,"month"))}function Kbe(t,e,r,n){const a=t.flat().filter(l=>{var c;return!Wq(l,e,r)&&!((c=n==null?void 0:n(l))!=null&&c.disabled)}),i=a.find(l=>{var c;return(c=n==null?void 0:n(l))==null?void 0:c.selected});if(i)return i;const o=a.find(l=>Ft().isSame(l,"month"));return o||a[0]}function Ybe(t){const e=Ft(t).startOf("year").toDate(),r=[[],[],[],[]];let n=0;for(let a=0;a<4;a+=1)for(let i=0;i<3;i+=1)r[a].push(Ft(e).add(n,"months").toDate()),n+=1;return r}var Gq={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Xbe={monthsListFormat:"MMM",withCellSpacing:!0},FS=wt((t,e)=>{const r=nt("MonthsList",Xbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,__staticSelector:u,year:d,monthsListFormat:f,locale:A,minDate:h,maxDate:m,getMonthControlProps:p,__getControlRef:g,__onControlKeyDown:x,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:C,__stopPropagation:j,withCellSpacing:w,size:N,...E}=r,_=Wt({name:u||"MonthsList",classes:Gq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,rootSelector:"monthsList"}),k=ao(),D=Ybe(d),S=Kbe(D,h,m,p),F=D.map((M,R)=>{const U=M.map((z,Q)=>{const H=p==null?void 0:p(z),q=Ft(z).isSame(S,"month");return s.jsx("td",{..._("monthsListCell"),"data-with-spacing":w||void 0,children:s.jsx(kS,{..._("monthsListControl"),size:N,unstyled:l,__staticSelector:u||"MonthsList","data-mantine-stop-propagation":j||void 0,disabled:Wq(z,h,m),ref:X=>g==null?void 0:g(R,Q,X),...H,onKeyDown:X=>{var $;($=H==null?void 0:H.onKeyDown)==null||$.call(H,X),x==null||x(X,{rowIndex:R,cellIndex:Q,date:z})},onClick:X=>{var $;($=H==null?void 0:H.onClick)==null||$.call(H,X),v==null||v(X,z)},onMouseEnter:X=>{var $;($=H==null?void 0:H.onMouseEnter)==null||$.call(H,X),b==null||b(X,z)},onMouseDown:X=>{var $;($=H==null?void 0:H.onMouseDown)==null||$.call(H,X),C&&X.preventDefault()},tabIndex:C||!q?-1:0,children:Ft(z).locale(k.getLocale(A)).format(f)})},Q)});return s.jsx("tr",{..._("monthsListRow"),children:U},R)});return s.jsx(ut,{component:"table",ref:e,size:N,..._("monthsList"),...E,children:s.jsx("tbody",{children:F})})});FS.classes=Gq;FS.displayName="@mantine/dates/MonthsList";var qq={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Jbe={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Zbe=(t,{size:e})=>({calendarHeader:{"--dch-control-size":vr(e,"dch-control-size"),"--dch-fz":Ds(e)}}),Wh=wt((t,e)=>{const r=nt("CalendarHeader",Jbe,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,nextIcon:u,previousIcon:d,nextLabel:f,previousLabel:A,onNext:h,onPrevious:m,onLevelClick:p,label:g,nextDisabled:x,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:C,withNext:j,withPrevious:w,__staticSelector:N,__preventFocus:E,__stopPropagation:_,...k}=r,D=Wt({name:N||"CalendarHeader",classes:qq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,varsResolver:Zbe,rootSelector:"calendarHeader"}),S=E?F=>F.preventDefault():void 0;return s.jsxs(ut,{...D("calendarHeader"),ref:e,...k,children:[w&&s.jsx(yi,{...D("calendarHeaderControl"),"data-direction":"previous","aria-label":A,onClick:m,unstyled:l,onMouseDown:S,disabled:v,"data-disabled":v||void 0,tabIndex:E||v?-1:0,"data-mantine-stop-propagation":_||void 0,children:d||s.jsx(H4,{...D("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),s.jsx(yi,{component:b?"button":"div",...D("calendarHeaderLevel"),onClick:b?p:void 0,unstyled:l,onMouseDown:b?S:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":C,tabIndex:E||!b?-1:0,"data-mantine-stop-propagation":_||void 0,children:g}),j&&s.jsx(yi,{...D("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:l,onMouseDown:S,disabled:x,"data-disabled":x||void 0,tabIndex:E||x?-1:0,"data-mantine-stop-propagation":_||void 0,children:u||s.jsx(H4,{...D("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Wh.classes=qq;Wh.displayName="@mantine/dates/CalendarHeader";function eye(t){const e=zq(t);return[e[0][0],e[3][0]]}const tye={decadeLabelFormat:"YYYY"},RS=wt((t,e)=>{const r=nt("DecadeLevel",tye,t),{decade:n,locale:a,minDate:i,maxDate:o,yearsListFormat:l,getYearControlProps:c,__getControlRef:u,__onControlKeyDown:d,__onControlClick:f,__onControlMouseEnter:A,withCellSpacing:h,__preventFocus:m,nextIcon:p,previousIcon:g,nextLabel:x,previousLabel:v,onNext:b,onPrevious:C,nextDisabled:j,previousDisabled:w,levelControlAriaLabel:N,withNext:E,withPrevious:_,decadeLabelFormat:k,classNames:D,styles:S,unstyled:F,__staticSelector:M,__stopPropagation:R,size:U,...z}=r,Q=ao(),[H,q]=eye(n),X={__staticSelector:M||"DecadeLevel",classNames:D,styles:S,unstyled:F,size:U},$=typeof j=="boolean"?j:o?!Ft(q).endOf("year").isBefore(o):!1,K=typeof w=="boolean"?w:i?!Ft(H).startOf("year").isAfter(i):!1,se=(Z,ie)=>Ft(Z).locale(a||Q.locale).format(ie);return s.jsxs(ut,{"data-decade-level":!0,size:U,ref:e,...z,children:[s.jsx(Wh,{label:typeof k=="function"?k(H,q):`${se(H,k)} – ${se(q,k)}`,__preventFocus:m,__stopPropagation:R,nextIcon:p,previousIcon:g,nextLabel:x,previousLabel:v,onNext:b,onPrevious:C,nextDisabled:$,previousDisabled:K,hasNextLevel:!1,levelControlAriaLabel:N,withNext:E,withPrevious:_,...X}),s.jsx(OS,{decade:n,locale:a,minDate:i,maxDate:o,yearsListFormat:l,getYearControlProps:c,__getControlRef:u,__onControlKeyDown:d,__onControlClick:f,__onControlMouseEnter:A,__preventFocus:m,__stopPropagation:R,withCellSpacing:h,...X})]})});RS.classes={...OS.classes,...Wh.classes};RS.displayName="@mantine/dates/DecadeLevel";const rye={yearLabelFormat:"YYYY"},MS=wt((t,e)=>{const r=nt("YearLevel",rye,t),{year:n,locale:a,minDate:i,maxDate:o,monthsListFormat:l,getMonthControlProps:c,__getControlRef:u,__onControlKeyDown:d,__onControlClick:f,__onControlMouseEnter:A,withCellSpacing:h,__preventFocus:m,nextIcon:p,previousIcon:g,nextLabel:x,previousLabel:v,onNext:b,onPrevious:C,onLevelClick:j,nextDisabled:w,previousDisabled:N,hasNextLevel:E,levelControlAriaLabel:_,withNext:k,withPrevious:D,yearLabelFormat:S,__staticSelector:F,__stopPropagation:M,size:R,classNames:U,styles:z,unstyled:Q,...H}=r,q=ao(),X={__staticSelector:F||"YearLevel",classNames:U,styles:z,unstyled:Q,size:R},$=typeof w=="boolean"?w:o?!Ft(n).endOf("year").isBefore(o):!1,K=typeof N=="boolean"?N:i?!Ft(n).startOf("year").isAfter(i):!1;return s.jsxs(ut,{"data-year-level":!0,size:R,ref:e,...H,children:[s.jsx(Wh,{label:typeof S=="function"?S(n):Ft(n).locale(a||q.locale).format(S),__preventFocus:m,__stopPropagation:M,nextIcon:p,previousIcon:g,nextLabel:x,previousLabel:v,onNext:b,onPrevious:C,onLevelClick:j,nextDisabled:$,previousDisabled:K,hasNextLevel:E,levelControlAriaLabel:_,withNext:k,withPrevious:D,...X}),s.jsx(FS,{year:n,locale:a,minDate:i,maxDate:o,monthsListFormat:l,getMonthControlProps:c,__getControlRef:u,__onControlKeyDown:d,__onControlClick:f,__onControlMouseEnter:A,__preventFocus:m,__stopPropagation:M,withCellSpacing:h,...X})]})});MS.classes={...Wh.classes,...FS.classes};MS.displayName="@mantine/dates/YearLevel";const nye={monthLabelFormat:"MMMM YYYY"},LS=wt((t,e)=>{const r=nt("MonthLevel",nye,t),{month:n,locale:a,firstDayOfWeek:i,weekdayFormat:o,weekendDays:l,getDayProps:c,excludeDate:u,minDate:d,maxDate:f,renderDay:A,hideOutsideDates:h,hideWeekdays:m,getDayAriaLabel:p,__getDayRef:g,__onDayKeyDown:x,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:C,highlightToday:j,withWeekNumbers:w,__preventFocus:N,__stopPropagation:E,nextIcon:_,previousIcon:k,nextLabel:D,previousLabel:S,onNext:F,onPrevious:M,onLevelClick:R,nextDisabled:U,previousDisabled:z,hasNextLevel:Q,levelControlAriaLabel:H,withNext:q,withPrevious:X,monthLabelFormat:$,classNames:K,styles:se,unstyled:Z,__staticSelector:ie,size:ee,static:ue,...ae}=r,re=ao(),fe={__staticSelector:ie||"MonthLevel",classNames:K,styles:se,unstyled:Z,size:ee},G=typeof U=="boolean"?U:f?!Ft(n).endOf("month").isBefore(f):!1,oe=typeof z=="boolean"?z:d?!Ft(n).startOf("month").isAfter(d):!1;return s.jsxs(ut,{"data-month-level":!0,size:ee,ref:e,...ae,children:[s.jsx(Wh,{label:typeof $=="function"?$(n):Ft(n).locale(a||re.locale).format($),__preventFocus:N,__stopPropagation:E,nextIcon:_,previousIcon:k,nextLabel:D,previousLabel:S,onNext:F,onPrevious:M,onLevelClick:R,nextDisabled:G,previousDisabled:oe,hasNextLevel:Q,levelControlAriaLabel:H,withNext:q,withPrevious:X,...fe}),s.jsx(PS,{month:n,locale:a,firstDayOfWeek:i,weekdayFormat:o,weekendDays:l,getDayProps:c,excludeDate:u,minDate:d,maxDate:f,renderDay:A,hideOutsideDates:h,hideWeekdays:m,getDayAriaLabel:p,__getDayRef:g,__onDayKeyDown:x,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:N,__stopPropagation:E,static:ue,withCellSpacing:C,highlightToday:j,withWeekNumbers:w,...fe})]})});LS.classes={...PS.classes,...Wh.classes};LS.displayName="@mantine/dates/MonthLevel";var Kq={levelsGroup:"m_30b26e33"};const sye={},Gh=wt((t,e)=>{const r=nt("LevelsGroup",sye,t),{classNames:n,className:a,style:i,styles:o,unstyled:l,vars:c,__staticSelector:u,...d}=r,f=Wt({name:u||"LevelsGroup",classes:Kq,props:r,className:a,style:i,classNames:n,styles:o,unstyled:l,vars:c,rootSelector:"levelsGroup"});return s.jsx(ut,{ref:e,...f("levelsGroup"),...d})});Gh.classes=Kq;Gh.displayName="@mantine/dates/LevelsGroup";const aye={numberOfColumns:1},US=wt((t,e)=>{const r=nt("DecadeLevelGroup",aye,t),{decade:n,locale:a,minDate:i,maxDate:o,yearsListFormat:l,getYearControlProps:c,__onControlClick:u,__onControlMouseEnter:d,withCellSpacing:f,__preventFocus:A,nextIcon:h,previousIcon:m,nextLabel:p,previousLabel:g,onNext:x,onPrevious:v,nextDisabled:b,previousDisabled:C,classNames:j,styles:w,unstyled:N,__staticSelector:E,__stopPropagation:_,numberOfColumns:k,levelControlAriaLabel:D,decadeLabelFormat:S,size:F,vars:M,...R}=r,U=y.useRef([]),z=Array(k).fill(0).map((Q,H)=>{const q=Ft(n).add(H*10,"years").toDate();return s.jsx(RS,{size:F,yearsListFormat:l,decade:q,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:S,__onControlClick:u,__onControlMouseEnter:d,__onControlKeyDown:(X,$)=>Yk({levelIndex:H,rowIndex:$.rowIndex,cellIndex:$.cellIndex,event:X,controlsRef:U}),__getControlRef:(X,$,K)=>{Array.isArray(U.current[H])||(U.current[H]=[]),Array.isArray(U.current[H][X])||(U.current[H][X]=[]),U.current[H][X][$]=K},levelControlAriaLabel:typeof D=="function"?D(q):D,locale:a,minDate:i,maxDate:o,__preventFocus:A,__stopPropagation:_,nextIcon:h,previousIcon:m,nextLabel:p,previousLabel:g,onNext:x,onPrevious:v,nextDisabled:b,previousDisabled:C,getYearControlProps:c,__staticSelector:E||"DecadeLevelGroup",classNames:j,styles:w,unstyled:N,withCellSpacing:f},H)});return s.jsx(Gh,{classNames:j,styles:w,__staticSelector:E||"DecadeLevelGroup",ref:e,size:F,unstyled:N,...R,children:z})});US.classes={...Gh.classes,...RS.classes};US.displayName="@mantine/dates/DecadeLevelGroup";const iye={numberOfColumns:1},$S=wt((t,e)=>{const r=nt("YearLevelGroup",iye,t),{year:n,locale:a,minDate:i,maxDate:o,monthsListFormat:l,getMonthControlProps:c,__onControlClick:u,__onControlMouseEnter:d,withCellSpacing:f,__preventFocus:A,nextIcon:h,previousIcon:m,nextLabel:p,previousLabel:g,onNext:x,onPrevious:v,onLevelClick:b,nextDisabled:C,previousDisabled:j,hasNextLevel:w,classNames:N,styles:E,unstyled:_,__staticSelector:k,__stopPropagation:D,numberOfColumns:S,levelControlAriaLabel:F,yearLabelFormat:M,size:R,vars:U,...z}=r,Q=y.useRef([]),H=Array(S).fill(0).map((q,X)=>{const $=Ft(n).add(X,"years").toDate();return s.jsx(MS,{size:R,monthsListFormat:l,year:$,withNext:X===S-1,withPrevious:X===0,yearLabelFormat:M,__stopPropagation:D,__onControlClick:u,__onControlMouseEnter:d,__onControlKeyDown:(K,se)=>Yk({levelIndex:X,rowIndex:se.rowIndex,cellIndex:se.cellIndex,event:K,controlsRef:Q}),__getControlRef:(K,se,Z)=>{Array.isArray(Q.current[X])||(Q.current[X]=[]),Array.isArray(Q.current[X][K])||(Q.current[X][K]=[]),Q.current[X][K][se]=Z},levelControlAriaLabel:typeof F=="function"?F($):F,locale:a,minDate:i,maxDate:o,__preventFocus:A,nextIcon:h,previousIcon:m,nextLabel:p,previousLabel:g,onNext:x,onPrevious:v,onLevelClick:b,nextDisabled:C,previousDisabled:j,hasNextLevel:w,getMonthControlProps:c,classNames:N,styles:E,unstyled:_,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},X)});return s.jsx(Gh,{classNames:N,styles:E,__staticSelector:k||"YearLevelGroup",ref:e,size:R,unstyled:_,...z,children:H})});$S.classes={...MS.classes,...Gh.classes};$S.displayName="@mantine/dates/YearLevelGroup";const oye={numberOfColumns:1},HS=wt((t,e)=>{const r=nt("MonthLevelGroup",oye,t),{month:n,locale:a,firstDayOfWeek:i,weekdayFormat:o,weekendDays:l,getDayProps:c,excludeDate:u,minDate:d,maxDate:f,renderDay:A,hideOutsideDates:h,hideWeekdays:m,getDayAriaLabel:p,__onDayClick:g,__onDayMouseEnter:x,withCellSpacing:v,highlightToday:b,withWeekNumbers:C,__preventFocus:j,nextIcon:w,previousIcon:N,nextLabel:E,previousLabel:_,onNext:k,onPrevious:D,onLevelClick:S,nextDisabled:F,previousDisabled:M,hasNextLevel:R,classNames:U,styles:z,unstyled:Q,numberOfColumns:H,levelControlAriaLabel:q,monthLabelFormat:X,__staticSelector:$,__stopPropagation:K,size:se,static:Z,vars:ie,...ee}=r,ue=y.useRef([]),ae=Array(H).fill(0).map((re,fe)=>{const G=Ft(n).add(fe,"months").toDate();return s.jsx(LS,{month:G,withNext:fe===H-1,withPrevious:fe===0,monthLabelFormat:X,__stopPropagation:K,__onDayClick:g,__onDayMouseEnter:x,__onDayKeyDown:(oe,Se)=>Yk({levelIndex:fe,rowIndex:Se.rowIndex,cellIndex:Se.cellIndex,event:oe,controlsRef:ue}),__getDayRef:(oe,Se,ge)=>{Array.isArray(ue.current[fe])||(ue.current[fe]=[]),Array.isArray(ue.current[fe][oe])||(ue.current[fe][oe]=[]),ue.current[fe][oe][Se]=ge},levelControlAriaLabel:typeof q=="function"?q(G):q,locale:a,firstDayOfWeek:i,weekdayFormat:o,weekendDays:l,getDayProps:c,excludeDate:u,minDate:d,maxDate:f,renderDay:A,hideOutsideDates:h,hideWeekdays:m,getDayAriaLabel:p,__preventFocus:j,nextIcon:w,previousIcon:N,nextLabel:E,previousLabel:_,onNext:k,onPrevious:D,onLevelClick:S,nextDisabled:F,previousDisabled:M,hasNextLevel:R,classNames:U,styles:z,unstyled:Q,__staticSelector:$||"MonthLevelGroup",size:se,static:Z,withCellSpacing:v,highlightToday:b,withWeekNumbers:C},fe)});return s.jsx(Gh,{classNames:U,styles:z,__staticSelector:$||"MonthLevelGroup",ref:e,size:se,...ee,children:ae})});HS.classes={...Gh.classes,...LS.classes};HS.displayName="@mantine/dates/MonthLevelGroup";var Yq={input:"m_6fa5e2aa"};const lye={},QS=wt((t,e)=>{const{inputProps:r,wrapperProps:n,placeholder:a,classNames:i,styles:o,unstyled:l,popoverProps:c,modalProps:u,dropdownType:d,children:f,formattedValue:A,dropdownHandlers:h,dropdownOpened:m,onClick:p,clearable:g,onClear:x,clearButtonProps:v,rightSection:b,shouldClear:C,readOnly:j,disabled:w,value:N,name:E,form:_,type:k,...D}=RP("PickerInputBase",lye,t),S=s.jsx(Qn.ClearButton,{onClick:x,unstyled:l,...v}),F=()=>{k==="range"&&Array.isArray(N)&&N[0]&&!N[1]&&x(),h.close()};return s.jsxs(s.Fragment,{children:[d==="modal"&&!j&&s.jsx(fa,{opened:m,onClose:F,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:l,...u,children:f}),s.jsx(Qn.Wrapper,{...n,children:s.jsxs(Ga,{position:"bottom-start",opened:m,trapFocus:!0,returnFocus:!1,unstyled:l,...c,disabled:(c==null?void 0:c.disabled)||d==="modal"||j,onChange:M=>{var R;M||((R=c==null?void 0:c.onClose)==null||R.call(c),F())},children:[s.jsx(Ga.Target,{children:s.jsx(Qn,{"data-dates-input":!0,"data-read-only":j||void 0,disabled:w,component:"button",type:"button",multiline:!0,onClick:M=>{p==null||p(M),h.toggle()},__clearSection:S,__clearable:g&&C&&!j&&!w,rightSection:b,...r,ref:e,classNames:{...i,input:qt(Yq.input,i==null?void 0:i.input)},...D,children:A||s.jsx(Qn.Placeholder,{error:r.error,unstyled:l,className:i==null?void 0:i.placeholder,style:o==null?void 0:o.placeholder,children:a})})}),s.jsx(Ga.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),s.jsx(Xk,{value:N,name:E,form:_,type:k})]})});QS.classes=Yq;QS.displayName="@mantine/dates/PickerInputBase";const k6=t=>t==="range"?[null,null]:t==="multiple"?[]:null;function iy({type:t,value:e,defaultValue:r,onChange:n,applyTimezone:a=!0}){const i=y.useRef(t),o=ao(),[l,c,u]=qa({value:Eu("add",e,o.getTimezone(),!a),defaultValue:Eu("add",r,o.getTimezone(),!a),finalValue:k6(t),onChange:f=>{n==null||n(Eu("remove",f,o.getTimezone(),!a))}});let d=l;return i.current!==t&&(i.current=t,e===void 0&&(d=r!==void 0?r:k6(t),c(d))),[d,c,u]}function OB(t,e){return t?t==="month"?0:t==="year"?1:2:e||0}function cye(t){return t===0?"month":t===1?"year":"decade"}function Rv(t,e,r){return cye(ju(OB(t,0),OB(e,0),OB(r,2)))}const uye={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},Ex=wt((t,e)=>{const r=nt("Calendar",uye,t),{vars:n,maxLevel:a,minLevel:i,defaultLevel:o,level:l,onLevelChange:c,date:u,defaultDate:d,onDateChange:f,numberOfColumns:A,columnsToScroll:h,ariaLabels:m,nextLabel:p,previousLabel:g,onYearSelect:x,onMonthSelect:v,onYearMouseEnter:b,onMonthMouseEnter:C,__updateDateOnYearSelect:j,__updateDateOnMonthSelect:w,firstDayOfWeek:N,weekdayFormat:E,weekendDays:_,getDayProps:k,excludeDate:D,renderDay:S,hideOutsideDates:F,hideWeekdays:M,getDayAriaLabel:R,monthLabelFormat:U,nextIcon:z,previousIcon:Q,__onDayClick:H,__onDayMouseEnter:q,withCellSpacing:X,highlightToday:$,withWeekNumbers:K,monthsListFormat:se,getMonthControlProps:Z,yearLabelFormat:ie,yearsListFormat:ee,getYearControlProps:ue,decadeLabelFormat:ae,classNames:re,styles:fe,unstyled:G,minDate:oe,maxDate:Se,locale:ge,__staticSelector:te,size:ye,__preventFocus:we,__stopPropagation:be,onNextDecade:Te,onPreviousDecade:Oe,onNextYear:Me,onPreviousYear:Ve,onNextMonth:Pe,onPreviousMonth:ze,static:ht,__timezoneApplied:gt,...Ct}=r,{resolvedClassNames:xt,resolvedStyles:Ie}=Ul({classNames:re,styles:fe,props:r}),[De,Je]=qa({value:l?Rv(l,i,a):void 0,defaultValue:o?Rv(o,i,a):void 0,finalValue:Rv(void 0,i,a),onChange:c}),[Ke,St]=iy({type:"default",value:u,defaultValue:d,onChange:f,applyTimezone:!gt}),it={__staticSelector:te||"Calendar",styles:Ie,classNames:xt,unstyled:G,size:ye},Pt=ao(),dr=h||A||1,ar=new Date,gn=oe&&oe>ar?oe:ar,ir=Ke||Eu("add",gn,Pt.getTimezone()),nn=()=>{const Dt=Ft(ir).add(dr,"month").toDate();Pe==null||Pe(Dt),St(Dt)},Mt=()=>{const Dt=Ft(ir).subtract(dr,"month").toDate();ze==null||ze(Dt),St(Dt)},At=()=>{const Dt=Ft(ir).add(dr,"year").toDate();Me==null||Me(Dt),St(Dt)},yt=()=>{const Dt=Ft(ir).subtract(dr,"year").toDate();Ve==null||Ve(Dt),St(Dt)},dt=()=>{const Dt=Ft(ir).add(10*dr,"year").toDate();Te==null||Te(Dt),St(Dt)},Ot=()=>{const Dt=Ft(ir).subtract(10*dr,"year").toDate();Oe==null||Oe(Dt),St(Dt)};return s.jsxs(ut,{ref:e,size:ye,"data-calendar":!0,...Ct,children:[De==="month"&&s.jsx(HS,{month:ir,minDate:oe,maxDate:Se,firstDayOfWeek:N,weekdayFormat:E,weekendDays:_,getDayProps:k,excludeDate:D,renderDay:S,hideOutsideDates:F,hideWeekdays:M,getDayAriaLabel:R,onNext:nn,onPrevious:Mt,hasNextLevel:a!=="month",onLevelClick:()=>Je("year"),numberOfColumns:A,locale:ge,levelControlAriaLabel:m==null?void 0:m.monthLevelControl,nextLabel:(m==null?void 0:m.nextMonth)??p,nextIcon:z,previousLabel:(m==null?void 0:m.previousMonth)??g,previousIcon:Q,monthLabelFormat:U,__onDayClick:H,__onDayMouseEnter:q,__preventFocus:we,__stopPropagation:be,static:ht,withCellSpacing:X,highlightToday:$,withWeekNumbers:K,...it}),De==="year"&&s.jsx($S,{year:ir,numberOfColumns:A,minDate:oe,maxDate:Se,monthsListFormat:se,getMonthControlProps:Z,locale:ge,onNext:At,onPrevious:yt,hasNextLevel:a!=="month"&&a!=="year",onLevelClick:()=>Je("decade"),levelControlAriaLabel:m==null?void 0:m.yearLevelControl,nextLabel:(m==null?void 0:m.nextYear)??p,nextIcon:z,previousLabel:(m==null?void 0:m.previousYear)??g,previousIcon:Q,yearLabelFormat:ie,__onControlMouseEnter:C,__onControlClick:(Dt,Zt)=>{w&&St(Zt),Je(Rv("month",i,a)),v==null||v(Zt)},__preventFocus:we,__stopPropagation:be,withCellSpacing:X,...it}),De==="decade"&&s.jsx(US,{decade:ir,minDate:oe,maxDate:Se,yearsListFormat:ee,getYearControlProps:ue,locale:ge,onNext:dt,onPrevious:Ot,numberOfColumns:A,nextLabel:(m==null?void 0:m.nextDecade)??p,nextIcon:z,previousLabel:(m==null?void 0:m.previousDecade)??g,previousIcon:Q,decadeLabelFormat:ae,__onControlMouseEnter:b,__onControlClick:(Dt,Zt)=>{j&&St(Zt),Je(Rv("year",i,a)),x==null||x(Zt)},__preventFocus:we,__stopPropagation:be,withCellSpacing:X,...it})]})});Ex.classes={...US.classes,...$S.classes,...HS.classes};Ex.displayName="@mantine/dates/Calendar";function Xq(t){const{maxLevel:e,minLevel:r,defaultLevel:n,level:a,onLevelChange:i,nextIcon:o,previousIcon:l,date:c,defaultDate:u,onDateChange:d,numberOfColumns:f,columnsToScroll:A,ariaLabels:h,nextLabel:m,previousLabel:p,onYearSelect:g,onMonthSelect:x,onYearMouseEnter:v,onMonthMouseEnter:b,onNextMonth:C,onPreviousMonth:j,onNextYear:w,onPreviousYear:N,onNextDecade:E,onPreviousDecade:_,withCellSpacing:k,highlightToday:D,__updateDateOnYearSelect:S,__updateDateOnMonthSelect:F,withWeekNumbers:M,firstDayOfWeek:R,weekdayFormat:U,weekendDays:z,getDayProps:Q,excludeDate:H,renderDay:q,hideOutsideDates:X,hideWeekdays:$,getDayAriaLabel:K,monthLabelFormat:se,monthsListFormat:Z,getMonthControlProps:ie,yearLabelFormat:ee,yearsListFormat:ue,getYearControlProps:ae,decadeLabelFormat:re,allowSingleDateInRange:fe,allowDeselect:G,minDate:oe,maxDate:Se,locale:ge,...te}=t;return{calendarProps:{maxLevel:e,minLevel:r,defaultLevel:n,level:a,onLevelChange:i,nextIcon:o,previousIcon:l,date:c,defaultDate:u,onDateChange:d,numberOfColumns:f,columnsToScroll:A,ariaLabels:h,nextLabel:m,previousLabel:p,onYearSelect:g,onMonthSelect:x,onYearMouseEnter:v,onMonthMouseEnter:b,onNextMonth:C,onPreviousMonth:j,onNextYear:w,onPreviousYear:N,onNextDecade:E,onPreviousDecade:_,withCellSpacing:k,highlightToday:D,__updateDateOnYearSelect:S,__updateDateOnMonthSelect:F,withWeekNumbers:M,firstDayOfWeek:R,weekdayFormat:U,weekendDays:z,getDayProps:Q,excludeDate:H,renderDay:q,hideOutsideDates:X,hideWeekdays:$,getDayAriaLabel:K,monthLabelFormat:se,monthsListFormat:Z,getMonthControlProps:ie,yearLabelFormat:ee,yearsListFormat:ue,getYearControlProps:ae,decadeLabelFormat:re,allowSingleDateInRange:fe,allowDeselect:G,minDate:oe,maxDate:Se,locale:ge},others:te}}function O6(t,e){const r=[...e].sort((n,a)=>n.getTime()-a.getTime());return Ft(r[0]).startOf("day").subtract(1,"ms").isBefore(t)&&Ft(r[1]).endOf("day").add(1,"ms").isAfter(t)}function dye({type:t,level:e,value:r,defaultValue:n,onChange:a,allowSingleDateInRange:i,allowDeselect:o,onMouseLeave:l,applyTimezone:c=!0}){const[u,d]=iy({type:t,value:r,defaultValue:n,onChange:a,applyTimezone:c}),[f,A]=y.useState(t==="range"&&u[0]&&!u[1]?u[0]:null),[h,m]=y.useState(null),p=w=>{if(t==="range"){if(f instanceof Date&&!u[1]){if(Ft(w).isSame(f,e)&&!i){A(null),m(null),d([null,null]);return}const N=[w,f];N.sort((E,_)=>E.getTime()-_.getTime()),d(N),m(null),A(null);return}if(u[0]&&!u[1]&&Ft(w).isSame(u[0],e)&&!i){A(null),m(null),d([null,null]);return}d([w,null]),m(null),A(w);return}if(t==="multiple"){u.some(N=>Ft(N).isSame(w,e))?d(u.filter(N=>!Ft(N).isSame(w,e))):d([...u,w]);return}u&&o&&Ft(w).isSame(u,e)?d(null):d(w)},g=w=>f instanceof Date&&h instanceof Date?O6(w,[h,f]):u[0]instanceof Date&&u[1]instanceof Date?O6(w,u):!1,x=t==="range"?w=>{l==null||l(w),m(null)}:l,v=w=>u[0]instanceof Date&&Ft(w).isSame(u[0],e)?!(h&&Ft(h).isBefore(u[0])):!1,b=w=>u[1]instanceof Date?Ft(w).isSame(u[1],e):!(u[0]instanceof Date)||!h?!1:Ft(h).isBefore(u[0])&&Ft(w).isSame(u[0],e),C=w=>{if(t==="range")return{selected:u.some(E=>E&&Ft(E).isSame(w,e)),inRange:g(w),firstInRange:v(w),lastInRange:b(w),"data-autofocus":!!u[0]&&Ft(u[0]).isSame(w,e)||void 0};if(t==="multiple")return{selected:u.some(E=>E&&Ft(E).isSame(w,e)),"data-autofocus":!!u[0]&&Ft(u[0]).isSame(w,e)||void 0};const N=Ft(u).isSame(w,e);return{selected:N,"data-autofocus":N||void 0}},j=t==="range"&&f?m:()=>{};return y.useEffect(()=>{if(t==="range")if(u[0]&&!u[1]&&(f==null?void 0:f.getTime())!==u[0].getTime())A(u[0]);else{const w=u[0]==null&&u[1]==null,N=u[0]!=null&&u[1]!=null;(w||N)&&(A(null),m(null))}},[u]),{onDateChange:p,onRootMouseLeave:x,onHoveredDateChange:j,getControlProps:C,_value:u,setValue:d}}const fye={type:"default",defaultLevel:"month",numberOfColumns:1},_m=wt((t,e)=>{const r=nt("DatePicker",fye,t),{classNames:n,styles:a,vars:i,type:o,defaultValue:l,value:c,onChange:u,__staticSelector:d,getDayProps:f,allowSingleDateInRange:A,allowDeselect:h,onMouseLeave:m,numberOfColumns:p,hideOutsideDates:g,__onDayMouseEnter:x,__onDayClick:v,__timezoneApplied:b,...C}=r,{onDateChange:j,onRootMouseLeave:w,onHoveredDateChange:N,getControlProps:E}=dye({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:A,value:c,defaultValue:l,onChange:u,onMouseLeave:m,applyTimezone:!b}),{resolvedClassNames:_,resolvedStyles:k}=Ul({classNames:n,styles:a,props:r}),D=ao();return s.jsx(Ex,{ref:e,minLevel:"month",classNames:_,styles:k,__staticSelector:d||"DatePicker",onMouseLeave:w,numberOfColumns:p,hideOutsideDates:g??p!==1,__onDayMouseEnter:(S,F)=>{N(F),x==null||x(S,F)},__onDayClick:(S,F)=>{j(F),v==null||v(S,F)},getDayProps:S=>({...E(S),...f==null?void 0:f(S)}),...C,date:Eu("add",C.date,D.getTimezone(),b),__timezoneApplied:!0})});_m.classes=Ex.classes;_m.displayName="@mantine/dates/DatePicker";function hye(t,e){if(t===null)return null;const r=Eu("add",new Date(t),e);return Number.isNaN(r.getTime())||!t?null:r}function Aye({date:t,maxDate:e,minDate:r}){return!(t==null||Number.isNaN(t.getTime())||e&&Ft(t).isAfter(e,"date")||r&&Ft(t).isBefore(r,"date"))}const mye={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},ko=wt((t,e)=>{const r=RP("DateInput",mye,t),{inputProps:n,wrapperProps:a,value:i,defaultValue:o,onChange:l,clearable:c,clearButtonProps:u,popoverProps:d,getDayProps:f,locale:A,valueFormat:h,dateParser:m,minDate:p,maxDate:g,fixOnBlur:x,onFocus:v,onBlur:b,onClick:C,onKeyDown:j,readOnly:w,name:N,form:E,rightSection:_,unstyled:k,classNames:D,styles:S,allowDeselect:F,preserveTime:M,date:R,defaultDate:U,onDateChange:z,...Q}=r,H=y.useRef(null),q=y.useRef(null),[X,$]=y.useState(!1),{calendarProps:K,others:se}=Xq(Q),Z=ao(),ee=m||(Pe=>{const ze=Ft(Pe,h,Z.getLocale(A)).toDate();return Number.isNaN(ze.getTime())?hye(Pe,Z.getTimezone()):ze}),ue=F!==void 0?F:c,ae=Pe=>Pe?Ft(Pe).locale(Z.getLocale(A)).format(h):"",[re,fe,G]=iy({type:"default",value:i,defaultValue:o,onChange:l}),[oe,Se]=iy({type:"default",value:R,defaultValue:o||U,onChange:z});y.useEffect(()=>{G&&i!==null&&Se(i)},[G,i]);const[ge,te]=y.useState(ae(re));y.useEffect(()=>{te(ae(re))},[Z.getLocale(A)]);const ye=Pe=>{const ze=Pe.currentTarget.value;if(te(ze),$(!0),ze.trim()===""&&c)fe(null);else{const ht=ee(ze);Aye({date:ht,minDate:p,maxDate:g})&&(fe(ht),Se(ht))}},we=Pe=>{b==null||b(Pe),$(!1),x&&te(ae(re))},be=Pe=>{v==null||v(Pe),$(!0)},Te=Pe=>{C==null||C(Pe),$(!0)},Oe=Pe=>{Pe.key==="Escape"&&$(!1),j==null||j(Pe)},Me=Pe=>({...f==null?void 0:f(Pe),selected:Ft(re).isSame(Pe,"day"),onClick:ze=>{var Ct,xt;(xt=f==null?void 0:(Ct=f(Pe)).onClick)==null||xt.call(Ct,ze);const ht=M?ybe(re,Pe):Pe,gt=c&&ue&&Ft(re).isSame(Pe,"day")?null:ht;fe(gt),!G&&te(ae(gt)),$(!1)}}),Ve=_||(c&&re&&!w?s.jsx(Vh,{variant:"transparent",onMouseDown:Pe=>Pe.preventDefault(),tabIndex:-1,onClick:()=>{fe(null),!G&&te(""),$(!1)},unstyled:k,size:n.size||"sm",...u}):null);return Ou(()=>{re!==void 0&&!X&&te(ae(re))},[re]),jz(()=>$(!1),void 0,[H.current,q.current]),s.jsxs(s.Fragment,{children:[s.jsx(Qn.Wrapper,{...a,__staticSelector:"DateInput",ref:H,children:s.jsxs(Ga,{opened:X,trapFocus:!1,position:"bottom-start",disabled:w,withRoles:!1,unstyled:k,...d,children:[s.jsx(Ga.Target,{children:s.jsx(Qn,{"data-dates-input":!0,"data-read-only":w||void 0,autoComplete:"off",ref:e,value:ge,onChange:ye,onBlur:we,onFocus:be,onClick:Te,onKeyDown:Oe,readOnly:w,rightSection:Ve,...n,...se,__staticSelector:"DateInput"})}),s.jsx(Ga.Dropdown,{onMouseDown:Pe=>Pe.preventDefault(),"data-dates-dropdown":!0,ref:q,children:s.jsx(Ex,{__staticSelector:"DateInput",__timezoneApplied:!0,...K,classNames:D,styles:S,unstyled:k,__preventFocus:!0,minDate:p,maxDate:g,locale:A,getDayProps:Me,size:n.size,date:oe,onDateChange:Se})})]})}),s.jsx(Xk,{name:N,form:E,value:re,type:"default"})]})});ko.classes={...Qn.classes,...Ex.classes};ko.displayName="@mantine/dates/DateInput";function pye({type:t,value:e,defaultValue:r,onChange:n,locale:a,format:i,closeOnChange:o,sortDates:l,labelSeparator:c,valueFormatter:u}){const d=ao(),[f,A]=lP(!1),[h,m]=iy({type:t,value:e,defaultValue:r,onChange:n}),p=gbe({type:t,date:h,locale:d.getLocale(a),format:i,labelSeparator:d.getLabelSeparator(c),formatter:u}),g=b=>{o&&(t==="default"&&A.close(),t==="range"&&b[0]&&b[1]&&A.close()),m(l&&t==="multiple"?[...b].sort((C,j)=>C.getTime()-j.getTime()):b)},x=()=>g(t==="range"?[null,null]:t==="multiple"?[]:null),v=t==="range"?!!h[0]:t==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:x,shouldClear:v,formattedValue:p,dropdownOpened:f,dropdownHandlers:A}}const gye={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},V2=wt((t,e)=>{const r=nt("DatePickerInput",gye,t),{type:n,value:a,defaultValue:i,onChange:o,valueFormat:l,labelSeparator:c,locale:u,classNames:d,styles:f,unstyled:A,closeOnChange:h,size:m,variant:p,dropdownType:g,sortDates:x,minDate:v,maxDate:b,vars:C,defaultDate:j,valueFormatter:w,...N}=r,{resolvedClassNames:E,resolvedStyles:_}=Ul({classNames:d,styles:f,props:r}),{calendarProps:k,others:D}=Xq(N),{_value:S,setValue:F,formattedValue:M,dropdownHandlers:R,dropdownOpened:U,onClear:z,shouldClear:Q}=pye({type:n,value:a,defaultValue:i,onChange:o,locale:u,format:l,labelSeparator:c,closeOnChange:h,sortDates:x,valueFormatter:w}),H=Array.isArray(S)?S[0]||j:S||j,q=ao();return s.jsx(QS,{formattedValue:M,dropdownOpened:U,dropdownHandlers:R,classNames:E,styles:_,unstyled:A,ref:e,onClear:z,shouldClear:Q,value:S,size:m,variant:p,dropdownType:g,...D,type:n,__staticSelector:"DatePickerInput",children:s.jsx(_m,{...k,size:m,variant:p,type:n,value:S,defaultDate:H||Ebe({maxDate:b,minDate:v,timezone:q.getTimezone()}),onChange:F,locale:u,classNames:E,styles:_,unstyled:A,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:Eu("add",k.date,q.getTimezone()),__timezoneApplied:!0})})});V2.classes={...QS.classes,..._m.classes};V2.displayName="@mantine/dates/DatePickerInput";const Jq=({url:t,filename:e,onClose:r})=>{const[n,a]=y.useState("iframe"),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(0),[f,A]=y.useState(null);y.useEffect(()=>{if(t)if(console.log("🔗 URL PDF reçue:",t),t.includes("firebasestorage.googleapis.com")){console.log("🔥 URL Firebase détectée, REMPLACEMENT par le proxy...");const C=t.match(/bdc%2F([a-f0-9-]+)%2F/);if(C){const j=C[1];console.log("🔍 ID BDC extrait:",j);const N=`https://sauvegarde-mai-gestion-production.up.railway.app/api/api/bdc/${j}/pdf-proxy`;console.log("🔄 URL proxy générée:",N),A(N)}else console.warn("⚠️ Impossible d'extraire l'ID BDC depuis l'URL Firebase");c(!1),o(null)}else h()},[t,u]);const h=async()=>{try{c(!0),o(null);const C=localStorage.getItem("auth_token"),j=await fetch(t,{method:"HEAD",headers:{Authorization:C?`Bearer ${C}`:"",Accept:"application/pdf"}});if(!j.ok)throw new Error(`URL non accessible (${j.status})`);console.log("✅ URL PDF accessible:",t),c(!1)}catch(C){console.error("❌ Erreur URL PDF:",C),o(`URL non accessible: ${C.message}`),a("error"),c(!1)}},m=()=>{console.error("❌ Erreur iframe PDF"),n==="iframe"?(console.log("🔄 Basculement vers embed..."),a("embed")):n==="embed"&&(console.log("❌ Échec embed, affichage erreur"),o("Impossible d'afficher le PDF dans cette fenêtre"),a("error"))},p=C=>{console.log("✅ Iframe chargée"),c(!1);try{const j=C.target;setTimeout(()=>{try{j.contentDocument===null&&j.contentWindow===null&&(console.warn("⚠️ Iframe sans contenu détecté"),m())}catch{console.log("🔒 CORS restriction détectée (normal)")}},2e3)}catch(j){console.warn("⚠️ Erreur test iframe:",j)}},g=()=>{window.open(t,"_blank")},x=()=>{const C=document.createElement("a");C.href=f||t,C.download=e||"document.pdf",document.body.appendChild(C),C.click(),document.body.removeChild(C)},v=()=>{d(C=>C+1),a("iframe"),o(null),c(!0)},b=()=>{if(l)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4 bg-gray-50",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Chargement du PDF..."}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Mode: ",n]})]});if(n==="error"||i)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[s.jsx(dh,{className:"w-16 h-16 text-yellow-500"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aperçu non disponible"}),s.jsx("p",{className:"text-gray-600 mb-4",children:i||"Le PDF ne peut pas être affiché dans cette fenêtre"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[s.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(Cm,{className:"w-4 h-4 mr-2"}),"Réessayer"]}),s.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(j4,{className:"w-4 h-4 mr-2"}),"Ouvrir dans un nouvel onglet"]}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(ku,{className:"w-4 h-4 mr-2"}),"Télécharger le PDF"]})]})]})]});const C=f||`${t}#toolbar=1&navpanes=1&scrollbar=1&view=FitH&zoom=100`;return n==="embed"?s.jsx("div",{className:"h-full bg-gray-100",children:s.jsx("embed",{src:C,type:"application/pdf",width:"100%",height:"100%",className:"border-0",onError:m,onLoad:()=>{console.log("✅ Embed chargé"),c(!1)}})}):s.jsxs("div",{className:"h-full",children:[s.jsx("iframe",{src:C,className:"w-full h-full border rounded",title:"Aperçu PDF",allow:"fullscreen",onError:m,onLoad:p,style:{minHeight:"500px",backgroundColor:"#f5f5f5"}}),s.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Si l'aperçu ne s'affiche pas, utilisez les boutons ci-dessus pour ouvrir ou télécharger le PDF"})]})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg w-11/12 h-5/6 flex flex-col max-w-6xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Aperçu PDF"}),e&&s.jsx("span",{className:"text-sm text-gray-500 truncate max-w-xs",children:e}),u>0&&s.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:["Tentative ",u+1]}),t&&t.includes("firebasestorage.googleapis.com")&&s.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:"🔥 Firebase"}),f&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"🔄 Proxy"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:x,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Télécharger",children:s.jsx(ku,{className:"w-5 h-5"})}),s.jsx("button",{onClick:g,className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Ouvrir dans un nouvel onglet",children:s.jsx(j4,{className:"w-5 h-5"})}),s.jsx("button",{onClick:v,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Réessayer",children:s.jsx(Cm,{className:"w-4 h-4"})}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Fermer",children:s.jsx(Hh,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex-1 p-4",children:b()})]})})},zS=({entityId:t,entityType:e="bdc",onUploadSuccess:r,onUploadError:n,existingFile:a=null,uploadFunction:i,deleteFunction:o,getViewUrlFunction:l,onPreview:c=null})=>{const[u,d]=y.useState(!1),[f,A]=y.useState(!1),[h,m]=y.useState(0),[p,g]=y.useState(a),[x,v]=y.useState(!1),[b,C]=y.useState(null),j=y.useRef(null);y.useEffect(()=>{console.log("🔥 PdfUploadFirebase - existingFile changed:",a),g(a)},[a]);const w=Q=>{if(!Q)throw new Error("Aucun fichier sélectionné");if(Q.type!=="application/pdf")throw new Error("Le fichier doit être un PDF");if(Q.size>10*1024*1024)throw new Error("Le fichier ne doit pas dépasser 10MB");return!0},N=async Q=>{try{w(Q),A(!0),m(0);const q=await i(t,Q,X=>{m(X)});g({nomFichier:q.fileName||q.nomFichier||Q.name,tailleFichier:q.size||q.tailleFichier||Q.size,dateUpload:q.uploadedAt||q.dateUpload||new Date().toISOString(),firebaseDownloadUrl:q.downloadURL||q.firebaseDownloadUrl,firebaseStoragePath:q.fullPath||q.firebaseStoragePath}),ve.success("Fichier PDF uploadé avec succès !"),r&&r(q)}catch(H){console.error("Erreur upload:",H),ve.error(H.message||"Erreur lors de l'upload du fichier"),n&&n(H)}finally{A(!1),m(0)}},E=async()=>{if(p)try{await o(t),g(null),ve.success("Fichier PDF supprimé avec succès !"),r&&r(null)}catch(Q){console.error("Erreur suppression:",Q),ve.error(Q.message||"Erreur lors de la suppression du fichier")}},_=async()=>{if(p){if(c){console.log("🔄 Utilisation de la fonction de prévisualisation personnalisée"),c(p);return}try{let Q;p.firebaseDownloadUrl?Q=p.firebaseDownloadUrl:Q=await l(t),C(Q),v(!0)}catch(Q){console.error("Erreur prévisualisation:",Q),ve.error("Erreur lors de l'ouverture du PDF")}}},k=async()=>{if(p)try{let Q;p.firebaseDownloadUrl?Q=p.firebaseDownloadUrl:Q=await l(t);const H=document.createElement("a");H.href=Q,H.download=p.nomFichier||`${e}_${t}.pdf`,document.body.appendChild(H),H.click(),document.body.removeChild(H),ve.success("Téléchargement démarré !")}catch(Q){console.error("Erreur téléchargement:",Q),ve.error("Erreur lors du téléchargement du PDF")}},D=Q=>{Q.preventDefault(),d(!0)},S=Q=>{Q.preventDefault(),d(!1)},F=Q=>{Q.preventDefault(),d(!1);const H=Array.from(Q.dataTransfer.files);H.length>0&&N(H[0])},M=Q=>{const H=Array.from(Q.target.files);H.length>0&&N(H[0])},R=Q=>{if(!Q)return"Taille inconnue";const H=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(Q)/Math.log(1024));return Math.round(Q/Math.pow(1024,q)*100)/100+" "+H[q]},U=Q=>Q?new Date(Q).toLocaleDateString("fr-FR"):"Date inconnue",z=Q=>{if(!Q)return"Fichier PDF";const H=Q.match(/^\d{13}_(.+)$/);if(H&&(Q=H[1]),Q.match(/^BDC-\d{4}-\d{3}\.pdf$/))return Q;if(Q.length>60){const X=Q.split(".").pop(),$=Q.substring(0,Q.lastIndexOf("."));return`${$.substring(0,25)}...${$.slice(-20)}.${X}`}return Q};return s.jsxs("div",{className:"space-y-4",children:[p?s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Qi,{className:"w-8 h-8 text-red-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",title:p.nomFichier,children:z(p.nomFichier)}),s.jsxs("p",{className:"text-sm text-gray-500",children:[R(p.tailleFichier)," • Uploadé le ",U(p.dateUpload)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:_,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(ix,{className:"w-4 h-4 mr-1"}),"Aperçu"]}),s.jsxs("button",{onClick:k,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx(ku,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),s.jsxs("button",{onClick:E,className:"inline-flex items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(Hh,{className:"w-4 h-4 mr-1"}),"Supprimer"]})]})]})}):s.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${u?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:D,onDragLeave:S,onDrop:F,children:f?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upload en cours..."}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500",children:[h,"%"]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(J_,{className:"w-12 h-12 text-gray-400"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Glissez-déposez un fichier PDF ici, ou"," ",s.jsx("button",{onClick:()=>{var Q;return(Q=j.current)==null?void 0:Q.click()},className:"text-blue-600 hover:text-blue-500 font-medium",children:"parcourez"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF uniquement, max 10MB"})]}),s.jsx("input",{ref:j,type:"file",accept:".pdf",onChange:M,className:"hidden"})]})}),x&&b&&s.jsx(Jq,{url:b,filename:p==null?void 0:p.nomFichier,onClose:()=>{v(!1),C(null)}})]})},xye=()=>{};var F6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},vye=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zq(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vye(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||l==null||u==null||f==null)throw new bye;const A=i<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yye=function(t){const e=Zq(t);return eK.encodeByteArray(e,!0)},W2=function(t){return yye(t).replace(/\./g,"")},tK=function(t){try{return eK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jye=()=>wye().__FIREBASE_DEFAULTS__,Cye=()=>{if(typeof process>"u"||typeof F6>"u")return;const t=F6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nye=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tK(t[1]);return e&&JSON.parse(e)},eO=()=>{try{return xye()||jye()||Cye()||Nye()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rK=t=>{var e,r;return(r=(e=eO())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Sye=t=>{const e=rK(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},nK=()=>{var t;return(t=eO())===null||t===void 0?void 0:t.config},sK=t=>{var e;return(e=eO())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){return t.endsWith(".cloudworkstations.dev")}async function aK(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bye(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[W2(JSON.stringify(r)),W2(JSON.stringify(o)),""].join(".")}const xb={};function Tye(){const t={prod:[],emulator:[]};for(const e of Object.keys(xb))xb[e]?t.emulator.push(e):t.prod.push(e);return t}function Dye(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let R6=!1;function iK(t,e){if(typeof window>"u"||typeof document>"u"||!Bx(window.location.host)||xb[t]===e||xb[t]||R6)return;xb[t]=e;function r(A){return`__firebase__banner__${A}`}const n="__firebase__banner",i=Tye().prod.length>0;function o(){const A=document.getElementById(n);A&&A.remove()}function l(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function c(A,h){A.setAttribute("width","24"),A.setAttribute("id",h),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function u(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{R6=!0,o()},A}function d(A,h){A.setAttribute("id",h),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function f(){const A=Dye(n),h=r("text"),m=document.getElementById(h)||document.createElement("span"),p=r("learnmore"),g=document.getElementById(p)||document.createElement("a"),x=r("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const b=A.element;l(b),d(g,p);const C=u();c(v,x),b.append(v,m,g,C),document.body.appendChild(b)}i?(m.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Iye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(no())}function _ye(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pye(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Oye(){const t=no();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fye(){try{return typeof indexedDB=="object"}catch{return!1}}function Rye(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mye="FirebaseError";class lf extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Mye,Object.setPrototypeOf(this,lf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ew.prototype.create)}}class Ew{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?Lye(i,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new lf(a,l,n)}}function Lye(t,e){return t.replace(Uye,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const Uye=/\{\$([^}]+)}/g;function $ye(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function N0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(M6(i)&&M6(o)){if(!N0(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function M6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Hye(t,e){const r=new Qye(t,e);return r.subscribe.bind(r)}class Qye{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");zye(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=FB),a.error===void 0&&(a.error=FB),a.complete===void 0&&(a.complete=FB);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zye(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function FB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){return t&&t._delegate?t._delegate:t}class Pm{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vye{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Eye;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gye(e))try{this.getOrInitializeService({instanceIdentifier:RA})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=RA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=RA){return this.instances.has(e)}getOptions(e=RA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Wye(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=RA){return this.component?this.component.multipleInstances?e:RA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wye(t){return t===RA?void 0:t}function Gye(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qye{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Vye(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ln||(Ln={}));const Kye={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},Yye=Ln.INFO,Xye={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},Jye=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=Xye[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oK{constructor(e){this.name=e,this._logLevel=Yye,this._logHandler=Jye,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...e),this._logHandler(this,Ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...e),this._logHandler(this,Ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...e),this._logHandler(this,Ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...e),this._logHandler(this,Ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...e),this._logHandler(this,Ln.ERROR,...e)}}const Zye=(t,e)=>e.some(r=>t instanceof r);let L6,U6;function ewe(){return L6||(L6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function twe(){return U6||(U6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lK=new WeakMap,hD=new WeakMap,cK=new WeakMap,RB=new WeakMap,tO=new WeakMap;function rwe(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Sh(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&lK.set(r,t)}).catch(()=>{}),tO.set(e,t),e}function nwe(t){if(hD.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hD.set(t,e)}let AD={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return hD.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cK.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Sh(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function swe(t){AD=t(AD)}function awe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(MB(this),e,...r);return cK.set(n,e.sort?e.sort():[e]),Sh(n)}:twe().includes(t)?function(...e){return t.apply(MB(this),e),Sh(lK.get(this))}:function(...e){return Sh(t.apply(MB(this),e))}}function iwe(t){return typeof t=="function"?awe(t):(t instanceof IDBTransaction&&nwe(t),Zye(t,ewe())?new Proxy(t,AD):t)}function Sh(t){if(t instanceof IDBRequest)return rwe(t);if(RB.has(t))return RB.get(t);const e=iwe(t);return e!==t&&(RB.set(t,e),tO.set(e,t)),e}const MB=t=>tO.get(t);function owe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),l=Sh(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Sh(o.result),c.oldVersion,c.newVersion,Sh(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const lwe=["get","getKey","getAll","getAllKeys","count"],cwe=["put","add","delete","clear"],LB=new Map;function $6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(LB.get(e))return LB.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=cwe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||lwe.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return LB.set(e,i),i}swe(t=>({...t,get:(e,r,n)=>$6(e,r)||t.get(e,r,n),has:(e,r)=>!!$6(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uwe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(dwe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function dwe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mD="@firebase/app",H6="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new oK("@firebase/app"),fwe="@firebase/app-compat",hwe="@firebase/analytics-compat",Awe="@firebase/analytics",mwe="@firebase/app-check-compat",pwe="@firebase/app-check",gwe="@firebase/auth",xwe="@firebase/auth-compat",vwe="@firebase/database",bwe="@firebase/data-connect",ywe="@firebase/database-compat",wwe="@firebase/functions",jwe="@firebase/functions-compat",Cwe="@firebase/installations",Nwe="@firebase/installations-compat",Swe="@firebase/messaging",Ewe="@firebase/messaging-compat",Bwe="@firebase/performance",Twe="@firebase/performance-compat",Dwe="@firebase/remote-config",Iwe="@firebase/remote-config-compat",_we="@firebase/storage",Pwe="@firebase/storage-compat",kwe="@firebase/firestore",Owe="@firebase/ai",Fwe="@firebase/firestore-compat",Rwe="firebase",Mwe="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="[DEFAULT]",Lwe={[mD]:"fire-core",[fwe]:"fire-core-compat",[Awe]:"fire-analytics",[hwe]:"fire-analytics-compat",[pwe]:"fire-app-check",[mwe]:"fire-app-check-compat",[gwe]:"fire-auth",[xwe]:"fire-auth-compat",[vwe]:"fire-rtdb",[bwe]:"fire-data-connect",[ywe]:"fire-rtdb-compat",[wwe]:"fire-fn",[jwe]:"fire-fn-compat",[Cwe]:"fire-iid",[Nwe]:"fire-iid-compat",[Swe]:"fire-fcm",[Ewe]:"fire-fcm-compat",[Bwe]:"fire-perf",[Twe]:"fire-perf-compat",[Dwe]:"fire-rc",[Iwe]:"fire-rc-compat",[_we]:"fire-gcs",[Pwe]:"fire-gcs-compat",[kwe]:"fire-fst",[Fwe]:"fire-fst-compat",[Owe]:"fire-vertex","fire-js":"fire-js",[Rwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Map,Uwe=new Map,gD=new Map;function Q6(t,e){try{t.container.addComponent(e)}catch(r){Wd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function S0(t){const e=t.name;if(gD.has(e))return Wd.debug(`There were multiple attempts to register component ${e}.`),!1;gD.set(e,t);for(const r of G2.values())Q6(r,t);for(const r of Uwe.values())Q6(r,t);return!0}function rO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function fu(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $we={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eh=new Ew("app","Firebase",$we);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hwe{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=Mwe;function nO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:pD,automaticDataCollectionEnabled:!0},e),a=n.name;if(typeof a!="string"||!a)throw Eh.create("bad-app-name",{appName:String(a)});if(r||(r=nK()),!r)throw Eh.create("no-options");const i=G2.get(a);if(i){if(N0(r,i.options)&&N0(n,i.config))return i;throw Eh.create("duplicate-app",{appName:a})}const o=new qye(a);for(const c of gD.values())o.addComponent(c);const l=new Hwe(r,n,o);return G2.set(a,l),l}function uK(t=pD){const e=G2.get(t);if(!e&&t===pD&&nK())return nO();if(!e)throw Eh.create("no-app",{appName:t});return e}function Bh(t,e,r){var n;let a=(n=Lwe[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${a}" with version "${e}":`];i&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wd.warn(l.join(" "));return}S0(new Pm(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qwe="firebase-heartbeat-database",zwe=1,oy="firebase-heartbeat-store";let UB=null;function dK(){return UB||(UB=owe(Qwe,zwe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oy)}catch(r){console.warn(r)}}}}).catch(t=>{throw Eh.create("idb-open",{originalErrorMessage:t.message})})),UB}async function Vwe(t){try{const r=(await dK()).transaction(oy),n=await r.objectStore(oy).get(fK(t));return await r.done,n}catch(e){if(e instanceof lf)Wd.warn(e.message);else{const r=Eh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wd.warn(r.message)}}}async function z6(t,e){try{const n=(await dK()).transaction(oy,"readwrite");await n.objectStore(oy).put(e,fK(t)),await n.done}catch(r){if(r instanceof lf)Wd.warn(r.message);else{const n=Eh.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Wd.warn(n.message)}}}function fK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wwe=1024,Gwe=30;class qwe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ywe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V6();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>Gwe){const o=Xwe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Wd.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=V6(),{heartbeatsToSend:n,unsentEntries:a}=Kwe(this._heartbeatsCache.heartbeats),i=W2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Wd.warn(r),""}}}function V6(){return new Date().toISOString().substring(0,10)}function Kwe(t,e=Wwe){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),W6(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),W6(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Ywe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fye()?Rye().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Vwe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return z6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return z6(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function W6(t){return W2(JSON.stringify({version:2,heartbeats:t})).length}function Xwe(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jwe(t){S0(new Pm("platform-logger",e=>new uwe(e),"PRIVATE")),S0(new Pm("heartbeat",e=>new qwe(e),"PRIVATE")),Bh(mD,H6,t),Bh(mD,H6,"esm2017"),Bh("fire-js","")}Jwe("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="firebasestorage.googleapis.com",AK="storageBucket",Zwe=2*60*1e3,e1e=10*60*1e3,t1e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends lf{constructor(e,r,n=0){super($B(e),`Firebase Storage: ${r} (${$B(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ps.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $B(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cs||(cs={}));function $B(t){return"storage/"+t}function sO(){const t="An unknown error occurred, please check the error payload for server response.";return new Ps(cs.UNKNOWN,t)}function r1e(t){return new Ps(cs.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function n1e(t){return new Ps(cs.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s1e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ps(cs.UNAUTHENTICATED,t)}function a1e(){return new Ps(cs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i1e(t){return new Ps(cs.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mK(){return new Ps(cs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pK(){return new Ps(cs.CANCELED,"User canceled the upload/download.")}function o1e(t){return new Ps(cs.INVALID_URL,"Invalid URL '"+t+"'.")}function l1e(t){return new Ps(cs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c1e(){return new Ps(cs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AK+"' property when initializing the app?")}function gK(){return new Ps(cs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u1e(){return new Ps(cs.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function d1e(){return new Ps(cs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function f1e(t){return new Ps(cs.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xD(t){return new Ps(cs.INVALID_ARGUMENT,t)}function xK(){return new Ps(cs.APP_DELETED,"The Firebase app was deleted.")}function h1e(t){return new Ps(cs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vb(t,e){return new Ps(cs.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Mv(t){throw new Ps(cs.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=tl.makeFromUrl(e,r)}catch{return new tl(e,"")}if(n.path==="")return n;throw l1e(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${d}/b/${a}/o${A}`,"i"),m={bucket:1,path:3},p=r===hK?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",x=new RegExp(`^https?://${p}/${a}/${g}`,"i"),b=[{regex:l,indices:c,postModify:i},{regex:h,indices:m,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<b.length;C++){const j=b[C],w=j.regex.exec(e);if(w){const N=w[j.indices.bucket];let E=w[j.indices.path];E||(E=""),n=new tl(N,E),j.postModify(n);break}}if(n==null)throw o1e(e);return n}}class A1e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1e(t,e,r){let n=1,a=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...g){u||(u=!0,e.apply(null,g))}function f(g){a=setTimeout(()=>{a=null,t(h,c())},g)}function A(){i&&clearTimeout(i)}function h(g,...x){if(u){A();return}if(g){A(),d.call(null,g,...x);return}if(c()||o){A(),d.call(null,g,...x);return}n<64&&(n*=2);let b;l===1?(l=2,b=0):b=(n+Math.random())*1e3,f(b)}let m=!1;function p(g){m||(m=!0,A(),!u&&(a!==null?(g||(l=2),clearTimeout(a),f(0)):g||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,p(!0)},r),p}function p1e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1e(t){return t!==void 0}function x1e(t){return typeof t=="function"}function v1e(t){return typeof t=="object"&&!Array.isArray(t)}function VS(t){return typeof t=="string"||t instanceof String}function G6(t){return aO()&&t instanceof Blob}function aO(){return typeof Blob<"u"}function q6(t,e,r,n){if(n<e)throw xD(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw xD(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function vK(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var hm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hm||(hm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1e{constructor(e,r,n,a,i,o,l,c,u,d,f,A=!0,h=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=A,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,p)=>{this.resolve_=m,this.reject_=p,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new Y1(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===hm.NO_ERROR,c=i.getStatus();if(!l||bK(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===hm.ABORT;n(!1,new Y1(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new Y1(u,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());g1e(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=sO();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?xK():pK();o(c)}else{const c=mK();o(c)}};this.canceled_?r(!1,new Y1(!1,null,!0)):this.backoffId_=m1e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Y1{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function y1e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function w1e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j1e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C1e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N1e(t,e,r,n,a,i,o=!0,l=!1){const c=vK(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return j1e(d,e),y1e(d,r),w1e(d,i),C1e(d,n),new b1e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function E1e(...t){const e=S1e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(aO())return new Blob(t);throw new Ps(cs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function B1e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1e(t){if(typeof atob>"u")throw f1e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HB{constructor(e,r){this.data=e,this.contentType=r||null}}function D1e(t,e){switch(t){case pu.RAW:return new HB(yK(e));case pu.BASE64:case pu.BASE64URL:return new HB(wK(t,e));case pu.DATA_URL:return new HB(_1e(e),P1e(e))}throw sO()}function yK(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function I1e(t){let e;try{e=decodeURIComponent(t)}catch{throw vb(pu.DATA_URL,"Malformed data URL.")}return yK(e)}function wK(t,e){switch(t){case pu.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw vb(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case pu.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw vb(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=T1e(e)}catch(a){throw a.message.includes("polyfill")?a:vb(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class jK{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw vb(pu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=k1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function _1e(t){const e=new jK(t);return e.base64?wK(pu.BASE64,e.rest):I1e(e.rest)}function P1e(t){return new jK(t).contentType}function k1e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,r){let n=0,a="";G6(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(G6(this.data_)){const n=this.data_,a=B1e(n,e,r);return a===null?null:new jd(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new jd(n,!0)}}static getBlob(...e){if(aO()){const r=e.map(n=>n instanceof jd?n.data_:n);return new jd(E1e.apply(null,r))}else{const r=e.map(o=>VS(o)?D1e(pu.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[i++]=o[l]}),new jd(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(t){let e;try{e=JSON.parse(t)}catch{return null}return v1e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F1e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function NK(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1e(t,e){return e}class Li{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||R1e}}let X1=null;function M1e(t){return!VS(t)||t.length<2?t:NK(t)}function WS(){if(X1)return X1;const t=[];t.push(new Li("bucket")),t.push(new Li("generation")),t.push(new Li("metageneration")),t.push(new Li("name","fullPath",!0));function e(i,o){return M1e(o)}const r=new Li("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Li("size");return a.xform=n,t.push(a),t.push(new Li("timeCreated")),t.push(new Li("updated")),t.push(new Li("md5Hash",null,!0)),t.push(new Li("cacheControl",null,!0)),t.push(new Li("contentDisposition",null,!0)),t.push(new Li("contentEncoding",null,!0)),t.push(new Li("contentLanguage",null,!0)),t.push(new Li("contentType",null,!0)),t.push(new Li("metadata","customMetadata",!0)),X1=t,X1}function L1e(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new tl(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function U1e(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return L1e(n,t),n}function SK(t,e,r){const n=CK(e);return n===null?null:U1e(t,n,r)}function $1e(t,e,r,n){const a=CK(e);if(a===null||!VS(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,f=t.fullPath,A="/b/"+o(d)+"/o/"+o(f),h=Dx(A,r,n),m=vK({alt:"media",token:u});return h+m})[0]}function EK(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class ap{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){if(!t)throw sO()}function iO(t,e){function r(n,a){const i=SK(t,a,e);return Md(i!==null),i}return r}function H1e(t,e){function r(n,a){const i=SK(t,a,e);return Md(i!==null),$1e(i,a,t.host,t._protocol)}return r}function Tw(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=a1e():a=s1e():r.getStatus()===402?a=n1e(t.bucket):r.getStatus()===403?a=i1e(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function oO(t){const e=Tw(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=r1e(t.path)),i.serverResponse=a.serverResponse,i}return r}function BK(t,e,r){const n=e.fullServerUrl(),a=Dx(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new ap(a,i,iO(t,r),o);return l.errorHandler=oO(e),l}function Q1e(t,e,r){const n=e.fullServerUrl(),a=Dx(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new ap(a,i,H1e(t,r),o);return l.errorHandler=oO(e),l}function z1e(t,e){const r=e.fullServerUrl(),n=Dx(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(c,u){}const l=new ap(n,a,o,i);return l.successCodes=[200,204],l.errorHandler=oO(e),l}function V1e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TK(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=V1e(null,e)),n}function DK(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let b="";for(let C=0;C<2;C++)b=b+Math.random().toString().slice(2);return b}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=TK(e,n,a),d=EK(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,A=`\r
--`+c+"--",h=jd.getBlob(f,n,A);if(h===null)throw gK();const m={name:u.fullPath},p=Dx(i,t.host,t._protocol),g="POST",x=t.maxUploadRetryTime,v=new ap(p,g,iO(t,r),x);return v.urlParams=m,v.headers=o,v.body=h.uploadData(),v.errorHandler=Tw(e),v}class q2{constructor(e,r,n,a){this.current=e,this.total=r,this.finalized=!!n,this.metadata=a||null}}function lO(t,e){let r=null;try{r=t.getResponseHeader("X-Goog-Upload-Status")}catch{Md(!1)}return Md(!!r&&(e||["active"]).indexOf(r)!==-1),r}function W1e(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o=TK(e,n,a),l={name:o.fullPath},c=Dx(i,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=EK(o,r),A=t.maxUploadRetryTime;function h(p){lO(p);let g;try{g=p.getResponseHeader("X-Goog-Upload-URL")}catch{Md(!1)}return Md(VS(g)),g}const m=new ap(c,u,h,A);return m.urlParams=l,m.headers=d,m.body=f,m.errorHandler=Tw(e),m}function G1e(t,e,r,n){const a={"X-Goog-Upload-Command":"query"};function i(u){const d=lO(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Md(!1)}f||Md(!1);const A=Number(f);return Md(!isNaN(A)),new q2(A,n.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,c=new ap(r,o,i,l);return c.headers=a,c.errorHandler=Tw(e),c}const K6=256*1024;function q1e(t,e,r,n,a,i,o,l){const c=new q2(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw u1e();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,A=f+d;let h="";d===0?h="finalize":u===d?h="upload, finalize":h="upload";const m={"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":`${c.current}`},p=n.slice(f,A);if(p===null)throw gK();function g(C,j){const w=lO(C,["active","final"]),N=c.current+d,E=n.size();let _;return w==="final"?_=iO(e,i)(C,j):_=null,new q2(N,E,w==="final",_)}const x="POST",v=e.maxUploadRetryTime,b=new ap(r,x,g,v);return b.headers=m,b.body=p.uploadData(),b.progressCallback=l||null,b.errorHandler=Tw(t),b}const bo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QB(t){switch(t){case"running":case"pausing":case"canceling":return bo.RUNNING;case"paused":return bo.PAUSED;case"success":return bo.SUCCESS;case"canceled":return bo.CANCELED;case"error":return bo.ERROR;default:return bo.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1e{constructor(e,r,n){if(x1e(e)||r!=null||n!=null)this.next=e,this.error=r??void 0,this.complete=n??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Y1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a,i){if(this.sent_)throw Mv("cannot .send() more than once");if(Bx(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class X1e extends Y1e{initXhr(){this.xhr_.responseType="text"}}function Cd(){return new X1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=r,this._metadata=n,this._mappings=WS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(cs.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(bK(a.status,[]))if(i)a=mK();else{this.sleepTime=Math.max(this.sleepTime*2,t1e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(cs.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,i)=>{this._resolve=a,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return r=>this._updateProgress(e+r)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":e(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,r)=>{const n=W1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Cd,e,r);this._request=a,a.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((r,n)=>{const a=G1e(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(a,Cd,r,n);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=K6*this._chunkMultiplier,r=new q2(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,i)=>{let o;try{o=q1e(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Cd,a,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){K6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,r)=>{const n=BK(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Cd,e,r);this._request=a,a.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,r)=>{const n=DK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Cd,e,r);this._request=a,a.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const r=this._transferred;this._transferred=e,this._transferred!==r&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=e,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=pK(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=QB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,r,n,a){const i=new K1e(r||void 0,n||void 0,a||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,r){return this._promise.then(e,r)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const r=this._observers.indexOf(e);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(QB(this._state)){case bo.SUCCESS:wg(this._resolve.bind(null,this.snapshot))();break;case bo.CANCELED:case bo.ERROR:const r=this._reject;wg(r.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(QB(this._state)){case bo.RUNNING:case bo.PAUSED:e.next&&wg(e.next.bind(e,this.snapshot))();break;case bo.SUCCESS:e.complete&&wg(e.complete.bind(e))();break;case bo.CANCELED:case bo.ERROR:e.error&&wg(e.error.bind(e,this._error))();break;default:e.error&&wg(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r){this._service=e,r instanceof tl?this._location=r:this._location=tl.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new km(e,r)}get root(){const e=new tl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NK(this._location.path)}get storage(){return this._service}get parent(){const e=O1e(this._location.path);if(e===null)return null;const r=new tl(this._location.bucket,e);return new km(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw h1e(e)}}function Z1e(t,e,r){t._throwIfRoot("uploadBytes");const n=DK(t.storage,t._location,WS(),new jd(e,!0),r);return t.storage.makeRequestWithTokens(n,Cd).then(a=>({metadata:a,ref:t}))}function eje(t,e,r){return t._throwIfRoot("uploadBytesResumable"),new J1e(t,new jd(e),r)}function tje(t){t._throwIfRoot("getMetadata");const e=BK(t.storage,t._location,WS());return t.storage.makeRequestWithTokens(e,Cd)}function rje(t){t._throwIfRoot("getDownloadURL");const e=Q1e(t.storage,t._location,WS());return t.storage.makeRequestWithTokens(e,Cd).then(r=>{if(r===null)throw d1e();return r})}function nje(t){t._throwIfRoot("deleteObject");const e=z1e(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Cd)}function sje(t,e){const r=F1e(t._location.path,e),n=new tl(t._location.bucket,r);return new km(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aje(t){return/^[A-Za-z]+:\/\//.test(t)}function ije(t,e){return new km(t,e)}function IK(t,e){if(t instanceof cO){const r=t;if(r._bucket==null)throw c1e();const n=new km(r,r._bucket);return e!=null?IK(n,e):n}else return e!==void 0?sje(t,e):t}function oje(t,e){if(e&&aje(e)){if(t instanceof cO)return ije(t,e);throw xD("To use ref(service, url), the first argument must be a Storage instance.")}else return IK(t,e)}function Y6(t,e){const r=e==null?void 0:e[AK];return r==null?null:tl.makeFromBucketSpec(r,t)}function lje(t,e,r,n={}){t.host=`${e}:${r}`;const a=Bx(e);a&&(aK(`https://${t.host}/b`),iK("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:Bye(i,t.app.options.projectId))}class cO{constructor(e,r,n,a,i,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=hK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zwe,this._maxUploadRetryTime=e1e,this._requests=new Set,a!=null?this._bucket=tl.makeFromBucketSpec(a,this._host):this._bucket=Y6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tl.makeFromBucketSpec(this._url,e):this._bucket=Y6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(fu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new km(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new A1e(xK());{const o=N1e(e,this._appId,n,a,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const X6="@firebase/storage",J6="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K="storage";function cje(t,e,r){return t=ol(t),Z1e(t,e,r)}function zB(t,e,r){return t=ol(t),eje(t,e,r)}function Lv(t){return t=ol(t),tje(t)}function ub(t){return t=ol(t),rje(t)}function PK(t){return t=ol(t),nje(t)}function gd(t,e){return t=ol(t),oje(t,e)}function kK(t=uK(),e){t=ol(t);const n=rO(t,_K).getImmediate({identifier:e}),a=Sye("storage");return a&&uje(n,...a),n}function uje(t,e,r,n={}){lje(t,e,r,n)}function dje(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new cO(r,n,a,e,Tx)}function fje(){S0(new Pm(_K,dje,"PUBLIC").setMultipleInstances(!0)),Bh(X6,J6,""),Bh(X6,J6,"esm2017")}fje();var hje="firebase",Aje="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bh(hje,Aje,"app");function OK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mje=OK,FK=new Ew("auth","Firebase",OK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new oK("@firebase/auth");function pje(t,...e){K2.logLevel<=Ln.WARN&&K2.warn(`Auth (${Tx}): ${t}`,...e)}function e2(t,...e){K2.logLevel<=Ln.ERROR&&K2.error(`Auth (${Tx}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,...e){throw uO(t,...e)}function Bu(t,...e){return uO(t,...e)}function RK(t,e,r){const n=Object.assign(Object.assign({},mje()),{[e]:r});return new Ew("auth","Firebase",n).create(e,{appName:t.name})}function Am(t){return RK(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return FK.create(t,...e)}function Cr(t,e,...r){if(!t)throw uO(e,...r)}function Ed(t){const e="INTERNAL ASSERTION FAILED: "+t;throw e2(e),new Error(e)}function qd(t,e){t||Ed(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gje(){return Z6()==="http:"||Z6()==="https:"}function Z6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xje(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gje()||Pye()||"connection"in navigator)?navigator.onLine:!0}function vje(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,r){this.shortDelay=e,this.longDelay=r,qd(r>e,"Short delay should be less than long delay!"),this.isMobile=Iye()||kye()}get(){return xje()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e){qd(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ed("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ed("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ed("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bje={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yje=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wje=new Dw(3e4,6e4);function fO(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ix(t,e,r,n,a={}){return LK(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=Bw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return _ye()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Bx(t.emulatorConfig.host)&&(u.credentials="include"),MK.fetch()(await UK(t,t.config.apiHost,r,l),u)})}async function LK(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},bje),e);try{const a=new Cje(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw J1(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw J1(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw J1(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw J1(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RK(t,d,u);Gd(t,d)}}catch(a){if(a instanceof lf)throw a;Gd(t,"network-request-failed",{message:String(a)})}}async function jje(t,e,r,n,a={}){const i=await Ix(t,e,r,n,a);return"mfaPendingCredential"in i&&Gd(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function UK(t,e,r,n){const a=`${e}${r}?${n}`,i=t,o=i.config.emulator?dO(t.config,a):`${t.config.apiScheme}://${a}`;return yje.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Cje{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Bu(this.auth,"network-request-failed")),wje.get())})}}function J1(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Bu(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nje(t,e){return Ix(t,"POST","/v1/accounts:delete",e)}async function Y2(t,e){return Ix(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sje(t,e=!1){const r=ol(t),n=await r.getIdToken(e),a=hO(n);Cr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:bb(VB(a.auth_time)),issuedAtTime:bb(VB(a.iat)),expirationTime:bb(VB(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function VB(t){return Number(t)*1e3}function hO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return e2("JWT malformed, contained fewer than 3 sections"),null;try{const a=tK(r);return a?JSON.parse(a):(e2("Failed to decode base64 JWT payload"),null)}catch(a){return e2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function eL(t){const e=hO(t);return Cr(e,"internal-error"),Cr(typeof e.exp<"u","internal-error"),Cr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ly(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof lf&&Eje(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Eje({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bje{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=bb(this.lastLoginAt),this.creationTime=bb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t){var e;const r=t.auth,n=await t.getIdToken(),a=await ly(t,Y2(r,{idToken:n}));Cr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?$K(i.providerUserInfo):[],l=Dje(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new bD(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Tje(t){const e=ol(t);await X2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dje(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function $K(t){return t.map(e=>{var{providerId:r}=e,n=cw(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ije(t,e){const r=await LK(t,{},async()=>{const n=Bw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=await UK(t,a,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Bx(t.emulatorConfig.host)&&(c.credentials="include"),MK.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function _je(t,e){return Ix(t,"POST","/v2/accounts:revokeToken",fO(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cr(e.idToken,"internal-error"),Cr(typeof e.idToken<"u","internal-error"),Cr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Cr(e.length!==0,"internal-error");const r=eL(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Cr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Ije(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new Jg;return n&&(Cr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(Cr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(Cr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jg,this.toJSON())}_performRefresh(){return Ed("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){Cr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gc{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=cw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bje(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bD(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ly(this,this.stsTokenManager.getToken(this.auth,e));return Cr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Sje(this,e)}reload(){return Tje(this)}_assign(e){this!==e&&(Cr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new gc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Cr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await X2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fu(this.auth.app))return Promise.reject(Am(this.auth));const e=await this.getIdToken();return await ly(this,Nje(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,v=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:C,isAnonymous:j,providerData:w,stsTokenManager:N}=r;Cr(b&&N,e,"internal-error");const E=Jg.fromJSON(this.name,N);Cr(typeof b=="string",e,"internal-error"),Wf(f,e.name),Wf(A,e.name),Cr(typeof C=="boolean",e,"internal-error"),Cr(typeof j=="boolean",e,"internal-error"),Wf(h,e.name),Wf(m,e.name),Wf(p,e.name),Wf(g,e.name),Wf(x,e.name),Wf(v,e.name);const _=new gc({uid:b,auth:e,email:A,emailVerified:C,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:v});return w&&Array.isArray(w)&&(_.providerData=w.map(k=>Object.assign({},k))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,r,n=!1){const a=new Jg;a.updateFromServerResponse(r);const i=new gc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await X2(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];Cr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?$K(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new Jg;l.updateFromIdToken(n);const c=new gc({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new bD(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new Map;function Bd(t){qd(t instanceof Function,"Expected a class definition");let e=tL.get(t);return e?(qd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}HK.type="NONE";const rL=HK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e,r){return`firebase:${t}:${e}:${r}`}class Zg{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=t2(this.userKey,a.apiKey,i),this.fullPersistenceKey=t2("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Y2(this.auth,{idToken:e}).catch(()=>{});return r?gc._fromGetAccountInfoResponse(this.auth,r,e):null}return gc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Zg(Bd(rL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=a[0]||Bd(rL);const o=t2(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const A=await Y2(e,{idToken:d}).catch(()=>{});if(!A)break;f=await gc._fromGetAccountInfoResponse(e,A,d)}else f=gc._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Zg(i,e,n):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Zg(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qK(e))return"Blackberry";if(KK(e))return"Webos";if(zK(e))return"Safari";if((e.includes("chrome/")||VK(e))&&!e.includes("edge/"))return"Chrome";if(GK(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function QK(t=no()){return/firefox\//i.test(t)}function zK(t=no()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VK(t=no()){return/crios\//i.test(t)}function WK(t=no()){return/iemobile/i.test(t)}function GK(t=no()){return/android/i.test(t)}function qK(t=no()){return/blackberry/i.test(t)}function KK(t=no()){return/webos/i.test(t)}function AO(t=no()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Pje(t=no()){var e;return AO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kje(){return Oye()&&document.documentMode===10}function YK(t=no()){return AO(t)||GK(t)||KK(t)||qK(t)||/windows phone/i.test(t)||WK(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XK(t,e=[]){let r;switch(t){case"Browser":r=nL(no());break;case"Worker":r=`${nL(no())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Tx}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oje{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fje(t,e={}){return Ix(t,"GET","/v2/passwordPolicy",fO(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rje=6;class Mje{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Rje,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lje{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sL(this),this.idTokenSubscription=new sL(this),this.beforeStateQueue=new Oje(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Bd(r)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await Zg.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Y2(this,{idToken:e}),n=await gc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(fu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Cr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await X2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vje()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fu(this.app))return Promise.reject(Am(this));const r=e?ol(e):null;return r&&Cr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Cr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fu(this.app)?Promise.reject(Am(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fu(this.app)?Promise.reject(Am(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bd(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Fje(this),r=new Mje(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ew("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await _je(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Bd(e)||this._popupRedirectResolver;Cr(r,this,"argument-error"),this.redirectPersistenceManager=await Zg.create(this,[Bd(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cr(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;if(fu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&pje(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function mO(t){return ol(t)}class sL{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hye(r=>this.observer=r)}get next(){return Cr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pO={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uje(t){pO=t}function $je(t){return pO.loadJS(t)}function Hje(){return pO.gapiScript}function Qje(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zje(t,e){const r=rO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(N0(i,e??{}))return a;Gd(a,"already-initialized")}return r.initialize({options:e})}function Vje(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Bd);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Wje(t,e,r){const n=mO(t);Cr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=JK(e),{host:o,port:l}=Gje(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Cr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Cr(N0(u,n.config.emulator)&&N0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Bx(o)?(aK(`${i}//${o}${c}`),iK("Auth",!0)):qje()}function JK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Gje(t){const e=JK(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:aL(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:aL(o)}}}function aL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qje(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ed("not implemented")}_getIdTokenResponse(e){return Ed("not implemented")}_linkToIdToken(e,r){return Ed("not implemented")}_getReauthenticationResolver(e){return Ed("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(t,e){return jje(t,"POST","/v1/accounts:signInWithIdp",fO(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kje="http://localhost";class Om extends ZK{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Om(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Gd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=cw(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Om(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return e0(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,e0(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,e0(e,r)}buildRequest(){const e={requestUri:Kje,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Bw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends eY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Iw{constructor(){super("facebook.com")}static credential(e){return Om._fromParams({providerId:ah.PROVIDER_ID,signInMethod:ah.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ah.credentialFromTaggedObject(e)}static credentialFromError(e){return ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ah.credential(e.oauthAccessToken)}catch{return null}}}ah.FACEBOOK_SIGN_IN_METHOD="facebook.com";ah.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Iw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Om._fromParams({providerId:ih.PROVIDER_ID,signInMethod:ih.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ih.credentialFromTaggedObject(e)}static credentialFromError(e){return ih.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ih.credential(r,n)}catch{return null}}}ih.GOOGLE_SIGN_IN_METHOD="google.com";ih.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends Iw{constructor(){super("github.com")}static credential(e){return Om._fromParams({providerId:oh.PROVIDER_ID,signInMethod:oh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oh.credentialFromTaggedObject(e)}static credentialFromError(e){return oh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oh.credential(e.oauthAccessToken)}catch{return null}}}oh.GITHUB_SIGN_IN_METHOD="github.com";oh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends Iw{constructor(){super("twitter.com")}static credential(e,r){return Om._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return lh.credential(r,n)}catch{return null}}}lh.TWITTER_SIGN_IN_METHOD="twitter.com";lh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await gc._fromIdTokenResponse(e,n,a),o=iL(n);return new E0({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=iL(n);return new E0({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function iL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2 extends lf{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,J2.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new J2(e,r,n,a)}}function tY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?J2._fromErrorAndOperation(t,i,e,n):i})}async function Yje(t,e,r=!1){const n=await ly(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return E0._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xje(t,e,r=!1){const{auth:n}=t;if(fu(n.app))return Promise.reject(Am(n));const a="reauthenticate";try{const i=await ly(t,tY(n,a,e,t),r);Cr(i.idToken,n,"internal-error");const o=hO(i.idToken);Cr(o,n,"internal-error");const{sub:l}=o;return Cr(t.uid===l,n,"user-mismatch"),E0._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gd(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jje(t,e,r=!1){if(fu(t.app))return Promise.reject(Am(t));const n="signIn",a=await tY(t,n,e),i=await E0._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Zje(t,e,r,n){return ol(t).onIdTokenChanged(e,r,n)}function e2e(t,e,r){return ol(t).beforeAuthStateChanged(e,r)}const Z2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Z2,"1"),this.storage.removeItem(Z2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2e=1e3,r2e=10;class nY extends rY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);kje()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,r2e):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},t2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}nY.type="LOCAL";const n2e=nY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY extends rY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}sY.type="SESSION";const aY=sY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new GS(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,i)),c=await s2e(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}GS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=gO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(A.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(){return window}function i2e(t){Tu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(){return typeof Tu().WorkerGlobalScope<"u"&&typeof Tu().importScripts=="function"}async function o2e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l2e(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c2e(){return iY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY="firebaseLocalStorageDb",u2e=1,eC="firebaseLocalStorage",lY="fbase_key";class _w{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qS(t,e){return t.transaction([eC],e?"readwrite":"readonly").objectStore(eC)}function d2e(){const t=indexedDB.deleteDatabase(oY);return new _w(t).toPromise()}function yD(){const t=indexedDB.open(oY,u2e);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(eC,{keyPath:lY})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(eC)?e(n):(n.close(),await d2e(),e(await yD()))})})}async function oL(t,e,r){const n=qS(t,!0).put({[lY]:e,value:r});return new _w(n).toPromise()}async function f2e(t,e){const r=qS(t,!1).get(e),n=await new _w(r).toPromise();return n===void 0?null:n.value}function lL(t,e){const r=qS(t,!0).delete(e);return new _w(r).toPromise()}const h2e=800,A2e=3;class cY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yD(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>A2e)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=GS._getInstance(c2e()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await o2e(),!this.activeServiceWorker)return;this.sender=new a2e(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l2e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yD();return await oL(e,Z2,"1"),await lL(e,Z2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>oL(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>f2e(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lL(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=qS(a,!1).getAll();return new _w(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cY.type="LOCAL";const m2e=cY;new Dw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2e(t,e){return e?Bd(e):(Cr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO extends ZK{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return e0(e,this._buildIdpRequest())}_linkToIdToken(e,r){return e0(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return e0(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function g2e(t){return Jje(t.auth,new xO(t),t.bypassAuthState)}function x2e(t){const{auth:e,user:r}=t;return Cr(r,e,"internal-error"),Xje(r,new xO(t),t.bypassAuthState)}async function v2e(t){const{auth:e,user:r}=t;return Cr(r,e,"internal-error"),Yje(r,new xO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g2e;case"linkViaPopup":case"linkViaRedirect":return v2e;case"reauthViaPopup":case"reauthViaRedirect":return x2e;default:Gd(this.auth,"internal-error")}}resolve(e){qd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2e=new Dw(2e3,1e4);class Ug extends uY{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Ug.currentPopupAction&&Ug.currentPopupAction.cancel(),Ug.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Cr(e,this.auth,"internal-error"),e}async onExecution(){qd(this.filter.length===1,"Popup operations only handle one event");const e=gO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Bu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ug.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2e.get())};e()}}Ug.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2e="pendingRedirect",r2=new Map;class w2e extends uY{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=r2.get(this.auth._key());if(!e){try{const n=await j2e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}r2.set(this.auth._key(),e)}return this.bypassAuthState||r2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j2e(t,e){const r=S2e(e),n=N2e(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function C2e(t,e){r2.set(t._key(),e)}function N2e(t){return Bd(t._redirectPersistence)}function S2e(t){return t2(y2e,t.config.apiKey,t.name)}async function E2e(t,e,r=!1){if(fu(t.app))return Promise.reject(Am(t));const n=mO(t),a=p2e(n,e),o=await new w2e(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2e=10*60*1e3;class T2e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D2e(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!dY(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Bu(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B2e&&this.cachedEventUids.clear(),this.cachedEventUids.has(cL(e))}saveEventToCache(e){this.cachedEventUids.add(cL(e)),this.lastProcessedEventTime=Date.now()}}function cL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dY({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D2e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dY(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2e(t,e={}){return Ix(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P2e=/^https?/;async function k2e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I2e(t);for(const r of e)try{if(O2e(r))return}catch{}Gd(t,"unauthorized-domain")}function O2e(t){const e=vD(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!P2e.test(r))return!1;if(_2e.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2e=new Dw(3e4,6e4);function uL(){const t=Tu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function R2e(t){return new Promise((e,r)=>{var n,a,i;function o(){uL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uL(),r(Bu(t,"network-request-failed"))},timeout:F2e.get()})}if(!((a=(n=Tu().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Tu().gapi)===null||i===void 0)&&i.load)o();else{const l=Qje("iframefcb");return Tu()[l]=()=>{gapi.load?o():r(Bu(t,"network-request-failed"))},$je(`${Hje()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw n2=null,e})}let n2=null;function M2e(t){return n2=n2||R2e(t),n2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2e=new Dw(5e3,15e3),U2e="__/auth/iframe",$2e="emulator/auth/iframe",H2e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q2e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z2e(t){const e=t.config;Cr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?dO(e,$2e):`https://${t.config.authDomain}/${U2e}`,n={apiKey:e.apiKey,appName:t.name,v:Tx},a=Q2e.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Bw(n).slice(1)}`}async function V2e(t){const e=await M2e(t),r=Tu().gapi;return Cr(r,t,"internal-error"),e.open({where:document.body,url:z2e(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H2e,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Bu(t,"network-request-failed"),l=Tu().setTimeout(()=>{i(o)},L2e.get());function c(){Tu().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G2e=500,q2e=600,K2e="_blank",Y2e="http://localhost";class dL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X2e(t,e,r,n=G2e,a=q2e){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},W2e),{width:n.toString(),height:a.toString(),top:i,left:o}),u=no().toLowerCase();r&&(l=VK(u)?K2e:r),QK(u)&&(e=e||Y2e,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(Pje(u)&&l!=="_self")return J2e(e||"",l),new dL(null);const f=window.open(e||"",l,d);Cr(f,t,"popup-blocked");try{f.focus()}catch{}return new dL(f)}function J2e(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2e="__/auth/handler",eCe="emulator/auth/handler",tCe=encodeURIComponent("fac");async function fL(t,e,r,n,a,i){Cr(t.config.authDomain,t,"auth-domain-config-required"),Cr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Tx,eventId:a};if(e instanceof eY){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$ye(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Iw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${tCe}=${encodeURIComponent(c)}`:"";return`${rCe(t)}?${Bw(l).slice(1)}${u}`}function rCe({config:t}){return t.emulator?dO(t,eCe):`https://${t.authDomain}/${Z2e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="webStorageSupport";class nCe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aY,this._completeRedirectFn=E2e,this._overrideRedirectResult=C2e}async _openPopup(e,r,n,a){var i;qd((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await fL(e,r,n,vD(),a);return X2e(e,o,gO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await fL(e,r,n,vD(),a);return i2e(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(qd(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await V2e(e),n=new T2e(e);return r.register("authEvent",a=>(Cr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(WB,{type:WB},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[WB];o!==void 0&&r(!!o),Gd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=k2e(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return YK()||zK()||AO()}}const sCe=nCe;var hL="@firebase/auth",AL="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aCe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Cr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iCe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oCe(t){S0(new Pm("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Cr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XK(t)},u=new Lje(n,a,i,c);return Vje(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),S0(new Pm("auth-internal",e=>{const r=mO(e.getProvider("auth").getImmediate());return(n=>new aCe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bh(hL,AL,iCe(t)),Bh(hL,AL,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lCe=5*60,cCe=sK("authIdTokenMaxAge")||lCe;let mL=null;const uCe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>cCe)return;const a=r==null?void 0:r.token;mL!==a&&(mL=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dCe(t=uK()){const e=rO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=zje(t,{popupRedirectResolver:sCe,persistence:[m2e,n2e,aY]}),n=sK("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=uCe(i.toString());e2e(r,o,()=>o(r.currentUser)),Zje(r,l=>o(l))}}const a=rK("auth");return a&&Wje(r,`http://${a}`),r}function fCe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Uje({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=Bu("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",fCe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oCe("Browser");const hCe={apiKey:"AIzaSyCC1VwhprRXivPSEL_9UwCksOZLuka9de4",authDomain:"entreprise-organiser.firebaseapp.com",projectId:"entreprise-organiser",storageBucket:"entreprise-organiser.firebasestorage.app",messagingSenderId:"148962094148",appId:"1:148962094148:web:670deb9a62f005a5ef6011"},fY=nO(hCe),NA=kK(fY);dCe(fY);const dc={async uploadBdcPdf(t,e,r=null,n=null){try{if(!e||e.type!=="application/pdf")throw new Error("Le fichier doit être un PDF");if(e.size>10*1024*1024)throw new Error("Le fichier ne doit pas dépasser 10MB");let a;n?a=`${n}.pdf`:a=`${Date.now()}_${e.name}`;const i=gd(NA,`bdc/${t}/${a}`),o=zB(i,e,{customMetadata:{bdcId:t,originalName:n?`${n}.pdf`:e.name,uploadedAt:new Date().toISOString()}});return new Promise((l,c)=>{o.on("state_changed",u=>{const d=u.bytesTransferred/u.totalBytes*100;r&&r(d),console.log(`Upload progress: ${d.toFixed(2)}%`)},u=>{console.error("Erreur upload Firebase:",u),c(new Error(`Erreur lors de l'upload: ${u.message}`))},async()=>{try{const u=await ub(o.snapshot.ref),d=await Lv(o.snapshot.ref);l({downloadURL:u,fileName:a,originalName:e.name,size:d.size,uploadedAt:d.timeCreated,fullPath:d.fullPath})}catch(u){c(new Error(`Erreur lors de la récupération de l'URL: ${u.message}`))}})})}catch(a){throw console.error("Erreur uploadBdcPdf:",a),a}},async uploadFacturePdf(t,e,r=null,n=null){try{if(!e||e.type!=="application/pdf")throw new Error("Le fichier doit être un PDF");if(e.size>10*1024*1024)throw new Error("Le fichier ne doit pas dépasser 10MB");let a;n?a=`${n}.pdf`:a=`${Date.now()}_${e.name}`;const i=gd(NA,`achats/${t}/${a}`),o=zB(i,e,{customMetadata:{achatId:t,originalName:n?`${n}.pdf`:e.name,uploadedAt:new Date().toISOString()}});return new Promise((l,c)=>{o.on("state_changed",u=>{const d=u.bytesTransferred/u.totalBytes*100;r&&r(d),console.log(`Upload progress facture: ${d.toFixed(2)}%`)},u=>{console.error("Erreur upload Firebase facture:",u),c(new Error(`Erreur lors de l'upload: ${u.message}`))},async()=>{try{const u=await ub(o.snapshot.ref),d=await Lv(o.snapshot.ref);l({downloadURL:u,fileName:a,originalName:e.name,size:d.size,uploadedAt:d.timeCreated,fullPath:d.fullPath})}catch(u){c(new Error(`Erreur lors de la récupération de l'URL: ${u.message}`))}})})}catch(a){throw console.error("Erreur uploadFacturePdf:",a),a}},async uploadDevisPdf(t,e,r=null){try{if(!e||e.type!=="application/pdf")throw new Error("Le fichier doit être un PDF");if(e.size>10*1024*1024)throw new Error("Le fichier ne doit pas dépasser 10MB");const n=`${Date.now()}_${e.name}`,a=gd(NA,`devis/${t}/${n}`),i=zB(a,e,{customMetadata:{devisId:t,originalName:e.name,uploadedAt:new Date().toISOString()}});return new Promise((o,l)=>{i.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;r&&r(u),console.log(`Upload progress: ${u.toFixed(2)}%`)},c=>{console.error("Erreur upload Firebase:",c),l(new Error(`Erreur lors de l'upload: ${c.message}`))},async()=>{try{const c=await ub(i.snapshot.ref),u=await Lv(i.snapshot.ref);o({downloadURL:c,fileName:n,originalName:e.name,size:u.size,uploadedAt:u.timeCreated,fullPath:u.fullPath})}catch(c){l(new Error(`Erreur lors de la récupération de l'URL: ${c.message}`))}})})}catch(n){throw console.error("Erreur uploadDevisPdf:",n),n}},async deletePdf(t){try{const e=gd(NA,t);await PK(e),console.log("Fichier supprimé avec succès:",t)}catch(e){throw console.error("Erreur lors de la suppression:",e),new Error(`Erreur lors de la suppression: ${e.message}`)}},async getPdfDownloadUrl(t){try{const e=gd(NA,t);return await ub(e)}catch(e){throw console.error("Erreur lors de la récupération de l'URL:",e),new Error(`Erreur lors de la récupération de l'URL: ${e.message}`)}},async getPdfMetadata(t){try{const e=gd(NA,t);return await Lv(e)}catch(e){throw console.error("Erreur lors de la récupération des métadonnées:",e),new Error(`Erreur lors de la récupération des métadonnées: ${e.message}`)}},async pdfExists(t){try{const e=gd(NA,t);return await Lv(e),!0}catch(e){if(e.code==="storage/object-not-found")return!1;throw e}}},cf="/fournisseurs",ACe=async t=>{try{return(await Ee.post(cf,t)).data}catch(e){throw console.error("Erreur lors de la création du fournisseur:",e),e}},mCe=async(t={})=>{try{return(await Ee.get(cf,{params:t})).data}catch(e){throw console.error("Erreur lors de la récupération des fournisseurs:",e),e}},Pw=async()=>{try{return(await Ee.get(`${cf}/active`)).data}catch(t){throw console.error("Erreur lors de la récupération des fournisseurs actifs:",t),t}},pCe=async t=>{try{return(await Ee.get(`${cf}/${t}`)).data}catch(e){throw console.error("Erreur lors de la récupération du fournisseur:",e),e}},gCe=async(t,e)=>{try{return(await Ee.patch(`${cf}/${t}`,e)).data}catch(r){throw console.error("Erreur lors de la mise à jour du fournisseur:",r),r}},xCe=async t=>{try{return(await Ee.delete(`${cf}/${t}`)).data}catch(e){throw console.error("Erreur lors de la suppression du fournisseur:",e),e}},vCe=async t=>{try{return(await Ee.patch(`${cf}/${t}/reactivate`)).data}catch(e){throw console.error("Erreur lors de la réactivation du fournisseur:",e),e}},bCe=async()=>{try{return(await Ee.get(`${cf}/stats`)).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}},yCe=async t=>{try{return(await Ee.delete(`${cf}/${t}/permanent`)).data}catch(e){throw console.error("Erreur lors de la suppression définitive du fournisseur:",e),e}},ms={QUINCAILLERIE:"QUINCAILLERIE",BOIS:"BOIS",VITRAGE:"VITRAGE",MENUISERIE:"MENUISERIE",AGENCEMENT:"AGENCEMENT",FERRONNERIE:"FERRONNERIE",PEINTURE:"PEINTURE",ELECTRICITE:"ELECTRICITE",PLOMBERIE:"PLOMBERIE",ISOLATION:"ISOLATION",OUTILLAGE:"OUTILLAGE",AUTRE:"AUTRE"},hY={[ms.QUINCAILLERIE]:"Quincaillerie",[ms.BOIS]:"Bois",[ms.VITRAGE]:"Vitrage",[ms.MENUISERIE]:"Menuiserie",[ms.AGENCEMENT]:"Agencement",[ms.FERRONNERIE]:"Ferronnerie",[ms.PEINTURE]:"Peinture",[ms.ELECTRICITE]:"Électricité",[ms.PLOMBERIE]:"Plomberie",[ms.ISOLATION]:"Isolation",[ms.OUTILLAGE]:"Outillage",[ms.AUTRE]:"Autre"},AY=Object.entries(hY).map(([t,e])=>({value:t,label:e})),wCe={[ms.QUINCAILLERIE]:"blue",[ms.BOIS]:"brown",[ms.VITRAGE]:"cyan",[ms.MENUISERIE]:"orange",[ms.AGENCEMENT]:"green",[ms.FERRONNERIE]:"gray",[ms.PEINTURE]:"pink",[ms.ELECTRICITE]:"yellow",[ms.PLOMBERIE]:"teal",[ms.ISOLATION]:"violet",[ms.OUTILLAGE]:"indigo",[ms.AUTRE]:"gray"},jCe=t=>hY[t]||t,CCe=t=>wCe[t]||"gray",vO=(t,e)=>{if(console.log("🔍 [AUTO-CATEGORIE] ===== DÉBUT DIAGNOSTIC COMPLET ====="),console.log("🏢 [AUTO-CATEGORIE] Fournisseur reçu:",JSON.stringify(t,null,2)),console.log("📂 [AUTO-CATEGORIE] Catégories disponibles:",JSON.stringify(e,null,2)),console.log("🔍 [AUTO-CATEGORIE] Type fournisseur:",typeof t),console.log("🔍 [AUTO-CATEGORIE] Type categoriesAchat:",typeof e),console.log("🔍 [AUTO-CATEGORIE] IsArray categoriesAchat:",Array.isArray(e)),!t||!e||!Array.isArray(e))return console.log("❌ [AUTO-CATEGORIE] Données manquantes ou invalides"),console.log("❌ [AUTO-CATEGORIE] fournisseur:",!!t),console.log("❌ [AUTO-CATEGORIE] categoriesAchat:",!!e),console.log("❌ [AUTO-CATEGORIE] isArray:",Array.isArray(e)),null;const r={BOUNEY:"BOIS",FOUSSIER:"QUINCAILLERIE","MENUISERIES DUPONT":"MENUISERIE","VISSERIE PRO":"QUINCAILLERIE",VERRES:"VITRAGE",CRISTAUX:"VITRAGE","OUTILLAGE MODERNE":"OUTILLAGE",PROFIL:"AGENCEMENT","BOIS DU NORD":"BOIS",FERRONNERIE:"FERRONNERIE",PEINTURE:"PEINTURE"},n=(t.nom||"").toUpperCase();console.log("🔍 [AUTO-CATEGORIE] Nom fournisseur original:",t.nom),console.log("🔍 [AUTO-CATEGORIE] Nom fournisseur (majuscules):",n),console.log("🔍 [AUTO-CATEGORIE] Cas spéciaux disponibles:",Object.keys(r));for(const[l,c]of Object.entries(r))if(console.log(`🔍 [AUTO-CATEGORIE] Test "${l}" dans "${n}"`),n.includes(l)){console.log("🔍 [AUTO-CATEGORIE] Cas spécial trouvé pour:",l,"→",c),console.log("🔍 [AUTO-CATEGORIE] Recherche de la catégorie:",c),console.log("🔍 [AUTO-CATEGORIE] Dans les catégories:",e.map(d=>({id:d.id,intitule:d.intitule,nom:d.nom,intituleUpper:(d.intitule||d.nom||"").toUpperCase()})));const u=e.find(d=>{const f=(d.intitule||d.nom||"").toUpperCase(),A=f.includes(c);return console.log(`🔍 [AUTO-CATEGORIE] "${f}" contient "${c}"? ${A}`),A});if(u)return console.log("🎯 [AUTO-CATEGORIE] Retour cas spécial:",u.id.toString()),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (SUCCÈS) ====="),u.id.toString();console.log("⚠️ [AUTO-CATEGORIE] Cas spécial trouvé mais catégorie non trouvée:",c)}if(console.log("🔍 [AUTO-CATEGORIE] Aucun cas spécial trouvé, vérification catégorie fournisseur"),console.log("🔍 [AUTO-CATEGORIE] Propriétés du fournisseur:",Object.keys(t)),console.log("🔍 [AUTO-CATEGORIE] Catégorie fournisseur:",t.categorie),console.log("🔍 [AUTO-CATEGORIE] Type catégorie fournisseur:",typeof t.categorie),!t.categorie)return console.log("❌ [AUTO-CATEGORIE] Fournisseur sans catégorie définie et aucun cas spécial"),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (ÉCHEC) ====="),null;console.log("🔍 [AUTO-CATEGORIE] Catégorie du fournisseur:",t.categorie);const a=e.find(l=>{const c=(l.intitule||l.nom||"").toUpperCase(),u=t.categorie.toUpperCase(),d=c===u;return console.log(`🔍 [AUTO-CATEGORIE] Correspondance exacte: "${c}" === "${u}"? ${d}`),d&&console.log("✅ [AUTO-CATEGORIE] Correspondance exacte trouvée:",l),d});if(a)return console.log("🎯 [AUTO-CATEGORIE] Retour correspondance exacte:",a.id.toString()),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (SUCCÈS) ====="),a.id.toString();const i=e.find(l=>{const c=(l.intitule||l.nom||"").toUpperCase(),u=t.categorie.toUpperCase(),d=c.includes(u)||u.includes(c);return console.log(`🔍 [AUTO-CATEGORIE] Correspondance partielle: "${c}" <-> "${u}"? ${d}`),d&&console.log("🔍 [AUTO-CATEGORIE] Correspondance partielle trouvée:",l),d});if(i)return console.log("🎯 [AUTO-CATEGORIE] Retour correspondance partielle:",i.id.toString()),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (SUCCÈS) ====="),i.id.toString();const o={QUINCAILLERIE:["QUINCAILLERIE","VISSERIE","FIXATION"],BOIS:["BOIS","SCIAGE","PLANCHES","PANNEAUX"],VITRAGE:["VITRAGE","VERRE","MIROITERIE"],MENUISERIE:["MENUISERIE","PORTES","FENÊTRES","VOLETS"],AGENCEMENT:["AGENCEMENT","MOBILIER","RANGEMENT"],FERRONNERIE:["FERRONNERIE","MÉTALLERIE","SERRURERIE"],PEINTURE:["PEINTURE","REVÊTEMENT","FINITION"],ELECTRICITE:["ELECTRICITÉ","ÉLECTRIQUE","ÉCLAIRAGE"],PLOMBERIE:["PLOMBERIE","SANITAIRE","ROBINETTERIE"],ISOLATION:["ISOLATION","ÉTANCHÉITÉ"],OUTILLAGE:["OUTILLAGE","OUTIL","MACHINES"]};console.log("🔍 [AUTO-CATEGORIE] Recherche par mapping...");for(const[l,c]of Object.entries(o)){const u=t.categorie.toUpperCase();if(console.log(`🔍 [AUTO-CATEGORIE] Test mapping "${l}" avec "${u}"`),c.some(d=>u.includes(d)||d.includes(u))){console.log("🔍 [AUTO-CATEGORIE] Mot-clé trouvé pour catégorie:",l);const d=e.find(f=>{const A=(f.intitule||f.nom||"").toUpperCase(),h=c.some(m=>A.includes(m));return console.log(`🔍 [AUTO-CATEGORIE] "${A}" contient un mot-clé de [${c.join(", ")}]? ${h}`),h});if(d)return console.log("🎯 [AUTO-CATEGORIE] Retour mapping:",d.id.toString()),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (SUCCÈS) ====="),d.id.toString()}}return console.log("❌ [AUTO-CATEGORIE] Aucune correspondance trouvée"),console.log("🔍 [AUTO-CATEGORIE] ===== FIN DIAGNOSTIC (ÉCHEC) ====="),null},NCe=t=>{if(!t)return!1;const e=new Date;return new Date(t).toDateString()===e.toDateString()},SCe=t=>{if(!t)return!1;const e=new Date,n=new Date(t).getTime()-e.getTime(),a=Math.ceil(n/(1e3*60*60*24));return a>0&&a<=3},ECe=t=>{if(!t)return!1;const e=new Date;return new Date(t)<e},mY=t=>NCe(t)?{badge:"bg-orange-100 text-orange-800 border-orange-300",text:"📍 AUJOURD'HUI",priority:"high"}:SCe(t)?{badge:"bg-yellow-100 text-yellow-800 border-yellow-300",text:"⏰ BIENTÔT",priority:"medium"}:ECe(t)?{badge:"bg-red-100 text-red-800 border-red-300",text:"⚠️ EN RETARD",priority:"urgent"}:{badge:"bg-gray-100 text-gray-800 border-gray-300",text:"📅 PROGRAMMÉ",priority:"normal"},bO=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"",BCe=({affaireId:t,onUpdate:e})=>{const[r,n]=y.useState([]),[a,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(null),[A,h]=y.useState([]),[m,p]=y.useState([]),[g,x]=y.useState(null);console.log("🚨 [COMPOSANT ACTIF] AffaireBdcSectionReal.jsx - affaireId:",t);const v=async()=>{try{console.log("🧪 [DIAGNOSTIC] Test de diagnostic de création BDC"),console.log("1️⃣ Test des catégories...");const ee=await ay();if(console.log("✅ Catégories:",ee),!ee||ee.length===0)throw new Error("Aucune catégorie disponible");console.log("2️⃣ Test de création BDC...");const ue={fournisseur:"Test Diagnostic",montantHt:99.99,dateBdc:new Date,affaireId:t,categorieId:ee[0].id,commentaire:"Test diagnostic automatique"};console.log("📤 Données de test:",ue);const ae=await z2(ue);console.log("✅ BDC créé:",ae),await w(),ve.success("Test de diagnostic réussi ! BDC créé.")}catch(ee){console.error("❌ Erreur diagnostic:",ee),ve.error(`Erreur diagnostic: ${ee.message}`)}},b=Fl({initialValues:{fournisseur:"",montantHt:"",dateBdc:new Date,dateLivraison:null,categorieId:"",commentaire:""},validate:{fournisseur:ee=>ee?null:"Le fournisseur est obligatoire",montantHt:ee=>{const ue=parseFloat(ee);return!ee||isNaN(ue)||ue<=0?"Le montant HT doit être supérieur à 0":null},categorieId:ee=>ee?null:"La catégorie est obligatoire"}}),[C,j]=y.useState(null),w=async()=>{try{i(!0),console.log("📋 [BDC] Chargement BDCs pour affaire:",t);const ee=await sp({affaireId:t,take:50});console.log("📋 [BDC] Données reçues:",ee),ee&&ee.bdc?(n(ee.bdc),console.log("📋 [BDC] BDCs chargés:",ee.bdc.map(ue=>({id:ue.id,numero:ue.numero,statut:ue.statut,fournisseur:ue.fournisseur})))):(console.warn("📋 [BDC] Format de données inattendu:",ee),n([]))}catch(ee){console.error("❌ [BDC] Erreur lors du chargement des BDCs:",ee),n([])}finally{i(!1)}};y.useEffect(()=>{console.log("🔄 [BDC] Effet de chargement initial avec affaireId:",t),w(),N(),E()},[t]);const N=async()=>{var ee;try{console.log("🔄 [BDC] Chargement des catégories");const ue=await ay();console.log("📂 [BDC] Catégories chargées:",ue),console.log("📂 [BDC] Type de réponse:",typeof ue),console.log("📂 [BDC] Array?:",Array.isArray(ue)),Array.isArray(ue)?(h(ue),console.log("✅ [BDC] Catégories définies dans l'état")):(console.log("⚠️ [BDC] Réponse catégories n'est pas un tableau"),h([]))}catch(ue){console.error("❌ [BDC] Erreur lors du chargement des catégories:",ue),console.error("❌ [BDC] Détails de l'erreur:",((ee=ue.response)==null?void 0:ee.data)||ue.message),h([])}},E=async()=>{try{console.log("🔄 [BDC] Chargement des fournisseurs");const ee=await Pw();console.log("🏢 [BDC] Fournisseurs chargés:",ee),p(ee||[])}catch(ee){console.error("❌ [BDC] Erreur lors du chargement des fournisseurs:",ee)}},_=()=>{console.log("➕ [BDC] Ouverture du modal de création"),f(null),b.reset(),l(!0)},k=async ee=>{var ue,ae,re;try{if(u(!0),console.log("💾 [BDC] Sauvegarde BDC:",ee),!ee.fournisseur){ve.error("Le fournisseur est obligatoire"),u(!1);return}if(!ee.categorieId){ve.error("La catégorie est obligatoire"),u(!1);return}const fe=parseFloat(ee.montantHt);if(isNaN(fe)||fe<=0){ve.error("Le montant HT doit être un nombre supérieur à 0"),u(!1);return}const G={...ee,affaireId:t,montantHt:fe,dateBdc:ee.dateBdc instanceof Date?ee.dateBdc:new Date(ee.dateBdc),dateLivraison:ee.dateLivraison?ee.dateLivraison instanceof Date?ee.dateLivraison:new Date(ee.dateLivraison):null};if(console.log("📤 [BDC] Données à envoyer:",G),d)await gb(d.id,G),ve.success("BDC modifié avec succès !"),console.log("✅ [BDC] BDC modifié");else{const oe=await z2(G);ve.success("BDC créé avec succès !"),console.log("✅ [BDC] BDC créé:",oe)}await w(),D(),e&&e()}catch(fe){console.error("❌ [BDC] Erreur lors de la sauvegarde du BDC:",fe),console.error("❌ [BDC] Détails de l'erreur:",(ue=fe.response)==null?void 0:ue.data);let G="Erreur lors de la sauvegarde du BDC";(re=(ae=fe.response)==null?void 0:ae.data)!=null&&re.message?G=fe.response.data.message:fe.message&&(G=fe.message),G.includes("categorieId")?G="Problème avec la catégorie sélectionnée. Veuillez en choisir une autre.":G.includes("montantHt")?G="Problème avec le montant. Veuillez vérifier la valeur saisie.":G.includes("fournisseur")&&(G="Problème avec le fournisseur sélectionné. Veuillez en choisir un autre."),ve.error(`Erreur: ${G}`)}finally{u(!1)}},D=()=>{console.log("❌ [BDC] Fermeture du modal"),l(!1),f(null),b.reset()},S=async ee=>{var ue,ae,re,fe,G,oe,Se,ge;if(window.confirm("Êtes-vous sûr de vouloir supprimer ce BDC ?"))try{await sy(ee),n(r.filter(te=>te.id!==ee)),ve.success("BDC supprimé avec succès !"),e&&e()}catch(te){if(console.error("❌ [BDC] Erreur suppression BDC:",te),((ue=te.response)==null?void 0:ue.status)===400){const ye=((re=(ae=te.response)==null?void 0:ae.data)==null?void 0:re.message)||te.message||"",we=String(ye);if(we.toLowerCase().includes("mot de passe")){const be=prompt("Ce BDC est validé. Entrez le mot de passe pour le supprimer (défaut: 1234):");if(be!==null)try{await sy(ee,be),n(r.filter(Te=>Te.id!==ee)),ve.success("BDC supprimé avec succès !"),e&&e()}catch(Te){if(console.error("❌ [BDC] Erreur suppression avec mot de passe:",Te),((fe=Te.response)==null?void 0:fe.status)===401)ve.error("Mot de passe incorrect");else{const Oe=((oe=(G=Te.response)==null?void 0:G.data)==null?void 0:oe.message)||Te.message||"Erreur inconnue";ve.error("Erreur lors de la suppression avec mot de passe: "+Oe)}}}else ve.error("Erreur lors de la suppression: "+we)}else{const ye=((ge=(Se=te.response)==null?void 0:Se.data)==null?void 0:ge.message)||te.message||"Erreur inconnue";ve.error("Erreur lors de la suppression du BDC: "+ye)}}},F=ee=>{var ue;f(ee),b.setValues({fournisseur:ee.fournisseur,montantHt:ee.montantHt,dateBdc:new Date(ee.dateBdc),dateLivraison:ee.dateLivraison?new Date(ee.dateLivraison):null,categorieId:(ue=ee.categorieId)==null?void 0:ue.toString(),commentaire:ee.commentaire||""}),l(!0)},M=async ee=>{try{await DS(ee),ve.success("BDC validé avec succès"),await w(),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"validate",bdcId:ee,affaireId:t}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:t}}))}catch(ue){console.error("Erreur lors de la validation du BDC:",ue),ve.error("Erreur lors de la validation du BDC")}},R=async ee=>{if(window.confirm("Êtes-vous sûr de vouloir annuler ce BDC ?"))try{await qk(ee),ve.success("BDC annulé avec succès"),await w(),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"cancel",bdcId:ee,affaireId:t}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:t}}))}catch(ue){console.error("Erreur lors de l'annulation du BDC:",ue),ve.error("Erreur lors de l'annulation du BDC")}},U=async ee=>{try{await TS(ee,new Date),ve.success("BDC réceptionné avec succès"),await w(),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"receive",bdcId:ee,affaireId:t}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:t}}))}catch(ue){console.error("Erreur lors de la réception du BDC:",ue),ve.error("Erreur lors de la réception du BDC")}},z=async(ee,ue)=>{var ae,re,fe,G;try{if(console.log("🔥 [PDF] Upload success result:",ue),ue===null){const Se={nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null};console.log("🗑️ [PDF] Suppression des données PDF:",Se),await gb(ee,Se),console.log("✅ [PDF] BDC mis à jour avec succès (suppression)"),n(ge=>ge.map(te=>te.id===ee?{...te,...Se}:te)),ve.success("PDF supprimé avec succès !"),e&&e();return}const oe={nomFichier:ue.fileName||ue.nomFichier,tailleFichier:parseInt(ue.size||ue.tailleFichier||0),dateUpload:ue.uploadedAt||ue.dateUpload||new Date().toISOString(),firebaseDownloadUrl:ue.downloadURL||ue.firebaseDownloadUrl,firebaseStoragePath:ue.fullPath||ue.firebaseStoragePath};console.log("📤 [PDF] Données de mise à jour PDF:",oe),await gb(ee,oe),console.log("✅ [PDF] BDC mis à jour avec succès"),n(Se=>Se.map(ge=>ge.id===ee?{...ge,...oe}:ge)),ve.success("PDF uploadé avec succès !"),e&&e()}catch(oe){console.error("❌ [PDF] Erreur après upload:",oe);let Se="Erreur lors de la mise à jour du BDC";(re=(ae=oe.response)==null?void 0:ae.data)!=null&&re.message?Se=`Erreur: ${oe.response.data.message}`:(G=(fe=oe.response)==null?void 0:fe.data)!=null&&G.error?Se=`Erreur: ${oe.response.data.error}`:oe.message&&(Se=`Erreur: ${oe.message}`),ve.error(Se),oe.response&&console.error("❌ [PDF] Détails de la réponse d'erreur:",{status:oe.response.status,statusText:oe.response.statusText,data:oe.response.data,headers:oe.response.headers})}},Q=(ee,ue)=>{console.error("Erreur upload PDF:",ue),ve.error(`Erreur lors de l'upload: ${ue.message}`)},H=async(ee,ue,ae)=>{const re=r.find(G=>G.id===ee),fe=re==null?void 0:re.numero;return await dc.uploadBdcPdf(ee,ue,ae,fe)},q=async(ee,ue)=>{ue&&await dc.deletePdf(ue)},X=async(ee,ue)=>ue,$=ee=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(ee),K=ee=>ee?new Date(ee).toLocaleDateString("fr-FR"):"-",se=ee=>({EN_ATTENTE:"yellow",VALIDE:"green",REFUSE:"red",LIVRE:"blue"})[ee]||"gray",Z=ee=>({EN_ATTENTE:"En attente",VALIDE:"Validé",REFUSE:"Refusé",LIVRE:"Livré"})[ee]||ee,ie=ee=>{console.log("🔍 Prévisualisation PDF pour BDC:",ee.id);let ue,ae;ee.firebaseDownloadUrl&&ee.firebaseDownloadUrl.includes("firebasestorage.googleapis.com")?(console.log("🔥 Firebase détecté - FORCER le proxy pour éviter CORS"),ue=`http://localhost:8000/api/bdc/${ee.id}/pdf-proxy`,ae=ee.nomFichier||`BDC_${ee.numero}.pdf`):(console.log("📄 URL directe utilisée"),ue=ee.firebaseDownloadUrl,ae=ee.nomFichier),console.log("📄 URL finale:",ue),x({url:ue,filename:ae})};return a?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})}):C?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx(Qi,{className:"w-12 h-12 mx-auto"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Erreur de chargement"}),s.jsx("p",{className:"text-gray-500 mb-4",children:C}),s.jsx("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700",children:"Réessayer"})]})}):s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"text-center py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:s.jsx(Qi,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Bons de Commande"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gestion des commandes fournisseurs"})]}),s.jsxs("div",{className:"flex-1 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," BDC • ",$(r.reduce((ee,ue)=>ee+(ue.montantHt||0),0))," total"]}),s.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[s.jsx("button",{onClick:v,className:"inline-flex items-center gap-2 px-3 py-2 text-blue-700 text-sm font-medium rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors duration-200",title:"Tester la création d'un BDC avec diagnostic complet",children:"🔧 Test"}),s.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#6b7c3d",transition:"background-color 0.2s"},onMouseOver:ee=>ee.target.style.backgroundColor="#5a6a34",onMouseOut:ee=>ee.target.style.backgroundColor="#6b7c3d",disabled:a,children:[s.jsx(Qd,{size:16}),"Nouveau BDC"]})]})]}),a&&s.jsx("div",{className:"text-center py-4",children:"Chargement des bons de commande..."}),C&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm",children:C})}),r.length>0&&(()=>{const ee=r.reduce((fe,G)=>fe+(G.montantHt||0),0),ue=r.filter(fe=>fe.dateReception),ae=ue.reduce((fe,G)=>fe+(G.montantHt||0),0),re=r.filter(fe=>!fe.dateReception);return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{style:{backgroundColor:"#f5f0e8",padding:"16px",borderRadius:"8px",border:"1px solid #e8dcc0",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"Total BDCs"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:$(ee)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[r.length," commande(s)"]})]})}),s.jsx("div",{style:{backgroundColor:"#f0f4e8",padding:"16px",borderRadius:"8px",border:"1px solid #d9e2c4",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"Reçus"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:$(ae)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[ue.length," reçu(s)"]})]})}),s.jsx("div",{style:{backgroundColor:"#faf6f0",padding:"16px",borderRadius:"8px",border:"1px solid #f0e6d2",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"En attente"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:$(ee-ae)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[re.length," en attente"]})]})})]})})(),r.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun bon de commande"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Commencez par créer votre premier bon de commande pour cette affaire."})]}):s.jsx("div",{className:"space-y-4",children:r.map(ee=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:s.jsx(Qi,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["BDC #",ee.numero]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:K(ee.dateBdc)})]})]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${se(ee.statut)}-100 text-${se(ee.statut)}-800`,children:Z(ee.statut)})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Fournisseur"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:ee.fournisseur})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Montant HT"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:$(ee.montantHt)})]})]}),ee.dateLivraison&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Date de livraison prévue"}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Il,{className:"w-4 h-4 text-primary-400 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white mr-2",children:bO(ee.dateLivraison)}),(()=>{const ue=mY(ee.dateLivraison);return s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border-2 ${ue.badge} flex-shrink-0`,children:ue.text})})()]})]}),ee.dateReception&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Date de réception"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fh,{className:"w-4 h-4 text-green-600"}),s.jsx("p",{className:"text-sm font-medium text-green-600",children:K(ee.dateReception)})]})]}),ee.commentaire&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:ee.commentaire})}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Qi,{className:"w-4 h-4 text-primary-600"}),"Document PDF (Firebase Storage)"]}),s.jsx(zS,{entityId:ee.id,entityType:"bdc",existingFile:ee.nomFichier?{nomFichier:ee.nomFichier,tailleFichier:ee.tailleFichier,dateUpload:ee.dateUpload,firebaseDownloadUrl:ee.firebaseDownloadUrl,firebaseStoragePath:ee.firebaseStoragePath}:null,uploadFunction:H,deleteFunction:q,getViewUrlFunction:X,onUploadSuccess:ue=>z(ee.id,ue),onUploadError:ue=>Q(ee.id,ue),onPreview:()=>ie(ee)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[ee.statut==="EN_ATTENTE"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>M(ee.id),style:{backgroundColor:"#6b7c3d",color:"#ffffff",padding:"8px 16px",fontSize:"13px",fontWeight:"500",borderRadius:"6px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},onMouseOver:ue=>ue.target.style.backgroundColor="#556533",onMouseOut:ue=>ue.target.style.backgroundColor="#6b7c3d",title:"Valider le BDC",children:[s.jsx(fh,{className:"w-4 h-4"}),"Valider"]}),s.jsxs("button",{onClick:()=>R(ee.id),style:{backgroundColor:"#ffffff",color:"#000000",padding:"8px 16px",fontSize:"13px",fontWeight:"500",borderRadius:"6px",border:"1px solid #d1d5db",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},onMouseOver:ue=>ue.target.style.backgroundColor="#f9fafb",onMouseOut:ue=>ue.target.style.backgroundColor="#ffffff",title:"Annuler le BDC",children:[s.jsx(Hh,{className:"w-4 h-4"}),"Annuler"]})]}),ee.statut==="VALIDE"&&!ee.dateReception&&s.jsxs("button",{onClick:()=>U(ee.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors flex items-center gap-1",title:"Réceptionner le BDC",children:[s.jsx(fh,{className:"w-3 h-3"}),"Réceptionner"]}),ee.dateReception&&s.jsxs("span",{className:"px-3 py-1.5 bg-green-100 text-green-800 text-xs font-medium rounded flex items-center gap-1",children:[s.jsx(fh,{className:"w-3 h-3"}),"Reçu"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>F(ee),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(Ym,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>S(ee.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Km,{className:"w-4 h-4"})})]})]})]},ee.id))})]}),s.jsx(fa,{opened:o,onClose:D,title:d?"Modifier le BDC":"Nouveau BDC",size:"lg",children:s.jsx("form",{onSubmit:b.onSubmit(k),children:s.jsxs(ps,{spacing:"md",children:[s.jsx(Wr,{label:"Fournisseur",placeholder:"Sélectionner un fournisseur",required:!0,searchable:!0,clearable:!0,data:(m==null?void 0:m.map(ee=>({value:ee.nom,label:ee.nom,description:[ee.categorie?`Catégorie: ${ee.categorie}`:null,ee.contact?`Contact: ${ee.contact}`:null].filter(Boolean).join(" • ")})))||[],...b.getInputProps("fournisseur"),onChange:ee=>{if(console.log("🔄 [BDC-REAL] Changement de fournisseur:",ee),console.log("🔄 [BDC-REAL] Fournisseurs disponibles:",(m==null?void 0:m.length)||0),console.log("🔄 [BDC-REAL] Catégories disponibles:",(A==null?void 0:A.length)||0),b.setFieldValue("fournisseur",ee),ee&&m&&A){const ue=m.find(ae=>ae.nom===ee);if(console.log("🏢 [BDC-REAL] Fournisseur trouvé:",ue),ue)try{const ae=vO(ue,A);console.log("🎯 [BDC-REAL] Catégorie ID trouvée:",ae),ae?(b.setFieldValue("categorieId",ae),ve.success(`Catégorie automatiquement sélectionnée : ${ue.categorie}`),console.log("✅ [BDC-REAL] Catégorie auto-sélectionnée avec succès")):(console.log("❌ [BDC-REAL] Aucune catégorie trouvée pour ce fournisseur"),ve.info(`Aucune catégorie automatique trouvée pour ${ue.nom}`))}catch(ae){console.error("❌ [BDC-REAL] Erreur lors de la recherche de catégorie:",ae)}else console.log("❌ [BDC-REAL] Fournisseur non trouvé dans la liste")}else console.log("⚠️ [BDC-REAL] Données manquantes pour l'auto-sélection"),console.log("⚠️ [BDC-REAL] value:",!!ee,"fournisseurs:",!!m,"categories:",!!A)}}),s.jsx(Hi,{label:"Montant HT (€)",placeholder:"Saisissez le montant HT",precision:2,min:0,step:.01,required:!0,styles:{input:{fontSize:"16px",fontWeight:"500"},label:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"}},...b.getInputProps("montantHt")}),s.jsx(ko,{label:"Date du BDC",placeholder:"Sélectionner une date",required:!0,...b.getInputProps("dateBdc")}),s.jsx(ko,{label:"Date de livraison prévue",placeholder:"Sélectionner la date de livraison",description:"📅 Date à laquelle vous souhaitez recevoir la commande",minDate:new Date,styles:{input:{borderColor:b.values.dateLivraison&&new Date(b.values.dateLivraison).toDateString()===new Date().toDateString()?"#f59e0b":void 0,borderWidth:b.values.dateLivraison&&new Date(b.values.dateLivraison).toDateString()===new Date().toDateString()?"2px":void 0,backgroundColor:b.values.dateLivraison&&new Date(b.values.dateLivraison).toDateString()===new Date().toDateString()?"#fef3c7":void 0}},...b.getInputProps("dateLivraison")}),s.jsx(Wr,{label:"Catégorie",placeholder:"Sélectionner une catégorie",required:!0,searchable:!0,clearable:!0,data:(A==null?void 0:A.map(ee=>({value:ee.id.toString(),label:`${ee.code} - ${ee.intitule}`,description:ee.pourcentageFg?`Frais généraux: ${ee.pourcentageFg}%`:null})))||[],styles:{input:{fontSize:"16px"},label:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"}},...b.getInputProps("categorieId")}),s.jsx(Pl,{label:"Commentaire",placeholder:"Commentaire sur le BDC...",rows:3,...b.getInputProps("commentaire")}),s.jsx(wi,{}),s.jsxs(Bt,{position:"right",children:[s.jsx("button",{type:"button",onClick:D,style:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:"Annuler"}),s.jsxs("button",{type:"submit",disabled:c,style:{backgroundColor:c?"#94a3b8 !important":"#6b7c3d !important",color:"white !important",padding:"8px 16px",borderRadius:"8px",cursor:c?"not-allowed":"pointer",transition:"all 0.2s ease !important",fontWeight:"500",border:"none !important",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:ee=>!c&&ee.target.style.setProperty("background-color","#5a6a34","important"),onMouseOut:ee=>!c&&ee.target.style.setProperty("background-color","#6b7c3d","important"),children:[c&&s.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c?"Création...":"Créer"]})]})]})})}),g&&s.jsx(Jq,{url:g.url,filename:g.filename,onClose:()=>x(null)})]})},TCe=({factures:t=[],onEdit:e,onDelete:r,onValidate:n,onCancel:a,onPay:i,loading:o=!1,emptyMessage:l="Aucune facture d'achat trouvée",showActions:c=!0,uploadPdfFirebase:u,deletePdfFirebase:d,getPdfViewUrlFirebase:f,onPdfUploadSuccess:A,onPdfUploadError:h})=>{const m=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(x||0),p=x=>x?new Date(x).toLocaleDateString("fr-FR"):"N/A",g=x=>{const v={RECU:{color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",text:"Reçu"},VALIDE:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",text:"Validé"},PAYE:{color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",text:"Payé"},LITIGE:{color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",text:"Litige"}};if(x.datePaiement){const C=v.PAYE;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C.color}`,children:C.text})}const b=v[x.statut]||v.RECU;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.color}`,children:b.text})};return o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Chargement des factures d'achats..."})]}):t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(C4,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune facture d'achat"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l})]}):s.jsx("div",{className:"space-y-4",children:t.map(x=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(C4,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Facture #",x.numero]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:p(x.dateFacture)})]})]}),g(x)]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Fournisseur"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:x.fournisseur})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Montant TTC"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m(x.montantTtc)})]})]}),x.dateEcheance&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Date d'échéance"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Il,{className:"w-4 h-4 text-gray-400"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:bO(x.dateEcheance)})]})]}),x.datePaiement&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Date de paiement"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fh,{className:"w-4 h-4 text-green-600"}),s.jsx("p",{className:"text-sm font-medium text-green-600",children:p(x.datePaiement)})]})]}),x.bdcId&&x.bdc&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Bon de commande associé"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qi,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),s.jsxs("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["BDC #",x.bdc.numero," - ",m(x.bdc.montantHt)]})]})]}),x.description&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:x.description})}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Qi,{className:"w-4 h-4 text-purple-600"}),"Document PDF (Firebase Storage)"]}),s.jsx(zS,{entityId:x.id,entityType:"facture",existingFile:x.nomFichier?{nomFichier:x.nomFichier,tailleFichier:x.tailleFichier,dateUpload:x.dateUpload,firebaseDownloadUrl:x.firebaseDownloadUrl,firebaseStoragePath:x.firebaseStoragePath}:null,uploadFunction:u,deleteFunction:d,getViewUrlFunction:f,onUploadSuccess:v=>A&&A(x.id,v),onUploadError:v=>h&&h(x.id,v)})]}),c&&s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[x.statut==="RECU"&&s.jsxs(s.Fragment,{children:[n&&s.jsxs("button",{onClick:()=>n(x.id),style:{backgroundColor:"#6b7c3d",color:"#ffffff",padding:"8px 16px",fontSize:"13px",fontWeight:"500",borderRadius:"6px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},onMouseOver:v=>v.target.style.backgroundColor="#556533",onMouseOut:v=>v.target.style.backgroundColor="#6b7c3d",title:"Valider la facture",children:[s.jsx(fh,{className:"w-4 h-4"}),"Valider"]}),a&&s.jsxs("button",{onClick:()=>a(x.id),style:{backgroundColor:"#ffffff",color:"#000000",padding:"8px 16px",fontSize:"13px",fontWeight:"500",borderRadius:"6px",border:"1px solid #d1d5db",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},onMouseOver:v=>v.target.style.backgroundColor="#f9fafb",onMouseOut:v=>v.target.style.backgroundColor="#ffffff",title:"Marquer en litige",children:[s.jsx(Hh,{className:"w-4 h-4"}),"Litige"]})]}),x.statut==="VALIDE"&&!x.datePaiement&&i&&s.jsxs("button",{onClick:()=>i(x.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors flex items-center gap-1",title:"Marquer comme payée",children:[s.jsx(nP,{className:"w-3 h-3"}),"Payer"]}),x.statut==="PAYE"&&s.jsxs("span",{className:"px-3 py-1.5 bg-green-100 text-green-800 text-xs font-medium rounded flex items-center gap-1",children:[s.jsx(fh,{className:"w-3 h-3"}),"Payée"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e&&s.jsx("button",{onClick:()=>e(x),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(Ym,{className:"w-4 h-4"})}),r&&s.jsx("button",{onClick:()=>r(x.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Km,{className:"w-4 h-4"})})]})]})]},x.id))})},Fm=le.forwardRef(({className:t,...e},r)=>s.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,ref:r,...e}));Fm.displayName="Textarea";const DCe=({isOpen:t,onClose:e,onSubmit:r,editingFacture:n=null,categories:a=[],fournisseurs:i=[],bdcsDisponibles:o=[],submitting:l=!1,uploadPdfFirebase:c,deletePdfFirebase:u,getPdfViewUrlFirebase:d,onPdfUploadSuccess:f,onPdfUploadError:A})=>{const[h,m]=y.useState({fournisseur:"",montantHt:"",montantTtc:"",dateFacture:new Date().toISOString().split("T")[0],dateEcheance:"",categorieId:"",bdcId:"",commentaire:"",numeroFacture:""}),[p,g]=y.useState({}),[x,v]=y.useState(!0);y.useEffect(()=>{var k,D;t&&(n?(m({fournisseur:n.fournisseur||"",montantHt:((k=n.montantHt)==null?void 0:k.toString())||"",montantTtc:((D=n.montantTtc)==null?void 0:D.toString())||"",dateFacture:n.dateFacture?new Date(n.dateFacture).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],dateEcheance:n.dateEcheance?new Date(n.dateEcheance).toISOString().split("T")[0]:"",categorieId:n.categorieId||"",bdcId:n.bdcId||"",commentaire:n.commentaire||"",numeroFacture:n.numeroFacture||""}),v(!1)):(m({fournisseur:"",montantHt:"",montantTtc:"",dateFacture:new Date().toISOString().split("T")[0],dateEcheance:"",categorieId:"",bdcId:"",commentaire:"",numeroFacture:""}),v(!0)),g({}))},[t,n]),y.useEffect(()=>{if(h.fournisseur&&!h.categorieId&&a.length>0){const k=vO(h.fournisseur,a);k&&(m(D=>({...D,categorieId:k.id})),console.log(`🎯 [FACTURES-MODAL] Auto-sélection catégorie "${k.intitule}" pour fournisseur "${h.fournisseur}"`))}},[h.fournisseur,a]),y.useEffect(()=>{if(x&&h.montantHt){const k=parseFloat(h.montantHt);if(!isNaN(k)){const D=Math.round(k*1.2*100)/100;m(S=>({...S,montantTtc:D.toString()}))}}},[h.montantHt,x]);const b=(k,D)=>{m(S=>({...S,[k]:D})),p[k]&&g(S=>({...S,[k]:null})),k==="montantTtc"&&v(!1)},C=k=>{const D=o.find(S=>S.id===k);D?(m(S=>{var F;return{...S,bdcId:k,fournisseur:D.fournisseur,montantHt:((F=D.montantHt)==null?void 0:F.toString())||"",categorieId:D.categorieId||S.categorieId}}),v(!0)):m(S=>({...S,bdcId:""}))},j=()=>{const k={};h.fournisseur.trim()||(k.fournisseur="Le fournisseur est obligatoire");const D=parseFloat(h.montantHt);(!h.montantHt||isNaN(D)||D<=0)&&(k.montantHt="Le montant HT doit être supérieur à 0");const S=parseFloat(h.montantTtc);return(!h.montantTtc||isNaN(S)||S<=0)&&(k.montantTtc="Le montant TTC doit être supérieur à 0"),h.dateFacture||(k.dateFacture="La date de facture est obligatoire"),h.categorieId||(k.categorieId="La catégorie est obligatoire"),g(k),Object.keys(k).length===0},w=k=>{if(k.preventDefault(),!j()){ve.error("Veuillez corriger les erreurs du formulaire");return}const D={...h,montantHt:parseFloat(h.montantHt),montantTtc:parseFloat(h.montantTtc),dateFacture:new Date(h.dateFacture),dateEcheance:h.dateEcheance?new Date(h.dateEcheance):null};r(D)},N=()=>{l||e()},E=a.find(k=>k.id===h.categorieId),_=o.find(k=>k.id===h.bdcId);return console.log("🔍 [FACTURES-MODAL] isOpen:",t),console.log("🔍 [FACTURES-MODAL] categories:",a.length),t?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n?"Modifier la facture":"Nouvelle facture d'achat"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n?"Modification d'une facture existante":"Création d'une nouvelle facture fournisseur"})]})}),s.jsx(Xe,{variant:"ghost",size:"sm",onClick:N,disabled:l,className:"text-gray-500 hover:text-gray-700",children:s.jsx(Hh,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[n&&s.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qi,{className:"w-4 h-4 text-blue-600"}),s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Numéro de facture :"})," ",n.numeroFacture||n.numero]})]})}),o.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{children:"Associer à un bon de commande (optionnel)"}),s.jsxs(Xo,{value:h.bdcId,onValueChange:C,children:[s.jsx(Jo,{children:s.jsx(Zo,{placeholder:"Aucun BDC associé"})}),s.jsxs(el,{children:[s.jsx(la,{value:"",children:"Aucun BDC associé"}),o.map(k=>s.jsx(la,{value:k.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:k.numero}),s.jsx(Kn,{variant:"outline",className:"text-xs",children:k.fournisseur}),s.jsx("span",{className:"text-sm text-gray-500",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(k.montantHt)})]})},k.id))]})]}),_&&s.jsxs("p",{className:"text-sm text-blue-600",children:['ℹ️ Les informations du BDC "',_.numero,'" ont été pré-remplies']})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"fournisseur",children:"Fournisseur *"}),s.jsx(Ur,{id:"fournisseur",value:h.fournisseur,onChange:k=>b("fournisseur",k.target.value),placeholder:"Nom du fournisseur",className:p.fournisseur?"border-red-500":"",disabled:l}),p.fournisseur&&s.jsx("p",{className:"text-sm text-red-500",children:p.fournisseur})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{children:"Catégorie d'achat *"}),s.jsxs(Xo,{value:h.categorieId,onValueChange:k=>b("categorieId",k),children:[s.jsx(Jo,{className:p.categorieId?"border-red-500":"",children:s.jsx(Zo,{placeholder:"Sélectionner une catégorie"})}),s.jsx(el,{children:a.map(k=>s.jsx(la,{value:k.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:k.intitule}),k.code&&s.jsx(Kn,{variant:"outline",className:"text-xs",children:k.code})]})},k.id))})]}),p.categorieId&&s.jsx("p",{className:"text-sm text-red-500",children:p.categorieId}),E&&s.jsx("p",{className:"text-sm text-gray-500",children:"💡 Auto-sélectionné pour ce type de fournisseur"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"montantHt",children:"Montant HT (€) *"}),s.jsx(Ur,{id:"montantHt",type:"number",step:"0.01",value:h.montantHt,onChange:k=>b("montantHt",k.target.value),placeholder:"0.00",className:p.montantHt?"border-red-500":"",disabled:l}),p.montantHt&&s.jsx("p",{className:"text-sm text-red-500",children:p.montantHt})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"montantTtc",children:"Montant TTC (€) *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{id:"montantTtc",type:"number",step:"0.01",value:h.montantTtc,onChange:k=>b("montantTtc",k.target.value),placeholder:"0.00",className:p.montantTtc?"border-red-500":"",disabled:l}),x&&s.jsx("div",{className:"absolute right-2 top-2",children:s.jsx(Yb,{className:"w-4 h-4 text-green-500",title:"Calcul automatique (TVA 20%)"})})]}),p.montantTtc&&s.jsx("p",{className:"text-sm text-red-500",children:p.montantTtc}),x&&s.jsx("p",{className:"text-sm text-green-600",children:"🧮 Calcul automatique avec TVA 20%"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"dateFacture",children:"Date de facture *"}),s.jsx(Ur,{id:"dateFacture",type:"date",value:h.dateFacture,onChange:k=>b("dateFacture",k.target.value),className:p.dateFacture?"border-red-500":"",disabled:l}),p.dateFacture&&s.jsx("p",{className:"text-sm text-red-500",children:p.dateFacture})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"dateEcheance",children:"Date d'échéance"}),s.jsx(Ur,{id:"dateEcheance",type:"date",value:h.dateEcheance,onChange:k=>b("dateEcheance",k.target.value),disabled:l}),s.jsx("p",{className:"text-sm text-gray-500",children:"Optionnel"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"commentaire",children:"Commentaire"}),s.jsx(Fm,{id:"commentaire",value:h.commentaire,onChange:k=>b("commentaire",k.target.value),placeholder:"Description ou remarques sur cette facture...",rows:3,disabled:l})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(Xe,{type:"button",variant:"outline",onClick:N,disabled:l,children:"Annuler"}),s.jsx(Xe,{type:"submit",style:{backgroundColor:"#6b7c3d",color:"#ffffff",border:"none",padding:"8px 16px",fontSize:"13px"},onMouseEnter:k=>k.target.style.backgroundColor="#556533",onMouseLeave:k=>k.target.style.backgroundColor="#6b7c3d",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),n?"Modification...":"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qd,{className:"w-4 h-4 mr-2"}),n?"Modifier":"Créer la facture"]})})]})]})]})}):null},ICe=({affaireId:t,onUpdate:e,title:r="Factures d'Achats",subtitle:n="Gestion des factures fournisseurs",showHeader:a=!0,collapsible:i=!1,className:o=""})=>{const[l,c]=y.useState([]),[u,d]=y.useState(!0),[f,A]=y.useState(!1),[h,m]=y.useState(!1),[p,g]=y.useState(null),[x,v]=y.useState([]),[b,C]=y.useState([]),[j,w]=y.useState([]),[N,E]=y.useState(!1),[_,k]=y.useState(null),D=async()=>{if(!t){console.warn("⚠️ [FACTURES] affaireId manquant");return}try{d(!0),k(null),console.log("🔄 [FACTURES] Chargement des factures pour affaireId:",t);const G=await Sx({affaireId:t});console.log("📦 [FACTURES] Réponse API:",G);let oe=[];G!=null&&G.achats?oe=G.achats:Array.isArray(G)?oe=G:(console.warn("⚠️ [FACTURES] Format de réponse inattendu:",G),oe=[]),console.log("✅ [FACTURES] Factures chargées:",oe.length),c(oe)}catch(G){console.error("❌ [FACTURES] Erreur chargement factures:",G),k("Erreur lors du chargement des factures"),ve.error(`Erreur lors du chargement des factures: ${G.message}`)}finally{d(!1)}},S=async()=>{try{console.log("🔄 [FACTURES] Chargement des catégories");const G=await ay();console.log("📂 [FACTURES] Catégories chargées:",G),v(G||[])}catch(G){console.error("❌ [FACTURES] Erreur lors du chargement des catégories:",G)}},F=async()=>{try{console.log("🔄 [FACTURES] Chargement des fournisseurs");const G=await Pw();console.log("🏢 [FACTURES] Fournisseurs chargés:",G),C(G||[])}catch(G){console.error("❌ [FACTURES] Erreur lors du chargement des fournisseurs:",G)}},M=async()=>{try{console.log("🔄 [FACTURES] Chargement des BDC disponibles");const G=await sp({affaireId:t});let oe=[];G!=null&&G.bdc?oe=G.bdc:G!=null&&G.bdcs?oe=G.bdcs:Array.isArray(G)&&(oe=G);const Se=oe.filter(ge=>ge.statut==="VALIDE"||ge.statut==="RECEPTIONNE"||ge.dateReception);console.log("📋 [FACTURES] BDC disponibles:",Se.length),w(Se)}catch(G){console.error("❌ [FACTURES] Erreur lors du chargement des BDC:",G),w([])}};y.useEffect(()=>{console.log("🔄 [FACTURES] Effet de chargement initial avec affaireId:",t),D(),S(),F(),M()},[t]);const R=()=>{console.log("➕ [FACTURES] Ouverture du modal de création"),console.log("➕ [FACTURES] showModal avant:",h),g(null),m(!0),console.log("➕ [FACTURES] showModal après:",!0)},U=async G=>{var oe,Se,ge,te;try{A(!0),console.log("📤 [FACTURES] Soumission facture, données reçues:",G);const we=["fournisseur","montantHt","montantTtc","dateFacture","categorieId"].filter(be=>!G[be]);if(we.length>0){ve.error(`Champs obligatoires manquants: ${we.join(", ")}`);return}if(p){const be={montantHt:parseFloat(G.montantHt),montantTtc:parseFloat(G.montantTtc),dateFacture:G.dateFacture instanceof Date?G.dateFacture:new Date(G.dateFacture),categorieId:G.categorieId,fournisseur:G.fournisseur,bdcId:G.bdcId||void 0,commentaire:G.commentaire||void 0};console.log("📤 [FACTURES] Données formatées pour modification:",be),console.log("📤 [FACTURES] Types des données:",{montantHt:typeof be.montantHt,montantTtc:typeof be.montantTtc,dateFacture:typeof be.dateFacture,categorieId:typeof be.categorieId,fournisseur:typeof be.fournisseur});const Te=await em(p.id,be);ve.success("Facture d'achat modifiée avec succès !"),console.log("✅ [FACTURES] Facture modifiée:",Te),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"update",factureId:p.id}}))}else{const be={montantHt:parseFloat(G.montantHt),montantTtc:parseFloat(G.montantTtc),dateFacture:G.dateFacture instanceof Date?G.dateFacture:new Date(G.dateFacture),affaireId:t,categorieId:G.categorieId,fournisseur:G.fournisseur,bdcId:G.bdcId||void 0,commentaire:G.commentaire||void 0};console.log("📤 [FACTURES] Données formatées pour création:",be),console.log("📤 [FACTURES] Types des données:",{montantHt:typeof be.montantHt,montantTtc:typeof be.montantTtc,dateFacture:typeof be.dateFacture,affaireId:typeof be.affaireId,categorieId:typeof be.categorieId,fournisseur:typeof be.fournisseur});const Te=await _S(be);ve.success("Facture d'achat créée avec succès !"),console.log("✅ [FACTURES] Facture créée:",Te),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"create",factureId:Te.id}}))}await D(),z(),e&&e()}catch(ye){console.error("❌ [FACTURES] Erreur lors de la création/modification de la facture:",ye);let we="Erreur lors de la sauvegarde de la facture";(Se=(oe=ye.response)==null?void 0:oe.data)!=null&&Se.message?we=ye.response.data.message:(te=(ge=ye.response)==null?void 0:ge.data)!=null&&te.error?we=ye.response.data.error:ye.message&&(we=ye.message),ve.error(we)}finally{A(!1)}},z=()=>{m(!1),g(null)},Q=async G=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette facture d'achat ?"))try{console.log("🗑️ [FACTURES] Suppression facture:",G),await Kk(G),ve.success("Facture d'achat supprimée avec succès !"),await D(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"delete",factureId:G}})),e&&e()}catch(oe){console.error("❌ [FACTURES] Erreur lors de la suppression de la facture:",oe),ve.error(`Erreur lors de la suppression: ${oe.message}`)}},H=G=>{console.log("✏️ [FACTURES] Modification facture:",G),g(G),m(!0)},q=async G=>{try{console.log("✅ [FACTURES] Validation facture:",G),await Tq(G),ve.success("Facture d'achat validée avec succès !"),await D(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"validate",factureId:G}})),e&&e()}catch(oe){console.error("❌ [FACTURES] Erreur lors de la validation de la facture:",oe),ve.error(`Erreur lors de la validation: ${oe.message}`)}},X=async G=>{if(window.confirm("Êtes-vous sûr de vouloir marquer cette facture en litige ?"))try{console.log("❌ [FACTURES] Marquage en litige facture:",G),await em(G,{statut:"LITIGE"}),ve.success("Facture d'achat marquée en litige !"),await D(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"cancel",factureId:G}})),e&&e()}catch(oe){console.error("❌ [FACTURES] Erreur lors du marquage en litige de la facture:",oe),ve.error(`Erreur lors du marquage en litige: ${oe.message}`)}},$=async G=>{try{console.log("💰 [FACTURES] Paiement facture:",G),await Abe(G,new Date().toISOString()),ve.success("Facture d'achat marquée comme payée !"),await D(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"pay",factureId:G}})),e&&e()}catch(oe){console.error("❌ [FACTURES] Erreur lors du paiement de la facture:",oe),ve.error(`Erreur lors du paiement: ${oe.message}`)}},K=async(G,oe)=>{var Se,ge,te,ye;try{if(console.log("🔥 [PDF] Upload success result:",oe),oe===null){const be={nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null};console.log("🗑️ [PDF] Suppression des données PDF:",be),await em(G,be),console.log("✅ [PDF] Facture mise à jour avec succès (suppression)"),c(Te=>Te.map(Oe=>Oe.id===G?{...Oe,...be}:Oe)),ve.success("PDF supprimé avec succès !"),e&&e();return}const we={nomFichier:oe.fileName||oe.nomFichier,tailleFichier:parseInt(oe.size||oe.tailleFichier||0),dateUpload:oe.uploadedAt||oe.dateUpload||new Date().toISOString(),firebaseDownloadUrl:oe.downloadURL||oe.firebaseDownloadUrl,firebaseStoragePath:oe.fullPath||oe.firebaseStoragePath};console.log("📤 [PDF] Données de mise à jour PDF:",we),await em(G,we),console.log("✅ [PDF] Facture mise à jour avec succès"),c(be=>be.map(Te=>Te.id===G?{...Te,...we}:Te)),ve.success("PDF uploadé avec succès !"),e&&e()}catch(we){console.error("❌ [PDF] Erreur après upload:",we);let be="Erreur lors de la mise à jour de la facture";(ge=(Se=we.response)==null?void 0:Se.data)!=null&&ge.message?be=`Erreur: ${we.response.data.message}`:(ye=(te=we.response)==null?void 0:te.data)!=null&&ye.error?be=`Erreur: ${we.response.data.error}`:we.message&&(be=`Erreur: ${we.message}`),ve.error(be)}},se=(G,oe)=>{console.error("Erreur upload PDF:",oe),ve.error(`Erreur lors de l'upload: ${oe.message}`)},Z=async(G,oe,Se)=>{const ge=l.find(ye=>ye.id===G),te=ge==null?void 0:ge.numeroFacture;return await dc.uploadFacturePdf(G,oe,Se,te)},ie=async(G,oe)=>{oe&&await dc.deletePdf(oe)},ee=async(G,oe)=>oe,ue=l.reduce((G,oe)=>G+(oe.montantTtc||0),0),ae=l.filter(G=>G.datePaiement||G.statut==="PAYE"),re=ae.reduce((G,oe)=>G+(oe.montantTtc||0),0),fe=G=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(G||0);return s.jsxs("div",{className:`h-full flex flex-col ${o}`,children:[a&&s.jsxs("div",{className:"text-center py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-secondary-100 dark:bg-secondary-900/30 rounded-lg",children:s.jsx(C4,{className:"w-5 h-5 text-secondary-600 dark:text-secondary-400"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Factures d'Achats"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Suivi des factures et paiements"})]}),s.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-auto ${N?"hidden":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," facture(s) • ",fe(ue)," total"]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsxs(Xe,{onClick:R,className:"bg-secondary-600 hover:bg-secondary-700 text-white",disabled:u,children:[s.jsx(Qd,{className:"w-4 h-4 mr-2"}),"Nouvelle Facture"]})})]}),_&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm",children:_})}),l.length>0&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{style:{backgroundColor:"#f5f0e8",padding:"16px",borderRadius:"8px",border:"1px solid #e8dcc0",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"Total Factures"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:fe(ue)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[l.length," facture(s)"]})]})}),s.jsx("div",{style:{backgroundColor:"#f0f4e8",padding:"16px",borderRadius:"8px",border:"1px solid #d9e2c4",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"Payées"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:fe(re)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[ae.length," payée(s)"]})]})}),s.jsx("div",{style:{backgroundColor:"#faf6f0",padding:"16px",borderRadius:"8px",border:"1px solid #f0e6d2",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",style:{color:"#000000"},children:"En attente"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#000000"},children:fe(ue-re)}),s.jsxs("p",{className:"text-xs",style:{color:"#333333"},children:[l.length-ae.length," en attente"]})]})})]}),s.jsx(TCe,{factures:l,loading:u,onEdit:H,onDelete:Q,onValidate:q,onCancel:X,onPay:$,emptyMessage:"Créez votre première facture d'achat pour cette affaire.",uploadPdfFirebase:Z,deletePdfFirebase:ie,getPdfViewUrlFirebase:ee,onPdfUploadSuccess:K,onPdfUploadError:se})]}),s.jsx(DCe,{isOpen:h,onClose:z,onSubmit:U,editingFacture:p,categories:x,fournisseurs:b,bdcsDisponibles:j,submitting:f,uploadPdfFirebase:Z,deletePdfFirebase:ie,getPdfViewUrlFirebase:ee,onPdfUploadSuccess:K,onPdfUploadError:se})]})},pY=async(t,e)=>{try{const{data:r}=await Ee.post(`/affaires/${t}/estimation-achats`,e);return r}catch(r){throw console.error("Erreur lors de la sauvegarde de l'estimation:",r),r}},gY=async t=>{try{const{data:e}=await Ee.get(`/affaires/${t}/estimation-achats`);return e}catch(e){throw console.error("Erreur lors de la récupération de l'estimation:",e),e}},_Ce=async(t,e)=>{try{const{data:r}=await Ee.put(`/affaires/${t}/estimation-achats`,e);return r}catch(r){throw console.error("Erreur lors de la mise à jour de l'estimation:",r),r}},PCe=async t=>{try{const{data:e}=await Ee.delete(`/affaires/${t}/estimation-achats`);return e}catch(e){throw console.error("Erreur lors de la suppression de l'estimation:",e),e}},kCe=async(t={})=>{try{const{data:e}=await Ee.get("/estimations-achats/dashboard",{params:t});return e}catch(e){throw console.error("Erreur lors de la récupération des estimations pour le dashboard:",e),e}},pL={sauvegarderEstimationAchats:pY,getEstimationAchats:gY,mettreAJourEstimationAchats:_Ce,supprimerEstimationAchats:PCe,getEstimationsPourDashboard:kCe},OCe=({affaire:t,onDataUpdate:e,isCollapsed:r,onToggleCollapse:n})=>{const[a,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(35e3),[d,f]=y.useState(30),[A,h]=y.useState([{id:"bois-massif",nom:"Bois massif",couleur:"#8B4513",pourcentage:25},{id:"panneau",nom:"Panneau",couleur:"#D2691E",pourcentage:20},{id:"quincaillerie",nom:"Quincaillerie",couleur:"#708090",pourcentage:15},{id:"colle",nom:"Colle",couleur:"#FFD700",pourcentage:10},{id:"abrasifs",nom:"Abrasifs",couleur:"#DEB887",pourcentage:8},{id:"divers",nom:"Divers",couleur:"#9370DB",pourcentage:12},{id:"visserie",nom:"Visserie",couleur:"#C0C0C0",pourcentage:5},{id:"vernis",nom:"Vernis",couleur:"#FFA500",pourcentage:5}]);y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{i(!0),console.log("🔄 EstimationAchatsSection - Chargement pour affaire ID:",t.id);const b=await pL.getEstimationAchats(t.id);if(console.log("📊 EstimationAchatsSection - Réponse API:",b),console.log("💰 EstimationAchatsSection - Montant devis dans réponse:",b==null?void 0:b.montantDevis),console.log("💰 EstimationAchatsSection - ObjectifCaHt affaire:",t==null?void 0:t.objectifCaHt),b){const C=b.montantDevis||(t==null?void 0:t.objectifCaHt)||35e3;console.log("✅ EstimationAchatsSection - Montant final calculé:",C),u(C),f(b.pourcentageAchats||30),b.categories&&b.categories.length>0&&h(b.categories)}}catch(b){console.error("❌ EstimationAchatsSection - Erreur lors du chargement:",b)}finally{i(!1)}})()},[t==null?void 0:t.id]);const m=c*d/100,p=A.reduce((v,b)=>v+(b.pourcentage||0),0),g=(v,b)=>{const C=[...A];C[v].pourcentage=Math.max(0,Math.min(100,b||0)),h(C)},x=async()=>{try{l(!0),await pL.saveEstimationAchats(t.id,{montantDevis:c,pourcentageAchats:d,categories:A}),ve.success("Estimation sauvegardée"),e==null||e()}catch(v){console.error("Erreur lors de la sauvegarde:",v),ve.error("Erreur lors de la sauvegarde")}finally{l(!1)}};return a?s.jsxs("div",{className:"flex items-center justify-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Chargement..."})]}):s.jsx("div",{className:"h-full max-h-[800px] overflow-hidden flex flex-col",children:!r&&s.jsx(nr,{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Configuration"}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Montant Devis Validés"}),s.jsx("input",{type:"number",value:c,onChange:v=>u(Number(v.target.value)),className:"w-full px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-1",children:["Pourcentage Achats (",d,"%)"]}),s.jsx("input",{type:"range",min:"10",max:"80",value:d,onChange:v=>f(Number(v.target.value)),className:"w-full"})]})]}),s.jsxs("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded border",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Budget Estimation Achats"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Mn(m)})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Répartition par Catégories"}),s.jsxs("div",{className:`text-sm px-2 py-1 rounded ${Math.abs(p-100)<=1?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:["Total: ",p.toFixed(1),"%"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto",children:A.map((v,b)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-700 rounded border",children:[s.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:v.couleur}}),s.jsx("div",{className:"flex-1 text-sm font-medium text-gray-700 dark:text-gray-300",children:v.nom}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:v.pourcentage,onChange:C=>g(b,parseFloat(C.target.value)),className:"w-16 px-2 py-1 text-xs border rounded text-center"}),s.jsx("span",{className:"text-xs text-gray-500",children:"%"})]}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 w-20 text-right",children:Mn(m*v.pourcentage/100)})]},v.id))})]}),s.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsx(Xe,{onClick:x,disabled:o,className:"bg-blue-600 hover:bg-blue-700",icon:kl,children:o?"Sauvegarde...":"Sauvegarder"})})]})})})},FCe=({affaire:t,onDataUpdate:e})=>{const[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState(!0);y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{l(!0);const[A,h]=await Promise.all([sp({affaireId:t.id}),Sx({affaireId:t.id})]);let m=[];A!=null&&A.bdc?m=A.bdc:A!=null&&A.bdcs?m=A.bdcs:Array.isArray(A)&&(m=A);const p=m.filter(x=>x&&(x.dateReception||x.statut==="RECEPTIONNE"));let g=[];Array.isArray(h)?g=h:h&&Array.isArray(h.achats)&&(g=h.achats),i(p),n(g)}catch(A){console.error("Erreur lors du chargement de la synthèse:",A)}finally{l(!1)}})()},[t==null?void 0:t.id]);const c=a.reduce((f,A)=>f+(A.montantHt||0),0),u=r.reduce((f,A)=>f+(A.montantHt||0),0),d=c+u;return o?s.jsxs("div",{className:"flex items-center justify-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-green-600 border-t-transparent"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Chargement..."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Total BDC Réceptionnés"}),s.jsx("div",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:Mn(c)}),s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[a.length," BDC"]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Factures"}),s.jsx("div",{className:"text-lg font-bold text-blue-700 dark:text-blue-300",children:Mn(u)}),s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:[r.length," factures"]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Total Général"}),s.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Mn(d)}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a.length+r.length," éléments"]})]})]}),a.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"BDC Réceptionnés"}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:a.map(f=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[f.numero," - ",f.fournisseur]}),s.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:Mn(f.montantHt)})]},f.id))})]}),r.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Factures d'Achats"}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.map(f=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[f.numeroFacture," - ",f.fournisseur]}),s.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:Mn(f.montantHt)})]},f.id))})]}),d===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-lg mb-2",children:"📋"}),s.jsx("div",{children:"Aucun achat réalisé pour le moment"})]})]})};var RCe=Array.isArray,Oo=RCe,MCe=typeof Yo=="object"&&Yo&&Yo.Object===Object&&Yo,xY=MCe,LCe=xY,UCe=typeof self=="object"&&self&&self.Object===Object&&self,$Ce=LCe||UCe||Function("return this")(),$u=$Ce,HCe=$u,QCe=HCe.Symbol,kw=QCe,gL=kw,vY=Object.prototype,zCe=vY.hasOwnProperty,VCe=vY.toString,Uv=gL?gL.toStringTag:void 0;function WCe(t){var e=zCe.call(t,Uv),r=t[Uv];try{t[Uv]=void 0;var n=!0}catch{}var a=VCe.call(t);return n&&(e?t[Uv]=r:delete t[Uv]),a}var GCe=WCe,qCe=Object.prototype,KCe=qCe.toString;function YCe(t){return KCe.call(t)}var XCe=YCe,xL=kw,JCe=GCe,ZCe=XCe,eNe="[object Null]",tNe="[object Undefined]",vL=xL?xL.toStringTag:void 0;function rNe(t){return t==null?t===void 0?tNe:eNe:vL&&vL in Object(t)?JCe(t):ZCe(t)}var uf=rNe;function nNe(t){return t!=null&&typeof t=="object"}var df=nNe,sNe=uf,aNe=df,iNe="[object Symbol]";function oNe(t){return typeof t=="symbol"||aNe(t)&&sNe(t)==iNe}var _x=oNe,lNe=Oo,cNe=_x,uNe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dNe=/^\w*$/;function fNe(t,e){if(lNe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||cNe(t)?!0:dNe.test(t)||!uNe.test(t)||e!=null&&t in Object(e)}var yO=fNe;function hNe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var qh=hNe;const Px=ln(qh);var ANe=uf,mNe=qh,pNe="[object AsyncFunction]",gNe="[object Function]",xNe="[object GeneratorFunction]",vNe="[object Proxy]";function bNe(t){if(!mNe(t))return!1;var e=ANe(t);return e==gNe||e==xNe||e==pNe||e==vNe}var wO=bNe;const xr=ln(wO);var yNe=$u,wNe=yNe["__core-js_shared__"],jNe=wNe,GB=jNe,bL=function(){var t=/[^.]+$/.exec(GB&&GB.keys&&GB.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function CNe(t){return!!bL&&bL in t}var NNe=CNe,SNe=Function.prototype,ENe=SNe.toString;function BNe(t){if(t!=null){try{return ENe.call(t)}catch{}try{return t+""}catch{}}return""}var bY=BNe,TNe=wO,DNe=NNe,INe=qh,_Ne=bY,PNe=/[\\^$.*+?()[\]{}|]/g,kNe=/^\[object .+?Constructor\]$/,ONe=Function.prototype,FNe=Object.prototype,RNe=ONe.toString,MNe=FNe.hasOwnProperty,LNe=RegExp("^"+RNe.call(MNe).replace(PNe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UNe(t){if(!INe(t)||DNe(t))return!1;var e=TNe(t)?LNe:kNe;return e.test(_Ne(t))}var $Ne=UNe;function HNe(t,e){return t==null?void 0:t[e]}var QNe=HNe,zNe=$Ne,VNe=QNe;function WNe(t,e){var r=VNe(t,e);return zNe(r)?r:void 0}var ip=WNe,GNe=ip,qNe=GNe(Object,"create"),KS=qNe,yL=KS;function KNe(){this.__data__=yL?yL(null):{},this.size=0}var YNe=KNe;function XNe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var JNe=XNe,ZNe=KS,eSe="__lodash_hash_undefined__",tSe=Object.prototype,rSe=tSe.hasOwnProperty;function nSe(t){var e=this.__data__;if(ZNe){var r=e[t];return r===eSe?void 0:r}return rSe.call(e,t)?e[t]:void 0}var sSe=nSe,aSe=KS,iSe=Object.prototype,oSe=iSe.hasOwnProperty;function lSe(t){var e=this.__data__;return aSe?e[t]!==void 0:oSe.call(e,t)}var cSe=lSe,uSe=KS,dSe="__lodash_hash_undefined__";function fSe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=uSe&&e===void 0?dSe:e,this}var hSe=fSe,ASe=YNe,mSe=JNe,pSe=sSe,gSe=cSe,xSe=hSe;function kx(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}kx.prototype.clear=ASe;kx.prototype.delete=mSe;kx.prototype.get=pSe;kx.prototype.has=gSe;kx.prototype.set=xSe;var vSe=kx;function bSe(){this.__data__=[],this.size=0}var ySe=bSe;function wSe(t,e){return t===e||t!==t&&e!==e}var jO=wSe,jSe=jO;function CSe(t,e){for(var r=t.length;r--;)if(jSe(t[r][0],e))return r;return-1}var YS=CSe,NSe=YS,SSe=Array.prototype,ESe=SSe.splice;function BSe(t){var e=this.__data__,r=NSe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ESe.call(e,r,1),--this.size,!0}var TSe=BSe,DSe=YS;function ISe(t){var e=this.__data__,r=DSe(e,t);return r<0?void 0:e[r][1]}var _Se=ISe,PSe=YS;function kSe(t){return PSe(this.__data__,t)>-1}var OSe=kSe,FSe=YS;function RSe(t,e){var r=this.__data__,n=FSe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var MSe=RSe,LSe=ySe,USe=TSe,$Se=_Se,HSe=OSe,QSe=MSe;function Ox(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ox.prototype.clear=LSe;Ox.prototype.delete=USe;Ox.prototype.get=$Se;Ox.prototype.has=HSe;Ox.prototype.set=QSe;var XS=Ox,zSe=ip,VSe=$u,WSe=zSe(VSe,"Map"),CO=WSe,wL=vSe,GSe=XS,qSe=CO;function KSe(){this.size=0,this.__data__={hash:new wL,map:new(qSe||GSe),string:new wL}}var YSe=KSe;function XSe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var JSe=XSe,ZSe=JSe;function eEe(t,e){var r=t.__data__;return ZSe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var JS=eEe,tEe=JS;function rEe(t){var e=tEe(this,t).delete(t);return this.size-=e?1:0,e}var nEe=rEe,sEe=JS;function aEe(t){return sEe(this,t).get(t)}var iEe=aEe,oEe=JS;function lEe(t){return oEe(this,t).has(t)}var cEe=lEe,uEe=JS;function dEe(t,e){var r=uEe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var fEe=dEe,hEe=YSe,AEe=nEe,mEe=iEe,pEe=cEe,gEe=fEe;function Fx(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Fx.prototype.clear=hEe;Fx.prototype.delete=AEe;Fx.prototype.get=mEe;Fx.prototype.has=pEe;Fx.prototype.set=gEe;var NO=Fx,yY=NO,xEe="Expected a function";function SO(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(xEe);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(SO.Cache||yY),r}SO.Cache=yY;var wY=SO;const vEe=ln(wY);var bEe=wY,yEe=500;function wEe(t){var e=bEe(t,function(n){return r.size===yEe&&r.clear(),n}),r=e.cache;return e}var jEe=wEe,CEe=jEe,NEe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SEe=/\\(\\)?/g,EEe=CEe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(NEe,function(r,n,a,i){e.push(a?i.replace(SEe,"$1"):n||r)}),e}),BEe=EEe;function TEe(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var EO=TEe,jL=kw,DEe=EO,IEe=Oo,_Ee=_x,CL=jL?jL.prototype:void 0,NL=CL?CL.toString:void 0;function jY(t){if(typeof t=="string")return t;if(IEe(t))return DEe(t,jY)+"";if(_Ee(t))return NL?NL.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var PEe=jY,kEe=PEe;function OEe(t){return t==null?"":kEe(t)}var CY=OEe,FEe=Oo,REe=yO,MEe=BEe,LEe=CY;function UEe(t,e){return FEe(t)?t:REe(t,e)?[t]:MEe(LEe(t))}var NY=UEe,$Ee=_x;function HEe(t){if(typeof t=="string"||$Ee(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ZS=HEe,QEe=NY,zEe=ZS;function VEe(t,e){e=QEe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[zEe(e[r++])];return r&&r==n?t:void 0}var BO=VEe,WEe=BO;function GEe(t,e,r){var n=t==null?void 0:WEe(t,e);return n===void 0?r:n}var SY=GEe;const nl=ln(SY);function qEe(t){return t==null}var KEe=qEe;const _r=ln(KEe);var YEe=uf,XEe=Oo,JEe=df,ZEe="[object String]";function e5e(t){return typeof t=="string"||!XEe(t)&&JEe(t)&&YEe(t)==ZEe}var t5e=e5e;const Rm=ln(t5e);var EY={exports:{}},_n={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO=Symbol.for("react.element"),DO=Symbol.for("react.portal"),eE=Symbol.for("react.fragment"),tE=Symbol.for("react.strict_mode"),rE=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),sE=Symbol.for("react.context"),r5e=Symbol.for("react.server_context"),aE=Symbol.for("react.forward_ref"),iE=Symbol.for("react.suspense"),oE=Symbol.for("react.suspense_list"),lE=Symbol.for("react.memo"),cE=Symbol.for("react.lazy"),n5e=Symbol.for("react.offscreen"),BY;BY=Symbol.for("react.module.reference");function zl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case TO:switch(t=t.type,t){case eE:case rE:case tE:case iE:case oE:return t;default:switch(t=t&&t.$$typeof,t){case r5e:case sE:case aE:case cE:case lE:case nE:return t;default:return e}}case DO:return e}}}_n.ContextConsumer=sE;_n.ContextProvider=nE;_n.Element=TO;_n.ForwardRef=aE;_n.Fragment=eE;_n.Lazy=cE;_n.Memo=lE;_n.Portal=DO;_n.Profiler=rE;_n.StrictMode=tE;_n.Suspense=iE;_n.SuspenseList=oE;_n.isAsyncMode=function(){return!1};_n.isConcurrentMode=function(){return!1};_n.isContextConsumer=function(t){return zl(t)===sE};_n.isContextProvider=function(t){return zl(t)===nE};_n.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===TO};_n.isForwardRef=function(t){return zl(t)===aE};_n.isFragment=function(t){return zl(t)===eE};_n.isLazy=function(t){return zl(t)===cE};_n.isMemo=function(t){return zl(t)===lE};_n.isPortal=function(t){return zl(t)===DO};_n.isProfiler=function(t){return zl(t)===rE};_n.isStrictMode=function(t){return zl(t)===tE};_n.isSuspense=function(t){return zl(t)===iE};_n.isSuspenseList=function(t){return zl(t)===oE};_n.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eE||t===rE||t===tE||t===iE||t===oE||t===n5e||typeof t=="object"&&t!==null&&(t.$$typeof===cE||t.$$typeof===lE||t.$$typeof===nE||t.$$typeof===sE||t.$$typeof===aE||t.$$typeof===BY||t.getModuleId!==void 0)};_n.typeOf=zl;EY.exports=_n;var s5e=EY.exports,a5e=uf,i5e=df,o5e="[object Number]";function l5e(t){return typeof t=="number"||i5e(t)&&a5e(t)==o5e}var TY=l5e;const c5e=ln(TY);var u5e=TY;function d5e(t){return u5e(t)&&t!=+t}var f5e=d5e;const Rx=ln(f5e);var qi=function(e){return e===0?0:e>0?1:-1},tm=function(e){return Rm(e)&&e.indexOf("%")===e.length-1},It=function(e){return c5e(e)&&!Rx(e)},ba=function(e){return It(e)||Rm(e)},h5e=0,Mx=function(e){var r=++h5e;return"".concat(e||"").concat(r)},Ki=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(e)&&!Rm(e))return n;var i;if(tm(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Rx(i)&&(i=n),a&&i>r&&(i=r),i},ch=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},A5e=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},yo=function(e,r){return It(e)&&It(r)?function(n){return e+n*(r-e)}:function(){return r}};function tC(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):nl(n,e))===r})}var m5e=function(e,r){return It(e)&&It(r)?e-r:Rm(e)&&Rm(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function t0(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function wD(t){"@babel/helpers - typeof";return wD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wD(t)}var p5e=["viewBox","children"],g5e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SL=["points","pathLength"],qB={svg:p5e,polygon:SL,polyline:SL},IO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],rC=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),!Px(n))return null;var a={};return Object.keys(n).forEach(function(i){IO.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},x5e=function(e,r,n){return function(a){return e(r,n,a),null}},Mm=function(e,r,n){if(!Px(e)||wD(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];IO.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=x5e(o,r,n))}),a},v5e=["children"],b5e=["children"];function EL(t,e){if(t==null)return{};var r=y5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function jD(t){"@babel/helpers - typeof";return jD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jD(t)}var BL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ld=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},TL=null,KB=null,_O=function t(e){if(e===TL&&Array.isArray(KB))return KB;var r=[];return y.Children.forEach(e,function(n){_r(n)||(s5e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),KB=r,TL=e,r};function Dl(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Ld(a)}):n=[Ld(e)],_O(t).forEach(function(a){var i=nl(a,"type.displayName")||nl(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function qo(t,e){var r=Dl(t,e);return r&&r[0]}var DL=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!It(n)||n<=0||!It(a)||a<=0)},w5e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],j5e=function(e){return e&&e.type&&Rm(e.type)&&w5e.indexOf(e.type)>=0},C5e=function(e){return e&&jD(e)==="object"&&"clipDot"in e},N5e=function(e,r,n,a){var i,o=(i=qB==null?void 0:qB[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!xr(e)&&(a&&o.includes(r)||g5e.includes(r))||n&&IO.includes(r)},cr=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(y.isValidElement(e)&&(a=e.props),!Px(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;N5e((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},CD=function t(e,r){if(e===r)return!0;var n=y.Children.count(e);if(n!==y.Children.count(r))return!1;if(n===0)return!0;if(n===1)return IL(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!IL(i,o))return!1}return!0},IL=function(e,r){if(_r(e)&&_r(r))return!0;if(!_r(e)&&!_r(r)){var n=e.props||{},a=n.children,i=EL(n,v5e),o=r.props||{},l=o.children,c=EL(o,b5e);return a&&l?t0(i,c)&&CD(a,l):!a&&!l?t0(i,c):!1}return!1},_L=function(e,r){var n=[],a={};return _O(e).forEach(function(i,o){if(j5e(i))n.push(i);else if(i){var l=Ld(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},S5e=function(e){var r=e&&e.type;return r&&BL[r]?BL[r]:null},E5e=function(e,r){return _O(r).indexOf(e)},B5e=["children","width","height","viewBox","className","style","title","desc"];function ND(){return ND=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ND.apply(this,arguments)}function T5e(t,e){if(t==null)return{};var r=D5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function SD(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,u=T5e(t,B5e),d=a||{width:r,height:n,x:0,y:0},f=qt("recharts-surface",i);return le.createElement("svg",ND({},cr(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),le.createElement("title",null,l),le.createElement("desc",null,c),e)}var I5e=["children","className"];function ED(){return ED=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ED.apply(this,arguments)}function _5e(t,e){if(t==null)return{};var r=P5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var rn=le.forwardRef(function(t,e){var r=t.children,n=t.className,a=_5e(t,I5e),i=qt("recharts-layer",n);return le.createElement("g",ED({className:i},cr(a,!0),{ref:e}),r)}),xc=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function k5e(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),r=r>a?a:r,r<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+e];return i}var O5e=k5e,F5e=O5e;function R5e(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:F5e(t,e,r)}var M5e=R5e,L5e="\\ud800-\\udfff",U5e="\\u0300-\\u036f",$5e="\\ufe20-\\ufe2f",H5e="\\u20d0-\\u20ff",Q5e=U5e+$5e+H5e,z5e="\\ufe0e\\ufe0f",V5e="\\u200d",W5e=RegExp("["+V5e+L5e+Q5e+z5e+"]");function G5e(t){return W5e.test(t)}var DY=G5e;function q5e(t){return t.split("")}var K5e=q5e,IY="\\ud800-\\udfff",Y5e="\\u0300-\\u036f",X5e="\\ufe20-\\ufe2f",J5e="\\u20d0-\\u20ff",Z5e=Y5e+X5e+J5e,eBe="\\ufe0e\\ufe0f",tBe="["+IY+"]",BD="["+Z5e+"]",TD="\\ud83c[\\udffb-\\udfff]",rBe="(?:"+BD+"|"+TD+")",_Y="[^"+IY+"]",PY="(?:\\ud83c[\\udde6-\\uddff]){2}",kY="[\\ud800-\\udbff][\\udc00-\\udfff]",nBe="\\u200d",OY=rBe+"?",FY="["+eBe+"]?",sBe="(?:"+nBe+"(?:"+[_Y,PY,kY].join("|")+")"+FY+OY+")*",aBe=FY+OY+sBe,iBe="(?:"+[_Y+BD+"?",BD,PY,kY,tBe].join("|")+")",oBe=RegExp(TD+"(?="+TD+")|"+iBe+aBe,"g");function lBe(t){return t.match(oBe)||[]}var cBe=lBe,uBe=K5e,dBe=DY,fBe=cBe;function hBe(t){return dBe(t)?fBe(t):uBe(t)}var ABe=hBe,mBe=M5e,pBe=DY,gBe=ABe,xBe=CY;function vBe(t){return function(e){e=xBe(e);var r=pBe(e)?gBe(e):void 0,n=r?r[0]:e.charAt(0),a=r?mBe(r,1).join(""):e.slice(1);return n[t]()+a}}var bBe=vBe,yBe=bBe,wBe=yBe("toUpperCase"),jBe=wBe;const uE=ln(jBe);function Gn(t){return function(){return t}}const RY=Math.cos,nC=Math.sin,Dc=Math.sqrt,sC=Math.PI,dE=2*sC,DD=Math.PI,ID=2*DD,MA=1e-6,CBe=ID-MA;function MY(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function NBe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return MY;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class SBe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?MY:NBe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>MA)if(!(Math.abs(f*c-u*d)>MA)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,g=h*h+m*m,x=Math.sqrt(p),v=Math.sqrt(A),b=i*Math.tan((DD-Math.acos((p+A-g)/(2*x*v)))/2),C=b/v,j=b/x;Math.abs(C-1)>MA&&this._append`L${e+C*d},${r+C*f}`,this._append`A${i},${i},0,0,${+(f*h>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>MA||Math.abs(this._y1-d)>MA)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%ID+ID),A>CBe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>MA&&this._append`A${n},${n},0,${+(A>=DD)},${f},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function PO(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new SBe(e)}function kO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function LY(t){this._context=t}LY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fE(t){return new LY(t)}function UY(t){return t[0]}function $Y(t){return t[1]}function HY(t,e){var r=Gn(!0),n=null,a=fE,i=null,o=PO(l);t=typeof t=="function"?t:t===void 0?UY:Gn(t),e=typeof e=="function"?e:e===void 0?$Y:Gn(e);function l(c){var u,d=(c=kO(c)).length,f,A=!1,h;for(n==null&&(i=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?i.lineStart():i.lineEnd()),A&&i.point(+t(f,u,c),+e(f,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Gn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Gn(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Gn(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Z1(t,e,r){var n=null,a=Gn(!0),i=null,o=fE,l=null,c=PO(u);t=typeof t=="function"?t:t===void 0?UY:Gn(+t),e=typeof e=="function"?e:Gn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?$Y:Gn(+r);function u(f){var A,h,m,p=(f=kO(f)).length,g,x=!1,v,b=new Array(p),C=new Array(p);for(i==null&&(l=o(v=c())),A=0;A<=p;++A){if(!(A<p&&a(g=f[A],A,f))===x)if(x=!x)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],C[m]);l.lineEnd(),l.areaEnd()}x&&(b[A]=+t(g,A,f),C[A]=+e(g,A,f),l.point(n?+n(g,A,f):b[A],r?+r(g,A,f):C[A]))}if(v)return l=null,v+""||null}function d(){return HY().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Gn(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Gn(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Gn(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Gn(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Gn(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class QY{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function EBe(t){return new QY(t,!0)}function BBe(t){return new QY(t,!1)}const OO={draw(t,e){const r=Dc(e/sC);t.moveTo(r,0),t.arc(0,0,r,0,dE)}},TBe={draw(t,e){const r=Dc(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},zY=Dc(1/3),DBe=zY*2,IBe={draw(t,e){const r=Dc(e/DBe),n=r*zY;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},_Be={draw(t,e){const r=Dc(e),n=-r/2;t.rect(n,n,r,r)}},PBe=.8908130915292852,VY=nC(sC/10)/nC(7*sC/10),kBe=nC(dE/10)*VY,OBe=-RY(dE/10)*VY,FBe={draw(t,e){const r=Dc(e*PBe),n=kBe*r,a=OBe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=dE*i/5,l=RY(o),c=nC(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},YB=Dc(3),RBe={draw(t,e){const r=-Dc(e/(YB*3));t.moveTo(0,r*2),t.lineTo(-YB*r,-r),t.lineTo(YB*r,-r),t.closePath()}},pl=-.5,gl=Dc(3)/2,_D=1/Dc(12),MBe=(_D/2+1)*3,LBe={draw(t,e){const r=Dc(e/MBe),n=r/2,a=r*_D,i=n,o=r*_D+r,l=-i,c=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(pl*n-gl*a,gl*n+pl*a),t.lineTo(pl*i-gl*o,gl*i+pl*o),t.lineTo(pl*l-gl*c,gl*l+pl*c),t.lineTo(pl*n+gl*a,pl*a-gl*n),t.lineTo(pl*i+gl*o,pl*o-gl*i),t.lineTo(pl*l+gl*c,pl*c-gl*l),t.closePath()}};function UBe(t,e){let r=null,n=PO(a);t=typeof t=="function"?t:Gn(t||OO),e=typeof e=="function"?e:Gn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Gn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Gn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function aC(){}function iC(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function WY(t){this._context=t}WY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $Be(t){return new WY(t)}function GY(t){this._context=t}GY.prototype={areaStart:aC,areaEnd:aC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:iC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HBe(t){return new GY(t)}function qY(t){this._context=t}qY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:iC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QBe(t){return new qY(t)}function KY(t){this._context=t}KY.prototype={areaStart:aC,areaEnd:aC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function zBe(t){return new KY(t)}function PL(t){return t<0?-1:1}function kL(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(PL(i)+PL(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function OL(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function XB(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,a+l*e,i-l,o-l*r,i,o)}function oC(t){this._context=t}oC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XB(this,this._t0,OL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,XB(this,OL(this,r=kL(this,t,e)),r);break;default:XB(this,this._t0,r=kL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function YY(t){this._context=new XY(t)}(YY.prototype=Object.create(oC.prototype)).point=function(t,e){oC.prototype.point.call(this,e,t)};function XY(t){this._context=t}XY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function VBe(t){return new oC(t)}function WBe(t){return new YY(t)}function JY(t){this._context=t}JY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=FL(t),a=FL(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function FL(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function GBe(t){return new JY(t)}function hE(t,e){this._context=t,this._t=e}hE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function qBe(t){return new hE(t,.5)}function KBe(t){return new hE(t,0)}function YBe(t){return new hE(t,1)}function B0(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,l=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function PD(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function XBe(t,e){return t[e]}function JBe(t){const e=[];return e.key=t,e}function ZBe(){var t=Gn([]),e=PD,r=B0,n=XBe;function a(i){var o=Array.from(t.apply(this,arguments),JBe),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=kO(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Gn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Gn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?PD:typeof i=="function"?i:Gn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??B0,a):r},a}function eTe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}B0(t,e)}}function tTe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}B0(t,e)}}function rTe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;h+=g-x}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,B0(t,e)}}function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}var nTe=["type","size","sizeType"];function kD(){return kD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kD.apply(this,arguments)}function RL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ML(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(r),!0).forEach(function(n){sTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sTe(t,e,r){return e=aTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aTe(t){var e=iTe(t,"string");return cy(e)=="symbol"?e:e+""}function iTe(t,e){if(cy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oTe(t,e){if(t==null)return{};var r=lTe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lTe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ZY={symbolCircle:OO,symbolCross:TBe,symbolDiamond:IBe,symbolSquare:_Be,symbolStar:FBe,symbolTriangle:RBe,symbolWye:LBe},cTe=Math.PI/180,uTe=function(e){var r="symbol".concat(uE(e));return ZY[r]||OO},dTe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*cTe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fTe=function(e,r){ZY["symbol".concat(uE(e))]=r},FO=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=oTe(e,nTe),u=ML(ML({},c),{},{type:n,size:i,sizeType:l}),d=function(){var g=uTe(n),x=UBe().type(g).size(dTe(i,l,n));return x()},f=u.className,A=u.cx,h=u.cy,m=cr(u,!0);return A===+A&&h===+h&&i===+i?le.createElement("path",kD({},m,{className:qt("recharts-symbols",f),transform:"translate(".concat(A,", ").concat(h,")"),d:d()})):null};FO.registerSymbol=fTe;function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function OD(){return OD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OD.apply(this,arguments)}function LL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hTe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(r),!0).forEach(function(n){uy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ATe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mTe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tX(n.key),n)}}function pTe(t,e,r){return e&&mTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gTe(t,e,r){return e=lC(e),xTe(t,eX()?Reflect.construct(e,r||[],lC(t).constructor):e.apply(t,r))}function xTe(t,e){if(e&&(T0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vTe(t)}function vTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!t})()}function lC(t){return lC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lC(t)}function bTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FD(t,e)}function FD(t,e){return FD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FD(t,e)}function uy(t,e,r){return e=tX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tX(t){var e=yTe(t,"string");return T0(e)=="symbol"?e:e+""}function yTe(t,e){if(T0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(T0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xl=32,RO=function(t){function e(){return ATe(this,e),gTe(this,e,arguments)}return bTe(e,t),pTe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=xl/2,o=xl/6,l=xl/3,c=n.inactive?a:n.color;if(n.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:xl,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(xl,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return le.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(xl/8,"h").concat(xl,"v").concat(xl*3/4,"h").concat(-xl,"z"),className:"recharts-legend-icon"});if(le.isValidElement(n.legendIcon)){var u=hTe({},n);return delete u.legendIcon,le.cloneElement(n.legendIcon,u)}return le.createElement(FO,{fill:c,cx:i,cy:i,size:xl,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:xl,height:xl},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},A={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,m){var p=h.formatter||c,g=qt(uy(uy({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var x=xr(h.value)?null:h.value;xc(!xr(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return le.createElement("li",OD({className:g,style:f,key:"legend-item-".concat(m)},Mm(n.props,h,m)),le.createElement(SD,{width:o,height:o,viewBox:d,style:A},n.renderIcon(h)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},p?p(x,h,m):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(y.PureComponent);uy(RO,"displayName","Legend");uy(RO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var wTe=XS;function jTe(){this.__data__=new wTe,this.size=0}var CTe=jTe;function NTe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var STe=NTe;function ETe(t){return this.__data__.get(t)}var BTe=ETe;function TTe(t){return this.__data__.has(t)}var DTe=TTe,ITe=XS,_Te=CO,PTe=NO,kTe=200;function OTe(t,e){var r=this.__data__;if(r instanceof ITe){var n=r.__data__;if(!_Te||n.length<kTe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new PTe(n)}return r.set(t,e),this.size=r.size,this}var FTe=OTe,RTe=XS,MTe=CTe,LTe=STe,UTe=BTe,$Te=DTe,HTe=FTe;function Lx(t){var e=this.__data__=new RTe(t);this.size=e.size}Lx.prototype.clear=MTe;Lx.prototype.delete=LTe;Lx.prototype.get=UTe;Lx.prototype.has=$Te;Lx.prototype.set=HTe;var rX=Lx,QTe="__lodash_hash_undefined__";function zTe(t){return this.__data__.set(t,QTe),this}var VTe=zTe;function WTe(t){return this.__data__.has(t)}var GTe=WTe,qTe=NO,KTe=VTe,YTe=GTe;function cC(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new qTe;++e<r;)this.add(t[e])}cC.prototype.add=cC.prototype.push=KTe;cC.prototype.has=YTe;var nX=cC;function XTe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var sX=XTe;function JTe(t,e){return t.has(e)}var aX=JTe,ZTe=nX,e4e=sX,t4e=aX,r4e=1,n4e=2;function s4e(t,e,r,n,a,i){var o=r&r4e,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(t),d=i.get(e);if(u&&d)return u==e&&d==t;var f=-1,A=!0,h=r&n4e?new ZTe:void 0;for(i.set(t,e),i.set(e,t);++f<l;){var m=t[f],p=e[f];if(n)var g=o?n(p,m,f,e,t,i):n(m,p,f,t,e,i);if(g!==void 0){if(g)continue;A=!1;break}if(h){if(!e4e(e,function(x,v){if(!t4e(h,v)&&(m===x||a(m,x,r,n,i)))return h.push(v)})){A=!1;break}}else if(!(m===p||a(m,p,r,n,i))){A=!1;break}}return i.delete(t),i.delete(e),A}var iX=s4e,a4e=$u,i4e=a4e.Uint8Array,o4e=i4e;function l4e(t){var e=-1,r=Array(t.size);return t.forEach(function(n,a){r[++e]=[a,n]}),r}var c4e=l4e;function u4e(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var MO=u4e,UL=kw,$L=o4e,d4e=jO,f4e=iX,h4e=c4e,A4e=MO,m4e=1,p4e=2,g4e="[object Boolean]",x4e="[object Date]",v4e="[object Error]",b4e="[object Map]",y4e="[object Number]",w4e="[object RegExp]",j4e="[object Set]",C4e="[object String]",N4e="[object Symbol]",S4e="[object ArrayBuffer]",E4e="[object DataView]",HL=UL?UL.prototype:void 0,JB=HL?HL.valueOf:void 0;function B4e(t,e,r,n,a,i,o){switch(r){case E4e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S4e:return!(t.byteLength!=e.byteLength||!i(new $L(t),new $L(e)));case g4e:case x4e:case y4e:return d4e(+t,+e);case v4e:return t.name==e.name&&t.message==e.message;case w4e:case C4e:return t==e+"";case b4e:var l=h4e;case j4e:var c=n&m4e;if(l||(l=A4e),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=p4e,o.set(t,e);var d=f4e(l(t),l(e),n,a,i,o);return o.delete(t),d;case N4e:if(JB)return JB.call(t)==JB.call(e)}return!1}var T4e=B4e;function D4e(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}var oX=D4e,I4e=oX,_4e=Oo;function P4e(t,e,r){var n=e(t);return _4e(t)?n:I4e(n,r(t))}var k4e=P4e;function O4e(t,e){for(var r=-1,n=t==null?0:t.length,a=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[a++]=o)}return i}var F4e=O4e;function R4e(){return[]}var M4e=R4e,L4e=F4e,U4e=M4e,$4e=Object.prototype,H4e=$4e.propertyIsEnumerable,QL=Object.getOwnPropertySymbols,Q4e=QL?function(t){return t==null?[]:(t=Object(t),L4e(QL(t),function(e){return H4e.call(t,e)}))}:U4e,z4e=Q4e;function V4e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var W4e=V4e,G4e=uf,q4e=df,K4e="[object Arguments]";function Y4e(t){return q4e(t)&&G4e(t)==K4e}var X4e=Y4e,zL=X4e,J4e=df,lX=Object.prototype,Z4e=lX.hasOwnProperty,eDe=lX.propertyIsEnumerable,tDe=zL(function(){return arguments}())?zL:function(t){return J4e(t)&&Z4e.call(t,"callee")&&!eDe.call(t,"callee")},LO=tDe,uC={exports:{}};function rDe(){return!1}var nDe=rDe;uC.exports;(function(t,e){var r=$u,n=nDe,a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(uC,uC.exports);var cX=uC.exports,sDe=9007199254740991,aDe=/^(?:0|[1-9]\d*)$/;function iDe(t,e){var r=typeof t;return e=e??sDe,!!e&&(r=="number"||r!="symbol"&&aDe.test(t))&&t>-1&&t%1==0&&t<e}var UO=iDe,oDe=9007199254740991;function lDe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=oDe}var $O=lDe,cDe=uf,uDe=$O,dDe=df,fDe="[object Arguments]",hDe="[object Array]",ADe="[object Boolean]",mDe="[object Date]",pDe="[object Error]",gDe="[object Function]",xDe="[object Map]",vDe="[object Number]",bDe="[object Object]",yDe="[object RegExp]",wDe="[object Set]",jDe="[object String]",CDe="[object WeakMap]",NDe="[object ArrayBuffer]",SDe="[object DataView]",EDe="[object Float32Array]",BDe="[object Float64Array]",TDe="[object Int8Array]",DDe="[object Int16Array]",IDe="[object Int32Array]",_De="[object Uint8Array]",PDe="[object Uint8ClampedArray]",kDe="[object Uint16Array]",ODe="[object Uint32Array]",ns={};ns[EDe]=ns[BDe]=ns[TDe]=ns[DDe]=ns[IDe]=ns[_De]=ns[PDe]=ns[kDe]=ns[ODe]=!0;ns[fDe]=ns[hDe]=ns[NDe]=ns[ADe]=ns[SDe]=ns[mDe]=ns[pDe]=ns[gDe]=ns[xDe]=ns[vDe]=ns[bDe]=ns[yDe]=ns[wDe]=ns[jDe]=ns[CDe]=!1;function FDe(t){return dDe(t)&&uDe(t.length)&&!!ns[cDe(t)]}var RDe=FDe;function MDe(t){return function(e){return t(e)}}var uX=MDe,dC={exports:{}};dC.exports;(function(t,e){var r=xY,n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(dC,dC.exports);var LDe=dC.exports,UDe=RDe,$De=uX,VL=LDe,WL=VL&&VL.isTypedArray,HDe=WL?$De(WL):UDe,dX=HDe,QDe=W4e,zDe=LO,VDe=Oo,WDe=cX,GDe=UO,qDe=dX,KDe=Object.prototype,YDe=KDe.hasOwnProperty;function XDe(t,e){var r=VDe(t),n=!r&&zDe(t),a=!r&&!n&&WDe(t),i=!r&&!n&&!a&&qDe(t),o=r||n||a||i,l=o?QDe(t.length,String):[],c=l.length;for(var u in t)(e||YDe.call(t,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||GDe(u,c)))&&l.push(u);return l}var JDe=XDe,ZDe=Object.prototype;function eIe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ZDe;return t===r}var tIe=eIe;function rIe(t,e){return function(r){return t(e(r))}}var fX=rIe,nIe=fX,sIe=nIe(Object.keys,Object),aIe=sIe,iIe=tIe,oIe=aIe,lIe=Object.prototype,cIe=lIe.hasOwnProperty;function uIe(t){if(!iIe(t))return oIe(t);var e=[];for(var r in Object(t))cIe.call(t,r)&&r!="constructor"&&e.push(r);return e}var dIe=uIe,fIe=wO,hIe=$O;function AIe(t){return t!=null&&hIe(t.length)&&!fIe(t)}var Ow=AIe,mIe=JDe,pIe=dIe,gIe=Ow;function xIe(t){return gIe(t)?mIe(t):pIe(t)}var AE=xIe,vIe=k4e,bIe=z4e,yIe=AE;function wIe(t){return vIe(t,yIe,bIe)}var jIe=wIe,GL=jIe,CIe=1,NIe=Object.prototype,SIe=NIe.hasOwnProperty;function EIe(t,e,r,n,a,i){var o=r&CIe,l=GL(t),c=l.length,u=GL(e),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var A=l[f];if(!(o?A in e:SIe.call(e,A)))return!1}var h=i.get(t),m=i.get(e);if(h&&m)return h==e&&m==t;var p=!0;i.set(t,e),i.set(e,t);for(var g=o;++f<c;){A=l[f];var x=t[A],v=e[A];if(n)var b=o?n(v,x,A,e,t,i):n(x,v,A,t,e,i);if(!(b===void 0?x===v||a(x,v,r,n,i):b)){p=!1;break}g||(g=A=="constructor")}if(p&&!g){var C=t.constructor,j=e.constructor;C!=j&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(t),i.delete(e),p}var BIe=EIe,TIe=ip,DIe=$u,IIe=TIe(DIe,"DataView"),_Ie=IIe,PIe=ip,kIe=$u,OIe=PIe(kIe,"Promise"),FIe=OIe,RIe=ip,MIe=$u,LIe=RIe(MIe,"Set"),hX=LIe,UIe=ip,$Ie=$u,HIe=UIe($Ie,"WeakMap"),QIe=HIe,RD=_Ie,MD=CO,LD=FIe,UD=hX,$D=QIe,AX=uf,Ux=bY,qL="[object Map]",zIe="[object Object]",KL="[object Promise]",YL="[object Set]",XL="[object WeakMap]",JL="[object DataView]",VIe=Ux(RD),WIe=Ux(MD),GIe=Ux(LD),qIe=Ux(UD),KIe=Ux($D),LA=AX;(RD&&LA(new RD(new ArrayBuffer(1)))!=JL||MD&&LA(new MD)!=qL||LD&&LA(LD.resolve())!=KL||UD&&LA(new UD)!=YL||$D&&LA(new $D)!=XL)&&(LA=function(t){var e=AX(t),r=e==zIe?t.constructor:void 0,n=r?Ux(r):"";if(n)switch(n){case VIe:return JL;case WIe:return qL;case GIe:return KL;case qIe:return YL;case KIe:return XL}return e});var YIe=LA,ZB=rX,XIe=iX,JIe=T4e,ZIe=BIe,ZL=YIe,eU=Oo,tU=cX,e_e=dX,t_e=1,rU="[object Arguments]",nU="[object Array]",ej="[object Object]",r_e=Object.prototype,sU=r_e.hasOwnProperty;function n_e(t,e,r,n,a,i){var o=eU(t),l=eU(e),c=o?nU:ZL(t),u=l?nU:ZL(e);c=c==rU?ej:c,u=u==rU?ej:u;var d=c==ej,f=u==ej,A=c==u;if(A&&tU(t)){if(!tU(e))return!1;o=!0,d=!1}if(A&&!d)return i||(i=new ZB),o||e_e(t)?XIe(t,e,r,n,a,i):JIe(t,e,c,r,n,a,i);if(!(r&t_e)){var h=d&&sU.call(t,"__wrapped__"),m=f&&sU.call(e,"__wrapped__");if(h||m){var p=h?t.value():t,g=m?e.value():e;return i||(i=new ZB),a(p,g,r,n,i)}}return A?(i||(i=new ZB),ZIe(t,e,r,n,a,i)):!1}var s_e=n_e,a_e=s_e,aU=df;function mX(t,e,r,n,a){return t===e?!0:t==null||e==null||!aU(t)&&!aU(e)?t!==t&&e!==e:a_e(t,e,r,n,mX,a)}var HO=mX,i_e=rX,o_e=HO,l_e=1,c_e=2;function u_e(t,e,r,n){var a=r.length,i=a,o=!n;if(t==null)return!i;for(t=Object(t);a--;){var l=r[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<i;){l=r[a];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var f=new i_e;if(n)var A=n(u,d,c,t,e,f);if(!(A===void 0?o_e(d,u,l_e|c_e,n,f):A))return!1}}return!0}var d_e=u_e,f_e=qh;function h_e(t){return t===t&&!f_e(t)}var pX=h_e,A_e=pX,m_e=AE;function p_e(t){for(var e=m_e(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,A_e(a)]}return e}var g_e=p_e;function x_e(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var gX=x_e,v_e=d_e,b_e=g_e,y_e=gX;function w_e(t){var e=b_e(t);return e.length==1&&e[0][2]?y_e(e[0][0],e[0][1]):function(r){return r===t||v_e(r,t,e)}}var j_e=w_e;function C_e(t,e){return t!=null&&e in Object(t)}var N_e=C_e,S_e=NY,E_e=LO,B_e=Oo,T_e=UO,D_e=$O,I_e=ZS;function __e(t,e,r){e=S_e(e,t);for(var n=-1,a=e.length,i=!1;++n<a;){var o=I_e(e[n]);if(!(i=t!=null&&r(t,o)))break;t=t[o]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&D_e(a)&&T_e(o,a)&&(B_e(t)||E_e(t)))}var P_e=__e,k_e=N_e,O_e=P_e;function F_e(t,e){return t!=null&&O_e(t,e,k_e)}var R_e=F_e,M_e=HO,L_e=SY,U_e=R_e,$_e=yO,H_e=pX,Q_e=gX,z_e=ZS,V_e=1,W_e=2;function G_e(t,e){return $_e(t)&&H_e(e)?Q_e(z_e(t),e):function(r){var n=L_e(r,t);return n===void 0&&n===e?U_e(r,t):M_e(e,n,V_e|W_e)}}var q_e=G_e;function K_e(t){return t}var $x=K_e;function Y_e(t){return function(e){return e==null?void 0:e[t]}}var X_e=Y_e,J_e=BO;function Z_e(t){return function(e){return J_e(e,t)}}var ePe=Z_e,tPe=X_e,rPe=ePe,nPe=yO,sPe=ZS;function aPe(t){return nPe(t)?tPe(sPe(t)):rPe(t)}var iPe=aPe,oPe=j_e,lPe=q_e,cPe=$x,uPe=Oo,dPe=iPe;function fPe(t){return typeof t=="function"?t:t==null?cPe:typeof t=="object"?uPe(t)?lPe(t[0],t[1]):oPe(t):dPe(t)}var Hu=fPe;function hPe(t,e,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(e(t[i],i,t))return i;return-1}var xX=hPe;function APe(t){return t!==t}var mPe=APe;function pPe(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}var gPe=pPe,xPe=xX,vPe=mPe,bPe=gPe;function yPe(t,e,r){return e===e?bPe(t,e,r):xPe(t,vPe,r)}var wPe=yPe,jPe=wPe;function CPe(t,e){var r=t==null?0:t.length;return!!r&&jPe(t,e,0)>-1}var NPe=CPe;function SPe(t,e,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1}var EPe=SPe;function BPe(){}var TPe=BPe,eT=hX,DPe=TPe,IPe=MO,_Pe=1/0,PPe=eT&&1/IPe(new eT([,-0]))[1]==_Pe?function(t){return new eT(t)}:DPe,kPe=PPe,OPe=nX,FPe=NPe,RPe=EPe,MPe=aX,LPe=kPe,UPe=MO,$Pe=200;function HPe(t,e,r){var n=-1,a=FPe,i=t.length,o=!0,l=[],c=l;if(r)o=!1,a=RPe;else if(i>=$Pe){var u=e?null:LPe(t);if(u)return UPe(u);o=!1,a=MPe,c=new OPe}else c=e?[]:l;e:for(;++n<i;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var A=c.length;A--;)if(c[A]===f)continue e;e&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var QPe=HPe,zPe=Hu,VPe=QPe;function WPe(t,e){return t&&t.length?VPe(t,zPe(e)):[]}var GPe=WPe;const iU=ln(GPe);function vX(t,e,r){return e===!0?iU(t,r):xr(e)?iU(t,e):t}function D0(t){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}var qPe=["ref"];function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){mE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yX(n.key),n)}}function YPe(t,e,r){return e&&lU(t.prototype,e),r&&lU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XPe(t,e,r){return e=fC(e),JPe(t,bX()?Reflect.construct(e,r||[],fC(t).constructor):e.apply(t,r))}function JPe(t,e){if(e&&(D0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZPe(t)}function ZPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!t})()}function fC(t){return fC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fC(t)}function eke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HD(t,e)}function HD(t,e){return HD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HD(t,e)}function mE(t,e,r){return e=yX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yX(t){var e=tke(t,"string");return D0(e)=="symbol"?e:e+""}function tke(t,e){if(D0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(D0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function rke(t,e){if(t==null)return{};var r=nke(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nke(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ske(t){return t.value}function ake(t,e){if(le.isValidElement(t))return le.cloneElement(t,e);if(typeof t=="function")return le.createElement(t,e);e.ref;var r=rke(e,qPe);return le.createElement(RO,r)}var cU=1,vc=function(t){function e(){var r;KPe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=XPe(this,e,[].concat(a)),mE(r,"lastBoundingBox",{width:-1,height:-1}),r}return eke(e,t),YPe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>cU||Math.abs(a.height-this.lastBoundingBox.height)>cU)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,A;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var m=this.getBBoxSnapshot();A={top:((d||0)-m.height)/2}}else A=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fd(fd({},f),A)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=fd(fd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return le.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},ake(i,fd(fd({},this.props),{},{payload:vX(d,u,ske)})))}}],[{key:"getWithHeight",value:function(n,a){var i=fd(fd({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&It(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(y.PureComponent);mE(vc,"displayName","Legend");mE(vc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uU=kw,ike=LO,oke=Oo,dU=uU?uU.isConcatSpreadable:void 0;function lke(t){return oke(t)||ike(t)||!!(dU&&t&&t[dU])}var cke=lke,uke=oX,dke=cke;function wX(t,e,r,n,a){var i=-1,o=t.length;for(r||(r=dke),a||(a=[]);++i<o;){var l=t[i];e>0&&r(l)?e>1?wX(l,e-1,r,n,a):uke(a,l):n||(a[a.length]=l)}return a}var jX=wX;function fke(t){return function(e,r,n){for(var a=-1,i=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++a];if(r(i[c],c,i)===!1)break}return e}}var hke=fke,Ake=hke,mke=Ake(),pke=mke,gke=pke,xke=AE;function vke(t,e){return t&&gke(t,e,xke)}var CX=vke,bke=Ow;function yke(t,e){return function(r,n){if(r==null)return r;if(!bke(r))return t(r,n);for(var a=r.length,i=e?a:-1,o=Object(r);(e?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var wke=yke,jke=CX,Cke=wke,Nke=Cke(jke),QO=Nke,Ske=QO,Eke=Ow;function Bke(t,e){var r=-1,n=Eke(t)?Array(t.length):[];return Ske(t,function(a,i,o){n[++r]=e(a,i,o)}),n}var NX=Bke;function Tke(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Dke=Tke,fU=_x;function Ike(t,e){if(t!==e){var r=t!==void 0,n=t===null,a=t===t,i=fU(t),o=e!==void 0,l=e===null,c=e===e,u=fU(e);if(!l&&!u&&!i&&t>e||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&t<e||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var _ke=Ike,Pke=_ke;function kke(t,e,r){for(var n=-1,a=t.criteria,i=e.criteria,o=a.length,l=r.length;++n<o;){var c=Pke(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var Oke=kke,tT=EO,Fke=BO,Rke=Hu,Mke=NX,Lke=Dke,Uke=uX,$ke=Oke,Hke=$x,Qke=Oo;function zke(t,e,r){e.length?e=tT(e,function(i){return Qke(i)?function(o){return Fke(o,i.length===1?i[0]:i)}:i}):e=[Hke];var n=-1;e=tT(e,Uke(Rke));var a=Mke(t,function(i,o,l){var c=tT(e,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Lke(a,function(i,o){return $ke(i,o,r)})}var Vke=zke;function Wke(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Gke=Wke,qke=Gke,hU=Math.max;function Kke(t,e,r){return e=hU(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,i=hU(n.length-e,0),o=Array(i);++a<i;)o[a]=n[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=n[a];return l[e]=r(o),qke(t,this,l)}}var Yke=Kke;function Xke(t){return function(){return t}}var Jke=Xke,Zke=ip,eOe=function(){try{var t=Zke(Object,"defineProperty");return t({},"",{}),t}catch{}}(),SX=eOe,tOe=Jke,AU=SX,rOe=$x,nOe=AU?function(t,e){return AU(t,"toString",{configurable:!0,enumerable:!1,value:tOe(e),writable:!0})}:rOe,sOe=nOe,aOe=800,iOe=16,oOe=Date.now;function lOe(t){var e=0,r=0;return function(){var n=oOe(),a=iOe-(n-r);if(r=n,a>0){if(++e>=aOe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var cOe=lOe,uOe=sOe,dOe=cOe,fOe=dOe(uOe),hOe=fOe,AOe=$x,mOe=Yke,pOe=hOe;function gOe(t,e){return pOe(mOe(t,e,AOe),t+"")}var xOe=gOe,vOe=jO,bOe=Ow,yOe=UO,wOe=qh;function jOe(t,e,r){if(!wOe(r))return!1;var n=typeof e;return(n=="number"?bOe(r)&&yOe(e,r.length):n=="string"&&e in r)?vOe(r[e],t):!1}var pE=jOe,COe=jX,NOe=Vke,SOe=xOe,mU=pE,EOe=SOe(function(t,e){if(t==null)return[];var r=e.length;return r>1&&mU(t,e[0],e[1])?e=[]:r>2&&mU(e[0],e[1],e[2])&&(e=[e[0]]),NOe(t,COe(e,1),[])}),BOe=EOe;const zO=ln(BOe);function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function QD(){return QD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QD.apply(this,arguments)}function TOe(t,e){return POe(t)||_Oe(t,e)||IOe(t,e)||DOe()}function DOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IOe(t,e){if(t){if(typeof t=="string")return pU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pU(t,e)}}function pU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _Oe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function POe(t){if(Array.isArray(t))return t}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){kOe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kOe(t,e,r){return e=OOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OOe(t){var e=FOe(t,"string");return dy(e)=="symbol"?e:e+""}function FOe(t,e){if(dy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ROe(t){return Array.isArray(t)&&ba(t[0])&&ba(t[1])?t.join(" ~ "):t}var MOe=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,A=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,p=e.label,g=e.labelFormatter,x=e.accessibilityLayer,v=x===void 0?!1:x,b=function(){if(d&&d.length){var S={padding:0,margin:0},F=(A?zO(d,A):d).map(function(M,R){if(M.type==="none")return null;var U=rT({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),z=M.formatter||f||ROe,Q=M.value,H=M.name,q=Q,X=H;if(z&&q!=null&&X!=null){var $=z(Q,H,M,R,d);if(Array.isArray($)){var K=TOe($,2);q=K[0],X=K[1]}else q=$}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:U},ba(X)?le.createElement("span",{className:"recharts-tooltip-item-name"},X):null,ba(X)?le.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,le.createElement("span",{className:"recharts-tooltip-item-value"},q),le.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:S},F)}return null},C=rT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=rT({margin:0},u),w=!_r(p),N=w?p:"",E=qt("recharts-default-tooltip",h),_=qt("recharts-tooltip-label",m);w&&g&&d!==void 0&&d!==null&&(N=g(p,d));var k=v?{role:"status","aria-live":"assertive"}:{};return le.createElement("div",QD({className:E,style:C},k),le.createElement("p",{className:_,style:j},le.isValidElement(N)?N:"".concat(N)),b())};function fy(t){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(t)}function tj(t,e,r){return e=LOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LOe(t){var e=UOe(t,"string");return fy(e)=="symbol"?e:e+""}function UOe(t,e){if(fy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $v="recharts-tooltip-wrapper",$Oe={visibility:"hidden"};function HOe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return qt($v,tj(tj(tj(tj({},"".concat($v,"-right"),It(r)&&e&&It(e.x)&&r>=e.x),"".concat($v,"-left"),It(r)&&e&&It(e.x)&&r<e.x),"".concat($v,"-bottom"),It(n)&&e&&It(e.y)&&n>=e.y),"".concat($v,"-top"),It(n)&&e&&It(e.y)&&n<e.y))}function xU(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(i&&It(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(e[n])return o[n]?d:f;if(o[n]){var A=d,h=c[n];return A<h?Math.max(f,c[n]):Math.max(d,c[n])}var m=f+l,p=c[n]+u;return m>p?Math.max(d,c[n]):Math.max(f,c[n])}function QOe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function zOe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=xU({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=xU({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=QOe({translateX:d,translateY:f,useTranslate3d:l})):u=$Oe,{cssProperties:u,cssClasses:HOe({translateX:d,translateY:f,coordinate:r})}}function I0(t){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I0(t)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){VD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WOe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BX(n.key),n)}}function GOe(t,e,r){return e&&WOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qOe(t,e,r){return e=hC(e),KOe(t,EX()?Reflect.construct(e,r||[],hC(t).constructor):e.apply(t,r))}function KOe(t,e){if(e&&(I0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YOe(t)}function YOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!t})()}function hC(t){return hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hC(t)}function XOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zD(t,e)}function zD(t,e){return zD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zD(t,e)}function VD(t,e,r){return e=BX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BX(t){var e=JOe(t,"string");return I0(e)=="symbol"?e:e+""}function JOe(t,e){if(I0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(I0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yU=1,ZOe=function(t){function e(){var r;VOe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=qOe(this,e,[].concat(a)),VD(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),VD(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return XOe(e,t),GOe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>yU||Math.abs(n.height-this.state.lastBoundingBox.height)>yU)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,A=a.isAnimationActive,h=a.offset,m=a.position,p=a.reverseDirection,g=a.useTranslate3d,x=a.viewBox,v=a.wrapperStyle,b=zOe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:x}),C=b.cssClasses,j=b.cssProperties,w=bU(bU({transition:A&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return le.createElement("div",{tabIndex:-1,className:C,style:w,ref:function(E){n.wrapperNode=E}},u)}}])}(y.PureComponent),e3e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},op={isSsr:e3e()};function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){VO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DX(n.key),n)}}function n3e(t,e,r){return e&&r3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s3e(t,e,r){return e=AC(e),a3e(t,TX()?Reflect.construct(e,r||[],AC(t).constructor):e.apply(t,r))}function a3e(t,e){if(e&&(_0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i3e(t)}function i3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TX=function(){return!!t})()}function AC(t){return AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},AC(t)}function o3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WD(t,e)}function WD(t,e){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WD(t,e)}function VO(t,e,r){return e=DX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DX(t){var e=l3e(t,"string");return _0(e)=="symbol"?e:e+""}function l3e(t,e){if(_0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function c3e(t){return t.dataKey}function u3e(t,e){return le.isValidElement(t)?le.cloneElement(t,e):typeof t=="function"?le.createElement(t,e):le.createElement(MOe,e)}var $i=function(t){function e(){return t3e(this,e),s3e(this,e,arguments)}return o3e(e,t),n3e(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,A=a.isAnimationActive,h=a.offset,m=a.payload,p=a.payloadUniqBy,g=a.position,x=a.reverseDirection,v=a.useTranslate3d,b=a.viewBox,C=a.wrapperStyle,j=m??[];f&&j.length&&(j=vX(m.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),p,c3e));var w=j.length>0;return le.createElement(ZOe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:A,active:i,coordinate:d,hasPayload:w,offset:h,position:g,reverseDirection:x,useTranslate3d:v,viewBox:b,wrapperStyle:C},u3e(u,jU(jU({},this.props),{},{payload:j})))}}])}(y.PureComponent);VO($i,"displayName","Tooltip");VO($i,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!op.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var d3e=$u,f3e=function(){return d3e.Date.now()},h3e=f3e,A3e=/\s/;function m3e(t){for(var e=t.length;e--&&A3e.test(t.charAt(e)););return e}var p3e=m3e,g3e=p3e,x3e=/^\s+/;function v3e(t){return t&&t.slice(0,g3e(t)+1).replace(x3e,"")}var b3e=v3e,y3e=b3e,CU=qh,w3e=_x,NU=NaN,j3e=/^[-+]0x[0-9a-f]+$/i,C3e=/^0b[01]+$/i,N3e=/^0o[0-7]+$/i,S3e=parseInt;function E3e(t){if(typeof t=="number")return t;if(w3e(t))return NU;if(CU(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=CU(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=y3e(t);var r=C3e.test(t);return r||N3e.test(t)?S3e(t.slice(2),r?2:8):j3e.test(t)?NU:+t}var IX=E3e,B3e=qh,nT=h3e,SU=IX,T3e="Expected a function",D3e=Math.max,I3e=Math.min;function _3e(t,e,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,A=!0;if(typeof t!="function")throw new TypeError(T3e);e=SU(e)||0,B3e(r)&&(d=!!r.leading,f="maxWait"in r,i=f?D3e(SU(r.maxWait)||0,e):i,A="trailing"in r?!!r.trailing:A);function h(w){var N=n,E=a;return n=a=void 0,u=w,o=t.apply(E,N),o}function m(w){return u=w,l=setTimeout(x,e),d?h(w):o}function p(w){var N=w-c,E=w-u,_=e-N;return f?I3e(_,i-E):_}function g(w){var N=w-c,E=w-u;return c===void 0||N>=e||N<0||f&&E>=i}function x(){var w=nT();if(g(w))return v(w);l=setTimeout(x,p(w))}function v(w){return l=void 0,A&&n?h(w):(n=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function C(){return l===void 0?o:v(nT())}function j(){var w=nT(),N=g(w);if(n=arguments,a=this,c=w,N){if(l===void 0)return m(c);if(f)return clearTimeout(l),l=setTimeout(x,e),h(c)}return l===void 0&&(l=setTimeout(x,e)),o}return j.cancel=b,j.flush=C,j}var P3e=_3e,k3e=P3e,O3e=qh,F3e="Expected a function";function R3e(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(F3e);return O3e(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),k3e(t,e,{leading:n,maxWait:e,trailing:a})}var M3e=R3e;const _X=ln(M3e);function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){L3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L3e(t,e,r){return e=U3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U3e(t){var e=$3e(t,"string");return hy(e)=="symbol"?e:e+""}function $3e(t,e){if(hy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H3e(t,e){return W3e(t)||V3e(t,e)||z3e(t,e)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z3e(t,e){if(t){if(typeof t=="string")return BU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BU(t,e)}}function BU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function V3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function W3e(t){if(Array.isArray(t))return t}var r0=y.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,A=t.maxHeight,h=t.children,m=t.debounce,p=m===void 0?0:m,g=t.id,x=t.className,v=t.onResize,b=t.style,C=b===void 0?{}:b,j=y.useRef(null),w=y.useRef();w.current=v,y.useImperativeHandle(e,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=y.useState({containerWidth:a.width,containerHeight:a.height}),E=H3e(N,2),_=E[0],k=E[1],D=y.useCallback(function(F,M){k(function(R){var U=Math.round(F),z=Math.round(M);return R.containerWidth===U&&R.containerHeight===z?R:{containerWidth:U,containerHeight:z}})},[]);y.useEffect(function(){var F=function(H){var q,X=H[0].contentRect,$=X.width,K=X.height;D($,K),(q=w.current)===null||q===void 0||q.call(w,$,K)};p>0&&(F=_X(F,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(F),R=j.current.getBoundingClientRect(),U=R.width,z=R.height;return D(U,z),M.observe(j.current),function(){M.disconnect()}},[D,p]);var S=y.useMemo(function(){var F=_.containerWidth,M=_.containerHeight;if(F<0||M<0)return null;xc(tm(o)||tm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),xc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=tm(o)?F:o,U=tm(c)?M:c;r&&r>0&&(R?U=R/r:U&&(R=U*r),A&&U>A&&(U=A)),xc(R>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,U,o,c,d,f,r);var z=!Array.isArray(h)&&Ld(h.type).endsWith("Chart");return le.Children.map(h,function(Q){return le.isValidElement(Q)?y.cloneElement(Q,rj({width:R,height:U},z?{style:rj({height:"100%",width:"100%",maxHeight:U,maxWidth:R},Q.props.style)}:{})):Q})},[r,h,c,A,f,d,_,o]);return le.createElement("div",{id:g?"".concat(g):void 0,className:qt("recharts-responsive-container",x),style:rj(rj({},C),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:A}),ref:j},S)}),P0=function(e){return null};P0.displayName="Cell";function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){G3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G3e(t,e,r){return e=q3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q3e(t){var e=K3e(t,"string");return Ay(e)=="symbol"?e:e+""}function K3e(t,e){if(Ay(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ay(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jg={widthCache:{},cacheCount:0},Y3e=2e3,X3e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DU="recharts_measurement_span";function J3e(t){var e=GD({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var yb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||op.isSsr)return{width:0,height:0};var n=J3e(r),a=JSON.stringify({text:e,copyStyle:n});if(jg.widthCache[a])return jg.widthCache[a];try{var i=document.getElementById(DU);i||(i=document.createElement("span"),i.setAttribute("id",DU),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=GD(GD({},X3e),n);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return jg.widthCache[a]=c,++jg.cacheCount>Y3e&&(jg.cacheCount=0,jg.widthCache={}),c}catch{return{width:0,height:0}}},Z3e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function mC(t,e){return nFe(t)||rFe(t,e)||tFe(t,e)||eFe()}function eFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tFe(t,e){if(t){if(typeof t=="string")return IU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IU(t,e)}}function IU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rFe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nFe(t){if(Array.isArray(t))return t}function sFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iFe(n.key),n)}}function aFe(t,e,r){return e&&_U(t.prototype,e),r&&_U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function iFe(t){var e=oFe(t,"string");return my(e)=="symbol"?e:e+""}function oFe(t,e){if(my(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(my(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var PU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lFe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cFe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uFe=Object.keys(PX),$g="NaN";function dFe(t,e){return t*PX[e]}var nj=function(){function t(e,r){sFe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!lFe.test(r)&&(this.num=NaN,this.unit=""),uFe.includes(r)&&(this.num=dFe(e,r),this.unit="px")}return aFe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=cFe.exec(r))!==null&&n!==void 0?n:[],i=mC(a,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])}();function kX(t){if(t.includes($g))return $g;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=PU.exec(e))!==null&&r!==void 0?r:[],a=mC(n,4),i=a[1],o=a[2],l=a[3],c=nj.parse(i??""),u=nj.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return $g;e=e.replace(PU,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,A=(f=kU.exec(e))!==null&&f!==void 0?f:[],h=mC(A,4),m=h[1],p=h[2],g=h[3],x=nj.parse(m??""),v=nj.parse(g??""),b=p==="+"?x.add(v):x.subtract(v);if(b.isNaN())return $g;e=e.replace(kU,b.toString())}return e}var OU=/\(([^()]*)\)/;function fFe(t){for(var e=t;e.includes("(");){var r=OU.exec(e),n=mC(r,2),a=n[1];e=e.replace(OU,kX(a))}return e}function hFe(t){var e=t.replace(/\s+/g,"");return e=fFe(e),e=kX(e),e}function AFe(t){try{return hFe(t)}catch{return $g}}function sT(t){var e=AFe(t.slice(5,-1));return e===$g?"":e}var mFe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pFe=["dx","dy","angle","className","breakAll"];function qD(){return qD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qD.apply(this,arguments)}function FU(t,e){if(t==null)return{};var r=gFe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gFe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function RU(t,e){return yFe(t)||bFe(t,e)||vFe(t,e)||xFe()}function xFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vFe(t,e){if(t){if(typeof t=="string")return MU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MU(t,e)}}function MU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bFe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function yFe(t){if(Array.isArray(t))return t}var OX=/[ \f\n\r\t\v\u2028\u2029]+/,FX=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];_r(r)||(n?i=r.toString().split(""):i=r.toString().split(OX));var o=i.map(function(c){return{word:c,width:yb(c,a).width}}),l=n?0:yb(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},wFe=function(e,r,n,a,i){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=It(o),f=l,A=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(U,z){var Q=z.word,H=z.width,q=U[U.length-1];if(q&&(a==null||i||q.width+H+n<Number(a)))q.words.push(Q),q.width+=H+n;else{var X={words:[Q],width:H};U.push(X)}return U},[])},h=A(r),m=function(R){return R.reduce(function(U,z){return U.width>z.width?U:z})};if(!d)return h;for(var p="…",g=function(R){var U=f.slice(0,R),z=FX({breakAll:u,style:c,children:U+p}).wordsWithComputedWidth,Q=A(z),H=Q.length>o||m(Q).width>Number(a);return[H,Q]},x=0,v=f.length-1,b=0,C;x<=v&&b<=f.length-1;){var j=Math.floor((x+v)/2),w=j-1,N=g(w),E=RU(N,2),_=E[0],k=E[1],D=g(j),S=RU(D,1),F=S[0];if(!_&&!F&&(x=j+1),_&&F&&(v=j-1),!_&&F){C=k;break}b++}return C||h},LU=function(e){var r=_r(e)?[]:e.toString().split(OX);return[{words:r}]},jFe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!op.isSsr){var c,u,d=FX({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,A=d.spaceWidth;c=f,u=A}else return LU(a);return wFe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return LU(a)},UU="#808080",Lm=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,A=e.textAnchor,h=A===void 0?"start":A,m=e.verticalAnchor,p=m===void 0?"end":m,g=e.fill,x=g===void 0?UU:g,v=FU(e,mFe),b=y.useMemo(function(){return jFe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),C=v.dx,j=v.dy,w=v.angle,N=v.className,E=v.breakAll,_=FU(v,pFe);if(!ba(n)||!ba(i))return null;var k=n+(It(C)?C:0),D=i+(It(j)?j:0),S;switch(p){case"start":S=sT("calc(".concat(u,")"));break;case"middle":S=sT("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:S=sT("calc(".concat(b.length-1," * -").concat(l,")"));break}var F=[];if(f){var M=b[0].width,R=v.width;F.push("scale(".concat((It(R)?R/M:1)/M,")"))}return w&&F.push("rotate(".concat(w,", ").concat(k,", ").concat(D,")")),F.length&&(_.transform=F.join(" ")),le.createElement("text",qD({},cr(_,!0),{x:k,y:D,className:qt("recharts-text",N),textAnchor:h,fill:x.includes("url")?UU:x}),b.map(function(U,z){var Q=U.words.join(E?"":" ");return le.createElement("tspan",{x:k,dy:z===0?S:l,key:"".concat(Q,"-").concat(z)},Q)}))};function Th(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function CFe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WO(t){let e,r,n;t.length!==2?(e=Th,r=(l,c)=>Th(t(l),c),n=(l,c)=>t(l)-c):(e=t===Th||t===CFe?t:NFe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function NFe(){return 0}function RX(t){return t===null?NaN:+t}function*SFe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const EFe=WO(Th),Fw=EFe.right;WO(RX).center;class $U extends Map{constructor(e,r=DFe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(HU(this,e))}has(e){return super.has(HU(this,e))}set(e,r){return super.set(BFe(this,e),r)}delete(e){return super.delete(TFe(this,e))}}function HU({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function BFe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function TFe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function DFe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function IFe(t=Th){if(t===Th)return MX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function MX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const _Fe=Math.sqrt(50),PFe=Math.sqrt(10),kFe=Math.sqrt(2);function pC(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=_Fe?10:i>=PFe?5:i>=kFe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?pC(t,e,r*2):[l,c,u]}function KD(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?pC(e,t,r):pC(t,e,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function YD(t,e,r){return e=+e,t=+t,r=+r,pC(t,e,r)[2]}function XD(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?YD(e,t,r):YD(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function QU(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function zU(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function LX(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?MX:IFe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));LX(t,e,h,m,a)}const i=t[e];let o=r,l=n;for(Hv(t,r,e),a(t[n],i)>0&&Hv(t,r,n);o<l;){for(Hv(t,o,l),++o,--l;a(t[o],i)<0;)++o;for(;a(t[l],i)>0;)--l}a(t[r],i)===0?Hv(t,r,l):(++l,Hv(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Hv(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function OFe(t,e,r){if(t=Float64Array.from(SFe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return zU(t);if(e>=1)return QU(t);var n,a=(n-1)*e,i=Math.floor(a),o=QU(LX(t,i).subarray(0,i+1)),l=zU(t.subarray(i+1));return o+(l-o)*(a-i)}}function FFe(t,e,r=RX){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(a-i)}}function RFe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function Vl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ff(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const JD=Symbol("implicit");function GO(){var t=new $U,e=[],r=[],n=JD;function a(i){let o=t.get(i);if(o===void 0){if(n!==JD)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new $U;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return GO(e,r).unknown(n)},Vl.apply(a,arguments),a}function py(){var t=GO().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;i=(p-m)/Math.max(1,A-c+u*2),l&&(i=Math.floor(i)),m+=(p-m-i*(A-c))*d,o=i*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=RFe(A).map(function(x){return m+i*x});return r(h?g.reverse():g)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return py(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Vl.apply(f(),arguments)}function UX(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return UX(e())},t}function wb(){return UX(py.apply(null,arguments).paddingInner(1))}function qO(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function $X(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Rw(){}var gy=.7,gC=1/gy,n0="\\s*([+-]?\\d+)\\s*",xy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MFe=/^#([0-9a-f]{3,8})$/,LFe=new RegExp(`^rgb\\(${n0},${n0},${n0}\\)$`),UFe=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),$Fe=new RegExp(`^rgba\\(${n0},${n0},${n0},${xy}\\)$`),HFe=new RegExp(`^rgba\\(${Du},${Du},${Du},${xy}\\)$`),QFe=new RegExp(`^hsl\\(${xy},${Du},${Du}\\)$`),zFe=new RegExp(`^hsla\\(${xy},${Du},${Du},${xy}\\)$`),VU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qO(Rw,vy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WU,formatHex:WU,formatHex8:VFe,formatHsl:WFe,formatRgb:GU,toString:GU});function WU(){return this.rgb().formatHex()}function VFe(){return this.rgb().formatHex8()}function WFe(){return HX(this).formatHsl()}function GU(){return this.rgb().formatRgb()}function vy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=MFe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?qU(e):r===3?new No(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?sj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?sj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=LFe.exec(t))?new No(e[1],e[2],e[3],1):(e=UFe.exec(t))?new No(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$Fe.exec(t))?sj(e[1],e[2],e[3],e[4]):(e=HFe.exec(t))?sj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=QFe.exec(t))?XU(e[1],e[2]/100,e[3]/100,1):(e=zFe.exec(t))?XU(e[1],e[2]/100,e[3]/100,e[4]):VU.hasOwnProperty(t)?qU(VU[t]):t==="transparent"?new No(NaN,NaN,NaN,0):null}function qU(t){return new No(t>>16&255,t>>8&255,t&255,1)}function sj(t,e,r,n){return n<=0&&(t=e=r=NaN),new No(t,e,r,n)}function GFe(t){return t instanceof Rw||(t=vy(t)),t?(t=t.rgb(),new No(t.r,t.g,t.b,t.opacity)):new No}function ZD(t,e,r,n){return arguments.length===1?GFe(t):new No(t,e,r,n??1)}function No(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}qO(No,ZD,$X(Rw,{brighter(t){return t=t==null?gC:Math.pow(gC,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gy:Math.pow(gy,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new No(mm(this.r),mm(this.g),mm(this.b),xC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KU,formatHex:KU,formatHex8:qFe,formatRgb:YU,toString:YU}));function KU(){return`#${rm(this.r)}${rm(this.g)}${rm(this.b)}`}function qFe(){return`#${rm(this.r)}${rm(this.g)}${rm(this.b)}${rm((isNaN(this.opacity)?1:this.opacity)*255)}`}function YU(){const t=xC(this.opacity);return`${t===1?"rgb(":"rgba("}${mm(this.r)}, ${mm(this.g)}, ${mm(this.b)}${t===1?")":`, ${t})`}`}function xC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function rm(t){return t=mm(t),(t<16?"0":"")+t.toString(16)}function XU(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new fc(t,e,r,n)}function HX(t){if(t instanceof fc)return new fc(t.h,t.s,t.l,t.opacity);if(t instanceof Rw||(t=vy(t)),!t)return new fc;if(t instanceof fc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(e===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new fc(o,l,c,t.opacity)}function KFe(t,e,r,n){return arguments.length===1?HX(t):new fc(t,e,r,n??1)}function fc(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}qO(fc,KFe,$X(Rw,{brighter(t){return t=t==null?gC:Math.pow(gC,t),new fc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gy:Math.pow(gy,t),new fc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new No(aT(t>=240?t-240:t+120,a,n),aT(t,a,n),aT(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new fc(JU(this.h),aj(this.s),aj(this.l),xC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xC(this.opacity);return`${t===1?"hsl(":"hsla("}${JU(this.h)}, ${aj(this.s)*100}%, ${aj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JU(t){return t=(t||0)%360,t<0?t+360:t}function aj(t){return Math.max(0,Math.min(1,t||0))}function aT(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const KO=t=>()=>t;function YFe(t,e){return function(r){return t+r*e}}function XFe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function JFe(t){return(t=+t)==1?QX:function(e,r){return r-e?XFe(e,r,t):KO(isNaN(e)?r:e)}}function QX(t,e){var r=e-t;return r?YFe(t,r):KO(isNaN(t)?e:t)}const ZU=function t(e){var r=JFe(e);function n(a,i){var o=r((a=ZD(a)).r,(i=ZD(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=QX(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function ZFe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function eRe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tRe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Hx(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function rRe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function vC(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function nRe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Hx(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var eI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iT=new RegExp(eI.source,"g");function sRe(t){return function(){return t}}function aRe(t){return function(e){return t(e)+""}}function iRe(t,e){var r=eI.lastIndex=iT.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=eI.exec(t))&&(a=iT.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:vC(n,a)})),r=iT.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?aRe(c[0].x):sRe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Hx(t,e){var r=typeof e,n;return e==null||r==="boolean"?KO(e):(r==="number"?vC:r==="string"?(n=vy(e))?(e=n,ZU):iRe:e instanceof vy?ZU:e instanceof Date?rRe:eRe(e)?ZFe:Array.isArray(e)?tRe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nRe:vC)(t,e)}function YO(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function oRe(t,e){e===void 0&&(e=t,t=Hx);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function lRe(t){return function(){return t}}function bC(t){return+t}var e8=[0,1];function Yi(t){return t}function tI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:lRe(isNaN(e)?NaN:.5)}function cRe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function uRe(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=tI(a,n),i=r(o,i)):(n=tI(n,a),i=r(i,o)),function(l){return i(n(l))}}function dRe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=tI(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var c=Fw(t,l,1,n)-1;return i[c](a[c](l))}}function Mw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gE(){var t=e8,e=e8,r=Hx,n,a,i,o=Yi,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==Yi&&(o=cRe(t[0],t[A-1])),l=A>2?dRe:uRe,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?i:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),vC)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,bC),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=YO,d()},f.clamp=function(A){return arguments.length?(o=A?!0:Yi,d()):o!==Yi},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(i=A,f):i},function(A,h){return n=A,a=h,d()}}function XO(){return gE()(Yi,Yi)}function fRe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function yC(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function k0(t){return t=yC(Math.abs(t)),t?t[1]:NaN}function hRe(t,e){return function(r,n){for(var a=r.length,i=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function ARe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var mRe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function by(t){if(!(e=mRe.exec(t)))throw new Error("invalid format: "+t);var e;return new JO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}by.prototype=JO.prototype;function JO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}JO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pRe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var zX;function gRe(t,e){var r=yC(t,e);if(!r)return t+"";var n=r[0],a=r[1],i=a-(zX=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+yC(t,Math.max(0,e+i-1))[0]}function t8(t,e){var r=yC(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const r8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fRe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>t8(t*100,e),r:t8,s:gRe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n8(t){return t}var s8=Array.prototype.map,a8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function xRe(t){var e=t.grouping===void 0||t.thousands===void 0?n8:hRe(s8.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?n8:ARe(s8.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=by(f);var A=f.fill,h=f.align,m=f.sign,p=f.symbol,g=f.zero,x=f.width,v=f.comma,b=f.precision,C=f.trim,j=f.type;j==="n"?(v=!0,j="g"):r8[j]||(b===void 0&&(b=12),C=!0,j="g"),(g||A==="0"&&h==="=")&&(g=!0,A="0",h="=");var w=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=p==="$"?n:/[%p]/.test(j)?o:"",E=r8[j],_=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(D){var S=w,F=N,M,R,U;if(j==="c")F=E(D)+F,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?c:E(Math.abs(D),b),C&&(D=pRe(D)),z&&+D==0&&m!=="+"&&(z=!1),S=(z?m==="("?m:l:m==="-"||m==="("?"":m)+S,F=(j==="s"?a8[8+zX/3]:"")+F+(z&&m==="("?")":""),_){for(M=-1,R=D.length;++M<R;)if(U=D.charCodeAt(M),48>U||U>57){F=(U===46?a+D.slice(M+1):D.slice(M))+F,D=D.slice(0,M);break}}}v&&!g&&(D=e(D,1/0));var Q=S.length+D.length+F.length,H=Q<x?new Array(x-Q+1).join(A):"";switch(v&&g&&(D=e(H+D,H.length?x-F.length:1/0),H=""),h){case"<":D=S+D+F+H;break;case"=":D=S+H+D+F;break;case"^":D=H.slice(0,Q=H.length>>1)+S+D+F+H.slice(Q);break;default:D=H+S+D+F;break}return i(D)}return k.toString=function(){return f+""},k}function d(f,A){var h=u((f=by(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(k0(A)/3)))*3,p=Math.pow(10,-m),g=a8[8+m/3];return function(x){return h(p*x)+g}}return{format:u,formatPrefix:d}}var ij,ZO,VX;vRe({thousands:",",grouping:[3],currency:["$",""]});function vRe(t){return ij=xRe(t),ZO=ij.format,VX=ij.formatPrefix,ij}function bRe(t){return Math.max(0,-k0(Math.abs(t)))}function yRe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k0(e)/3)))*3-k0(Math.abs(t)))}function wRe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,k0(e)-k0(t))+1}function WX(t,e,r,n){var a=XD(t,e,r),i;switch(n=by(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=yRe(a,o))&&(n.precision=i),VX(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=wRe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=bRe(a))&&(n.precision=i-(n.type==="%")*2);break}}return ZO(n)}function Kh(t){var e=t.domain;return t.ticks=function(r){var n=e();return KD(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return WX(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=YD(o,l,r),u===c)return n[a]=o,n[i]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function wC(){var t=XO();return t.copy=function(){return Mw(t,wC())},Vl.apply(t,arguments),Kh(t)}function GX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,bC),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return GX(t).unknown(e)},t=arguments.length?Array.from(t,bC):[0,1],Kh(r)}function qX(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function i8(t){return Math.log(t)}function o8(t){return Math.exp(t)}function jRe(t){return-Math.log(-t)}function CRe(t){return-Math.exp(-t)}function NRe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function SRe(t){return t===10?NRe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ERe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function l8(t){return(e,r)=>-t(-e,r)}function e3(t){const e=t(i8,o8),r=e.domain;let n=10,a,i;function o(){return a=ERe(n),i=SRe(n),r()[0]<0?(a=l8(a),i=l8(i),t(jRe,CRe)):t(i8,o8),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&h-A<g){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/i(-A):m*i(A),!(p<u)){if(p>d)break;x.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/i(-A):m*i(A),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=KD(u,d,g))}else x=KD(A,h,Math.min(h-A,g)).map(i);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=by(c)).precision==null&&(c.trim=!0),c=ZO(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(qX(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),e}function KX(){const t=e3(gE()).domain([1,10]);return t.copy=()=>Mw(t,KX()).base(t.base()),Vl.apply(t,arguments),t}function c8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function u8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function t3(t){var e=1,r=t(c8(e),u8(e));return r.constant=function(n){return arguments.length?t(c8(e=+n),u8(e)):e},Kh(r)}function YX(){var t=t3(gE());return t.copy=function(){return Mw(t,YX()).constant(t.constant())},Vl.apply(t,arguments)}function d8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function BRe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function TRe(t){return t<0?-t*t:t*t}function r3(t){var e=t(Yi,Yi),r=1;function n(){return r===1?t(Yi,Yi):r===.5?t(BRe,TRe):t(d8(r),d8(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Kh(e)}function n3(){var t=r3(gE());return t.copy=function(){return Mw(t,n3()).exponent(t.exponent())},Vl.apply(t,arguments),t}function DRe(){return n3.apply(null,arguments).exponent(.5)}function f8(t){return Math.sign(t)*t*t}function IRe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function XX(){var t=XO(),e=[0,1],r=!1,n;function a(i){var o=IRe(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(f8(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,bC)).map(f8)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return XX(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Vl.apply(a,arguments),Kh(a)}function JX(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=FFe(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Fw(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Th),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return JX().domain(t).range(e).unknown(n)},Vl.apply(i,arguments)}function ZX(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Fw(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return ZX().domain([t,e]).range(a).unknown(i)},Vl.apply(Kh(o),arguments)}function eJ(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[Fw(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return eJ().domain(t).range(e).unknown(r)},Vl.apply(a,arguments)}const oT=new Date,lT=new Date;function wa(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),e(i,l),t(i);while(u<i&&i<o);return c},a.filter=i=>wa(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(oT.setTime(+i),lT.setTime(+o),t(oT),t(lT),Math.floor(r(oT,lT))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const jC=wa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jC.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wa(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):jC);jC.range;const Td=1e3,El=Td*60,Dd=El*60,Kd=Dd*24,s3=Kd*7,h8=Kd*30,cT=Kd*365,nm=wa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Td)},(t,e)=>(e-t)/Td,t=>t.getUTCSeconds());nm.range;const a3=wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Td)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getMinutes());a3.range;const i3=wa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getUTCMinutes());i3.range;const o3=wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Td-t.getMinutes()*El)},(t,e)=>{t.setTime(+t+e*Dd)},(t,e)=>(e-t)/Dd,t=>t.getHours());o3.range;const l3=wa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Dd)},(t,e)=>(e-t)/Dd,t=>t.getUTCHours());l3.range;const Lw=wa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*El)/Kd,t=>t.getDate()-1);Lw.range;const xE=wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kd,t=>t.getUTCDate()-1);xE.range;const tJ=wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kd,t=>Math.floor(t/Kd));tJ.range;function lp(t){return wa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*El)/s3)}const vE=lp(0),CC=lp(1),_Re=lp(2),PRe=lp(3),O0=lp(4),kRe=lp(5),ORe=lp(6);vE.range;CC.range;_Re.range;PRe.range;O0.range;kRe.range;ORe.range;function cp(t){return wa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/s3)}const bE=cp(0),NC=cp(1),FRe=cp(2),RRe=cp(3),F0=cp(4),MRe=cp(5),LRe=cp(6);bE.range;NC.range;FRe.range;RRe.range;F0.range;MRe.range;LRe.range;const c3=wa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());c3.range;const u3=wa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());u3.range;const Yd=wa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Yd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Yd.range;const Xd=wa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Xd.range;function rJ(t,e,r,n,a,i){const o=[[nm,1,Td],[nm,5,5*Td],[nm,15,15*Td],[nm,30,30*Td],[i,1,El],[i,5,5*El],[i,15,15*El],[i,30,30*El],[a,1,Dd],[a,3,3*Dd],[a,6,6*Dd],[a,12,12*Dd],[n,1,Kd],[n,2,2*Kd],[r,1,s3],[e,1,h8],[e,3,3*h8],[t,1,cT]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=WO(([,,g])=>g).right(o,A);if(h===o.length)return t.every(XD(u/cT,d/cT,f));if(h===0)return jC.every(Math.max(XD(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[URe,$Re]=rJ(Xd,u3,bE,tJ,l3,i3),[HRe,QRe]=rJ(Yd,c3,vE,Lw,o3,a3);function uT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qv(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function zRe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=zv(a),d=Vv(a),f=zv(i),A=Vv(i),h=zv(o),m=Vv(o),p=zv(l),g=Vv(l),x=zv(c),v=Vv(c),b={a:z,A:Q,b:H,B:q,c:null,d:v8,e:v8,f:hMe,g:jMe,G:NMe,H:uMe,I:dMe,j:fMe,L:nJ,m:AMe,M:mMe,p:X,q:$,Q:w8,s:j8,S:pMe,u:gMe,U:xMe,V:vMe,w:bMe,W:yMe,x:null,X:null,y:wMe,Y:CMe,Z:SMe,"%":y8},C={a:K,A:se,b:Z,B:ie,c:null,d:b8,e:b8,f:DMe,g:UMe,G:HMe,H:EMe,I:BMe,j:TMe,L:aJ,m:IMe,M:_Me,p:ee,q:ue,Q:w8,s:j8,S:PMe,u:kMe,U:OMe,V:FMe,w:RMe,W:MMe,x:null,X:null,y:LMe,Y:$Me,Z:QMe,"%":y8},j={a:k,A:D,b:S,B:F,c:M,d:g8,e:g8,f:iMe,g:p8,G:m8,H:x8,I:x8,j:rMe,L:aMe,m:tMe,M:nMe,p:_,q:eMe,Q:lMe,s:cMe,S:sMe,u:KRe,U:YRe,V:XRe,w:qRe,W:JRe,x:R,X:U,y:p8,Y:m8,Z:ZRe,"%":oMe};b.x=w(r,b),b.X=w(n,b),b.c=w(e,b),C.x=w(r,C),C.X=w(n,C),C.c=w(e,C);function w(ae,re){return function(fe){var G=[],oe=-1,Se=0,ge=ae.length,te,ye,we;for(fe instanceof Date||(fe=new Date(+fe));++oe<ge;)ae.charCodeAt(oe)===37&&(G.push(ae.slice(Se,oe)),(ye=A8[te=ae.charAt(++oe)])!=null?te=ae.charAt(++oe):ye=te==="e"?" ":"0",(we=re[te])&&(te=we(fe,ye)),G.push(te),Se=oe+1);return G.push(ae.slice(Se,oe)),G.join("")}}function N(ae,re){return function(fe){var G=Qv(1900,void 0,1),oe=E(G,ae,fe+="",0),Se,ge;if(oe!=fe.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(re&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(Se=dT(Qv(G.y,0,1)),ge=Se.getUTCDay(),Se=ge>4||ge===0?NC.ceil(Se):NC(Se),Se=xE.offset(Se,(G.V-1)*7),G.y=Se.getUTCFullYear(),G.m=Se.getUTCMonth(),G.d=Se.getUTCDate()+(G.w+6)%7):(Se=uT(Qv(G.y,0,1)),ge=Se.getDay(),Se=ge>4||ge===0?CC.ceil(Se):CC(Se),Se=Lw.offset(Se,(G.V-1)*7),G.y=Se.getFullYear(),G.m=Se.getMonth(),G.d=Se.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),ge="Z"in G?dT(Qv(G.y,0,1)).getUTCDay():uT(Qv(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(ge+5)%7:G.w+G.U*7-(ge+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,dT(G)):uT(G)}}function E(ae,re,fe,G){for(var oe=0,Se=re.length,ge=fe.length,te,ye;oe<Se;){if(G>=ge)return-1;if(te=re.charCodeAt(oe++),te===37){if(te=re.charAt(oe++),ye=j[te in A8?re.charAt(oe++):te],!ye||(G=ye(ae,fe,G))<0)return-1}else if(te!=fe.charCodeAt(G++))return-1}return G}function _(ae,re,fe){var G=u.exec(re.slice(fe));return G?(ae.p=d.get(G[0].toLowerCase()),fe+G[0].length):-1}function k(ae,re,fe){var G=h.exec(re.slice(fe));return G?(ae.w=m.get(G[0].toLowerCase()),fe+G[0].length):-1}function D(ae,re,fe){var G=f.exec(re.slice(fe));return G?(ae.w=A.get(G[0].toLowerCase()),fe+G[0].length):-1}function S(ae,re,fe){var G=x.exec(re.slice(fe));return G?(ae.m=v.get(G[0].toLowerCase()),fe+G[0].length):-1}function F(ae,re,fe){var G=p.exec(re.slice(fe));return G?(ae.m=g.get(G[0].toLowerCase()),fe+G[0].length):-1}function M(ae,re,fe){return E(ae,e,re,fe)}function R(ae,re,fe){return E(ae,r,re,fe)}function U(ae,re,fe){return E(ae,n,re,fe)}function z(ae){return o[ae.getDay()]}function Q(ae){return i[ae.getDay()]}function H(ae){return c[ae.getMonth()]}function q(ae){return l[ae.getMonth()]}function X(ae){return a[+(ae.getHours()>=12)]}function $(ae){return 1+~~(ae.getMonth()/3)}function K(ae){return o[ae.getUTCDay()]}function se(ae){return i[ae.getUTCDay()]}function Z(ae){return c[ae.getUTCMonth()]}function ie(ae){return l[ae.getUTCMonth()]}function ee(ae){return a[+(ae.getUTCHours()>=12)]}function ue(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var re=w(ae+="",b);return re.toString=function(){return ae},re},parse:function(ae){var re=N(ae+="",!1);return re.toString=function(){return ae},re},utcFormat:function(ae){var re=w(ae+="",C);return re.toString=function(){return ae},re},utcParse:function(ae){var re=N(ae+="",!0);return re.toString=function(){return ae},re}}}var A8={"-":"",_:" ",0:"0"},Pa=/^\s*\d+/,VRe=/^%/,WRe=/[\\^$*+?|[\]().{}]/g;function fn(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function GRe(t){return t.replace(WRe,"\\$&")}function zv(t){return new RegExp("^(?:"+t.map(GRe).join("|")+")","i")}function Vv(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function qRe(t,e,r){var n=Pa.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function KRe(t,e,r){var n=Pa.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function YRe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function XRe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function JRe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function m8(t,e,r){var n=Pa.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function p8(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ZRe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function eMe(t,e,r){var n=Pa.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function tMe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function g8(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function rMe(t,e,r){var n=Pa.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function x8(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function nMe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function sMe(t,e,r){var n=Pa.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function aMe(t,e,r){var n=Pa.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function iMe(t,e,r){var n=Pa.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function oMe(t,e,r){var n=VRe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function lMe(t,e,r){var n=Pa.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function cMe(t,e,r){var n=Pa.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function v8(t,e){return fn(t.getDate(),e,2)}function uMe(t,e){return fn(t.getHours(),e,2)}function dMe(t,e){return fn(t.getHours()%12||12,e,2)}function fMe(t,e){return fn(1+Lw.count(Yd(t),t),e,3)}function nJ(t,e){return fn(t.getMilliseconds(),e,3)}function hMe(t,e){return nJ(t,e)+"000"}function AMe(t,e){return fn(t.getMonth()+1,e,2)}function mMe(t,e){return fn(t.getMinutes(),e,2)}function pMe(t,e){return fn(t.getSeconds(),e,2)}function gMe(t){var e=t.getDay();return e===0?7:e}function xMe(t,e){return fn(vE.count(Yd(t)-1,t),e,2)}function sJ(t){var e=t.getDay();return e>=4||e===0?O0(t):O0.ceil(t)}function vMe(t,e){return t=sJ(t),fn(O0.count(Yd(t),t)+(Yd(t).getDay()===4),e,2)}function bMe(t){return t.getDay()}function yMe(t,e){return fn(CC.count(Yd(t)-1,t),e,2)}function wMe(t,e){return fn(t.getFullYear()%100,e,2)}function jMe(t,e){return t=sJ(t),fn(t.getFullYear()%100,e,2)}function CMe(t,e){return fn(t.getFullYear()%1e4,e,4)}function NMe(t,e){var r=t.getDay();return t=r>=4||r===0?O0(t):O0.ceil(t),fn(t.getFullYear()%1e4,e,4)}function SMe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fn(e/60|0,"0",2)+fn(e%60,"0",2)}function b8(t,e){return fn(t.getUTCDate(),e,2)}function EMe(t,e){return fn(t.getUTCHours(),e,2)}function BMe(t,e){return fn(t.getUTCHours()%12||12,e,2)}function TMe(t,e){return fn(1+xE.count(Xd(t),t),e,3)}function aJ(t,e){return fn(t.getUTCMilliseconds(),e,3)}function DMe(t,e){return aJ(t,e)+"000"}function IMe(t,e){return fn(t.getUTCMonth()+1,e,2)}function _Me(t,e){return fn(t.getUTCMinutes(),e,2)}function PMe(t,e){return fn(t.getUTCSeconds(),e,2)}function kMe(t){var e=t.getUTCDay();return e===0?7:e}function OMe(t,e){return fn(bE.count(Xd(t)-1,t),e,2)}function iJ(t){var e=t.getUTCDay();return e>=4||e===0?F0(t):F0.ceil(t)}function FMe(t,e){return t=iJ(t),fn(F0.count(Xd(t),t)+(Xd(t).getUTCDay()===4),e,2)}function RMe(t){return t.getUTCDay()}function MMe(t,e){return fn(NC.count(Xd(t)-1,t),e,2)}function LMe(t,e){return fn(t.getUTCFullYear()%100,e,2)}function UMe(t,e){return t=iJ(t),fn(t.getUTCFullYear()%100,e,2)}function $Me(t,e){return fn(t.getUTCFullYear()%1e4,e,4)}function HMe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?F0(t):F0.ceil(t),fn(t.getUTCFullYear()%1e4,e,4)}function QMe(){return"+0000"}function y8(){return"%"}function w8(t){return+t}function j8(t){return Math.floor(+t/1e3)}var Cg,oJ,lJ;zMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zMe(t){return Cg=zRe(t),oJ=Cg.format,Cg.parse,lJ=Cg.utcFormat,Cg.utcParse,Cg}function VMe(t){return new Date(t)}function WMe(t){return t instanceof Date?+t:+new Date(+t)}function d3(t,e,r,n,a,i,o,l,c,u){var d=XO(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),v=u("%b %d"),b=u("%B"),C=u("%Y");function j(w){return(c(w)<w?h:l(w)<w?m:o(w)<w?p:i(w)<w?g:n(w)<w?a(w)<w?x:v:r(w)<w?b:C)(w)}return d.invert=function(w){return new Date(f(w))},d.domain=function(w){return arguments.length?A(Array.from(w,WMe)):A().map(VMe)},d.ticks=function(w){var N=A();return t(N[0],N[N.length-1],w??10)},d.tickFormat=function(w,N){return N==null?j:u(N)},d.nice=function(w){var N=A();return(!w||typeof w.range!="function")&&(w=e(N[0],N[N.length-1],w??10)),w?A(qX(N,w)):d},d.copy=function(){return Mw(d,d3(t,e,r,n,a,i,o,l,c,u))},d}function GMe(){return Vl.apply(d3(HRe,QRe,Yd,c3,vE,Lw,o3,a3,nm,oJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qMe(){return Vl.apply(d3(URe,$Re,Xd,u3,bE,xE,l3,i3,nm,lJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yE(){var t=0,e=1,r,n,a,i,o=Yi,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(Hx),u.rangeRound=d(YO),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function Yh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cJ(){var t=Kh(yE()(Yi));return t.copy=function(){return Yh(t,cJ())},ff.apply(t,arguments)}function uJ(){var t=e3(yE()).domain([1,10]);return t.copy=function(){return Yh(t,uJ()).base(t.base())},ff.apply(t,arguments)}function dJ(){var t=t3(yE());return t.copy=function(){return Yh(t,dJ()).constant(t.constant())},ff.apply(t,arguments)}function f3(){var t=r3(yE());return t.copy=function(){return Yh(t,f3()).exponent(t.exponent())},ff.apply(t,arguments)}function KMe(){return f3.apply(null,arguments).exponent(.5)}function fJ(){var t=[],e=Yi;function r(n){if(n!=null&&!isNaN(n=+n))return e((Fw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Th),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>OFe(t,i/n))},r.copy=function(){return fJ(e).domain(t)},ff.apply(r,arguments)}function wE(){var t=0,e=.5,r=1,n=1,a,i,o,l,c,u=Yi,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),i=d(e=+e),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var x,v,b;return arguments.length?([x,v,b]=g,u=oRe(p,[x,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(Hx),h.rangeRound=m(YO),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),i=p(e),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h}}function hJ(){var t=Kh(wE()(Yi));return t.copy=function(){return Yh(t,hJ())},ff.apply(t,arguments)}function AJ(){var t=e3(wE()).domain([.1,1,10]);return t.copy=function(){return Yh(t,AJ()).base(t.base())},ff.apply(t,arguments)}function mJ(){var t=t3(wE());return t.copy=function(){return Yh(t,mJ()).constant(t.constant())},ff.apply(t,arguments)}function h3(){var t=r3(wE());return t.copy=function(){return Yh(t,h3()).exponent(t.exponent())},ff.apply(t,arguments)}function YMe(){return h3.apply(null,arguments).exponent(.5)}const C8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:py,scaleDiverging:hJ,scaleDivergingLog:AJ,scaleDivergingPow:h3,scaleDivergingSqrt:YMe,scaleDivergingSymlog:mJ,scaleIdentity:GX,scaleImplicit:JD,scaleLinear:wC,scaleLog:KX,scaleOrdinal:GO,scalePoint:wb,scalePow:n3,scaleQuantile:JX,scaleQuantize:ZX,scaleRadial:XX,scaleSequential:cJ,scaleSequentialLog:uJ,scaleSequentialPow:f3,scaleSequentialQuantile:fJ,scaleSequentialSqrt:KMe,scaleSequentialSymlog:dJ,scaleSqrt:DRe,scaleSymlog:YX,scaleThreshold:eJ,scaleTime:GMe,scaleUtc:qMe,tickFormat:WX},Symbol.toStringTag,{value:"Module"}));var XMe=_x;function JMe(t,e,r){for(var n=-1,a=t.length;++n<a;){var i=t[n],o=e(i);if(o!=null&&(l===void 0?o===o&&!XMe(o):r(o,l)))var l=o,c=i}return c}var jE=JMe;function ZMe(t,e){return t>e}var pJ=ZMe,e6e=jE,t6e=pJ,r6e=$x;function n6e(t){return t&&t.length?e6e(t,r6e,t6e):void 0}var s6e=n6e;const Ah=ln(s6e);function a6e(t,e){return t<e}var gJ=a6e,i6e=jE,o6e=gJ,l6e=$x;function c6e(t){return t&&t.length?i6e(t,l6e,o6e):void 0}var u6e=c6e;const CE=ln(u6e);var d6e=EO,f6e=Hu,h6e=NX,A6e=Oo;function m6e(t,e){var r=A6e(t)?d6e:h6e;return r(t,f6e(e))}var p6e=m6e,g6e=jX,x6e=p6e;function v6e(t,e){return g6e(x6e(t,e),1)}var b6e=v6e;const y6e=ln(b6e);var w6e=HO;function j6e(t,e){return w6e(t,e)}var C6e=j6e;const R0=ln(C6e);var Qx=1e9,N6e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},m3,gs=!0,Rl="[DecimalError] ",pm=Rl+"Invalid argument: ",A3=Rl+"Exponent out of range: ",zx=Math.floor,UA=Math.pow,S6e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ko,Ea=1e7,as=7,xJ=9007199254740991,SC=zx(xJ/as),Yt={};Yt.absoluteValue=Yt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Yt.comparedTo=Yt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Yt.decimalPlaces=Yt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*as;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Yt.dividedBy=Yt.div=function(t){return Ud(this,new this.constructor(t))};Yt.dividedToIntegerBy=Yt.idiv=function(t){var e=this,r=e.constructor;return zn(Ud(e,new r(t),0,1),r.precision)};Yt.equals=Yt.eq=function(t){return!this.cmp(t)};Yt.exponent=function(){return da(this)};Yt.greaterThan=Yt.gt=function(t){return this.cmp(t)>0};Yt.greaterThanOrEqualTo=Yt.gte=function(t){return this.cmp(t)>=0};Yt.isInteger=Yt.isint=function(){return this.e>this.d.length-2};Yt.isNegative=Yt.isneg=function(){return this.s<0};Yt.isPositive=Yt.ispos=function(){return this.s>0};Yt.isZero=function(){return this.s===0};Yt.lessThan=Yt.lt=function(t){return this.cmp(t)<0};Yt.lessThanOrEqualTo=Yt.lte=function(t){return this.cmp(t)<1};Yt.logarithm=Yt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ko))throw Error(Rl+"NaN");if(r.s<1)throw Error(Rl+(r.s?"NaN":"-Infinity"));return r.eq(Ko)?new n(0):(gs=!1,e=Ud(yy(r,i),yy(t,i),i),gs=!0,zn(e,a))};Yt.minus=Yt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yJ(e,t):vJ(e,(t.s=-t.s,t))};Yt.modulo=Yt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Rl+"NaN");return r.s?(gs=!1,e=Ud(r,t,0,1).times(t),gs=!0,r.minus(e)):zn(new n(r),a)};Yt.naturalExponential=Yt.exp=function(){return bJ(this)};Yt.naturalLogarithm=Yt.ln=function(){return yy(this)};Yt.negated=Yt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Yt.plus=Yt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vJ(e,t):yJ(e,(t.s=-t.s,t))};Yt.precision=Yt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pm+t);if(e=da(a)+1,n=a.d.length-1,r=n*as+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Yt.squareRoot=Yt.sqrt=function(){var t,e,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Rl+"NaN")}for(t=da(l),gs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=gu(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=zx((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Ud(l,i,o+2)).times(.5),gu(i.d).slice(0,o)===(e=gu(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(zn(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return gs=!0,zn(n,r)};Yt.times=Yt.mul=function(t){var e,r,n,a,i,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(i=A,A=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=i[a]+h[n]*A[a-n-1]+e,i[a--]=l%Ea|0,e=l/Ea|0;i[a]=(i[a]+e)%Ea|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,gs?zn(t,f.precision):t};Yt.toDecimalPlaces=Yt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Fu(t,0,Qx),e===void 0?e=n.rounding:Fu(e,0,8),zn(r,t+da(r)+1,e))};Yt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Um(n,!0):(Fu(t,0,Qx),e===void 0?e=a.rounding:Fu(e,0,8),n=zn(new a(n),t+1,e),r=Um(n,!0,t+1)),r};Yt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?Um(a):(Fu(t,0,Qx),e===void 0?e=i.rounding:Fu(e,0,8),n=zn(new i(a),t+da(a)+1,e),r=Um(n.abs(),!1,t+da(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Yt.toInteger=Yt.toint=function(){var t=this,e=t.constructor;return zn(new e(t),da(t)+1,e.rounding)};Yt.toNumber=function(){return+this};Yt.toPower=Yt.pow=function(t){var e,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ko);if(l=new c(l),!l.s){if(t.s<1)throw Error(Rl+"Infinity");return l}if(l.eq(Ko))return l;if(n=c.precision,t.eq(Ko))return zn(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=d<0?-d:d)<=xJ){for(a=new c(Ko),e=Math.ceil(n/as+4),gs=!1;r%2&&(a=a.times(l),S8(a.d,e)),r=zx(r/2),r!==0;)l=l.times(l),S8(l.d,e);return gs=!0,t.s<0?new c(Ko).div(a):zn(a,n)}}else if(i<0)throw Error(Rl+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,gs=!1,a=t.times(yy(l,n+u)),gs=!0,a=bJ(a),a.s=i,a};Yt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=da(a),n=Um(a,r<=i.toExpNeg||r>=i.toExpPos)):(Fu(t,1,Qx),e===void 0?e=i.rounding:Fu(e,0,8),a=zn(new i(a),t,e),r=da(a),n=Um(a,t<=r||r<=i.toExpNeg,t)),n};Yt.toSignificantDigits=Yt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Fu(t,1,Qx),e===void 0?e=n.rounding:Fu(e,0,8)),zn(new n(r),t,e)};Yt.toString=Yt.valueOf=Yt.val=Yt.toJSON=Yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=da(t),r=t.constructor;return Um(t,e<=r.toExpNeg||e>=r.toExpPos)};function vJ(t,e){var r,n,a,i,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),gs?zn(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/as),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ea|0,c[i]%=Ea;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,gs?zn(e,f):e}function Fu(t,e,r){if(t!==~~t||t<e||t>r)throw Error(pm+t)}function gu(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=as-n.length,r&&(i+=th(r)),i+=n;o=t[e],n=o+"",r=as-n.length,r&&(i+=th(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ud=function(){function t(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%Ea|0,o=i/Ea|0;return o&&n.unshift(o),n}function e(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Ea+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,A,h,m,p,g,x,v,b,C,j,w,N,E,_=n.constructor,k=n.s==a.s?1:-1,D=n.d,S=a.d;if(!n.s)return new _(n);if(!a.s)throw Error(Rl+"Division by zero");for(c=n.e-a.e,N=S.length,j=D.length,h=new _(k),m=h.d=[],u=0;S[u]==(D[u]||0);)++u;if(S[u]>(D[u]||0)&&--c,i==null?v=i=_.precision:o?v=i+(da(n)-da(a))+1:v=i,v<0)return new _(0);if(v=v/as+2|0,u=0,N==1)for(d=0,S=S[0],v++;(u<j||d)&&v--;u++)b=d*Ea+(D[u]||0),m[u]=b/S|0,d=b%S|0;else{for(d=Ea/(S[0]+1)|0,d>1&&(S=t(S,d),D=t(D,d),N=S.length,j=D.length),C=N,p=D.slice(0,N),g=p.length;g<N;)p[g++]=0;E=S.slice(),E.unshift(0),w=S[0],S[1]>=Ea/2&&++w;do d=0,l=e(S,p,N,g),l<0?(x=p[0],N!=g&&(x=x*Ea+(p[1]||0)),d=x/w|0,d>1?(d>=Ea&&(d=Ea-1),f=t(S,d),A=f.length,g=p.length,l=e(f,p,A,g),l==1&&(d--,r(f,N<A?E:S,A))):(d==0&&(l=d=1),f=S.slice()),A=f.length,A<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(S,p,N,g),l<1&&(d++,r(p,N<g?E:S,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=D[C]||0:(p=[D[C]],g=1);while((C++<j||p[0]!==void 0)&&v--)}return m[0]||m.shift(),h.e=c,zn(h,o?i+da(h)+1:i)}}();function bJ(t,e){var r,n,a,i,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(da(t)>16)throw Error(A3+da(t));if(!t.s)return new d(Ko);for(gs=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(UA(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Ko),d.precision=l;;){if(a=zn(a.times(t),l),r=r.times(++c),o=i.plus(Ud(a,r,l)),gu(o.d).slice(0,l)===gu(i.d).slice(0,l)){for(;u--;)i=zn(i.times(i),l);return d.precision=f,e==null?(gs=!0,zn(i,f)):i}i=o}}function da(t){for(var e=t.e*as,r=t.d[0];r>=10;r/=10)e++;return e}function fT(t,e,r){if(e>t.LN10.sd())throw gs=!0,r&&(t.precision=r),Error(Rl+"LN10 precision limit exceeded");return zn(new t(t.LN10),e)}function th(t){for(var e="";t--;)e+="0";return e}function yy(t,e){var r,n,a,i,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(Rl+(h.s?"NaN":"-Infinity"));if(h.eq(Ko))return new p(0);if(e==null?(gs=!1,u=g):u=e,h.eq(10))return e==null&&(gs=!0),fT(p,u);if(u+=A,p.precision=u,r=gu(m),n=r.charAt(0),i=da(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=gu(h.d),n=r.charAt(0),f++;i=da(h),n>1?(h=new p("0."+r),i++):h=new p(n+"."+r.slice(1))}else return c=fT(p,u+2,g).times(i+""),h=yy(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=g,e==null?(gs=!0,zn(h,g)):h;for(l=o=h=Ud(h.minus(Ko),h.plus(Ko),u),d=zn(h.times(h),u),a=3;;){if(o=zn(o.times(d),u),c=l.plus(Ud(o,new p(a),u)),gu(c.d).slice(0,u)===gu(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(fT(p,u+2,g).times(i+""))),l=Ud(l,new p(f),u),p.precision=g,e==null?(gs=!0,zn(l,g)):l;l=c,a+=2}}function N8(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=zx(r/as),t.d=[],n=(r+1)%as,r<0&&(n+=as),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=as;n<a;)t.d.push(+e.slice(n,n+=as));e=e.slice(n),n=as-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),gs&&(t.e>SC||t.e<-SC))throw Error(A3+r)}else t.s=0,t.e=0,t.d=[0];return t}function zn(t,e,r){var n,a,i,o,l,c,u,d,f=t.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=as,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/as),i=f.length,d>=i)return t;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=as,a=n-as+o}if(r!==void 0&&(i=UA(10,o-a-1),l=u/i%10|0,c=e<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/UA(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(i=da(t),f.length=1,e=e-i-1,f[0]=UA(10,(as-e%as)%as),t.e=zx(-e/as)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=UA(10,as-n),f[d]=a>0?(u/UA(10,o-a)%UA(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Ea&&(f[0]=1,++t.e);break}else{if(f[d]+=i,f[d]!=Ea)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(gs&&(t.e>SC||t.e<-SC))throw Error(A3+da(t));return t}function yJ(t,e){var r,n,a,i,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),gs?zn(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/as),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Ea-1;--c[i],c[a]+=Ea}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,gs?zn(e,h):e):new A(0)}function Um(t,e,r){var n,a=da(t),i=gu(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+th(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+th(-a-1)+i,r&&(n=r-o)>0&&(i+=th(n))):a>=o?(i+=th(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+th(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=th(n))),t.s<0?"-"+i:i}function S8(t,e){if(t.length>e)return t.length=e,!0}function wJ(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(pm+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return N8(o,i.toString())}else if(typeof i!="string")throw Error(pm+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,S6e.test(i))N8(o,i);else throw Error(pm+i)}if(a.prototype=Yt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=wJ,a.config=a.set=E6e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function E6e(t){if(!t||typeof t!="object")throw Error(Rl+"Object expected");var e,r,n,a=["precision",1,Qx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(zx(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(pm+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(pm+r+": "+n);return this}var m3=wJ(N6e);Ko=new m3(1);const On=m3;function B6e(t){return _6e(t)||I6e(t)||D6e(t)||T6e()}function T6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D6e(t,e){if(t){if(typeof t=="string")return rI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rI(t,e)}}function I6e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _6e(t){if(Array.isArray(t))return rI(t)}function rI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var P6e=function(e){return e},jJ={},CJ=function(e){return e===jJ},E8=function(e){return function r(){return arguments.length===0||arguments.length===1&&CJ(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},k6e=function t(e,r){return e===1?r:E8(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==jJ}).length;return o>=e?r.apply(void 0,a):t(e-o,E8(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return CJ(f)?c.shift():f});return r.apply(void 0,B6e(d).concat(c))}))})},NE=function(e){return k6e(e.length,e)},nI=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},O6e=NE(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),F6e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return P6e;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},sI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},NJ=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=e.apply(void 0,i)),n}};function R6e(t){var e;return t===0?e=1:e=Math.floor(new On(t).abs().log(10).toNumber())+1,e}function M6e(t,e,r){for(var n=new On(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var L6e=NE(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),U6e=NE(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),$6e=NE(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const SE={rangeStep:M6e,getDigitCount:R6e,interpolateNumber:L6e,uninterpolateNumber:U6e,uninterpolateTruncation:$6e};function aI(t){return z6e(t)||Q6e(t)||SJ(t)||H6e()}function H6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q6e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function z6e(t){if(Array.isArray(t))return iI(t)}function wy(t,e){return G6e(t)||W6e(t,e)||SJ(t,e)||V6e()}function V6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SJ(t,e){if(t){if(typeof t=="string")return iI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iI(t,e)}}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W6e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function G6e(t){if(Array.isArray(t))return t}function EJ(t){var e=wy(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function BJ(t,e,r){if(t.lte(0))return new On(0);var n=SE.getDigitCount(t.toNumber()),a=new On(10).pow(n),i=t.div(a),o=n!==1?.05:.1,l=new On(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?c:new On(Math.ceil(c))}function q6e(t,e,r){var n=1,a=new On(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new On(10).pow(SE.getDigitCount(t)-1),a=new On(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new On(Math.floor(t)))}else t===0?a=new On(Math.floor((e-1)/2)):r||(a=new On(Math.floor(t)));var o=Math.floor((e-1)/2),l=F6e(O6e(function(c){return a.add(new On(c-o).mul(n)).toNumber()}),nI);return l(0,e)}function TJ(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new On(0),tickMin:new On(0),tickMax:new On(0)};var i=BJ(new On(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new On(0):(o=new On(t).add(e).div(2),o=o.sub(new On(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new On(e).sub(o).div(i).toNumber()),u=l+c+1;return u>r?TJ(t,e,r,n,a+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:i,tickMin:o.sub(new On(l).mul(i)),tickMax:o.add(new On(c).mul(i))})}function K6e(t){var e=wy(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=EJ([r,n]),c=wy(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(aI(nI(0,a-1).map(function(){return 1/0}))):[].concat(aI(nI(0,a-1).map(function(){return-1/0})),[d]);return r>n?sI(f):f}if(u===d)return q6e(u,a,i);var A=TJ(u,d,o,i),h=A.step,m=A.tickMin,p=A.tickMax,g=SE.rangeStep(m,p.add(new On(.1).mul(h)),h);return r>n?sI(g):g}function Y6e(t,e){var r=wy(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=EJ([n,a]),l=wy(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(e,2),f=BJ(new On(u).sub(c).div(d-1),i,0),A=[].concat(aI(SE.rangeStep(new On(c),new On(u).sub(new On(.99).mul(f)),f)),[u]);return n>a?sI(A):A}var X6e=NJ(K6e),J6e=NJ(Y6e),Z6e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function EC(){return EC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EC.apply(this,arguments)}function eLe(t,e){return sLe(t)||nLe(t,e)||rLe(t,e)||tLe()}function tLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rLe(t,e){if(t){if(typeof t=="string")return B8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B8(t,e)}}function B8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function sLe(t){if(Array.isArray(t))return t}function aLe(t,e){if(t==null)return{};var r=iLe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iLe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function oLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lLe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_J(n.key),n)}}function cLe(t,e,r){return e&&lLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uLe(t,e,r){return e=BC(e),dLe(t,DJ()?Reflect.construct(e,r||[],BC(t).constructor):e.apply(t,r))}function dLe(t,e){if(e&&(M0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fLe(t)}function fLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DJ=function(){return!!t})()}function BC(t){return BC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},BC(t)}function hLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oI(t,e)}function IJ(t,e,r){return e=_J(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _J(t){var e=ALe(t,"string");return M0(e)=="symbol"?e:e+""}function ALe(t,e){if(M0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(M0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var EE=function(t){function e(){return oLe(this,e),uLe(this,e,arguments)}return hLe(e,t),cLe(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,A=aLe(n,Z6e),h=cr(A,!1);this.props.direction==="x"&&d.type!=="number"&&Nm();var m=c.map(function(p){var g=u(p,l),x=g.x,v=g.y,b=g.value,C=g.errorVal;if(!C)return null;var j=[],w,N;if(Array.isArray(C)){var E=eLe(C,2);w=E[0],N=E[1]}else w=N=C;if(i==="vertical"){var _=d.scale,k=v+a,D=k+o,S=k-o,F=_(b-w),M=_(b+N);j.push({x1:M,y1:D,x2:M,y2:S}),j.push({x1:F,y1:k,x2:M,y2:k}),j.push({x1:F,y1:D,x2:F,y2:S})}else if(i==="horizontal"){var R=f.scale,U=x+a,z=U-o,Q=U+o,H=R(b-w),q=R(b+N);j.push({x1:z,y1:q,x2:Q,y2:q}),j.push({x1:U,y1:H,x2:U,y2:q}),j.push({x1:z,y1:H,x2:Q,y2:H})}return le.createElement(rn,EC({className:"recharts-errorBar",key:"bar-".concat(j.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},h),j.map(function(X){return le.createElement("line",EC({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return le.createElement(rn,{className:"recharts-errorBars"},m)}}])}(le.Component);IJ(EE,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});IJ(EE,"displayName","ErrorBar");function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function T8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(r),!0).forEach(function(n){mLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mLe(t,e,r){return e=pLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pLe(t){var e=gLe(t,"string");return jy(e)=="symbol"?e:e+""}function gLe(t,e){if(jy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PJ=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=qo(r,vc);if(!o)return null;var l=vc.defaultProps,c=l!==void 0?SA(SA({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var A=f.item,h=f.props,m=h.sectors||h.data||[];return d.concat(m.map(function(p){return{type:o.props.iconType||A.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,A=f.type.defaultProps,h=A!==void 0?SA(SA({},A),f.props):{},m=h.dataKey,p=h.name,g=h.legendType,x=h.hide;return{inactive:x,dataKey:m,type:c.iconType||g||"square",color:p3(f),value:p||m,payload:h}}),SA(SA(SA({},c),vc.getWithHeight(o,a)),{},{payload:u,item:o})};function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function D8(t){return yLe(t)||bLe(t)||vLe(t)||xLe()}function xLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vLe(t,e){if(t){if(typeof t=="string")return lI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lI(t,e)}}function bLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yLe(t){if(Array.isArray(t))return lI(t)}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ms(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(r),!0).forEach(function(n){s0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s0(t,e,r){return e=wLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wLe(t){var e=jLe(t,"string");return Cy(e)=="symbol"?e:e+""}function jLe(t,e){if(Cy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function va(t,e,r){return _r(t)||_r(e)?r:ba(e)?nl(t,e,r):xr(e)?e(t):r}function jb(t,e,r,n){var a=y6e(t,function(l){return va(l,e)});if(r==="number"){var i=a.filter(function(l){return It(l)||parseFloat(l)});return i.length?[CE(i),Ah(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!_r(l)}):a;return o.map(function(l){return ba(l)||l instanceof Date?l:""})}var CLe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,A=u>=l-1?a[0].coordinate:a[u+1].coordinate,h=void 0;if(qi(f-d)!==qi(A-f)){var m=[];if(qi(A-f)===qi(c[1]-c[0])){h=A;var p=f+c[1]-c[0];m[0]=Math.min(p,(p+d)/2),m[1]=Math.max(p,(p+d)/2)}else{h=d;var g=A+c[1]-c[0];m[0]=Math.min(f,(g+f)/2),m[1]=Math.max(f,(g+f)/2)}var x=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){o=a[u].index;break}}else{var v=Math.min(d,A),b=Math.max(d,A);if(e>(v+f)/2&&e<=(b+f)/2){o=a[u].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C===l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2){o=n[C].index;break}return o},p3=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ms(Ms({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},NLe=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),A=0,h=f.length;A<h;A++){var m=d[f[A]],p=m.items,g=m.cateAxisId,x=p.filter(function(N){return Ld(N.type).indexOf("Bar")>=0});if(x&&x.length){var v=x[0].type.defaultProps,b=v!==void 0?Ms(Ms({},v),x[0].props):x[0].props,C=b.barSize,j=b[g];o[j]||(o[j]=[]);var w=_r(C)?r:C;o[j].push({item:x[0],stackList:x.slice(1),barSize:_r(w)?void 0:Ki(w,n,0)})}}return o},SLe=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Ki(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var A=!1,h=a/c,m=o.reduce(function(C,j){return C+j.barSize||0},0);m+=(c-1)*u,m>=a&&(m-=(c-1)*u,u=0),m>=a&&h>0&&(A=!0,h*=.9,m=c*h);var p=(a-m)/2>>0,g={offset:p-u,size:0};d=o.reduce(function(C,j){var w={item:j.item,position:{offset:g.offset+g.size+u,size:A?h:j.barSize}},N=[].concat(D8(C),[w]);return g=N[N.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){N.push({item:E,position:g})}),N},f)}else{var x=Ki(n,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var v=(a-2*x-(c-1)*u)/c;v>1&&(v>>=0);var b=l===+l?Math.min(v,l):v;d=o.reduce(function(C,j,w){var N=[].concat(D8(C),[{item:j.item,position:{offset:x+(v+u)*w+(v-b)/2,size:b}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){N.push({item:E,position:N[N.length-1].position})}),N},f)}return d},ELe=function(e,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=PJ({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,A=d.height,h=u.align,m=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&m==="middle")&&h!=="center"&&It(e[h]))return Ms(Ms({},e),{},s0({},h,e[h]+(f||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&m!=="middle"&&It(e[m]))return Ms(Ms({},e),{},s0({},m,e[m]+(A||0)))}return e},BLe=function(e,r,n){return _r(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},kJ=function(e,r,n,a,i){var o=r.props.children,l=Dl(o,EE).filter(function(u){return BLe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=va(d,n);if(_r(f))return u;var A=Array.isArray(f)?[CE(f),Ah(f)]:[f,f],h=c.reduce(function(m,p){var g=va(d,p,0),x=A[0]-Math.abs(Array.isArray(g)?g[0]:g),v=A[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(x,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},TLe=function(e,r,n,a,i){var o=r.map(function(l){return kJ(e,l,n,i,a)}).filter(function(l){return!_r(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},OJ=function(e,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&kJ(e,c,u,a)||jb(e,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},FJ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},RJ=function(e,r,n,a){if(a)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Id=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?qi(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var A=i?i.indexOf(f):f;return{coordinate:a(A)+u,value:f,offset:u}});return d.filter(function(f){return!Rx(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,A){return{coordinate:a(f)+u,value:f,index:A,offset:u}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,A){return{coordinate:a(f)+u,value:i?i[f]:f,index:A,offset:u}})},hT=new WeakMap,oj=function(e,r){if(typeof r!="function")return e;hT.has(e)||hT.set(e,new WeakMap);var n=hT.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},MJ=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:py(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:wC(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wb(),realScaleType:"point"}:i==="category"?{scale:py(),realScaleType:"band"}:{scale:wC(),realScaleType:"linear"};if(Rm(a)){var c="scale".concat(uE(a));return{scale:(C8[c]||wb)(),realScaleType:C8[c]?c:"point"}}return xr(a)?{scale:a}:{scale:wb(),realScaleType:"point"}},_8=1e-4,LJ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-_8,o=Math.max(a[0],a[1])+_8,l=e(r[0]),c=e(r[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([r[0],r[n-1]])}},DLe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},ILe=function(e,r){if(!r||r.length!==2||!It(r[0])||!It(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!It(e[0])||e[0]<n)&&(i[0]=n),(!It(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},_Le=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Rx(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},PLe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Rx(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},kLe={sign:_Le,expand:eTe,none:B0,silhouette:tTe,wiggle:rTe,positive:PLe},OLe=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),i=kLe[n],o=ZBe().keys(a).value(function(l,c){return+va(l,c,0)}).order(PD).offset(i);return o(e)},FLe=function(e,r,n,a,i,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,A){var h,m=(h=A.type)!==null&&h!==void 0&&h.defaultProps?Ms(Ms({},A.type.defaultProps),A.props):A.props,p=m.stackId,g=m.hide;if(g)return f;var x=m[n],v=f[x]||{hasStack:!1,stackGroups:{}};if(ba(p)){var b=v.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(A),v.hasStack=!0,v.stackGroups[p]=b}else v.stackGroups[Mx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[A]};return Ms(Ms({},f),{},s0({},x,v))},c),d={};return Object.keys(u).reduce(function(f,A){var h=u[A];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,g){var x=h.stackGroups[g];return Ms(Ms({},p),{},s0({},g,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:OLe(e,x.items,i)}))},m)}return Ms(Ms({},f),{},s0({},A,h))},d)},UJ=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=X6e(u,i,l);return e.domain([CE(d),Ah(d)]),{niceTicks:d}}if(i&&a==="number"){var f=e.domain(),A=J6e(f,i,l);return{niceTicks:A}}return null};function P8(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!_r(a[e.dataKey])){var l=tC(r,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=va(a,_r(o)?e.dataKey:o);return _r(c)?null:e.scale(c)}var k8=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=va(o,r.dataKey,r.domain[l]);return _r(c)?null:r.scale(c)-i/2+a},RLe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},MLe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ms(Ms({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(ba(i)){var o=r[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},LLe=function(e){return e.reduce(function(r,n){return[CE(n.concat([r[0]]).filter(It)),Ah(n.concat([r[1]]).filter(It))]},[1/0,-1/0])},$J=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],l=o.stackedData,c=l.reduce(function(u,d){var f=LLe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},O8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cI=function(e,r,n){if(xr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(It(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(O8.test(e[0])){var i=+O8.exec(e[0])[1];a[0]=r[0]-i}else xr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(It(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(F8.test(e[1])){var o=+F8.exec(e[1])[1];a[1]=r[1]+o}else xr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},TC=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=zO(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},R8=function(e,r,n){return!e||!e.length||R0(e,nl(n,"type.defaultProps.domain"))?r:e},HJ=function(e,r){var n=e.type.defaultProps?Ms(Ms({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ms(Ms({},cr(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:p3(e),value:va(r,a),type:c,payload:r,chartType:u,hide:d})};function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function M8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(r),!0).forEach(function(n){QJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QJ(t,e,r){return e=ULe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ULe(t){var e=$Le(t,"string");return Ny(e)=="symbol"?e:e+""}function $Le(t,e){if(Ny(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ny(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HLe(t,e){return WLe(t)||VLe(t,e)||zLe(t,e)||QLe()}function QLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zLe(t,e){if(t){if(typeof t=="string")return L8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L8(t,e)}}function L8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function WLe(t){if(Array.isArray(t))return t}var DC=Math.PI/180,GLe=function(e){return e*180/Math.PI},Xn=function(e,r,n,a){return{x:e+Math.cos(-DC*a)*n,y:r+Math.sin(-DC*a)*n}},zJ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},qLe=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Ki(e.cx,o,o/2),f=Ki(e.cy,l,l/2),A=zJ(o,l,n),h=Ki(e.innerRadius,A,0),m=Ki(e.outerRadius,A,A*.8),p=Object.keys(r);return p.reduce(function(g,x){var v=r[x],b=v.domain,C=v.reversed,j;if(_r(v.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[h,m]),C&&(j=[j[1],j[0]]);else{j=v.range;var w=j,N=HLe(w,2);c=N[0],u=N[1]}var E=MJ(v,i),_=E.realScaleType,k=E.scale;k.domain(b).range(j),LJ(k);var D=UJ(k,xd(xd({},v),{},{realScaleType:_})),S=xd(xd(xd({},v),D),{},{range:j,radius:m,realScaleType:_,scale:k,cx:d,cy:f,innerRadius:h,outerRadius:m,startAngle:c,endAngle:u});return xd(xd({},g),{},QJ({},x,S))},{})},KLe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},YLe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,l=KLe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:GLe(u),angleInRadian:u}},XLe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},JLe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return e+l*360},U8=function(e,r){var n=e.x,a=e.y,i=YLe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=XLe(r),f=d.startAngle,A=d.endAngle,h=l,m;if(f<=A){for(;h>A;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=A}else{for(;h>f;)h-=360;for(;h<A;)h+=360;m=h>=A&&h<=f}return m?xd(xd({},r),{},{radius:o,angle:JLe(h,r)}):null},VJ=function(e){return!y.isValidElement(e)&&!xr(e)&&typeof e!="boolean"?e.className:""};function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}var ZLe=["offset"];function eUe(t){return sUe(t)||nUe(t)||rUe(t)||tUe()}function tUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rUe(t,e){if(t){if(typeof t=="string")return uI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uI(t,e)}}function nUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sUe(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aUe(t,e){if(t==null)return{};var r=iUe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iUe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(r),!0).forEach(function(n){oUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oUe(t,e,r){return e=lUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lUe(t){var e=cUe(t,"string");return Sy(e)=="symbol"?e:e+""}function cUe(t,e){if(Sy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ey(){return Ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ey.apply(this,arguments)}var uUe=function(e){var r=e.value,n=e.formatter,a=_r(e.children)?r:e.children;return xr(n)?n(a):a},dUe=function(e,r){var n=qi(r-e),a=Math.min(Math.abs(r-e),360);return n*a},fUe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,A=c.outerRadius,h=c.startAngle,m=c.endAngle,p=c.clockWise,g=(f+A)/2,x=dUe(h,m),v=x>=0?1:-1,b,C;a==="insideStart"?(b=h+v*o,C=p):a==="insideEnd"?(b=m-v*o,C=!p):a==="end"&&(b=m+v*o,C=p),C=x<=0?C:!C;var j=Xn(u,d,g,b),w=Xn(u,d,g,b+(C?1:-1)*359),N="M".concat(j.x,",").concat(j.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(w.x,",").concat(w.y),E=_r(e.id)?Mx("recharts-radial-line-"):e.id;return le.createElement("text",Ey({},n,{dominantBaseline:"central",className:qt("recharts-radial-bar-label",l)}),le.createElement("defs",null,le.createElement("path",{id:E,d:N})),le.createElement("textPath",{xlinkHref:"#".concat(E)},r))},hUe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,A=(d+f)/2;if(a==="outside"){var h=Xn(o,l,u+n,A),m=h.x,p=h.y;return{x:m,y:p,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,x=Xn(o,l,g,A),v=x.x,b=x.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},AUe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,A=f*a,h=f>0?"end":"start",m=f>0?"start":"end",p=u>=0?1:-1,g=p*a,x=p>0?"end":"start",v=p>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:h};return pa(pa({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var C={x:l+u/2,y:c+d+A,textAnchor:"middle",verticalAnchor:m};return pa(pa({},C),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return pa(pa({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var w={x:l+u+g,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return pa(pa({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:d}:{})}var N=n?{width:u,height:d}:{};return i==="insideLeft"?pa({x:l+g,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},N):i==="insideRight"?pa({x:l+u-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},N):i==="insideTop"?pa({x:l+u/2,y:c+A,textAnchor:"middle",verticalAnchor:m},N):i==="insideBottom"?pa({x:l+u/2,y:c+d-A,textAnchor:"middle",verticalAnchor:h},N):i==="insideTopLeft"?pa({x:l+g,y:c+A,textAnchor:v,verticalAnchor:m},N):i==="insideTopRight"?pa({x:l+u-g,y:c+A,textAnchor:x,verticalAnchor:m},N):i==="insideBottomLeft"?pa({x:l+g,y:c+d-A,textAnchor:v,verticalAnchor:h},N):i==="insideBottomRight"?pa({x:l+u-g,y:c+d-A,textAnchor:x,verticalAnchor:h},N):Px(i)&&(It(i.x)||tm(i.x))&&(It(i.y)||tm(i.y))?pa({x:l+Ki(i.x,u),y:c+Ki(i.y,d),textAnchor:"end",verticalAnchor:"end"},N):pa({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},mUe=function(e){return"cx"in e&&It(e.cx)};function Ta(t){var e=t.offset,r=e===void 0?5:e,n=aUe(t,ZLe),a=pa({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,A=a.textBreakAll;if(!i||_r(l)&&_r(c)&&!y.isValidElement(u)&&!xr(u))return null;if(y.isValidElement(u))return y.cloneElement(u,a);var h;if(xr(u)){if(h=y.createElement(u,a),y.isValidElement(h))return h}else h=uUe(a);var m=mUe(i),p=cr(a,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return fUe(a,h,p);var g=m?hUe(a):AUe(a);return le.createElement(Lm,Ey({className:qt("recharts-label",f)},p,g,{breakAll:A}),h)}Ta.displayName="Label";var WJ=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,A=e.y,h=e.top,m=e.left,p=e.width,g=e.height,x=e.clockWise,v=e.labelViewBox;if(v)return v;if(It(p)&&It(g)){if(It(f)&&It(A))return{x:f,y:A,width:p,height:g};if(It(h)&&It(m))return{x:h,y:m,width:p,height:g}}return It(f)&&It(A)?{x:f,y:A,width:0,height:0}:It(r)&&It(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:e.viewBox?e.viewBox:{}},pUe=function(e,r){return e?e===!0?le.createElement(Ta,{key:"label-implicit",viewBox:r}):ba(e)?le.createElement(Ta,{key:"label-implicit",viewBox:r,value:e}):y.isValidElement(e)?e.type===Ta?y.cloneElement(e,{key:"label-implicit",viewBox:r}):le.createElement(Ta,{key:"label-implicit",content:e,viewBox:r}):xr(e)?le.createElement(Ta,{key:"label-implicit",content:e,viewBox:r}):Px(e)?le.createElement(Ta,Ey({viewBox:r},e,{key:"label-implicit"})):null:null},gUe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=WJ(e),o=Dl(a,Ta).map(function(c,u){return y.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=pUe(e.label,r||i);return[l].concat(eUe(o))};Ta.parseViewBox=WJ;Ta.renderCallByParent=gUe;function xUe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var vUe=xUe;const bUe=ln(vUe);function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}var yUe=["valueAccessor"],wUe=["data","dataKey","clockWise","id","textBreakAll"];function jUe(t){return EUe(t)||SUe(t)||NUe(t)||CUe()}function CUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NUe(t,e){if(t){if(typeof t=="string")return dI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dI(t,e)}}function SUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EUe(t){if(Array.isArray(t))return dI(t)}function dI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IC(){return IC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IC.apply(this,arguments)}function H8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Q8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H8(Object(r),!0).forEach(function(n){BUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BUe(t,e,r){return e=TUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TUe(t){var e=DUe(t,"string");return By(e)=="symbol"?e:e+""}function DUe(t,e){if(By(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(By(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z8(t,e){if(t==null)return{};var r=IUe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function IUe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _Ue=function(e){return Array.isArray(e.value)?bUe(e.value):e.value};function $d(t){var e=t.valueAccessor,r=e===void 0?_Ue:e,n=z8(t,yUe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=z8(n,wUe);return!a||!a.length?null:le.createElement(rn,{className:"recharts-label-list"},a.map(function(d,f){var A=_r(i)?r(d,f):va(d&&d.payload,i),h=_r(l)?{}:{id:"".concat(l,"-").concat(f)};return le.createElement(Ta,IC({},cr(d,!0),u,h,{parentViewBox:d.parentViewBox,value:A,textBreakAll:c,viewBox:Ta.parseViewBox(_r(o)?d:Q8(Q8({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}$d.displayName="LabelList";function PUe(t,e){return t?t===!0?le.createElement($d,{key:"labelList-implicit",data:e}):le.isValidElement(t)||xr(t)?le.createElement($d,{key:"labelList-implicit",data:e,content:t}):Px(t)?le.createElement($d,IC({data:e},t,{key:"labelList-implicit"})):null:null}function kUe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Dl(n,$d).map(function(o,l){return y.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var i=PUe(t.label,e);return[i].concat(jUe(a))}$d.renderCallByParent=kUe;function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function fI(){return fI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fI.apply(this,arguments)}function V8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function W8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(r),!0).forEach(function(n){OUe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OUe(t,e,r){return e=FUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FUe(t){var e=RUe(t,"string");return Ty(e)=="symbol"?e:e+""}function RUe(t,e){if(Ty(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ty(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MUe=function(e,r){var n=qi(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},lj=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/DC,A=u?i:i+o*f,h=Xn(r,n,d,A),m=Xn(r,n,a,A),p=u?i-o*f:i,g=Xn(r,n,d*Math.cos(f*DC),p);return{center:h,circleTangency:m,lineTangency:g,theta:f}},GJ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=MUe(o,l),u=o+c,d=Xn(r,n,i,o),f=Xn(r,n,i,u),A="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var h=Xn(r,n,a,o),m=Xn(r,n,a,u);A+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else A+="L ".concat(r,",").concat(n," Z");return A},LUe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=qi(d-u),A=lj({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),h=A.circleTangency,m=A.lineTangency,p=A.theta,g=lj({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,v=g.lineTangency,b=g.theta,C=c?Math.abs(u-d):Math.abs(u-d)-p-b;if(C<0)return l?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):GJ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var w=lj({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=w.circleTangency,E=w.lineTangency,_=w.theta,k=lj({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=k.circleTangency,S=k.lineTangency,F=k.theta,M=c?Math.abs(u-d):Math.abs(u-d)-_-F;if(M<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},UUe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},qJ=function(e){var r=W8(W8({},UUe),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,A=r.className;if(o<i||d===f)return null;var h=qt("recharts-sector",A),m=o-i,p=Ki(l,m,0,!0),g;return p>0&&Math.abs(d-f)<360?g=LUe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,m/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):g=GJ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),le.createElement("path",fI({},cr(r,!0),{className:h,d:g,role:"img"}))};function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function hI(){return hI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hI.apply(this,arguments)}function G8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function q8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(r),!0).forEach(function(n){$Ue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Ue(t,e,r){return e=HUe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HUe(t){var e=QUe(t,"string");return Dy(e)=="symbol"?e:e+""}function QUe(t,e){if(Dy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K8={curveBasisClosed:HBe,curveBasisOpen:QBe,curveBasis:$Be,curveBumpX:EBe,curveBumpY:BBe,curveLinearClosed:zBe,curveLinear:fE,curveMonotoneX:VBe,curveMonotoneY:WBe,curveNatural:GBe,curveStep:qBe,curveStepAfter:YBe,curveStepBefore:KBe},cj=function(e){return e.x===+e.x&&e.y===+e.y},Wv=function(e){return e.x},Gv=function(e){return e.y},zUe=function(e,r){if(xr(e))return e;var n="curve".concat(uE(e));return(n==="curveMonotone"||n==="curveBump")&&r?K8["".concat(n).concat(r==="vertical"?"Y":"X")]:K8[n]||fE},VUe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=zUe(n,l),f=u?i.filter(function(p){return cj(p)}):i,A;if(Array.isArray(o)){var h=u?o.filter(function(p){return cj(p)}):o,m=f.map(function(p,g){return q8(q8({},p),{},{base:h[g]})});return l==="vertical"?A=Z1().y(Gv).x1(Wv).x0(function(p){return p.base.x}):A=Z1().x(Wv).y1(Gv).y0(function(p){return p.base.y}),A.defined(cj).curve(d),A(m)}return l==="vertical"&&It(o)?A=Z1().y(Gv).x1(Wv).x0(o):It(o)?A=Z1().x(Wv).y1(Gv).y0(o):A=HY().x(Wv).y(Gv),A.defined(cj).curve(d),A(f)},a0=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?VUe(e):a;return le.createElement("path",hI({},cr(e,!1),rC(e),{className:qt("recharts-curve",r),d:o,ref:i}))},WUe=Object.getOwnPropertyNames,GUe=Object.getOwnPropertySymbols,qUe=Object.prototype.hasOwnProperty;function Y8(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function uj(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=t(r,n,a);return i.delete(r),i.delete(n),c}}function X8(t){return WUe(t).concat(GUe(t))}var KUe=Object.hasOwn||function(t,e){return qUe.call(t,e)};function up(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var YUe="__v",XUe="__o",JUe="_owner",J8=Object.getOwnPropertyDescriptor,Z8=Object.keys;function ZUe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function e8e(t,e){return up(t.getTime(),e.getTime())}function t8e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function r8e(t,e){return t===e}function e$(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=e.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var A=o.value,h=l.value;if(r.equals(A[0],h[0],c,f,t,e,r)&&r.equals(A[1],h[1],A[0],h[0],t,e,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var n8e=up;function s8e(t,e,r){var n=Z8(t),a=n.length;if(Z8(e).length!==a)return!1;for(;a-- >0;)if(!KJ(t,e,r,n[a]))return!1;return!0}function qv(t,e,r){var n=X8(t),a=n.length;if(X8(e).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!KJ(t,e,r,i)||(o=J8(t,i),l=J8(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function a8e(t,e){return up(t.valueOf(),e.valueOf())}function i8e(t,e){return t.source===e.source&&t.flags===e.flags}function t$(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),o,l;(o=i.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function o8e(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function l8e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function KJ(t,e,r,n){return(n===JUe||n===XUe||n===YUe)&&(t.$$typeof||e.$$typeof)?!0:KUe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var c8e="[object Arguments]",u8e="[object Boolean]",d8e="[object Date]",f8e="[object Error]",h8e="[object Map]",A8e="[object Number]",m8e="[object Object]",p8e="[object RegExp]",g8e="[object Set]",x8e="[object String]",v8e="[object URL]",b8e=Array.isArray,r$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,n$=Object.assign,y8e=Object.prototype.toString.call.bind(Object.prototype.toString);function w8e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,A=t.areUrlsEqual;return function(m,p,g){if(m===p)return!0;if(m==null||p==null)return!1;var x=typeof m;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(m,p,g):x==="function"?a(m,p,g):!1;var v=m.constructor;if(v!==p.constructor)return!1;if(v===Object)return l(m,p,g);if(b8e(m))return e(m,p,g);if(r$!=null&&r$(m))return f(m,p,g);if(v===Date)return r(m,p,g);if(v===RegExp)return u(m,p,g);if(v===Map)return i(m,p,g);if(v===Set)return d(m,p,g);var b=y8e(m);return b===d8e?r(m,p,g):b===p8e?u(m,p,g):b===h8e?i(m,p,g):b===g8e?d(m,p,g):b===m8e?typeof m.then!="function"&&typeof p.then!="function"&&l(m,p,g):b===v8e?A(m,p,g):b===f8e?n(m,p,g):b===c8e?l(m,p,g):b===u8e||b===A8e||b===x8e?c(m,p,g):!1}}function j8e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?qv:ZUe,areDatesEqual:e8e,areErrorsEqual:t8e,areFunctionsEqual:r8e,areMapsEqual:n?Y8(e$,qv):e$,areNumbersEqual:n8e,areObjectsEqual:n?qv:s8e,arePrimitiveWrappersEqual:a8e,areRegExpsEqual:i8e,areSetsEqual:n?Y8(t$,qv):t$,areTypedArraysEqual:n?qv:o8e,areUrlsEqual:l8e};if(r&&(a=n$({},a,r(a))),e){var i=uj(a.areArraysEqual),o=uj(a.areMapsEqual),l=uj(a.areObjectsEqual),c=uj(a.areSetsEqual);a=n$({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function C8e(t){return function(e,r,n,a,i,o,l){return t(e,r,l)}}function N8e(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,u){var d=n(),f=d.cache,A=f===void 0?e?new WeakMap:void 0:f,h=d.meta;return r(c,u,{cache:A,equals:a,meta:h,strict:i})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var S8e=Xh();Xh({strict:!0});Xh({circular:!0});Xh({circular:!0,strict:!0});Xh({createInternalComparator:function(){return up}});Xh({strict:!0,createInternalComparator:function(){return up}});Xh({circular:!0,createInternalComparator:function(){return up}});Xh({circular:!0,createInternalComparator:function(){return up},strict:!0});function Xh(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,i=t.strict,o=i===void 0?!1:i,l=j8e(t),c=w8e(l),u=n?n(c):C8e(c);return N8e({circular:r,comparator:c,createState:a,equals:u,strict:o})}function E8e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function s$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):E8e(a)};requestAnimationFrame(n)}function AI(t){"@babel/helpers - typeof";return AI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AI(t)}function B8e(t){return _8e(t)||I8e(t)||D8e(t)||T8e()}function T8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D8e(t,e){if(t){if(typeof t=="string")return a$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a$(t,e)}}function a$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I8e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _8e(t){if(Array.isArray(t))return t}function P8e(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=B8e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){s$(a.bind(null,u),c);return}a(c),s$(a.bind(null,u));return}AI(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function i$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function o$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(r),!0).forEach(function(n){YJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YJ(t,e,r){return e=k8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k8e(t){var e=O8e(t,"string");return Iy(e)==="symbol"?e:String(e)}function O8e(t,e){if(Iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F8e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},R8e=function(e){return e},M8e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Cb=function(e,r){return Object.keys(r).reduce(function(n,a){return o$(o$({},n),{},YJ({},a,e(a,r[a])))},{})},l$=function(e,r,n){return e.map(function(a){return"".concat(M8e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function L8e(t,e){return H8e(t)||$8e(t,e)||XJ(t,e)||U8e()}function U8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function H8e(t){if(Array.isArray(t))return t}function Q8e(t){return W8e(t)||V8e(t)||XJ(t)||z8e()}function z8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XJ(t,e){if(t){if(typeof t=="string")return mI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mI(t,e)}}function V8e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function W8e(t){if(Array.isArray(t))return mI(t)}function mI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _C=1e-4,JJ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},ZJ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},c$=function(e,r){return function(n){var a=JJ(e,r);return ZJ(a,n)}},G8e=function(e,r){return function(n){var a=JJ(e,r),i=[].concat(Q8e(a.map(function(o,l){return o*l}).slice(1)),[0]);return ZJ(i,n)}},u$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=L8e(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=c$(a,o),A=c$(i,l),h=G8e(a,o),m=function(x){return x>1?1:x<0?0:x},p=function(x){for(var v=x>1?1:x,b=v,C=0;C<8;++C){var j=f(b)-v,w=h(b);if(Math.abs(j-v)<_C||w<_C)return A(b);b=m(b-j/w)}return A(b)};return p.isStepper=!1,p},q8e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(d,f,A){var h=-(d-f)*n,m=A*i,p=A+(h-m)*l/1e3,g=A*l/1e3+d;return Math.abs(g-f)<_C&&Math.abs(p)<_C?[f,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},K8e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return u$(a);case"spring":return q8e();default:if(a.split("(")[0]==="cubic-bezier")return u$(a)}return typeof a=="function"?a:null};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function d$(t){return J8e(t)||X8e(t)||eZ(t)||Y8e()}function Y8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X8e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J8e(t){if(Array.isArray(t))return gI(t)}function f$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(r),!0).forEach(function(n){pI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pI(t,e,r){return e=Z8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z8e(t){var e=e$e(t,"string");return _y(e)==="symbol"?e:String(e)}function e$e(t,e){if(_y(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_y(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t$e(t,e){return s$e(t)||n$e(t,e)||eZ(t,e)||r$e()}function r$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eZ(t,e){if(t){if(typeof t=="string")return gI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gI(t,e)}}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n$e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function s$e(t){if(Array.isArray(t))return t}var PC=function(e,r,n){return e+(r-e)*n},xI=function(e){var r=e.from,n=e.to;return r!==n},a$e=function t(e,r,n){var a=Cb(function(i,o){if(xI(o)){var l=e(o.from,o.to,o.velocity),c=t$e(l,2),u=c[0],d=c[1];return Qa(Qa({},o),{},{from:u,velocity:d})}return o},r);return n<1?Cb(function(i,o){return xI(o)?Qa(Qa({},o),{},{velocity:PC(o.velocity,a[i].velocity,n),from:PC(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const i$e=function(t,e,r,n,a){var i=F8e(t,e),o=i.reduce(function(g,x){return Qa(Qa({},g),{},pI({},x,[t[x],e[x]]))},{}),l=i.reduce(function(g,x){return Qa(Qa({},g),{},pI({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,d,f=function(){return null},A=function(){return Cb(function(x,v){return v.from},l)},h=function(){return!Object.values(l).filter(xI).length},m=function(x){u||(u=x);var v=x-u,b=v/r.dt;l=a$e(r,l,b),a(Qa(Qa(Qa({},t),e),A())),u=x,h()||(c=requestAnimationFrame(f))},p=function(x){d||(d=x);var v=(x-d)/n,b=Cb(function(j,w){return PC.apply(void 0,d$(w).concat([r(v)]))},o);if(a(Qa(Qa(Qa({},t),e),b)),v<1)c=requestAnimationFrame(f);else{var C=Cb(function(j,w){return PC.apply(void 0,d$(w).concat([r(1)]))},o);a(Qa(Qa(Qa({},t),e),C))}};return f=r.isStepper?m:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function L0(t){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}var o$e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function l$e(t,e){if(t==null)return{};var r=c$e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function c$e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function AT(t){return h$e(t)||f$e(t)||d$e(t)||u$e()}function u$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d$e(t,e){if(t){if(typeof t=="string")return vI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vI(t,e)}}function f$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h$e(t){if(Array.isArray(t))return vI(t)}function vI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ac(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(r),!0).forEach(function(n){db(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function db(t,e,r){return e=tZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m$e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tZ(n.key),n)}}function p$e(t,e,r){return e&&m$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tZ(t){var e=g$e(t,"string");return L0(e)==="symbol"?e:String(e)}function g$e(t,e){if(L0(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(L0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bI(t,e)}function v$e(t){var e=b$e();return function(){var n=kC(t),a;if(e){var i=kC(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return yI(this,a)}}function yI(t,e){if(e&&(L0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wI(t)}function wI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kC(t)}var Ru=function(t){x$e(r,t);var e=v$e(r);function r(n,a){var i;A$e(this,r),i=e.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,A=o.children,h=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(wI(i)),i.changeStyle=i.changeStyle.bind(wI(i)),!l||h<=0)return i.state={style:{}},typeof A=="function"&&(i.state={style:d}),yI(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof A=="function")return i.state={style:u},yI(i);i.state={style:c?db({},c,u):u}}else i.state={style:{}};return i}return p$e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,A=this.state.style;if(l){if(!o){var h={style:c?db({},c,d):d};this.state&&A&&(c&&A[c]!==d||!c&&A!==d)&&this.setState(h);return}if(!(S8e(a.to,d)&&a.canBegin&&a.isActive)){var m=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||u?f:a.to;if(this.state&&A){var g={style:c?db({},c,p):p};(c&&A[c]!==p||!c&&A!==p)&&this.setState(g)}this.runAnimation(ac(ac({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,A=a.onAnimationStart,h=i$e(o,l,K8e(u),c,this.changeStyle),m=function(){i.stopJSAnimation=h()};this.manager.start([A,d,m,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,A=f===void 0?0:f,h=function(p,g,x){if(x===0)return p;var v=g.duration,b=g.easing,C=b===void 0?"ease":b,j=g.style,w=g.properties,N=g.onAnimationEnd,E=x>0?o[x-1]:g,_=w||Object.keys(j);if(typeof C=="function"||C==="spring")return[].concat(AT(p),[i.runJSAnimation.bind(i,{from:E.style,to:j,duration:v,easing:C}),v]);var k=l$(_,v,C),D=ac(ac(ac({},E.style),j),{},{transition:k});return[].concat(AT(p),[D,v,N]).filter(R8e)};return this.manager.start([c].concat(AT(o.reduce(h,[d,Math.max(A,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=P8e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,A=a.steps,h=a.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(a);return}if(A.length>1){this.runStepAnimation(a);return}var p=l?db({},l,c):c,g=l$(Object.keys(p),o,u);m.start([d,i,ac(ac({},p),{},{transition:g}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=l$e(a,o$e),u=y.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(h){var m=h.props,p=m.style,g=p===void 0?{}:p,x=m.className,v=y.cloneElement(h,ac(ac({},c),{},{style:ac(ac({},g),d),className:x}));return v};return u===1?f(y.Children.only(i)):le.createElement("div",null,y.Children.map(i,function(A){return f(A)}))}}]),r}(y.PureComponent);Ru.displayName="Animate";Ru.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ru.propTypes={from:Ze.oneOfType([Ze.object,Ze.string]),to:Ze.oneOfType([Ze.object,Ze.string]),attributeName:Ze.string,duration:Ze.number,begin:Ze.number,easing:Ze.oneOfType([Ze.string,Ze.func]),steps:Ze.arrayOf(Ze.shape({duration:Ze.number.isRequired,style:Ze.object.isRequired,easing:Ze.oneOfType([Ze.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ze.func]),properties:Ze.arrayOf("string"),onAnimationEnd:Ze.func})),children:Ze.oneOfType([Ze.node,Ze.func]),isActive:Ze.bool,canBegin:Ze.bool,onAnimationEnd:Ze.func,shouldReAnimate:Ze.bool,onAnimationStart:Ze.func,onAnimationReStart:Ze.func};function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function OC(){return OC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OC.apply(this,arguments)}function y$e(t,e){return N$e(t)||C$e(t,e)||j$e(t,e)||w$e()}function w$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j$e(t,e){if(t){if(typeof t=="string")return A$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A$(t,e)}}function A$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C$e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function N$e(t){if(Array.isArray(t))return t}function m$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function p$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(r),!0).forEach(function(n){S$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S$e(t,e,r){return e=E$e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E$e(t){var e=B$e(t,"string");return Py(e)=="symbol"?e:e+""}function B$e(t,e){if(Py(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Py(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g$=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],A=0,h=4;A<h;A++)f[A]=i[A]>o?o:i[A];d="M".concat(e,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(r)),d+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*f[1])),d+="L ".concat(e+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-c*f[2],",").concat(r+a)),d+="L ".concat(e+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);d="M ".concat(e,",").concat(r+l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+c*m,",").concat(r,`
            L `).concat(e+n-c*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*m,`
            L `).concat(e+n,",").concat(r+a-l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n-c*m,",").concat(r+a,`
            L `).concat(e+c*m,",").concat(r+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(r+a-l*m," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},T$e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),A=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=A}return!1},D$e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},g3=function(e){var r=p$(p$({},D$e),e),n=y.useRef(),a=y.useState(-1),i=y$e(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&l(C)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,A=r.radius,h=r.className,m=r.animationEasing,p=r.animationDuration,g=r.animationBegin,x=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=qt("recharts-rectangle",h);return v?le.createElement(Ru,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:m,isActive:v},function(C){var j=C.width,w=C.height,N=C.x,E=C.y;return le.createElement(Ru,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:x,easing:m},le.createElement("path",OC({},cr(r,!0),{className:b,d:g$(N,E,j,w,A),ref:n})))}):le.createElement("path",OC({},cr(r,!0),{className:b,d:g$(c,u,d,f,A)}))},I$e=["points","className","baseLinePoints","connectNulls"];function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hg.apply(this,arguments)}function _$e(t,e){if(t==null)return{};var r=P$e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P$e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function x$(t){return R$e(t)||F$e(t)||O$e(t)||k$e()}function k$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O$e(t,e){if(t){if(typeof t=="string")return jI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jI(t,e)}}function F$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R$e(t){if(Array.isArray(t))return jI(t)}function jI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var v$=function(e){return e&&e.x===+e.x&&e.y===+e.y},M$e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){v$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),v$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Nb=function(e,r){var n=M$e(e);r&&(n=[n.reduce(function(i,o){return[].concat(x$(i),x$(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},L$e=function(e,r,n){var a=Nb(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Nb(r.reverse(),n).slice(1))},U$e=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=_$e(e,I$e);if(!r||!r.length)return null;var l=qt("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=L$e(r,a,i);return le.createElement("g",{className:l},le.createElement("path",Hg({},cr(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?le.createElement("path",Hg({},cr(o,!0),{fill:"none",d:Nb(r,i)})):null,c?le.createElement("path",Hg({},cr(o,!0),{fill:"none",d:Nb(a,i)})):null)}var d=Nb(r,i);return le.createElement("path",Hg({},cr(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CI.apply(this,arguments)}var BE=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=qt("recharts-dot",i);return r===+r&&n===+n&&a===+a?le.createElement("circle",CI({},cr(e,!1),rC(e),{className:o,cx:r,cy:n,r:a})):null};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}var $$e=["x","y","top","left","width","height","className"];function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NI.apply(this,arguments)}function b$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function H$e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(r),!0).forEach(function(n){Q$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q$e(t,e,r){return e=z$e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z$e(t){var e=V$e(t,"string");return ky(e)=="symbol"?e:e+""}function V$e(t,e){if(ky(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ky(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W$e(t,e){if(t==null)return{};var r=G$e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G$e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var q$e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},K$e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,A=e.height,h=A===void 0?0:A,m=e.className,p=W$e(e,$$e),g=H$e({x:n,y:i,top:l,left:u,width:f,height:h},p);return!It(n)||!It(i)||!It(f)||!It(h)||!It(l)||!It(u)?null:le.createElement("path",NI({},cr(g,!0),{className:qt("recharts-cross",m),d:q$e(n,i,f,h,l,u)}))},Y$e=jE,X$e=pJ,J$e=Hu;function Z$e(t,e){return t&&t.length?Y$e(t,J$e(e),X$e):void 0}var e7e=Z$e;const t7e=ln(e7e);var r7e=jE,n7e=Hu,s7e=gJ;function a7e(t,e){return t&&t.length?r7e(t,n7e(e),s7e):void 0}var i7e=a7e;const o7e=ln(i7e);var l7e=["cx","cy","angle","ticks","axisLine"],c7e=["ticks","tick","angle","tickFormatter","stroke"];function U0(t){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0(t)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sb.apply(this,arguments)}function y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(r),!0).forEach(function(n){TE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w$(t,e){if(t==null)return{};var r=u7e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u7e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function d7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nZ(n.key),n)}}function f7e(t,e,r){return e&&j$(t.prototype,e),r&&j$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h7e(t,e,r){return e=FC(e),A7e(t,rZ()?Reflect.construct(e,r||[],FC(t).constructor):e.apply(t,r))}function A7e(t,e){if(e&&(U0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m7e(t)}function m7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rZ=function(){return!!t})()}function FC(t){return FC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},FC(t)}function p7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SI(t,e)}function SI(t,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},SI(t,e)}function TE(t,e,r){return e=nZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nZ(t){var e=g7e(t,"string");return U0(e)=="symbol"?e:e+""}function g7e(t,e){if(U0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DE=function(t){function e(){return d7e(this,e),h7e(this,e,arguments)}return p7e(e,t),f7e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Xn(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=t7e(l,function(d){return d.coordinate||0}),u=o7e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=w$(n,l7e),d=l.reduce(function(m,p){return[Math.min(m[0],p.coordinate),Math.max(m[1],p.coordinate)]},[1/0,-1/0]),f=Xn(a,i,d[0],o),A=Xn(a,i,d[1],o),h=EA(EA(EA({},cr(u,!1)),{},{fill:"none"},cr(c,!1)),{},{x1:f.x,y1:f.y,x2:A.x,y2:A.y});return le.createElement("line",Sb({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=w$(a,c7e),f=this.getTickTextAnchor(),A=cr(d,!1),h=cr(o,!1),m=i.map(function(p,g){var x=n.getTickValueCoord(p),v=EA(EA(EA(EA({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},A),{},{stroke:"none",fill:u},h),{},{index:g},x),{},{payload:p});return le.createElement(rn,Sb({className:qt("recharts-polar-radius-axis-tick",VJ(o)),key:"tick-".concat(p.coordinate)},Mm(n.props,p,g)),e.renderTickItem(o,v,c?c(p.value,g):p.value))});return le.createElement(rn,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:le.createElement(rn,{className:qt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Ta.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,a):xr(n)?o=n(a):o=le.createElement(Lm,Sb({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(y.PureComponent);TE(DE,"displayName","PolarRadiusAxis");TE(DE,"axisType","radiusAxis");TE(DE,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $0(t){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(t)}function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}function C$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function BA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(r),!0).forEach(function(n){IE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aZ(n.key),n)}}function v7e(t,e,r){return e&&N$(t.prototype,e),r&&N$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b7e(t,e,r){return e=RC(e),y7e(t,sZ()?Reflect.construct(e,r||[],RC(t).constructor):e.apply(t,r))}function y7e(t,e){if(e&&($0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w7e(t)}function w7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sZ=function(){return!!t})()}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},RC(t)}function j7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EI(t,e)}function EI(t,e){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},EI(t,e)}function IE(t,e,r){return e=aZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aZ(t){var e=C7e(t,"string");return $0(e)=="symbol"?e:e+""}function C7e(t,e){if($0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N7e=Math.PI/180,S$=1e-5,_E=function(t){function e(){return x7e(this,e),b7e(this,e,arguments)}return j7e(e,t),v7e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Xn(i,o,l,n.coordinate),A=Xn(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:A.x,y2:A.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*N7e),o;return i>S$?o=a==="outer"?"start":"end":i<-S$?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=BA(BA({},cr(this.props,!1)),{},{fill:"none"},cr(l,!1));if(c==="circle")return le.createElement(BE,KA({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(A){return Xn(a,i,o,A.coordinate)});return le.createElement(U$e,KA({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=cr(this.props,!1),f=cr(o,!1),A=BA(BA({},d),{},{fill:"none"},cr(l,!1)),h=i.map(function(m,p){var g=n.getTickLineCoord(m),x=n.getTickTextAnchor(m),v=BA(BA(BA({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:m,x:g.x2,y:g.y2});return le.createElement(rn,KA({className:qt("recharts-polar-angle-axis-tick",VJ(o)),key:"tick-".concat(m.coordinate)},Mm(n.props,m,p)),l&&le.createElement("line",KA({className:"recharts-polar-angle-axis-tick-line"},A,g)),o&&e.renderTickItem(o,v,c?c(m.value,p):m.value))});return le.createElement(rn,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:le.createElement(rn,{className:qt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,a):xr(n)?o=n(a):o=le.createElement(Lm,KA({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(y.PureComponent);IE(_E,"displayName","PolarAngleAxis");IE(_E,"axisType","angleAxis");IE(_E,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var S7e=fX,E7e=S7e(Object.getPrototypeOf,Object),B7e=E7e,T7e=uf,D7e=B7e,I7e=df,_7e="[object Object]",P7e=Function.prototype,k7e=Object.prototype,iZ=P7e.toString,O7e=k7e.hasOwnProperty,F7e=iZ.call(Object);function R7e(t){if(!I7e(t)||T7e(t)!=_7e)return!1;var e=D7e(t);if(e===null)return!0;var r=O7e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&iZ.call(r)==F7e}var M7e=R7e;const L7e=ln(M7e);var U7e=uf,$7e=df,H7e="[object Boolean]";function Q7e(t){return t===!0||t===!1||$7e(t)&&U7e(t)==H7e}var z7e=Q7e;const V7e=ln(z7e);function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function MC(){return MC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MC.apply(this,arguments)}function W7e(t,e){return Y7e(t)||K7e(t,e)||q7e(t,e)||G7e()}function G7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q7e(t,e){if(t){if(typeof t=="string")return E$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E$(t,e)}}function E$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K7e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Y7e(t){if(Array.isArray(t))return t}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){X7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X7e(t,e,r){return e=J7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J7e(t){var e=Z7e(t,"string");return Oy(e)=="symbol"?e:e+""}function Z7e(t,e){if(Oy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D$=function(e,r,n,a,i){var o=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+i),l+="L ".concat(e+n-o/2-a,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},eHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tHe=function(e){var r=T$(T$({},eHe),e),n=y.useRef(),a=y.useState(-1),i=W7e(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,A=r.height,h=r.className,m=r.animationEasing,p=r.animationDuration,g=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||A!==+A||d===0&&f===0||A===0)return null;var v=qt("recharts-trapezoid",h);return x?le.createElement(Ru,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:A,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:A,x:c,y:u},duration:p,animationEasing:m,isActive:x},function(b){var C=b.upperWidth,j=b.lowerWidth,w=b.height,N=b.x,E=b.y;return le.createElement(Ru,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:m},le.createElement("path",MC({},cr(r,!0),{className:v,d:D$(N,E,C,j,w),ref:n})))}):le.createElement("g",null,le.createElement("path",MC({},cr(r,!0),{className:v,d:D$(c,u,d,f,A)})))},rHe=["option","shapeType","propTransformer","activeClassName","isActive"];function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function nHe(t,e){if(t==null)return{};var r=sHe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sHe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){aHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aHe(t,e,r){return e=iHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iHe(t){var e=oHe(t,"string");return Fy(e)=="symbol"?e:e+""}function oHe(t,e){if(Fy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lHe(t,e){return LC(LC({},e),t)}function cHe(t,e){return t==="symbols"}function _$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return le.createElement(g3,r);case"trapezoid":return le.createElement(tHe,r);case"sector":return le.createElement(qJ,r);case"symbols":if(cHe(e))return le.createElement(FO,r);break;default:return null}}function uHe(t){return y.isValidElement(t)?t.props:t}function oZ(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?lHe:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=nHe(t,rHe),u;if(y.isValidElement(e))u=y.cloneElement(e,LC(LC({},c),uHe(e)));else if(xr(e))u=e(c);else if(L7e(e)&&!V7e(e)){var d=a(e,c);u=le.createElement(_$,{shapeType:r,elementProps:d})}else{var f=c;u=le.createElement(_$,{shapeType:r,elementProps:f})}return l?le.createElement(rn,{className:o},u):u}function PE(t,e){return e!=null&&"trapezoids"in t.props}function kE(t,e){return e!=null&&"sectors"in t.props}function Ry(t,e){return e!=null&&"points"in t.props}function dHe(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function fHe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function hHe(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function AHe(t,e){var r;return PE(t,e)?r=dHe:kE(t,e)?r=fHe:Ry(t,e)&&(r=hHe),r}function mHe(t,e){var r;return PE(t,e)?r="trapezoids":kE(t,e)?r="sectors":Ry(t,e)&&(r="points"),r}function pHe(t,e){if(PE(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(kE(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ry(t,e)?e.payload:{}}function gHe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=mHe(r,e),i=pHe(r,e),o=n.filter(function(c,u){var d=R0(i,c),f=r.props[a].filter(function(m){var p=AHe(r,e);return p(m,e)}),A=r.props[a].indexOf(f[f.length-1]),h=u===A;return d&&h}),l=n.indexOf(o[o.length-1]);return l}var s2;function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qg.apply(this,arguments)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){Cl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cZ(n.key),n)}}function vHe(t,e,r){return e&&k$(t.prototype,e),r&&k$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bHe(t,e,r){return e=UC(e),yHe(t,lZ()?Reflect.construct(e,r||[],UC(t).constructor):e.apply(t,r))}function yHe(t,e){if(e&&(H0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wHe(t)}function wHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lZ=function(){return!!t})()}function UC(t){return UC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},UC(t)}function jHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BI(t,e)}function Cl(t,e,r){return e=cZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cZ(t){var e=CHe(t,"string");return H0(e)=="symbol"?e:e+""}function CHe(t,e){if(H0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(H0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nc=function(t){function e(r){var n;return xHe(this,e),n=bHe(this,e,[r]),Cl(n,"pieRef",null),Cl(n,"sectorRefs",[]),Cl(n,"id",Mx("recharts-pie-")),Cl(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xr(a)&&a()}),Cl(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return jHe(e,t),vHe(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=cr(this.props,!1),f=cr(o,!1),A=cr(l,!1),h=o&&o.offsetRadius||20,m=n.map(function(p,g){var x=(p.startAngle+p.endAngle)/2,v=Xn(p.cx,p.cy,p.outerRadius+h,x),b=Wn(Wn(Wn(Wn({},d),p),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(v.x,p.cx)},v),C=Wn(Wn(Wn(Wn({},d),p),{},{fill:"none",stroke:p.fill},A),{},{index:g,points:[Xn(p.cx,p.cy,p.outerRadius,x),v]}),j=c;return _r(c)&&_r(u)?j="value":_r(c)&&(j=u),le.createElement(rn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,b,va(p,j)))});return le.createElement(rn,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),A=c&&a.hasActiveIndex()?c:null,h=f?o:A,m=Wn(Wn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return le.createElement(rn,Qg({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Mm(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),le.createElement(oZ,Qg({option:h,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,A=f.prevSectors,h=f.prevIsAnimationActive;return le.createElement(Ru,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var p=m.t,g=[],x=i&&i[0],v=x.startAngle;return i.forEach(function(b,C){var j=A&&A[C],w=C>0?nl(b,"paddingAngle",0):0;if(j){var N=yo(j.endAngle-j.startAngle,b.endAngle-b.startAngle),E=Wn(Wn({},b),{},{startAngle:v+w,endAngle:v+N(p)+w});g.push(E),v=E.endAngle}else{var _=b.endAngle,k=b.startAngle,D=yo(0,_-k),S=D(p),F=Wn(Wn({},b),{},{startAngle:v+w,endAngle:v+S+w});g.push(F),v=F.endAngle}}),le.createElement(rn,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!R0(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,A=a.outerRadius,h=a.isAnimationActive,m=this.state.isAnimationFinished;if(i||!o||!o.length||!It(u)||!It(d)||!It(f)||!It(A))return null;var p=qt("recharts-pie",l);return le.createElement(rn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),Ta.renderCallByParent(this.props,null,!1),(!h||m)&&$d.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(le.isValidElement(n))return le.cloneElement(n,a);if(xr(n))return n(a);var o=qt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return le.createElement(a0,Qg({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(le.isValidElement(n))return le.cloneElement(n,a);var o=i;if(xr(n)&&(o=n(a),le.isValidElement(o)))return o;var l=qt("recharts-pie-label-text",typeof n!="boolean"&&!xr(n)?n.className:"");return le.createElement(Lm,Qg({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(y.PureComponent);s2=Nc;Cl(Nc,"displayName","Pie");Cl(Nc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!op.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Cl(Nc,"parseDeltaAngle",function(t,e){var r=qi(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Cl(Nc,"getRealPieData",function(t){var e=t.data,r=t.children,n=cr(t,!1),a=Dl(r,P0);return e&&e.length?e.map(function(i,o){return Wn(Wn(Wn({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Wn(Wn({},n),i.props)}):[]});Cl(Nc,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,i=e.height,o=zJ(a,i),l=n+Ki(t.cx,a,a/2),c=r+Ki(t.cy,i,i/2),u=Ki(t.innerRadius,o,0),d=Ki(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Cl(Nc,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Wn(Wn({},e.type.defaultProps),e.props):e.props,a=s2.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,A=n.tooltipType,h=Math.abs(n.minAngle),m=s2.parseCoordinateOfPie(n,r),p=s2.parseDeltaAngle(o,l),g=Math.abs(p),x=u;_r(u)&&_r(f)?(xc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):_r(u)&&(xc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var v=a.filter(function(E){return va(E,x,0)!==0}).length,b=(g>=360?v:v-1)*c,C=g-v*h-b,j=a.reduce(function(E,_){var k=va(_,x,0);return E+(It(k)?k:0)},0),w;if(j>0){var N;w=a.map(function(E,_){var k=va(E,x,0),D=va(E,d,_),S=(It(k)?k:0)/j,F;_?F=N.endAngle+qi(p)*c*(k!==0?1:0):F=o;var M=F+qi(p)*((k!==0?h:0)+S*C),R=(F+M)/2,U=(m.innerRadius+m.outerRadius)/2,z=[{name:D,value:k,payload:E,dataKey:x,type:A}],Q=Xn(m.cx,m.cy,U,R);return N=Wn(Wn(Wn({percent:S,cornerRadius:i,name:D,tooltipPayload:z,midAngle:R,middleRadius:U,tooltipPosition:Q},E),m),{},{value:va(E,x),startAngle:F,endAngle:M,payload:E,paddingAngle:qi(p)*c}),N})}return Wn(Wn({},m),{},{sectors:w,data:a})});var NHe=Math.ceil,SHe=Math.max;function EHe(t,e,r,n){for(var a=-1,i=SHe(NHe((e-t)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=t,t+=r;return o}var BHe=EHe,THe=IX,O$=1/0,DHe=17976931348623157e292;function IHe(t){if(!t)return t===0?t:0;if(t=THe(t),t===O$||t===-O$){var e=t<0?-1:1;return e*DHe}return t===t?t:0}var uZ=IHe,_He=BHe,PHe=pE,mT=uZ;function kHe(t){return function(e,r,n){return n&&typeof n!="number"&&PHe(e,r,n)&&(r=n=void 0),e=mT(e),r===void 0?(r=e,e=0):r=mT(r),n=n===void 0?e<r?1:-1:mT(n),_He(e,r,n,t)}}var OHe=kHe,FHe=OHe,RHe=FHe(),MHe=RHe;const $C=ln(MHe);function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function R$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){dZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dZ(t,e,r){return e=LHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LHe(t){var e=UHe(t,"string");return My(e)=="symbol"?e:e+""}function UHe(t,e){if(My(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(My(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $He=["Webkit","Moz","O","ms"],HHe=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$He.reduce(function(i,o){return R$(R$({},i),{},dZ({},o+n,r))},{});return a[e]=r,a};function Q0(t){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(t)}function HC(){return HC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HC.apply(this,arguments)}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(r),!0).forEach(function(n){Go(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hZ(n.key),n)}}function zHe(t,e,r){return e&&L$(t.prototype,e),r&&L$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VHe(t,e,r){return e=QC(e),WHe(t,fZ()?Reflect.construct(e,r||[],QC(t).constructor):e.apply(t,r))}function WHe(t,e){if(e&&(Q0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GHe(t)}function GHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fZ=function(){return!!t})()}function QC(t){return QC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},QC(t)}function qHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TI(t,e)}function Go(t,e,r){return e=hZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hZ(t){var e=KHe(t,"string");return Q0(e)=="symbol"?e:e+""}function KHe(t,e){if(Q0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YHe=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=wb().domain($C(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},U$=function(e){return e.changedTouches&&!!e.changedTouches.length},z0=function(t){function e(r){var n;return QHe(this,e),n=VHe(this,e,[r]),Go(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Go(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Go(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Go(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Go(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Go(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Go(n,"handleSlideDragStart",function(a){var i=U$(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return qHe(e,t),zHe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),A=Math.max(a,i),h=e.getIndexInRange(o,f),m=e.getIndexInRange(o,A);return{startIndex:h-h%c,endIndex:m===d?d:m-m%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=va(i[n],l,n);return xr(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,A=c.startIndex,h=c.endIndex,m=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==A||g.endIndex!==h)&&m&&m(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=U$(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,A=d.width,h=d.travellerWidth,m=d.onChange,p=d.gap,g=d.data,x={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,f+A-h-u):v<0&&(v=Math.max(v,f-u)),x[o]=u+v;var b=this.getIndex(x),C=b.startIndex,j=b.endIndex,w=function(){var E=g.length-1;return o==="startX"&&(l>c?C%p===0:j%p===0)||l<c&&j===E||o==="endX"&&(l>c?j%p===0:C%p===0)||l>c&&j===E};this.setState(Go(Go({},o,u+v),"brushMoveStartX",n.pageX),function(){m&&w()&&m(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var A=f+n;if(!(A===-1||A>=l.length)){var h=l[A];a==="startX"&&h>=u||a==="endX"&&h<=c||this.setState(Go({},a,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return le.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=y.Children.only(u);return f?le.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,A=c.traveller,h=c.ariaLabel,m=c.data,p=c.startIndex,g=c.endIndex,x=Math.max(n,this.props.x),v=pT(pT({},cr(this.props,!1)),{},{x,y:u,width:d,height:f}),b=h||"Min value: ".concat((i=m[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[g])===null||o===void 0?void 0:o.name);return le.createElement(rn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(A,v))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,A=d.endX,h=5,m={pointerEvents:"none",fill:u};return le.createElement(rn,{className:"recharts-brush-texts"},le.createElement(Lm,HC({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,A)-h,y:o+l/2},m),this.getTextOfTick(a)),le.createElement(Lm,HC({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,A)+c+h,y:o+l/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,A=this.state,h=A.startX,m=A.endX,p=A.isTextActive,g=A.isSlideMoving,x=A.isTravellerMoving,v=A.isTravellerFocused;if(!a||!a.length||!It(l)||!It(c)||!It(u)||!It(d)||u<=0||d<=0)return null;var b=qt("recharts-brush",i),C=le.Children.count(o)===1,j=HHe("userSelect","none");return le.createElement(rn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(p||g||x||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),le.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return le.isValidElement(n)?i=le.cloneElement(n,a):xr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return pT({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?YHe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var A=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:A}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(y.PureComponent);Go(z0,"displayName","Brush");Go(z0,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var XHe=QO;function JHe(t,e){var r;return XHe(t,function(n,a,i){return r=e(n,a,i),!r}),!!r}var ZHe=JHe,eQe=sX,tQe=Hu,rQe=ZHe,nQe=Oo,sQe=pE;function aQe(t,e,r){var n=nQe(t)?eQe:rQe;return r&&sQe(t,e,r)&&(e=void 0),n(t,tQe(e))}var iQe=aQe;const oQe=ln(iQe);var Iu=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},$$=SX;function lQe(t,e,r){e=="__proto__"&&$$?$$(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var cQe=lQe,uQe=cQe,dQe=CX,fQe=Hu;function hQe(t,e){var r={};return e=fQe(e),dQe(t,function(n,a,i){uQe(r,a,e(n,a,i))}),r}var AQe=hQe;const mQe=ln(AQe);function pQe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var gQe=pQe,xQe=QO;function vQe(t,e){var r=!0;return xQe(t,function(n,a,i){return r=!!e(n,a,i),r}),r}var bQe=vQe,yQe=gQe,wQe=bQe,jQe=Hu,CQe=Oo,NQe=pE;function SQe(t,e,r){var n=CQe(t)?yQe:wQe;return r&&NQe(t,e,r)&&(e=void 0),n(t,jQe(e))}var EQe=SQe;const AZ=ln(EQe);var BQe=["x","y"];function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DI.apply(this,arguments)}function H$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(r),!0).forEach(function(n){TQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TQe(t,e,r){return e=DQe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DQe(t){var e=IQe(t,"string");return Ly(e)=="symbol"?e:e+""}function IQe(t,e){if(Ly(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ly(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Qe(t,e){if(t==null)return{};var r=PQe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PQe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kQe(t,e){var r=t.x,n=t.y,a=_Qe(t,BQe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||a.height),d=parseInt(u,10),f="".concat(e.width||a.width),A=parseInt(f,10);return Kv(Kv(Kv(Kv(Kv({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:A,name:e.name,radius:e.radius})}function Q$(t){return le.createElement(oZ,DI({shapeType:"rectangle",propTransformer:kQe,activeClassName:"recharts-active-bar"},t))}var OQe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=typeof n=="number";return i?e(n,a):(i||Nm(),r)}},FQe=["value","background"],mZ;function V0(t){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(t)}function RQe(t,e){if(t==null)return{};var r=MQe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function MQe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zC(){return zC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zC.apply(this,arguments)}function z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ia(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(r),!0).forEach(function(n){mh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gZ(n.key),n)}}function UQe(t,e,r){return e&&V$(t.prototype,e),r&&V$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Qe(t,e,r){return e=VC(e),HQe(t,pZ()?Reflect.construct(e,r||[],VC(t).constructor):e.apply(t,r))}function HQe(t,e){if(e&&(V0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QQe(t)}function QQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pZ=function(){return!!t})()}function VC(t){return VC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},VC(t)}function zQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},II(t,e)}function mh(t,e,r){return e=gZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gZ(t){var e=VQe(t,"string");return V0(e)=="symbol"?e:e+""}function VQe(t,e){if(V0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(V0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mu=function(t){function e(){var r;LQe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$Qe(this,e,[].concat(a)),mh(r,"state",{isAnimationFinished:!1}),mh(r,"id",Mx("recharts-bar-")),mh(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),mh(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return zQe(e,t),UQe(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=cr(this.props,!1);return n&&n.map(function(f,A){var h=A===c,m=h?u:o,p=ia(ia(ia({},d),f),{},{isActive:h,option:m,index:A,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return le.createElement(rn,zC({className:"recharts-bar-rectangle"},Mm(a.props,f,A),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(A)}),le.createElement(Q$,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,A=this.state.prevData;return le.createElement(Ru,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,p=i.map(function(g,x){var v=A&&A[x];if(v){var b=yo(v.x,g.x),C=yo(v.y,g.y),j=yo(v.width,g.width),w=yo(v.height,g.height);return ia(ia({},g),{},{x:b(m),y:C(m),width:j(m),height:w(m)})}if(o==="horizontal"){var N=yo(0,g.height),E=N(m);return ia(ia({},g),{},{y:g.y+g.height-E,height:E})}var _=yo(0,g.width),k=_(m);return ia(ia({},g),{},{width:k})});return le.createElement(rn,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!R0(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=cr(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,A=RQe(u,FQe);if(!f)return null;var h=ia(ia(ia(ia(ia({},A),{},{fill:"#eee"},f),c),Mm(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return le.createElement(Q$,zC({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},h))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Dl(d,EE);if(!f)return null;var A=u==="vertical"?o[0].height/2:o[0].width/2,h=function(g,x){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:va(g,x)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return le.createElement(rn,m,f.map(function(p){return le.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:A,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,A=n.height,h=n.isAnimationActive,m=n.background,p=n.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,x=qt("recharts-bar",o),v=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,C=v||b,j=_r(p)?this.id:p;return le.createElement(rn,{className:x},v||b?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(j)},le.createElement("rect",{x:v?u:u-f/2,y:b?d:d-A/2,width:v?f:f*2,height:b?A:A*2}))):null,le.createElement(rn,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(j,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,j),(!h||g)&&$d.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(y.PureComponent);mZ=Mu;mh(Mu,"displayName","Bar");mh(Mu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!op.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});mh(Mu,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,A=t.offset,h=DLe(n,r);if(!h)return null;var m=e.layout,p=r.type.defaultProps,g=p!==void 0?ia(ia({},p),r.props):r.props,x=g.dataKey,v=g.children,b=g.minPointSize,C=m==="horizontal"?o:i,j=u?C.scale.domain():null,w=RLe({numericAxis:C}),N=Dl(v,P0),E=f.map(function(_,k){var D,S,F,M,R,U;u?D=ILe(u[d+k],j):(D=va(_,x),Array.isArray(D)||(D=[w,D]));var z=OQe(b,mZ.defaultProps.minPointSize)(D[1],k);if(m==="horizontal"){var Q,H=[o.scale(D[0]),o.scale(D[1])],q=H[0],X=H[1];S=k8({axis:i,ticks:l,bandSize:a,offset:h.offset,entry:_,index:k}),F=(Q=X??q)!==null&&Q!==void 0?Q:void 0,M=h.size;var $=q-X;if(R=Number.isNaN($)?0:$,U={x:S,y:o.y,width:M,height:o.height},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var K=qi(R||z)*(Math.abs(z)-Math.abs(R));F-=K,R+=K}}else{var se=[i.scale(D[0]),i.scale(D[1])],Z=se[0],ie=se[1];if(S=Z,F=k8({axis:o,ticks:c,bandSize:a,offset:h.offset,entry:_,index:k}),M=ie-Z,R=h.size,U={x:i.x,y:F,width:i.width,height:R},Math.abs(z)>0&&Math.abs(M)<Math.abs(z)){var ee=qi(M||z)*(Math.abs(z)-Math.abs(M));M+=ee}}return ia(ia(ia({},_),{},{x:S,y:F,width:M,height:R,value:u?D:D[1],payload:_,background:U},N&&N[k]&&N[k].props),{},{tooltipPayload:[HJ(r,_)],tooltipPosition:{x:S+M/2,y:F+R/2}})});return ia({data:E,layout:m},A)});function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function WQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xZ(n.key),n)}}function GQe(t,e,r){return e&&W$(t.prototype,e),r&&W$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){OE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OE(t,e,r){return e=xZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xZ(t){var e=qQe(t,"string");return Uy(e)=="symbol"?e:e+""}function qQe(t,e){if(Uy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vZ=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},A=!!qo(u,Mu);return d.reduce(function(h,m){var p=r[m],g=p.orientation,x=p.domain,v=p.padding,b=v===void 0?{}:v,C=p.mirror,j=p.reversed,w="".concat(g).concat(C?"Mirror":""),N,E,_,k,D;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var S=x[1]-x[0],F=1/0,M=p.categoricalDomain.sort(m5e);if(M.forEach(function(se,Z){Z>0&&(F=Math.min((se||0)-(M[Z-1]||0),F))}),Number.isFinite(F)){var R=F/S,U=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(N=R*U/2),p.padding==="no-gap"){var z=Ki(e.barCategoryGap,R*U),Q=R*U/2;N=Q-z-(Q-z)/U*z}}}a==="xAxis"?E=[n.left+(b.left||0)+(N||0),n.left+n.width-(b.right||0)-(N||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(N||0),n.top+n.height-(b.bottom||0)-(N||0)]:E=p.range,j&&(E=[E[1],E[0]]);var H=MJ(p,i,A),q=H.scale,X=H.realScaleType;q.domain(x).range(E),LJ(q);var $=UJ(q,uc(uc({},p),{},{realScaleType:X}));a==="xAxis"?(D=g==="top"&&!C||g==="bottom"&&C,_=n.left,k=f[w]-D*p.height):a==="yAxis"&&(D=g==="left"&&!C||g==="right"&&C,_=f[w]-D*p.width,k=n.top);var K=uc(uc(uc({},p),$),{},{realScaleType:X,x:_,y:k,scale:q,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return K.bandSize=TC(K,$),!p.hide&&a==="xAxis"?f[w]+=(D?-1:1)*K.height:p.hide||(f[w]+=(D?-1:1)*K.width),uc(uc({},h),{},OE({},m,K))},{})},bZ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},KQe=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return bZ({x:r,y:n},{x:a,y:i})},yZ=function(){function t(e){WQe(this,t),this.scale=e}return GQe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();OE(yZ,"EPS",1e-4);var x3=function(e){var r=Object.keys(e).reduce(function(n,a){return uc(uc({},n),{},OE({},a,yZ.create(e[a])))},{});return uc(uc({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return mQe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return AZ(a,function(i,o){return r[o].isInRange(i)})}})};function YQe(t){return(t%180+180)%180}var XQe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=YQe(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},JQe=Hu,ZQe=Ow,e9e=AE;function t9e(t){return function(e,r,n){var a=Object(e);if(!ZQe(e)){var i=JQe(r);e=e9e(e),r=function(l){return i(a[l],l,a)}}var o=t(e,r,n);return o>-1?a[i?e[o]:o]:void 0}}var r9e=t9e,n9e=uZ;function s9e(t){var e=n9e(t),r=e%1;return e===e?r?e-r:e:0}var a9e=s9e,i9e=xX,o9e=Hu,l9e=a9e,c9e=Math.max;function u9e(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:l9e(r);return a<0&&(a=c9e(n+a,0)),i9e(t,o9e(e),a)}var d9e=u9e,f9e=r9e,h9e=d9e,A9e=f9e(h9e),m9e=A9e;const p9e=ln(m9e);var g9e=vEe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),v3=y.createContext(void 0),b3=y.createContext(void 0),wZ=y.createContext(void 0),jZ=y.createContext({}),CZ=y.createContext(void 0),NZ=y.createContext(0),SZ=y.createContext(0),q$=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=g9e(i);return le.createElement(v3.Provider,{value:n},le.createElement(b3.Provider,{value:a},le.createElement(jZ.Provider,{value:i},le.createElement(wZ.Provider,{value:d},le.createElement(CZ.Provider,{value:o},le.createElement(NZ.Provider,{value:u},le.createElement(SZ.Provider,{value:c},l)))))))},x9e=function(){return y.useContext(CZ)},EZ=function(e){var r=y.useContext(v3);r==null&&Nm();var n=r[e];return n==null&&Nm(),n},v9e=function(){var e=y.useContext(v3);return ch(e)},b9e=function(){var e=y.useContext(b3),r=p9e(e,function(n){return AZ(n.domain,Number.isFinite)});return r||ch(e)},BZ=function(e){var r=y.useContext(b3);r==null&&Nm();var n=r[e];return n==null&&Nm(),n},y9e=function(){var e=y.useContext(wZ);return e},w9e=function(){return y.useContext(jZ)},y3=function(){return y.useContext(SZ)},w3=function(){return y.useContext(NZ)};function W0(t){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W0(t)}function j9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DZ(n.key),n)}}function N9e(t,e,r){return e&&C9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S9e(t,e,r){return e=WC(e),E9e(t,TZ()?Reflect.construct(e,r||[],WC(t).constructor):e.apply(t,r))}function E9e(t,e){if(e&&(W0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B9e(t)}function B9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TZ=function(){return!!t})()}function WC(t){return WC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},WC(t)}function T9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_I(t,e)}function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Y$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(n){j3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j3(t,e,r){return e=DZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DZ(t){var e=D9e(t,"string");return W0(e)=="symbol"?e:e+""}function D9e(t,e){if(W0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(W0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function I9e(t,e){return O9e(t)||k9e(t,e)||P9e(t,e)||_9e()}function _9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P9e(t,e){if(t){if(typeof t=="string")return X$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X$(t,e)}}function X$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k9e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function O9e(t){if(Array.isArray(t))return t}function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PI.apply(this,arguments)}var F9e=function(e,r){var n;return le.isValidElement(e)?n=le.cloneElement(e,r):xr(e)?n=e(r):n=le.createElement("line",PI({},r,{className:"recharts-reference-line-line"})),n},R9e=function(e,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,A=i.width,h=i.height;if(n){var m=u.y,p=e.y.apply(m,{position:o});if(Iu(u,"discard")&&!e.y.isInRange(p))return null;var g=[{x:d+A,y:p},{x:d,y:p}];return c==="left"?g.reverse():g}if(r){var x=u.x,v=e.x.apply(x,{position:o});if(Iu(u,"discard")&&!e.x.isInRange(v))return null;var b=[{x:v,y:f+h},{x:v,y:f}];return l==="top"?b.reverse():b}if(a){var C=u.segment,j=C.map(function(w){return e.apply(w,{position:o})});return Iu(u,"discard")&&oQe(j,function(w){return!e.isInRange(w)})?null:j}return null};function M9e(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=x9e(),d=EZ(a),f=BZ(i),A=y9e();if(!u||!A)return null;xc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=x3({x:d.scale,y:f.scale}),m=ba(e),p=ba(r),g=n&&n.length===2,x=R9e(h,m,p,g,A,t.position,d.orientation,f.orientation,t);if(!x)return null;var v=I9e(x,2),b=v[0],C=b.x,j=b.y,w=v[1],N=w.x,E=w.y,_=Iu(t,"hidden")?"url(#".concat(u,")"):void 0,k=Y$(Y$({clipPath:_},cr(t,!0)),{},{x1:C,y1:j,x2:N,y2:E});return le.createElement(rn,{className:qt("recharts-reference-line",l)},F9e(o,k),Ta.renderCallByParent(t,KQe({x1:C,y1:j,x2:N,y2:E})))}var C3=function(t){function e(){return j9e(this,e),S9e(this,e,arguments)}return T9e(e,t),N9e(e,[{key:"render",value:function(){return le.createElement(M9e,this.props)}}])}(le.Component);j3(C3,"displayName","ReferenceLine");j3(C3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kI.apply(this,arguments)}function G0(t){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G0(t)}function J$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Z$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(r),!0).forEach(function(n){FE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_Z(n.key),n)}}function $9e(t,e,r){return e&&U9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function H9e(t,e,r){return e=GC(e),Q9e(t,IZ()?Reflect.construct(e,r||[],GC(t).constructor):e.apply(t,r))}function Q9e(t,e){if(e&&(G0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z9e(t)}function z9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IZ=function(){return!!t})()}function GC(t){return GC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},GC(t)}function V9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OI(t,e)}function FE(t,e,r){return e=_Z(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Z(t){var e=W9e(t,"string");return G0(e)=="symbol"?e:e+""}function W9e(t,e){if(G0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var G9e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=x3({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Iu(e,"discard")&&!o.isInRange(l)?null:l},RE=function(t){function e(){return L9e(this,e),H9e(this,e,arguments)}return V9e(e,t),$9e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=ba(a),d=ba(i);if(xc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=G9e(this.props);if(!f)return null;var A=f.x,h=f.y,m=this.props,p=m.shape,g=m.className,x=Iu(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=Z$(Z$({clipPath:x},cr(this.props,!0)),{},{cx:A,cy:h});return le.createElement(rn,{className:qt("recharts-reference-dot",g)},e.renderDot(p,v),Ta.renderCallByParent(this.props,{x:A-o,y:h-o,width:2*o,height:2*o}))}}])}(le.Component);FE(RE,"displayName","ReferenceDot");FE(RE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});FE(RE,"renderDot",function(t,e){var r;return le.isValidElement(t)?r=le.cloneElement(t,e):xr(t)?r=t(e):r=le.createElement(BE,kI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FI.apply(this,arguments)}function q0(t){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q0(t)}function e7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function t7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e7(Object(r),!0).forEach(function(n){ME(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K9e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kZ(n.key),n)}}function Y9e(t,e,r){return e&&K9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X9e(t,e,r){return e=qC(e),J9e(t,PZ()?Reflect.construct(e,r||[],qC(t).constructor):e.apply(t,r))}function J9e(t,e){if(e&&(q0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z9e(t)}function Z9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PZ=function(){return!!t})()}function qC(t){return qC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qC(t)}function eze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RI(t,e)}function ME(t,e,r){return e=kZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kZ(t){var e=tze(t,"string");return q0(e)=="symbol"?e:e+""}function tze(t,e){if(q0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rze=function(e,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var A=x3({x:d.scale,y:f.scale}),h={x:e?A.x.apply(o,{position:"start"}):A.x.rangeMin,y:n?A.y.apply(c,{position:"start"}):A.y.rangeMin},m={x:r?A.x.apply(l,{position:"end"}):A.x.rangeMax,y:a?A.y.apply(u,{position:"end"}):A.y.rangeMax};return Iu(i,"discard")&&(!A.isInRange(h)||!A.isInRange(m))?null:bZ(h,m)},LE=function(t){function e(){return q9e(this,e),X9e(this,e,arguments)}return eze(e,t),Y9e(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;xc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ba(a),A=ba(i),h=ba(o),m=ba(l),p=this.props.shape;if(!f&&!A&&!h&&!m&&!p)return null;var g=rze(f,A,h,m,this.props);if(!g&&!p)return null;var x=Iu(this.props,"hidden")?"url(#".concat(d,")"):void 0;return le.createElement(rn,{className:qt("recharts-reference-area",c)},e.renderRect(p,t7(t7({clipPath:x},cr(this.props,!0)),g)),Ta.renderCallByParent(this.props,g))}}])}(le.Component);ME(LE,"displayName","ReferenceArea");ME(LE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ME(LE,"renderRect",function(t,e){var r;return le.isValidElement(t)?r=le.cloneElement(t,e):xr(t)?r=t(e):r=le.createElement(g3,FI({},e,{className:"recharts-reference-area-rect"})),r});function OZ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function nze(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return XQe(n,r)}function sze(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function KC(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function aze(t,e){return OZ(t,e+1)}function ize(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:OZ(n,u)};var p=c,g,x=function(){return g===void 0&&(g=r(m,p)),g},v=m.coordinate,b=c===0||KC(t,v,x,d,l);b||(c=0,d=o,u+=1),b&&(d=v+t*(x()/2+a),c+=u)},A;u<=i.length;)if(A=f(),A)return A.v;return[]}function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function r7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function di(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(r),!0).forEach(function(n){oze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oze(t,e,r){return e=lze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lze(t){var e=cze(t,"string");return $y(e)=="symbol"?e:e+""}function cze(t,e){if($y(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uze(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=e.start,c=e.end,u=function(A){var h=i[A],m,p=function(){return m===void 0&&(m=r(h,A)),m};if(A===o-1){var g=t*(h.coordinate+t*p()/2-c);i[A]=h=di(di({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else i[A]=h=di(di({},h),{},{tickCoord:h.coordinate});var x=KC(t,h.tickCoord,p,l,c);x&&(c=h.tickCoord-t*(p()/2+a),i[A]=di(di({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function dze(t,e,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(i){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);o[l-1]=d=di(di({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate});var h=KC(t,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=di(di({},d),{},{isShow:!0}))}for(var m=i?l-1:l,p=function(v){var b=o[v],C,j=function(){return C===void 0&&(C=r(b,v)),C};if(v===0){var w=t*(b.coordinate-t*j()/2-c);o[v]=b=di(di({},b),{},{tickCoord:w<0?b.coordinate-w*t:b.coordinate})}else o[v]=b=di(di({},b),{},{tickCoord:b.coordinate});var N=KC(t,b.tickCoord,j,c,u);N&&(c=b.tickCoord+t*(j()/2+a),o[v]=di(di({},b),{},{isShow:!0}))},g=0;g<m;g++)p(g);return o}function N3(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!a||!a.length||!n)return[];if(It(c)||op.isSsr)return aze(a,typeof c=="number"&&It(c)?c:0);var A=[],h=l==="top"||l==="bottom"?"width":"height",m=d&&h==="width"?yb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},p=function(b,C){var j=xr(u)?u(b.value,C):b.value;return h==="width"?nze(yb(j,{fontSize:e,letterSpacing:r}),m,f):yb(j,{fontSize:e,letterSpacing:r})[h]},g=a.length>=2?qi(a[1].coordinate-a[0].coordinate):1,x=sze(i,g,h);return c==="equidistantPreserveStart"?ize(g,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?A=dze(g,x,p,a,o,c==="preserveStartEnd"):A=uze(g,x,p,a,o),A.filter(function(v){return v.isShow}))}var fze=["viewBox"],hze=["viewBox"],Aze=["ticks"];function K0(t){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K0(t)}function zg(){return zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zg.apply(this,arguments)}function n7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ui(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n7(Object(r),!0).forEach(function(n){S3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gT(t,e){if(t==null)return{};var r=mze(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mze(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RZ(n.key),n)}}function gze(t,e,r){return e&&s7(t.prototype,e),r&&s7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xze(t,e,r){return e=YC(e),vze(t,FZ()?Reflect.construct(e,r||[],YC(t).constructor):e.apply(t,r))}function vze(t,e){if(e&&(K0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bze(t)}function bze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FZ=function(){return!!t})()}function YC(t){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},YC(t)}function yze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MI(t,e)}function MI(t,e){return MI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},MI(t,e)}function S3(t,e,r){return e=RZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RZ(t){var e=wze(t,"string");return K0(e)=="symbol"?e:e+""}function wze(t,e){if(K0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vx=function(t){function e(r){var n;return pze(this,e),n=xze(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return yze(e,t),gze(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=gT(n,fze),l=this.props,c=l.viewBox,u=gT(l,hze);return!t0(i,c)||!t0(o,u)||!t0(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,A=a.tickMargin,h,m,p,g,x,v,b=f?-1:1,C=n.tickSize||d,j=It(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=m=n.coordinate,g=o+ +!f*c,p=g-b*C,v=p-b*A,x=j;break;case"left":p=g=n.coordinate,m=i+ +!f*l,h=m-b*C,x=h-b*A,v=j;break;case"right":p=g=n.coordinate,m=i+ +f*l,h=m+b*C,x=h+b*A,v=j;break;default:h=m=n.coordinate,g=o+ +f*c,p=g+b*C,v=p+b*A,x=j;break}return{line:{x1:h,y1:p,x2:m,y2:g},tick:{x,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Ui(Ui(Ui({},cr(this.props,!1)),cr(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var A=+(c==="top"&&!u||c==="bottom"&&u);f=Ui(Ui({},f),{},{x1:a,y1:i+A*l,x2:a+o,y2:i+A*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=Ui(Ui({},f),{},{x1:a+h*o,y1:i,x2:a+h*o,y2:i+l})}return le.createElement("line",zg({},f,{className:qt("recharts-cartesian-axis-line",nl(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,A=l.unit,h=N3(Ui(Ui({},this.props),{},{ticks:n}),a,i),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=cr(this.props,!1),x=cr(d,!1),v=Ui(Ui({},g),{},{fill:"none"},cr(c,!1)),b=h.map(function(C,j){var w=o.getTickLineCoord(C),N=w.line,E=w.tick,_=Ui(Ui(Ui(Ui({textAnchor:m,verticalAnchor:p},g),{},{stroke:"none",fill:u},x),E),{},{index:j,payload:C,visibleTicksCount:h.length,tickFormatter:f});return le.createElement(rn,zg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Mm(o.props,C,j)),c&&le.createElement("line",zg({},v,N,{className:qt("recharts-cartesian-axis-tick-line",nl(c,"className"))})),d&&e.renderTickItem(d,_,"".concat(xr(f)?f(C.value,j):C.value).concat(A||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,A=f.ticks,h=gT(f,Aze),m=A;return xr(c)&&(m=A&&A.length>0?c(this.props):c(h)),o<=0||l<=0||!m||!m.length?null:le.createElement(rn,{className:qt("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Ta.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,a):xr(n)?o=n(a):o=le.createElement(Lm,zg({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(y.Component);S3(Vx,"displayName","CartesianAxis");S3(Vx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jze=["x1","y1","x2","y2","key"],Cze=["offset"];function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(t)}function a7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a7(Object(r),!0).forEach(function(n){Nze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nze(t,e,r){return e=Sze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sze(t){var e=Eze(t,"string");return $m(e)=="symbol"?e:e+""}function Eze(t,e){if($m(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sm(){return sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sm.apply(this,arguments)}function i7(t,e){if(t==null)return{};var r=Bze(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bze(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Tze=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return le.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function MZ(t,e){var r;if(le.isValidElement(t))r=le.cloneElement(t,e);else if(xr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.key,c=i7(e,jze),u=cr(c,!1);u.offset;var d=i7(u,Cze);r=le.createElement("line",sm({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function Dze(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=mi(mi({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return MZ(a,u)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ize(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=mi(mi({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return MZ(a,u)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _ze(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(A){return Math.round(A+a-a)}).sort(function(A,h){return A-h});a!==d[0]&&d.unshift(0);var f=d.map(function(A,h){var m=!d[h+1],p=m?a+o-A:d[h+1]-A;if(p<=0)return null;var g=h%e.length;return le.createElement("rect",{key:"react-".concat(h),y:A,x:n,height:p,width:i,stroke:"none",fill:e[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Pze(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(A){return Math.round(A+i-i)}).sort(function(A,h){return A-h});i!==d[0]&&d.unshift(0);var f=d.map(function(A,h){var m=!d[h+1],p=m?i+l-A:d[h+1]-A;if(p<=0)return null;var g=h%n.length;return le.createElement("rect",{key:"react-".concat(h),x:A,y:o,width:p,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var kze=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return RJ(N3(mi(mi(mi({},Vx.defaultProps),n),{},{ticks:Id(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},Oze=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return RJ(N3(mi(mi(mi({},Vx.defaultProps),n),{},{ticks:Id(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Ng={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function XC(t){var e,r,n,a,i,o,l=y3(),c=w3(),u=w9e(),d=mi(mi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ng.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Ng.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Ng.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Ng.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Ng.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Ng.verticalFill,x:It(t.x)?t.x:u.left,y:It(t.y)?t.y:u.top,width:It(t.width)?t.width:u.width,height:It(t.height)?t.height:u.height}),f=d.x,A=d.y,h=d.width,m=d.height,p=d.syncWithTicks,g=d.horizontalValues,x=d.verticalValues,v=v9e(),b=b9e();if(!It(h)||h<=0||!It(m)||m<=0||!It(f)||f!==+f||!It(A)||A!==+A)return null;var C=d.verticalCoordinatesGenerator||kze,j=d.horizontalCoordinatesGenerator||Oze,w=d.horizontalPoints,N=d.verticalPoints;if((!w||!w.length)&&xr(j)){var E=g&&g.length,_=j({yAxis:b?mi(mi({},b),{},{ticks:E?g:b.ticks}):void 0,width:l,height:c,offset:u},E?!0:p);xc(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($m(_),"]")),Array.isArray(_)&&(w=_)}if((!N||!N.length)&&xr(C)){var k=x&&x.length,D=C({xAxis:v?mi(mi({},v),{},{ticks:k?x:v.ticks}):void 0,width:l,height:c,offset:u},k?!0:p);xc(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($m(D),"]")),Array.isArray(D)&&(N=D)}return le.createElement("g",{className:"recharts-cartesian-grid"},le.createElement(Tze,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),le.createElement(Dze,sm({},d,{offset:u,horizontalPoints:w,xAxis:v,yAxis:b})),le.createElement(Ize,sm({},d,{offset:u,verticalPoints:N,xAxis:v,yAxis:b})),le.createElement(_ze,sm({},d,{horizontalPoints:w})),le.createElement(Pze,sm({},d,{verticalPoints:N})))}XC.displayName="CartesianGrid";var Fze=["layout","type","stroke","connectNulls","isRange","ref"],Rze=["key"],LZ;function Y0(t){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y0(t)}function UZ(t,e){if(t==null)return{};var r=Mze(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mze(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},am.apply(this,arguments)}function o7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o7(Object(r),!0).forEach(function(n){xu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HZ(n.key),n)}}function Uze(t,e,r){return e&&l7(t.prototype,e),r&&l7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ze(t,e,r){return e=JC(e),Hze(t,$Z()?Reflect.construct(e,r||[],JC(t).constructor):e.apply(t,r))}function Hze(t,e){if(e&&(Y0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qze(t)}function Qze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Z=function(){return!!t})()}function JC(t){return JC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},JC(t)}function zze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},LI(t,e)}function xu(t,e,r){return e=HZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HZ(t){var e=Vze(t,"string");return Y0(e)=="symbol"?e:e+""}function Vze(t,e){if(Y0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jd=function(t){function e(){var r;Lze(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$ze(this,e,[].concat(a)),xu(r,"state",{isAnimationFinished:!0}),xu(r,"id",Mx("recharts-area-")),xu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),xr(o)&&o()}),xu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),xr(o)&&o()}),r}return zze(e,t),Uze(e,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,A=cr(this.props,!1),h=cr(u,!0),m=d.map(function(g,x){var v=Xf(Xf(Xf({key:"dot-".concat(x),r:3},A),h),{},{index:x,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:d});return e.renderDotItem(u,v)}),p={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return le.createElement(rn,am({className:"recharts-area-dots"},p),m)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=Ah(o.map(function(A){return A.y||0}));return It(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Ah(i.map(function(A){return A.y||0})),f)),It(f)?le.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=Ah(o.map(function(A){return A.x||0}));return It(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Ah(i.map(function(A){return A.x||0})),f)),It(f)?le.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,A=l.isRange;l.ref;var h=UZ(l,Fze);return le.createElement(rn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},le.createElement(a0,am({},cr(h,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&le.createElement(a0,am({},cr(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&A&&le.createElement(a0,am({},cr(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,A=o.animationEasing,h=o.animationId,m=this.state,p=m.prevPoints,g=m.prevBaseLine;return le.createElement(Ru,{begin:d,duration:f,isActive:u,easing:A,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t;if(p){var b=p.length/l.length,C=l.map(function(E,_){var k=Math.floor(_*b);if(p[k]){var D=p[k],S=yo(D.x,E.x),F=yo(D.y,E.y);return Xf(Xf({},E),{},{x:S(v),y:F(v)})}return E}),j;if(It(c)&&typeof c=="number"){var w=yo(g,c);j=w(v)}else if(_r(c)||Rx(c)){var N=yo(g,0);j=N(v)}else j=c.map(function(E,_){var k=Math.floor(_*b);if(g[k]){var D=g[k],S=yo(D.x,E.x),F=yo(D.y,E.y);return Xf(Xf({},E),{},{x:S(v),y:F(v)})}return E});return i.renderAreaStatically(C,j,n,a)}return le.createElement(rn,null,le.createElement("defs",null,le.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(v))),le.createElement(rn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,A=u.totalLength;return c&&o&&o.length&&(!d&&A>0||!R0(d,o)||!R0(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,A=a.yAxis,h=a.width,m=a.height,p=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,v=l.length===1,b=qt("recharts-area",c),C=f&&f.allowDataOverflow,j=A&&A.allowDataOverflow,w=C||j,N=_r(g)?this.id:g,E=(n=cr(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},_=E.r,k=_===void 0?3:_,D=E.strokeWidth,S=D===void 0?2:D,F=C5e(o)?o:{},M=F.clipDot,R=M===void 0?!0:M,U=k*2+S;return le.createElement(rn,{className:b},C||j?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(N)},le.createElement("rect",{x:C?d:d-h/2,y:j?u:u-m/2,width:C?h:h*2,height:j?m:m*2})),!R&&le.createElement("clipPath",{id:"clipPath-dots-".concat(N)},le.createElement("rect",{x:d-U/2,y:u-U/2,width:h+U,height:m+U}))):null,v?null:this.renderArea(w,N),(o||v)&&this.renderDots(w,R,N),(!p||x)&&$d.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(y.PureComponent);LZ=Jd;xu(Jd,"displayName","Area");xu(Jd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!op.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});xu(Jd,"getBaseValue",function(t,e,r,n){var a=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(It(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});xu(Jd,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,A=t.offset,h=e.layout,m=u&&u.length,p=LZ.getBaseValue(e,r,n,a),g=h==="horizontal",x=!1,v=f.map(function(C,j){var w;m?w=u[d+j]:(w=va(C,c),Array.isArray(w)?x=!0:w=[p,w]);var N=w[1]==null||m&&va(C,c)==null;return g?{x:P8({axis:n,ticks:i,bandSize:l,entry:C,index:j}),y:N?null:a.scale(w[1]),value:w,payload:C}:{x:N?null:n.scale(w[1]),y:P8({axis:a,ticks:o,bandSize:l,entry:C,index:j}),value:w,payload:C}}),b;return m||x?b=v.map(function(C){var j=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:j!=null&&C.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:C.y}}):b=g?a.scale(p):n.scale(p),Xf({points:v,baseLine:b,layout:h,isRange:x},A)});xu(Jd,"renderDotItem",function(t,e){var r;if(le.isValidElement(t))r=le.cloneElement(t,e);else if(xr(t))r=t(e);else{var n=qt("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,i=UZ(e,Rze);r=le.createElement(BE,am({},i,{key:a,className:n}))}return r});function X0(t){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X0(t)}function Wze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VZ(n.key),n)}}function qze(t,e,r){return e&&Gze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kze(t,e,r){return e=ZC(e),Yze(t,QZ()?Reflect.construct(e,r||[],ZC(t).constructor):e.apply(t,r))}function Yze(t,e){if(e&&(X0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xze(t)}function Xze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QZ=function(){return!!t})()}function ZC(t){return ZC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ZC(t)}function Jze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},UI(t,e)}function zZ(t,e,r){return e=VZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VZ(t){var e=Zze(t,"string");return X0(e)=="symbol"?e:e+""}function Zze(t,e){if(X0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(X0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$I.apply(this,arguments)}function eVe(t){var e=t.xAxisId,r=y3(),n=w3(),a=EZ(e);return a==null?null:le.createElement(Vx,$I({},a,{className:qt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Id(o,!0)}}))}var Hm=function(t){function e(){return Wze(this,e),Kze(this,e,arguments)}return Jze(e,t),qze(e,[{key:"render",value:function(){return le.createElement(eVe,this.props)}}])}(le.Component);zZ(Hm,"displayName","XAxis");zZ(Hm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function J0(t){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J0(t)}function tVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rVe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qZ(n.key),n)}}function nVe(t,e,r){return e&&rVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sVe(t,e,r){return e=eN(e),aVe(t,WZ()?Reflect.construct(e,r||[],eN(t).constructor):e.apply(t,r))}function aVe(t,e){if(e&&(J0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iVe(t)}function iVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WZ=function(){return!!t})()}function eN(t){return eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eN(t)}function oVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HI(t,e)}function HI(t,e){return HI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HI(t,e)}function GZ(t,e,r){return e=qZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qZ(t){var e=lVe(t,"string");return J0(e)=="symbol"?e:e+""}function lVe(t,e){if(J0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(J0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QI.apply(this,arguments)}var cVe=function(e){var r=e.yAxisId,n=y3(),a=w3(),i=BZ(r);return i==null?null:le.createElement(Vx,QI({},i,{className:qt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Id(l,!0)}}))},Qm=function(t){function e(){return tVe(this,e),sVe(this,e,arguments)}return oVe(e,t),nVe(e,[{key:"render",value:function(){return le.createElement(cVe,this.props)}}])}(le.Component);GZ(Qm,"displayName","YAxis");GZ(Qm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function c7(t){return hVe(t)||fVe(t)||dVe(t)||uVe()}function uVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dVe(t,e){if(t){if(typeof t=="string")return zI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zI(t,e)}}function fVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hVe(t){if(Array.isArray(t))return zI(t)}function zI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var VI=function(e,r,n,a,i){var o=Dl(e,C3),l=Dl(e,RE),c=[].concat(c7(o),c7(l)),u=Dl(e,LE),d="".concat(a,"Id"),f=a[0],A=r;if(c.length&&(A=c.reduce(function(p,g){if(g.props[d]===n&&Iu(g.props,"extendDomain")&&It(g.props[f])){var x=g.props[f];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},A)),u.length){var h="".concat(f,"1"),m="".concat(f,"2");A=u.reduce(function(p,g){if(g.props[d]===n&&Iu(g.props,"extendDomain")&&It(g.props[h])&&It(g.props[m])){var x=g.props[h],v=g.props[m];return[Math.min(p[0],x,v),Math.max(p[1],x,v)]}return p},A)}return i&&i.length&&(A=i.reduce(function(p,g){return It(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},A)),A},KZ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,A),!0;case 5:return g.fn.call(g.context,d,f,A,h),!0;case 6:return g.fn.call(g.context,d,f,A,h,m),!0}for(b=1,v=new Array(x-1);b<x;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var C=g.length,j;for(b=0;b<C;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,A);break;default:if(!v)for(j=1,v=new Array(x-1);j<x;j++)v[j-1]=arguments[j];g[b].fn.apply(g[b].context,v)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(KZ);var AVe=KZ.exports;const mVe=ln(AVe);var xT=new mVe,vT="recharts.syncMouseEvents";function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}function pVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gVe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YZ(n.key),n)}}function xVe(t,e,r){return e&&gVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bT(t,e,r){return e=YZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YZ(t){var e=vVe(t,"string");return Hy(e)=="symbol"?e:e+""}function vVe(t,e){if(Hy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bVe=function(){function t(){pVe(this,t),bT(this,"activeIndex",0),bT(this,"coordinateList",[]),bT(this,"layout","horizontal")}return xVe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,A=r.mouseHandlerCallback,h=A===void 0?null:A;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,A=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:A})}}}])}();function yVe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&It(n)&&It(a))return!0}return!1}function wVe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function XZ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=Xn(e,r,n,a),l=Xn(e,r,n,i);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function jVe(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,A=Xn(l,c,u,f),h=Xn(l,c,d,f);n=A.x,a=A.y,i=h.x,o=h.y}else return XZ(e);return[{x:n,y:a},{x:i,y:o}]}function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function u7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u7(Object(r),!0).forEach(function(n){CVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CVe(t,e,r){return e=NVe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NVe(t){var e=SVe(t,"string");return Qy(e)=="symbol"?e:e+""}function SVe(t,e){if(Qy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EVe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,A=t.chartName,h=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!o||A!=="ScatterChart"&&a!=="axis")return null;var m,p=a0;if(A==="ScatterChart")m=o,p=K$e;else if(A==="BarChart")m=wVe(f,o,c,d),p=g3;else if(f==="radial"){var g=XZ(o),x=g.cx,v=g.cy,b=g.radius,C=g.startAngle,j=g.endAngle;m={cx:x,cy:v,startAngle:C,endAngle:j,innerRadius:b,outerRadius:b},p=qJ}else m={points:jVe(f,o,c)},p=a0;var w=dj(dj(dj(dj({stroke:"#ccc",pointerEvents:"none"},c),m),cr(h,!1)),{},{payload:l,payloadIndex:u,className:qt("recharts-tooltip-cursor",h.className)});return y.isValidElement(h)?y.cloneElement(h,w):y.createElement(p,w)}var BVe=["item"],TVe=["children","className","width","height","style","compact","title","desc"];function Z0(t){"@babel/helpers - typeof";return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z0(t)}function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vg.apply(this,arguments)}function d7(t,e){return _Ve(t)||IVe(t,e)||ZZ(t,e)||DVe()}function DVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IVe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _Ve(t){if(Array.isArray(t))return t}function f7(t,e){if(t==null)return{};var r=PVe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PVe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OVe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eee(n.key),n)}}function FVe(t,e,r){return e&&OVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RVe(t,e,r){return e=tN(e),MVe(t,JZ()?Reflect.construct(e,r||[],tN(t).constructor):e.apply(t,r))}function MVe(t,e){if(e&&(Z0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LVe(t)}function LVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JZ=function(){return!!t})()}function tN(t){return tN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tN(t)}function UVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WI(t,e)}function WI(t,e){return WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WI(t,e)}function ex(t){return QVe(t)||HVe(t)||ZZ(t)||$Ve()}function $Ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZZ(t,e){if(t){if(typeof t=="string")return GI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GI(t,e)}}function HVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QVe(t){if(Array.isArray(t))return GI(t)}function GI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h7(Object(r),!0).forEach(function(n){mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mr(t,e,r){return e=eee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eee(t){var e=zVe(t,"string");return Z0(e)=="symbol"?e:e+""}function zVe(t,e){if(Z0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VVe={xAxis:["bottom","top"],yAxis:["left","right"]},WVe={width:"100%",height:"100%"},tee={x:0,y:0};function fj(t){return t}var GVe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},qVe=function(e,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=a.radius;return ft(ft(ft({},a),Xn(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return ft(ft(ft({},a),Xn(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return tee},UE=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ex(l),ex(u)):l},[]);return o.length>0?o:e&&e.length&&It(a)&&It(i)?e.slice(a,i+1):[]};function ree(t){return t==="number"?[0,"auto"]:void 0}var qI=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,l=UE(r,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var A;if(o.dataKey&&!o.allowDuplicatedCategory){var h=f===void 0?l:f;A=tC(h,o.dataKey,a)}else A=f&&f[n]||l[n];return A?[].concat(ex(c),[HJ(u,A)]):c},[])},A7=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=GVe(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=CLe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,A=qI(e,r,d,f),h=qVe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:A,activeCoordinate:h}}return null},KVe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,A=e.stackOffset,h=FJ(d,i);return n.reduce(function(m,p){var g,x=p.type.defaultProps!==void 0?ft(ft({},p.type.defaultProps),p.props):p.props,v=x.type,b=x.dataKey,C=x.allowDataOverflow,j=x.allowDuplicatedCategory,w=x.scale,N=x.ticks,E=x.includeHidden,_=x[o];if(m[_])return m;var k=UE(e.data,{graphicalItems:a.filter(function($){var K,se=o in $.props?$.props[o]:(K=$.type.defaultProps)===null||K===void 0?void 0:K[o];return se===_}),dataStartIndex:c,dataEndIndex:u}),D=k.length,S,F,M;yVe(x.domain,C,v)&&(S=cI(x.domain,null,C),h&&(v==="number"||w!=="auto")&&(M=jb(k,b,"category")));var R=ree(v);if(!S||S.length===0){var U,z=(U=x.domain)!==null&&U!==void 0?U:R;if(b){if(S=jb(k,b,v),v==="category"&&h){var Q=A5e(S);j&&Q?(F=S,S=$C(0,D)):j||(S=R8(z,S,p).reduce(function($,K){return $.indexOf(K)>=0?$:[].concat(ex($),[K])},[]))}else if(v==="category")j?S=S.filter(function($){return $!==""&&!_r($)}):S=R8(z,S,p).reduce(function($,K){return $.indexOf(K)>=0||K===""||_r(K)?$:[].concat(ex($),[K])},[]);else if(v==="number"){var H=TLe(k,a.filter(function($){var K,se,Z=o in $.props?$.props[o]:(K=$.type.defaultProps)===null||K===void 0?void 0:K[o],ie="hide"in $.props?$.props.hide:(se=$.type.defaultProps)===null||se===void 0?void 0:se.hide;return Z===_&&(E||!ie)}),b,i,d);H&&(S=H)}h&&(v==="number"||w!=="auto")&&(M=jb(k,b,"category"))}else h?S=$C(0,D):l&&l[_]&&l[_].hasStack&&v==="number"?S=A==="expand"?[0,1]:$J(l[_].stackGroups,c,u):S=OJ(k,a.filter(function($){var K=o in $.props?$.props[o]:$.type.defaultProps[o],se="hide"in $.props?$.props.hide:$.type.defaultProps.hide;return K===_&&(E||!se)}),v,d,!0);if(v==="number")S=VI(f,S,_,i,N),z&&(S=cI(z,S,C));else if(v==="category"&&z){var q=z,X=S.every(function($){return q.indexOf($)>=0});X&&(S=q)}}return ft(ft({},m),{},mr({},_,ft(ft({},x),{},{axisType:i,domain:S,categoricalDomain:M,duplicateDomain:F,originalDomain:(g=x.domain)!==null&&g!==void 0?g:R,isCategorical:h,layout:d})))},{})},YVe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,A=UE(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=A.length,m=FJ(d,i),p=-1;return n.reduce(function(g,x){var v=x.type.defaultProps!==void 0?ft(ft({},x.type.defaultProps),x.props):x.props,b=v[o],C=ree("number");if(!g[b]){p++;var j;return m?j=$C(0,h):l&&l[b]&&l[b].hasStack?(j=$J(l[b].stackGroups,c,u),j=VI(f,j,b,i)):(j=cI(C,OJ(A,n.filter(function(w){var N,E,_=o in w.props?w.props[o]:(N=w.type.defaultProps)===null||N===void 0?void 0:N[o],k="hide"in w.props?w.props.hide:(E=w.type.defaultProps)===null||E===void 0?void 0:E.hide;return _===b&&!k}),"number",d),a.defaultProps.allowDataOverflow),j=VI(f,j,b,i)),ft(ft({},g),{},mr({},b,ft(ft({axisType:i},a.defaultProps),{},{hide:!0,orientation:nl(VVe,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:C,isCategorical:m,layout:d})))}return g},{})},XVe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(a,"Id"),A=Dl(d,i),h={};return A&&A.length?h=KVe(e,{axes:A,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(h=YVe(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},JVe=function(e){var r=ch(e),n=Id(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:zO(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:TC(r,n)}},m7=function(e){var r=e.children,n=e.defaultShowTooltip,a=qo(r,z0),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},ZVe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Ld(r&&r.type);return n&&n.indexOf("Bar")>=0})},p7=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},eWe=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,A=n.margin||{},h=qo(f,z0),m=qo(f,vc),p=Object.keys(c).reduce(function(j,w){var N=c[w],E=N.orientation;return!N.mirror&&!N.hide?ft(ft({},j),{},mr({},E,j[E]+N.width)):j},{left:A.left||0,right:A.right||0}),g=Object.keys(o).reduce(function(j,w){var N=o[w],E=N.orientation;return!N.mirror&&!N.hide?ft(ft({},j),{},mr({},E,nl(j,"".concat(E))+N.height)):j},{top:A.top||0,bottom:A.bottom||0}),x=ft(ft({},g),p),v=x.bottom;h&&(x.bottom+=h.props.height||z0.defaultProps.height),m&&r&&(x=ELe(x,a,n,r));var b=u-x.left-x.right,C=d-x.top-x.bottom;return ft(ft({brushBottom:v},x),{},{width:Math.max(b,0),height:Math.max(C,0)})},tWe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},E3=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,A=function(x,v){var b=v.graphicalItems,C=v.stackGroups,j=v.offset,w=v.updateId,N=v.dataStartIndex,E=v.dataEndIndex,_=x.barSize,k=x.layout,D=x.barGap,S=x.barCategoryGap,F=x.maxBarSize,M=p7(k),R=M.numericAxisName,U=M.cateAxisName,z=ZVe(b),Q=[];return b.forEach(function(H,q){var X=UE(x.data,{graphicalItems:[H],dataStartIndex:N,dataEndIndex:E}),$=H.type.defaultProps!==void 0?ft(ft({},H.type.defaultProps),H.props):H.props,K=$.dataKey,se=$.maxBarSize,Z=$["".concat(R,"Id")],ie=$["".concat(U,"Id")],ee={},ue=c.reduce(function(Oe,Me){var Ve=v["".concat(Me.axisType,"Map")],Pe=$["".concat(Me.axisType,"Id")];Ve&&Ve[Pe]||Me.axisType==="zAxis"||Nm();var ze=Ve[Pe];return ft(ft({},Oe),{},mr(mr({},Me.axisType,ze),"".concat(Me.axisType,"Ticks"),Id(ze)))},ee),ae=ue[U],re=ue["".concat(U,"Ticks")],fe=C&&C[Z]&&C[Z].hasStack&&MLe(H,C[Z].stackGroups),G=Ld(H.type).indexOf("Bar")>=0,oe=TC(ae,re),Se=[],ge=z&&NLe({barSize:_,stackGroups:C,totalSize:tWe(ue,U)});if(G){var te,ye,we=_r(se)?F:se,be=(te=(ye=TC(ae,re,!0))!==null&&ye!==void 0?ye:we)!==null&&te!==void 0?te:0;Se=SLe({barGap:D,barCategoryGap:S,bandSize:be!==oe?be:oe,sizeList:ge[ie],maxBarSize:we}),be!==oe&&(Se=Se.map(function(Oe){return ft(ft({},Oe),{},{position:ft(ft({},Oe.position),{},{offset:Oe.position.offset-be/2})})}))}var Te=H&&H.type&&H.type.getComposedData;Te&&Q.push({props:ft(ft({},Te(ft(ft({},ue),{},{displayedData:X,props:x,dataKey:K,item:H,bandSize:oe,barPosition:Se,offset:j,stackedData:fe,layout:k,dataStartIndex:N,dataEndIndex:E}))),{},mr(mr(mr({key:H.key||"item-".concat(q)},R,ue[R]),U,ue[U]),"animationId",w)),childIndex:E5e(H,x.children),item:H})}),Q},h=function(x,v){var b=x.props,C=x.dataStartIndex,j=x.dataEndIndex,w=x.updateId;if(!DL({props:b}))return null;var N=b.children,E=b.layout,_=b.stackOffset,k=b.data,D=b.reverseStackOrder,S=p7(E),F=S.numericAxisName,M=S.cateAxisName,R=Dl(N,n),U=FLe(k,R,"".concat(F,"Id"),"".concat(M,"Id"),_,D),z=c.reduce(function($,K){var se="".concat(K.axisType,"Map");return ft(ft({},$),{},mr({},se,XVe(b,ft(ft({},K),{},{graphicalItems:R,stackGroups:K.axisType===F&&U,dataStartIndex:C,dataEndIndex:j}))))},{}),Q=eWe(ft(ft({},z),{},{props:b,graphicalItems:R}),v==null?void 0:v.legendBBox);Object.keys(z).forEach(function($){z[$]=d(b,z[$],Q,$.replace("Map",""),r)});var H=z["".concat(M,"Map")],q=JVe(H),X=A(b,ft(ft({},z),{},{dataStartIndex:C,dataEndIndex:j,updateId:w,graphicalItems:R,stackGroups:U,offset:Q}));return ft(ft({formattedGraphicalItems:X,graphicalItems:R,offset:Q,stackGroups:U},q),z)},m=function(g){function x(v){var b,C,j;return kVe(this,x),j=RVe(this,x,[v]),mr(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mr(j,"accessibilityManager",new bVe),mr(j,"handleLegendBBoxUpdate",function(w){if(w){var N=j.state,E=N.dataStartIndex,_=N.dataEndIndex,k=N.updateId;j.setState(ft({legendBBox:w},h({props:j.props,dataStartIndex:E,dataEndIndex:_,updateId:k},ft(ft({},j.state),{},{legendBBox:w}))))}}),mr(j,"handleReceiveSyncEvent",function(w,N,E){if(j.props.syncId===w){if(E===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(N)}}),mr(j,"handleBrushChange",function(w){var N=w.startIndex,E=w.endIndex;if(N!==j.state.dataStartIndex||E!==j.state.dataEndIndex){var _=j.state.updateId;j.setState(function(){return ft({dataStartIndex:N,dataEndIndex:E},h({props:j.props,dataStartIndex:N,dataEndIndex:E,updateId:_},j.state))}),j.triggerSyncEvent({dataStartIndex:N,dataEndIndex:E})}}),mr(j,"handleMouseEnter",function(w){var N=j.getMouseInfo(w);if(N){var E=ft(ft({},N),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var _=j.props.onMouseEnter;xr(_)&&_(E,w)}}),mr(j,"triggeredAfterMouseMove",function(w){var N=j.getMouseInfo(w),E=N?ft(ft({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(E),j.triggerSyncEvent(E);var _=j.props.onMouseMove;xr(_)&&_(E,w)}),mr(j,"handleItemMouseEnter",function(w){j.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),mr(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),mr(j,"handleMouseMove",function(w){w.persist(),j.throttleTriggeredAfterMouseMove(w)}),mr(j,"handleMouseLeave",function(w){j.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};j.setState(N),j.triggerSyncEvent(N);var E=j.props.onMouseLeave;xr(E)&&E(N,w)}),mr(j,"handleOuterEvent",function(w){var N=S5e(w),E=nl(j.props,"".concat(N));if(N&&xr(E)){var _,k;/.*touch.*/i.test(N)?k=j.getMouseInfo(w.changedTouches[0]):k=j.getMouseInfo(w),E((_=k)!==null&&_!==void 0?_:{},w)}}),mr(j,"handleClick",function(w){var N=j.getMouseInfo(w);if(N){var E=ft(ft({},N),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var _=j.props.onClick;xr(_)&&_(E,w)}}),mr(j,"handleMouseDown",function(w){var N=j.props.onMouseDown;if(xr(N)){var E=j.getMouseInfo(w);N(E,w)}}),mr(j,"handleMouseUp",function(w){var N=j.props.onMouseUp;if(xr(N)){var E=j.getMouseInfo(w);N(E,w)}}),mr(j,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),mr(j,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.handleMouseDown(w.changedTouches[0])}),mr(j,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.handleMouseUp(w.changedTouches[0])}),mr(j,"handleDoubleClick",function(w){var N=j.props.onDoubleClick;if(xr(N)){var E=j.getMouseInfo(w);N(E,w)}}),mr(j,"handleContextMenu",function(w){var N=j.props.onContextMenu;if(xr(N)){var E=j.getMouseInfo(w);N(E,w)}}),mr(j,"triggerSyncEvent",function(w){j.props.syncId!==void 0&&xT.emit(vT,j.props.syncId,w,j.eventEmitterSymbol)}),mr(j,"applySyncEvent",function(w){var N=j.props,E=N.layout,_=N.syncMethod,k=j.state.updateId,D=w.dataStartIndex,S=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)j.setState(ft({dataStartIndex:D,dataEndIndex:S},h({props:j.props,dataStartIndex:D,dataEndIndex:S,updateId:k},j.state)));else if(w.activeTooltipIndex!==void 0){var F=w.chartX,M=w.chartY,R=w.activeTooltipIndex,U=j.state,z=U.offset,Q=U.tooltipTicks;if(!z)return;if(typeof _=="function")R=_(Q,w);else if(_==="value"){R=-1;for(var H=0;H<Q.length;H++)if(Q[H].value===w.activeLabel){R=H;break}}var q=ft(ft({},z),{},{x:z.left,y:z.top}),X=Math.min(F,q.x+q.width),$=Math.min(M,q.y+q.height),K=Q[R]&&Q[R].value,se=qI(j.state,j.props.data,R),Z=Q[R]?{x:E==="horizontal"?Q[R].coordinate:X,y:E==="horizontal"?$:Q[R].coordinate}:tee;j.setState(ft(ft({},w),{},{activeLabel:K,activeCoordinate:Z,activePayload:se,activeTooltipIndex:R}))}else j.setState(w)}),mr(j,"renderCursor",function(w){var N,E=j.state,_=E.isTooltipActive,k=E.activeCoordinate,D=E.activePayload,S=E.offset,F=E.activeTooltipIndex,M=E.tooltipAxisBandSize,R=j.getTooltipEventType(),U=(N=w.props.active)!==null&&N!==void 0?N:_,z=j.props.layout,Q=w.key||"_recharts-cursor";return le.createElement(EVe,{key:Q,activeCoordinate:k,activePayload:D,activeTooltipIndex:F,chartName:r,element:w,isActive:U,layout:z,offset:S,tooltipAxisBandSize:M,tooltipEventType:R})}),mr(j,"renderPolarAxis",function(w,N,E){var _=nl(w,"type.axisType"),k=nl(j.state,"".concat(_,"Map")),D=w.type.defaultProps,S=D!==void 0?ft(ft({},D),w.props):w.props,F=k&&k[S["".concat(_,"Id")]];return y.cloneElement(w,ft(ft({},F),{},{className:qt(_,F.className),key:w.key||"".concat(N,"-").concat(E),ticks:Id(F,!0)}))}),mr(j,"renderPolarGrid",function(w){var N=w.props,E=N.radialLines,_=N.polarAngles,k=N.polarRadius,D=j.state,S=D.radiusAxisMap,F=D.angleAxisMap,M=ch(S),R=ch(F),U=R.cx,z=R.cy,Q=R.innerRadius,H=R.outerRadius;return y.cloneElement(w,{polarAngles:Array.isArray(_)?_:Id(R,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(k)?k:Id(M,!0).map(function(q){return q.coordinate}),cx:U,cy:z,innerRadius:Q,outerRadius:H,key:w.key||"polar-grid",radialLines:E})}),mr(j,"renderLegend",function(){var w=j.state.formattedGraphicalItems,N=j.props,E=N.children,_=N.width,k=N.height,D=j.props.margin||{},S=_-(D.left||0)-(D.right||0),F=PJ({children:E,formattedGraphicalItems:w,legendWidth:S,legendContent:u});if(!F)return null;var M=F.item,R=f7(F,BVe);return y.cloneElement(M,ft(ft({},R),{},{chartWidth:_,chartHeight:k,margin:D,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),mr(j,"renderTooltip",function(){var w,N=j.props,E=N.children,_=N.accessibilityLayer,k=qo(E,$i);if(!k)return null;var D=j.state,S=D.isTooltipActive,F=D.activeCoordinate,M=D.activePayload,R=D.activeLabel,U=D.offset,z=(w=k.props.active)!==null&&w!==void 0?w:S;return y.cloneElement(k,{viewBox:ft(ft({},U),{},{x:U.left,y:U.top}),active:z,label:R,payload:z?M:[],coordinate:F,accessibilityLayer:_})}),mr(j,"renderBrush",function(w){var N=j.props,E=N.margin,_=N.data,k=j.state,D=k.offset,S=k.dataStartIndex,F=k.dataEndIndex,M=k.updateId;return y.cloneElement(w,{key:w.key||"_recharts-brush",onChange:oj(j.handleBrushChange,w.props.onChange),data:_,x:It(w.props.x)?w.props.x:D.left,y:It(w.props.y)?w.props.y:D.top+D.height+D.brushBottom-(E.bottom||0),width:It(w.props.width)?w.props.width:D.width,startIndex:S,endIndex:F,updateId:"brush-".concat(M)})}),mr(j,"renderReferenceElement",function(w,N,E){if(!w)return null;var _=j,k=_.clipPathId,D=j.state,S=D.xAxisMap,F=D.yAxisMap,M=D.offset,R=w.type.defaultProps||{},U=w.props,z=U.xAxisId,Q=z===void 0?R.xAxisId:z,H=U.yAxisId,q=H===void 0?R.yAxisId:H;return y.cloneElement(w,{key:w.key||"".concat(N,"-").concat(E),xAxis:S[Q],yAxis:F[q],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:k})}),mr(j,"renderActivePoints",function(w){var N=w.item,E=w.activePoint,_=w.basePoint,k=w.childIndex,D=w.isRange,S=[],F=N.props.key,M=N.item.type.defaultProps!==void 0?ft(ft({},N.item.type.defaultProps),N.item.props):N.item.props,R=M.activeDot,U=M.dataKey,z=ft(ft({index:k,dataKey:U,cx:E.x,cy:E.y,r:4,fill:p3(N.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},cr(R,!1)),rC(R));return S.push(x.renderActiveDot(R,z,"".concat(F,"-activePoint-").concat(k))),_?S.push(x.renderActiveDot(R,ft(ft({},z),{},{cx:_.x,cy:_.y}),"".concat(F,"-basePoint-").concat(k))):D&&S.push(null),S}),mr(j,"renderGraphicChild",function(w,N,E){var _=j.filterFormatItem(w,N,E);if(!_)return null;var k=j.getTooltipEventType(),D=j.state,S=D.isTooltipActive,F=D.tooltipAxis,M=D.activeTooltipIndex,R=D.activeLabel,U=j.props.children,z=qo(U,$i),Q=_.props,H=Q.points,q=Q.isRange,X=Q.baseLine,$=_.item.type.defaultProps!==void 0?ft(ft({},_.item.type.defaultProps),_.item.props):_.item.props,K=$.activeDot,se=$.hide,Z=$.activeBar,ie=$.activeShape,ee=!!(!se&&S&&z&&(K||Z||ie)),ue={};k!=="axis"&&z&&z.props.trigger==="click"?ue={onClick:oj(j.handleItemMouseEnter,w.props.onClick)}:k!=="axis"&&(ue={onMouseLeave:oj(j.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:oj(j.handleItemMouseEnter,w.props.onMouseEnter)});var ae=y.cloneElement(w,ft(ft({},_.props),ue));function re(Me){return typeof F.dataKey=="function"?F.dataKey(Me.payload):null}if(ee)if(M>=0){var fe,G;if(F.dataKey&&!F.allowDuplicatedCategory){var oe=typeof F.dataKey=="function"?re:"payload.".concat(F.dataKey.toString());fe=tC(H,oe,R),G=q&&X&&tC(X,oe,R)}else fe=H==null?void 0:H[M],G=q&&X&&X[M];if(ie||Z){var Se=w.props.activeIndex!==void 0?w.props.activeIndex:M;return[y.cloneElement(w,ft(ft(ft({},_.props),ue),{},{activeIndex:Se})),null,null]}if(!_r(fe))return[ae].concat(ex(j.renderActivePoints({item:_,activePoint:fe,basePoint:G,childIndex:M,isRange:q})))}else{var ge,te=(ge=j.getItemByXY(j.state.activeCoordinate))!==null&&ge!==void 0?ge:{graphicalItem:ae},ye=te.graphicalItem,we=ye.item,be=we===void 0?w:we,Te=ye.childIndex,Oe=ft(ft(ft({},_.props),ue),{},{activeIndex:Te});return[y.cloneElement(be,Oe),null,null]}return q?[ae,null,null]:[ae,null]}),mr(j,"renderCustomized",function(w,N,E){return y.cloneElement(w,ft(ft({key:"recharts-customized-".concat(E)},j.props),j.state))}),mr(j,"renderMap",{CartesianGrid:{handler:fj,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:fj},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:fj},YAxis:{handler:fj},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:Mx("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=_X(j.triggeredAfterMouseMove,(C=v.throttleDelay)!==null&&C!==void 0?C:1e3/60),j.state={},j}return UVe(x,g),FVe(x,[{key:"componentDidMount",value:function(){var b,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,C=b.children,j=b.data,w=b.height,N=b.layout,E=qo(C,$i);if(E){var _=E.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,D=qI(this.state,j,_,k),S=this.state.tooltipTicks[_].coordinate,F=(this.state.offset.top+w)/2,M=N==="horizontal",R=M?{x:S,y:F}:{y:S,x:F},U=this.state.formattedGraphicalItems.find(function(Q){var H=Q.item;return H.type.name==="Scatter"});U&&(R=ft(ft({},R),U.props.points[_].tooltipPosition),D=U.props.points[_].tooltipPayload);var z={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:k,activePayload:D,activeCoordinate:R};this.setState(z),this.renderCursor(E),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,w;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){CD([qo(b.children,$i)],[qo(this.props.children,$i)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=qo(this.props.children,$i);if(b&&typeof b.props.shared=="boolean"){var C=b.props.shared?"axis":"item";return l.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var C=this.container,j=C.getBoundingClientRect(),w=Z3e(j),N={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=j.width/C.offsetWidth||1,_=this.inRange(N.chartX,N.chartY,E);if(!_)return null;var k=this.state,D=k.xAxisMap,S=k.yAxisMap,F=this.getTooltipEventType(),M=A7(this.state,this.props.data,this.props.layout,_);if(F!=="axis"&&D&&S){var R=ch(D).scale,U=ch(S).scale,z=R&&R.invert?R.invert(N.chartX):null,Q=U&&U.invert?U.invert(N.chartY):null;return ft(ft({},N),{},{xValue:z,yValue:Q},M)}return M?ft(ft({},N),M):null}},{key:"inRange",value:function(b,C){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,N=b/j,E=C/j;if(w==="horizontal"||w==="vertical"){var _=this.state.offset,k=N>=_.left&&N<=_.left+_.width&&E>=_.top&&E<=_.top+_.height;return k?{x:N,y:E}:null}var D=this.state,S=D.angleAxisMap,F=D.radiusAxisMap;if(S&&F){var M=ch(S);return U8({x:N,y:E},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,C=this.getTooltipEventType(),j=qo(b,$i),w={};j&&C==="axis"&&(j.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=rC(this.props,this.handleOuterEvent);return ft(ft({},N),w)}},{key:"addListener",value:function(){xT.on(vT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xT.removeListener(vT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,C,j){for(var w=this.state.formattedGraphicalItems,N=0,E=w.length;N<E;N++){var _=w[N];if(_.item===b||_.props.key===b.key||C===Ld(_.item.type)&&j===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,C=this.state.offset,j=C.left,w=C.top,N=C.height,E=C.width;return le.createElement("defs",null,le.createElement("clipPath",{id:b},le.createElement("rect",{x:j,y:w,height:N,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(C,j){var w=d7(j,2),N=w[0],E=w[1];return ft(ft({},C),{},mr({},N,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(C,j){var w=d7(j,2),N=w[0],E=w[1];return ft(ft({},C),{},mr({},N,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[b])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(b){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[b])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(b){var C=this.state,j=C.formattedGraphicalItems,w=C.activeItem;if(j&&j.length)for(var N=0,E=j.length;N<E;N++){var _=j[N],k=_.props,D=_.item,S=D.type.defaultProps!==void 0?ft(ft({},D.type.defaultProps),D.props):D.props,F=Ld(D.type);if(F==="Bar"){var M=(k.data||[]).find(function(Q){return T$e(b,Q)});if(M)return{graphicalItem:_,payload:M}}else if(F==="RadialBar"){var R=(k.data||[]).find(function(Q){return U8(b,Q)});if(R)return{graphicalItem:_,payload:R}}else if(PE(_,w)||kE(_,w)||Ry(_,w)){var U=gHe({graphicalItem:_,activeTooltipItem:w,itemData:S.data}),z=S.activeIndex===void 0?U:S.activeIndex;return{graphicalItem:ft(ft({},_),{},{childIndex:z}),payload:Ry(_,w)?S.data[U]:_.props.data[U]}}}return null}},{key:"render",value:function(){var b=this;if(!DL(this))return null;var C=this.props,j=C.children,w=C.className,N=C.width,E=C.height,_=C.style,k=C.compact,D=C.title,S=C.desc,F=f7(C,TVe),M=cr(F,!1);if(k)return le.createElement(q$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement(SD,Vg({},M,{width:N,height:E,title:D,desc:S}),this.renderClipPath(),_L(j,this.renderMap)));if(this.props.accessibilityLayer){var R,U;M.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,M.role=(U=this.props.role)!==null&&U!==void 0?U:"application",M.onKeyDown=function(Q){b.accessibilityManager.keyboardEvent(Q)},M.onFocus=function(){b.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return le.createElement(q$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement("div",Vg({className:qt("recharts-wrapper",w),style:ft({position:"relative",cursor:"default",width:N,height:E},_)},z,{ref:function(H){b.container=H}}),le.createElement(SD,Vg({},M,{width:N,height:E,title:D,desc:S,style:WVe}),this.renderClipPath(),_L(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);mr(m,"displayName",r),mr(m,"defaultProps",ft({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),mr(m,"getDerivedStateFromProps",function(g,x){var v=g.dataKey,b=g.data,C=g.children,j=g.width,w=g.height,N=g.layout,E=g.stackOffset,_=g.margin,k=x.dataStartIndex,D=x.dataEndIndex;if(x.updateId===void 0){var S=m7(g);return ft(ft(ft({},S),{},{updateId:0},h(ft(ft({props:g},S),{},{updateId:0}),x)),{},{prevDataKey:v,prevData:b,prevWidth:j,prevHeight:w,prevLayout:N,prevStackOffset:E,prevMargin:_,prevChildren:C})}if(v!==x.prevDataKey||b!==x.prevData||j!==x.prevWidth||w!==x.prevHeight||N!==x.prevLayout||E!==x.prevStackOffset||!t0(_,x.prevMargin)){var F=m7(g),M={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},R=ft(ft({},A7(x,b,N)),{},{updateId:x.updateId+1}),U=ft(ft(ft({},F),M),R);return ft(ft(ft({},U),h(ft({props:g},U),x)),{},{prevDataKey:v,prevData:b,prevWidth:j,prevHeight:w,prevLayout:N,prevStackOffset:E,prevMargin:_,prevChildren:C})}if(!CD(C,x.prevChildren)){var z,Q,H,q,X=qo(C,z0),$=X&&(z=(Q=X.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&z!==void 0?z:k,K=X&&(H=(q=X.props)===null||q===void 0?void 0:q.endIndex)!==null&&H!==void 0?H:D,se=$!==k||K!==D,Z=!_r(b),ie=Z&&!se?x.updateId:x.updateId+1;return ft(ft({updateId:ie},h(ft(ft({props:g},x),{},{updateId:ie,dataStartIndex:$,dataEndIndex:K}),x)),{},{prevChildren:C,dataStartIndex:$,dataEndIndex:K})}return null}),mr(m,"renderActiveDot",function(g,x,v){var b;return y.isValidElement(g)?b=y.cloneElement(g,x):xr(g)?b=g(x):b=le.createElement(BE,x),le.createElement(rn,{className:"recharts-active-dot",key:v},b)});var p=y.forwardRef(function(x,v){return le.createElement(m,Vg({},x,{ref:v}))});return p.displayName=m.displayName,p},nee=E3({chartName:"BarChart",GraphicalChild:Mu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Hm},{axisType:"yAxis",AxisComp:Qm}],formatAxisMap:vZ}),KI=E3({chartName:"PieChart",GraphicalChild:Nc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:_E},{axisType:"radiusAxis",AxisComp:DE}],formatAxisMap:qLe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),rWe=E3({chartName:"AreaChart",GraphicalChild:Jd,axisComponents:[{axisType:"xAxis",AxisComp:Hm},{axisType:"yAxis",AxisComp:Qm}],formatAxisMap:vZ});const nWe=({montantTotalEstime:t,categoriesEstimation:e,syntheseAchatsRealises:r,chartType:n,onChartTypeChange:a,showChart:i,onToggleChart:o})=>{const l=(f,A)=>A>f*1.1?s.jsx(Tl,{size:16,color:"red",title:"Dépassement"}):A<f*.9?s.jsx(Dm,{size:16,color:"green",title:"Économie"}):s.jsx(c0e,{size:16,color:"blue",title:"Conforme"}),c=y.useMemo(()=>!r||r.length===0?[]:r.map(f=>({nom:f.nom,estime:f.montantEstime,reel:f.totalReel,ecart:f.ecart,pourcentage:f.pourcentageRealisation})),[r]),u=({active:f,payload:A,label:h})=>f&&A&&A.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:`${h}`}),A.map((m,p)=>s.jsx("p",{style:{color:m.color},className:"text-sm",children:`${m.name}: ${Mn(m.value)}`},p)),A.length>=2&&s.jsxs("p",{className:"text-sm font-medium border-t border-gray-200 pt-1 mt-1",children:["Écart: ",Mn(A[1].value-A[0].value)]})]}):null,d=()=>{if(!i||c.length===0)return null;switch(n){case"bar":return s.jsx(r0,{width:"100%",height:300,children:s.jsxs(nee,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[s.jsx(XC,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Hm,{dataKey:"nom",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),s.jsx(Qm,{tick:{fontSize:12},tickFormatter:A=>`${(A/1e3).toFixed(0)}k€`}),s.jsx($i,{content:s.jsx(u,{})}),s.jsx(vc,{}),s.jsx(Mu,{dataKey:"estime",fill:"#3b82f6",name:"Estimé"}),s.jsx(Mu,{dataKey:"reel",fill:"#10b981",name:"Réel"})]})});case"pie":const f=c.map((A,h)=>({...A,fill:`hsl(${h*45}, 70%, 60%)`}));return s.jsx(r0,{width:"100%",height:300,children:s.jsxs(KI,{children:[s.jsx(Nc,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({nom:A,reel:h,percent:m})=>`${A}: ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"reel",children:f.map((A,h)=>s.jsx(P0,{fill:A.fill},`cell-${h}`))}),s.jsx($i,{formatter:A=>Mn(A)})]})});case"area":return s.jsx(r0,{width:"100%",height:300,children:s.jsxs(rWe,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[s.jsx(XC,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Hm,{dataKey:"nom",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),s.jsx(Qm,{tick:{fontSize:12},tickFormatter:A=>`${(A/1e3).toFixed(0)}k€`}),s.jsx($i,{content:s.jsx(u,{})}),s.jsx(vc,{}),s.jsx(Jd,{type:"monotone",dataKey:"estime",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Estimé"}),s.jsx(Jd,{type:"monotone",dataKey:"reel",stackId:"2",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Réel"})]})});default:return null}};return i?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"📊 Comparaison Estimation vs Réel"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:n,onChange:f=>a(f.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700",children:[s.jsx("option",{value:"bar",children:"Barres"}),s.jsx("option",{value:"pie",children:"Camembert"}),s.jsx("option",{value:"area",children:"Aires"})]}),s.jsx("button",{onClick:()=>o(!1),className:"px-2 py-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"✕"})]})]})}),s.jsx("div",{className:"p-4",children:c.length>0?s.jsxs(s.Fragment,{children:[d(),s.jsx("div",{className:"mt-6 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700 dark:text-gray-300",children:"Catégorie"}),s.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700 dark:text-gray-300",children:"Estimé"}),s.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700 dark:text-gray-300",children:"Réel"}),s.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700 dark:text-gray-300",children:"Écart"}),s.jsx("th",{className:"text-center py-2 px-3 font-medium text-gray-700 dark:text-gray-300",children:"Tendance"})]})}),s.jsx("tbody",{children:r.map(f=>s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[s.jsx("td",{className:"py-2 px-3 text-gray-900 dark:text-white",children:f.nom}),s.jsx("td",{className:"py-2 px-3 text-right text-blue-600 dark:text-blue-400",children:Mn(f.montantEstime)}),s.jsx("td",{className:"py-2 px-3 text-right text-green-600 dark:text-green-400",children:Mn(f.totalReel)}),s.jsxs("td",{className:`py-2 px-3 text-right font-medium ${f.ecart>0?"text-red-600 dark:text-red-400":f.ecart<0?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"}`,children:[f.ecart>0?"+":"",Mn(f.ecart)]}),s.jsx("td",{className:"py-2 px-3 text-center",children:l(f.montantEstime,f.totalReel)})]},f.id))})]})})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{children:"Aucune donnée disponible pour la comparaison"}),s.jsx("div",{className:"text-sm mt-1",children:"Les données apparaîtront lorsque des achats seront saisis"})]})})]}):s.jsx("div",{className:"text-center py-6",children:s.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors",children:"📊 Afficher les Graphiques de Comparaison"})})},YI=({affaire:t,onDataChanged:e})=>{const[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(!0),[c,u]=y.useState("bar"),[d,f]=y.useState([]),[A,h]=y.useState(!0),[m,p]=y.useState([]),[g,x]=y.useState([]),[v,b]=y.useState(!0),[C,j]=y.useState(0),[w,N]=y.useState({montantDevisValides:(t==null?void 0:t.objectifCaHt)||0,pourcentageAchats:30,categoriesEstimation:[{id:"bois-massif",nom:"Bois massif",couleur:"#8B4513",pourcentage:25},{id:"panneau",nom:"Panneau",couleur:"#D2691E",pourcentage:20},{id:"quincaillerie",nom:"Quincaillerie",couleur:"#708090",pourcentage:15},{id:"colle",nom:"Colle",couleur:"#FFD700",pourcentage:10},{id:"abrasifs",nom:"Abrasifs",couleur:"#DEB887",pourcentage:8},{id:"divers",nom:"Divers",couleur:"#9370DB",pourcentage:12},{id:"visserie",nom:"Visserie",couleur:"#C0C0C0",pourcentage:5},{id:"vernis",nom:"Vernis",couleur:"#FFA500",pourcentage:5}]}),E=async()=>{try{h(!0);const F=await BS();F&&Array.isArray(F)?f(F):f([])}catch(F){console.error("Erreur lors du chargement des catégories:",F),f([])}finally{h(!1)}},_=async()=>{try{b(!0);const[F,M]=await Promise.all([sp({affaireId:t.id}),Sx({affaireId:t.id})]);let R=[];F!=null&&F.bdc?R=F.bdc:F!=null&&F.bdcs?R=F.bdcs:Array.isArray(F)&&(R=F);const U=R.filter(Q=>Q&&(Q.dateReception||Q.statut==="RECEPTIONNE"));let z=[];Array.isArray(M)?z=M:M&&Array.isArray(M.achats)&&(z=M.achats),x(U),p(z)}catch(F){console.error("Erreur lors du chargement de la synthèse:",F),x([]),p([])}finally{b(!1)}};y.useEffect(()=>{t!=null&&t.id&&Promise.all([E(),_()])},[t==null?void 0:t.id]),y.useEffect(()=>{t!=null&&t.id&&C>0&&_()},[C]);const k=()=>{j(F=>F+1),e&&e()},D=y.useMemo(()=>Math.round(w.montantDevisValides*w.pourcentageAchats/100),[w.montantDevisValides,w.pourcentageAchats]),S=y.useMemo(()=>!d||d.length===0?[]:d.map(F=>{const M=g.filter(H=>H.categorieId===F.id).reduce((H,q)=>H+(q.montantHt||0),0),R=m.filter(H=>H.categorieId===F.id).reduce((H,q)=>H+(q.montantHt||0),0),U=M+R,z=w.categoriesEstimation.find(H=>H.nom.toLowerCase().includes(F.intitule.toLowerCase())||F.intitule.toLowerCase().includes(H.nom.toLowerCase())),Q=z?Math.round(D*z.pourcentage/100):0;return{id:F.id,nom:F.intitule,code:F.code,totalBdc:M,totalFactures:R,totalReel:U,montantEstime:Q,ecart:U-Q,pourcentageRealisation:Q>0?Math.round(U/Q*100):0}}).filter(F=>F.totalReel>0||F.montantEstime>0),[d,g,m,w,D]);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"relative w-full",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"relative",children:s.jsx(BCe,{affaireId:t==null?void 0:t.id,categoriesAchat:d,onUpdate:k})}),s.jsx("div",{className:"relative",children:s.jsx(ICe,{affaireId:t==null?void 0:t.id,categoriesAchat:d,onUpdate:k})})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>n(!r),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:s.jsx(yx,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Estimation des Achats"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prévisionnel"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 text-xs font-medium rounded-full",children:"PRÉVISIONNEL"}),s.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:r?s.jsx(y0,{className:"w-4 h-4 text-gray-500"}):s.jsx(nD,{className:"w-4 h-4 text-gray-500"})})]})]}),s.jsx(OCe,{affaire:t,onDataUpdate:k,isCollapsed:r,onToggleCollapse:n})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>i(!a),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(mu,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Achats Réalisés"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Réel"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs font-medium rounded-full",children:"RÉALISÉ"}),s.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:a?s.jsx(y0,{className:"w-4 h-4 text-gray-500"}):s.jsx(nD,{className:"w-4 h-4 text-gray-500"})})]})]}),!a&&s.jsx("div",{className:"p-6",children:s.jsx(FCe,{affaire:t,onDataUpdate:k})})]})]}),s.jsx(nWe,{montantTotalEstime:D,categoriesEstimation:w.categoriesEstimation,syntheseAchatsRealises:S,chartType:c,onChartTypeChange:u,showChart:o,onToggleChart:l})]})},sWe=({devisId:t,currentFile:e,onFileUploaded:r,onFileDeleted:n,onPreviewRequested:a,apiService:i,disabled:o=!1})=>{const[l,c]=y.useState(!1),[u,d]=y.useState(!1),[f,A]=y.useState(!1),h=y.useRef(null),m=N=>{if(N===0)return"0 B";const E=1024,_=["B","KB","MB","GB"],k=Math.floor(Math.log(N)/Math.log(E));return parseFloat((N/Math.pow(E,k)).toFixed(2))+" "+_[k]},p=N=>{if(N){if(N.type!=="application/pdf"){ve.error("Seuls les fichiers PDF sont autorisés");return}if(N.size>10*1024*1024){ve.error("Le fichier est trop volumineux (maximum 10MB)");return}g(N)}},g=async N=>{c(!0);try{const E=new FormData;E.append("file",N);const _=await i.uploadPdf(t,E);ve.success("Fichier PDF uploadé avec succès"),r&&r(_)}catch(E){console.error("Erreur upload:",E),ve.error(E.message||"Erreur lors de l'upload du fichier")}finally{c(!1)}},x=async()=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce fichier PDF ?")){d(!0);try{await i.deletePdf(t),ve.success("Fichier PDF supprimé avec succès"),n&&n()}catch(N){console.error("Erreur suppression:",N),ve.error(N.message||"Erreur lors de la suppression du fichier")}finally{d(!1)}}},v=async()=>{try{const N=await i.downloadPdf(t),E=new Blob([N.data],{type:"application/pdf"}),_=window.URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download=(e==null?void 0:e.nomFichier)||"devis.pdf",document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(_),ve.success("Fichier téléchargé avec succès")}catch(N){console.error("Erreur téléchargement:",N),ve.error(N.message||"Erreur lors du téléchargement du fichier")}},b=N=>{const E=N.target.files[0];p(E),N.target.value=""},C=N=>{N.preventDefault(),A(!1);const E=N.dataTransfer.files;E.length>0&&p(E[0])},j=N=>{N.preventDefault(),A(!0)},w=()=>{A(!1)};return e&&e.fichierPdf?s.jsx(Kt,{className:"border-2 border-green-200 bg-green-50 dark:bg-green-900/20",children:s.jsxs(nr,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg",children:s.jsx(Nh,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:e.nomFichier}),s.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:[m(e.tailleFichier)," • Uploadé le ",new Date(e.dateUpload).toLocaleDateString("fr-FR")]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xe,{onClick:()=>a&&a(),variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-100",icon:ha,children:"Aperçu"}),s.jsx(Xe,{onClick:v,variant:"outline",size:"sm",className:"text-green-600 border-green-200 hover:bg-green-100",icon:Va,children:"Télécharger"}),!o&&s.jsxs(s.Fragment,{children:[s.jsx(Xe,{onClick:()=>{var N;return(N=h.current)==null?void 0:N.click()},variant:"outline",size:"sm",disabled:l,icon:l?hu:Rd,children:l?"Upload...":"Remplacer"}),s.jsx(Xe,{onClick:x,variant:"outline",size:"sm",disabled:u,className:"text-red-600 border-red-200 hover:bg-red-100",icon:u?hu:Zn,children:u?"Suppression...":"Supprimer"})]})]})]}),s.jsx("input",{ref:h,type:"file",accept:".pdf",onChange:b,className:"hidden",disabled:o})]})}):s.jsx(Kt,{className:`border-2 border-dashed transition-colors ${f?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"} ${o?"opacity-50":""}`,children:s.jsx(nr,{className:"p-8",onDrop:C,onDragOver:j,onDragLeave:w,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:l?s.jsx(hu,{className:"w-8 h-8 text-blue-600 animate-spin"}):s.jsx(Rd,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Uploader un fichier PDF"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Glissez-déposez votre fichier ici, ou cliquez pour sélectionner"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-6",children:[s.jsx("p",{children:"• Format accepté : PDF uniquement"}),s.jsx("p",{children:"• Taille maximum : 10MB"})]}),s.jsx(Xe,{onClick:()=>{var N;return(N=h.current)==null?void 0:N.click()},disabled:l||o,variant:"primary",icon:l?hu:Rd,children:l?"Upload en cours...":"Sélectionner un fichier"}),s.jsx("input",{ref:h,type:"file",accept:".pdf",onChange:b,className:"hidden",disabled:o})]})})})};function aWe({pdfUrl:t,embedUrl:e,fileName:r="document.pdf",showControls:n=!0,height:a=600,className:i=""}){const[o,l]=y.useState(!1),[c,u]=y.useState(!0),[d,f]=y.useState(null),[A,h]=y.useState("embed"),[m,p]=y.useState(0);y.useEffect(()=>{t&&g()},[t,A]);const g=async()=>{try{u(!0),l(!1);const w=await fetch(e&&A==="embed"?e:t);if(!w.ok)throw new Error(`Erreur ${w.status}: ${w.statusText}`);const N=await w.blob();if(N.type!=="application/pdf")throw new Error("Le fichier n'est pas un PDF valide");const E=URL.createObjectURL(N);f(E),u(!1)}catch(j){if(console.error("Erreur lors du chargement du PDF:",j),A==="embed"&&e&&m<2){console.log("Tentative avec iframe..."),h("iframe"),p(w=>w+1);return}if(A==="iframe"&&m<3){console.log("Tentative avec blob..."),h("blob"),p(w=>w+1);return}l(!0),u(!1)}},x=()=>{h("embed"),p(0),l(!1),f(null),g()},v=async()=>{try{const w=await(await fetch(t)).blob(),N=URL.createObjectURL(w),E=document.createElement("a");E.href=N,E.download=r,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(N),ve.success("Téléchargement du PDF démarré")}catch(j){console.error("Erreur lors du téléchargement:",j),ve.error("Erreur lors du téléchargement du PDF")}},b=()=>{d?window.open(d,"_blank"):window.open(e||t,"_blank")};if(y.useEffect(()=>()=>{d&&URL.revokeObjectURL(d)},[d]),c)return s.jsx("div",{className:`w-full h-full flex items-center justify-center bg-gray-50 ${i}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx(hu,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Chargement du PDF..."}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Stratégie actuelle: ",A," ",m>0&&`(Tentative ${m})`]})]})});if(o)return s.jsx("div",{className:`w-full h-full flex items-center justify-center bg-red-50 ${i}`,children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx(Ls,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Impossible de charger l'aperçu"}),s.jsx("p",{className:"text-red-600 mb-4 text-sm",children:"Le PDF ne peut pas être affiché dans cette fenêtre. Cela peut être dû aux paramètres de sécurité du navigateur ou à un problème de réseau."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[s.jsx(Xe,{onClick:b,variant:"outline",icon:ha,className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:"Ouvrir dans un nouvel onglet"}),s.jsx(Xe,{onClick:v,variant:"outline",icon:Va,className:"text-green-600 border-green-300 hover:bg-green-50",children:"Télécharger le PDF"}),s.jsx(Xe,{onClick:x,variant:"outline",icon:_a,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:"Réessayer"})]})]})});const C=()=>d||(A==="embed"&&e?e:t);return s.jsxs("div",{className:`w-full h-full ${i}`,style:{height:a},children:[n&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:["📄 ",r]}),m>0&&s.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:["Mode: ",A]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xe,{onClick:b,variant:"outline",size:"sm",icon:ha,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Nouvel onglet"}),s.jsx(Xe,{onClick:v,variant:"outline",size:"sm",icon:Va,className:"text-green-600 border-green-200 hover:bg-green-50",children:"Télécharger"}),s.jsx(Xe,{onClick:x,variant:"outline",size:"sm",icon:_a,className:"text-gray-600 border-gray-200 hover:bg-gray-50",children:"Actualiser"})]})]}),s.jsxs("div",{className:"w-full bg-gray-200 dark:bg-gray-900 overflow-hidden",style:{height:n?"calc(100% - 60px)":"100%"},children:[A==="embed"&&s.jsx("embed",{src:`${C()}#view=Fit&toolbar=1&navpanes=0&scrollbar=1&zoom=100`,type:"application/pdf",width:"100%",height:"100%",className:"border-0",onError:()=>l(!0)}),A==="iframe"&&s.jsx("iframe",{src:`${C()}#view=Fit&toolbar=1&navpanes=0&scrollbar=1&zoom=100`,width:"100%",height:"100%",title:`Aperçu PDF - ${r}`,className:"border-0",sandbox:"allow-same-origin allow-scripts",allow:"fullscreen",onError:()=>l(!0)}),A==="blob"&&d&&s.jsx("iframe",{src:`${d}#view=Fit&toolbar=1&navpanes=0&scrollbar=1&zoom=100`,width:"100%",height:"100%",title:`Aperçu PDF - ${r}`,className:"border-0",allow:"fullscreen",onError:()=>l(!0)})]})]})}const go="/devis",fi={async getAllDevis(t={}){var e,r;try{return(await Ee.get(go,{params:t})).data}catch(n){throw console.error("Erreur lors de la récupération des devis:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des devis")}},async getDevis(t){var e,r;try{return(await Ee.get(`${go}/${t}`)).data}catch(n){throw console.error("Erreur lors de la récupération du devis:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Devis non trouvé")}},async createDevis(t){var e,r;try{return(await Ee.post(go,t)).data}catch(n){throw console.error("Erreur lors de la création du devis:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la création du devis")}},async updateDevis(t,e){var r,n;try{return(await Ee.patch(`${go}/${t}`,e)).data}catch(a){throw console.error("Erreur lors de la mise à jour du devis:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la mise à jour du devis")}},async updateStatutDevis(t,e){var r,n,a,i;try{const o=await Ee.patch(`${go}/${t}/statut`,{statut:e}),l=(n=(r=o.data)==null?void 0:r.affaire)==null?void 0:n.id;return l&&(window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:l,type:"devis_status_changed",devisId:t,newStatus:e}})),window.dispatchEvent(new CustomEvent("devis_updated",{detail:{affaireId:l,devisId:t,newStatus:e}})),localStorage.setItem(`affaire_${l}_updated`,Date.now().toString()),localStorage.setItem("devis_updated",Date.now().toString()),console.log(`Événement émis pour affaire ${l} - devis ${t} - statut: ${e}`)),o.data}catch(o){throw console.error("Erreur lors de la mise à jour du statut:",o),new Error(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Erreur lors de la mise à jour du statut")}},async deleteDevis(t){var e,r;try{return await Ee.delete(`${go}/${t}`),!0}catch(n){throw console.error("Erreur lors de la suppression du devis:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la suppression du devis")}},async getStats(){var t,e;try{return(await Ee.get(`${go}/stats`)).data}catch(r){throw console.error("Erreur lors de la récupération des statistiques:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des statistiques")}},async getDevisByAffaire(t){var e,r;try{return(await Ee.get(`${go}/affaire/${t}`)).data}catch(n){throw console.error("Erreur lors de la récupération des devis de l'affaire:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des devis")}},async getDevisByStatus(t){var e,r;try{return(await Ee.get(go,{params:{statut:t}})).data}catch(n){throw console.error("Erreur lors de la récupération des devis par statut:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des devis")}},formatDate(t){return t?new Date(t).toLocaleDateString("fr-FR"):""},formatCurrency(t){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t||0)},getStatusBadge(t){return{EN_ATTENTE_VALIDATION:{label:"En attente",color:"bg-yellow-100 text-yellow-800"},VALIDE:{label:"Validé",color:"bg-green-100 text-green-800"},REALISE:{label:"Réalisé",color:"bg-blue-100 text-blue-800"},REFUSE:{label:"Refusé",color:"bg-red-100 text-red-800"},EXPIRE:{label:"Expiré",color:"bg-gray-100 text-gray-800"}}[t]||{label:t,color:"bg-gray-100 text-gray-800"}},async uploadPdf(t,e){var r,n;try{return(await Ee.post(`${go}/${t}/upload-pdf`,e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Erreur lors de l'upload du PDF:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de l'upload du fichier PDF")}},async downloadPdf(t){var e,r;try{return await Ee.get(`${go}/${t}/download-pdf`,{responseType:"blob"})}catch(n){throw console.error("Erreur lors du téléchargement du PDF:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors du téléchargement du fichier PDF")}},async deletePdf(t){var e,r;try{return(await Ee.delete(`${go}/${t}/pdf`)).data}catch(n){throw console.error("Erreur lors de la suppression du PDF:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la suppression du fichier PDF")}},getPdfViewUrl(t){return`${Ee.defaults.baseURL}/devis/${t}/view-pdf`},getPdfEmbedUrl(t){return`${Ee.defaults.baseURL}/devis/${t}/pdf-embed`},async checkPdfAccess(t){var e;try{return{accessible:!0,status:(await Ee.head(`${go}/${t}/view-pdf`)).status}}catch(r){return console.error("PDF non accessible:",r),{accessible:!1,status:((e=r.response)==null?void 0:e.status)||0,error:r.message}}},async getPdfInfo(t){var e,r,n,a;try{const i=await Ee.head(`${go}/${t}/view-pdf`);return{contentType:i.headers["content-type"],contentLength:i.headers["content-length"],fileName:((r=(e=i.headers["content-disposition"])==null?void 0:e.match(/filename="([^"]+)"/))==null?void 0:r[1])||"devis.pdf"}}catch(i){throw console.error("Erreur lors de la récupération des info PDF:",i),new Error(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Erreur lors de la récupération des informations du PDF")}}},iWe=({isOpen:t,onClose:e,devisId:r,fileName:n,devisInfo:a,apiService:i=fi})=>{if(!t||!r)return null;const o=i.getPdfViewUrl(r),l=i.getPdfEmbedUrl?i.getPdfEmbedUrl(r):o;return s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 transition-opacity",onClick:e}),s.jsx("div",{className:"fixed inset-0 flex flex-col",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ha,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Aperçu du document PDF"}),a&&s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a.numero," - ",a.libelle]})]})]}),s.jsx(Xe,{onClick:e,variant:"outline",size:"sm",icon:ls,className:"shrink-0",children:"Fermer"})]}),s.jsx("div",{className:"flex-1 w-full",children:s.jsx(aWe,{pdfUrl:o,embedUrl:l,fileName:n||`${(a==null?void 0:a.numero)||"devis"}.pdf`,showControls:!1,height:"100%",className:"w-full h-full"})})]})})]})},g7=({affaireId:t,onDevisValidated:e,onDevisChanged:r})=>{const[n,a]=y.useState([]),[i,o]=y.useState(!0),[l,c]=y.useState(!1),[u,d]=y.useState({libelle:"",description:"",montantHt:"",dateValidite:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],commentaire:""}),[f,A]=y.useState(!1),[h,m]=y.useState({isOpen:!1,devisId:null,devisInfo:null});y.useEffect(()=>{p()},[t]);const p=async()=>{try{o(!0);const S=await fi.getDevisByAffaire(t);a(S.data||S||[])}catch(S){console.error("Erreur lors du chargement des devis:",S),ve.error("Erreur lors du chargement des devis")}finally{o(!1)}},g=S=>{const{name:F,value:M}=S.target;d(R=>({...R,[F]:M}))},x=async S=>{var F;if(S.preventDefault(),!u.libelle.trim()){ve.error("Le libellé est obligatoire");return}if(!u.montantHt||parseFloat(u.montantHt)<=0){ve.error("Le montant HT doit être supérieur à 0");return}try{A(!0);const M={libelle:u.libelle.trim(),description:u.description.trim(),montantHt:parseFloat(u.montantHt),dateValidite:new Date(u.dateValidite),affaireId:t,commentaire:((F=u.commentaire)==null?void 0:F.trim())||""};await fi.createDevis(M),ve.success("Devis créé avec succès"),d({libelle:"",description:"",montantHt:"",dateValidite:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],commentaire:""}),c(!1),p(),r&&r()}catch(M){console.error("Erreur lors de la création du devis:",M),ve.error("Erreur lors de la création du devis")}finally{A(!1)}},v=async S=>{try{await fi.updateStatutDevis(S,"VALIDE"),ve.success("Devis validé avec succès"),p(),e&&e(),r&&r()}catch(F){console.error("Erreur lors de la validation:",F),ve.error("Erreur lors de la validation du devis")}},b=async S=>{try{await fi.updateStatutDevis(S,"REFUSE"),ve.success("Devis refusé"),p(),r&&r()}catch(F){console.error("Erreur lors du refus:",F),ve.error("Erreur lors du refus du devis")}},C=async S=>{try{await fi.updateStatutDevis(S,"REALISE"),ve.success("Devis marqué comme réalisé - Avancement mis à jour"),p(),r&&r()}catch(F){console.error("Erreur lors du marquage réalisé:",F),ve.error("Erreur lors du marquage du devis comme réalisé")}},j=async S=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce devis ?"))try{await fi.deleteDevis(S),ve.success("Devis supprimé avec succès"),p(),r&&r()}catch(F){console.error("Erreur lors de la suppression:",F),ve.error("Erreur lors de la suppression du devis")}},w=S=>{m({isOpen:!0,devisId:S.id,devisInfo:{numero:S.numero,libelle:S.libelle}})},N=()=>{m({isOpen:!1,devisId:null,devisInfo:null})},E=S=>{const F={EN_ATTENTE_VALIDATION:{color:"bg-amber-100 text-amber-800",text:"En attente"},VALIDE:{color:"bg-green-100 text-green-800",text:"Validé"},REALISE:{color:"bg-sky-100 text-sky-800",text:"Réalisé"},REFUSE:{color:"bg-red-100 text-red-800",text:"Refusé"},EXPIRE:{color:"bg-stone-100 text-stone-800",text:"Expiré"}},M=F[S]||F.EN_ATTENTE_VALIDATION;return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.color}`,children:M.text})},_=S=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(S||0),k=S=>{if(!S)return"-";const F=new Date(S);return isNaN(F.getTime())?"-":F.toLocaleDateString("fr-FR")},D=()=>n.filter(S=>S.statut==="VALIDE"||S.statut==="REALISE").reduce((S,F)=>S+(F.montantHt||0),0);return i?s.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg flex items-center justify-center h-64",children:[s.jsx(hu,{className:"w-8 h-8 animate-spin text-amber-500"}),s.jsx("p",{className:"ml-4 text-lg text-stone-700",children:"Chargement des devis..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h2",{className:"text-2xl font-bold text-stone-800 flex items-center gap-2",children:[s.jsx(Su,{className:"w-7 h-7 text-amber-600"}),"Devis (",n.length,")"]}),s.jsxs(Xe,{onClick:()=>c(!l),className:"bg-amber-600 hover:bg-amber-700 text-white",children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),l?"Annuler":"Nouveau devis"]})]}),l&&s.jsxs(Kt,{className:"bg-white shadow-lg rounded-2xl",children:[s.jsx(Er,{children:s.jsx(Br,{children:"Créer un nouveau devis"})}),s.jsx(nr,{children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"libelle",className:"block text-sm font-medium text-stone-700 mb-1",children:"Libellé *"}),s.jsx(Ur,{id:"libelle",name:"libelle",value:u.libelle,onChange:g,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"montantHt",className:"block text-sm font-medium text-stone-700 mb-1",children:"Montant HT *"}),s.jsx(Ur,{id:"montantHt",name:"montantHt",type:"number",step:"0.01",value:u.montantHt,onChange:g,required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-stone-700 mb-1",children:"Description"}),s.jsx(Fm,{id:"description",name:"description",value:u.description,onChange:g,rows:3})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateValidite",className:"block text-sm font-medium text-stone-700 mb-1",children:"Date de validité"}),s.jsx(Ur,{id:"dateValidite",name:"dateValidite",type:"date",value:u.dateValidite,onChange:g})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"commentaire",className:"block text-sm font-medium text-stone-700 mb-1",children:"Commentaire"}),s.jsx(Ur,{id:"commentaire",name:"commentaire",value:u.commentaire,onChange:g})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Xe,{type:"button",variant:"ghost",onClick:()=>c(!1),children:"Annuler"}),s.jsx(Xe,{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white",disabled:f,children:f?s.jsx(hu,{className:"w-4 h-4 animate-spin"}):"Créer le devis"})]})]})})]}),s.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-2xl flex justify-between items-center",children:[s.jsx("p",{className:"text-amber-800 font-medium",children:"Total validé :"}),s.jsx("p",{className:"text-2xl font-bold text-amber-900",children:_(D())})]}),n.length===0&&!i&&s.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg",children:[s.jsx(Su,{className:"mx-auto h-12 w-12 text-stone-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-stone-900",children:"Aucun devis"}),s.jsx("p",{className:"mt-1 text-sm text-stone-500",children:"Commencez par créer un nouveau devis."})]}),s.jsx("div",{className:"space-y-4",children:n.map(S=>s.jsx(Kt,{className:"bg-white shadow-lg rounded-2xl overflow-hidden",children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"md:w-1/3",children:[s.jsx("h4",{className:"text-sm font-semibold text-stone-600 mb-2",children:"Fichier PDF du devis"}),S.fichierPdf?s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>w(S),children:[s.jsxs("div",{className:"w-full h-48 flex flex-col items-center justify-center bg-stone-50 border border-stone-200 rounded-lg",children:[s.jsx(Su,{className:"w-16 h-16 text-stone-400"}),s.jsx("p",{className:"mt-2 text-sm font-semibold text-stone-700 truncate px-4",children:S.nomFichier})]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 flex items-center justify-center transition-all duration-300 rounded-lg",children:s.jsx(ha,{className:"w-10 h-10 text-white opacity-0 group-hover:opacity-100 transform group-hover:scale-110 transition-all duration-300"})})]}):s.jsxs("div",{className:"border-2 border-dashed border-stone-300 rounded-2xl p-4 text-center h-full flex flex-col justify-center",children:[s.jsx(Nh,{className:"mx-auto h-10 w-10 text-stone-400"}),s.jsx("p",{className:"mt-2 text-sm text-stone-500",children:"Aucun fichier associé"}),s.jsx(sWe,{affaireId:t,devisId:S.id,apiService:fi,onFileUploaded:()=>{ve.success("Fichier PDF uploadé avec succès!"),p(),r&&r()},children:s.jsxs(Xe,{variant:"link",className:"mt-2 text-amber-600 hover:text-amber-700",children:[s.jsx(Rd,{className:"w-4 h-4 mr-1"}),"Uploader maintenant"]})})]})]}),s.jsxs("div",{className:"md:w-2/3 md:pl-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-stone-800",children:[S.numero," - ",S.libelle]}),s.jsx("p",{className:"text-sm text-stone-500",children:S.description})]}),E(S.statut)]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4 my-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-stone-500",children:"Montant HT"}),s.jsx("p",{className:"font-semibold text-stone-800 text-base",children:_(S.montantHt)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-stone-500",children:"Validité"}),s.jsx("p",{className:"font-semibold text-stone-800",children:k(S.dateValidite)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-stone-500",children:"Créé le"}),s.jsx("p",{className:"font-semibold text-stone-800",children:k(S.dateCreation)})]}),S.nomFichier&&s.jsxs("div",{children:[s.jsx("p",{className:"text-stone-500",children:"Fichier PDF"}),s.jsx("p",{className:"font-semibold text-stone-800 truncate",children:S.nomFichier})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4 pt-4 border-t border-stone-200",children:[S.statut==="VALIDE"&&s.jsxs(Xe,{onClick:()=>C(S.id),size:"sm",className:"bg-sky-600 hover:bg-sky-700 text-white",children:[s.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Marquer réalisé"]}),S.statut==="EN_ATTENTE_VALIDATION"&&s.jsxs(s.Fragment,{children:[s.jsxs(Xe,{onClick:()=>v(S.id),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Lk,{className:"w-4 h-4 mr-2"}),"Valider"]}),s.jsxs(Xe,{onClick:()=>b(S.id),size:"sm",variant:"outline",className:"text-red-700 border-red-300 hover:bg-red-100 hover:text-red-800",children:[s.jsx(a0e,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),s.jsx(Xe,{onClick:()=>w(S),size:"icon",variant:"ghost",className:"text-stone-500 hover:bg-stone-100 hover:text-stone-800",disabled:!S.fichierPdf,children:s.jsx(ha,{className:"w-5 h-5"})}),s.jsx(Xe,{onClick:()=>j(S.id),size:"icon",variant:"ghost",className:"text-red-600 hover:bg-red-100 hover:text-red-700",children:s.jsx(Zn,{className:"w-5 h-5"})})]})]})]})})},S.id))}),s.jsx(iWe,{isOpen:h.isOpen,onClose:N,devisId:h.devisId,devisInfo:h.devisInfo})]})},yT=({title:t,value:e,target:r,percentage:n,status:a,icon:i,suffix:o="",rightValue:l})=>{const c={excellent:{lightBg:"bg-white",textColor:"text-green-700",progressBar:"bg-green-600",borderColor:""},good:{lightBg:"bg-white",textColor:"text-blue-700",progressBar:"bg-blue-600",borderColor:""},warning:{lightBg:"bg-white",textColor:"text-orange-700",progressBar:"bg-orange-500",borderColor:""},danger:{lightBg:"bg-white",textColor:"text-red-700",progressBar:"bg-red-600",borderColor:""},default:{lightBg:"bg-white",textColor:"text-gray-700",progressBar:"bg-gray-500",borderColor:""}},u=c[a]||c.default;return s.jsxs(Kt,{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium text-gray-700",children:t}),s.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:s.jsx(i,{className:`w-5 h-5 ${u.textColor}`})})]}),s.jsxs(nr,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-3xl font-bold text-gray-800",children:[e,s.jsx("span",{className:"text-2xl text-gray-500",children:o})]}),l&&s.jsx("div",{className:"text-lg font-semibold text-gray-600",children:l})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Objectif: ",r,o]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Progression"}),s.jsxs("span",{className:`font-semibold ${u.textColor}`,children:[n.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${u.progressBar}`,style:{width:`${Math.min(n,100)}%`}})})]})]})]})},x7=({affaire:t,financialData:e,marginAlerts:r})=>{var v;const n=b=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(b||0),a=b=>`${(b||0).toFixed(1)}%`,i=b=>`${(b||0).toFixed(1)}h`,o=e.objectifCA>0?e.caReel/e.objectifCA*100:0,l=e.objectifAchats>0?e.achatReel/e.objectifAchats*100:0,c=e.objectifHeures>0?e.heuresReelles/e.objectifHeures*100:0,u=(b,C=!1)=>C?b<=80?"excellent":b<=90?"good":b<=105?"warning":"danger":b>=110?"excellent":b>=95?"good":b>=75?"warning":"danger",d=(e.margeReelle||0)-(e.margeObjectif||0),f=d>=0?"good":"danger",A=d>=0?e0e:Zge,h={good:"text-green-600",danger:"text-orange-600"},m=e.margeObjectif>0?e.margeReelle/e.margeObjectif*100:0;let p="danger",g="text-orange-600",x="bg-orange-500";return m>=150?(p="excellent",g="text-green-600",x="bg-green-500"):m>=100?(p="good",g="text-blue-600",x="bg-blue-500"):m>=80&&(p="warning",g="text-orange-600",x="bg-orange-500"),s.jsxs("div",{className:"space-y-6",children:[r.alerteMargeReelle&&s.jsxs(Kt,{className:"bg-red-50 border-l-4 border-red-500 shadow-md",children:[s.jsxs(Er,{className:"flex flex-row items-center gap-4 space-y-0 pb-2",children:[s.jsx(wo,{className:"w-6 h-6 text-red-600"}),s.jsx(Br,{className:"text-red-800",children:"Alerte Marge Critique"})]}),s.jsx(nr,{children:s.jsxs("p",{className:"text-red-700",children:["Le coefficient de marge est inférieur au seuil critique de 1.6.",s.jsxs("span",{className:"font-bold ml-1",children:["Coefficient actuel : ",r.coefficientMargeReel.toFixed(2)]})]})})]}),s.jsx(Kt,{className:"bg-white shadow-lg rounded-lg",children:s.jsxs(nr,{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-100 rounded-lg",children:s.jsx(Tl,{className:"w-8 h-8 text-gray-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Marge Réalisée"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Indicateur de performance"})]})]}),s.jsx("div",{className:`px-4 py-2 rounded-lg text-sm font-medium ${g} bg-gray-100`,children:p==="excellent"?"Excellent":p==="good"?"Bon":p==="warning"?"Attention":"Critique"})]}),s.jsxs("div",{className:"text-center mb-8 p-6 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`text-5xl font-bold mb-2 ${g}`,children:n(e.margeReelle)}),s.jsx("div",{className:"text-lg text-gray-600 mb-4",children:"Bénéfice réalisé"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-2",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ${x}`,style:{width:`${Math.min(m,100)}%`}})}),s.jsxs("div",{className:`text-lg font-semibold ${g} flex items-center justify-center gap-2`,children:["🎯 ",d>=0?`Objectif dépassé de ${n(d)}`:`Objectif manqué de ${n(Math.abs(d))}`]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center bg-white rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Do,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-gray-800 text-sm font-medium",children:"Taux de Marge"})]}),s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:a(e.pourcentageMargeReelle)}),s.jsxs("div",{className:"text-xs text-gray-600",children:["Objectif: ",a(e.pourcentageMargeObjectif)]})]}),s.jsxs("div",{className:"text-center bg-white rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Oh,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-gray-800 text-sm font-medium",children:"Coefficient"})]}),s.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:((v=r==null?void 0:r.coefficientMargeReel)==null?void 0:v.toFixed(2))||"0.00"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Seuil critique: 1.60"})]}),s.jsxs("div",{className:"text-center bg-white rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(A,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-gray-800 text-sm font-medium",children:"Écart Objectif"})]}),s.jsxs("div",{className:`text-2xl font-bold mb-1 flex items-center justify-center gap-1 ${h[f]}`,children:[s.jsx(A,{className:"w-5 h-5"}),n(Math.abs(d))]}),s.jsxs("div",{className:"text-xs text-gray-600",children:["Prévu: ",n(e.margeObjectif)]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(yT,{title:"💼 Chiffre d'Affaires",icon:Tm,value:n(e.caReel),target:n(e.objectifCA),percentage:o,status:u(o)}),s.jsx(yT,{title:"🛒 Achats",icon:Nx,value:n(e.achatReel),target:n(e.objectifAchats),percentage:l,status:u(l,!0)}),s.jsx(yT,{title:"⏰ Heures Travaillées",icon:wn,value:n(e.totalMainOeuvreReelle),target:n(e.heuresReelles>0?e.totalMainOeuvreReelle*e.objectifHeures/e.heuresReelles:e.objectifHeures*50),percentage:c,status:u(c,!0),rightValue:i(e.heuresReelles)})]})]})},v7=({affaire:t,financialData:e})=>{const r=h=>h==null?"0,00 €":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(h),n=h=>h==null?"0%":`${Math.round(h)}%`,a=h=>h==null?"0,0h":`${h.toFixed(1)}h`,i={achats:"#d97706",mainOeuvre:"#FFC107",fraisGeneraux:"#65a30d",marge:"#059669",ca:"#d97706",prevu:"#007AFF",realise:"#8B9B7A"},o=[{name:"CA",prevu:e.objectifCA||0,realise:e.caReel||0,color:i.ca},{name:"Achats",prevu:e.objectifAchats||0,realise:e.achatReel||0,color:i.achats},{name:"Main-d'œuvre",prevu:e.coutObjectifMainOeuvre||0,realise:e.totalMainOeuvreReelle||0,color:i.mainOeuvre},{name:"Marge",prevu:e.margeObjectif||0,realise:e.margeReelle||0,color:i.marge}],l=[{name:"Achats",value:e.objectifAchats||0,color:i.achats,percentage:e.objectifCA>0?(e.objectifAchats||0)/e.objectifCA*100:0},{name:"Main-d'œuvre",value:e.coutObjectifMainOeuvre||0,color:i.mainOeuvre,percentage:e.objectifCA>0?(e.coutObjectifMainOeuvre||0)/e.objectifCA*100:0},{name:"Frais généraux",value:e.fraisGenerauxObjectifs||0,color:i.fraisGeneraux,percentage:e.objectifCA>0?(e.fraisGenerauxObjectifs||0)/e.objectifCA*100:0},{name:"Marge",value:e.margeObjectif||0,color:i.marge,percentage:e.objectifCA>0?(e.margeObjectif||0)/e.objectifCA*100:0}].filter(h=>h.value>0),c=(()=>{const h=e.margeReelle||0,m=e.caReel||0,p=[{name:"Achats",value:e.achatReel||0,color:i.achats,percentage:m>0?(e.achatReel||0)/m*100:0},{name:"Main-d'œuvre",value:e.totalMainOeuvreReelle||0,color:i.mainOeuvre,percentage:m>0?(e.totalMainOeuvreReelle||0)/m*100:0},{name:"Frais généraux",value:e.fraisGenerauxReels||0,color:i.fraisGeneraux,percentage:m>0?(e.fraisGenerauxReels||0)/m*100:0}];return h>0&&p.push({name:"Marge",value:h,color:i.marge,percentage:m>0?h/m*100:0}),p.map(g=>g.name==="Achats"||g.value>0?g:null).filter(Boolean)})(),u=(e.margeReelle||0)<0?Math.abs(e.margeReelle):0,d=e.caReel>0?(e.margeReelle||0)/e.caReel*100:0,f=({active:h,payload:m,label:p})=>{if(h&&m&&m[0]){const g=m[0].payload;return s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-stone-200 rounded-xl shadow-xl p-3",children:[s.jsxs("p",{className:"font-bold text-stone-800 mb-2 flex items-center",children:[s.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:g.color,marginRight:"8px"}}),g.name]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-stone-600",children:"Valeur:"}),s.jsx("span",{className:"font-bold text-stone-800",children:r(g.value)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-stone-600",children:"Pourcentage:"}),s.jsx("span",{className:"font-semibold text-amber-700",children:n(g.percentage)})]})]})]})}return null},A=h=>{const{cx:m,cy:p,midAngle:g,innerRadius:x,outerRadius:v,percent:b,payload:C}=h,j=(C==null?void 0:C.name)||"";if(!(j==="Achats"||b>=.005))return null;const N=Math.PI/180,E=x+(v-x)*.7,_=m+E*Math.cos(-g*N),k=p+E*Math.sin(-g*N);return s.jsx("text",{x:_,y:k,fill:"white",textAnchor:"middle",dominantBaseline:"central",className:"font-bold text-sm drop-shadow-lg",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontSize:j==="Achats"&&b<.01?"14px":"16px"},children:`${(b*100).toFixed(b<.01?1:0)}%`})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Kt,{className:"bg-white shadow-lg rounded-2xl",children:[s.jsx(Er,{className:"pb-3",children:s.jsxs(Br,{className:"flex items-center gap-3 text-stone-800",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Oh,{className:"w-5 h-5 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-lg font-bold",children:"Répartition Prévue"}),s.jsxs("div",{className:"text-sm font-normal text-stone-500",children:["CA Objectif: ",r(e.objectifCA)]})]})]})}),s.jsxs(nr,{className:"pt-0",children:[s.jsx("div",{className:"h-80",children:s.jsx(r0,{width:"100%",height:"100%",children:s.jsxs(KI,{children:[s.jsx(Nc,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:A,outerRadius:120,innerRadius:0,fill:"#8884d8",dataKey:"value",children:l.map((h,m)=>s.jsx(P0,{fill:h.color},`cell-${m}`))}),s.jsx($i,{content:s.jsx(f,{})}),s.jsx(vc,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"13px",fontWeight:"500",color:"#44403c"}})]})})}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("div",{className:"text-sm font-semibold text-stone-700 border-b border-stone-200 pb-2",children:"📊 Détail de la répartition prévue"}),l.map((h,m)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg hover:bg-stone-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:h.color}}),s.jsx("span",{className:"font-medium text-stone-700",children:h.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-stone-800",children:r(h.value)}),s.jsx("div",{className:"text-sm text-stone-600",children:n(h.percentage)})]})]},m)),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-amber-600 shadow-sm"}),s.jsx("span",{className:"font-bold text-amber-800",children:"Total CA Objectif"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-amber-900",children:r(e.objectifCA)}),s.jsx("div",{className:"text-sm text-amber-700",children:"100%"})]})]})]})]})]}),s.jsxs(Kt,{className:"bg-white shadow-lg rounded-2xl",children:[s.jsx(Er,{className:"pb-3",children:s.jsxs(Br,{className:"flex items-center gap-3 text-stone-800",children:[s.jsx("div",{className:"p-2 bg-lime-100 rounded-lg",children:s.jsx(Tl,{className:"w-5 h-5 text-lime-600"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-lg font-bold",children:"Répartition Réelle"}),s.jsxs("div",{className:"text-sm font-normal text-stone-500",children:["CA Réalisé: ",r(e.caReel)]})]})]})}),s.jsxs(nr,{className:"pt-0",children:[u>0&&s.jsx("div",{className:"px-6 pb-4 -mt-4",children:s.jsx("div",{className:"p-3 bg-orange-50 border-l-4 border-orange-400 rounded-r-lg",children:s.jsxs("p",{className:"text-sm font-semibold text-orange-800",children:["Perte (marge négative): ",r(u),s.jsxs("span",{className:"text-orange-600 ml-2",children:["(",n(d),")"]})]})})}),s.jsx("div",{className:"h-80",children:s.jsx(r0,{width:"100%",height:"100%",children:s.jsxs(KI,{children:[s.jsx(Nc,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:A,outerRadius:120,innerRadius:0,fill:"#8884d8",dataKey:"value",children:c.map((h,m)=>s.jsx(P0,{fill:h.color},`cell-${m}`))}),s.jsx($i,{content:s.jsx(f,{})}),s.jsx(vc,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"13px",fontWeight:"500",color:"#44403c"}})]})})}),u>0&&s.jsx("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:"💡 Le camembert montre la répartition des coûts. La marge négative est affichée séparément car elle représente un déficit."}),e.achatReel>0&&e.caReel>0&&e.achatReel/e.caReel<.02&&s.jsxs("div",{className:"mt-2 text-xs text-blue-600 bg-blue-50 p-2 rounded",children:["💡 Les achats (",r(e.achatReel),") représentent ",n(e.achatReel/e.caReel*100)," du CA. Cette proportion très faible explique leur visualisation réduite sur le camembert."]}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("div",{className:"text-sm font-semibold text-stone-700 border-b border-stone-200 pb-2",children:"📊 Détail de la répartition réelle"}),c.map((h,m)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-lg hover:bg-stone-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:h.color}}),s.jsx("span",{className:"font-medium text-stone-700",children:h.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-stone-800",children:r(h.value)}),s.jsx("div",{className:"text-sm text-stone-600",children:n(h.percentage)})]})]},m)),u>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500 shadow-sm"}),s.jsx("span",{className:"font-medium text-red-700",children:"Perte (marge négative)"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-red-800",children:["-",r(u)]}),s.jsx("div",{className:"text-sm text-red-600",children:n(d)})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-lime-50 rounded-lg border border-lime-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-lime-600 shadow-sm"}),s.jsx("span",{className:"font-bold text-lime-800",children:"Total CA Réalisé"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-lime-900",children:r(e.caReel)}),s.jsx("div",{className:"text-sm text-lime-700",children:"100%"})]})]})]})]})]})]}),s.jsxs(Kt,{className:"bg-white shadow-lg rounded-2xl",children:[s.jsx(Er,{children:s.jsxs(Br,{className:"flex items-center gap-3 text-stone-800",children:[s.jsx("div",{className:"p-2 bg-lime-100 rounded-lg",children:s.jsx(Rk,{className:"w-5 h-5 text-lime-600"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-lg font-bold",children:"Prévu vs. Réalisé"}),s.jsx("div",{className:"text-sm font-normal text-stone-600",children:"Comparaison des indicateurs clés"})]})]})}),s.jsx(nr,{children:s.jsx("div",{className:"h-96",children:s.jsx(r0,{width:"100%",height:"100%",children:s.jsxs(nee,{data:o,margin:{top:5,right:20,left:-10,bottom:5},children:[s.jsx(XC,{strokeDasharray:"3 3",stroke:"#e7e5e4"}),s.jsx(Hm,{dataKey:"name",tick:{fill:"#57534e"}}),s.jsx(Qm,{tickFormatter:r,tick:{fill:"#57534e"}}),s.jsx($i,{content:s.jsx(f,{})}),s.jsx(vc,{wrapperStyle:{fontSize:"14px",fontWeight:"500",color:"#374151"}}),s.jsx(Mu,{dataKey:"prevu",fill:i.prevu,name:"Prévu",radius:[4,4,0,0]}),s.jsx(Mu,{dataKey:"realise",fill:i.realise,name:"Réalisé",radius:[4,4,0,0]})]})})})})]}),e.nbPhases>0&&s.jsxs(Kt,{className:"bg-gradient-to-br from-slate-50 to-gray-100 shadow-xl border-gray-200",children:[s.jsx(Er,{children:s.jsxs(Br,{className:"flex items-center gap-3 text-gray-800",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-gray-600 to-slate-700 rounded-lg shadow-lg",children:s.jsx(yx,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-lg",children:"Détail Main-d'œuvre"}),s.jsx("div",{className:"text-sm font-normal text-gray-600",children:"Répartition par type d'activité"})]})]})}),s.jsx(nr,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(e.objectifHeuresFab||0)>0&&s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(IG,{className:"w-5 h-5 text-blue-600"})}),s.jsx("span",{className:"font-semibold text-gray-800",children:"Fabrication"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Prévu:"}),s.jsx("span",{className:"font-semibold",children:a(e.objectifHeuresFab)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Coût:"}),s.jsx("span",{className:"font-semibold text-blue-600",children:r(e.coutObjectifHeuresFab)})]})]})]}),(e.objectifHeuresSer||0)>0&&s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-emerald-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:s.jsx(wn,{className:"w-5 h-5 text-emerald-600"})}),s.jsx("span",{className:"font-semibold text-gray-800",children:"Service"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Prévu:"}),s.jsx("span",{className:"font-semibold",children:a(e.objectifHeuresSer)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Coût:"}),s.jsx("span",{className:"font-semibold text-emerald-600",children:r(e.coutObjectifHeuresSer)})]})]})]}),(e.objectifHeuresPose||0)>0&&s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-amber-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:s.jsx(Nx,{className:"w-5 h-5 text-amber-600"})}),s.jsx("span",{className:"font-semibold text-gray-800",children:"Pose"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Prévu:"}),s.jsx("span",{className:"font-semibold",children:a(e.objectifHeuresPose)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Coût:"}),s.jsx("span",{className:"font-semibold text-amber-600",children:r(e.coutObjectifHeuresPose)})]})]})]})]})})]})]})};var see={exports:{}};function In(t){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(t)}var gi=Uint8Array,rl=Uint16Array,B3=Int32Array,$E=new gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HE=new gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),XI=new gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aee=function(t,e){for(var r=new rl(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new B3(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},iee=aee($E,2),oee=iee.b,JI=iee.r;oee[28]=258,JI[258]=28;var lee=aee(HE,0),oWe=lee.b,b7=lee.r,ZI=new rl(32768);for(var os=0;os<32768;++os){var Gf=(os&43690)>>1|(os&21845)<<1;Gf=(Gf&52428)>>2|(Gf&13107)<<2,Gf=(Gf&61680)>>4|(Gf&3855)<<4,ZI[os]=((Gf&65280)>>8|(Gf&255)<<8)>>1}var _u=function(t,e,r){for(var n=t.length,a=0,i=new rl(e);a<n;++a)t[a]&&++i[t[a]-1];var o=new rl(e);for(a=1;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new rl(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[ZI[f]>>c]=u}else for(l=new rl(n),a=0;a<n;++a)t[a]&&(l[a]=ZI[o[t[a]-1]++]>>15-t[a]);return l},Rh=new gi(288);for(var os=0;os<144;++os)Rh[os]=8;for(var os=144;os<256;++os)Rh[os]=9;for(var os=256;os<280;++os)Rh[os]=7;for(var os=280;os<288;++os)Rh[os]=8;var zy=new gi(32);for(var os=0;os<32;++os)zy[os]=5;var lWe=_u(Rh,9,0),cWe=_u(Rh,9,1),uWe=_u(zy,5,0),dWe=_u(zy,5,1),wT=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ic=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},jT=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},T3=function(t){return(t+7)/8|0},cee=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new gi(t.subarray(e,r))},fWe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lc=function(t,e,r){var n=new Error(e||fWe[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,lc),!r)throw n;return n},hWe=function(t,e,r,n){var a=t.length,i=0;if(!a||e.f&&!e.l)return r||new gi(0);var o=!r,l=o||e.i!=2,c=e.i;o&&(r=new gi(a*3));var u=function(fe){var G=r.length;if(fe>G){var oe=new gi(Math.max(G*2,fe));oe.set(r),r=oe}},d=e.f||0,f=e.p||0,A=e.b||0,h=e.l,m=e.d,p=e.m,g=e.n,x=a*8;do{if(!h){d=ic(t,f,1);var v=ic(t,f+1,3);if(f+=3,v)if(v==1)h=cWe,m=dWe,p=9,g=5;else if(v==2){var w=ic(t,f,31)+257,N=ic(t,f+10,15)+4,E=w+ic(t,f+5,31)+1;f+=14;for(var _=new gi(E),k=new gi(19),D=0;D<N;++D)k[XI[D]]=ic(t,f+D*3,7);f+=N*3;for(var S=wT(k),F=(1<<S)-1,M=_u(k,S,1),D=0;D<E;){var R=M[ic(t,f,F)];f+=R&15;var b=R>>4;if(b<16)_[D++]=b;else{var U=0,z=0;for(b==16?(z=3+ic(t,f,3),f+=2,U=_[D-1]):b==17?(z=3+ic(t,f,7),f+=3):b==18&&(z=11+ic(t,f,127),f+=7);z--;)_[D++]=U}}var Q=_.subarray(0,w),H=_.subarray(w);p=wT(Q),g=wT(H),h=_u(Q,p,1),m=_u(H,g,1)}else lc(1);else{var b=T3(f)+4,C=t[b-4]|t[b-3]<<8,j=b+C;if(j>a){c&&lc(0);break}l&&u(A+C),r.set(t.subarray(b,j),A),e.b=A+=C,e.p=f=j*8,e.f=d;continue}if(f>x){c&&lc(0);break}}l&&u(A+131072);for(var q=(1<<p)-1,X=(1<<g)-1,$=f;;$=f){var U=h[jT(t,f)&q],K=U>>4;if(f+=U&15,f>x){c&&lc(0);break}if(U||lc(2),K<256)r[A++]=K;else if(K==256){$=f,h=null;break}else{var se=K-254;if(K>264){var D=K-257,Z=$E[D];se=ic(t,f,(1<<Z)-1)+oee[D],f+=Z}var ie=m[jT(t,f)&X],ee=ie>>4;ie||lc(3),f+=ie&15;var H=oWe[ee];if(ee>3){var Z=HE[ee];H+=jT(t,f)&(1<<Z)-1,f+=Z}if(f>x){c&&lc(0);break}l&&u(A+131072);var ue=A+se;if(A<H){var ae=i-H,re=Math.min(H,ue);for(ae+A<0&&lc(3);A<re;++A)r[A]=n[ae+A]}for(;A<ue;++A)r[A]=r[A-H]}}e.l=h,e.p=$,e.b=A,e.f=d,h&&(d=1,e.m=p,e.d=m,e.n=g)}while(!d);return A!=r.length&&o?cee(r,0,A):r.subarray(0,A)},hd=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Yv=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},CT=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,i=r.slice();if(!a)return{t:dee,l:0};if(a==1){var o=new gi(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,w){return j.f-w.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=i[0].s,n=1;n<a;++n)i[n].s>A&&(A=i[n].s);var h=new rl(A+1),m=e_(r[d-1],h,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(i.sort(function(w,N){return h[N.s]-h[w.s]||w.f-N.f});n<a;++n){var v=i[n].s;if(h[v]>e)p+=x-(1<<m-h[v]),h[v]=e;else break}for(p>>=g;p>0;){var b=i[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var C=i[n].s;h[C]==e&&(--h[C],++p)}m=e}return{t:new gi(h),l:m}},e_=function(t,e,r){return t.s==-1?Math.max(e_(t.l,e,r+1),e_(t.r,e,r+1)):e[t.s]=r},y7=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new rl(++e),n=0,a=t[0],i=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return{c:r.subarray(0,n),n:e}},Xv=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},uee=function(t,e,r){var n=r.length,a=T3(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=r[i];return(a+4+n)*8},w7=function(t,e,r,n,a,i,o,l,c,u,d){hd(e,d++,r),++a[256];for(var f=CT(a,15),A=f.t,h=f.l,m=CT(i,15),p=m.t,g=m.l,x=y7(A),v=x.c,b=x.n,C=y7(p),j=C.c,w=C.n,N=new rl(19),E=0;E<v.length;++E)++N[v[E]&31];for(var E=0;E<j.length;++E)++N[j[E]&31];for(var _=CT(N,7),k=_.t,D=_.l,S=19;S>4&&!k[XI[S-1]];--S);var F=u+5<<3,M=Xv(a,Rh)+Xv(i,zy)+o,R=Xv(a,A)+Xv(i,p)+o+14+3*S+Xv(N,k)+2*N[16]+3*N[17]+7*N[18];if(c>=0&&F<=M&&F<=R)return uee(e,d,t.subarray(c,c+u));var U,z,Q,H;if(hd(e,d,1+(R<M)),d+=2,R<M){U=_u(A,h,0),z=A,Q=_u(p,g,0),H=p;var q=_u(k,D,0);hd(e,d,b-257),hd(e,d+5,w-1),hd(e,d+10,S-4),d+=14;for(var E=0;E<S;++E)hd(e,d+3*E,k[XI[E]]);d+=3*S;for(var X=[v,j],$=0;$<2;++$)for(var K=X[$],E=0;E<K.length;++E){var se=K[E]&31;hd(e,d,q[se]),d+=k[se],se>15&&(hd(e,d,K[E]>>5&127),d+=K[E]>>12)}}else U=lWe,z=Rh,Q=uWe,H=zy;for(var E=0;E<l;++E){var Z=n[E];if(Z>255){var se=Z>>18&31;Yv(e,d,U[se+257]),d+=z[se+257],se>7&&(hd(e,d,Z>>23&31),d+=$E[se]);var ie=Z&31;Yv(e,d,Q[ie]),d+=H[ie],ie>3&&(Yv(e,d,Z>>5&8191),d+=HE[ie])}else Yv(e,d,U[Z]),d+=z[Z]}return Yv(e,d,U[256]),d+z[256]},AWe=new B3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dee=new gi(0),mWe=function(t,e,r,n,a,i){var o=i.z||t.length,l=new gi(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,d=(i.r||0)&7;if(e){d&&(c[0]=i.r>>3);for(var f=AWe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=i.p||new rl(32768),g=i.h||new rl(m+1),x=Math.ceil(r/3),v=2*x,b=function(Se){return(t[Se]^t[Se+1]<<x^t[Se+2]<<v)&m},C=new B3(25e3),j=new rl(288),w=new rl(32),N=0,E=0,_=i.i||0,k=0,D=i.w||0,S=0;_+2<o;++_){var F=b(_),M=_&32767,R=g[F];if(p[M]=R,g[F]=M,D<=_){var U=o-_;if((N>7e3||k>24576)&&(U>423||!u)){d=w7(t,c,0,C,j,w,E,k,S,_-S,d),k=N=E=0,S=_;for(var z=0;z<286;++z)j[z]=0;for(var z=0;z<30;++z)w[z]=0}var Q=2,H=0,q=h,X=M-R&32767;if(U>2&&F==b(_-X))for(var $=Math.min(A,U)-1,K=Math.min(32767,_),se=Math.min(258,U);X<=K&&--q&&M!=R;){if(t[_+Q]==t[_+Q-X]){for(var Z=0;Z<se&&t[_+Z]==t[_+Z-X];++Z);if(Z>Q){if(Q=Z,H=X,Z>$)break;for(var ie=Math.min(X,Z-2),ee=0,z=0;z<ie;++z){var ue=_-X+z&32767,ae=p[ue],re=ue-ae&32767;re>ee&&(ee=re,R=ue)}}}M=R,R=p[M],X+=M-R&32767}if(H){C[k++]=268435456|JI[Q]<<18|b7[H];var fe=JI[Q]&31,G=b7[H]&31;E+=$E[fe]+HE[G],++j[257+fe],++w[G],D=_+Q,++N}else C[k++]=t[_],++j[t[_]]}}for(_=Math.max(_,D);_<o;++_)C[k++]=t[_],++j[t[_]];d=w7(t,c,u,C,j,w,E,k,S,_-S,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=g,i.p=p,i.i=_,i.w=D)}else{for(var _=i.w||0;_<o+u;_+=65535){var oe=_+65535;oe>=o&&(c[d/8|0]=u,oe=o),d=uee(c,d+1,t.subarray(_,oe))}i.i=o}return cee(l,0,n+T3(d)+a)},fee=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},pWe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new gi(i.length+t.length);o.set(i),o.set(t,i.length),t=o,a.w=i.length}return mWe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},hee=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},gWe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=fee();a.p(e.dictionary),hee(t,2,a.d())}},xWe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&lc(6,"invalid zlib data"),(t[1]>>5&1)==1&&lc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function t_(t,e){e||(e={});var r=fee();r.p(t);var n=pWe(t,e,e.dictionary?6:2,4);return gWe(n,e),hee(n,n.length-4,r.d()),n}function vWe(t,e){return hWe(t.subarray(xWe(t),-4),{i:2},e,e)}var bWe=typeof TextDecoder<"u"&&new TextDecoder,yWe=0;try{bWe.decode(dee,{stream:!0}),yWe=1}catch{}var gr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function NT(){gr.console&&typeof gr.console.log=="function"&&gr.console.log.apply(gr.console,arguments)}var Fn={log:NT,warn:function(t){gr.console&&(typeof gr.console.warn=="function"?gr.console.warn.apply(gr.console,arguments):NT.call(null,arguments))},error:function(t){gr.console&&(typeof gr.console.error=="function"?gr.console.error.apply(gr.console,arguments):NT(t))}};function ST(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){$A(n.response,e,r)},n.onerror=function(){Fn.error("could not download file")},n.send()}function j7(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function hj(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Eb,r_,$A=gr.saveAs||((typeof window>"u"?"undefined":In(window))!=="object"||window!==gr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=gr.URL||gr.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?j7(a.href)?ST(t,e,r):hj(a,a.target="_blank"):hj(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){hj(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(j7(t))ST(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){hj(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:In(i)!=="object"&&(Fn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return ST(t,e,r);var a=t.type==="application/octet-stream",i=/constructor/i.test(gr.HTMLElement)||gr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":In(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=gr.URL||gr.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Aee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ET(t,e){var r=t[0],n=t[1],a=t[2],i=t[3];r=ai(r,n,a,i,e[0],7,-680876936),i=ai(i,r,n,a,e[1],12,-389564586),a=ai(a,i,r,n,e[2],17,606105819),n=ai(n,a,i,r,e[3],22,-1044525330),r=ai(r,n,a,i,e[4],7,-176418897),i=ai(i,r,n,a,e[5],12,1200080426),a=ai(a,i,r,n,e[6],17,-1473231341),n=ai(n,a,i,r,e[7],22,-45705983),r=ai(r,n,a,i,e[8],7,1770035416),i=ai(i,r,n,a,e[9],12,-1958414417),a=ai(a,i,r,n,e[10],17,-42063),n=ai(n,a,i,r,e[11],22,-1990404162),r=ai(r,n,a,i,e[12],7,1804603682),i=ai(i,r,n,a,e[13],12,-40341101),a=ai(a,i,r,n,e[14],17,-1502002290),r=ii(r,n=ai(n,a,i,r,e[15],22,1236535329),a,i,e[1],5,-165796510),i=ii(i,r,n,a,e[6],9,-1069501632),a=ii(a,i,r,n,e[11],14,643717713),n=ii(n,a,i,r,e[0],20,-373897302),r=ii(r,n,a,i,e[5],5,-701558691),i=ii(i,r,n,a,e[10],9,38016083),a=ii(a,i,r,n,e[15],14,-660478335),n=ii(n,a,i,r,e[4],20,-405537848),r=ii(r,n,a,i,e[9],5,568446438),i=ii(i,r,n,a,e[14],9,-1019803690),a=ii(a,i,r,n,e[3],14,-187363961),n=ii(n,a,i,r,e[8],20,1163531501),r=ii(r,n,a,i,e[13],5,-1444681467),i=ii(i,r,n,a,e[2],9,-51403784),a=ii(a,i,r,n,e[7],14,1735328473),r=oi(r,n=ii(n,a,i,r,e[12],20,-1926607734),a,i,e[5],4,-378558),i=oi(i,r,n,a,e[8],11,-2022574463),a=oi(a,i,r,n,e[11],16,1839030562),n=oi(n,a,i,r,e[14],23,-35309556),r=oi(r,n,a,i,e[1],4,-1530992060),i=oi(i,r,n,a,e[4],11,1272893353),a=oi(a,i,r,n,e[7],16,-155497632),n=oi(n,a,i,r,e[10],23,-1094730640),r=oi(r,n,a,i,e[13],4,681279174),i=oi(i,r,n,a,e[0],11,-358537222),a=oi(a,i,r,n,e[3],16,-722521979),n=oi(n,a,i,r,e[6],23,76029189),r=oi(r,n,a,i,e[9],4,-640364487),i=oi(i,r,n,a,e[12],11,-421815835),a=oi(a,i,r,n,e[15],16,530742520),r=li(r,n=oi(n,a,i,r,e[2],23,-995338651),a,i,e[0],6,-198630844),i=li(i,r,n,a,e[7],10,1126891415),a=li(a,i,r,n,e[14],15,-1416354905),n=li(n,a,i,r,e[5],21,-57434055),r=li(r,n,a,i,e[12],6,1700485571),i=li(i,r,n,a,e[3],10,-1894986606),a=li(a,i,r,n,e[10],15,-1051523),n=li(n,a,i,r,e[1],21,-2054922799),r=li(r,n,a,i,e[8],6,1873313359),i=li(i,r,n,a,e[15],10,-30611744),a=li(a,i,r,n,e[6],15,-1560198380),n=li(n,a,i,r,e[13],21,1309151649),r=li(r,n,a,i,e[4],6,-145523070),i=li(i,r,n,a,e[11],10,-1120210379),a=li(a,i,r,n,e[2],15,718787259),n=li(n,a,i,r,e[9],21,-343485551),t[0]=ph(r,t[0]),t[1]=ph(n,t[1]),t[2]=ph(a,t[2]),t[3]=ph(i,t[3])}function QE(t,e,r,n,a,i){return e=ph(ph(e,t),ph(n,i)),ph(e<<a|e>>>32-a,r)}function ai(t,e,r,n,a,i,o){return QE(e&r|~e&n,t,e,a,i,o)}function ii(t,e,r,n,a,i,o){return QE(e&n|r&~n,t,e,a,i,o)}function oi(t,e,r,n,a,i,o){return QE(e^r^n,t,e,a,i,o)}function li(t,e,r,n,a,i,o){return QE(r^(e|~n),t,e,a,i,o)}function mee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)ET(n,wWe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(ET(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,ET(n,a),n}function wWe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Eb=gr.atob.bind(gr),r_=gr.btoa.bind(gr);var C7="0123456789abcdef".split("");function jWe(t){for(var e="",r=0;r<4;r++)e+=C7[t>>8*r+4&15]+C7[t>>8*r&15];return e}function CWe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function n_(t){return mee(t).map(CWe).join("")}var NWe=function(t){for(var e=0;e<t.length;e++)t[e]=jWe(t[e]);return t.join("")}(mee("hello"))!="5d41402abc4b2a76b9719d911017c592";function ph(t,e){if(NWe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function s_(t,e){var r,n,a,i;if(t!==r){for(var o=(a=t,i=1+(256/t.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var N7={print:4,modify:8,copy:16,"annot-forms":32};function Pg(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(N7.perm!==void 0)throw new Error("Invalid permission: "+l);a+=N7[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=n_(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=s_(this.encryptionKey,this.padding)}function kg(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[n]}return e}function S7(t){if(In(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[r]){var o=e[r][i];try{o[0].apply(t,n)}catch(l){gr.console&&Fn.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Vy(t){if(!(this instanceof Vy))return new Vy(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function pee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function uh(t,e,r,n,a){if(!(this instanceof uh))return new uh(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,pee.call(this,n,a)}function im(t,e,r,n,a){if(!(this instanceof im))return new im(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,pee.call(this,n,a)}function hr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",d=null;In(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=S7;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(V){m=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var x=h.__private__.getPageFormat=function(V){return g[V]};a=a||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},b=v.COMPAT;function C(){this.saveGraphicsState(),te(new _t(De,0,0,-De,0,$c()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),u="n",b=v.ADVANCED}function j(){this.restoreGraphicsState(),u="S",b=v.COMPAT}var w=h.__private__.combineFontStyleAndFontWeight=function(V,de){if(V=="bold"&&de=="normal"||V=="bold"&&de==400||V=="normal"&&de=="italic"||V=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(V=de==400||de==="normal"?V==="italic"?"italic":"normal":de!=700&&de!=="bold"||V!=="normal"?(de==700?"bold":de)+""+V:"bold"),V};h.advancedAPI=function(V){var de=b===v.COMPAT;return de&&C.call(this),typeof V!="function"||(V(this),de&&j.call(this)),this},h.compatAPI=function(V){var de=b===v.ADVANCED;return de&&j.call(this),typeof V!="function"||(V(this),de&&C.call(this)),this},h.isAdvancedAPI=function(){return b===v.ADVANCED};var N,E=function(V){if(b!==v.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_=h.roundToPrecision=h.__private__.roundToPrecision=function(V,de){var Be=e||de;if(isNaN(V)||isNaN(Be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Be).replace(/0+$/,"")};N=h.hpf=h.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _(V,16)};var k=h.f2=h.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return _(V,2)},D=h.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return _(V,3)},S=h.scale=h.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return b===v.COMPAT?V*De:b===v.ADVANCED?V:void 0},F=function(V){return b===v.COMPAT?$c()-V:b===v.ADVANCED?V:void 0},M=function(V){return S(F(V))};h.__private__.setPrecision=h.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var R,U="00000000000000000000000000000000",z=h.__private__.getFileId=function(){return U},Q=h.__private__.setFileId=function(V){return U=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ja=new Pg(d.userPermissions,d.userPassword,d.ownerPassword,U)),U};h.setFileId=function(V){return Q(V),this},h.getFileId=function(){return z()};var H=h.__private__.convertDateToPDFDate=function(V){var de=V.getTimezoneOffset(),Be=de<0?"+":"-",_e=Math.floor(Math.abs(de/60)),Qe=Math.abs(de%60),lt=[Be,se(_e),"'",se(Qe),"'"].join("");return["D:",V.getFullYear(),se(V.getMonth()+1),se(V.getDate()),se(V.getHours()),se(V.getMinutes()),se(V.getSeconds()),lt].join("")},q=h.__private__.convertPDFDateToDate=function(V){var de=parseInt(V.substr(2,4),10),Be=parseInt(V.substr(6,2),10)-1,_e=parseInt(V.substr(8,2),10),Qe=parseInt(V.substr(10,2),10),lt=parseInt(V.substr(12,2),10),Et=parseInt(V.substr(14,2),10);return new Date(de,Be,_e,Qe,lt,Et,0)},X=h.__private__.setCreationDate=function(V){var de;if(V===void 0&&(V=new Date),V instanceof Date)de=H(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=V}return R=de},$=h.__private__.getCreationDate=function(V){var de=R;return V==="jsDate"&&(de=q(R)),de};h.setCreationDate=function(V){return X(V),this},h.getCreationDate=function(V){return $(V)};var K,se=h.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},Z=h.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ie=0,ee=[],ue=[],ae=0,re=[],fe=[],G=!1,oe=ue,Se=function(){ie=0,ae=0,ue=[],ee=[],re=[],ea=Jr(),Xa=Jr()};h.__private__.setCustomOutputDestination=function(V){G=!0,oe=V};var ge=function(V){G||(oe=V)};h.__private__.resetCustomOutputDestination=function(){G=!1,oe=ue};var te=h.__private__.out=function(V){return V=V.toString(),ae+=V.length+1,oe.push(V),oe},ye=h.__private__.write=function(V){return te(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},we=h.__private__.getArrayBuffer=function(V){for(var de=V.length,Be=new ArrayBuffer(de),_e=new Uint8Array(Be);de--;)_e[de]=V.charCodeAt(de);return Be},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return be};var Te=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(V){return Te=b===v.ADVANCED?V/De:V,this};var Oe,Me=h.__private__.getFontSize=h.getFontSize=function(){return b===v.COMPAT?Te:Te*De},Ve=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(V){return Ve=V,this},h.__private__.getR2L=h.getR2L=function(){return Ve};var Pe,ze=h.__private__.setZoomMode=function(V){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Oe=V;else if(isNaN(V)){if(de.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Oe=V}else Oe=parseInt(V,10)};h.__private__.getZoomMode=function(){return Oe};var ht,gt=h.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Pe=V};h.__private__.getPageMode=function(){return Pe};var Ct=h.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');ht=V};h.__private__.getLayoutMode=function(){return ht},h.__private__.setDisplayMode=h.setDisplayMode=function(V,de,Be){return ze(V),Ct(de),gt(Be),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(V){if(Object.keys(xt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[V]},h.__private__.getDocumentProperties=function(){return xt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(V){for(var de in xt)xt.hasOwnProperty(de)&&V[de]&&(xt[de]=V[de]);return this},h.__private__.setDocumentProperty=function(V,de){if(Object.keys(xt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[V]=de};var Ie,De,Je,Ke,St,it={},Pt={},dr=[],ar={},gn={},ir={},nn={},Mt=null,At=0,yt=[],dt=new S7(h),Ot=t.hotfixes||[],Dt={},Zt={},Pr=[],_t=function V(de,Be,_e,Qe,lt,Et){if(!(this instanceof V))return new V(de,Be,_e,Qe,lt,Et);isNaN(de)&&(de=1),isNaN(Be)&&(Be=0),isNaN(_e)&&(_e=0),isNaN(Qe)&&(Qe=1),isNaN(lt)&&(lt=0),isNaN(Et)&&(Et=0),this._matrix=[de,Be,_e,Qe,lt,Et]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(V)},_t.prototype.multiply=function(V){var de=V.sx*this.sx+V.shy*this.shx,Be=V.sx*this.shy+V.shy*this.sy,_e=V.shx*this.sx+V.sy*this.shx,Qe=V.shx*this.shy+V.sy*this.sy,lt=V.tx*this.sx+V.ty*this.shx+this.tx,Et=V.tx*this.shy+V.ty*this.sy+this.ty;return new _t(de,Be,_e,Qe,lt,Et)},_t.prototype.decompose=function(){var V=this.sx,de=this.shy,Be=this.shx,_e=this.sy,Qe=this.tx,lt=this.ty,Et=Math.sqrt(V*V+de*de),$t=(V/=Et)*Be+(de/=Et)*_e;Be-=V*$t,_e-=de*$t;var or=Math.sqrt(Be*Be+_e*_e);return $t/=or,V*(_e/=or)<de*(Be/=or)&&(V=-V,de=-de,$t=-$t,Et=-Et),{scale:new _t(Et,0,0,or,0,0),translate:new _t(1,0,0,1,Qe,lt),rotate:new _t(V,de,-de,V,0,0),skew:new _t(1,0,$t,1,0,0)}},_t.prototype.toString=function(V){return this.join(" ")},_t.prototype.inversed=function(){var V=this.sx,de=this.shy,Be=this.shx,_e=this.sy,Qe=this.tx,lt=this.ty,Et=1/(V*_e-de*Be),$t=_e*Et,or=-de*Et,br=-Be*Et,yr=V*Et;return new _t($t,or,br,yr,-$t*Qe-br*lt,-or*Qe-yr*lt)},_t.prototype.applyToPoint=function(V){var de=V.x*this.sx+V.y*this.shx+this.tx,Be=V.x*this.shy+V.y*this.sy+this.ty;return new Cf(de,Be)},_t.prototype.applyToRectangle=function(V){var de=this.applyToPoint(V),Be=this.applyToPoint(new Cf(V.x+V.w,V.y+V.h));return new sA(de.x,de.y,Be.x-de.x,Be.y-de.y)},_t.prototype.clone=function(){var V=this.sx,de=this.shy,Be=this.shx,_e=this.sy,Qe=this.tx,lt=this.ty;return new _t(V,de,Be,_e,Qe,lt)},h.Matrix=_t;var cn=h.matrixMult=function(V,de){return de.multiply(V)},Rr=new _t(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Rr;var Mr=function(V,de){if(!gn[V]){var Be=(de instanceof uh?"Sh":"P")+(Object.keys(ar).length+1).toString(10);de.id=Be,gn[V]=Be,ar[Be]=de,dt.publish("addPattern",de)}};h.ShadingPattern=uh,h.TilingPattern=im,h.addShadingPattern=function(V,de){return E("addShadingPattern()"),Mr(V,de),this},h.beginTilingPattern=function(V){E("beginTilingPattern()"),Rp(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},h.endTilingPattern=function(V,de){E("endTilingPattern()"),de.stream=fe[K].join(`
`),Mr(V,de),dt.publish("endTilingPattern",de),Pr.pop().restore()};var Xt=h.__private__.newObject=function(){var V=Jr();return Pn(V,!0),V},Jr=h.__private__.newObjectDeferred=function(){return ie++,ee[ie]=function(){return ae},ie},Pn=function(V,de){return de=typeof de=="boolean"&&de,ee[V]=ae,de&&te(V+" 0 obj"),V},us=h.__private__.newAdditionalObject=function(){var V={objId:Jr(),content:""};return re.push(V),V},ea=Jr(),Xa=Jr(),ka=h.__private__.decodeColorString=function(V){var de=V.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var Be=parseFloat(de[0]);de=[Be,Be,Be,"r"]}for(var _e="#",Qe=0;Qe<3;Qe++)_e+=("0"+Math.floor(255*parseFloat(de[Qe])).toString(16)).slice(-2);return _e},$r=h.__private__.encodeColorString=function(V){var de;typeof V=="string"&&(V={ch1:V});var Be=V.ch1,_e=V.ch2,Qe=V.ch3,lt=V.ch4,Et=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Be=="string"&&Be.charAt(0)!=="#"){var $t=new Aee(Be);if($t.ok)Be=$t.toHex();else if(!/^\d*\.?\d*$/.test(Be))throw new Error('Invalid color "'+Be+'" passed to jsPDF.encodeColorString.')}if(typeof Be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Be)&&(Be="#"+Be[1]+Be[1]+Be[2]+Be[2]+Be[3]+Be[3]),typeof Be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Be)){var or=parseInt(Be.substr(1),16);Be=or>>16&255,_e=or>>8&255,Qe=255&or}if(_e===void 0||lt===void 0&&Be===_e&&_e===Qe)if(typeof Be=="string")de=Be+" "+Et[0];else switch(V.precision){case 2:de=k(Be/255)+" "+Et[0];break;case 3:default:de=D(Be/255)+" "+Et[0]}else if(lt===void 0||In(lt)==="object"){if(lt&&!isNaN(lt.a)&&lt.a===0)return de=["1.","1.","1.",Et[1]].join(" ");if(typeof Be=="string")de=[Be,_e,Qe,Et[1]].join(" ");else switch(V.precision){case 2:de=[k(Be/255),k(_e/255),k(Qe/255),Et[1]].join(" ");break;default:case 3:de=[D(Be/255),D(_e/255),D(Qe/255),Et[1]].join(" ")}}else if(typeof Be=="string")de=[Be,_e,Qe,lt,Et[2]].join(" ");else switch(V.precision){case 2:de=[k(Be),k(_e),k(Qe),k(lt),Et[2]].join(" ");break;case 3:default:de=[D(Be),D(_e),D(Qe),D(lt),Et[2]].join(" ")}return de},Oa=h.__private__.getFilters=function(){return o},Fa=h.__private__.putStream=function(V){var de=(V=V||{}).data||"",Be=V.filters||Oa(),_e=V.alreadyAppliedFilters||[],Qe=V.addLength1||!1,lt=de.length,Et=V.objectId,$t=function(Ca){return Ca};if(d!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&($t=ja.encryptor(Et,0));var or={};Be===!0&&(Be=["FlateEncode"]);var br=V.additionalKeyValues||[],yr=(or=hr.API.processDataByFilters!==void 0?hr.API.processDataByFilters(de,Be):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(_e)?_e.join(" "):_e.toString());if(or.data.length!==0&&(br.push({key:"Length",value:or.data.length}),Qe===!0&&br.push({key:"Length1",value:lt})),yr.length!=0)if(yr.split("/").length-1==1)br.push({key:"Filter",value:yr});else{br.push({key:"Filter",value:"["+yr+"]"});for(var zr=0;zr<br.length;zr+=1)if(br[zr].key==="DecodeParms"){for(var jn=[],Cn=0;Cn<or.reverseChain.split("/").length-1;Cn+=1)jn.push("null");jn.push(br[zr].value),br[zr].value="["+jn.join(" ")+"]"}}te("<<");for(var pr=0;pr<br.length;pr++)te("/"+br[pr].key+" "+br[pr].value);te(">>"),or.data.length!==0&&(te("stream"),te($t(or.data)),te("endstream"))},Bi=h.__private__.putPage=function(V){var de=V.number,Be=V.data,_e=V.objId,Qe=V.contentsObjId;Pn(_e,!0),te("<</Type /Page"),te("/Parent "+V.rootDictionaryObjId+" 0 R"),te("/Resources "+V.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(N(V.mediaBox.bottomLeftX))+" "+parseFloat(N(V.mediaBox.bottomLeftY))+" "+N(V.mediaBox.topRightX)+" "+N(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&te("/CropBox ["+N(V.cropBox.bottomLeftX)+" "+N(V.cropBox.bottomLeftY)+" "+N(V.cropBox.topRightX)+" "+N(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&te("/BleedBox ["+N(V.bleedBox.bottomLeftX)+" "+N(V.bleedBox.bottomLeftY)+" "+N(V.bleedBox.topRightX)+" "+N(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&te("/TrimBox ["+N(V.trimBox.bottomLeftX)+" "+N(V.trimBox.bottomLeftY)+" "+N(V.trimBox.topRightX)+" "+N(V.trimBox.topRightY)+"]"),V.artBox!==null&&te("/ArtBox ["+N(V.artBox.bottomLeftX)+" "+N(V.artBox.bottomLeftY)+" "+N(V.artBox.topRightX)+" "+N(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&te("/UserUnit "+V.userUnit),dt.publish("putPage",{objId:_e,pageContext:yt[de],pageNumber:de,page:Be}),te("/Contents "+Qe+" 0 R"),te(">>"),te("endobj");var lt=Be.join(`
`);return b===v.ADVANCED&&(lt+=`
Q`),Pn(Qe,!0),Fa({data:lt,filters:Oa(),objectId:Qe}),te("endobj"),_e},Ro=h.__private__.putPages=function(){var V,de,Be=[];for(V=1;V<=At;V++)yt[V].objId=Jr(),yt[V].contentsObjId=Jr();for(V=1;V<=At;V++)Be.push(Bi({number:V,data:fe[V],objId:yt[V].objId,contentsObjId:yt[V].contentsObjId,mediaBox:yt[V].mediaBox,cropBox:yt[V].cropBox,bleedBox:yt[V].bleedBox,trimBox:yt[V].trimBox,artBox:yt[V].artBox,userUnit:yt[V].userUnit,rootDictionaryObjId:ea,resourceDictionaryObjId:Xa}));Pn(ea,!0),te("<</Type /Pages");var _e="/Kids [";for(de=0;de<At;de++)_e+=Be[de]+" 0 R ";te(_e+"]"),te("/Count "+At),te(">>"),te("endobj"),dt.publish("postPutPages")},zu=function(V){dt.publish("putFont",{font:V,out:te,newObject:Xt,putStream:Fa}),V.isAlreadyPutted!==!0&&(V.objectNumber=Xt(),te("<<"),te("/Type /Font"),te("/BaseFont /"+kg(V.postScriptName)),te("/Subtype /Type1"),typeof V.encoding=="string"&&te("/Encoding /"+V.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},mf=function(){for(var V in it)it.hasOwnProperty(V)&&(f===!1||f===!0&&A.hasOwnProperty(V))&&zu(it[V])},pf=function(V){V.objectNumber=Xt();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[N(V.x),N(V.y),N(V.x+V.width),N(V.y+V.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Be=V.pages[1].join(`
`);Fa({data:Be,additionalKeyValues:de,objectId:V.objectNumber}),te("endobj")},gf=function(){for(var V in Dt)Dt.hasOwnProperty(V)&&pf(Dt[V])},vp=function(V,de){var Be,_e=[],Qe=1/(de-1);for(Be=0;Be<1;Be+=Qe)_e.push(Be);if(_e.push(1),V[0].offset!=0){var lt={offset:0,color:V[0].color};V.unshift(lt)}if(V[V.length-1].offset!=1){var Et={offset:1,color:V[V.length-1].color};V.push(Et)}for(var $t="",or=0,br=0;br<_e.length;br++){for(Be=_e[br];Be>V[or+1].offset;)or++;var yr=V[or].offset,zr=(Be-yr)/(V[or+1].offset-yr),jn=V[or].color,Cn=V[or+1].color;$t+=Z(Math.round((1-zr)*jn[0]+zr*Cn[0]).toString(16))+Z(Math.round((1-zr)*jn[1]+zr*Cn[1]).toString(16))+Z(Math.round((1-zr)*jn[2]+zr*Cn[2]).toString(16))}return $t.trim()},Jx=function(V,de){de||(de=21);var Be=Xt(),_e=vp(V.colors,de),Qe=[];Qe.push({key:"FunctionType",value:"0"}),Qe.push({key:"Domain",value:"[0.0 1.0]"}),Qe.push({key:"Size",value:"["+de+"]"}),Qe.push({key:"BitsPerSample",value:"8"}),Qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fa({data:_e,additionalKeyValues:Qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Be}),te("endobj"),V.objectNumber=Xt(),te("<< /ShadingType "+V.type),te("/ColorSpace /DeviceRGB");var lt="/Coords ["+N(parseFloat(V.coords[0]))+" "+N(parseFloat(V.coords[1]))+" ";V.type===2?lt+=N(parseFloat(V.coords[2]))+" "+N(parseFloat(V.coords[3])):lt+=N(parseFloat(V.coords[2]))+" "+N(parseFloat(V.coords[3]))+" "+N(parseFloat(V.coords[4]))+" "+N(parseFloat(V.coords[5])),te(lt+="]"),V.matrix&&te("/Matrix ["+V.matrix.toString()+"]"),te("/Function "+Be+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Zx=function(V,de){var Be=Jr(),_e=Xt();de.push({resourcesOid:Be,objectOid:_e}),V.objectNumber=_e;var Qe=[];Qe.push({key:"Type",value:"/Pattern"}),Qe.push({key:"PatternType",value:"1"}),Qe.push({key:"PaintType",value:"1"}),Qe.push({key:"TilingType",value:"1"}),Qe.push({key:"BBox",value:"["+V.boundingBox.map(N).join(" ")+"]"}),Qe.push({key:"XStep",value:N(V.xStep)}),Qe.push({key:"YStep",value:N(V.yStep)}),Qe.push({key:"Resources",value:Be+" 0 R"}),V.matrix&&Qe.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Fa({data:V.stream,additionalKeyValues:Qe,objectId:V.objectNumber}),te("endobj")},ll=function(V){var de;for(de in ar)ar.hasOwnProperty(de)&&(ar[de]instanceof uh?Jx(ar[de]):ar[de]instanceof im&&Zx(ar[de],V))},eA=function(V){for(var de in V.objectNumber=Xt(),te("<<"),V)switch(de){case"opacity":te("/ca "+k(V[de]));break;case"stroke-opacity":te("/CA "+k(V[de]))}te(">>"),te("endobj")},xf=function(){var V;for(V in ir)ir.hasOwnProperty(V)&&eA(ir[V])},vf=function(){for(var V in te("/XObject <<"),Dt)Dt.hasOwnProperty(V)&&Dt[V].objectNumber>=0&&te("/"+V+" "+Dt[V].objectNumber+" 0 R");dt.publish("putXobjectDict"),te(">>")},Vu=function(){ja.oid=Xt(),te("<<"),te("/Filter /Standard"),te("/V "+ja.v),te("/R "+ja.r),te("/U <"+ja.toHexString(ja.U)+">"),te("/O <"+ja.toHexString(ja.O)+">"),te("/P "+ja.P),te(">>"),te("endobj")},bp=function(){for(var V in te("/Font <<"),it)it.hasOwnProperty(V)&&(f===!1||f===!0&&A.hasOwnProperty(V))&&te("/"+V+" "+it[V].objectNumber+" 0 R");te(">>")},ev=function(){if(Object.keys(ar).length>0){for(var V in te("/Shading <<"),ar)ar.hasOwnProperty(V)&&ar[V]instanceof uh&&ar[V].objectNumber>=0&&te("/"+V+" "+ar[V].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),te(">>")}},Wl=function(V){if(Object.keys(ar).length>0){for(var de in te("/Pattern <<"),ar)ar.hasOwnProperty(de)&&ar[de]instanceof h.TilingPattern&&ar[de].objectNumber>=0&&ar[de].objectNumber<V&&te("/"+de+" "+ar[de].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),te(">>")}},Wu=function(){if(Object.keys(ir).length>0){var V;for(V in te("/ExtGState <<"),ir)ir.hasOwnProperty(V)&&ir[V].objectNumber>=0&&te("/"+V+" "+ir[V].objectNumber+" 0 R");dt.publish("putGStateDict"),te(">>")}},ys=function(V){Pn(V.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),bp(),ev(),Wl(V.objectOid),Wu(),vf(),te(">>"),te("endobj")},yp=function(){var V=[];mf(),xf(),gf(),ll(V),dt.publish("putResources"),V.forEach(ys),ys({resourcesOid:Xa,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources")},wp=function(){dt.publish("putAdditionalObjects");for(var V=0;V<re.length;V++){var de=re[V];Pn(de.objId,!0),te(de.content),te("endobj")}dt.publish("postPutAdditionalObjects")},Gu=function(V){Pt[V.fontName]=Pt[V.fontName]||{},Pt[V.fontName][V.fontStyle]=V.id},Pc=function(V,de,Be,_e,Qe){var lt={id:"F"+(Object.keys(it).length+1).toString(10),postScriptName:V,fontName:de,fontStyle:Be,encoding:_e,isStandardFont:Qe||!1,metadata:{}};return dt.publish("addFont",{font:lt,instance:this}),it[lt.id]=lt,Gu(lt),lt.id},qu=function(V){for(var de=0,Be=be.length;de<Be;de++){var _e=Pc.call(this,V[de][0],V[de][1],V[de][2],be[de][3],!0);f===!1&&(A[_e]=!0);var Qe=V[de][0].split("-");Gu({id:_e,fontName:Qe[0],fontStyle:Qe[1]||""})}dt.publish("addFonts",{fonts:it,dictionary:Pt})},Mo=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(_e){var de=_e.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var Be="Error in function "+de.split(`
`)[0].split("<")[0]+": "+_e.message;if(!gr.console)throw new Error(Be);gr.console.error(Be,_e),gr.alert&&alert(Be)}},V.foo.bar=V,V.foo},zs=function(V,de){var Be,_e,Qe,lt,Et,$t,or,br,yr;if(Qe=(de=de||{}).sourceEncoding||"Unicode",Et=de.outputEncoding,(de.autoencode||Et)&&it[Ie].metadata&&it[Ie].metadata[Qe]&&it[Ie].metadata[Qe].encoding&&(lt=it[Ie].metadata[Qe].encoding,!Et&&it[Ie].encoding&&(Et=it[Ie].encoding),!Et&&lt.codePages&&(Et=lt.codePages[0]),typeof Et=="string"&&(Et=lt[Et]),Et)){for(or=!1,$t=[],Be=0,_e=V.length;Be<_e;Be++)(br=Et[V.charCodeAt(Be)])?$t.push(String.fromCharCode(br)):$t.push(V[Be]),$t[Be].charCodeAt(0)>>8&&(or=!0);V=$t.join("")}for(Be=V.length;or===void 0&&Be!==0;)V.charCodeAt(Be-1)>>8&&(or=!0),Be--;if(!or)return V;for($t=de.noBOM?[]:[254,255],Be=0,_e=V.length;Be<_e;Be++){if((yr=(br=V.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$t.push(yr),$t.push(br-(yr<<8))}return String.fromCharCode.apply(void 0,$t)},Ja=h.__private__.pdfEscape=h.pdfEscape=function(V,de){return zs(V,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tA=h.__private__.beginPage=function(V){fe[++At]=[],yt[At]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},Cp(At),ge(fe[K])},jp=function(V,de){var Be,_e,Qe;switch(r=de||r,typeof V=="string"&&(Be=x(V.toLowerCase()),Array.isArray(Be)&&(_e=Be[0],Qe=Be[1])),Array.isArray(V)&&(_e=V[0]*De,Qe=V[1]*De),isNaN(_e)&&(_e=a[0],Qe=a[1]),(_e>14400||Qe>14400)&&(Fn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),_e=Math.min(14400,_e),Qe=Math.min(14400,Qe)),a=[_e,Qe],r.substr(0,1)){case"l":Qe>_e&&(a=[Qe,_e]);break;case"p":_e>Qe&&(a=[Qe,_e])}tA(a),kp(yf),te(ei),Xu!==0&&te(Xu+" J"),nA!==0&&te(nA+" j"),dt.publish("addPage",{pageNumber:At})},tv=function(V){V>0&&V<=At&&(fe.splice(V,1),yt.splice(V,1),At--,K>At&&(K=At),this.setPage(K))},Cp=function(V){V>0&&V<=At&&(K=V)},rv=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return fe.length-1},Np=function(V,de,Be){var _e,Qe=void 0;return Be=Be||{},V=V!==void 0?V:it[Ie].fontName,de=de!==void 0?de:it[Ie].fontStyle,_e=V.toLowerCase(),Pt[_e]!==void 0&&Pt[_e][de]!==void 0?Qe=Pt[_e][de]:Pt[V]!==void 0&&Pt[V][de]!==void 0?Qe=Pt[V][de]:Be.disableWarning===!1&&Fn.warn("Unable to look up font label for font '"+V+"', '"+de+"'. Refer to getFontList() for available fonts."),Qe||Be.noFallback||(Qe=Pt.times[de])==null&&(Qe=Pt.times.normal),Qe},nv=h.__private__.putInfo=function(){var V=Xt(),de=function(_e){return _e};for(var Be in d!==null&&(de=ja.encryptor(V,0)),te("<<"),te("/Producer ("+Ja(de("jsPDF "+hr.version))+")"),xt)xt.hasOwnProperty(Be)&&xt[Be]&&te("/"+Be.substr(0,1).toUpperCase()+Be.substr(1)+" ("+Ja(de(xt[Be]))+")");te("/CreationDate ("+Ja(de(R))+")"),te(">>"),te("endobj")},kc=h.__private__.putCatalog=function(V){var de=(V=V||{}).rootDictionaryObjId||ea;switch(Xt(),te("<<"),te("/Type /Catalog"),te("/Pages "+de+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Be=""+Oe;Be.substr(Be.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&te("/OpenAction [3 0 R /XYZ null null "+k(Oe)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Pe&&te("/PageMode /"+Pe),dt.publish("putCatalog"),te(">>"),te("endobj")},sv=h.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(ie+1)),te("/Root "+ie+" 0 R"),te("/Info "+(ie-1)+" 0 R"),d!==null&&te("/Encrypt "+ja.oid+" 0 R"),te("/ID [ <"+U+"> <"+U+"> ]"),te(">>")},Sp=h.__private__.putHeader=function(){te("%PDF-"+m),te("%ºß¬à")},av=h.__private__.putXRef=function(){var V="0000000000";te("xref"),te("0 "+(ie+1)),te("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof ee[de]=="function"?te((V+ee[de]()).slice(-10)+" 00000 n "):ee[de]!==void 0?te((V+ee[de]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Gl=h.__private__.buildDocument=function(){Se(),ge(ue),dt.publish("buildDocument"),Sp(),Ro(),wp(),yp(),d!==null&&Vu(),nv(),kc();var V=ae;return av(),sv(),te("startxref"),te(""+V),te("%%EOF"),ge(fe[K]),ue.join(`
`)},Ku=h.__private__.getBlob=function(V){return new Blob([we(V)],{type:"application/pdf"})},Oc=h.output=h.__private__.output=Mo(function(V,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",V){case void 0:return Gl();case"save":h.save(de.filename);break;case"arraybuffer":return we(Gl());case"blob":return Ku(Gl());case"bloburi":case"bloburl":if(gr.URL!==void 0&&typeof gr.URL.createObjectURL=="function")return gr.URL&&gr.URL.createObjectURL(Ku(Gl()))||void 0;Fn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Be="",_e=Gl();try{Be=r_(_e)}catch{Be=r_(unescape(encodeURIComponent(_e)))}return"data:application/pdf;filename="+de.filename+";base64,"+Be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gr)==="[object Window]"){var Qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Qe=de.pdfObjectUrl,lt="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Qe+'"'+lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",$t=gr.open();return $t!==null&&$t.document.write(Et),$t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gr)==="[object Window]"){var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',br=gr.open();if(br!==null){br.document.write(or);var yr=this;br.document.documentElement.querySelector("#pdfViewer").onload=function(){br.document.title=de.filename,br.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yr.output("bloburl"))}}return br}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',jn=gr.open();if(jn!==null&&(jn.document.write(zr),jn.document.title=de.filename),jn||typeof safari>"u")return jn;break;case"datauri":case"dataurl":return gr.document.location.href=this.output("datauristring",de);default:return null}}),cl=function(V){return Array.isArray(Ot)===!0&&Ot.indexOf(V)>-1};switch(n){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=cl("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);De=n}var ja=null;X(),Q();var iv=function(V){return d!==null?ja.encryptor(V,0):function(de){return de}},Ep=h.__private__.getPageInfo=h.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yt[V].objId,pageNumber:V,pageContext:yt[V]}},fr=h.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in yt)if(yt[de].objId===V)break;return Ep(de)},ov=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:yt[K].objId,pageNumber:K,pageContext:yt[K]}};h.addPage=function(){return jp.apply(this,arguments),this},h.setPage=function(){return Cp.apply(this,arguments),ge.call(this,fe[K]),this},h.insertPage=function(V){return this.addPage(),this.movePage(K,V),this},h.movePage=function(V,de){var Be,_e;if(V>de){Be=fe[V],_e=yt[V];for(var Qe=V;Qe>de;Qe--)fe[Qe]=fe[Qe-1],yt[Qe]=yt[Qe-1];fe[de]=Be,yt[de]=_e,this.setPage(de)}else if(V<de){Be=fe[V],_e=yt[V];for(var lt=V;lt<de;lt++)fe[lt]=fe[lt+1],yt[lt]=yt[lt+1];fe[de]=Be,yt[de]=_e,this.setPage(de)}return this},h.deletePage=function(){return tv.apply(this,arguments),this},h.__private__.text=h.text=function(V,de,Be,_e,Qe){var lt,Et,$t,or,br,yr,zr,jn,Cn,pr=(_e=_e||{}).scope||this;if(typeof V=="number"&&typeof de=="number"&&(typeof Be=="string"||Array.isArray(Be))){var Ca=Be;Be=de,de=V,V=Ca}if(arguments[3]instanceof _t?(E("The transform parameter of text() with a Matrix value"),Cn=Qe):($t=arguments[4],or=arguments[5],In(zr=arguments[3])==="object"&&zr!==null||(typeof $t=="string"&&(or=$t,$t=null),typeof zr=="string"&&(or=zr,zr=null),typeof zr=="number"&&($t=zr,zr=null),_e={flags:zr,angle:$t,align:or})),isNaN(de)||isNaN(Be)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return pr;var Os="",oo=!1,ta=typeof _e.lineHeightFactor=="number"?_e.lineHeightFactor:Rc,Ws=pr.internal.scaleFactor;function Mp(Nn){return Nn=Nn.split("	").join(Array(_e.TabLen||9).join(" ")),Ja(Nn,zr)}function lo(Nn){for(var Sn,Ss=Nn.concat(),ds=[],ec=Ss.length;ec--;)typeof(Sn=Ss.shift())=="string"?ds.push(Sn):Array.isArray(Nn)&&(Sn.length===1||Sn[1]===void 0&&Sn[2]===void 0)?ds.push(Sn[0]):ds.push([Sn[0],Sn[1],Sn[2]]);return ds}function Vn(Nn,Sn){var Ss;if(typeof Nn=="string")Ss=Sn(Nn)[0];else if(Array.isArray(Nn)){for(var ds,ec,cA=Nn.concat(),Vc=[],Lp=cA.length;Lp--;)typeof(ds=cA.shift())=="string"?Vc.push(Sn(ds)[0]):Array.isArray(ds)&&typeof ds[0]=="string"&&(ec=Sn(ds[0],ds[1],ds[2]),Vc.push([ec[0],ec[1],ec[2]]));Ss=Vc}return Ss}var Zu=!1,ws=!0;if(typeof V=="string")Zu=!0;else if(Array.isArray(V)){var ed=V.concat();Et=[];for(var Di,js=ed.length;js--;)(typeof(Di=ed.shift())!="string"||Array.isArray(Di)&&typeof Di[0]!="string")&&(ws=!1);Zu=ws}if(Zu===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var sn=Te/pr.internal.scaleFactor,td=sn*(ta-1);switch(_e.baseline){case"bottom":Be-=td;break;case"top":Be+=sn-td;break;case"hanging":Be+=sn-2*td;break;case"middle":Be+=sn/2-td}if((yr=_e.maxWidth||0)>0&&(typeof V=="string"?V=pr.splitTextToSize(V,yr):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Nn,Sn){return Nn.concat(pr.splitTextToSize(Sn,yr))},[]))),lt={text:V,x:de,y:Be,options:_e,mutex:{pdfEscape:Ja,activeFontKey:Ie,fonts:it,activeFontSize:Te}},dt.publish("preProcessText",lt),V=lt.text,$t=(_e=lt.options).angle,!(Cn instanceof _t)&&$t&&typeof $t=="number"){$t*=Math.PI/180,_e.rotationDirection===0&&($t=-$t),b===v.ADVANCED&&($t=-$t);var rd=Math.cos($t),Sf=Math.sin($t);Cn=new _t(rd,Sf,-Sf,rd,0,0)}else $t&&$t instanceof _t&&(Cn=$t);b!==v.ADVANCED||Cn||(Cn=Rr),(br=_e.charSpace||Ti)!==void 0&&(Os+=N(S(br))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(jn=_e.horizontalScale)!==void 0&&(Os+=N(100*jn)+` Tz
`),_e.lang;var Ra=-1,Ef=_e.renderingMode!==void 0?_e.renderingMode:_e.stroke,Bf=pr.internal.getCurrentPageInfo().pageContext;switch(Ef){case 0:case!1:case"fill":Ra=0;break;case 1:case!0:case"stroke":Ra=1;break;case 2:case"fillThenStroke":Ra=2;break;case 3:case"invisible":Ra=3;break;case 4:case"fillAndAddForClipping":Ra=4;break;case 5:case"strokeAndAddPathForClipping":Ra=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ra=6;break;case 7:case"addToPathForClipping":Ra=7}var lA=Bf.usedRenderingMode!==void 0?Bf.usedRenderingMode:-1;Ra!==-1?Os+=Ra+` Tr
`:lA!==-1&&(Os+=`0 Tr
`),Ra!==-1&&(Bf.usedRenderingMode=Ra),or=_e.align||"left";var ts,Ii=Te*ta,Lo=pr.internal.pageSize.getWidth(),Cs=it[Ie];br=_e.charSpace||Ti,yr=_e.maxWidth||0,zr=Object.assign({autoencode:!0,noBOM:!0},_e.flags);var Ma=[],Hc=function(Nn){return pr.getStringUnitWidth(Nn,{font:Cs,charSpace:br,fontSize:Te,doKerning:!1})*Te/Ws};if(Object.prototype.toString.call(V)==="[object Array]"){var La;Et=lo(V),or!=="left"&&(ts=Et.map(Hc));var Aa,Yl=0;if(or==="right"){de-=ts[0],V=[],js=Et.length;for(var Xl=0;Xl<js;Xl++)Xl===0?(Aa=dl(de),La=Kl(Be)):(Aa=S(Yl-ts[Xl]),La=-Ii),V.push([Et[Xl],Aa,La]),Yl=ts[Xl]}else if(or==="center"){de-=ts[0]/2,V=[],js=Et.length;for(var _i=0;_i<js;_i++)_i===0?(Aa=dl(de),La=Kl(Be)):(Aa=S((Yl-ts[_i])/2),La=-Ii),V.push([Et[_i],Aa,La]),Yl=ts[_i]}else if(or==="left"){V=[],js=Et.length;for(var ti=0;ti<js;ti++)V.push(Et[ti])}else if(or==="justify"&&Cs.encoding==="Identity-H"){V=[],js=Et.length,yr=yr!==0?yr:Lo;for(var Jl=0,Ns=0;Ns<js;Ns++)if(La=Ns===0?Kl(Be):-Ii,Aa=Ns===0?dl(de):Jl,Ns<js-1){var Qc=S((yr-ts[Ns])/(Et[Ns].split(" ").length-1)),Na=Et[Ns].split(" ");V.push([Na[0]+" ",Aa,La]),Jl=0;for(var co=1;co<Na.length;co++){var Tf=(Hc(Na[co-1]+" "+Na[co])-Hc(Na[co]))*Ws+Qc;co==Na.length-1?V.push([Na[co],Tf,0]):V.push([Na[co]+" ",Tf,0]),Jl-=Tf}}else V.push([Et[Ns],Aa,La]);V.push(["",Jl,0])}else{if(or!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],js=Et.length,yr=yr!==0?yr:Lo,Ns=0;Ns<js;Ns++)La=Ns===0?Kl(Be):-Ii,Aa=Ns===0?dl(de):0,Ns<js-1?Ma.push(N(S((yr-ts[Ns])/(Et[Ns].split(" ").length-1)))):Ma.push(0),V.push([Et[Ns],Aa,La])}}var ri=typeof _e.R2L=="boolean"?_e.R2L:Ve;ri===!0&&(V=Vn(V,function(Nn,Sn,Ss){return[Nn.split("").reverse().join(""),Sn,Ss]})),lt={text:V,x:de,y:Be,options:_e,mutex:{pdfEscape:Ja,activeFontKey:Ie,fonts:it,activeFontSize:Te}},dt.publish("postProcessText",lt),V=lt.text,oo=lt.mutex.isHex||!1;var Df=it[Ie].encoding;Df!=="WinAnsiEncoding"&&Df!=="StandardEncoding"||(V=Vn(V,function(Nn,Sn,Ss){return[Mp(Nn),Sn,Ss]})),Et=lo(V),V=[];for(var nd,sd,Uo,ad=0,id=1,zc=Array.isArray(Et[0])?id:ad,Zl="",If=function(Nn,Sn,Ss){var ds="";return Ss instanceof _t?(Ss=typeof _e.angle=="number"?cn(Ss,new _t(1,0,0,1,Nn,Sn)):cn(new _t(1,0,0,1,Nn,Sn),Ss),b===v.ADVANCED&&(Ss=cn(new _t(1,0,0,-1,0,0),Ss)),ds=Ss.join(" ")+` Tm
`):ds=N(Nn)+" "+N(Sn)+` Td
`,ds},Pi=0;Pi<Et.length;Pi++){switch(Zl="",zc){case id:Uo=(oo?"<":"(")+Et[Pi][0]+(oo?">":")"),nd=parseFloat(Et[Pi][1]),sd=parseFloat(Et[Pi][2]);break;case ad:Uo=(oo?"<":"(")+Et[Pi]+(oo?">":")"),nd=dl(de),sd=Kl(Be)}Ma!==void 0&&Ma[Pi]!==void 0&&(Zl=Ma[Pi]+` Tw
`),Pi===0?V.push(Zl+If(nd,sd,Cn)+Uo):zc===ad?V.push(Zl+Uo):zc===id&&V.push(Zl+If(nd,sd,Cn)+Uo)}V=zc===ad?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var ki=`BT
/`;return ki+=Ie+" "+Te+` Tf
`,ki+=N(Te*ta)+` TL
`,ki+=Uc+`
`,ki+=Os,ki+=V,te(ki+="ET"),A[Ie]=!0,pr};var lv=h.__private__.clip=h.clip=function(V){return te(V==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return lv("evenodd")},h.__private__.discardPath=h.discardPath=function(){return te("n"),this};var ul=h.__private__.isValidStyle=function(V){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(de=!0),de};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(V){return ul(V)&&(u=V),this};var Bp=h.__private__.getStyle=h.getStyle=function(V){var de=u;switch(V){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=V}return de},Tp=h.close=function(){return te("h"),this};h.stroke=function(){return te("S"),this},h.fill=function(V){return bf("f",V),this},h.fillEvenOdd=function(V){return bf("f*",V),this},h.fillStroke=function(V){return bf("B",V),this},h.fillStrokeEvenOdd=function(V){return bf("B*",V),this};var bf=function(V,de){In(de)==="object"?Ip(de,V):te(V)},Za=function(V){V===null||b===v.ADVANCED&&V===void 0||(V=Bp(V),te(V))};function Dp(V,de,Be,_e,Qe){var lt=new im(de||this.boundingBox,Be||this.xStep,_e||this.yStep,this.gState,Qe||this.matrix);lt.stream=this.stream;var Et=V+"$$"+this.cloneIndex+++"$$";return Mr(Et,lt),lt}var Ip=function(V,de){var Be=gn[V.key],_e=ar[Be];if(_e instanceof uh)te("q"),te(_p(de)),_e.gState&&h.setGState(_e.gState),te(V.matrix.toString()+" cm"),te("/"+Be+" sh"),te("Q");else if(_e instanceof im){var Qe=new _t(1,0,0,-1,0,$c());V.matrix&&(Qe=Qe.multiply(V.matrix||Rr),Be=Dp.call(_e,V.key,V.boundingBox,V.xStep,V.yStep,Qe).id),te("q"),te("/Pattern cs"),te("/"+Be+" scn"),_e.gState&&h.setGState(_e.gState),te(de),te("Q")}},_p=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},rA=h.moveTo=function(V,de){return te(N(S(V))+" "+N(M(de))+" m"),this},Yu=h.lineTo=function(V,de){return te(N(S(V))+" "+N(M(de))+" l"),this},Fc=h.curveTo=function(V,de,Be,_e,Qe,lt){return te([N(S(V)),N(M(de)),N(S(Be)),N(M(_e)),N(S(Qe)),N(M(lt)),"c"].join(" ")),this};h.__private__.line=h.line=function(V,de,Be,_e,Qe){if(isNaN(V)||isNaN(de)||isNaN(Be)||isNaN(_e)||!ul(Qe))throw new Error("Invalid arguments passed to jsPDF.line");return b===v.COMPAT?this.lines([[Be-V,_e-de]],V,de,[1,1],Qe||"S"):this.lines([[Be-V,_e-de]],V,de,[1,1]).stroke()},h.__private__.lines=h.lines=function(V,de,Be,_e,Qe,lt){var Et,$t,or,br,yr,zr,jn,Cn,pr,Ca,Os,oo;if(typeof V=="number"&&(oo=Be,Be=de,de=V,V=oo),_e=_e||[1,1],lt=lt||!1,isNaN(de)||isNaN(Be)||!Array.isArray(V)||!Array.isArray(_e)||!ul(Qe)||typeof lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(rA(de,Be),Et=_e[0],$t=_e[1],br=V.length,Ca=de,Os=Be,or=0;or<br;or++)(yr=V[or]).length===2?(Ca=yr[0]*Et+Ca,Os=yr[1]*$t+Os,Yu(Ca,Os)):(zr=yr[0]*Et+Ca,jn=yr[1]*$t+Os,Cn=yr[2]*Et+Ca,pr=yr[3]*$t+Os,Ca=yr[4]*Et+Ca,Os=yr[5]*$t+Os,Fc(zr,jn,Cn,pr,Ca,Os));return lt&&Tp(),Za(Qe),this},h.path=function(V){for(var de=0;de<V.length;de++){var Be=V[de],_e=Be.c;switch(Be.op){case"m":rA(_e[0],_e[1]);break;case"l":Yu(_e[0],_e[1]);break;case"c":Fc.apply(this,_e);break;case"h":Tp()}}return this},h.__private__.rect=h.rect=function(V,de,Be,_e,Qe){if(isNaN(V)||isNaN(de)||isNaN(Be)||isNaN(_e)||!ul(Qe))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v.COMPAT&&(_e=-_e),te([N(S(V)),N(M(de)),N(S(Be)),N(S(_e)),"re"].join(" ")),Za(Qe),this},h.__private__.triangle=h.triangle=function(V,de,Be,_e,Qe,lt,Et){if(isNaN(V)||isNaN(de)||isNaN(Be)||isNaN(_e)||isNaN(Qe)||isNaN(lt)||!ul(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Be-V,_e-de],[Qe-Be,lt-_e],[V-Qe,de-lt]],V,de,[1,1],Et,!0),this},h.__private__.roundedRect=h.roundedRect=function(V,de,Be,_e,Qe,lt,Et){if(isNaN(V)||isNaN(de)||isNaN(Be)||isNaN(_e)||isNaN(Qe)||isNaN(lt)||!ul(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $t=4/3*(Math.SQRT2-1);return Qe=Math.min(Qe,.5*Be),lt=Math.min(lt,.5*_e),this.lines([[Be-2*Qe,0],[Qe*$t,0,Qe,lt-lt*$t,Qe,lt],[0,_e-2*lt],[0,lt*$t,-Qe*$t,lt,-Qe,lt],[2*Qe-Be,0],[-Qe*$t,0,-Qe,-lt*$t,-Qe,-lt],[0,2*lt-_e],[0,-lt*$t,Qe*$t,-lt,Qe,-lt]],V+Qe,de,[1,1],Et,!0),this},h.__private__.ellipse=h.ellipse=function(V,de,Be,_e,Qe){if(isNaN(V)||isNaN(de)||isNaN(Be)||isNaN(_e)||!ul(Qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lt=4/3*(Math.SQRT2-1)*Be,Et=4/3*(Math.SQRT2-1)*_e;return rA(V+Be,de),Fc(V+Be,de-Et,V+lt,de-_e,V,de-_e),Fc(V-lt,de-_e,V-Be,de-Et,V-Be,de),Fc(V-Be,de+Et,V-lt,de+_e,V,de+_e),Fc(V+lt,de+_e,V+Be,de+Et,V+Be,de),Za(Qe),this},h.__private__.circle=h.circle=function(V,de,Be,_e){if(isNaN(V)||isNaN(de)||isNaN(Be)||!ul(_e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,de,Be,Be,_e)},h.setFont=function(V,de,Be){return Be&&(de=w(de,Be)),Ie=Np(V,de,{disableWarning:!1}),this};var Pp=h.__private__.getFont=h.getFont=function(){return it[Np.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var V,de,Be={};for(V in Pt)if(Pt.hasOwnProperty(V))for(de in Be[V]=[],Pt[V])Pt[V].hasOwnProperty(de)&&Be[V].push(de);return Be},h.addFont=function(V,de,Be,_e,Qe){var lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lt.indexOf(arguments[3])!==-1?Qe=arguments[3]:arguments[3]&&lt.indexOf(arguments[3])==-1&&(Be=w(Be,_e)),Qe=Qe||"Identity-H",Pc.call(this,V,de,Be,Qe)};var Rc,yf=t.lineWidth||.200025,wf=h.__private__.getLineWidth=h.getLineWidth=function(){return yf},kp=h.__private__.setLineWidth=h.setLineWidth=function(V){return yf=V,te(N(S(V))+" w"),this};h.__private__.setLineDash=hr.API.setLineDash=hr.API.setLineDashPattern=function(V,de){if(V=V||[],de=de||0,isNaN(de)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Be){return N(S(Be))}).join(" "),de=N(S(de)),te("["+V+"] "+de+" d"),this};var Vs=h.__private__.getLineHeight=h.getLineHeight=function(){return Te*Rc};h.__private__.getLineHeight=h.getLineHeight=function(){return Te*Rc};var Op=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Rc=V),this},ql=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Rc};Op(t.lineHeight);var dl=h.__private__.getHorizontalCoordinate=function(V){return S(V)},Kl=h.__private__.getVerticalCoordinate=function(V){return b===v.ADVANCED?V:yt[K].mediaBox.topRightY-yt[K].mediaBox.bottomLeftY-S(V)},cv=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(V){return N(dl(V))},Mc=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(V){return N(Kl(V))},ei=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ka(ei)},h.__private__.setStrokeColor=h.setDrawColor=function(V,de,Be,_e){return ei=$r({ch1:V,ch2:de,ch3:Be,ch4:_e,pdfColorType:"draw",precision:2}),te(ei),this};var Lc=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ka(Lc)},h.__private__.setFillColor=h.setFillColor=function(V,de,Be,_e){return Lc=$r({ch1:V,ch2:de,ch3:Be,ch4:_e,pdfColorType:"fill",precision:2}),te(Lc),this};var Uc=t.textColor||"0 g",uv=h.__private__.getTextColor=h.getTextColor=function(){return ka(Uc)};h.__private__.setTextColor=h.setTextColor=function(V,de,Be,_e){return Uc=$r({ch1:V,ch2:de,ch3:Be,ch4:_e,pdfColorType:"text",precision:3}),this};var Ti=t.charSpace,jf=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Ti||0)};h.__private__.setCharSpace=h.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ti=V,this};var Xu=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(V){var de=h.CapJoinStyles[V];if(de===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xu=de,te(de+" J"),this};var nA=0;h.__private__.setLineJoin=h.setLineJoin=function(V){var de=h.CapJoinStyles[V];if(de===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nA=de,te(de+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(N(S(V))+" M"),this},h.GState=Vy,h.setGState=function(V){(V=typeof V=="string"?ir[nn[V]]:Fp(null,V)).equals(Mt)||(te("/"+V.id+" gs"),Mt=V)};var Fp=function(V,de){if(!V||!nn[V]){var Be=!1;for(var _e in ir)if(ir.hasOwnProperty(_e)&&ir[_e].equals(de)){Be=!0;break}if(Be)de=ir[_e];else{var Qe="GS"+(Object.keys(ir).length+1).toString(10);ir[Qe]=de,de.id=Qe}return V&&(nn[V]=de.id),dt.publish("addGState",de),de}};h.addGState=function(V,de){return Fp(V,de),this},h.saveGraphicsState=function(){return te("q"),dr.push({key:Ie,size:Te,color:Uc}),this},h.restoreGraphicsState=function(){te("Q");var V=dr.pop();return Ie=V.key,Te=V.size,Uc=V.color,Mt=null,this},h.setCurrentTransformationMatrix=function(V){return te(V.toString()+" cm"),this},h.comment=function(V){return te("#"+V),this};var Cf=function(V,de){var Be=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Be},set:function(lt){isNaN(lt)||(Be=parseFloat(lt))}});var _e=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _e},set:function(lt){isNaN(lt)||(_e=parseFloat(lt))}});var Qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Qe},set:function(lt){Qe=lt.toString()}}),this},sA=function(V,de,Be,_e){Cf.call(this,V,de),this.type="rect";var Qe=Be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Qe},set:function(Et){isNaN(Et)||(Qe=parseFloat(Et))}});var lt=_e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lt},set:function(Et){isNaN(Et)||(lt=parseFloat(Et))}}),this},aA=function(){this.page=At,this.currentPage=K,this.pages=fe.slice(0),this.pagesContext=yt.slice(0),this.x=Je,this.y=Ke,this.matrix=St,this.width=Ju(K),this.height=$c(K),this.outputDestination=oe,this.id="",this.objectNumber=-1};aA.prototype.restore=function(){At=this.page,K=this.currentPage,yt=this.pagesContext,fe=this.pages,Je=this.x,Ke=this.y,St=this.matrix,iA(K,this.width),oA(K,this.height),oe=this.outputDestination};var Rp=function(V,de,Be,_e,Qe){Pr.push(new aA),At=K=0,fe=[],Je=V,Ke=de,St=Qe,tA([Be,_e])},dv=function(V){if(Zt[V])Pr.pop().restore();else{var de=new aA,Be="Xo"+(Object.keys(Dt).length+1).toString(10);de.id=Be,Zt[V]=Be,Dt[Be]=de,dt.publish("addFormObject",de),Pr.pop().restore()}};for(var Nf in h.beginFormObject=function(V,de,Be,_e,Qe){return Rp(V,de,Be,_e,Qe),this},h.endFormObject=function(V){return dv(V),this},h.doFormObject=function(V,de){var Be=Dt[Zt[V]];return te("q"),te(de.toString()+" cm"),te("/"+Be.id+" Do"),te("Q"),this},h.getFormObject=function(V){var de=Dt[Zt[V]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},h.save=function(V,de){return V=V||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?($A(Ku(Gl()),V),typeof $A.unload=="function"&&gr.setTimeout&&setTimeout($A.unload,911),this):new Promise(function(Be,_e){try{var Qe=$A(Ku(Gl()),V);typeof $A.unload=="function"&&gr.setTimeout&&setTimeout($A.unload,911),Be(Qe)}catch(lt){_e(lt.message)}})},hr.API)hr.API.hasOwnProperty(Nf)&&(Nf==="events"&&hr.API.events.length?function(V,de){var Be,_e,Qe;for(Qe=de.length-1;Qe!==-1;Qe--)Be=de[Qe][0],_e=de[Qe][1],V.subscribe.apply(V,[Be].concat(typeof _e=="function"?[_e]:_e))}(dt,hr.API.events):h[Nf]=hr.API[Nf]);var Ju=h.getPageWidth=function(V){return(yt[V=V||K].mediaBox.topRightX-yt[V].mediaBox.bottomLeftX)/De},iA=h.setPageWidth=function(V,de){yt[V].mediaBox.topRightX=de*De+yt[V].mediaBox.bottomLeftX},$c=h.getPageHeight=function(V){return(yt[V=V||K].mediaBox.topRightY-yt[V].mediaBox.bottomLeftY)/De},oA=h.setPageHeight=function(V,de){yt[V].mediaBox.topRightY=de*De+yt[V].mediaBox.bottomLeftY};return h.internal={pdfEscape:Ja,getStyle:Bp,getFont:Pp,getFontSize:Me,getCharSpace:jf,getTextColor:uv,getLineHeight:Vs,getLineHeightFactor:ql,getLineWidth:wf,write:ye,getHorizontalCoordinate:dl,getVerticalCoordinate:Kl,getCoordinateString:cv,getVerticalCoordinateString:Mc,collections:{},newObject:Xt,newAdditionalObject:us,newObjectDeferred:Jr,newObjectDeferredBegin:Pn,getFilters:Oa,putStream:Fa,events:dt,scaleFactor:De,pageSize:{getWidth:function(){return Ju(K)},setWidth:function(V){iA(K,V)},getHeight:function(){return $c(K)},setHeight:function(V){oA(K,V)}},encryptionOptions:d,encryption:ja,getEncryptor:iv,output:Oc,getNumberOfPages:rv,pages:fe,out:te,f2:k,f3:D,getPageInfo:Ep,getPageInfoByObjId:fr,getCurrentPageInfo:ov,getPDFVersion:p,Point:Cf,Rectangle:sA,Matrix:_t,hasHotfix:cl},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Ju(K)},set:function(V){iA(K,V)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return $c(K)},set:function(V){oA(K,V)},enumerable:!0,configurable:!0}),qu.call(h,be),Ie="F1",jp(a,r),dt.publish("initialized"),h}Pg.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Pg.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Pg.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Pg.prototype.processOwnerPassword=function(t,e){return s_(n_(e).substr(0,5),t)},Pg.prototype.encryptor=function(t,e){var r=n_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return s_(r,n)}},Vy.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||In(t)!==In(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},hr.API={events:[]},hr.version="3.0.1";var Rs=hr.API,D3=1,dp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Tr=function(t){return t.toFixed(2)},qf=function(t){return t.toFixed(5)};Rs.__acroform__={};var Fo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},E7=function(t){return t*D3},nu=function(t){var e=new xee,r=Jt.internal.getHeight(t)||0,n=Jt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Tr(n)),Number(Tr(r))],e},SWe=Rs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},EWe=Rs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},BWe=Rs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ks=Rs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BWe(t,e-1)},Ys=Rs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SWe(t,e-1)},Xs=Rs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EWe(t,e-1)},TWe=Rs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],i=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(Tr(c.lowerLeft_X)),Number(Tr(c.lowerLeft_Y)),Number(Tr(c.upperRight_X)),Number(Tr(c.upperRight_Y))]},DWe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=a_(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Tr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=nu(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},a_=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var i=r,o=Jt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Jt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(D,S,F){if(D+1<a.length){var M=S+" "+a[D+1][0];return Aj(M,t,F).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var u,d,f=Aj("3",t,i).height,A=t.multiline?o-i:(o-f)/2,h=A+=2,m=0,p=0,g=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Aj(e,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",v=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var C=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(v+2)+2>o)continue e;x+=a[b][g],C=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(b),w=c(j,x,i),N=b>=a.length-1;if(w&&!N){x+=" ",g=0;continue}if(w||N){if(N)p=j;else if(t.multiline&&(f+2)*(v+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(v+2)+2>o)continue e;p=j}}for(var E="",_=m;_<=p;_++){var k=a[_];if(t.multiline){if(_===p){E+=k[g]+" ",g=(g+1)%k.length;continue}if(_===m){E+=k[k.length-1]+" ";continue}}E+=k[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Aj(E,t,i).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}e+=Tr(u)+" "+Tr(h)+` Td
`,e+="("+dp(E)+`) Tj
`,e+=-Tr(u)+` 0 Td
`,h=-(i+2),d=0,m=C?p:p+1,v++,x=""}break}return n.text=e,n.fontSize=i,n},Aj=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},IWe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_We=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},PWe=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];e.internal.newObjectDeferredBegin(a.objId,!0),In(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},kWe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ic.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(IWe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new vee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&_We(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=TWe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Jt.createDefaultAppearanceStream(l),In(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=DWe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&PWe(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},gee=Rs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),In(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+dp(n(t[i].toString()))+")"):a+=t[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},BT=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+dp(n(t))+")"},vu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vu.prototype.toString=function(){return this.objId+" 0 R"},vu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},vu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:gee(a,this.objId,this.scope)}):a instanceof vu?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var xee=function(){vu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Fo(xee,vu);var vee=function(){vu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+dp(r(t))+")"}},set:function(r){t=r}})};Fo(vee,vu);var Ic=function t(){vu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ks(e,3)},set:function(x){x?this.F=Ys(e,3):this.F=Xs(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof rN)return;i="FieldObject"+t.FieldNum++}var x=function(v){return v};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+dp(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/D3:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof rN||this instanceof Dh))return BT(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof ga?A:BT(A,this.objId,this.scope)},set:function(x){x=x.toString(),A=this instanceof ga?x:x.substr(0,1)==="("?Sg(x.substr(1,x.length-2)):Sg(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ga?Sg(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof ga?"/"+x:x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ga?h:BT(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof ga?x:x.substr(0,1)==="("?Sg(x.substr(1,x.length-2)):Sg(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ga?Sg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof ga?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,1)},set:function(x){x?this.Ff=Ys(this.Ff,1):this.Ff=Xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,2)},set:function(x){x?this.Ff=Ys(this.Ff,2):this.Ff=Xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,3)},set:function(x){x?this.Ff=Ys(this.Ff,3):this.Ff=Xs(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};Fo(Ic,vu);var gm=function(){Ic.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return gee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,18)},set:function(r){r?this.Ff=Ys(this.Ff,18):this.Ff=Xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ys(this.Ff,19):this.Ff=Xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,20)},set:function(r){r?(this.Ff=Ys(this.Ff,20),e.sort()):this.Ff=Xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,22)},set:function(r){r?this.Ff=Ys(this.Ff,22):this.Ff=Xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(r){r?this.Ff=Ys(this.Ff,23):this.Ff=Xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,27)},set:function(r){r?this.Ff=Ys(this.Ff,27):this.Ff=Xs(this.Ff,27)}}),this.hasAppearanceStream=!1};Fo(gm,Ic);var xm=function(){gm.call(this),this.fontName="helvetica",this.combo=!1};Fo(xm,gm);var vm=function(){xm.call(this),this.combo=!0};Fo(vm,xm);var Bb=function(){vm.call(this),this.edit=!0};Fo(Bb,vm);var ga=function(){Ic.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,15)},set:function(r){r?this.Ff=Ys(this.Ff,15):this.Ff=Xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,16)},set:function(r){r?this.Ff=Ys(this.Ff,16):this.Ff=Xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,17)},set:function(r){r?this.Ff=Ys(this.Ff,17):this.Ff=Xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(r){r?this.Ff=Ys(this.Ff,26):this.Ff=Xs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+dp(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){In(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Fo(ga,Ic);var Tb=function(){ga.call(this),this.pushButton=!0};Fo(Tb,ga);var bm=function(){ga.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Fo(bm,ga);var rN=function(){var t,e;Ic.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+dp(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){In(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fo(rN,Ic),bm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bm.prototype.createOption=function(t){var e=new rN;return e.Parent=this,e.optionName=t,this.Kids.push(e),OWe.call(this.scope,e),e};var Db=function(){ga.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Jt.CheckBox.createAppearanceStream()};Fo(Db,ga);var Dh=function(){Ic.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,13)},set:function(e){e?this.Ff=Ys(this.Ff,13):this.Ff=Xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,21)},set:function(e){e?this.Ff=Ys(this.Ff,21):this.Ff=Xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(e){e?this.Ff=Ys(this.Ff,23):this.Ff=Xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,24)},set:function(e){e?this.Ff=Ys(this.Ff,24):this.Ff=Xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,25)},set:function(e){e?this.Ff=Ys(this.Ff,25):this.Ff=Xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(e){e?this.Ff=Ys(this.Ff,26):this.Ff=Xs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fo(Dh,Ic);var Ib=function(){Dh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,14)},set:function(t){t?this.Ff=Ys(this.Ff,14):this.Ff=Xs(this.Ff,14)}}),this.password=!0};Fo(Ib,Dh);var Jt={CheckBox:{createAppearanceStream:function(){return{N:{On:Jt.CheckBox.YesNormal},D:{On:Jt.CheckBox.YesPushDown,Off:Jt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=a_(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Tr(Jt.internal.getWidth(t))+" "+Tr(Jt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Tr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=nu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=Jt.internal.getHeight(t),o=Jt.internal.getWidth(t),l=a_(t,t.caption);return a.push("1 g"),a.push("0 0 "+Tr(o)+" "+Tr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Tr(o-1)+" "+Tr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Tr(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Tr(Jt.internal.getWidth(t))+" "+Tr(Jt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Jt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Jt.RadioButton.Circle.YesNormal,e.D[t]=Jt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=nu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Jt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+qf(Jt.internal.getWidth(t)/2)+" "+qf(Jt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Jt.internal.Bezier_C).toFixed(5)),o=Number((n*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qf(Jt.internal.getWidth(t)/2)+" "+qf(Jt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+qf(Jt.internal.getWidth(t)/2)+" "+qf(Jt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qf(Jt.internal.getWidth(t)/2)+" "+qf(Jt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Jt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Jt.RadioButton.Cross.YesNormal,e.D[t]=Jt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=nu(t);e.scope=t.scope;var r=[],n=Jt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Tr(Jt.internal.getWidth(t)-2)+" "+Tr(Jt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Tr(n.x1.x)+" "+Tr(n.x1.y)+" m"),r.push(Tr(n.x2.x)+" "+Tr(n.x2.y)+" l"),r.push(Tr(n.x4.x)+" "+Tr(n.x4.y)+" m"),r.push(Tr(n.x3.x)+" "+Tr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=Jt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Tr(Jt.internal.getWidth(t))+" "+Tr(Jt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Tr(Jt.internal.getWidth(t)-2)+" "+Tr(Jt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Tr(r.x1.x)+" "+Tr(r.x1.y)+" m"),n.push(Tr(r.x2.x)+" "+Tr(r.x2.y)+" l"),n.push(Tr(r.x4.x)+" "+Tr(r.x4.y)+" m"),n.push(Tr(r.x3.x)+" "+Tr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=nu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Tr(Jt.internal.getWidth(t))+" "+Tr(Jt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Jt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Jt.internal.getWidth(t),r=Jt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Jt.internal.getWidth=function(t){var e=0;return In(t)==="object"&&(e=E7(t.Rect[2])),e},Jt.internal.getHeight=function(t){var e=0;return In(t)==="object"&&(e=E7(t.Rect[3])),e};var OWe=Rs.addField=function(t){if(kWe(this,t),!(t instanceof Ic))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Rs.AcroFormChoiceField=gm,Rs.AcroFormListBox=xm,Rs.AcroFormComboBox=vm,Rs.AcroFormEditBox=Bb,Rs.AcroFormButton=ga,Rs.AcroFormPushButton=Tb,Rs.AcroFormRadioButton=bm,Rs.AcroFormCheckBox=Db,Rs.AcroFormTextField=Dh,Rs.AcroFormPasswordField=Ib,Rs.AcroFormAppearance=Jt,Rs.AcroForm={ChoiceField:gm,ListBox:xm,ComboBox:vm,EditBox:Bb,Button:ga,PushButton:Tb,RadioButton:bm,CheckBox:Db,TextField:Dh,PasswordField:Ib,Appearance:Jt},hr.AcroForm={ChoiceField:gm,ListBox:xm,ComboBox:vm,EditBox:Bb,Button:ga,PushButton:Tb,RadioButton:bm,CheckBox:Db,TextField:Dh,PasswordField:Ib,Appearance:Jt};var FWe=hr.AcroForm;function bee(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(D,S){var F,M,R,U,z,Q=e;if((S=S||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(w(D))for(z in r)for(R=r[z],F=0;F<R.length;F+=1){for(U=!0,M=0;M<R[F].length;M+=1)if(R[F][M]!==void 0&&R[F][M]!==D[M]){U=!1;break}if(U===!0){Q=z;break}}else for(z in r)for(R=r[z],F=0;F<R.length;F+=1){for(U=!0,M=0;M<R[F].length;M+=1)if(R[F][M]!==void 0&&R[F][M]!==D.charCodeAt(M)){U=!1;break}if(U===!0){Q=z;break}}return Q===e&&S!==e&&(Q=S),Q},a=function D(S){for(var F=this.internal.write,M=this.internal.putStream,R=(0,this.internal.getFilters)();R.indexOf("FlateEncode")!==-1;)R.splice(R.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:S.width}),U.push({key:"Height",value:S.height}),S.colorSpace===g.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===g.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var z="",Q=0,H=S.transparency.length;Q<H;Q++)z+=S.transparency[Q]+" "+S.transparency[Q]+" ";U.push({key:"Mask",value:"["+z+"]"})}S.sMask!==void 0&&U.push({key:"SMask",value:S.objectId+1+" 0 R"});var q=S.filter!==void 0?["/"+S.filter]:void 0;if(M({data:S.data,additionalKeyValues:U,alreadyAppliedFilters:q,objectId:S.objectId}),F("endobj"),"sMask"in S&&S.sMask!==void 0){var X="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,$={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:X,data:S.sMask};"filter"in S&&($.filter=S.filter),D.call(this,$)}if(S.colorSpace===g.INDEXED){var K=this.internal.newObject();M({data:E(new Uint8Array(S.palette)),objectId:K}),F("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var S in D)a.call(this,D[S])},o=function(){var D,S=this.internal.collections.addImage_images,F=this.internal.write;for(var M in S)F("/I"+(D=S[M]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof t["process"+D.toUpperCase()]=="function"},f=function(D){return In(D)==="object"&&D.nodeType===1},A=function(D,S){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var F=""+D.getAttribute("src");if(F.indexOf("data:image/")===0)return Eb(unescape(F).split("base64,").pop());var M=t.loadFile(F,!0);if(M!==void 0)return M}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var R;switch(S){case"PNG":R="image/png";break;case"WEBP":R="image/webp";break;case"JPEG":case"JPG":default:R="image/jpeg"}return Eb(D.toDataURL(R,1).split("base64,").pop())}},h=function(D){var S=this.internal.collections.addImage_images;if(S){for(var F in S)if(D===S[F].alias)return S[F]}},m=function(D,S,F){return D||S||(D=-96,S=-96),D<0&&(D=-1*F.width*72/D/this.internal.scaleFactor),S<0&&(S=-1*F.height*72/S/this.internal.scaleFactor),D===0&&(D=S*F.width/F.height),S===0&&(S=D*F.height/F.width),[D,S]},p=function(D,S,F,M,R,U){var z=m.call(this,F,M,R),Q=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,q=c.call(this);if(F=z[0],M=z[1],q[R.index]=R,U){U*=Math.PI/180;var X=Math.cos(U),$=Math.sin(U),K=function(Z){return Z.toFixed(4)},se=[K(X),K($),K(-1*$),K(X),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,Q(D),H(S+M),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([Q(F),"0","0",Q(M),"0","0","cm"].join(" "))):this.internal.write([Q(F),"0","0",Q(M),Q(D),H(S+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+R.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(D){var S,F,M=0;if(typeof D=="string")for(F=D.length,S=0;S<F;S++)M=(M<<5)-M+D.charCodeAt(S),M|=0;else if(w(D))for(F=D.byteLength/2,S=0;S<F;S++)M=(M<<5)-M+D[S],M|=0;return M},b=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var S=!0;return D.length===0&&(S=!1),D.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(S=!1),S},C=t.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var S=D.indexOf(",");return S<0?null:D.substring(0,S).trim().endsWith("base64")?D.substring(S+1):null},j=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return j()&&D instanceof ArrayBuffer};var w=t.__addimage__.isArrayBufferView=function(D){return j()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},N=t.__addimage__.binaryStringToUint8Array=function(D){for(var S=D.length,F=new Uint8Array(S),M=0;M<S;M++)F[M]=D.charCodeAt(M);return F},E=t.__addimage__.arrayBufferToBinaryString=function(D){for(var S="",F=w(D)?D:new Uint8Array(D),M=0;M<F.length;M+=8192)S+=String.fromCharCode.apply(null,F.subarray(M,M+8192));return S};t.addImage=function(){var D,S,F,M,R,U,z,Q,H;if(typeof arguments[1]=="number"?(S=e,F=arguments[1],M=arguments[2],R=arguments[3],U=arguments[4],z=arguments[5],Q=arguments[6],H=arguments[7]):(S=arguments[1],F=arguments[2],M=arguments[3],R=arguments[4],U=arguments[5],z=arguments[6],Q=arguments[7],H=arguments[8]),In(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var q=D;D=q.imageData,S=q.format||S||e,F=q.x||F||0,M=q.y||M||0,R=q.w||q.width||R,U=q.h||q.height||U,z=q.alias||z,Q=q.compression||Q,H=q.rotation||q.angle||H}var X=this.internal.getFilters();if(Q===void 0&&X.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(F)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var $=_.call(this,D,S,z,Q);return p.call(this,F,M,R,U,$,H),this};var _=function(D,S,F,M){var R,U,z;if(typeof D=="string"&&n(D)===e){D=unescape(D);var Q=k(D,!1);(Q!==""||(Q=t.loadFile(D,!0))!==void 0)&&(D=Q)}if(f(D)&&(D=A(D,S)),S=n(D,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((z=F)==null||z.length===0)&&(F=function(H){return typeof H=="string"||w(H)?v(H):w(H.data)?v(H.data):null}(D)),(R=h.call(this,F))||(j()&&(D instanceof Uint8Array||S==="RGBA"||(U=D,D=N(D))),R=this["process"+S.toUpperCase()](D,u.call(this),F,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:x.NONE}(M),U)),!R)throw new Error("An unknown error occurred whilst processing the image.");return R},k=t.__addimage__.convertBase64ToBinaryString=function(D,S){S=typeof S!="boolean"||S;var F,M="";if(typeof D=="string"){var R;F=(R=C(D))!==null&&R!==void 0?R:D;try{M=Eb(F)}catch(U){if(S)throw b(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};t.getImageProperties=function(D){var S,F,M="";if(f(D)&&(D=A(D)),typeof D=="string"&&n(D)===e&&((M=k(D,!1))===""&&(M=t.loadFile(D)||""),D=M),F=n(D),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!j()||D instanceof Uint8Array||(D=N(D)),!(S=this["process"+F.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=F,S}})(hr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};hr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(x(n.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(x(v))+") >>",p.content=i;var b=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var w=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:o,type:"link"})},t.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,o,i),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(hr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&i(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&i(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&i(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&i(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&i(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,v="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(v+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,v+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,v+=p.charAt(g-b),g-=b,b=0);return v};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,g,x){return o(p)?i(p)===!1?-1:!u(p)||!o(g)&&!o(x)||!o(x)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(x)&&u(x)?3:l(p)||!o(x)?1:2:-1},h=function(p){var g=0,x=0,v=0,b="",C="",j="",w=(p=p||"").split("\\s+"),N=[];for(g=0;g<w.length;g+=1){for(N.push(""),x=0;x<w[g].length;x+=1)b=w[g][x],C=w[g][x-1],j=w[g][x+1],o(b)?(v=A(b,C,j),N[g]+=v!==-1?String.fromCharCode(e[b.charCodeAt(0)][v]):b):N[g]+=b;N[g]=f(N[g])}return N.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var v=0;for(x=[],v=0;v<g.length;v+=1)Array.isArray(g[v])?x.push([h(g[v][0]),g[v][1],g[v][2]]):x.push([h(g[v])]);p=x}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(hr.API),hr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(hr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,C){return b.concat(g.splitTextToSize(C,x))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)h<(p=this.getStringUnitWidth(c[v],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,g,x=[],v=[],b=[],C={},j={},w=[],N=[],E=(A=A||{}).autoSize||!1,_=A.printHeaders!==!1,k=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,D=A.margins||Object.assign({width:this.getPageWidth()},e),S=typeof A.padding=="number"?A.padding:3,F=A.headerBackgroundColor||"#c8c8c8",M=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=M,this.setFontSize(k),f==null)v=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&In(f[0])==="object")for(x=f.map(function(q){return q.name}),v=f.map(function(q){return q.prompt||q.name||""}),b=f.map(function(q){return q.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=f[h].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(v=x=f,b=x.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<x.length;h+=1){for(C[g=x[h]]=d.map(function(q){return q[g]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(v[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=C[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)w.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,w)+S+S,w=[]}if(_){var R={};for(h=0;h<x.length;h+=1)R[x[h]]={},R[x[h]].text=v[h],R[x[h]].align=b[h];var U=l.call(this,R,j);N=x.map(function(q){return new i(c,u,j[q],U,R[q].text,void 0,R[q].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var z=f.reduce(function(q,X){return q[X.name]=X.align,q},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var Q=l.call(this,d[h],j);for(p=0;p<x.length;p+=1){var H=d[h][x[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:H},this),o.call(this,new i(c,u,j[x[p]],Q,H,h+2,z[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(hr.API);var yee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},wee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],i_=bee(wee),jee=[100,200,300,400,500,600,700,800,900],RWe=bee(jee);function o_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return yee[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(i){return typeof i_[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function B7(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var MWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},T7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function D7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function LWe(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},MWe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<e.length;++l)if(a[(i=o_(e[l])).family]&&(i.family=a[i.family]),t.hasOwnProperty(i.family)){o=t[i.family];break}if(!(o=o||t[n]))throw new Error("Could not find a font-family for the rule '"+D7(i)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=i_[c],f=d<=i_.normal?-1:1,A=B7(u,wee,d,f);if(!A)throw new Error("Could not find a matching font-stretch value for "+c);return A}(i.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=yee[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=RWe[c],f=B7(u,jee,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+D7(i)+"'.");return o}function I7(t){return t.trimLeft()}function UWe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function $We(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var mj,_7,P7,TT=["times"];(function(t){var e,r,n,a,i,o,l,c,u,d=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new c,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new o,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new o,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=$;Object.defineProperty(this,"pdf",{get:function(){return K}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(ge){se=!!ge}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(ge){Z=!!ge}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(ge){isNaN(ge)||(ie=ge)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(ge){isNaN(ge)||(ee=ge)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ge){var te;typeof ge=="number"?te=[ge,ge,ge,ge]:((te=new Array(4))[0]=ge[0],te[1]=ge.length>=2?ge[1]:te[0],te[2]=ge.length>=3?ge[2]:te[0],te[3]=ge.length>=4?ge[3]:te[1]),u.margin=te}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(ge){ue=ge}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(ge){ae=ge}});var re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return re},set:function(ge){re=ge}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ge){ge instanceof d&&(u=ge)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ge){u.path=ge}});var fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return fe},set:function(ge){fe=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var te;te=A(ge),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var te=A(ge);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var G=null;function oe(ge,te){if(G===null){var ye=function(we){var be=[];return Object.keys(we).forEach(function(Te){we[Te].forEach(function(Oe){var Me=null;switch(Oe){case"bold":Me={family:Te,weight:"bold"};break;case"italic":Me={family:Te,style:"italic"};break;case"bolditalic":Me={family:Te,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Te}}Me!==null&&(Me.ref={name:Te,style:Oe},be.push(Me))})}),be}(ge.getFontList());G=function(we){for(var be={},Te=0;Te<we.length;++Te){var Oe=o_(we[Te]),Me=Oe.family,Ve=Oe.stretch,Pe=Oe.style,ze=Oe.weight;be[Me]=be[Me]||{},be[Me][Ve]=be[Me][Ve]||{},be[Me][Ve][Pe]=be[Me][Ve][Pe]||{},be[Me][Ve][Pe][ze]=Oe}return be}(ye.concat(te))}return G}var Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(ge){G=null,Se=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var te;if(this.ctx.font=ge,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var ye=te[1];te[2];var we=te[3],be=te[4];te[5];var Te=te[6],Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(Oe==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var Me=function(xt){var Ie,De,Je=[],Ke=xt.trim();if(Ke==="")return TT;if(Ke in T7)return[T7[Ke]];for(;Ke!=="";){switch(De=null,Ie=(Ke=I7(Ke)).charAt(0)){case'"':case"'":De=UWe(Ke.substring(1),Ie);break;default:De=$We(Ke)}if(De===null||(Je.push(De[0]),(Ke=I7(De[1]))!==""&&Ke.charAt(0)!==","))return TT;Ke=Ke.replace(/^,/,"")}return Je}(Te);if(this.fontFaces){var Ve=LWe(oe(this.pdf,this.fontFaces),Me.map(function(xt){return{family:xt,stretch:"normal",weight:we,style:ye}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Pe="";(we==="bold"||parseInt(we,10)>=700||ye==="bold")&&(Pe="bold"),ye==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var ze="",ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<Me.length;gt++){if(this.pdf.internal.getFont(Me[gt],Pe,{noFallback:!0,disableWarning:!0})!==void 0){ze=Me[gt];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Me[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ze=Me[gt],Pe="bold";else if(this.pdf.internal.getFont(Me[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ze=Me[gt],Pe="normal";break}}if(ze===""){for(var Ct=0;Ct<Me.length;Ct++)if(ht[Me[Ct]]){ze=ht[Me[Ct]];break}}ze=ze===""?"Times":ze,this.pdf.setFont(ze,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};f.prototype.setLineDash=function($){this.lineDash=$},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){C.call(this,"fill",!1)},f.prototype.stroke=function(){C.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function($,K){if(isNaN($)||isNaN(K))throw Fn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new o($,K));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new o($,K)},f.prototype.closePath=function(){var $=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&In(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){$=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o($.x,$.y)},f.prototype.lineTo=function($,K){if(isNaN($)||isNaN(K))throw Fn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new o($,K));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},f.prototype.quadraticCurveTo=function($,K,se,Z){if(isNaN(se)||isNaN(Z)||isNaN($)||isNaN(K))throw Fn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(se,Z)),ee=this.ctx.transform.applyToPoint(new o($,K));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.bezierCurveTo=function($,K,se,Z,ie,ee){if(isNaN(ie)||isNaN(ee)||isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z))throw Fn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new o(ie,ee)),ae=this.ctx.transform.applyToPoint(new o($,K)),re=this.ctx.transform.applyToPoint(new o(se,Z));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:re.x,y2:re.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},f.prototype.arc=function($,K,se,Z,ie,ee){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z)||isNaN(ie))throw Fn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new o($,K));$=ue.x,K=ue.y;var ae=this.ctx.transform.applyToPoint(new o(0,se)),re=this.ctx.transform.applyToPoint(new o(0,0));se=Math.sqrt(Math.pow(ae.x-re.x,2)+Math.pow(ae.y-re.y,2))}Math.abs(ie-Z)>=2*Math.PI&&(Z=0,ie=2*Math.PI),this.path.push({type:"arc",x:$,y:K,radius:se,startAngle:Z,endAngle:ie,counterclockwise:ee})},f.prototype.arcTo=function($,K,se,Z,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function($,K,se,Z){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z))throw Fn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,K),this.lineTo($+se,K),this.lineTo($+se,K+Z),this.lineTo($,K+Z),this.lineTo($,K),this.lineTo($+se,K),this.lineTo($,K)},f.prototype.fillRect=function($,K,se,Z){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z))throw Fn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,K,se,Z),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function($,K,se,Z){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z))throw Fn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect($,K,se,Z),this.stroke())},f.prototype.clearRect=function($,K,se,Z){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z))throw Fn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,K,se,Z))},f.prototype.save=function($){$=typeof $!="boolean"||$;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},f.prototype.restore=function($){$=typeof $!="boolean"||$;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(K),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function($){var K,se,Z,ie;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))K=0,se=0,Z=0,ie=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(ee!==null)K=parseInt(ee[1]),se=parseInt(ee[2]),Z=parseInt(ee[3]),ie=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)K=parseInt(ee[1]),se=parseInt(ee[2]),Z=parseInt(ee[3]),ie=parseFloat(ee[4]);else{if(ie=1,typeof $=="string"&&$.charAt(0)!=="#"){var ue=new Aee($);$=ue.ok?ue.toHex():"#000000"}$.length===4?(K=$.substring(1,2),K+=K,se=$.substring(2,3),se+=se,Z=$.substring(3,4),Z+=Z):(K=$.substring(1,3),se=$.substring(3,5),Z=$.substring(5,7)),K=parseInt(K,16),se=parseInt(se,16),Z=parseInt(Z,16)}}return{r:K,g:se,b:Z,a:ie,style:$}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function($,K,se,Z){if(isNaN(K)||isNaN(se)||typeof $!="string")throw Fn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!h.call(this)){var ie=Q(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;S.call(this,{text:$,x:K,y:se,scale:ee,angle:ie,align:this.textAlign,maxWidth:Z})}},f.prototype.strokeText=function($,K,se,Z){if(isNaN(K)||isNaN(se)||typeof $!="string")throw Fn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){Z=isNaN(Z)?void 0:Z;var ie=Q(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;S.call(this,{text:$,x:K,y:se,scale:ee,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:Z})}},f.prototype.measureText=function($){if(typeof $!="string")throw Fn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,se=this.pdf.internal.scaleFactor,Z=K.internal.getFontSize(),ie=K.getStringUnitWidth($)*Z/K.internal.scaleFactor,ee=function(ue){var ae=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new ee({width:ie*=Math.round(96*se/72*1e4)/1e4})},f.prototype.scale=function($,K){if(isNaN($)||isNaN(K))throw Fn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new c($,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},f.prototype.rotate=function($){if(isNaN($))throw Fn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function($,K){if(isNaN($)||isNaN(K))throw Fn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new c(1,0,0,1,$,K);this.ctx.transform=this.ctx.transform.multiply(se)},f.prototype.transform=function($,K,se,Z,ie,ee){if(isNaN($)||isNaN(K)||isNaN(se)||isNaN(Z)||isNaN(ie)||isNaN(ee))throw Fn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new c($,K,se,Z,ie,ee);this.ctx.transform=this.ctx.transform.multiply(ue)},f.prototype.setTransform=function($,K,se,Z,ie,ee){$=isNaN($)?1:$,K=isNaN(K)?0:K,se=isNaN(se)?0:se,Z=isNaN(Z)?1:Z,ie=isNaN(ie)?0:ie,ee=isNaN(ee)?0:ee,this.ctx.transform=new c($,K,se,Z,ie,ee)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function($,K,se,Z,ie,ee,ue,ae,re){var fe=this.pdf.getImageProperties($),G=1,oe=1,Se=1,ge=1;Z!==void 0&&ae!==void 0&&(Se=ae/Z,ge=re/ie,G=fe.width/Z*ae/Z,oe=fe.height/ie*re/ie),ee===void 0&&(ee=K,ue=se,K=0,se=0),Z!==void 0&&ae===void 0&&(ae=Z,re=ie),Z===void 0&&ae===void 0&&(ae=fe.width,re=fe.height);for(var te,ye=this.ctx.transform.decompose(),we=Q(ye.rotate.shx),be=new c,Te=(be=(be=(be=be.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(ee-K*Se,ue-se*ge,Z*G,ie*oe)),Oe=g.call(this,Te),Me=[],Ve=0;Ve<Oe.length;Ve+=1)Me.indexOf(Oe[Ve])===-1&&Me.push(Oe[Ve]);if(b(Me),this.autoPaging)for(var Pe=Me[0],ze=Me[Me.length-1],ht=Pe;ht<ze+1;ht++){this.pdf.setPage(ht);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=ht===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=ht===1?0:xt+(ht-2)*Ie;if(this.ctx.clip_path.length!==0){var Je=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(te,this.posX+this.margin[3],-De+Ct+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Je}var Ke=JSON.parse(JSON.stringify(Te));Ke=v([Ke],this.posX+this.margin[3],-De+Ct+this.ctx.prevPageLastElemOffset)[0];var St=(ht>Pe||ht<ze)&&p.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,Ie,null).clip().discardPath()),this.pdf.addImage($,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,we),St&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,we)};var g=function($,K,se){var Z=[];K=K||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":Z.push(Math.floor(($.y+ie)/se)+1);break;case"arc":Z.push(Math.floor(($.y+ie-$.radius)/se)+1),Z.push(Math.floor(($.y+ie+$.radius)/se)+1);break;case"qct":var ee=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);Z.push(Math.floor((ee.y+ie)/se)+1),Z.push(Math.floor((ee.y+ee.h+ie)/se)+1);break;case"bct":var ue=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);Z.push(Math.floor((ue.y+ie)/se)+1),Z.push(Math.floor((ue.y+ue.h+ie)/se)+1);break;case"rect":Z.push(Math.floor(($.y+ie)/se)+1),Z.push(Math.floor(($.y+$.h+ie)/se)+1)}for(var ae=0;ae<Z.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ae];)x.call(this);return Z},x=function(){var $=this.fillStyle,K=this.strokeStyle,se=this.font,Z=this.lineCap,ie=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=K,this.font=se,this.lineCap=Z,this.lineWidth=ie,this.lineJoin=ee},v=function($,K,se){for(var Z=0;Z<$.length;Z++)switch($[Z].type){case"bct":$[Z].x2+=K,$[Z].y2+=se;case"qct":$[Z].x1+=K,$[Z].y1+=se;case"mt":case"lt":case"arc":default:$[Z].x+=K,$[Z].y+=se}return $},b=function($){return $.sort(function(K,se){return K-se})},C=function($,K){for(var se,Z,ie=this.fillStyle,ee=this.strokeStyle,ue=this.lineCap,ae=this.lineWidth,re=Math.abs(ae*this.ctx.transform.scaleX),fe=this.lineJoin,G=JSON.parse(JSON.stringify(this.path)),oe=JSON.parse(JSON.stringify(this.path)),Se=[],ge=0;ge<oe.length;ge++)if(oe[ge].x!==void 0)for(var te=g.call(this,oe[ge]),ye=0;ye<te.length;ye+=1)Se.indexOf(te[ye])===-1&&Se.push(te[ye]);for(var we=0;we<Se.length;we++)for(;this.pdf.internal.getNumberOfPages()<Se[we];)x.call(this);if(b(Se),this.autoPaging)for(var be=Se[0],Te=Se[Se.length-1],Oe=be;Oe<Te+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ie,this.strokeStyle=ee,this.lineCap=ue,this.lineWidth=re,this.lineJoin=fe;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Oe===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Oe===1?0:Pe+(Oe-2)*ze;if(this.ctx.clip_path.length!==0){var gt=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(se,this.posX+this.margin[3],-ht+Ve+this.ctx.prevPageLastElemOffset),j.call(this,$,!0),this.path=gt}if(Z=JSON.parse(JSON.stringify(G)),this.path=v(Z,this.posX+this.margin[3],-ht+Ve+this.ctx.prevPageLastElemOffset),K===!1||Oe===0){var Ct=(Oe>be||Oe<Te)&&p.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ze,null).clip().discardPath()),j.call(this,$,K),Ct&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=re,j.call(this,$,K),this.lineWidth=ae;this.path=G},j=function($,K){if(($!=="stroke"||K||!m.call(this))&&($==="stroke"||K||!h.call(this))){for(var se,Z,ie=[],ee=this.path,ue=0;ue<ee.length;ue++){var ae=ee[ue];switch(ae.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ae,deltas:[],abs:[]});break;case"lt":var re=ie.length;if(ee[ue-1]&&!isNaN(ee[ue-1].x)&&(se=[ae.x-ee[ue-1].x,ae.y-ee[ue-1].y],re>0)){for(;re>=0;re--)if(ie[re-1].close!==!0&&ie[re-1].begin!==!0){ie[re-1].deltas.push(se),ie[re-1].abs.push(ae);break}}break;case"bct":se=[ae.x1-ee[ue-1].x,ae.y1-ee[ue-1].y,ae.x2-ee[ue-1].x,ae.y2-ee[ue-1].y,ae.x-ee[ue-1].x,ae.y-ee[ue-1].y],ie[ie.length-1].deltas.push(se);break;case"qct":var fe=ee[ue-1].x+2/3*(ae.x1-ee[ue-1].x),G=ee[ue-1].y+2/3*(ae.y1-ee[ue-1].y),oe=ae.x+2/3*(ae.x1-ae.x),Se=ae.y+2/3*(ae.y1-ae.y),ge=ae.x,te=ae.y;se=[fe-ee[ue-1].x,G-ee[ue-1].y,oe-ee[ue-1].x,Se-ee[ue-1].y,ge-ee[ue-1].x,te-ee[ue-1].y],ie[ie.length-1].deltas.push(se);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ae)}}Z=K?null:$==="stroke"?"stroke":"fill";for(var ye=!1,we=0;we<ie.length;we++)if(ie[we].arc)for(var be=ie[we].abs,Te=0;Te<be.length;Te++){var Oe=be[Te];Oe.type==="arc"?E.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,K,!ye):F.call(this,Oe.x,Oe.y),ye=!0}else if(ie[we].close===!0)this.pdf.internal.out("h"),ye=!1;else if(ie[we].begin!==!0){var Me=ie[we].start.x,Ve=ie[we].start.y;M.call(this,ie[we].deltas,Me,Ve),ye=!0}Z&&_.call(this,Z),K&&k.call(this)}},w=function($){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-se;case"top":return $+K-se;case"hanging":return $+K-2*se;case"middle":return $+K/2-se;case"ideographic":return $;case"alphabetic":default:return $}},N=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(K,se){this.colorStops.push([K,se])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function($,K,se,Z,ie,ee,ue,ae,re){for(var fe=U.call(this,se,Z,ie,ee),G=0;G<fe.length;G++){var oe=fe[G];G===0&&(re?D.call(this,oe.x1+$,oe.y1+K):F.call(this,oe.x1+$,oe.y1+K)),R.call(this,$,K,oe.x2,oe.y2,oe.x3,oe.y3,oe.x4,oe.y4)}ae?k.call(this):_.call(this,ue)},_=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},D=function($,K){this.pdf.internal.out(r($)+" "+n(K)+" m")},S=function($){var K;switch($.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var se=this.pdf.getTextDimensions($.text),Z=w.call(this,$.y),ie=N.call(this,Z)-se.h,ee=this.ctx.transform.applyToPoint(new o($.x,Z)),ue=this.ctx.transform.decompose(),ae=new c;ae=(ae=(ae=ae.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var re,fe,G,oe=this.ctx.transform.applyToRectangle(new l($.x,Z,se.w,se.h)),Se=ae.applyToRectangle(new l($.x,ie,se.w,se.h)),ge=g.call(this,Se),te=[],ye=0;ye<ge.length;ye+=1)te.indexOf(ge[ye])===-1&&te.push(ge[ye]);if(b(te),this.autoPaging)for(var we=te[0],be=te[te.length-1],Te=we;Te<be+1;Te++){this.pdf.setPage(Te);var Oe=Te===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Pe=Ve-this.margin[0],ze=this.pdf.internal.pageSize.width-this.margin[1],ht=ze-this.margin[3],gt=Te===1?0:Me+(Te-2)*Pe;if(this.ctx.clip_path.length!==0){var Ct=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(re,this.posX+this.margin[3],-1*gt+Oe),j.call(this,"fill",!0),this.path=Ct}var xt=v([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-gt+Oe+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*$.scale),G=this.lineWidth,this.lineWidth=G*$.scale);var Ie=this.autoPaging!=="text";if(Ie||xt.y+xt.h<=Ve){if(Ie||xt.y>=Oe&&xt.x<=ze){var De=Ie?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||ze-xt.x)[0],Je=v([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-gt+Oe+this.ctx.prevPageLastElemOffset)[0],Ke=Ie&&(Te>we||Te<be)&&p.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,Pe,null).clip().discardPath()),this.pdf.text(De,Je.x,Je.y,{angle:$.angle,align:K,renderingMode:$.renderingMode}),Ke&&this.pdf.restoreGraphicsState()}}else xt.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-xt.y);$.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=G)}else $.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*$.scale),G=this.lineWidth,this.lineWidth=G*$.scale),this.pdf.text($.text,ee.x+this.posX,ee.y+this.posY,{angle:$.angle,align:K,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=G)},F=function($,K,se,Z){se=se||0,Z=Z||0,this.pdf.internal.out(r($+se)+" "+n(K+Z)+" l")},M=function($,K,se){return this.pdf.lines($,K,se,null,null)},R=function($,K,se,Z,ie,ee,ue,ae){this.pdf.internal.out([e(a(se+$)),e(i(Z+K)),e(a(ie+$)),e(i(ee+K)),e(a(ue+$)),e(i(ae+K)),"c"].join(" "))},U=function($,K,se,Z){for(var ie=2*Math.PI,ee=Math.PI/2;K>se;)K-=ie;var ue=Math.abs(se-K);ue<ie&&Z&&(ue=ie-ue);for(var ae=[],re=Z?-1:1,fe=K;ue>1e-5;){var G=fe+re*Math.min(ue,ee);ae.push(z.call(this,$,fe,G)),ue-=Math.abs(G-fe),fe=G}return ae},z=function($,K,se){var Z=(se-K)/2,ie=$*Math.cos(Z),ee=$*Math.sin(Z),ue=ie,ae=-ee,re=ue*ue+ae*ae,fe=re+ue*ie+ae*ee,G=4/3*(Math.sqrt(2*re*fe)-fe)/(ue*ee-ae*ie),oe=ue-G*ae,Se=ae+G*ue,ge=oe,te=-Se,ye=Z+K,we=Math.cos(ye),be=Math.sin(ye);return{x1:$*Math.cos(K),y1:$*Math.sin(K),x2:oe*we-Se*be,y2:oe*be+Se*we,x3:ge*we-te*be,y3:ge*be+te*we,x4:$*Math.cos(se),y4:$*Math.sin(se)}},Q=function($){return 180*$/Math.PI},H=function($,K,se,Z,ie,ee){var ue=$+.5*(se-$),ae=K+.5*(Z-K),re=ie+.5*(se-ie),fe=ee+.5*(Z-ee),G=Math.min($,ie,ue,re),oe=Math.max($,ie,ue,re),Se=Math.min(K,ee,ae,fe),ge=Math.max(K,ee,ae,fe);return new l(G,Se,oe-G,ge-Se)},q=function($,K,se,Z,ie,ee,ue,ae){var re,fe,G,oe,Se,ge,te,ye,we,be,Te,Oe,Me,Ve,Pe=se-$,ze=Z-K,ht=ie-se,gt=ee-Z,Ct=ue-ie,xt=ae-ee;for(fe=0;fe<41;fe++)we=(te=(G=$+(re=fe/40)*Pe)+re*((Se=se+re*ht)-G))+re*(Se+re*(ie+re*Ct-Se)-te),be=(ye=(oe=K+re*ze)+re*((ge=Z+re*gt)-oe))+re*(ge+re*(ee+re*xt-ge)-ye),fe==0?(Te=we,Oe=be,Me=we,Ve=be):(Te=Math.min(Te,we),Oe=Math.min(Oe,be),Me=Math.max(Me,we),Ve=Math.max(Ve,be));return new l(Math.round(Te),Math.round(Oe),Math.round(Me-Te),Math.round(Ve-Oe))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,K,se=($=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:K}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(hr.API),function(t){var e=function(i){var o,l,c,u,d,f,A,h,m,p;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(d=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(p=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)-(A=d%85))/85)%85,l.push(f+33,A+33,h+33,m+33,p+33)):l.push(122);return function(g,x){for(var v=x;v>0;v--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,d,f=String,A="length",h=255,m="charCodeAt",p="slice",g="replace";for(i[p](-2),i=i[p](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,d=(i+=o="uuuuu"[p](i[A]%5||5))[A];d>u;u+=5)l=52200625*(i[m](u)-33)+614125*(i[m](u+1)-33)+7225*(i[m](u+2)-33)+85*(i[m](u+3)-33)+(i[m](u+4)-33),c.push(h&l>>24,h&l>>16,h&l>>8,h&l);return function(x,v){for(var b=v;b>0;b--)x.pop()}(c,o[A]),f.fromCharCode.apply(f,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=t_(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(hr.API),function(t){t.loadFile=function(e,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,g=[],x=String.fromCharCode;for(A=0;A<p;A+=1)g.push(x(255&m.charCodeAt(A)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,i,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(hr.API),function(t){function e(){return(gr.html2canvas?Promise.resolve(gr.html2canvas):Fh(()=>import("./html2canvas-D3Ol_Vns.js").then(o=>o.h),__vite__mapDeps([0,1]),import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(gr.DOMPurify?Promise.resolve(gr.DOMPurify):Fh(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=In(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),A=u.firstChild;A;A=A.nextSibling)d!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||f.appendChild(c(A,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var A=0;A<u.length;++A){var h=u[A],m=h.src.find(function(p){return p.format==="truetype"});m&&c.addFont(m.url,h.ref.name,h.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||hr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,hr.getPageSize=function(o,l,c){if(In(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var h,m=0,p=0;if(A.hasOwnProperty(f))m=A[f][1]/d,p=A[f][0]/d;else try{m=c[1],p=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",p>m&&(h=p,p=m,m=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>p&&(h=p,p=m,m=h)}return{width:p,height:m,unit:l,k:d,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(o_):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(hr.API),hr.API.addJS=function(t){return P7=t,this.internal.events.subscribe("postPutResources",function(){mj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(mj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),_7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+P7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){mj!==void 0&&_7!==void 0&&this.internal.out("/Names <</JavaScript "+mj+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(hr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,i,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=h,e.indexOf(f.charCodeAt(g+1))!==-1){A=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:A,numcomponents:f.charCodeAt(g+9)};break}h=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(hr.API);var Eg,pj,k7,O7,F7,HWe=function(){var t,e,r;function n(i){var o,l,c,u,d,f,A,h,m,p,g,x,v,b;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),m=(function(){var C,j;for(j=[],C=0;C<4;++C)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((p=c-this.transparency.indexed.length)>0)for(v=0;0<=p?v<p:v>p;0<=p?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":A=(g=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,g.slice(0,A)),this.text[h]=String.fromCharCode.apply(String,g.slice(A+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,A,h,m){var p,g,x,v,b,C,j,w,N,E,_,k,D,S,F,M,R,U,z,Q,H,q=Math.ceil((u.width-f)/h),X=Math.ceil((u.height-A)/m),$=u.width==q&&u.height==X;for(S=o*q,k=$?l:new Uint8Array(S*X),C=i.length,D=0,g=0;D<X&&c<C;){switch(i[c++]){case 0:for(v=R=0;R<S;v=R+=1)k[g++]=i[c++];break;case 1:for(v=U=0;U<S;v=U+=1)p=i[c++],b=v<o?0:k[g-o],k[g++]=(p+b)%256;break;case 2:for(v=z=0;z<S;v=z+=1)p=i[c++],x=(v-v%o)/o,F=D&&k[(D-1)*S+x*o+v%o],k[g++]=(F+p)%256;break;case 3:for(v=Q=0;Q<S;v=Q+=1)p=i[c++],x=(v-v%o)/o,b=v<o?0:k[g-o],F=D&&k[(D-1)*S+x*o+v%o],k[g++]=(p+Math.floor((b+F)/2))%256;break;case 4:for(v=H=0;H<S;v=H+=1)p=i[c++],x=(v-v%o)/o,b=v<o?0:k[g-o],D===0?F=M=0:(F=k[(D-1)*S+x*o+v%o],M=x&&k[(D-1)*S+(x-1)*o+v%o]),j=b+F-M,w=Math.abs(j-b),E=Math.abs(j-F),_=Math.abs(j-M),N=w<=E&&w<=_?b:E<=_?F:M,k[g++]=(p+N)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!$){var K=((A+D*m)*u.width+f)*o,se=D*S;for(v=0;v<q;v+=1){for(var Z=0;Z<o;Z+=1)l[K++]=k[se++];K+=(h-1)*o}}D++}}return i=vWe(i),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,u,d,f,A,h;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,i=0,o=f=0,A=l.length;f<A;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(h=d[i++])!=null?h:255;return u},n.prototype.copyToImageData=function(i,o){var l,c,u,d,f,A,h,m,p,g,x;if(c=this.colors,p=null,l=this.hasAlphaChannel,this.palette.length&&(p=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),m=(u=i.data||i).length,f=p||o,d=A=0,c===1)for(;d<m;)h=p?4*o[d/4]:A,g=f[h++],u[d++]=g,u[d++]=g,u[d++]=g,u[d++]=l?f[h++]:255,A=h;else for(;d<m;)h=p?4*o[d/4]:A,u[d++]=f[h++],u[d++]=f[h++],u[d++]=f[h++],u[d++]=l?f[h++]:255,A=h},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(gr)==="[object Window]"){try{e=gr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,u,d,f,A,h;if(this.animation){for(h=[],l=d=0,f=(A=this.animation.frames).length;d<f;l=++d)o=A[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,h.push(o.image=t(c));return h}},n.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,u,d,f,A=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var h,m;if(h=l++%u,m=c[h],A.renderFrame(i,h),u>1&&l/u<d)return A.animation._timeout=setTimeout(o,m.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function QWe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],i=a>>7,o=1<<(7&a)+1;t[e++],t[e++];var l=null,c=null;i&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],!(1&p)&&(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,C=t[e++],j=C>>6&1,w=1<<(7&C)+1,N=l,E=c,_=!1;C>>7&&(_=!0,N=e,E=w,e+=3*w);var k=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:g,y:x,width:v,height:b,has_local_palette:_,palette_offset:N,palette_size:E,data_offset:k,data_length:e-k,transparent_index:A,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,F){var M=this.frameInfo(S),R=M.width*M.height,U=new Uint8Array(R);R7(t,M.data_offset,U,R);var z=M.palette_offset,Q=M.transparent_index;Q===null&&(Q=256);var H=M.width,q=r-H,X=H,$=4*(M.y*r+M.x),K=4*((M.y+M.height)*r+M.x),se=$,Z=4*q;M.interlaced===!0&&(Z+=4*r*7);for(var ie=8,ee=0,ue=U.length;ee<ue;++ee){var ae=U[ee];if(X===0&&(X=H,(se+=Z)>=K&&(Z=4*q+4*r*(ie-1),se=$+(H+q)*(ie<<1),ie>>=1)),ae===Q)se+=4;else{var re=t[z+3*ae],fe=t[z+3*ae+1],G=t[z+3*ae+2];F[se++]=G,F[se++]=fe,F[se++]=re,F[se++]=255}--X}},this.decodeAndBlitFrameRGBA=function(S,F){var M=this.frameInfo(S),R=M.width*M.height,U=new Uint8Array(R);R7(t,M.data_offset,U,R);var z=M.palette_offset,Q=M.transparent_index;Q===null&&(Q=256);var H=M.width,q=r-H,X=H,$=4*(M.y*r+M.x),K=4*((M.y+M.height)*r+M.x),se=$,Z=4*q;M.interlaced===!0&&(Z+=4*r*7);for(var ie=8,ee=0,ue=U.length;ee<ue;++ee){var ae=U[ee];if(X===0&&(X=H,(se+=Z)>=K&&(Z=4*q+4*r*(ie-1),se=$+(H+q)*(ie<<1),ie>>=1)),ae===Q)se+=4;else{var re=t[z+3*ae],fe=t[z+3*ae+1],G=t[z+3*ae+2];F[se++]=re,F[se++]=fe,F[se++]=G,F[se++]=255}--X}}}function R7(t,e,r,n){for(var a=t[e++],i=1<<a,o=i+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==i){if(g===o)break;for(var x=g<l?g:p,v=0,b=x;b>i;)b=m[b]>>8,++v;var C=b;if(A+v+(x!==g?1:0)>n)return void Fn.log("Warning, gif stream longer than expected.");r[A++]=C;var j=A+=v;for(x!==g&&(r[A++]=C),b=x;v--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|C,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&Fn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function DT(t){var e,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],g=0,x=7,v=new Array(64),b=new Array(64),C=new Array(64),j=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U($,K){for(var se=0,Z=0,ie=new Array,ee=1;ee<=16;ee++){for(var ue=1;ue<=$[ee];ue++)ie[K[Z]]=[],ie[K[Z]][0]=se,ie[K[Z]][1]=ee,Z++,se++;se*=2}return ie}function z($){for(var K=$[0],se=$[1]-1;se>=0;)K&1<<se&&(g|=1<<x),se--,--x<0&&(g==255?(Q(255),Q(0)):Q(g),x=7,g=0)}function Q($){p.push($)}function H($){Q($>>8&255),Q(255&$)}function q($,K,se,Z,ie){for(var ee,ue=ie[0],ae=ie[240],re=function(be,Te){var Oe,Me,Ve,Pe,ze,ht,gt,Ct,xt,Ie,De=0;for(xt=0;xt<8;++xt){Oe=be[De],Me=be[De+1],Ve=be[De+2],Pe=be[De+3],ze=be[De+4],ht=be[De+5],gt=be[De+6];var Je=Oe+(Ct=be[De+7]),Ke=Oe-Ct,St=Me+gt,it=Me-gt,Pt=Ve+ht,dr=Ve-ht,ar=Pe+ze,gn=Pe-ze,ir=Je+ar,nn=Je-ar,Mt=St+Pt,At=St-Pt;be[De]=ir+Mt,be[De+4]=ir-Mt;var yt=.707106781*(At+nn);be[De+2]=nn+yt,be[De+6]=nn-yt;var dt=.382683433*((ir=gn+dr)-(At=it+Ke)),Ot=.5411961*ir+dt,Dt=1.306562965*At+dt,Zt=.707106781*(Mt=dr+it),Pr=Ke+Zt,_t=Ke-Zt;be[De+5]=_t+Ot,be[De+3]=_t-Ot,be[De+1]=Pr+Dt,be[De+7]=Pr-Dt,De+=8}for(De=0,xt=0;xt<8;++xt){Oe=be[De],Me=be[De+8],Ve=be[De+16],Pe=be[De+24],ze=be[De+32],ht=be[De+40],gt=be[De+48];var cn=Oe+(Ct=be[De+56]),Rr=Oe-Ct,Mr=Me+gt,Xt=Me-gt,Jr=Ve+ht,Pn=Ve-ht,us=Pe+ze,ea=Pe-ze,Xa=cn+us,ka=cn-us,$r=Mr+Jr,Oa=Mr-Jr;be[De]=Xa+$r,be[De+32]=Xa-$r;var Fa=.707106781*(Oa+ka);be[De+16]=ka+Fa,be[De+48]=ka-Fa;var Bi=.382683433*((Xa=ea+Pn)-(Oa=Xt+Rr)),Ro=.5411961*Xa+Bi,zu=1.306562965*Oa+Bi,mf=.707106781*($r=Pn+Xt),pf=Rr+mf,gf=Rr-mf;be[De+40]=gf+Ro,be[De+24]=gf-Ro,be[De+8]=pf+zu,be[De+56]=pf-zu,De++}for(xt=0;xt<64;++xt)Ie=be[xt]*Te[xt],h[xt]=Ie>0?Ie+.5|0:Ie-.5|0;return h}($,K),fe=0;fe<64;++fe)m[N[fe]]=re[fe];var G=m[0]-se;se=m[0],G==0?z(Z[0]):(z(Z[A[ee=32767+G]]),z(f[ee]));for(var oe=63;oe>0&&m[oe]==0;)oe--;if(oe==0)return z(ue),se;for(var Se,ge=1;ge<=oe;){for(var te=ge;m[ge]==0&&ge<=oe;)++ge;var ye=ge-te;if(ye>=16){Se=ye>>4;for(var we=1;we<=Se;++we)z(ae);ye&=15}ee=32767+m[ge],z(ie[(ye<<4)+A[ee]]),z(f[ee]),ge++}return oe!=63&&z(ue),se}function X($){$=Math.min(Math.max($,1),100),i!=$&&(function(K){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ie=o((se[Z]*K+50)/100);ie=Math.min(Math.max(ie,1),255),l[N[Z]]=ie}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var ae=o((ee[ue]*K+50)/100);ae=Math.min(Math.max(ae,1),255),c[N[ue]]=ae}for(var re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],fe=0,G=0;G<8;G++)for(var oe=0;oe<8;oe++)u[fe]=1/(l[N[fe]]*re[G]*re[oe]*8),d[fe]=1/(c[N[fe]]*re[G]*re[oe]*8),fe++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),i=$)}this.encode=function($,K){K&&X(K),p=new Array,g=0,x=7,H(65496),H(65504),H(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),H(1),H(1),Q(0),Q(0),function(){H(65499),H(132),Q(0);for(var Me=0;Me<64;Me++)Q(l[Me]);Q(1);for(var Ve=0;Ve<64;Ve++)Q(c[Ve])}(),function(Me,Ve){H(65472),H(17),Q(8),H(Ve),H(Me),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}($.width,$.height),function(){H(65476),H(418),Q(0);for(var Me=0;Me<16;Me++)Q(E[Me+1]);for(var Ve=0;Ve<=11;Ve++)Q(_[Ve]);Q(16);for(var Pe=0;Pe<16;Pe++)Q(k[Pe+1]);for(var ze=0;ze<=161;ze++)Q(D[ze]);Q(1);for(var ht=0;ht<16;ht++)Q(S[ht+1]);for(var gt=0;gt<=11;gt++)Q(F[gt]);Q(17);for(var Ct=0;Ct<16;Ct++)Q(M[Ct+1]);for(var xt=0;xt<=161;xt++)Q(R[xt])}(),H(65498),H(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var se=0,Z=0,ie=0;g=0,x=7,this.encode.displayName="_encode_";for(var ee,ue,ae,re,fe,G,oe,Se,ge,te=$.data,ye=$.width,we=$.height,be=4*ye,Te=0;Te<we;){for(ee=0;ee<be;){for(fe=be*Te+ee,oe=-1,Se=0,ge=0;ge<64;ge++)G=fe+(Se=ge>>3)*be+(oe=4*(7&ge)),Te+Se>=we&&(G-=be*(Te+1+Se-we)),ee+oe>=be&&(G-=ee+oe-be+4),ue=te[G++],ae=te[G++],re=te[G++],v[ge]=(w[ue]+w[ae+256>>0]+w[re+512>>0]>>16)-128,b[ge]=(w[ue+768>>0]+w[ae+1024>>0]+w[re+1280>>0]>>16)-128,C[ge]=(w[ue+1280>>0]+w[ae+1536>>0]+w[re+1792>>0]>>16)-128;se=q(v,u,se,e,n),Z=q(b,d,Z,r,a),ie=q(C,d,ie,r,a),ee+=32}Te+=8}if(x>=0){var Oe=[];Oe[1]=x+1,Oe[0]=(1<<x+1)-1,z(Oe)}return H(65497),new Uint8Array(p)},t=t||50,function(){for(var $=String.fromCharCode,K=0;K<256;K++)j[K]=$(K)}(),e=U(E,_),r=U(S,F),n=U(k,D),a=U(M,R),function(){for(var $=1,K=2,se=1;se<=15;se++){for(var Z=$;Z<K;Z++)A[32767+Z]=se,f[32767+Z]=[],f[32767+Z][1]=se,f[32767+Z][0]=Z;for(var ie=-(K-1);ie<=-$;ie++)A[32767+ie]=se,f[32767+ie]=[],f[32767+ie][1]=se,f[32767+ie][0]=K-1+ie;$<<=1,K<<=1}}(),function(){for(var $=0;$<256;$++)w[$]=19595*$,w[$+256>>0]=38470*$,w[$+512>>0]=7471*$+32768,w[$+768>>0]=-11059*$,w[$+1024>>0]=-21709*$,w[$+1280>>0]=32768*$+8421375,w[$+1536>>0]=-27439*$,w[$+1792>>0]=-5329*$}(),X(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M7(t){function e(E){if(!E)throw Error("assert :P")}function r(E,_,k){for(var D=0;4>D;D++)if(E[_+D]!=k.charCodeAt(D))return!0;return!1}function n(E,_,k,D,S){for(var F=0;F<S;F++)E[_+F]=k[D+F]}function a(E,_,k,D){for(var S=0;S<D;S++)E[_+S]=k}function i(E){return new Int32Array(E)}function o(E,_){for(var k=[],D=0;D<E;D++)k.push(new _);return k}function l(E,_){var k=[];return function D(S,F,M){for(var R=M[F],U=0;U<R&&(S.push(M.length>F+1?[]:new _),!(M.length<F+1));U++)D(S[U],F+1,M)}(k,0,E),k}var c=function(){var E=this;function _(B,L){for(var W=1<<L-1>>>0;B&W;)W>>>=1;return W?(B&W-1)+W:B}function k(B,L,W,J,ce){e(!(J%W));do B[L+(J-=W)]=ce;while(0<J)}function D(B,L,W,J,ce){if(e(2328>=ce),512>=ce)var he=i(512);else if((he=i(ce))==null)return 0;return function(me,pe,xe,Ne,ke,Ge){var qe,$e,ot=pe,st=1<<xe,Fe=i(16),Le=i(16);for(e(ke!=0),e(Ne!=null),e(me!=null),e(0<xe),$e=0;$e<ke;++$e){if(15<Ne[$e])return 0;++Fe[Ne[$e]]}if(Fe[0]==ke)return 0;for(Le[1]=0,qe=1;15>qe;++qe){if(Fe[qe]>1<<qe)return 0;Le[qe+1]=Le[qe]+Fe[qe]}for($e=0;$e<ke;++$e)qe=Ne[$e],0<Ne[$e]&&(Ge[Le[qe]++]=$e);if(Le[15]==1)return(Ne=new S).g=0,Ne.value=Ge[0],k(me,ot,1,st,Ne),st;var mt,jt=-1,pt=st-1,Ht=0,Rt=1,lr=1,Lt=1<<xe;for($e=0,qe=1,ke=2;qe<=xe;++qe,ke<<=1){if(Rt+=lr<<=1,0>(lr-=Fe[qe]))return 0;for(;0<Fe[qe];--Fe[qe])(Ne=new S).g=qe,Ne.value=Ge[$e++],k(me,ot+Ht,ke,Lt,Ne),Ht=_(Ht,qe)}for(qe=xe+1,ke=2;15>=qe;++qe,ke<<=1){if(Rt+=lr<<=1,0>(lr-=Fe[qe]))return 0;for(;0<Fe[qe];--Fe[qe]){if(Ne=new S,(Ht&pt)!=jt){for(ot+=Lt,mt=1<<(jt=qe)-xe;15>jt&&!(0>=(mt-=Fe[jt]));)++jt,mt<<=1;st+=Lt=1<<(mt=jt-xe),me[pe+(jt=Ht&pt)].g=mt+xe,me[pe+jt].value=ot-pe-jt}Ne.g=qe-xe,Ne.value=Ge[$e++],k(me,ot+(Ht>>xe),ke,Lt,Ne),Ht=_(Ht,qe)}}return Rt!=2*Le[15]-1?0:st}(B,L,W,J,ce,he)}function S(){this.value=this.g=0}function F(){this.value=this.g=0}function M(){this.G=o(5,S),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(js,F)}function R(B,L,W,J){e(B!=null),e(L!=null),e(2147483648>J),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=L,B.pa=W,B.Jd=L,B.Yc=W+J,B.Zc=4<=J?W+J-4+1:W,ee(B)}function U(B,L){for(var W=0;0<L--;)W|=ae(B,128)<<L;return W}function z(B,L){var W=U(B,L);return ue(B)?-W:W}function Q(B,L,W,J){var ce,he=0;for(e(B!=null),e(L!=null),e(4294967288>J),B.Sb=J,B.Ra=0,B.u=0,B.h=0,4<J&&(J=4),ce=0;ce<J;++ce)he+=L[W+ce]<<8*ce;B.Ra=he,B.bb=J,B.oa=L,B.pa=W}function H(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<rd-8>>>0,++B.bb,B.u-=8;se(B)&&(B.h=1,B.u=0)}function q(B,L){if(e(0<=L),!B.h&&L<=td){var W=K(B)&sn[L];return B.u+=L,H(B),W}return B.h=1,B.u=0}function X(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(B){return B.Ra>>>(B.u&rd-1)>>>0}function se(B){return e(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>rd}function Z(B,L){B.u=L,B.h=se(B)}function ie(B){B.u>=Sf&&(e(B.u>=Sf),H(B))}function ee(B){e(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(e(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function ue(B){return U(B,1)}function ae(B,L){var W=B.Ca;0>B.b&&ee(B);var J=B.b,ce=W*L>>>8,he=(B.I>>>J>ce)+0;for(he?(W-=ce,B.I-=ce+1<<J>>>0):W=ce+1,J=W,ce=0;256<=J;)ce+=8,J>>=8;return J=7^ce+Ra[J],B.b-=J,B.Ca=(W<<J)-1,he}function re(B,L,W){B[L+0]=W>>24&255,B[L+1]=W>>16&255,B[L+2]=W>>8&255,B[L+3]=W>>0&255}function fe(B,L){return B[L+0]<<0|B[L+1]<<8}function G(B,L){return fe(B,L)|B[L+2]<<16}function oe(B,L){return fe(B,L)|fe(B,L+2)<<16}function Se(B,L){var W=1<<L;return e(B!=null),e(0<L),B.X=i(W),B.X==null?0:(B.Mb=32-L,B.Xa=L,1)}function ge(B,L){e(B!=null),e(L!=null),e(B.Xa==L.Xa),n(L.X,0,B.X,0,1<<L.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function ye(B,L,W,J){e(W!=null),e(J!=null);var ce=W[0],he=J[0];return ce==0&&(ce=(B*he+L/2)/L),he==0&&(he=(L*ce+B/2)/B),0>=ce||0>=he?0:(W[0]=ce,J[0]=he,1)}function we(B,L){return B+(1<<L)-1>>>L}function be(B,L){return((4278255360&B)+(4278255360&L)>>>0&4278255360)+((16711935&B)+(16711935&L)>>>0&16711935)>>>0}function Te(B,L){E[L]=function(W,J,ce,he,me,pe,xe){var Ne;for(Ne=0;Ne<me;++Ne){var ke=E[B](pe[xe+Ne-1],ce,he+Ne);pe[xe+Ne]=be(W[J+Ne],ke)}}}function Oe(){this.ud=this.hd=this.jd=0}function Me(B,L){return((4278124286&(B^L))>>>1)+(B&L)>>>0}function Ve(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function Pe(B,L){return Ve(B+(B-L+.5>>1))}function ze(B,L,W){return Math.abs(L-W)-Math.abs(B-W)}function ht(B,L,W,J,ce,he,me){for(J=he[me-1],W=0;W<ce;++W)he[me+W]=J=be(B[L+W],J)}function gt(B,L,W,J,ce){var he;for(he=0;he<W;++he){var me=B[L+he],pe=me>>8&255,xe=16711935&(xe=(xe=16711935&me)+((pe<<16)+pe));J[ce+he]=(4278255360&me)+xe>>>0}}function Ct(B,L){L.jd=B>>0&255,L.hd=B>>8&255,L.ud=B>>16&255}function xt(B,L,W,J,ce,he){var me;for(me=0;me<J;++me){var pe=L[W+me],xe=pe>>>8,Ne=pe,ke=255&(ke=(ke=pe>>>16)+((B.jd<<24>>24)*(xe<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((B.hd<<24>>24)*(xe<<24>>24)>>>5))+((B.ud<<24>>24)*(ke<<24>>24)>>>5)),ce[he+me]=(4278255360&pe)+(ke<<16)+Ne}}function Ie(B,L,W,J,ce){E[L]=function(he,me,pe,xe,Ne,ke,Ge,qe,$e){for(xe=Ge;xe<qe;++xe)for(Ge=0;Ge<$e;++Ge)Ne[ke++]=ce(pe[J(he[me++])])},E[B]=function(he,me,pe,xe,Ne,ke,Ge){var qe=8>>he.b,$e=he.Ea,ot=he.K[0],st=he.w;if(8>qe)for(he=(1<<he.b)-1,st=(1<<qe)-1;me<pe;++me){var Fe,Le=0;for(Fe=0;Fe<$e;++Fe)Fe&he||(Le=J(xe[Ne++])),ke[Ge++]=ce(ot[Le&st]),Le>>=qe}else E["VP8LMapColor"+W](xe,Ne,ot,st,ke,Ge,me,pe,$e)}}function De(B,L,W,J,ce){for(W=L+W;L<W;){var he=B[L++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=he>>0&255}}function Je(B,L,W,J,ce){for(W=L+W;L<W;){var he=B[L++];J[ce++]=he>>16&255,J[ce++]=he>>8&255,J[ce++]=he>>0&255,J[ce++]=he>>24&255}}function Ke(B,L,W,J,ce){for(W=L+W;L<W;){var he=(me=B[L++])>>16&240|me>>12&15,me=me>>0&240|me>>28&15;J[ce++]=he,J[ce++]=me}}function St(B,L,W,J,ce){for(W=L+W;L<W;){var he=(me=B[L++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;J[ce++]=he,J[ce++]=me}}function it(B,L,W,J,ce){for(W=L+W;L<W;){var he=B[L++];J[ce++]=he>>0&255,J[ce++]=he>>8&255,J[ce++]=he>>16&255}}function Pt(B,L,W,J,ce,he){if(he==0)for(W=L+W;L<W;)re(J,((he=B[L++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ce+=32;else n(J,ce,B,L,W)}function dr(B,L){E[L][0]=E[B+"0"],E[L][1]=E[B+"1"],E[L][2]=E[B+"2"],E[L][3]=E[B+"3"],E[L][4]=E[B+"4"],E[L][5]=E[B+"5"],E[L][6]=E[B+"6"],E[L][7]=E[B+"7"],E[L][8]=E[B+"8"],E[L][9]=E[B+"9"],E[L][10]=E[B+"10"],E[L][11]=E[B+"11"],E[L][12]=E[B+"12"],E[L][13]=E[B+"13"],E[L][14]=E[B+"0"],E[L][15]=E[B+"0"]}function ar(B){return B==fv||B==hv||B==Wp||B==Pf}function gn(){this.eb=[],this.size=this.A=this.fb=0}function ir(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gn,this.f.kb=new ir,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function At(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yt(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function dt(B,L){var W=B.T,J=L.ba.f.RGBA,ce=J.eb,he=J.fb+B.ka*J.A,me=ho[L.ba.S],pe=B.y,xe=B.O,Ne=B.f,ke=B.N,Ge=B.ea,qe=B.W,$e=L.cc,ot=L.dc,st=L.Mc,Fe=L.Nc,Le=B.ka,mt=B.ka+B.T,jt=B.U,pt=jt+1>>1;for(Le==0?me(pe,xe,null,null,Ne,ke,Ge,qe,Ne,ke,Ge,qe,ce,he,null,null,jt):(me(L.ec,L.fc,pe,xe,$e,ot,st,Fe,Ne,ke,Ge,qe,ce,he-J.A,ce,he,jt),++W);Le+2<mt;Le+=2)$e=Ne,ot=ke,st=Ge,Fe=qe,ke+=B.Rc,qe+=B.Rc,he+=2*J.A,me(pe,(xe+=2*B.fa)-B.fa,pe,xe,$e,ot,st,Fe,Ne,ke,Ge,qe,ce,he-J.A,ce,he,jt);return xe+=B.fa,B.j+mt<B.o?(n(L.ec,L.fc,pe,xe,jt),n(L.cc,L.dc,Ne,ke,pt),n(L.Mc,L.Nc,Ge,qe,pt),W--):1&mt||me(pe,xe,null,null,Ne,ke,Ge,qe,Ne,ke,Ge,qe,ce,he+J.A,null,null,jt),W}function Ot(B,L,W){var J=B.F,ce=[B.J];if(J!=null){var he=B.U,me=L.ba.S,pe=me==Vp||me==Wp;L=L.ba.f.RGBA;var xe=[0],Ne=B.ka;xe[0]=B.T,B.Kb&&(Ne==0?--xe[0]:(--Ne,ce[0]-=B.width),B.j+B.ka+B.T==B.o&&(xe[0]=B.o-B.j-Ne));var ke=L.eb;Ne=L.fb+Ne*L.A,B=Sn(J,ce[0],B.width,he,xe,ke,Ne+(pe?0:3),L.A),e(W==xe),B&&ar(me)&&ki(ke,Ne,pe,he,xe,L.A)}return 0}function Dt(B){var L=B.ma,W=L.ba.S,J=11>W,ce=W==Qp||W==zp||W==Vp||W==_f||W==12||ar(W);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!ws(L.Oa,B,ce?11:12))return 0;if(ce&&ar(W)&&Et(),B.da)alert("todo:use_scaling");else{if(J){if(L.Ib=yt,B.Kb){if(W=B.U+1>>1,L.memory=i(B.U+2*W),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+B.U,L.Mc=L.cc,L.Nc=L.dc+W,L.Ib=dt,Et()}}else alert("todo:EmitYUV");ce&&(L.Jb=Ot,J&&Qe())}if(J&&!i1){for(B=0;256>B;++B)O5[B]=89858*(B-128)+Kp>>qp,M5[B]=-22014*(B-128)+Kp,R5[B]=-45773*(B-128),F5[B]=113618*(B-128)+Kp>>qp;for(B=Gc;B<pv;++B)L=76283*(B-16)+Kp>>qp,L5[B-Gc]=ta(L,255),U5[B-Gc]=ta(L+8>>4,15);i1=1}return 1}function Zt(B){var L=B.ma,W=B.U,J=B.T;return e(!(1&B.ka)),0>=W||0>=J?0:(W=L.Ib(B,L),L.Jb!=null&&L.Jb(B,L,W),L.Dc+=W,1)}function Pr(B){B.ma.memory=null}function _t(B,L,W,J){return q(B,8)!=47?0:(L[0]=q(B,14)+1,W[0]=q(B,14)+1,J[0]=q(B,1),q(B,3)!=0?0:!B.h)}function cn(B,L){if(4>B)return B+1;var W=B-2>>1;return(2+(1&B)<<W)+q(L,W)+1}function Rr(B,L){return 120<L?L-120:1<=(W=((W=w5[L-1])>>4)*B+(8-(15&W)))?W:1;var W}function Mr(B,L,W){var J=K(W),ce=B[L+=255&J].g-8;return 0<ce&&(Z(W,W.u+8),J=K(W),L+=B[L].value,L+=J&(1<<ce)-1),Z(W,W.u+B[L].g),B[L].value}function Xt(B,L,W){return W.g+=B.g,W.value+=B.value<<L>>>0,e(8>=W.g),B.g}function Jr(B,L,W){var J=B.xc;return e((L=J==0?0:B.vc[B.md*(W>>J)+(L>>J)])<B.Wb),B.Ya[L]}function Pn(B,L,W,J){var ce=B.ab,he=B.c*L,me=B.C;L=me+L;var pe=W,xe=J;for(J=B.Ta,W=B.Ua;0<ce--;){var Ne=B.gc[ce],ke=me,Ge=L,qe=pe,$e=xe,ot=(xe=J,pe=W,Ne.Ea);switch(e(ke<Ge),e(Ge<=Ne.nc),Ne.hc){case 2:lA(qe,$e,(Ge-ke)*ot,xe,pe);break;case 0:var st=ke,Fe=Ge,Le=xe,mt=pe,jt=(Lt=Ne).Ea;st==0&&(Ef(qe,$e,null,null,1,Le,mt),ht(qe,$e+1,0,0,jt-1,Le,mt+1),$e+=jt,mt+=jt,++st);for(var pt=1<<Lt.b,Ht=pt-1,Rt=we(jt,Lt.b),lr=Lt.K,Lt=Lt.w+(st>>Lt.b)*Rt;st<Fe;){var an=lr,hn=Lt,qr=1;for(Bf(qe,$e,Le,mt-jt,1,Le,mt);qr<jt;){var Nt=(qr&~Ht)+pt;Nt>jt&&(Nt=jt),(0,Ma[an[hn++]>>8&15])(qe,$e+ +qr,Le,mt+qr-jt,Nt-qr,Le,mt+qr),qr=Nt}$e+=jt,mt+=jt,++st&Ht||(Lt+=Rt)}Ge!=Ne.nc&&n(xe,pe-ot,xe,pe+(Ge-ke-1)*ot,ot);break;case 1:for(ot=qe,Fe=$e,jt=(qe=Ne.Ea)-(mt=qe&~(Le=($e=1<<Ne.b)-1)),st=we(qe,Ne.b),pt=Ne.K,Ne=Ne.w+(ke>>Ne.b)*st;ke<Ge;){for(Ht=pt,Rt=Ne,lr=new Oe,Lt=Fe+mt,an=Fe+qe;Fe<Lt;)Ct(Ht[Rt++],lr),Hc(lr,ot,Fe,$e,xe,pe),Fe+=$e,pe+=$e;Fe<an&&(Ct(Ht[Rt++],lr),Hc(lr,ot,Fe,jt,xe,pe),Fe+=jt,pe+=jt),++ke&Le||(Ne+=st)}break;case 3:if(qe==xe&&$e==pe&&0<Ne.b){for(Fe=xe,qe=ot=pe+(Ge-ke)*ot-(mt=(Ge-ke)*we(Ne.Ea,Ne.b)),$e=xe,Le=pe,st=[],mt=(jt=mt)-1;0<=mt;--mt)st[mt]=$e[Le+mt];for(mt=jt-1;0<=mt;--mt)Fe[qe+mt]=st[mt];ts(Ne,ke,Ge,xe,ot,xe,pe)}else ts(Ne,ke,Ge,qe,$e,xe,pe)}pe=J,xe=W}xe!=W&&n(J,W,pe,xe,he)}function us(B,L){var W=B.V,J=B.Ba+B.c*B.C,ce=L-B.C;if(e(L<=B.l.o),e(16>=ce),0<ce){var he=B.l,me=B.Ta,pe=B.Ua,xe=he.width;if(Pn(B,ce,W,J),ce=pe=[pe],e((W=B.C)<(J=L)),e(he.v<he.va),J>he.o&&(J=he.o),W<he.j){var Ne=he.j-W;W=he.j,ce[0]+=Ne*xe}if(W>=J?W=0:(ce[0]+=4*he.v,he.ka=W-he.j,he.U=he.va-he.v,he.T=J-W,W=1),W){if(pe=pe[0],11>(W=B.ca).S){var ke=W.f.RGBA,Ge=(J=W.S,ce=he.U,he=he.T,Ne=ke.eb,ke.A),qe=he;for(ke=ke.fb+B.Ma*ke.A;0<qe--;){var $e=me,ot=pe,st=ce,Fe=Ne,Le=ke;switch(J){case Hp:La($e,ot,st,Fe,Le);break;case Qp:Aa($e,ot,st,Fe,Le);break;case fv:Aa($e,ot,st,Fe,Le),ki(Fe,Le,0,st,1,0);break;case od:_i($e,ot,st,Fe,Le);break;case zp:Pt($e,ot,st,Fe,Le,1);break;case hv:Pt($e,ot,st,Fe,Le,1),ki(Fe,Le,0,st,1,0);break;case Vp:Pt($e,ot,st,Fe,Le,0);break;case Wp:Pt($e,ot,st,Fe,Le,0),ki(Fe,Le,1,st,1,0);break;case _f:Yl($e,ot,st,Fe,Le);break;case Pf:Yl($e,ot,st,Fe,Le),Nn(Fe,Le,st,1,0);break;case Zw:Xl($e,ot,st,Fe,Le);break;default:e(0)}pe+=xe,ke+=Ge}B.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(B.Ma<=W.height)}}B.C=L,e(B.C<=B.i)}function ea(B){var L;if(0<B.ua)return 0;for(L=0;L<B.Wb;++L){var W=B.Ya[L].G,J=B.Ya[L].H;if(0<W[1][J[1]+0].g||0<W[2][J[2]+0].g||0<W[3][J[3]+0].g)return 0}return 1}function Xa(B,L,W,J,ce,he){if(B.Z!=0){var me=B.qd,pe=B.rd;for(e(tc[B.Z]!=null);L<W;++L)tc[B.Z](me,pe,J,ce,J,ce,he),me=J,pe=ce,ce+=he;B.qd=me,B.rd=pe}}function ka(B,L){var W=B.l.ma,J=W.Z==0||W.Z==1?B.l.j:B.C;if(J=B.C<J?J:B.C,e(L<=B.l.o),L>J){var ce=B.l.width,he=W.ca,me=W.tb+ce*J,pe=B.V,xe=B.Ba+B.c*J,Ne=B.gc;e(B.ab==1),e(Ne[0].hc==3),Lo(Ne[0],J,L,pe,xe,he,me),Xa(W,J,L,he,me,ce)}B.C=B.Ma=L}function $r(B,L,W,J,ce,he,me){var pe=B.$/J,xe=B.$%J,Ne=B.m,ke=B.s,Ge=W+B.$,qe=Ge;ce=W+J*ce;var $e=W+J*he,ot=280+ke.ua,st=B.Pb?pe:16777216,Fe=0<ke.ua?ke.Wa:null,Le=ke.wc,mt=Ge<$e?Jr(ke,xe,pe):null;e(B.C<he),e($e<=ce);var jt=!1;e:for(;;){for(;jt||Ge<$e;){var pt=0;if(pe>=st){var Ht=Ge-W;e((st=B).Pb),st.wd=st.m,st.xd=Ht,0<st.s.ua&&ge(st.s.Wa,st.s.vb),st=pe+C5}if(xe&Le||(mt=Jr(ke,xe,pe)),e(mt!=null),mt.Qb&&(L[Ge]=mt.qb,jt=!0),!jt)if(ie(Ne),mt.jc){pt=Ne,Ht=L;var Rt=Ge,lr=mt.pd[K(pt)&js-1];e(mt.jc),256>lr.g?(Z(pt,pt.u+lr.g),Ht[Rt]=lr.value,pt=0):(Z(pt,pt.u+lr.g-256),e(256<=lr.value),pt=lr.value),pt==0&&(jt=!0)}else pt=Mr(mt.G[0],mt.H[0],Ne);if(Ne.h)break;if(jt||256>pt){if(!jt)if(mt.nd)L[Ge]=(mt.qb|pt<<8)>>>0;else{if(ie(Ne),jt=Mr(mt.G[1],mt.H[1],Ne),ie(Ne),Ht=Mr(mt.G[2],mt.H[2],Ne),Rt=Mr(mt.G[3],mt.H[3],Ne),Ne.h)break;L[Ge]=(Rt<<24|jt<<16|pt<<8|Ht)>>>0}if(jt=!1,++Ge,++xe>=J&&(xe=0,++pe,me!=null&&pe<=he&&!(pe%16)&&me(B,pe),Fe!=null))for(;qe<Ge;)pt=L[qe++],Fe.X[(506832829*pt&4294967295)>>>Fe.Mb]=pt}else if(280>pt){if(pt=cn(pt-256,Ne),Ht=Mr(mt.G[4],mt.H[4],Ne),ie(Ne),Ht=Rr(J,Ht=cn(Ht,Ne)),Ne.h)break;if(Ge-W<Ht||ce-Ge<pt)break e;for(Rt=0;Rt<pt;++Rt)L[Ge+Rt]=L[Ge+Rt-Ht];for(Ge+=pt,xe+=pt;xe>=J;)xe-=J,++pe,me!=null&&pe<=he&&!(pe%16)&&me(B,pe);if(e(Ge<=ce),xe&Le&&(mt=Jr(ke,xe,pe)),Fe!=null)for(;qe<Ge;)pt=L[qe++],Fe.X[(506832829*pt&4294967295)>>>Fe.Mb]=pt}else{if(!(pt<ot))break e;for(jt=pt-280,e(Fe!=null);qe<Ge;)pt=L[qe++],Fe.X[(506832829*pt&4294967295)>>>Fe.Mb]=pt;pt=Ge,e(!(jt>>>(Ht=Fe).Xa)),L[pt]=Ht.X[jt],jt=!0}jt||e(Ne.h==se(Ne))}if(B.Pb&&Ne.h&&Ge<ce)e(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&ge(B.s.vb,B.s.Wa);else{if(Ne.h)break e;me!=null&&me(B,pe>he?he:pe),B.a=0,B.$=Ge-W}return 1}return B.a=3,0}function Oa(B){e(B!=null),B.vc=null,B.yc=null,B.Ya=null;var L=B.Wa;L!=null&&(L.X=null),B.vb=null,e(B!=null)}function Fa(){var B=new dv;return B==null?null:(B.a=0,B.xb=r1,dr("Predictor","VP8LPredictors"),dr("Predictor","VP8LPredictors_C"),dr("PredictorAdd","VP8LPredictorsAdd"),dr("PredictorAdd","VP8LPredictorsAdd_C"),lA=gt,Hc=xt,La=De,Aa=Je,Yl=Ke,Xl=St,_i=it,E.VP8LMapColor32b=Ii,E.VP8LMapColor8b=Cs,B)}function Bi(B,L,W,J,ce){var he=1,me=[B],pe=[L],xe=J.m,Ne=J.s,ke=null,Ge=0;e:for(;;){if(W)for(;he&&q(xe,1);){var qe=me,$e=pe,ot=J,st=1,Fe=ot.m,Le=ot.gc[ot.ab],mt=q(Fe,2);if(ot.Oc&1<<mt)he=0;else{switch(ot.Oc|=1<<mt,Le.hc=mt,Le.Ea=qe[0],Le.nc=$e[0],Le.K=[null],++ot.ab,e(4>=ot.ab),mt){case 0:case 1:Le.b=q(Fe,3)+2,st=Bi(we(Le.Ea,Le.b),we(Le.nc,Le.b),0,ot,Le.K),Le.K=Le.K[0];break;case 3:var jt,pt=q(Fe,8)+1,Ht=16<pt?0:4<pt?1:2<pt?2:3;if(qe[0]=we(Le.Ea,Ht),Le.b=Ht,jt=st=Bi(pt,1,0,ot,Le.K)){var Rt,lr=pt,Lt=Le,an=1<<(8>>Lt.b),hn=i(an);if(hn==null)jt=0;else{var qr=Lt.K[0],Nt=Lt.w;for(hn[0]=Lt.K[0][0],Rt=1;Rt<1*lr;++Rt)hn[Rt]=be(qr[Nt+Rt],hn[Rt-1]);for(;Rt<4*an;++Rt)hn[Rt]=0;Lt.K[0]=null,Lt.K[0]=hn,jt=1}}st=jt;break;case 2:break;default:e(0)}he=st}}if(me=me[0],pe=pe[0],he&&q(xe,1)&&!(he=1<=(Ge=q(xe,4))&&11>=Ge)){J.a=3;break e}var En;if(En=he)t:{var xn,Nr,An,ni=J,Es=me,ra=pe,Zr=Ge,Fi=W,Ri=ni.m,na=ni.s,rs=[null],ma=1,si=0,fl=j5[Zr];r:for(;;){if(Fi&&q(Ri,1)){var Gs=q(Ri,3)+2,rc=we(Es,Gs),nc=we(ra,Gs),Of=rc*nc;if(!Bi(rc,nc,0,ni,rs))break r;for(rs=rs[0],na.xc=Gs,xn=0;xn<Of;++xn){var qc=rs[xn]>>8&65535;rs[xn]=qc,qc>=ma&&(ma=qc+1)}}if(Ri.h)break r;for(Nr=0;5>Nr;++Nr){var fs=e1[Nr];!Nr&&0<Zr&&(fs+=1<<Zr),si<fs&&(si=fs)}var gv=o(ma*fl,S),u1=ma,d1=o(u1,M);if(d1==null)var Xp=null;else e(65536>=u1),Xp=d1;var fA=i(si);if(Xp==null||fA==null||gv==null){ni.a=1;break r}var hA=gv;for(xn=An=0;xn<ma;++xn){var Ho=Xp[xn],Ff=Ho.G,Rf=Ho.H,xv=0,Jp=1,AA=0;for(Nr=0;5>Nr;++Nr){fs=e1[Nr],Ff[Nr]=hA,Rf[Nr]=An,!Nr&&0<Zr&&(fs+=1<<Zr);s:{var Zp,mA=fs,Mf=ni,Lf=fA,f1=hA,H5=An,eg=0,hl=Mf.m,vv=q(hl,1);if(a(Lf,0,0,mA),vv){var h1=q(hl,1)+1,A1=q(hl,1),bv=q(hl,A1==0?1:8);Lf[bv]=1,h1==2&&(Lf[bv=q(hl,8)]=1);var pA=1}else{var tg=i(19),m1=q(hl,4)+4;if(19<m1){Mf.a=3;var rg=0;break s}for(Zp=0;Zp<m1;++Zp)tg[Gp[Zp]]=q(hl,3);var yv=void 0,Sa=void 0,ng=Mf,Q5=tg,sg=mA,p1=Lf,wv=0,Kc=ng.m,g1=8,x1=o(128,S);n:for(;D(x1,0,7,Q5,19);){if(q(Kc,1)){var z5=2+2*q(Kc,3);if((yv=2+q(Kc,z5))>sg)break n}else yv=sg;for(Sa=0;Sa<sg&&yv--;){ie(Kc);var v1=x1[0+(127&K(Kc))];Z(Kc,Kc.u+v1.g);var ld=v1.value;if(16>ld)p1[Sa++]=ld,ld!=0&&(g1=ld);else{var V5=ld==16,ag=ld-16,b1=b5[ag],sa=q(Kc,v5[ag])+b1;if(Sa+sa>sg)break n;for(var gA=V5?g1:0;0<sa--;)p1[Sa++]=gA}}wv=1;break n}wv||(ng.a=3),pA=wv}(pA=pA&&!hl.h)&&(eg=D(f1,H5,8,Lf,mA)),pA&&eg!=0?rg=eg:(Mf.a=3,rg=0)}if(rg==0)break r;if(Jp&&y5[Nr]==1&&(Jp=hA[An].g==0),xv+=hA[An].g,An+=rg,3>=Nr){var xA,jv=fA[0];for(xA=1;xA<fs;++xA)fA[xA]>jv&&(jv=fA[xA]);AA+=jv}}if(Ho.nd=Jp,Ho.Qb=0,Jp&&(Ho.qb=(Ff[3][Rf[3]+0].value<<24|Ff[1][Rf[1]+0].value<<16|Ff[2][Rf[2]+0].value)>>>0,xv==0&&256>Ff[0][Rf[0]+0].value&&(Ho.Qb=1,Ho.qb+=Ff[0][Rf[0]+0].value<<8)),Ho.jc=!Ho.Qb&&6>AA,Ho.jc){var vA,Qo=Ho;for(vA=0;vA<js;++vA){var Yc=vA,Xc=Qo.pd[Yc],ig=Qo.G[0][Qo.H[0]+Yc];256<=ig.value?(Xc.g=ig.g+256,Xc.value=ig.value):(Xc.g=0,Xc.value=0,Yc>>=Xt(ig,8,Xc),Yc>>=Xt(Qo.G[1][Qo.H[1]+Yc],16,Xc),Yc>>=Xt(Qo.G[2][Qo.H[2]+Yc],0,Xc),Xt(Qo.G[3][Qo.H[3]+Yc],24,Xc))}}}na.vc=rs,na.Wb=ma,na.Ya=Xp,na.yc=gv,En=1;break t}En=0}if(!(he=En)){J.a=3;break e}if(0<Ge){if(Ne.ua=1<<Ge,!Se(Ne.Wa,Ge)){J.a=1,he=0;break e}}else Ne.ua=0;var Cv=J,y1=me,W5=pe,Nv=Cv.s,Sv=Nv.xc;if(Cv.c=y1,Cv.i=W5,Nv.md=we(y1,Sv),Nv.wc=Sv==0?-1:(1<<Sv)-1,W){J.xb=I5;break e}if((ke=i(me*pe))==null){J.a=1,he=0;break e}he=(he=$r(J,ke,0,me,pe,pe,null))&&!xe.h;break e}return he?(ce!=null?ce[0]=ke:(e(ke==null),e(W)),J.$=0,W||Oa(Ne)):Oa(Ne),he}function Ro(B,L){var W=B.c*B.i,J=W+L+16*L;return e(B.c<=L),B.V=i(J),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+W+L,1)}function zu(B,L){var W=B.C,J=L-W,ce=B.V,he=B.Ba+B.c*W;for(e(L<=B.l.o);0<J;){var me=16<J?16:J,pe=B.l.ma,xe=B.l.width,Ne=xe*me,ke=pe.ca,Ge=pe.tb+xe*W,qe=B.Ta,$e=B.Ua;Pn(B,me,ce,he),Ss(qe,$e,ke,Ge,Ne),Xa(pe,W,W+me,ke,Ge,xe),J-=me,ce+=me*B.c,W+=me}e(W==L),B.C=B.Ma=L}function mf(){this.ub=this.yd=this.td=this.Rb=0}function pf(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gf(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function vp(){this.Yb=function(){var B=[];return function L(W,J,ce){for(var he=ce[J],me=0;me<he&&(W.push(ce.length>J+1?[]:0),!(ce.length<J+1));me++)L(W[me],J+1,ce)}(B,0,[3,11]),B}()}function Jx(){this.jb=i(3),this.Wc=l([4,8],vp),this.Xc=l([4,17],vp)}function Zx(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ll(){this.ld=this.La=this.dd=this.tc=0}function eA(){this.Na=this.la=0}function xf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vf(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vu(){this.uc=this.M=this.Nb=0,this.wa=Array(new ll),this.Y=0,this.ya=Array(new vf),this.aa=0,this.l=new Wl}function bp(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ev(){this.cb=this.a=0,this.sc="",this.m=new X,this.Od=new mf,this.Kc=new pf,this.ed=new Zx,this.Qa=new gf,this.Ic=this.$c=this.Aa=0,this.D=new Vu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,X),this.ia=0,this.pb=o(4,xf),this.Pa=new Jx,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bp),this.Hd=0,this.rb=Array(new eA),this.sb=0,this.wa=Array(new ll),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vf),this.L=this.aa=0,this.gd=l([4,2],ll),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wu(){var B=new ev;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,uA||(uA=Gu)),B}function ys(B,L,W){return B.a==0&&(B.a=L,B.sc=W,B.cb=0),0}function yp(B,L,W){return 3<=W&&B[L+0]==157&&B[L+1]==1&&B[L+2]==42}function wp(B,L){if(B==null)return 0;if(B.a=0,B.sc="OK",L==null)return ys(B,2,"null VP8Io passed to VP8GetHeaders()");var W=L.data,J=L.w,ce=L.ha;if(4>ce)return ys(B,7,"Truncated header.");var he=W[J+0]|W[J+1]<<8|W[J+2]<<16,me=B.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return ys(B,3,"Incorrect keyframe parameters.");if(!me.yd)return ys(B,4,"Frame not displayable.");J+=3,ce-=3;var pe=B.Kc;if(me.Rb){if(7>ce)return ys(B,7,"cannot parse picture header");if(!yp(W,J,ce))return ys(B,3,"Bad code word");pe.c=16383&(W[J+4]<<8|W[J+3]),pe.Td=W[J+4]>>6,pe.i=16383&(W[J+6]<<8|W[J+5]),pe.Ud=W[J+6]>>6,J+=7,ce-=7,B.za=pe.c+15>>4,B.Ub=pe.i+15>>4,L.width=pe.c,L.height=pe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,a((he=B.Pa).jb,0,255,he.jb.length),e((he=B.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(me.ub>ce)return ys(B,7,"bad partition length");R(he=B.m,W,J,me.ub),J+=me.ub,ce-=me.ub,me.Rb&&(pe.Ld=ue(he),pe.Kd=ue(he)),pe=B.Qa;var xe,Ne=B.Pa;if(e(he!=null),e(pe!=null),pe.Cb=ue(he),pe.Cb){if(pe.Bb=ue(he),ue(he)){for(pe.Fb=ue(he),xe=0;4>xe;++xe)pe.Zb[xe]=ue(he)?z(he,7):0;for(xe=0;4>xe;++xe)pe.Lb[xe]=ue(he)?z(he,6):0}if(pe.Bb)for(xe=0;3>xe;++xe)Ne.jb[xe]=ue(he)?U(he,8):255}else pe.Bb=0;if(he.Ka)return ys(B,3,"cannot parse segment header");if((pe=B.ed).zd=ue(he),pe.Tb=U(he,6),pe.wb=U(he,3),pe.Pc=ue(he),pe.Pc&&ue(he)){for(Ne=0;4>Ne;++Ne)ue(he)&&(pe.vd[Ne]=z(he,6));for(Ne=0;4>Ne;++Ne)ue(he)&&(pe.od[Ne]=z(he,6))}if(B.L=pe.Tb==0?0:pe.zd?1:2,he.Ka)return ys(B,3,"cannot parse filter header");var ke=ce;if(ce=xe=J,J=xe+ke,pe=ke,B.Xb=(1<<U(B.m,2))-1,ke<3*(Ne=B.Xb))W=7;else{for(xe+=3*Ne,pe-=3*Ne,ke=0;ke<Ne;++ke){var Ge=W[ce+0]|W[ce+1]<<8|W[ce+2]<<16;Ge>pe&&(Ge=pe),R(B.Jc[+ke],W,xe,Ge),xe+=Ge,pe-=Ge,ce+=3}R(B.Jc[+Ne],W,xe,pe),W=xe<J?0:5}if(W!=0)return ys(B,W,"cannot parse partitions");for(W=U(xe=B.m,7),ce=ue(xe)?z(xe,4):0,J=ue(xe)?z(xe,4):0,pe=ue(xe)?z(xe,4):0,Ne=ue(xe)?z(xe,4):0,xe=ue(xe)?z(xe,4):0,ke=B.Qa,Ge=0;4>Ge;++Ge){if(ke.Cb){var qe=ke.Zb[Ge];ke.Fb||(qe+=W)}else{if(0<Ge){B.pb[Ge]=B.pb[0];continue}qe=W}var $e=B.pb[Ge];$e.Sc[0]=Av[ta(qe+ce,127)],$e.Sc[1]=kf[ta(qe+0,127)],$e.Eb[0]=2*Av[ta(qe+J,127)],$e.Eb[1]=101581*kf[ta(qe+pe,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=Av[ta(qe+Ne,117)],$e.Qc[1]=kf[ta(qe+xe,127)],$e.lc=qe+xe}if(!me.Rb)return ys(B,4,"Not a key frame.");for(ue(he),me=B.Pa,W=0;4>W;++W){for(ce=0;8>ce;++ce)for(J=0;3>J;++J)for(pe=0;11>pe;++pe)Ne=ae(he,T5[W][ce][J][pe])?U(he,8):E5[W][ce][J][pe],me.Wc[W][ce].Yb[J][pe]=Ne;for(ce=0;17>ce;++ce)me.Xc[W][ce]=me.Wc[W][D5[ce]]}return B.kc=ue(he),B.kc&&(B.Bd=U(he,8)),B.cb=1}function Gu(B,L,W,J,ce,he,me){var pe=L[ce].Yb[W];for(W=0;16>ce;++ce){if(!ae(B,pe[W+0]))return ce;for(;!ae(B,pe[W+1]);)if(pe=L[++ce].Yb[0],W=0,ce==16)return 16;var xe=L[ce+1].Yb;if(ae(B,pe[W+2])){var Ne=B,ke=0;if(ae(Ne,(qe=pe)[(Ge=W)+3]))if(ae(Ne,qe[Ge+6])){for(pe=0,Ge=2*(ke=ae(Ne,qe[Ge+8]))+(qe=ae(Ne,qe[Ge+9+ke])),ke=0,qe=N5[Ge];qe[pe];++pe)ke+=ke+ae(Ne,qe[pe]);ke+=3+(8<<Ge)}else ae(Ne,qe[Ge+7])?(ke=7+2*ae(Ne,165),ke+=ae(Ne,145)):ke=5+ae(Ne,159);else ke=ae(Ne,qe[Ge+4])?3+ae(Ne,qe[Ge+5]):2;pe=xe[2]}else ke=1,pe=xe[1];xe=me+S5[ce],0>(Ne=B).b&&ee(Ne);var Ge,qe=Ne.b,$e=(Ge=Ne.Ca>>1)-(Ne.I>>qe)>>31;--Ne.b,Ne.Ca+=$e,Ne.Ca|=1,Ne.I-=(Ge+1&$e)<<qe,he[xe]=((ke^$e)-$e)*J[(0<ce)+0]}return 16}function Pc(B){var L=B.rb[B.sb-1];L.la=0,L.Na=0,a(B.zc,0,0,B.zc.length),B.ja=0}function qu(B,L){if(B==null)return 0;if(L==null)return ys(B,2,"NULL VP8Io parameter in VP8Decode().");if(!B.cb&&!wp(B,L))return 0;if(e(B.cb),L.ac==null||L.ac(L)){L.ob&&(B.L=0);var W=Yp[B.L];if(B.L==2?(B.yb=0,B.zb=0):(B.yb=L.v-W>>4,B.zb=L.j-W>>4,0>B.yb&&(B.yb=0),0>B.zb&&(B.zb=0)),B.Va=L.o+15+W>>4,B.Hb=L.va+15+W>>4,B.Hb>B.za&&(B.Hb=B.za),B.Va>B.Ub&&(B.Va=B.Ub),0<B.L){var J=B.ed;for(W=0;4>W;++W){var ce;if(B.Qa.Cb){var he=B.Qa.Lb[W];B.Qa.Fb||(he+=J.Tb)}else he=J.Tb;for(ce=0;1>=ce;++ce){var me=B.gd[W][ce],pe=he;if(J.Pc&&(pe+=J.vd[0],ce&&(pe+=J.od[0])),0<(pe=0>pe?0:63<pe?63:pe)){var xe=pe;0<J.wb&&(xe=4<J.wb?xe>>2:xe>>1)>9-J.wb&&(xe=9-J.wb),1>xe&&(xe=1),me.dd=xe,me.tc=2*pe+xe,me.ld=40<=pe?2:15<=pe?1:0}else me.tc=0;me.La=ce}}}W=0}else ys(B,6,"Frame setup failed"),W=B.a;if(W=W==0){if(W){B.$c=0,0<B.Aa||(B.Ic=l1);e:{W=B.Ic,J=4*(xe=B.za);var Ne=32*xe,ke=xe+1,Ge=0<B.L?xe*(0<B.Aa?2:1):0,qe=(B.Aa==2?2:1)*xe;if((me=J+832+(ce=3*(16*W+Yp[B.L])/2*Ne)+(he=B.Fa!=null&&0<B.Fa.length?B.Kc.c*B.Kc.i:0))!=me)W=0;else{if(me>B.Vb){if(B.Vb=0,B.Ec=i(me),B.Fc=0,B.Ec==null){W=ys(B,1,"no memory during frame initialization.");break e}B.Vb=me}me=B.Ec,pe=B.Fc,B.Ac=me,B.Bc=pe,pe+=J,B.Gd=o(Ne,bp),B.Hd=0,B.rb=o(ke+1,eA),B.sb=1,B.wa=Ge?o(Ge,ll):null,B.Y=0,B.D.Nb=0,B.D.wa=B.wa,B.D.Y=B.Y,0<B.Aa&&(B.D.Y+=xe),e(!0),B.oc=me,B.pc=pe,pe+=832,B.ya=o(qe,vf),B.aa=0,B.D.ya=B.ya,B.D.aa=B.aa,B.Aa==2&&(B.D.aa+=xe),B.R=16*xe,B.B=8*xe,xe=(Ne=Yp[B.L])*B.R,Ne=Ne/2*B.B,B.sa=me,B.ta=pe+xe,B.qa=B.sa,B.ra=B.ta+16*W*B.R+Ne,B.Ha=B.qa,B.Ia=B.ra+8*W*B.B+Ne,B.$c=0,pe+=ce,B.mb=he?me:null,B.nb=he?pe:null,e(pe+he<=B.Fc+B.Vb),Pc(B),a(B.Ac,B.Bc,0,J),W=1}}if(W){if(L.ka=0,L.y=B.sa,L.O=B.ta,L.f=B.qa,L.N=B.ra,L.ea=B.Ha,L.Vd=B.Ia,L.fa=B.R,L.Rc=B.B,L.F=null,L.J=0,!Lp){for(W=-255;255>=W;++W)ds[255+W]=0>W?-W:W;for(W=-1020;1020>=W;++W)ec[1020+W]=-128>W?-128:127<W?127:W;for(W=-112;112>=W;++W)cA[112+W]=-16>W?-16:15<W?15:W;for(W=-255;510>=W;++W)Vc[255+W]=0>W?0:255<W?255:W;Lp=1}ti=nv,Jl=tv,Qc=Cp,Na=rv,co=Np,Ns=jp,Tf=Lc,ri=Uc,Df=jf,nd=Xu,sd=uv,Uo=Ti,ad=nA,id=Fp,zc=ql,Zl=dl,If=Kl,Pi=cv,$o[0]=ul,$o[1]=sv,$o[2]=ov,$o[3]=lv,$o[4]=Bp,$o[5]=bf,$o[6]=Tp,$o[7]=Za,$o[8]=Ip,$o[9]=Dp,Wc[0]=cl,Wc[1]=av,Wc[2]=Gl,Wc[3]=Ku,Wc[4]=ja,Wc[5]=iv,Wc[6]=Ep,fo[0]=Fc,fo[1]=Sp,fo[2]=_p,fo[3]=rA,fo[4]=Rc,fo[5]=Pp,fo[6]=yf,W=1}else W=0}W&&(W=function($e,ot){for($e.M=0;$e.M<$e.Va;++$e.M){var st,Fe=$e.Jc[$e.M&$e.Xb],Le=$e.m,mt=$e;for(st=0;st<mt.za;++st){var jt=Le,pt=mt,Ht=pt.Ac,Rt=pt.Bc+4*st,lr=pt.zc,Lt=pt.ya[pt.aa+st];if(pt.Qa.Bb?Lt.$b=ae(jt,pt.Pa.jb[0])?2+ae(jt,pt.Pa.jb[2]):ae(jt,pt.Pa.jb[1]):Lt.$b=0,pt.kc&&(Lt.Ad=ae(jt,pt.Bd)),Lt.Za=!ae(jt,145)+0,Lt.Za){var an=Lt.Ob,hn=0;for(pt=0;4>pt;++pt){var qr,Nt=lr[0+pt];for(qr=0;4>qr;++qr){Nt=B5[Ht[Rt+qr]][Nt];for(var En=t1[ae(jt,Nt[0])];0<En;)En=t1[2*En+ae(jt,Nt[En])];Nt=-En,Ht[Rt+qr]=Nt}n(an,hn,Ht,Rt,4),hn+=4,lr[0+pt]=Nt}}else Nt=ae(jt,156)?ae(jt,128)?1:3:ae(jt,163)?2:0,Lt.Ob[0]=Nt,a(Ht,Rt,Nt,4),a(lr,0,Nt,4);Lt.Dd=ae(jt,142)?ae(jt,114)?ae(jt,183)?1:3:2:0}if(mt.m.Ka)return ys($e,7,"Premature end-of-partition0 encountered.");for(;$e.ja<$e.za;++$e.ja){if(mt=Fe,jt=(Le=$e).rb[Le.sb-1],Ht=Le.rb[Le.sb+Le.ja],st=Le.ya[Le.aa+Le.ja],Rt=Le.kc?st.Ad:0)jt.la=Ht.la=0,st.Za||(jt.Na=Ht.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var xn,Nr;if(jt=Ht,Ht=mt,Rt=Le.Pa.Xc,lr=Le.ya[Le.aa+Le.ja],Lt=Le.pb[lr.$b],pt=lr.ad,an=0,hn=Le.rb[Le.sb-1],Nt=qr=0,a(pt,an,0,384),lr.Za)var An=0,ni=Rt[3];else{En=i(16);var Es=jt.Na+hn.Na;if(Es=uA(Ht,Rt[1],Es,Lt.Eb,0,En,0),jt.Na=hn.Na=(0<Es)+0,1<Es)ti(En,0,pt,an);else{var ra=En[0]+3>>3;for(En=0;256>En;En+=16)pt[an+En]=ra}An=1,ni=Rt[0]}var Zr=15&jt.la,Fi=15&hn.la;for(En=0;4>En;++En){var Ri=1&Fi;for(ra=Nr=0;4>ra;++ra)Zr=Zr>>1|(Ri=(Es=uA(Ht,ni,Es=Ri+(1&Zr),Lt.Sc,An,pt,an))>An)<<7,Nr=Nr<<2|(3<Es?3:1<Es?2:pt[an+0]!=0),an+=16;Zr>>=4,Fi=Fi>>1|Ri<<7,qr=(qr<<8|Nr)>>>0}for(ni=Zr,An=Fi>>4,xn=0;4>xn;xn+=2){for(Nr=0,Zr=jt.la>>4+xn,Fi=hn.la>>4+xn,En=0;2>En;++En){for(Ri=1&Fi,ra=0;2>ra;++ra)Es=Ri+(1&Zr),Zr=Zr>>1|(Ri=0<(Es=uA(Ht,Rt[2],Es,Lt.Qc,0,pt,an)))<<3,Nr=Nr<<2|(3<Es?3:1<Es?2:pt[an+0]!=0),an+=16;Zr>>=2,Fi=Fi>>1|Ri<<5}Nt|=Nr<<4*xn,ni|=Zr<<4<<xn,An|=(240&Fi)<<xn}jt.la=ni,hn.la=An,lr.Hc=qr,lr.Gc=Nt,lr.ia=43690&Nt?0:Lt.ia,Rt=!(qr|Nt)}if(0<Le.L&&(Le.wa[Le.Y+Le.ja]=Le.gd[st.$b][st.Za],Le.wa[Le.Y+Le.ja].La|=!Rt),mt.Ka)return ys($e,7,"Premature end-of-file encountered.")}if(Pc($e),Le=ot,mt=1,st=(Fe=$e).D,jt=0<Fe.L&&Fe.M>=Fe.zb&&Fe.M<=Fe.Va,Fe.Aa==0)e:{if(st.M=Fe.M,st.uc=jt,Vn(Fe,st),mt=1,st=(Nr=Fe.D).Nb,jt=(Nt=Yp[Fe.L])*Fe.R,Ht=Nt/2*Fe.B,En=16*st*Fe.R,ra=8*st*Fe.B,Rt=Fe.sa,lr=Fe.ta-jt+En,Lt=Fe.qa,pt=Fe.ra-Ht+ra,an=Fe.Ha,hn=Fe.Ia-Ht+ra,Fi=(Zr=Nr.M)==0,qr=Zr>=Fe.Va-1,Fe.Aa==2&&Vn(Fe,Nr),Nr.uc)for(Ri=(Es=Fe).D.M,e(Es.D.uc),Nr=Es.yb;Nr<Es.Hb;++Nr){An=Nr,ni=Ri;var na=(rs=(fs=Es).D).Nb;xn=fs.R;var rs=rs.wa[rs.Y+An],ma=fs.sa,si=fs.ta+16*na*xn+16*An,fl=rs.dd,Gs=rs.tc;if(Gs!=0)if(e(3<=Gs),fs.L==1)0<An&&Zl(ma,si,xn,Gs+4),rs.La&&Pi(ma,si,xn,Gs),0<ni&&zc(ma,si,xn,Gs+4),rs.La&&If(ma,si,xn,Gs);else{var rc=fs.B,nc=fs.qa,Of=fs.ra+8*na*rc+8*An,qc=fs.Ha,fs=fs.Ia+8*na*rc+8*An;na=rs.ld,0<An&&(ri(ma,si,xn,Gs+4,fl,na),nd(nc,Of,qc,fs,rc,Gs+4,fl,na)),rs.La&&(Uo(ma,si,xn,Gs,fl,na),id(nc,Of,qc,fs,rc,Gs,fl,na)),0<ni&&(Tf(ma,si,xn,Gs+4,fl,na),Df(nc,Of,qc,fs,rc,Gs+4,fl,na)),rs.La&&(sd(ma,si,xn,Gs,fl,na),ad(nc,Of,qc,fs,rc,Gs,fl,na))}}if(Fe.ia&&alert("todo:DitherRow"),Le.put!=null){if(Nr=16*Zr,Zr=16*(Zr+1),Fi?(Le.y=Fe.sa,Le.O=Fe.ta+En,Le.f=Fe.qa,Le.N=Fe.ra+ra,Le.ea=Fe.Ha,Le.W=Fe.Ia+ra):(Nr-=Nt,Le.y=Rt,Le.O=lr,Le.f=Lt,Le.N=pt,Le.ea=an,Le.W=hn),qr||(Zr-=Nt),Zr>Le.o&&(Zr=Le.o),Le.F=null,Le.J=null,Fe.Fa!=null&&0<Fe.Fa.length&&Nr<Zr&&(Le.J=oA(Fe,Le,Nr,Zr-Nr),Le.F=Fe.mb,Le.F==null&&Le.F.length==0)){mt=ys(Fe,3,"Could not decode alpha data.");break e}Nr<Le.j&&(Nt=Le.j-Nr,Nr=Le.j,e(!(1&Nt)),Le.O+=Fe.R*Nt,Le.N+=Fe.B*(Nt>>1),Le.W+=Fe.B*(Nt>>1),Le.F!=null&&(Le.J+=Le.width*Nt)),Nr<Zr&&(Le.O+=Le.v,Le.N+=Le.v>>1,Le.W+=Le.v>>1,Le.F!=null&&(Le.J+=Le.v),Le.ka=Nr-Le.j,Le.U=Le.va-Le.v,Le.T=Zr-Nr,mt=Le.put(Le))}st+1!=Fe.Ic||qr||(n(Fe.sa,Fe.ta-jt,Rt,lr+16*Fe.R,jt),n(Fe.qa,Fe.ra-Ht,Lt,pt+8*Fe.B,Ht),n(Fe.Ha,Fe.Ia-Ht,an,hn+8*Fe.B,Ht))}if(!mt)return ys($e,6,"Output aborted.")}return 1}(B,L)),L.bc!=null&&L.bc(L),W&=1}return W?(B.cb=0,W):0}function Mo(B,L,W,J,ce){ce=B[L+W+32*J]+(ce>>3),B[L+W+32*J]=-256&ce?0>ce?0:255:ce}function zs(B,L,W,J,ce,he){Mo(B,L,0,W,J+ce),Mo(B,L,1,W,J+he),Mo(B,L,2,W,J-he),Mo(B,L,3,W,J-ce)}function Ja(B){return(20091*B>>16)+B}function tA(B,L,W,J){var ce,he=0,me=i(16);for(ce=0;4>ce;++ce){var pe=B[L+0]+B[L+8],xe=B[L+0]-B[L+8],Ne=(35468*B[L+4]>>16)-Ja(B[L+12]),ke=Ja(B[L+4])+(35468*B[L+12]>>16);me[he+0]=pe+ke,me[he+1]=xe+Ne,me[he+2]=xe-Ne,me[he+3]=pe-ke,he+=4,L++}for(ce=he=0;4>ce;++ce)pe=(B=me[he+0]+4)+me[he+8],xe=B-me[he+8],Ne=(35468*me[he+4]>>16)-Ja(me[he+12]),Mo(W,J,0,0,pe+(ke=Ja(me[he+4])+(35468*me[he+12]>>16))),Mo(W,J,1,0,xe+Ne),Mo(W,J,2,0,xe-Ne),Mo(W,J,3,0,pe-ke),he++,J+=32}function jp(B,L,W,J){var ce=B[L+0]+4,he=35468*B[L+4]>>16,me=Ja(B[L+4]),pe=35468*B[L+1]>>16;zs(W,J,0,ce+me,B=Ja(B[L+1]),pe),zs(W,J,1,ce+he,B,pe),zs(W,J,2,ce-he,B,pe),zs(W,J,3,ce-me,B,pe)}function tv(B,L,W,J,ce){tA(B,L,W,J),ce&&tA(B,L+16,W,J+4)}function Cp(B,L,W,J){Jl(B,L+0,W,J,1),Jl(B,L+32,W,J+128,1)}function rv(B,L,W,J){var ce;for(B=B[L+0]+4,ce=0;4>ce;++ce)for(L=0;4>L;++L)Mo(W,J,L,ce,B)}function Np(B,L,W,J){B[L+0]&&Na(B,L+0,W,J),B[L+16]&&Na(B,L+16,W,J+4),B[L+32]&&Na(B,L+32,W,J+128),B[L+48]&&Na(B,L+48,W,J+128+4)}function nv(B,L,W,J){var ce,he=i(16);for(ce=0;4>ce;++ce){var me=B[L+0+ce]+B[L+12+ce],pe=B[L+4+ce]+B[L+8+ce],xe=B[L+4+ce]-B[L+8+ce],Ne=B[L+0+ce]-B[L+12+ce];he[0+ce]=me+pe,he[8+ce]=me-pe,he[4+ce]=Ne+xe,he[12+ce]=Ne-xe}for(ce=0;4>ce;++ce)me=(B=he[0+4*ce]+3)+he[3+4*ce],pe=he[1+4*ce]+he[2+4*ce],xe=he[1+4*ce]-he[2+4*ce],Ne=B-he[3+4*ce],W[J+0]=me+pe>>3,W[J+16]=Ne+xe>>3,W[J+32]=me-pe>>3,W[J+48]=Ne-xe>>3,J+=64}function kc(B,L,W){var J,ce=L-32,he=Oi,me=255-B[ce-1];for(J=0;J<W;++J){var pe,xe=he,Ne=me+B[L-1];for(pe=0;pe<W;++pe)B[L+pe]=xe[Ne+B[ce+pe]];L+=32}}function sv(B,L){kc(B,L,4)}function Sp(B,L){kc(B,L,8)}function av(B,L){kc(B,L,16)}function Gl(B,L){var W;for(W=0;16>W;++W)n(B,L+32*W,B,L-32,16)}function Ku(B,L){var W;for(W=16;0<W;--W)a(B,L,B[L-1],16),L+=32}function Oc(B,L,W){var J;for(J=0;16>J;++J)a(L,W+32*J,B,16)}function cl(B,L){var W,J=16;for(W=0;16>W;++W)J+=B[L-1+32*W]+B[L+W-32];Oc(J>>5,B,L)}function ja(B,L){var W,J=8;for(W=0;16>W;++W)J+=B[L-1+32*W];Oc(J>>4,B,L)}function iv(B,L){var W,J=8;for(W=0;16>W;++W)J+=B[L+W-32];Oc(J>>4,B,L)}function Ep(B,L){Oc(128,B,L)}function fr(B,L,W){return B+2*L+W+2>>2}function ov(B,L){var W,J=L-32;for(J=new Uint8Array([fr(B[J-1],B[J+0],B[J+1]),fr(B[J+0],B[J+1],B[J+2]),fr(B[J+1],B[J+2],B[J+3]),fr(B[J+2],B[J+3],B[J+4])]),W=0;4>W;++W)n(B,L+32*W,J,0,J.length)}function lv(B,L){var W=B[L-1],J=B[L-1+32],ce=B[L-1+64],he=B[L-1+96];re(B,L+0,16843009*fr(B[L-1-32],W,J)),re(B,L+32,16843009*fr(W,J,ce)),re(B,L+64,16843009*fr(J,ce,he)),re(B,L+96,16843009*fr(ce,he,he))}function ul(B,L){var W,J=4;for(W=0;4>W;++W)J+=B[L+W-32]+B[L-1+32*W];for(J>>=3,W=0;4>W;++W)a(B,L+32*W,J,4)}function Bp(B,L){var W=B[L-1+0],J=B[L-1+32],ce=B[L-1+64],he=B[L-1-32],me=B[L+0-32],pe=B[L+1-32],xe=B[L+2-32],Ne=B[L+3-32];B[L+0+96]=fr(J,ce,B[L-1+96]),B[L+1+96]=B[L+0+64]=fr(W,J,ce),B[L+2+96]=B[L+1+64]=B[L+0+32]=fr(he,W,J),B[L+3+96]=B[L+2+64]=B[L+1+32]=B[L+0+0]=fr(me,he,W),B[L+3+64]=B[L+2+32]=B[L+1+0]=fr(pe,me,he),B[L+3+32]=B[L+2+0]=fr(xe,pe,me),B[L+3+0]=fr(Ne,xe,pe)}function Tp(B,L){var W=B[L+1-32],J=B[L+2-32],ce=B[L+3-32],he=B[L+4-32],me=B[L+5-32],pe=B[L+6-32],xe=B[L+7-32];B[L+0+0]=fr(B[L+0-32],W,J),B[L+1+0]=B[L+0+32]=fr(W,J,ce),B[L+2+0]=B[L+1+32]=B[L+0+64]=fr(J,ce,he),B[L+3+0]=B[L+2+32]=B[L+1+64]=B[L+0+96]=fr(ce,he,me),B[L+3+32]=B[L+2+64]=B[L+1+96]=fr(he,me,pe),B[L+3+64]=B[L+2+96]=fr(me,pe,xe),B[L+3+96]=fr(pe,xe,xe)}function bf(B,L){var W=B[L-1+0],J=B[L-1+32],ce=B[L-1+64],he=B[L-1-32],me=B[L+0-32],pe=B[L+1-32],xe=B[L+2-32],Ne=B[L+3-32];B[L+0+0]=B[L+1+64]=he+me+1>>1,B[L+1+0]=B[L+2+64]=me+pe+1>>1,B[L+2+0]=B[L+3+64]=pe+xe+1>>1,B[L+3+0]=xe+Ne+1>>1,B[L+0+96]=fr(ce,J,W),B[L+0+64]=fr(J,W,he),B[L+0+32]=B[L+1+96]=fr(W,he,me),B[L+1+32]=B[L+2+96]=fr(he,me,pe),B[L+2+32]=B[L+3+96]=fr(me,pe,xe),B[L+3+32]=fr(pe,xe,Ne)}function Za(B,L){var W=B[L+0-32],J=B[L+1-32],ce=B[L+2-32],he=B[L+3-32],me=B[L+4-32],pe=B[L+5-32],xe=B[L+6-32],Ne=B[L+7-32];B[L+0+0]=W+J+1>>1,B[L+1+0]=B[L+0+64]=J+ce+1>>1,B[L+2+0]=B[L+1+64]=ce+he+1>>1,B[L+3+0]=B[L+2+64]=he+me+1>>1,B[L+0+32]=fr(W,J,ce),B[L+1+32]=B[L+0+96]=fr(J,ce,he),B[L+2+32]=B[L+1+96]=fr(ce,he,me),B[L+3+32]=B[L+2+96]=fr(he,me,pe),B[L+3+64]=fr(me,pe,xe),B[L+3+96]=fr(pe,xe,Ne)}function Dp(B,L){var W=B[L-1+0],J=B[L-1+32],ce=B[L-1+64],he=B[L-1+96];B[L+0+0]=W+J+1>>1,B[L+2+0]=B[L+0+32]=J+ce+1>>1,B[L+2+32]=B[L+0+64]=ce+he+1>>1,B[L+1+0]=fr(W,J,ce),B[L+3+0]=B[L+1+32]=fr(J,ce,he),B[L+3+32]=B[L+1+64]=fr(ce,he,he),B[L+3+64]=B[L+2+64]=B[L+0+96]=B[L+1+96]=B[L+2+96]=B[L+3+96]=he}function Ip(B,L){var W=B[L-1+0],J=B[L-1+32],ce=B[L-1+64],he=B[L-1+96],me=B[L-1-32],pe=B[L+0-32],xe=B[L+1-32],Ne=B[L+2-32];B[L+0+0]=B[L+2+32]=W+me+1>>1,B[L+0+32]=B[L+2+64]=J+W+1>>1,B[L+0+64]=B[L+2+96]=ce+J+1>>1,B[L+0+96]=he+ce+1>>1,B[L+3+0]=fr(pe,xe,Ne),B[L+2+0]=fr(me,pe,xe),B[L+1+0]=B[L+3+32]=fr(W,me,pe),B[L+1+32]=B[L+3+64]=fr(J,W,me),B[L+1+64]=B[L+3+96]=fr(ce,J,W),B[L+1+96]=fr(he,ce,J)}function _p(B,L){var W;for(W=0;8>W;++W)n(B,L+32*W,B,L-32,8)}function rA(B,L){var W;for(W=0;8>W;++W)a(B,L,B[L-1],8),L+=32}function Yu(B,L,W){var J;for(J=0;8>J;++J)a(L,W+32*J,B,8)}function Fc(B,L){var W,J=8;for(W=0;8>W;++W)J+=B[L+W-32]+B[L-1+32*W];Yu(J>>4,B,L)}function Pp(B,L){var W,J=4;for(W=0;8>W;++W)J+=B[L+W-32];Yu(J>>3,B,L)}function Rc(B,L){var W,J=4;for(W=0;8>W;++W)J+=B[L-1+32*W];Yu(J>>3,B,L)}function yf(B,L){Yu(128,B,L)}function wf(B,L,W){var J=B[L-W],ce=B[L+0],he=3*(ce-J)+Up[1020+B[L-2*W]-B[L+W]],me=$p[112+(he+4>>3)];B[L-W]=Oi[255+J+$p[112+(he+3>>3)]],B[L+0]=Oi[255+ce-me]}function kp(B,L,W,J){var ce=B[L+0],he=B[L+W];return uo[255+B[L-2*W]-B[L-W]]>J||uo[255+he-ce]>J}function Vs(B,L,W,J){return 4*uo[255+B[L-W]-B[L+0]]+uo[255+B[L-2*W]-B[L+W]]<=J}function Op(B,L,W,J,ce){var he=B[L-3*W],me=B[L-2*W],pe=B[L-W],xe=B[L+0],Ne=B[L+W],ke=B[L+2*W],Ge=B[L+3*W];return 4*uo[255+pe-xe]+uo[255+me-Ne]>J?0:uo[255+B[L-4*W]-he]<=ce&&uo[255+he-me]<=ce&&uo[255+me-pe]<=ce&&uo[255+Ge-ke]<=ce&&uo[255+ke-Ne]<=ce&&uo[255+Ne-xe]<=ce}function ql(B,L,W,J){var ce=2*J+1;for(J=0;16>J;++J)Vs(B,L+J,W,ce)&&wf(B,L+J,W)}function dl(B,L,W,J){var ce=2*J+1;for(J=0;16>J;++J)Vs(B,L+J*W,1,ce)&&wf(B,L+J*W,1)}function Kl(B,L,W,J){var ce;for(ce=3;0<ce;--ce)ql(B,L+=4*W,W,J)}function cv(B,L,W,J){var ce;for(ce=3;0<ce;--ce)dl(B,L+=4,W,J)}function Mc(B,L,W,J,ce,he,me,pe){for(he=2*he+1;0<ce--;){if(Op(B,L,W,he,me))if(kp(B,L,W,pe))wf(B,L,W);else{var xe=B,Ne=L,ke=W,Ge=xe[Ne-2*ke],qe=xe[Ne-ke],$e=xe[Ne+0],ot=xe[Ne+ke],st=xe[Ne+2*ke],Fe=27*(mt=Up[1020+3*($e-qe)+Up[1020+Ge-ot]])+63>>7,Le=18*mt+63>>7,mt=9*mt+63>>7;xe[Ne-3*ke]=Oi[255+xe[Ne-3*ke]+mt],xe[Ne-2*ke]=Oi[255+Ge+Le],xe[Ne-ke]=Oi[255+qe+Fe],xe[Ne+0]=Oi[255+$e-Fe],xe[Ne+ke]=Oi[255+ot-Le],xe[Ne+2*ke]=Oi[255+st-mt]}L+=J}}function ei(B,L,W,J,ce,he,me,pe){for(he=2*he+1;0<ce--;){if(Op(B,L,W,he,me))if(kp(B,L,W,pe))wf(B,L,W);else{var xe=B,Ne=L,ke=W,Ge=xe[Ne-ke],qe=xe[Ne+0],$e=xe[Ne+ke],ot=$p[112+((st=3*(qe-Ge))+4>>3)],st=$p[112+(st+3>>3)],Fe=ot+1>>1;xe[Ne-2*ke]=Oi[255+xe[Ne-2*ke]+Fe],xe[Ne-ke]=Oi[255+Ge+st],xe[Ne+0]=Oi[255+qe-ot],xe[Ne+ke]=Oi[255+$e-Fe]}L+=J}}function Lc(B,L,W,J,ce,he){Mc(B,L,W,1,16,J,ce,he)}function Uc(B,L,W,J,ce,he){Mc(B,L,1,W,16,J,ce,he)}function uv(B,L,W,J,ce,he){var me;for(me=3;0<me;--me)ei(B,L+=4*W,W,1,16,J,ce,he)}function Ti(B,L,W,J,ce,he){var me;for(me=3;0<me;--me)ei(B,L+=4,1,W,16,J,ce,he)}function jf(B,L,W,J,ce,he,me,pe){Mc(B,L,ce,1,8,he,me,pe),Mc(W,J,ce,1,8,he,me,pe)}function Xu(B,L,W,J,ce,he,me,pe){Mc(B,L,1,ce,8,he,me,pe),Mc(W,J,1,ce,8,he,me,pe)}function nA(B,L,W,J,ce,he,me,pe){ei(B,L+4*ce,ce,1,8,he,me,pe),ei(W,J+4*ce,ce,1,8,he,me,pe)}function Fp(B,L,W,J,ce,he,me,pe){ei(B,L+4,1,ce,8,he,me,pe),ei(W,J+4,1,ce,8,he,me,pe)}function Cf(){this.ba=new nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new At,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function aA(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rp(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new S}function dv(){this.xb=this.a=0,this.l=new Wl,this.ca=new nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rp,this.ab=0,this.gc=o(4,aA),this.Oc=0}function Nf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ju(B,L,W,J,ce,he,me){for(B=B==null?0:B[L+0],L=0;L<me;++L)ce[he+L]=B+W[J+L]&255,B=ce[he+L]}function iA(B,L,W,J,ce,he,me){var pe;if(B==null)Ju(null,null,W,J,ce,he,me);else for(pe=0;pe<me;++pe)ce[he+pe]=B[L+pe]+W[J+pe]&255}function $c(B,L,W,J,ce,he,me){if(B==null)Ju(null,null,W,J,ce,he,me);else{var pe,xe=B[L+0],Ne=xe,ke=xe;for(pe=0;pe<me;++pe)Ne=ke+(xe=B[L+pe])-Ne,ke=W[J+pe]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=xe,ce[he+pe]=ke}}function oA(B,L,W,J){var ce=L.width,he=L.o;if(e(B!=null&&L!=null),0>W||0>=J||W+J>he)return null;if(!B.Cc){if(B.ga==null){var me;if(B.ga=new Nf,(me=B.ga==null)||(me=L.width*L.o,e(B.Gb.length==0),B.Gb=i(me),B.Uc=0,B.Gb==null?me=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,me=1),me=!me),!me){me=B.ga;var pe=B.Fa,xe=B.P,Ne=B.qc,ke=B.mb,Ge=B.nb,qe=xe+1,$e=Ne-1,ot=me.l;if(e(pe!=null&&ke!=null&&L!=null),tc[0]=null,tc[1]=Ju,tc[2]=iA,tc[3]=$c,me.ca=ke,me.tb=Ge,me.c=L.width,me.i=L.height,e(0<me.c&&0<me.i),1>=Ne)L=0;else if(me.$a=pe[xe+0]>>0&3,me.Z=pe[xe+0]>>2&3,me.Lc=pe[xe+0]>>4&3,xe=pe[xe+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||xe)L=0;else if(ot.put=Zt,ot.ac=Dt,ot.bc=Pr,ot.ma=me,ot.width=L.width,ot.height=L.height,ot.Da=L.Da,ot.v=L.v,ot.va=L.va,ot.j=L.j,ot.o=L.o,me.$a)e:{e(me.$a==1),L=Fa();t:for(;;){if(L==null){L=0;break e}if(e(me!=null),me.mc=L,L.c=me.c,L.i=me.i,L.l=me.l,L.l.ma=me,L.l.width=me.c,L.l.height=me.i,L.a=0,Q(L.m,pe,qe,$e),!Bi(me.c,me.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&ea(L.s)?(me.ic=1,pe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=i(pe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(me.ic=0,L=Ro(L,me.c)),!L))break t;L=1;break e}me.mc=null,L=0}else L=$e>=me.c*me.i;me=!L}if(me)return null;B.ga.Lc!=1?B.Ga=0:J=he-W}e(B.ga!=null),e(W+J<=he);e:{if(L=(pe=B.ga).c,he=pe.l.o,pe.$a==0){if(qe=B.rc,$e=B.Vc,ot=B.Fa,xe=B.P+1+W*L,Ne=B.mb,ke=B.nb+W*L,e(xe<=B.P+B.qc),pe.Z!=0)for(e(tc[pe.Z]!=null),me=0;me<J;++me)tc[pe.Z](qe,$e,ot,xe,Ne,ke,L),qe=Ne,$e=ke,ke+=L,xe+=L;else for(me=0;me<J;++me)n(Ne,ke,ot,xe,L),qe=Ne,$e=ke,ke+=L,xe+=L;B.rc=qe,B.Vc=$e}else{if(e(pe.mc!=null),L=W+J,e((me=pe.mc)!=null),e(L<=me.i),me.C>=L)L=1;else if(pe.ic||Qe(),pe.ic){pe=me.V,qe=me.Ba,$e=me.c;var st=me.i,Fe=(ot=1,xe=me.$/$e,Ne=me.$%$e,ke=me.m,Ge=me.s,me.$),Le=$e*st,mt=$e*L,jt=Ge.wc,pt=Fe<mt?Jr(Ge,Ne,xe):null;e(Fe<=Le),e(L<=st),e(ea(Ge));t:for(;;){for(;!ke.h&&Fe<mt;){if(Ne&jt||(pt=Jr(Ge,Ne,xe)),e(pt!=null),ie(ke),256>(st=Mr(pt.G[0],pt.H[0],ke)))pe[qe+Fe]=st,++Fe,++Ne>=$e&&(Ne=0,++xe<=L&&!(xe%16)&&ka(me,xe));else{if(!(280>st)){ot=0;break t}st=cn(st-256,ke);var Ht,Rt=Mr(pt.G[4],pt.H[4],ke);if(ie(ke),!(Fe>=(Rt=Rr($e,Rt=cn(Rt,ke)))&&Le-Fe>=st)){ot=0;break t}for(Ht=0;Ht<st;++Ht)pe[qe+Fe+Ht]=pe[qe+Fe+Ht-Rt];for(Fe+=st,Ne+=st;Ne>=$e;)Ne-=$e,++xe<=L&&!(xe%16)&&ka(me,xe);Fe<mt&&Ne&jt&&(pt=Jr(Ge,Ne,xe))}e(ke.h==se(ke))}ka(me,xe>L?L:xe);break t}!ot||ke.h&&Fe<Le?(ot=0,me.a=ke.h?5:3):me.$=Fe,L=ot}else L=$r(me,me.V,me.Ba,me.c,me.i,L,zu);if(!L){J=0;break e}}W+J>=he&&(B.Cc=1),J=1}if(!J)return null;if(B.Cc&&((J=B.ga)!=null&&(J.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+W*ce}function V(B,L,W,J,ce,he){for(;0<ce--;){var me,pe=B,xe=L+(W?1:0),Ne=B,ke=L+(W?0:3);for(me=0;me<J;++me){var Ge=Ne[ke+4*me];Ge!=255&&(Ge*=32897,pe[xe+4*me+0]=pe[xe+4*me+0]*Ge>>23,pe[xe+4*me+1]=pe[xe+4*me+1]*Ge>>23,pe[xe+4*me+2]=pe[xe+4*me+2]*Ge>>23)}L+=he}}function de(B,L,W,J,ce){for(;0<J--;){var he;for(he=0;he<W;++he){var me=B[L+2*he+0],pe=15&(Ne=B[L+2*he+1]),xe=4369*pe,Ne=(240&Ne|Ne>>4)*xe>>16;B[L+2*he+0]=(240&me|me>>4)*xe>>16&240|(15&me|me<<4)*xe>>16>>4&15,B[L+2*he+1]=240&Ne|pe}L+=ce}}function Be(B,L,W,J,ce,he,me,pe){var xe,Ne,ke=255;for(Ne=0;Ne<ce;++Ne){for(xe=0;xe<J;++xe){var Ge=B[L+xe];he[me+4*xe]=Ge,ke&=Ge}L+=W,me+=pe}return ke!=255}function _e(B,L,W,J,ce){var he;for(he=0;he<ce;++he)W[J+he]=B[L+he]>>8}function Qe(){ki=V,Nn=de,Sn=Be,Ss=_e}function lt(B,L,W){E[B]=function(J,ce,he,me,pe,xe,Ne,ke,Ge,qe,$e,ot,st,Fe,Le,mt,jt){var pt,Ht=jt-1>>1,Rt=pe[xe+0]|Ne[ke+0]<<16,lr=Ge[qe+0]|$e[ot+0]<<16;e(J!=null);var Lt=3*Rt+lr+131074>>2;for(L(J[ce+0],255&Lt,Lt>>16,st,Fe),he!=null&&(Lt=3*lr+Rt+131074>>2,L(he[me+0],255&Lt,Lt>>16,Le,mt)),pt=1;pt<=Ht;++pt){var an=pe[xe+pt]|Ne[ke+pt]<<16,hn=Ge[qe+pt]|$e[ot+pt]<<16,qr=Rt+an+lr+hn+524296,Nt=qr+2*(an+lr)>>3;Lt=Nt+Rt>>1,Rt=(qr=qr+2*(Rt+hn)>>3)+an>>1,L(J[ce+2*pt-1],255&Lt,Lt>>16,st,Fe+(2*pt-1)*W),L(J[ce+2*pt-0],255&Rt,Rt>>16,st,Fe+(2*pt-0)*W),he!=null&&(Lt=qr+lr>>1,Rt=Nt+hn>>1,L(he[me+2*pt-1],255&Lt,Lt>>16,Le,mt+(2*pt-1)*W),L(he[me+2*pt+0],255&Rt,Rt>>16,Le,mt+(2*pt+0)*W)),Rt=an,lr=hn}1&jt||(Lt=3*Rt+lr+131074>>2,L(J[ce+jt-1],255&Lt,Lt>>16,st,Fe+(jt-1)*W),he!=null&&(Lt=3*lr+Rt+131074>>2,L(he[me+jt-1],255&Lt,Lt>>16,Le,mt+(jt-1)*W)))}}function Et(){ho[Hp]=_5,ho[Qp]=dA,ho[od]=mv,ho[zp]=n1,ho[Vp]=s1,ho[_f]=a1,ho[Zw]=P5,ho[fv]=dA,ho[hv]=n1,ho[Wp]=s1,ho[Pf]=a1}function $t(B){return B&-16384?0>B?0:255:B>>k5}function or(B,L){return $t((19077*B>>8)+(26149*L>>8)-14234)}function br(B,L,W){return $t((19077*B>>8)-(6419*L>>8)-(13320*W>>8)+8708)}function yr(B,L){return $t((19077*B>>8)+(33050*L>>8)-17685)}function zr(B,L,W,J,ce){J[ce+0]=or(B,W),J[ce+1]=br(B,L,W),J[ce+2]=yr(B,L)}function jn(B,L,W,J,ce){J[ce+0]=yr(B,L),J[ce+1]=br(B,L,W),J[ce+2]=or(B,W)}function Cn(B,L,W,J,ce){var he=br(B,L,W);L=he<<3&224|yr(B,L)>>3,J[ce+0]=248&or(B,W)|he>>5,J[ce+1]=L}function pr(B,L,W,J,ce){var he=240&yr(B,L)|15;J[ce+0]=240&or(B,W)|br(B,L,W)>>4,J[ce+1]=he}function Ca(B,L,W,J,ce){J[ce+0]=255,zr(B,L,W,J,ce+1)}function Os(B,L,W,J,ce){jn(B,L,W,J,ce),J[ce+3]=255}function oo(B,L,W,J,ce){zr(B,L,W,J,ce),J[ce+3]=255}function ta(B,L){return 0>B?0:B>L?L:B}function Ws(B,L,W){E[B]=function(J,ce,he,me,pe,xe,Ne,ke,Ge){for(var qe=ke+(-2&Ge)*W;ke!=qe;)L(J[ce+0],he[me+0],pe[xe+0],Ne,ke),L(J[ce+1],he[me+0],pe[xe+0],Ne,ke+W),ce+=2,++me,++xe,ke+=2*W;1&Ge&&L(J[ce+0],he[me+0],pe[xe+0],Ne,ke)}}function Mp(B,L,W){return W==0?B==0?L==0?6:5:L==0?4:0:W}function lo(B,L,W,J,ce){switch(B>>>30){case 3:Jl(L,W,J,ce,0);break;case 2:Ns(L,W,J,ce);break;case 1:Na(L,W,J,ce)}}function Vn(B,L){var W,J,ce=L.M,he=L.Nb,me=B.oc,pe=B.pc+40,xe=B.oc,Ne=B.pc+584,ke=B.oc,Ge=B.pc+600;for(W=0;16>W;++W)me[pe+32*W-1]=129;for(W=0;8>W;++W)xe[Ne+32*W-1]=129,ke[Ge+32*W-1]=129;for(0<ce?me[pe-1-32]=xe[Ne-1-32]=ke[Ge-1-32]=129:(a(me,pe-32-1,127,21),a(xe,Ne-32-1,127,9),a(ke,Ge-32-1,127,9)),J=0;J<B.za;++J){var qe=L.ya[L.aa+J];if(0<J){for(W=-1;16>W;++W)n(me,pe+32*W-4,me,pe+32*W+12,4);for(W=-1;8>W;++W)n(xe,Ne+32*W-4,xe,Ne+32*W+4,4),n(ke,Ge+32*W-4,ke,Ge+32*W+4,4)}var $e=B.Gd,ot=B.Hd+J,st=qe.ad,Fe=qe.Hc;if(0<ce&&(n(me,pe-32,$e[ot].y,0,16),n(xe,Ne-32,$e[ot].f,0,8),n(ke,Ge-32,$e[ot].ea,0,8)),qe.Za){var Le=me,mt=pe-32+16;for(0<ce&&(J>=B.za-1?a(Le,mt,$e[ot].y[15],4):n(Le,mt,$e[ot+1].y,0,4)),W=0;4>W;W++)Le[mt+128+W]=Le[mt+256+W]=Le[mt+384+W]=Le[mt+0+W];for(W=0;16>W;++W,Fe<<=2)Le=me,mt=pe+o1[W],$o[qe.Ob[W]](Le,mt),lo(Fe,st,16*+W,Le,mt)}else if(Le=Mp(J,ce,qe.Ob[0]),Wc[Le](me,pe),Fe!=0)for(W=0;16>W;++W,Fe<<=2)lo(Fe,st,16*+W,me,pe+o1[W]);for(W=qe.Gc,Le=Mp(J,ce,qe.Dd),fo[Le](xe,Ne),fo[Le](ke,Ge),Fe=st,Le=xe,mt=Ne,255&(qe=W>>0)&&(170&qe?Qc(Fe,256,Le,mt):co(Fe,256,Le,mt)),qe=ke,Fe=Ge,255&(W>>=8)&&(170&W?Qc(st,320,qe,Fe):co(st,320,qe,Fe)),ce<B.Ub-1&&(n($e[ot].y,0,me,pe+480,16),n($e[ot].f,0,xe,Ne+224,8),n($e[ot].ea,0,ke,Ge+224,8)),W=8*he*B.B,$e=B.sa,ot=B.ta+16*J+16*he*B.R,st=B.qa,qe=B.ra+8*J+W,Fe=B.Ha,Le=B.Ia+8*J+W,W=0;16>W;++W)n($e,ot+W*B.R,me,pe+32*W,16);for(W=0;8>W;++W)n(st,qe+W*B.B,xe,Ne+32*W,8),n(Fe,Le+W*B.B,ke,Ge+32*W,8)}}function Zu(B,L,W,J,ce,he,me,pe,xe){var Ne=[0],ke=[0],Ge=0,qe=xe!=null?xe.kd:0,$e=xe??new sA;if(B==null||12>W)return 7;$e.data=B,$e.w=L,$e.ha=W,L=[L],W=[W],$e.gb=[$e.gb];e:{var ot=L,st=W,Fe=$e.gb;if(e(B!=null),e(st!=null),e(Fe!=null),Fe[0]=0,12<=st[0]&&!r(B,ot[0],"RIFF")){if(r(B,ot[0]+8,"WEBP")){Fe=3;break e}var Le=oe(B,ot[0]+4);if(12>Le||4294967286<Le){Fe=3;break e}if(qe&&Le>st[0]-8){Fe=7;break e}Fe[0]=Le,ot[0]+=12,st[0]-=12}Fe=0}if(Fe!=0)return Fe;for(Le=0<$e.gb[0],W=W[0];;){e:{var mt=B;st=L,Fe=W;var jt=Ne,pt=ke,Ht=ot=[0];if((Lt=Ge=[Ge])[0]=0,8>Fe[0])Fe=7;else{if(!r(mt,st[0],"VP8X")){if(oe(mt,st[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var Rt=oe(mt,st[0]+8),lr=1+G(mt,st[0]+12);if(2147483648<=lr*(mt=1+G(mt,st[0]+15))){Fe=3;break e}Ht!=null&&(Ht[0]=Rt),jt!=null&&(jt[0]=lr),pt!=null&&(pt[0]=mt),st[0]+=18,Fe[0]-=18,Lt[0]=1}Fe=0}}if(Ge=Ge[0],ot=ot[0],Fe!=0)return Fe;if(st=!!(2&ot),!Le&&Ge)return 3;if(he!=null&&(he[0]=!!(16&ot)),me!=null&&(me[0]=st),pe!=null&&(pe[0]=0),me=Ne[0],ot=ke[0],Ge&&st&&xe==null){Fe=0;break}if(4>W){Fe=7;break}if(Le&&Ge||!Le&&!Ge&&!r(B,L[0],"ALPH")){W=[W],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{Rt=B,Fe=L,Le=W;var Lt=$e.gb;jt=$e.na,pt=$e.P,Ht=$e.Sa,lr=22,e(Rt!=null),e(Le!=null),mt=Fe[0];var an=Le[0];for(e(jt!=null),e(Ht!=null),jt[0]=null,pt[0]=null,Ht[0]=0;;){if(Fe[0]=mt,Le[0]=an,8>an){Fe=7;break e}var hn=oe(Rt,mt+4);if(4294967286<hn){Fe=3;break e}var qr=8+hn+1&-2;if(lr+=qr,0<Lt&&lr>Lt){Fe=3;break e}if(!r(Rt,mt,"VP8 ")||!r(Rt,mt,"VP8L")){Fe=0;break e}if(an[0]<qr){Fe=7;break e}r(Rt,mt,"ALPH")||(jt[0]=Rt,pt[0]=mt+8,Ht[0]=hn),mt+=qr,an-=qr}}if(W=W[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],Fe!=0)break}W=[W],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(Lt=B,Fe=L,Le=W,jt=$e.gb[0],pt=$e.Ja,Ht=$e.xa,Rt=Fe[0],mt=!r(Lt,Rt,"VP8 "),lr=!r(Lt,Rt,"VP8L"),e(Lt!=null),e(Le!=null),e(pt!=null),e(Ht!=null),8>Le[0])Fe=7;else{if(mt||lr){if(Lt=oe(Lt,Rt+4),12<=jt&&Lt>jt-12){Fe=3;break e}if(qe&&Lt>Le[0]-8){Fe=7;break e}pt[0]=Lt,Fe[0]+=8,Le[0]-=8,Ht[0]=lr}else Ht[0]=5<=Le[0]&&Lt[Rt+0]==47&&!(Lt[Rt+4]>>5),pt[0]=Le[0];Fe=0}if(W=W[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],L=L[0],Fe!=0)break;if(4294967286<$e.Ja)return 3;if(pe==null||st||(pe[0]=$e.xa?2:1),me=[me],ot=[ot],$e.xa){if(5>W){Fe=7;break}pe=me,qe=ot,st=he,B==null||5>W?B=0:5<=W&&B[L+0]==47&&!(B[L+4]>>5)?(Le=[0],Lt=[0],jt=[0],Q(pt=new $,B,L,W),_t(pt,Le,Lt,jt)?(pe!=null&&(pe[0]=Le[0]),qe!=null&&(qe[0]=Lt[0]),st!=null&&(st[0]=jt[0]),B=1):B=0):B=0}else{if(10>W){Fe=7;break}pe=ot,B==null||10>W||!yp(B,L+3,W-3)?B=0:(qe=B[L+0]|B[L+1]<<8|B[L+2]<<16,st=16383&(B[L+7]<<8|B[L+6]),B=16383&(B[L+9]<<8|B[L+8]),1&qe||3<(qe>>1&7)||!(qe>>4&1)||qe>>5>=$e.Ja||!st||!B?B=0:(me&&(me[0]=st),pe&&(pe[0]=B),B=1))}if(!B||(me=me[0],ot=ot[0],Ge&&(Ne[0]!=me||ke[0]!=ot)))return 3;xe!=null&&(xe[0]=$e,xe.offset=L-xe.w,e(4294967286>L-xe.w),e(xe.offset==xe.ha-W));break}return Fe==0||Fe==7&&Ge&&xe==null?(he!=null&&(he[0]|=$e.na!=null&&0<$e.na.length),J!=null&&(J[0]=me),ce!=null&&(ce[0]=ot),0):Fe}function ws(B,L,W){var J=L.width,ce=L.height,he=0,me=0,pe=J,xe=ce;if(L.Da=B!=null&&0<B.Da,L.Da&&(pe=B.cd,xe=B.bd,he=B.v,me=B.j,11>W||(he&=-2,me&=-2),0>he||0>me||0>=pe||0>=xe||he+pe>J||me+xe>ce))return 0;if(L.v=he,L.j=me,L.va=he+pe,L.o=me+xe,L.U=pe,L.T=xe,L.da=B!=null&&0<B.da,L.da){if(!ye(pe,xe,W=[B.ib],he=[B.hb]))return 0;L.ib=W[0],L.hb=he[0]}return L.ob=B!=null&&B.ob,L.Kb=B==null||!B.Sd,L.da&&(L.ob=L.ib<3*J/4&&L.hb<3*ce/4,L.Kb=0),1}function ed(B){if(B==null)return 2;if(11>B.S){var L=B.f.RGBA;L.fb+=(B.height-1)*L.A,L.A=-L.A}else L=B.f.kb,B=B.height,L.O+=(B-1)*L.fa,L.fa=-L.fa,L.N+=(B-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(B-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(B-1)*L.lb,L.lb=-L.lb);return 0}function Di(B,L,W,J){if(J==null||0>=B||0>=L)return 2;if(W!=null){if(W.Da){var ce=W.cd,he=W.bd,me=-2&W.v,pe=-2&W.j;if(0>me||0>pe||0>=ce||0>=he||me+ce>B||pe+he>L)return 2;B=ce,L=he}if(W.da){if(!ye(B,L,ce=[W.ib],he=[W.hb]))return 2;B=ce[0],L=he[0]}}J.width=B,J.height=L;e:{var xe=J.width,Ne=J.height;if(B=J.S,0>=xe||0>=Ne||!(B>=Hp&&13>B))B=2;else{if(0>=J.Rd&&J.sd==null){me=he=ce=L=0;var ke=(pe=xe*c1[B])*Ne;if(11>B||(he=(Ne+1)/2*(L=(xe+1)/2),B==12&&(me=(ce=xe)*Ne)),(Ne=i(ke+2*he+me))==null){B=1;break e}J.sd=Ne,11>B?((xe=J.f.RGBA).eb=Ne,xe.fb=0,xe.A=pe,xe.size=ke):((xe=J.f.kb).y=Ne,xe.O=0,xe.fa=pe,xe.Fd=ke,xe.f=Ne,xe.N=0+ke,xe.Ab=L,xe.Cd=he,xe.ea=Ne,xe.W=0+ke+he,xe.Db=L,xe.Ed=he,B==12&&(xe.F=Ne,xe.J=0+ke+2*he),xe.Tc=me,xe.lb=ce)}if(L=1,ce=J.S,he=J.width,me=J.height,ce>=Hp&&13>ce)if(11>ce)B=J.f.RGBA,L&=(pe=Math.abs(B.A))*(me-1)+he<=B.size,L&=pe>=he*c1[ce],L&=B.eb!=null;else{B=J.f.kb,pe=(he+1)/2,ke=(me+1)/2,xe=Math.abs(B.fa),Ne=Math.abs(B.Ab);var Ge=Math.abs(B.Db),qe=Math.abs(B.lb),$e=qe*(me-1)+he;L&=xe*(me-1)+he<=B.Fd,L&=Ne*(ke-1)+pe<=B.Cd,L=(L&=Ge*(ke-1)+pe<=B.Ed)&xe>=he&Ne>=pe&Ge>=pe,L&=B.y!=null,L&=B.f!=null,L&=B.ea!=null,ce==12&&(L&=qe>=he,L&=$e<=B.Tc,L&=B.F!=null)}else L=0;B=L?0:2}}return B!=0||W!=null&&W.fd&&(B=ed(J)),B}var js=64,sn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],td=24,rd=32,Sf=8,Ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Te("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(B){return B},E.Predictor2=function(B,L,W){return L[W+0]},E.Predictor3=function(B,L,W){return L[W+1]},E.Predictor4=function(B,L,W){return L[W-1]},E.Predictor5=function(B,L,W){return Me(Me(B,L[W+1]),L[W+0])},E.Predictor6=function(B,L,W){return Me(B,L[W-1])},E.Predictor7=function(B,L,W){return Me(B,L[W+0])},E.Predictor8=function(B,L,W){return Me(L[W-1],L[W+0])},E.Predictor9=function(B,L,W){return Me(L[W+0],L[W+1])},E.Predictor10=function(B,L,W){return Me(Me(B,L[W-1]),Me(L[W+0],L[W+1]))},E.Predictor11=function(B,L,W){var J=L[W+0];return 0>=ze(J>>24&255,B>>24&255,(L=L[W-1])>>24&255)+ze(J>>16&255,B>>16&255,L>>16&255)+ze(J>>8&255,B>>8&255,L>>8&255)+ze(255&J,255&B,255&L)?J:B},E.Predictor12=function(B,L,W){var J=L[W+0];return(Ve((B>>24&255)+(J>>24&255)-((L=L[W-1])>>24&255))<<24|Ve((B>>16&255)+(J>>16&255)-(L>>16&255))<<16|Ve((B>>8&255)+(J>>8&255)-(L>>8&255))<<8|Ve((255&B)+(255&J)-(255&L)))>>>0},E.Predictor13=function(B,L,W){var J=L[W-1];return(Pe((B=Me(B,L[W+0]))>>24&255,J>>24&255)<<24|Pe(B>>16&255,J>>16&255)<<16|Pe(B>>8&255,J>>8&255)<<8|Pe(B>>0&255,J>>0&255))>>>0};var Ef=E.PredictorAdd0;E.PredictorAdd1=ht,Te("Predictor2","PredictorAdd2"),Te("Predictor3","PredictorAdd3"),Te("Predictor4","PredictorAdd4"),Te("Predictor5","PredictorAdd5"),Te("Predictor6","PredictorAdd6"),Te("Predictor7","PredictorAdd7"),Te("Predictor8","PredictorAdd8"),Te("Predictor9","PredictorAdd9"),Te("Predictor10","PredictorAdd10"),Te("Predictor11","PredictorAdd11"),Te("Predictor12","PredictorAdd12"),Te("Predictor13","PredictorAdd13");var Bf=E.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var lA,ts=E.ColorIndexInverseTransform,Ii=E.MapARGB,Lo=E.VP8LColorIndexInverseTransformAlpha,Cs=E.MapAlpha,Ma=E.VP8LPredictorsAdd=[];Ma.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Hc,La,Aa,Yl,Xl,_i,ti,Jl,Ns,Qc,Na,co,Tf,ri,Df,nd,sd,Uo,ad,id,zc,Zl,If,Pi,ki,Nn,Sn,Ss,ds=i(511),ec=i(2041),cA=i(225),Vc=i(767),Lp=0,Up=ec,$p=cA,Oi=Vc,uo=ds,Hp=0,Qp=1,od=2,zp=3,Vp=4,_f=5,Zw=6,fv=7,hv=8,Wp=9,Pf=10,v5=[2,3,7],b5=[3,3,11],e1=[280,256,256,256,40],y5=[0,1,1,1,0],Gp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],w5=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],j5=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],C5=8,Av=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uA=null,N5=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],S5=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],E5=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],B5=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],T5=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],D5=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wc=[],$o=[],fo=[],I5=1,r1=2,tc=[],ho=[];lt("UpsampleRgbLinePair",zr,3),lt("UpsampleBgrLinePair",jn,3),lt("UpsampleRgbaLinePair",oo,4),lt("UpsampleBgraLinePair",Os,4),lt("UpsampleArgbLinePair",Ca,4),lt("UpsampleRgba4444LinePair",pr,2),lt("UpsampleRgb565LinePair",Cn,2);var _5=E.UpsampleRgbLinePair,mv=E.UpsampleBgrLinePair,dA=E.UpsampleRgbaLinePair,n1=E.UpsampleBgraLinePair,s1=E.UpsampleArgbLinePair,a1=E.UpsampleRgba4444LinePair,P5=E.UpsampleRgb565LinePair,qp=16,Kp=1<<qp-1,Gc=-227,pv=482,k5=6,i1=0,O5=i(256),F5=i(256),R5=i(256),M5=i(256),L5=i(pv-Gc),U5=i(pv-Gc);Ws("YuvToRgbRow",zr,3),Ws("YuvToBgrRow",jn,3),Ws("YuvToRgbaRow",oo,4),Ws("YuvToBgraRow",Os,4),Ws("YuvToArgbRow",Ca,4),Ws("YuvToRgba4444Row",pr,2),Ws("YuvToRgb565Row",Cn,2);var o1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Yp=[0,2,8],$5=[8,7,6,4,4,2,2,2,1,1,1,1],l1=1;this.WebPDecodeRGBA=function(B,L,W,J,ce){var he=Qp,me=new Cf,pe=new nn;me.ba=pe,pe.S=he,pe.width=[pe.width],pe.height=[pe.height];var xe=pe.width,Ne=pe.height,ke=new Mt;if(ke==null||B==null)var Ge=2;else e(ke!=null),Ge=Zu(B,L,W,ke.width,ke.height,ke.Pd,ke.Qd,ke.format,null);if(Ge!=0?xe=0:(xe!=null&&(xe[0]=ke.width[0]),Ne!=null&&(Ne[0]=ke.height[0]),xe=1),xe){pe.width=pe.width[0],pe.height=pe.height[0],J!=null&&(J[0]=pe.width),ce!=null&&(ce[0]=pe.height);e:{if(J=new Wl,(ce=new sA).data=B,ce.w=L,ce.ha=W,ce.kd=1,L=[0],e(ce!=null),((B=Zu(ce.data,ce.w,ce.ha,null,null,null,L,null,ce))==0||B==7)&&L[0]&&(B=4),(L=B)==0){if(e(me!=null),J.data=ce.data,J.w=ce.w+ce.offset,J.ha=ce.ha-ce.offset,J.put=Zt,J.ac=Dt,J.bc=Pr,J.ma=me,ce.xa){if((B=Fa())==null){me=1;break e}if(function(qe,$e){var ot=[0],st=[0],Fe=[0];t:for(;;){if(qe==null)return 0;if($e==null)return qe.a=2,0;if(qe.l=$e,qe.a=0,Q(qe.m,$e.data,$e.w,$e.ha),!_t(qe.m,ot,st,Fe)){qe.a=3;break t}if(qe.xb=r1,$e.width=ot[0],$e.height=st[0],!Bi(ot[0],st[0],1,qe,null))break t;return 1}return e(qe.a!=0),0}(B,J)){if(J=(L=Di(J.width,J.height,me.Oa,me.ba))==0){t:{J=B;r:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((W=J.l)!=null),e((ce=W.ma)!=null),J.xb!=0){if(J.ca=ce.ba,J.tb=ce.tb,e(J.ca!=null),!ws(ce.Oa,W,zp)){J.a=2;break r}if(!Ro(J,W.width)||W.da)break r;if((W.da||ar(J.ca.S))&&Qe(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&Qe()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!Se(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!$r(J,J.V,J.Ba,J.c,J.i,W.o,us))break r;ce.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(L=B.a)}else L=B.a}else{if((B=new Wu)==null){me=1;break e}if(B.Fa=ce.na,B.P=ce.P,B.qc=ce.Sa,wp(B,J)){if((L=Di(J.width,J.height,me.Oa,me.ba))==0){if(B.Aa=0,W=me.Oa,e((ce=B)!=null),W!=null){if(0<(xe=0>(xe=W.Md)?0:100<xe?255:255*xe/100)){for(Ne=ke=0;4>Ne;++Ne)12>(Ge=ce.pb[Ne]).lc&&(Ge.ia=xe*$5[0>Ge.lc?0:Ge.lc]>>3),ke|=Ge.ia;ke&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=W.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}qu(B,J)||(L=B.a)}}else L=B.a}L==0&&me.Oa!=null&&me.Oa.fd&&(L=ed(me.ba))}me=L}he=me!=0?null:11>he?pe.f.RGBA.eb:pe.f.kb.y}else he=null;return he};var c1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,_){for(var k="",D=0;D<4;D++)k+=String.fromCharCode(E[_++]);return k}function d(E,_){return(E[_+0]<<0|E[_+1]<<8|E[_+2]<<16)>>>0}function f(E,_){return(E[_+0]<<0|E[_+1]<<8|E[_+2]<<16|E[_+3]<<24)>>>0}new c;var A=[0],h=[0],m=[],p=new c,g=t,x=function(E,_){var k={},D=0,S=!1,F=0,M=0;if(k.frames=[],!function(K,se,Z,ie){for(var ee=0;ee<ie;ee++)if(K[se+ee]!=Z.charCodeAt(ee))return!0;return!1}(E,_,"RIFF",4)){for(f(E,_+=4),_+=8;_<E.length;){var R=u(E,_),U=f(E,_+=4);_+=4;var z=U+(1&U);switch(R){case"VP8 ":case"VP8L":k.frames[D]===void 0&&(k.frames[D]={}),(q=k.frames[D]).src_off=S?M:_-8,q.src_size=F+U+8,D++,S&&(S=!1,F=0,M=0);break;case"VP8X":(q=k.header={}).feature_flags=E[_];var Q=_+4;q.canvas_width=1+d(E,Q),Q+=3,q.canvas_height=1+d(E,Q),Q+=3;break;case"ALPH":S=!0,F=z+8,M=_-8;break;case"ANIM":(q=k.header).bgcolor=f(E,_),Q=_+4,q.loop_count=(X=E)[($=Q)+0]<<0|X[$+1]<<8,Q+=2;break;case"ANMF":var H,q;(q=k.frames[D]={}).offset_x=2*d(E,_),_+=3,q.offset_y=2*d(E,_),_+=3,q.width=1+d(E,_),_+=3,q.height=1+d(E,_),_+=3,q.duration=d(E,_),_+=3,H=E[_++],q.dispose=1&H,q.blend=H>>1&1}R!="ANMF"&&(_+=z)}var X,$;return k}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var v=x.header?x.header:null,b=x.frames?x.frames:null;if(v){v.loop_counter=v.loop_count,A=[v.canvas_height],h=[v.canvas_width];for(var C=0;C<b.length&&b[C].blend!=0;C++);}var j=b[0],w=p.WebPDecodeRGBA(g,j.src_off,j.src_size,h,A);j.rgba=w,j.imgwidth=h[0],j.imgheight=A[0];for(var N=0;N<h[0]*A[0]*4;N++)m[N]=w[N];return this.width=h,this.height=A,this.data=m,this}(function(t){var e=function(){return typeof t_=="function"},r=function(A,h,m,p){var g=4,x=o;switch(p){case t.image_compression.FAST:g=1,x=i;break;case t.image_compression.MEDIUM:g=6,x=l;break;case t.image_compression.SLOW:g=9,x=c}A=n(A,h,m,x);var v=t_(A,{level:g});return t.__addimage__.arrayBufferToBinaryString(v)},n=function(A,h,m,p){for(var g,x,v,b=A.length/h,C=new Uint8Array(A.length+b),j=d(),w=0;w<b;w+=1){if(v=w*h,g=A.subarray(v,v+h),p)C.set(p(g,m,x),v+w);else{for(var N,E=j.length,_=[];N<E;N+=1)_[N]=j[N](g,m,x);var k=f(_.concat());C.set(_[k],v+w)}x=g}return C},a=function(A){var h=Array.apply([],A);return h.unshift(0),h},i=function(A,h){var m,p=[],g=A.length;p[0]=1;for(var x=0;x<g;x+=1)m=A[x-h]||0,p[x+1]=A[x]-m+256&255;return p},o=function(A,h,m){var p,g=[],x=A.length;g[0]=2;for(var v=0;v<x;v+=1)p=m&&m[v]||0,g[v+1]=A[v]-p+256&255;return g},l=function(A,h,m){var p,g,x=[],v=A.length;x[0]=3;for(var b=0;b<v;b+=1)p=A[b-h]||0,g=m&&m[b]||0,x[b+1]=A[b]+256-(p+g>>>1)&255;return x},c=function(A,h,m){var p,g,x,v,b=[],C=A.length;b[0]=4;for(var j=0;j<C;j+=1)p=A[j-h]||0,g=m&&m[j]||0,x=m&&m[j-h]||0,v=u(p,g,x),b[j+1]=A[j]-v+256&255;return b},u=function(A,h,m){if(A===h&&h===m)return A;var p=Math.abs(h-m),g=Math.abs(A-m),x=Math.abs(A+h-m-m);return p<=g&&p<=x?A:g<=x?h:m},d=function(){return[a,i,o,l,c]},f=function(A){var h=A.map(function(m){return m.reduce(function(p,g){return p+Math.abs(g)},0)});return h.indexOf(Math.min.apply(null,h))};t.processPNG=function(A,h,m,p){var g,x,v,b,C,j,w,N,E,_,k,D,S,F,M,R=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(v=new HWe(A)).imgData,x=v.bits,g=v.colorSpace,C=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){E=(N=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,k=new Uint8Array(E*v.colors),_=new Uint8Array(E);var z,Q=v.pixelBitlength-v.bits;for(F=0,M=0;F<E;F++){for(S=N[F],z=0;z<Q;)k[M++]=S>>>z&255,z+=v.bits;_[F]=S>>>z&255}}if(v.bits===16){E=(N=new Uint32Array(v.decodePixels().buffer)).length,k=new Uint8Array(E*(32/v.pixelBitlength)*v.colors),_=new Uint8Array(E*(32/v.pixelBitlength)),D=v.colors>1,F=0,M=0;for(var H=0;F<E;)S=N[F++],k[M++]=S>>>0&255,D&&(k[M++]=S>>>16&255,S=N[F++],k[M++]=S>>>0&255),_[H++]=S>>>16&255;x=8}p!==t.image_compression.NONE&&e()?(A=r(k,v.width*v.colors,v.colors,p),w=r(_,v.width,1,p)):(A=k,w=_,R=void 0)}if(v.colorType===3&&(g=this.color_spaces.INDEXED,j=v.palette,v.transparency.indexed)){var q=v.transparency.indexed,X=0;for(F=0,E=q.length;F<E;++F)X+=q[F];if((X/=255)===E-1&&q.indexOf(0)!==-1)b=[q.indexOf(0)];else if(X!==E){for(N=v.decodePixels(),_=new Uint8Array(N.length),F=0,E=N.length;F<E;F++)_[F]=q[N[F]];w=r(_,v.width,1)}}var $=function(K){var se;switch(K){case t.image_compression.FAST:se=11;break;case t.image_compression.MEDIUM:se=13;break;case t.image_compression.SLOW:se=14;break;default:se=12}return se}(p);return R===this.decode.FLATE_DECODE&&(U="/Predictor "+$+" "),U+="/Colors "+C+" /BitsPerComponent "+x+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(w&&this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),{alias:m,data:A,index:h,filter:R,decodeParameters:U,transparency:b,palette:j,sMask:w,predictor:$,width:v.width,height:v.height,bitsPerComponent:x,colorSpace:g}}}})(hr.API),function(t){t.processGIF89A=function(e,r,n,a){var i=new QWe(e),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new DT(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(hr.API),oc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Fn.log("bit decode error:"+r)}},oc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},oc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},oc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},oc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},oc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},oc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},oc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},oc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var i=new oc(e,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new DT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(hr.API),M7.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var i=new M7(e),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new DT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(hr.API),hr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];i[l++]=d,i[l++]=f,i[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},hr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Eg=hr.API,pj=Eg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(A=f&&In(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+A)),m=n;return g},k7=Eg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Eg.processArabic&&(t=Eg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:pj.apply(this,arguments).reduce(function(i,o){return i+o},0)},O7=function(t,e,r,n){for(var a=[],i=0,o=t.length,l=0;i!==o&&l+e[i]<r;)l+=e[i],i++;a.push(t.slice(0,i));var c=i;for(l=0;i!==o;)l+e[i]>n&&(a.push(t.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&a.push(t.slice(c,i)),a},F7=function(t,e,r){r||(r={});var n,a,i,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),g=pj.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),v=[];p.map(function(C){(C=C.split(/\s*\n/)).length>1?v=v.concat(C.map(function(j,w){return(w&&j.length?`
`:"")+j})):v.push(C[0])}),p=v,c=k7.apply(this,[x,r])}for(i=0,o=p.length;i<o;i++){var b=0;if(n=p[i],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=pj.apply(this,[n,r])).reduce(function(C,j){return C+j},0))>e||b){if(m>e){for(l=O7.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(C,j){return C+j},0)}else d=[n];f.push(d),A=m+c,h=g}else d.push(n),A+=h+m,h=g}return u=c?function(C,j){return(j?x:"")+C.join(" ")}:function(C){return C.join(" ")},f.map(u)},Eg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(F7.apply(this,[n[l],o,i]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},a=0;a<e.length;a++)r[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=t.__fontmetrics__.compress=function(f){var A,h,m,p,g=["{"];for(var x in f){if(A=f[x],isNaN(parseInt(x,10))?h="'"+x+"'":(x=parseInt(x,10),h=(h=i(x).slice(2)).slice(0,-1)+n[h.slice(-1)]),typeof A=="number")A<0?(m=i(A).slice(3),p="-"):(m=i(A).slice(2),p=""),m=p+m.slice(0,-1)+n[m.slice(-1)];else{if(In(A)!=="object")throw new Error("Don't know what to do with value type "+In(A)+".");m=o(A)}g.push(h+m)}return g.push("}"),g.join("")},l=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,h,m,p,g={},x=1,v=g,b=[],C="",j="",w=f.length-1,N=1;N<w;N+=1)(p=f[N])=="'"?A?(m=A.join(""),A=void 0):A=[]:A?A.push(p):p=="{"?(b.push([v,m]),v={},m=void 0):p=="}"?((h=b.pop())[0][h[1]]=v,m=void 0,v=h[0]):p=="-"?x=-1:m===void 0?r.hasOwnProperty(p)?(C+=r[p],m=parseInt(C,16)*x,x=1,C=""):C+=p:r.hasOwnProperty(p)?(j+=r[p],v[m]=parseInt(j,16)*x,x=1,m=void 0,j=""):j+=p;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var A=f.font,h=d.Unicode[A.postScriptName];h&&(A.metadata.Unicode={},A.metadata.Unicode.widths=h.widths,A.metadata.Unicode.kerning=h.kerning);var m=u.Unicode[A.postScriptName];m&&(A.metadata.Unicode.encoding=m,A.encoding=m.codePages[0])}])}(hr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Eb(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(hr),function(t){function e(){return(gr.canvg?Promise.resolve(gr.canvg):Fh(()=>import("./index.es-CNnC--Et.js"),__vite__mapDeps([2,1,3,4,5]),import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}hr.API.addSvgAsImage=function(r,n,a,i,o,l,c,u){if(isNaN(n)||isNaN(a))throw Fn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Fn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(m){return m.fromString(f,r,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(A)}).then(function(){h.addImage(d.toDataURL("image/jpeg",1),n,a,i,o,c,u)})}}(),hr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},hr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(In(t)==="object"){for(a in t)if(i=t[a],A(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&A(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(hr.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=i.length;f<A;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(i){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(i).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+kg(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+kg(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+kg(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+kg(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+kg(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,g="",x=0,v="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(v=l,p=h,Array.isArray(l)&&(v=l[0]),x=0;x<v.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[v[x].charCodeAt(0)]),o||v[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=v[x]:g+="";var C="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?C=A(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(C=r(g,m[p])),f.isHex=!0,{text:C,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(hr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(hr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,b=0;this.__bidiEngine__={};var C=function(D){var S=D.charCodeAt(),F=S>>8,M=p[F];return M!==void 0?f[256*M+(255&S)]:F===252||F===253?"AL":x.test(F)?"L":F===8?"R":"N"},j=function(D){for(var S,F=0;F<D.length;F++){if((S=C(D.charAt(F)))==="L")return!1;if(S==="R")return!0}return!1},w=function(D,S,F,M){var R,U,z,Q,H=S[M];switch(H){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(H="AN");break;case"AL":v=!0,H="R";break;case"WS":H="N";break;case"CS":M<1||M+1>=S.length||(R=F[M-1])!=="EN"&&R!=="AN"||(U=S[M+1])!=="EN"&&U!=="AN"?H="N":v&&(U="AN"),H=U===R?U:"N";break;case"ES":H=(R=M>0?F[M-1]:"B")==="EN"&&M+1<S.length&&S[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&F[M-1]==="EN"){H="EN";break}if(v){H="N";break}for(z=M+1,Q=S.length;z<Q&&S[z]==="ET";)z++;H=z<Q&&S[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Q=S.length,z=M+1;z<Q&&S[z]==="NSM";)z++;if(z<Q){var q=D[M],X=q>=1425&&q<=2303||q===64286;if(R=S[z],X&&(R==="R"||R==="AL")){H="R";break}}}H=M<1||(R=S[M-1])==="B"?"N":F[M-1];break;case"B":v=!1,a=!0,H=b;break;case"S":i=!0,H="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":H="N"}return H},N=function(D,S,F){var M=D.split("");return F&&E(M,F,{hiLevel:b}),M.reverse(),S&&S.reverse(),M.join("")},E=function(D,S,F){var M,R,U,z,Q,H=-1,q=D.length,X=0,$=[],K=b?h:A,se=[];for(v=!1,a=!1,i=!1,R=0;R<q;R++)se[R]=C(D[R]);for(U=0;U<q;U++){if(Q=X,$[U]=w(D,se,$,U),M=240&(X=K[Q][m[$[U]]]),X&=15,S[U]=z=K[X][5],M>0)if(M===16){for(R=H;R<U;R++)S[R]=1;H=-1}else H=-1;if(K[X][6])H===-1&&(H=U);else if(H>-1){for(R=H;R<U;R++)S[R]=z;H=-1}se[U]==="B"&&(S[U]=0),F.hiLevel|=z}i&&function(Z,ie,ee){for(var ue=0;ue<ee;ue++)if(Z[ue]==="S"){ie[ue]=b;for(var ae=ue-1;ae>=0&&Z[ae]==="WS";ae--)ie[ae]=b}}(se,S,q)},_=function(D,S,F,M,R){if(!(R.hiLevel<D)){if(D===1&&b===1&&!a)return S.reverse(),void(F&&F.reverse());for(var U,z,Q,H,q=S.length,X=0;X<q;){if(M[X]>=D){for(Q=X+1;Q<q&&M[Q]>=D;)Q++;for(H=X,z=Q-1;H<z;H++,z--)U=S[H],S[H]=S[z],S[z]=U,F&&(U=F[H],F[H]=F[z],F[z]=U);X=Q}X++}}},k=function(D,S,F){var M=D.split(""),R={hiLevel:b};return F||(F=[]),E(M,F,R),function(U,z,Q){if(Q.hiLevel!==0&&d)for(var H,q=0;q<U.length;q++)z[q]===1&&(H=g.indexOf(U[q]))>=0&&(U[q]=g[H+1])}(M,F,R),_(2,M,S,F,R),_(1,M,S,F,R),M.join("")};return this.__bidiEngine__.doBidiReorder=function(D,S,F){if(function(R,U){if(U)for(var z=0;z<R.length;z++)U[z]=z;l===void 0&&(l=j(R)),u===void 0&&(u=j(R))}(D,S),o||!c||u)if(o&&c&&l^u)b=l?1:0,D=N(D,S,F);else if(!o&&c&&u)b=l?1:0,D=k(D,S,F),D=N(D,S);else if(!o||l||c||u){if(o&&!c&&l^u)D=N(D,S),l?(b=0,D=k(D,S,F)):(b=1,D=k(D,S,F),D=N(D,S));else if(o&&l&&!c&&u)b=1,D=k(D,S,F),D=N(D,S);else if(!o&&!c&&l^u){var M=d;l?(b=1,D=k(D,S,F),b=0,d=!1,D=k(D,S,F),d=M):(b=0,D=k(D,S,F),D=N(D,S),b=1,d=!1,D=k(D,S,F),d=M,D=N(D,S))}}else b=0,D=k(D,S,F);else b=l?1:0,D=k(D,S,F);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(hr),hr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Mh(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new sGe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zWe(this.contents),this.head=new WWe(this),this.name=new XWe(this),this.cmap=new Cee(this),this.toUnicode={},this.hhea=new GWe(this),this.maxp=new JWe(this),this.hmtx=new ZWe(this),this.post=new KWe(this),this.os2=new qWe(this),this.loca=new nGe(this),this.glyf=new eGe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,i,o,l;for(o=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var _c,Mh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,i,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),zWe=function(){var t;function e(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,i,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new Mh).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),i=16*h,u=a.pos+i,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,i,o;for(r=Nee.call(r);r.length%4;)r.push(0);for(i=new Mh(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},e}(),VWe={}.hasOwnProperty,Qu=function(t,e){for(var r in e)VWe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};_c=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var WWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Mh).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),L7=function(){function t(e,r){var n,a,i,o,l,c,u,d,f,A,h,m,p,g,x,v,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,i=function(){var C,j;for(j=[],c=C=0;0<=A?C<A:C>A;c=0<=A?++C:--C)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var C,j;for(j=[],c=C=0;0<=A?C<A:C>A;c=0<=A?++C:--C)j.push(e.readUInt16());return j}(),u=function(){var C,j;for(j=[],c=C=0;0<=A?C<A:C>A;c=0<=A?++C:--C)j.push(e.readUInt16());return j}(),d=function(){var C,j;for(j=[],c=C=0;0<=A?C<A:C>A;c=0<=A?++C:--C)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var C,j;for(j=[],c=C=0;0<=a?C<a:C>a;c=0<=a?++C:--C)j.push(e.readUInt16());return j}(),c=x=0,b=i.length;x<b;c=++x)for(g=i[c],n=v=m=p[c];m<=g?v<=g:v>=g;n=m<=g?++v:--v)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,i,o,l,c,u,d,f,A,h,m,p,g,x,v,b,C,j,w,N,E,_,k,D,S,F,M,R,U,z,Q,H,q,X,$,K,se,Z,ie,ee,ue,ae,re,fe,G;switch(M=new Mh,o=Object.keys(e).sort(function(oe,Se){return oe-Se}),r){case"macroman":for(p=0,g=function(){var oe=[];for(m=0;m<256;++m)oe.push(0);return oe}(),v={0:0},i={},R=0,H=o.length;R<H;R++)v[ae=e[a=o[R]]]==null&&(v[ae]=++p),i[a]={old:e[a],new:v[e[a]]},g[a]=v[e[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(g),{charMap:i,subtable:M.data,maxGlyphID:p+1};case"unicode":for(S=[],f=[],b=0,v={},n={},x=u=null,U=0,q=o.length;U<q;U++)v[j=e[a=o[U]]]==null&&(v[j]=++b),n[a]={old:j,new:v[j]},l=v[j]-a,x!=null&&l===u||(x&&f.push(x),S.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),S.push(65535),k=2*(_=S.length),E=2*Math.pow(Math.log(_)/Math.LN2,2),A=Math.log(E/2)/Math.LN2,N=2*_-E,c=[],w=[],h=[],m=z=0,X=S.length;z<X;m=++z){if(D=S[m],d=f[m],D===65535){c.push(0),w.push(0);break}if(D-(F=n[D].new)>=32768)for(c.push(0),w.push(2*(h.length+_-m)),a=Q=D;D<=d?Q<=d:Q>=d;a=D<=d?++Q:--Q)h.push(n[a].new);else c.push(F-D),w.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*_+2*h.length),M.writeUInt16(0),M.writeUInt16(k),M.writeUInt16(E),M.writeUInt16(A),M.writeUInt16(N),ee=0,$=f.length;ee<$;ee++)a=f[ee],M.writeUInt16(a);for(M.writeUInt16(0),ue=0,K=S.length;ue<K;ue++)a=S[ue],M.writeUInt16(a);for(re=0,se=c.length;re<se;re++)l=c[re],M.writeUInt16(l);for(fe=0,Z=w.length;fe<Z;fe++)C=w[fe],M.writeUInt16(C);for(G=0,ie=h.length;G<ie;G++)p=h[G],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:b+1}}},t}(),Cee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new L7(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=L7.encode(r,n),(i=new Mh).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},e}(),GWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),qWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),KWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},e}(),YWe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,i,o,l,c,u,d,f,A,h;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,A=a.length;f<A;o=++f)i=a[o],r.pos=i.offset,d=r.readString(i.length),l=new YWe(d,i),u[h=i.nameID]==null&&(u[h]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),JWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),ZWe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,A,h;for(h=[],d=0,f=(A=this.metrics).length;d<f;d++)o=A[d],h.push(o.advance);return h}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)u.push(this.widths.push(a));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Nee=[].slice,eGe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,i,o,l,c,u,d,f,A;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Mh(n.read(i))).readShort(),d=c.readShort(),A=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new rGe(c,d,A,u,f):new tGe(c,l,d,A,u,f),this.cache[r]))},e.prototype.encode=function(r,n,a){var i,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},e}(),tGe=function(){function t(e,r,n,a,i,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),rGe=function(){function t(e,r,n,a,i){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Mh(Nee.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),nGe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qu(e,_c),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<n.length&&n[o]==l){++o,a[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},e}(),sGe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,i,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[i=e[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},t.prototype.encode=function(e,r){var n,a,i,o,l,c,u,d,f,A,h,m,p,g,x;for(a in n=Cee.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},x=n.charMap)h[(c=x[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(v){var b,C;for(b in C={},v)C[v[b]]=b;return C}(h),f=Object.keys(d).sort(function(v,b){return v-b}),p=function(){var v,b,C;for(C=[],v=0,b=f.length;v<b;v++)l=f[v],C.push(d[l]);return C}(),i=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(i.offsets,p),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();hr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+r},e}();const aGe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:FWe,AcroFormAppearance:Jt,AcroFormButton:ga,AcroFormCheckBox:Db,AcroFormChoiceField:gm,AcroFormComboBox:vm,AcroFormEditBox:Bb,AcroFormListBox:xm,AcroFormPasswordField:Ib,AcroFormPushButton:Tb,AcroFormRadioButton:bm,AcroFormTextField:Dh,GState:Vy,ShadingPattern:uh,TilingPattern:im,default:hr,jsPDF:hr},Symbol.toStringTag,{value:"Module"})),iGe=yae(aGe);var IT={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var U7;function oGe(){return U7||(U7=1,function(t,e){(function(r,n){t.exports=n()})(Yo,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(I,T){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(O[Y]=P[Y])},r(I,T)};function n(I,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");r(I,T);function O(){this.constructor=I}I.prototype=T===null?Object.create(T):(O.prototype=T.prototype,new O)}var a=function(){return a=Object.assign||function(T){for(var O,P=1,Y=arguments.length;P<Y;P++){O=arguments[P];for(var ne in O)Object.prototype.hasOwnProperty.call(O,ne)&&(T[ne]=O[ne])}return T},a.apply(this,arguments)};function i(I,T,O,P){function Y(ne){return ne instanceof O?ne:new O(function(Ae){Ae(ne)})}return new(O||(O=Promise))(function(ne,Ae){function Ce(Ue){try{Re(P.next(Ue))}catch(We){Ae(We)}}function je(Ue){try{Re(P.throw(Ue))}catch(We){Ae(We)}}function Re(Ue){Ue.done?ne(Ue.value):Y(Ue.value).then(Ce,je)}Re((P=P.apply(I,[])).next())})}function o(I,T){var O={label:0,sent:function(){if(ne[0]&1)throw ne[1];return ne[1]},trys:[],ops:[]},P,Y,ne,Ae;return Ae={next:Ce(0),throw:Ce(1),return:Ce(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function Ce(Re){return function(Ue){return je([Re,Ue])}}function je(Re){if(P)throw new TypeError("Generator is already executing.");for(;O;)try{if(P=1,Y&&(ne=Re[0]&2?Y.return:Re[0]?Y.throw||((ne=Y.return)&&ne.call(Y),0):Y.next)&&!(ne=ne.call(Y,Re[1])).done)return ne;switch(Y=0,ne&&(Re=[Re[0]&2,ne.value]),Re[0]){case 0:case 1:ne=Re;break;case 4:return O.label++,{value:Re[1],done:!1};case 5:O.label++,Y=Re[1],Re=[0];continue;case 7:Re=O.ops.pop(),O.trys.pop();continue;default:if(ne=O.trys,!(ne=ne.length>0&&ne[ne.length-1])&&(Re[0]===6||Re[0]===2)){O=0;continue}if(Re[0]===3&&(!ne||Re[1]>ne[0]&&Re[1]<ne[3])){O.label=Re[1];break}if(Re[0]===6&&O.label<ne[1]){O.label=ne[1],ne=Re;break}if(ne&&O.label<ne[2]){O.label=ne[2],O.ops.push(Re);break}ne[2]&&O.ops.pop(),O.trys.pop();continue}Re=T.call(I,O)}catch(Ue){Re=[6,Ue],Y=0}finally{P=ne=0}if(Re[0]&5)throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}function l(I,T,O){if(arguments.length===2)for(var P=0,Y=T.length,ne;P<Y;P++)(ne||!(P in T))&&(ne||(ne=Array.prototype.slice.call(T,0,P)),ne[P]=T[P]);return I.concat(ne||T)}for(var c=function(){function I(T,O,P,Y){this.left=T,this.top=O,this.width=P,this.height=Y}return I.prototype.add=function(T,O,P,Y){return new I(this.left+T,this.top+O,this.width+P,this.height+Y)},I.fromClientRect=function(T,O){return new I(O.left+T.windowBounds.left,O.top+T.windowBounds.top,O.width,O.height)},I.fromDOMRectList=function(T,O){var P=Array.from(O).find(function(Y){return Y.width!==0});return P?new I(P.left+T.windowBounds.left,P.top+T.windowBounds.top,P.width,P.height):I.EMPTY},I.EMPTY=new I(0,0,0,0),I}(),u=function(I,T){return c.fromClientRect(I,T.getBoundingClientRect())},d=function(I){var T=I.body,O=I.documentElement;if(!T||!O)throw new Error("Unable to get document size");var P=Math.max(Math.max(T.scrollWidth,O.scrollWidth),Math.max(T.offsetWidth,O.offsetWidth),Math.max(T.clientWidth,O.clientWidth)),Y=Math.max(Math.max(T.scrollHeight,O.scrollHeight),Math.max(T.offsetHeight,O.offsetHeight),Math.max(T.clientHeight,O.clientHeight));return new c(0,0,P,Y)},f=function(I){for(var T=[],O=0,P=I.length;O<P;){var Y=I.charCodeAt(O++);if(Y>=55296&&Y<=56319&&O<P){var ne=I.charCodeAt(O++);(ne&64512)===56320?T.push(((Y&1023)<<10)+(ne&1023)+65536):(T.push(Y),O--)}else T.push(Y)}return T},A=function(){for(var I=[],T=0;T<arguments.length;T++)I[T]=arguments[T];if(String.fromCodePoint)return String.fromCodePoint.apply(String,I);var O=I.length;if(!O)return"";for(var P=[],Y=-1,ne="";++Y<O;){var Ae=I[Y];Ae<=65535?P.push(Ae):(Ae-=65536,P.push((Ae>>10)+55296,Ae%1024+56320)),(Y+1===O||P.length>16384)&&(ne+=String.fromCharCode.apply(String,P),P.length=0)}return ne},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=typeof Uint8Array>"u"?[]:new Uint8Array(256),p=0;p<h.length;p++)m[h.charCodeAt(p)]=p;for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=typeof Uint8Array>"u"?[]:new Uint8Array(256),v=0;v<g.length;v++)x[g.charCodeAt(v)]=v;for(var b=function(I){var T=I.length*.75,O=I.length,P,Y=0,ne,Ae,Ce,je;I[I.length-1]==="="&&(T--,I[I.length-2]==="="&&T--);var Re=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(T):new Array(T),Ue=Array.isArray(Re)?Re:new Uint8Array(Re);for(P=0;P<O;P+=4)ne=x[I.charCodeAt(P)],Ae=x[I.charCodeAt(P+1)],Ce=x[I.charCodeAt(P+2)],je=x[I.charCodeAt(P+3)],Ue[Y++]=ne<<2|Ae>>4,Ue[Y++]=(Ae&15)<<4|Ce>>2,Ue[Y++]=(Ce&3)<<6|je&63;return Re},C=function(I){for(var T=I.length,O=[],P=0;P<T;P+=2)O.push(I[P+1]<<8|I[P]);return O},j=function(I){for(var T=I.length,O=[],P=0;P<T;P+=4)O.push(I[P+3]<<24|I[P+2]<<16|I[P+1]<<8|I[P]);return O},w=5,N=11,E=2,_=N-w,k=65536>>w,D=1<<w,S=D-1,F=1024>>w,M=k+F,R=M,U=32,z=R+U,Q=65536>>N,H=1<<_,q=H-1,X=function(I,T,O){return I.slice?I.slice(T,O):new Uint16Array(Array.prototype.slice.call(I,T,O))},$=function(I,T,O){return I.slice?I.slice(T,O):new Uint32Array(Array.prototype.slice.call(I,T,O))},K=function(I,T){var O=b(I),P=Array.isArray(O)?j(O):new Uint32Array(O),Y=Array.isArray(O)?C(O):new Uint16Array(O),ne=24,Ae=X(Y,ne/2,P[4]/2),Ce=P[5]===2?X(Y,(ne+P[4])/2):$(P,Math.ceil((ne+P[4])/4));return new se(P[0],P[1],P[2],P[3],Ae,Ce)},se=function(){function I(T,O,P,Y,ne,Ae){this.initialValue=T,this.errorValue=O,this.highStart=P,this.highValueIndex=Y,this.index=ne,this.data=Ae}return I.prototype.get=function(T){var O;if(T>=0){if(T<55296||T>56319&&T<=65535)return O=this.index[T>>w],O=(O<<E)+(T&S),this.data[O];if(T<=65535)return O=this.index[k+(T-55296>>w)],O=(O<<E)+(T&S),this.data[O];if(T<this.highStart)return O=z-Q+(T>>N),O=this.index[O],O+=T>>w&q,O=this.index[O],O=(O<<E)+(T&S),this.data[O];if(T<=1114111)return this.data[this.highValueIndex]}return this.errorValue},I}(),Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie=typeof Uint8Array>"u"?[]:new Uint8Array(256),ee=0;ee<Z.length;ee++)ie[Z.charCodeAt(ee)]=ee;var ue="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ae=50,re=1,fe=2,G=3,oe=4,Se=5,ge=7,te=8,ye=9,we=10,be=11,Te=12,Oe=13,Me=14,Ve=15,Pe=16,ze=17,ht=18,gt=19,Ct=20,xt=21,Ie=22,De=23,Je=24,Ke=25,St=26,it=27,Pt=28,dr=29,ar=30,gn=31,ir=32,nn=33,Mt=34,At=35,yt=36,dt=37,Ot=38,Dt=39,Zt=40,Pr=41,_t=42,cn=43,Rr=[9001,65288],Mr="!",Xt="×",Jr="÷",Pn=K(ue),us=[ar,yt],ea=[re,fe,G,Se],Xa=[we,te],ka=[it,St],$r=ea.concat(Xa),Oa=[Ot,Dt,Zt,Mt,At],Fa=[Ve,Oe],Bi=function(I,T){T===void 0&&(T="strict");var O=[],P=[],Y=[];return I.forEach(function(ne,Ae){var Ce=Pn.get(ne);if(Ce>ae?(Y.push(!0),Ce-=ae):Y.push(!1),["normal","auto","loose"].indexOf(T)!==-1&&[8208,8211,12316,12448].indexOf(ne)!==-1)return P.push(Ae),O.push(Pe);if(Ce===oe||Ce===be){if(Ae===0)return P.push(Ae),O.push(ar);var je=O[Ae-1];return $r.indexOf(je)===-1?(P.push(P[Ae-1]),O.push(je)):(P.push(Ae),O.push(ar))}if(P.push(Ae),Ce===gn)return O.push(T==="strict"?xt:dt);if(Ce===_t||Ce===dr)return O.push(ar);if(Ce===cn)return ne>=131072&&ne<=196605||ne>=196608&&ne<=262141?O.push(dt):O.push(ar);O.push(Ce)}),[P,O,Y]},Ro=function(I,T,O,P){var Y=P[O];if(Array.isArray(I)?I.indexOf(Y)!==-1:I===Y)for(var ne=O;ne<=P.length;){ne++;var Ae=P[ne];if(Ae===T)return!0;if(Ae!==we)break}if(Y===we)for(var ne=O;ne>0;){ne--;var Ce=P[ne];if(Array.isArray(I)?I.indexOf(Ce)!==-1:I===Ce)for(var je=O;je<=P.length;){je++;var Ae=P[je];if(Ae===T)return!0;if(Ae!==we)break}if(Ce!==we)break}return!1},zu=function(I,T){for(var O=I;O>=0;){var P=T[O];if(P===we)O--;else return P}return 0},mf=function(I,T,O,P,Y){if(O[P]===0)return Xt;var ne=P-1;if(Array.isArray(Y)&&Y[ne]===!0)return Xt;var Ae=ne-1,Ce=ne+1,je=T[ne],Re=Ae>=0?T[Ae]:0,Ue=T[Ce];if(je===fe&&Ue===G)return Xt;if(ea.indexOf(je)!==-1)return Mr;if(ea.indexOf(Ue)!==-1||Xa.indexOf(Ue)!==-1)return Xt;if(zu(ne,T)===te)return Jr;if(Pn.get(I[ne])===be||(je===ir||je===nn)&&Pn.get(I[Ce])===be||je===ge||Ue===ge||je===ye||[we,Oe,Ve].indexOf(je)===-1&&Ue===ye||[ze,ht,gt,Je,Pt].indexOf(Ue)!==-1||zu(ne,T)===Ie||Ro(De,Ie,ne,T)||Ro([ze,ht],xt,ne,T)||Ro(Te,Te,ne,T))return Xt;if(je===we)return Jr;if(je===De||Ue===De)return Xt;if(Ue===Pe||je===Pe)return Jr;if([Oe,Ve,xt].indexOf(Ue)!==-1||je===Me||Re===yt&&Fa.indexOf(je)!==-1||je===Pt&&Ue===yt||Ue===Ct||us.indexOf(Ue)!==-1&&je===Ke||us.indexOf(je)!==-1&&Ue===Ke||je===it&&[dt,ir,nn].indexOf(Ue)!==-1||[dt,ir,nn].indexOf(je)!==-1&&Ue===St||us.indexOf(je)!==-1&&ka.indexOf(Ue)!==-1||ka.indexOf(je)!==-1&&us.indexOf(Ue)!==-1||[it,St].indexOf(je)!==-1&&(Ue===Ke||[Ie,Ve].indexOf(Ue)!==-1&&T[Ce+1]===Ke)||[Ie,Ve].indexOf(je)!==-1&&Ue===Ke||je===Ke&&[Ke,Pt,Je].indexOf(Ue)!==-1)return Xt;if([Ke,Pt,Je,ze,ht].indexOf(Ue)!==-1)for(var We=ne;We>=0;){var ct=T[We];if(ct===Ke)return Xt;if([Pt,Je].indexOf(ct)!==-1)We--;else break}if([it,St].indexOf(Ue)!==-1)for(var We=[ze,ht].indexOf(je)!==-1?Ae:ne;We>=0;){var ct=T[We];if(ct===Ke)return Xt;if([Pt,Je].indexOf(ct)!==-1)We--;else break}if(Ot===je&&[Ot,Dt,Mt,At].indexOf(Ue)!==-1||[Dt,Mt].indexOf(je)!==-1&&[Dt,Zt].indexOf(Ue)!==-1||[Zt,At].indexOf(je)!==-1&&Ue===Zt||Oa.indexOf(je)!==-1&&[Ct,St].indexOf(Ue)!==-1||Oa.indexOf(Ue)!==-1&&je===it||us.indexOf(je)!==-1&&us.indexOf(Ue)!==-1||je===Je&&us.indexOf(Ue)!==-1||us.concat(Ke).indexOf(je)!==-1&&Ue===Ie&&Rr.indexOf(I[Ce])===-1||us.concat(Ke).indexOf(Ue)!==-1&&je===ht)return Xt;if(je===Pr&&Ue===Pr){for(var Gt=O[ne],kt=1;Gt>0&&(Gt--,T[Gt]===Pr);)kt++;if(kt%2!==0)return Xt}return je===ir&&Ue===nn?Xt:Jr},pf=function(I,T){T||(T={lineBreak:"normal",wordBreak:"normal"});var O=Bi(I,T.lineBreak),P=O[0],Y=O[1],ne=O[2];(T.wordBreak==="break-all"||T.wordBreak==="break-word")&&(Y=Y.map(function(Ce){return[Ke,ar,_t].indexOf(Ce)!==-1?dt:Ce}));var Ae=T.wordBreak==="keep-all"?ne.map(function(Ce,je){return Ce&&I[je]>=19968&&I[je]<=40959}):void 0;return[P,Y,Ae]},gf=function(){function I(T,O,P,Y){this.codePoints=T,this.required=O===Mr,this.start=P,this.end=Y}return I.prototype.slice=function(){return A.apply(void 0,this.codePoints.slice(this.start,this.end))},I}(),vp=function(I,T){var O=f(I),P=pf(O,T),Y=P[0],ne=P[1],Ae=P[2],Ce=O.length,je=0,Re=0;return{next:function(){if(Re>=Ce)return{done:!0,value:null};for(var Ue=Xt;Re<Ce&&(Ue=mf(O,ne,Y,++Re,Ae))===Xt;);if(Ue!==Xt||Re===Ce){var We=new gf(O,Ue,je,Re);return je=Re,{value:We,done:!1}}return{done:!0,value:null}}}},Jx=1,Zx=2,ll=4,eA=8,xf=10,vf=47,Vu=92,bp=9,ev=32,Wl=34,Wu=61,ys=35,yp=36,wp=37,Gu=39,Pc=40,qu=41,Mo=95,zs=45,Ja=33,tA=60,jp=62,tv=64,Cp=91,rv=93,Np=61,nv=123,kc=63,sv=125,Sp=124,av=126,Gl=128,Ku=65533,Oc=42,cl=43,ja=44,iv=58,Ep=59,fr=46,ov=0,lv=8,ul=11,Bp=14,Tp=31,bf=127,Za=-1,Dp=48,Ip=97,_p=101,rA=102,Yu=117,Fc=122,Pp=65,Rc=69,yf=70,wf=85,kp=90,Vs=function(I){return I>=Dp&&I<=57},Op=function(I){return I>=55296&&I<=57343},ql=function(I){return Vs(I)||I>=Pp&&I<=yf||I>=Ip&&I<=rA},dl=function(I){return I>=Ip&&I<=Fc},Kl=function(I){return I>=Pp&&I<=kp},cv=function(I){return dl(I)||Kl(I)},Mc=function(I){return I>=Gl},ei=function(I){return I===xf||I===bp||I===ev},Lc=function(I){return cv(I)||Mc(I)||I===Mo},Uc=function(I){return Lc(I)||Vs(I)||I===zs},uv=function(I){return I>=ov&&I<=lv||I===ul||I>=Bp&&I<=Tp||I===bf},Ti=function(I,T){return I!==Vu?!1:T!==xf},jf=function(I,T,O){return I===zs?Lc(T)||Ti(T,O):Lc(I)?!0:!!(I===Vu&&Ti(I,T))},Xu=function(I,T,O){return I===cl||I===zs?Vs(T)?!0:T===fr&&Vs(O):Vs(I===fr?T:I)},nA=function(I){var T=0,O=1;(I[T]===cl||I[T]===zs)&&(I[T]===zs&&(O=-1),T++);for(var P=[];Vs(I[T]);)P.push(I[T++]);var Y=P.length?parseInt(A.apply(void 0,P),10):0;I[T]===fr&&T++;for(var ne=[];Vs(I[T]);)ne.push(I[T++]);var Ae=ne.length,Ce=Ae?parseInt(A.apply(void 0,ne),10):0;(I[T]===Rc||I[T]===_p)&&T++;var je=1;(I[T]===cl||I[T]===zs)&&(I[T]===zs&&(je=-1),T++);for(var Re=[];Vs(I[T]);)Re.push(I[T++]);var Ue=Re.length?parseInt(A.apply(void 0,Re),10):0;return O*(Y+Ce*Math.pow(10,-Ae))*Math.pow(10,je*Ue)},Fp={type:2},Cf={type:3},sA={type:4},aA={type:13},Rp={type:8},dv={type:21},Nf={type:9},Ju={type:10},iA={type:11},$c={type:12},oA={type:14},V={type:23},de={type:1},Be={type:25},_e={type:24},Qe={type:26},lt={type:27},Et={type:28},$t={type:29},or={type:31},br={type:32},yr=function(){function I(){this._value=[]}return I.prototype.write=function(T){this._value=this._value.concat(f(T))},I.prototype.read=function(){for(var T=[],O=this.consumeToken();O!==br;)T.push(O),O=this.consumeToken();return T},I.prototype.consumeToken=function(){var T=this.consumeCodePoint();switch(T){case Wl:return this.consumeStringToken(Wl);case ys:var O=this.peekCodePoint(0),P=this.peekCodePoint(1),Y=this.peekCodePoint(2);if(Uc(O)||Ti(P,Y)){var ne=jf(O,P,Y)?Zx:Jx,Ae=this.consumeName();return{type:5,value:Ae,flags:ne}}break;case yp:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),aA;break;case Gu:return this.consumeStringToken(Gu);case Pc:return Fp;case qu:return Cf;case Oc:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),oA;break;case cl:if(Xu(T,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(T),this.consumeNumericToken();break;case ja:return sA;case zs:var Ce=T,je=this.peekCodePoint(0),Re=this.peekCodePoint(1);if(Xu(Ce,je,Re))return this.reconsumeCodePoint(T),this.consumeNumericToken();if(jf(Ce,je,Re))return this.reconsumeCodePoint(T),this.consumeIdentLikeToken();if(je===zs&&Re===jp)return this.consumeCodePoint(),this.consumeCodePoint(),_e;break;case fr:if(Xu(T,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(T),this.consumeNumericToken();break;case vf:if(this.peekCodePoint(0)===Oc)for(this.consumeCodePoint();;){var Ue=this.consumeCodePoint();if(Ue===Oc&&(Ue=this.consumeCodePoint(),Ue===vf))return this.consumeToken();if(Ue===Za)return this.consumeToken()}break;case iv:return Qe;case Ep:return lt;case tA:if(this.peekCodePoint(0)===Ja&&this.peekCodePoint(1)===zs&&this.peekCodePoint(2)===zs)return this.consumeCodePoint(),this.consumeCodePoint(),Be;break;case tv:var We=this.peekCodePoint(0),ct=this.peekCodePoint(1),Gt=this.peekCodePoint(2);if(jf(We,ct,Gt)){var Ae=this.consumeName();return{type:7,value:Ae}}break;case Cp:return Et;case Vu:if(Ti(T,this.peekCodePoint(0)))return this.reconsumeCodePoint(T),this.consumeIdentLikeToken();break;case rv:return $t;case Np:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),Rp;break;case nv:return iA;case sv:return $c;case Yu:case wf:var kt=this.peekCodePoint(0),Ut=this.peekCodePoint(1);return kt===cl&&(ql(Ut)||Ut===kc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(T),this.consumeIdentLikeToken();case Sp:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),Nf;if(this.peekCodePoint(0)===Sp)return this.consumeCodePoint(),dv;break;case av:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),Ju;break;case Za:return br}return ei(T)?(this.consumeWhiteSpace(),or):Vs(T)?(this.reconsumeCodePoint(T),this.consumeNumericToken()):Lc(T)?(this.reconsumeCodePoint(T),this.consumeIdentLikeToken()):{type:6,value:A(T)}},I.prototype.consumeCodePoint=function(){var T=this._value.shift();return typeof T>"u"?-1:T},I.prototype.reconsumeCodePoint=function(T){this._value.unshift(T)},I.prototype.peekCodePoint=function(T){return T>=this._value.length?-1:this._value[T]},I.prototype.consumeUnicodeRangeToken=function(){for(var T=[],O=this.consumeCodePoint();ql(O)&&T.length<6;)T.push(O),O=this.consumeCodePoint();for(var P=!1;O===kc&&T.length<6;)T.push(O),O=this.consumeCodePoint(),P=!0;if(P){var Y=parseInt(A.apply(void 0,T.map(function(je){return je===kc?Dp:je})),16),ne=parseInt(A.apply(void 0,T.map(function(je){return je===kc?yf:je})),16);return{type:30,start:Y,end:ne}}var Ae=parseInt(A.apply(void 0,T),16);if(this.peekCodePoint(0)===zs&&ql(this.peekCodePoint(1))){this.consumeCodePoint(),O=this.consumeCodePoint();for(var Ce=[];ql(O)&&Ce.length<6;)Ce.push(O),O=this.consumeCodePoint();var ne=parseInt(A.apply(void 0,Ce),16);return{type:30,start:Ae,end:ne}}else return{type:30,start:Ae,end:Ae}},I.prototype.consumeIdentLikeToken=function(){var T=this.consumeName();return T.toLowerCase()==="url"&&this.peekCodePoint(0)===Pc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Pc?(this.consumeCodePoint(),{type:19,value:T}):{type:20,value:T}},I.prototype.consumeUrlToken=function(){var T=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Za)return{type:22,value:""};var O=this.peekCodePoint(0);if(O===Gu||O===Wl){var P=this.consumeStringToken(this.consumeCodePoint());return P.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Za||this.peekCodePoint(0)===qu)?(this.consumeCodePoint(),{type:22,value:P.value}):(this.consumeBadUrlRemnants(),V)}for(;;){var Y=this.consumeCodePoint();if(Y===Za||Y===qu)return{type:22,value:A.apply(void 0,T)};if(ei(Y))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Za||this.peekCodePoint(0)===qu?(this.consumeCodePoint(),{type:22,value:A.apply(void 0,T)}):(this.consumeBadUrlRemnants(),V);if(Y===Wl||Y===Gu||Y===Pc||uv(Y))return this.consumeBadUrlRemnants(),V;if(Y===Vu)if(Ti(Y,this.peekCodePoint(0)))T.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),V;else T.push(Y)}},I.prototype.consumeWhiteSpace=function(){for(;ei(this.peekCodePoint(0));)this.consumeCodePoint()},I.prototype.consumeBadUrlRemnants=function(){for(;;){var T=this.consumeCodePoint();if(T===qu||T===Za)return;Ti(T,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},I.prototype.consumeStringSlice=function(T){for(var O=5e4,P="";T>0;){var Y=Math.min(O,T);P+=A.apply(void 0,this._value.splice(0,Y)),T-=Y}return this._value.shift(),P},I.prototype.consumeStringToken=function(T){var O="",P=0;do{var Y=this._value[P];if(Y===Za||Y===void 0||Y===T)return O+=this.consumeStringSlice(P),{type:0,value:O};if(Y===xf)return this._value.splice(0,P),de;if(Y===Vu){var ne=this._value[P+1];ne!==Za&&ne!==void 0&&(ne===xf?(O+=this.consumeStringSlice(P),P=-1,this._value.shift()):Ti(Y,ne)&&(O+=this.consumeStringSlice(P),O+=A(this.consumeEscapedCodePoint()),P=-1))}P++}while(!0)},I.prototype.consumeNumber=function(){var T=[],O=ll,P=this.peekCodePoint(0);for((P===cl||P===zs)&&T.push(this.consumeCodePoint());Vs(this.peekCodePoint(0));)T.push(this.consumeCodePoint());P=this.peekCodePoint(0);var Y=this.peekCodePoint(1);if(P===fr&&Vs(Y))for(T.push(this.consumeCodePoint(),this.consumeCodePoint()),O=eA;Vs(this.peekCodePoint(0));)T.push(this.consumeCodePoint());P=this.peekCodePoint(0),Y=this.peekCodePoint(1);var ne=this.peekCodePoint(2);if((P===Rc||P===_p)&&((Y===cl||Y===zs)&&Vs(ne)||Vs(Y)))for(T.push(this.consumeCodePoint(),this.consumeCodePoint()),O=eA;Vs(this.peekCodePoint(0));)T.push(this.consumeCodePoint());return[nA(T),O]},I.prototype.consumeNumericToken=function(){var T=this.consumeNumber(),O=T[0],P=T[1],Y=this.peekCodePoint(0),ne=this.peekCodePoint(1),Ae=this.peekCodePoint(2);if(jf(Y,ne,Ae)){var Ce=this.consumeName();return{type:15,number:O,flags:P,unit:Ce}}return Y===wp?(this.consumeCodePoint(),{type:16,number:O,flags:P}):{type:17,number:O,flags:P}},I.prototype.consumeEscapedCodePoint=function(){var T=this.consumeCodePoint();if(ql(T)){for(var O=A(T);ql(this.peekCodePoint(0))&&O.length<6;)O+=A(this.consumeCodePoint());ei(this.peekCodePoint(0))&&this.consumeCodePoint();var P=parseInt(O,16);return P===0||Op(P)||P>1114111?Ku:P}return T===Za?Ku:T},I.prototype.consumeName=function(){for(var T="";;){var O=this.consumeCodePoint();if(Uc(O))T+=A(O);else if(Ti(O,this.peekCodePoint(0)))T+=A(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(O),T}},I}(),zr=function(){function I(T){this._tokens=T}return I.create=function(T){var O=new yr;return O.write(T),new I(O.read())},I.parseValue=function(T){return I.create(T).parseComponentValue()},I.parseValues=function(T){return I.create(T).parseComponentValues()},I.prototype.parseComponentValue=function(){for(var T=this.consumeToken();T.type===31;)T=this.consumeToken();if(T.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(T);var O=this.consumeComponentValue();do T=this.consumeToken();while(T.type===31);if(T.type===32)return O;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},I.prototype.parseComponentValues=function(){for(var T=[];;){var O=this.consumeComponentValue();if(O.type===32)return T;T.push(O),T.push()}},I.prototype.consumeComponentValue=function(){var T=this.consumeToken();switch(T.type){case 11:case 28:case 2:return this.consumeSimpleBlock(T.type);case 19:return this.consumeFunction(T)}return T},I.prototype.consumeSimpleBlock=function(T){for(var O={type:T,values:[]},P=this.consumeToken();;){if(P.type===32||Mp(P,T))return O;this.reconsumeToken(P),O.values.push(this.consumeComponentValue()),P=this.consumeToken()}},I.prototype.consumeFunction=function(T){for(var O={name:T.value,values:[],type:18};;){var P=this.consumeToken();if(P.type===32||P.type===3)return O;this.reconsumeToken(P),O.values.push(this.consumeComponentValue())}},I.prototype.consumeToken=function(){var T=this._tokens.shift();return typeof T>"u"?br:T},I.prototype.reconsumeToken=function(T){this._tokens.unshift(T)},I}(),jn=function(I){return I.type===15},Cn=function(I){return I.type===17},pr=function(I){return I.type===20},Ca=function(I){return I.type===0},Os=function(I,T){return pr(I)&&I.value===T},oo=function(I){return I.type!==31},ta=function(I){return I.type!==31&&I.type!==4},Ws=function(I){var T=[],O=[];return I.forEach(function(P){if(P.type===4){if(O.length===0)throw new Error("Error parsing function args, zero tokens for arg");T.push(O),O=[];return}P.type!==31&&O.push(P)}),O.length&&T.push(O),T},Mp=function(I,T){return T===11&&I.type===12||T===28&&I.type===29?!0:T===2&&I.type===3},lo=function(I){return I.type===17||I.type===15},Vn=function(I){return I.type===16||lo(I)},Zu=function(I){return I.length>1?[I[0],I[1]]:[I[0]]},ws={type:17,number:0,flags:ll},ed={type:16,number:50,flags:ll},Di={type:16,number:100,flags:ll},js=function(I,T,O){var P=I[0],Y=I[1];return[sn(P,T),sn(typeof Y<"u"?Y:P,O)]},sn=function(I,T){if(I.type===16)return I.number/100*T;if(jn(I))switch(I.unit){case"rem":case"em":return 16*I.number;case"px":default:return I.number}return I.number},td="deg",rd="grad",Sf="rad",Ra="turn",Ef={name:"angle",parse:function(I,T){if(T.type===15)switch(T.unit){case td:return Math.PI*T.number/180;case rd:return Math.PI/200*T.number;case Sf:return T.number;case Ra:return Math.PI*2*T.number}throw new Error("Unsupported angle type")}},Bf=function(I){return I.type===15&&(I.unit===td||I.unit===rd||I.unit===Sf||I.unit===Ra)},lA=function(I){var T=I.filter(pr).map(function(O){return O.value}).join(" ");switch(T){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ws,ws];case"to top":case"bottom":return ts(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ws,Di];case"to right":case"left":return ts(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Di,Di];case"to bottom":case"top":return ts(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Di,ws];case"to left":case"right":return ts(270)}return 0},ts=function(I){return Math.PI*I/180},Ii={name:"color",parse:function(I,T){if(T.type===18){var O=Xl[T.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported color function "'+T.name+'"');return O(I,T.values)}if(T.type===5){if(T.value.length===3){var P=T.value.substring(0,1),Y=T.value.substring(1,2),ne=T.value.substring(2,3);return Ma(parseInt(P+P,16),parseInt(Y+Y,16),parseInt(ne+ne,16),1)}if(T.value.length===4){var P=T.value.substring(0,1),Y=T.value.substring(1,2),ne=T.value.substring(2,3),Ae=T.value.substring(3,4);return Ma(parseInt(P+P,16),parseInt(Y+Y,16),parseInt(ne+ne,16),parseInt(Ae+Ae,16)/255)}if(T.value.length===6){var P=T.value.substring(0,2),Y=T.value.substring(2,4),ne=T.value.substring(4,6);return Ma(parseInt(P,16),parseInt(Y,16),parseInt(ne,16),1)}if(T.value.length===8){var P=T.value.substring(0,2),Y=T.value.substring(2,4),ne=T.value.substring(4,6),Ae=T.value.substring(6,8);return Ma(parseInt(P,16),parseInt(Y,16),parseInt(ne,16),parseInt(Ae,16)/255)}}if(T.type===20){var Ce=ti[T.value.toUpperCase()];if(typeof Ce<"u")return Ce}return ti.TRANSPARENT}},Lo=function(I){return(255&I)===0},Cs=function(I){var T=255&I,O=255&I>>8,P=255&I>>16,Y=255&I>>24;return T<255?"rgba("+Y+","+P+","+O+","+T/255+")":"rgb("+Y+","+P+","+O+")"},Ma=function(I,T,O,P){return(I<<24|T<<16|O<<8|Math.round(P*255)<<0)>>>0},Hc=function(I,T){if(I.type===17)return I.number;if(I.type===16){var O=T===3?1:255;return T===3?I.number/100*O:Math.round(I.number/100*O)}return 0},La=function(I,T){var O=T.filter(ta);if(O.length===3){var P=O.map(Hc),Y=P[0],ne=P[1],Ae=P[2];return Ma(Y,ne,Ae,1)}if(O.length===4){var Ce=O.map(Hc),Y=Ce[0],ne=Ce[1],Ae=Ce[2],je=Ce[3];return Ma(Y,ne,Ae,je)}return 0};function Aa(I,T,O){return O<0&&(O+=1),O>=1&&(O-=1),O<1/6?(T-I)*O*6+I:O<1/2?T:O<2/3?(T-I)*6*(2/3-O)+I:I}var Yl=function(I,T){var O=T.filter(ta),P=O[0],Y=O[1],ne=O[2],Ae=O[3],Ce=(P.type===17?ts(P.number):Ef.parse(I,P))/(Math.PI*2),je=Vn(Y)?Y.number/100:0,Re=Vn(ne)?ne.number/100:0,Ue=typeof Ae<"u"&&Vn(Ae)?sn(Ae,1):1;if(je===0)return Ma(Re*255,Re*255,Re*255,1);var We=Re<=.5?Re*(je+1):Re+je-Re*je,ct=Re*2-We,Gt=Aa(ct,We,Ce+1/3),kt=Aa(ct,We,Ce),Ut=Aa(ct,We,Ce-1/3);return Ma(Gt*255,kt*255,Ut*255,Ue)},Xl={hsl:Yl,hsla:Yl,rgb:La,rgba:La},_i=function(I,T){return Ii.parse(I,zr.create(T).parseComponentValue())},ti={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Jl={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(I,T){return T.map(function(O){if(pr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ns={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qc=function(I,T){var O=Ii.parse(I,T[0]),P=T[1];return P&&Vn(P)?{color:O,stop:P}:{color:O,stop:null}},Na=function(I,T){var O=I[0],P=I[I.length-1];O.stop===null&&(O.stop=ws),P.stop===null&&(P.stop=Di);for(var Y=[],ne=0,Ae=0;Ae<I.length;Ae++){var Ce=I[Ae].stop;if(Ce!==null){var je=sn(Ce,T);je>ne?Y.push(je):Y.push(ne),ne=je}else Y.push(null)}for(var Re=null,Ae=0;Ae<Y.length;Ae++){var Ue=Y[Ae];if(Ue===null)Re===null&&(Re=Ae);else if(Re!==null){for(var We=Ae-Re,ct=Y[Re-1],Gt=(Ue-ct)/(We+1),kt=1;kt<=We;kt++)Y[Re+kt-1]=Gt*kt;Re=null}}return I.map(function(Ut,kr){var sr=Ut.color;return{color:sr,stop:Math.max(Math.min(1,Y[kr]/T),0)}})},co=function(I,T,O){var P=T/2,Y=O/2,ne=sn(I[0],T)-P,Ae=Y-sn(I[1],O);return(Math.atan2(Ae,ne)+Math.PI*2)%(Math.PI*2)},Tf=function(I,T,O){var P=typeof I=="number"?I:co(I,T,O),Y=Math.abs(T*Math.sin(P))+Math.abs(O*Math.cos(P)),ne=T/2,Ae=O/2,Ce=Y/2,je=Math.sin(P-Math.PI/2)*Ce,Re=Math.cos(P-Math.PI/2)*Ce;return[Y,ne-Re,ne+Re,Ae-je,Ae+je]},ri=function(I,T){return Math.sqrt(I*I+T*T)},Df=function(I,T,O,P,Y){var ne=[[0,0],[0,T],[I,0],[I,T]];return ne.reduce(function(Ae,Ce){var je=Ce[0],Re=Ce[1],Ue=ri(O-je,P-Re);return(Y?Ue<Ae.optimumDistance:Ue>Ae.optimumDistance)?{optimumCorner:Ce,optimumDistance:Ue}:Ae},{optimumDistance:Y?1/0:-1/0,optimumCorner:null}).optimumCorner},nd=function(I,T,O,P,Y){var ne=0,Ae=0;switch(I.size){case 0:I.shape===0?ne=Ae=Math.min(Math.abs(T),Math.abs(T-P),Math.abs(O),Math.abs(O-Y)):I.shape===1&&(ne=Math.min(Math.abs(T),Math.abs(T-P)),Ae=Math.min(Math.abs(O),Math.abs(O-Y)));break;case 2:if(I.shape===0)ne=Ae=Math.min(ri(T,O),ri(T,O-Y),ri(T-P,O),ri(T-P,O-Y));else if(I.shape===1){var Ce=Math.min(Math.abs(O),Math.abs(O-Y))/Math.min(Math.abs(T),Math.abs(T-P)),je=Df(P,Y,T,O,!0),Re=je[0],Ue=je[1];ne=ri(Re-T,(Ue-O)/Ce),Ae=Ce*ne}break;case 1:I.shape===0?ne=Ae=Math.max(Math.abs(T),Math.abs(T-P),Math.abs(O),Math.abs(O-Y)):I.shape===1&&(ne=Math.max(Math.abs(T),Math.abs(T-P)),Ae=Math.max(Math.abs(O),Math.abs(O-Y)));break;case 3:if(I.shape===0)ne=Ae=Math.max(ri(T,O),ri(T,O-Y),ri(T-P,O),ri(T-P,O-Y));else if(I.shape===1){var Ce=Math.max(Math.abs(O),Math.abs(O-Y))/Math.max(Math.abs(T),Math.abs(T-P)),We=Df(P,Y,T,O,!1),Re=We[0],Ue=We[1];ne=ri(Re-T,(Ue-O)/Ce),Ae=Ce*ne}break}return Array.isArray(I.size)&&(ne=sn(I.size[0],P),Ae=I.size.length===2?sn(I.size[1],Y):ne),[ne,Ae]},sd=function(I,T){var O=ts(180),P=[];return Ws(T).forEach(function(Y,ne){if(ne===0){var Ae=Y[0];if(Ae.type===20&&Ae.value==="to"){O=lA(Y);return}else if(Bf(Ae)){O=Ef.parse(I,Ae);return}}var Ce=Qc(I,Y);P.push(Ce)}),{angle:O,stops:P,type:1}},Uo=function(I,T){var O=ts(180),P=[];return Ws(T).forEach(function(Y,ne){if(ne===0){var Ae=Y[0];if(Ae.type===20&&["top","left","right","bottom"].indexOf(Ae.value)!==-1){O=lA(Y);return}else if(Bf(Ae)){O=(Ef.parse(I,Ae)+ts(270))%ts(360);return}}var Ce=Qc(I,Y);P.push(Ce)}),{angle:O,stops:P,type:1}},ad=function(I,T){var O=ts(180),P=[],Y=1,ne=0,Ae=3,Ce=[];return Ws(T).forEach(function(je,Re){var Ue=je[0];if(Re===0){if(pr(Ue)&&Ue.value==="linear"){Y=1;return}else if(pr(Ue)&&Ue.value==="radial"){Y=2;return}}if(Ue.type===18){if(Ue.name==="from"){var We=Ii.parse(I,Ue.values[0]);P.push({stop:ws,color:We})}else if(Ue.name==="to"){var We=Ii.parse(I,Ue.values[0]);P.push({stop:Di,color:We})}else if(Ue.name==="color-stop"){var ct=Ue.values.filter(ta);if(ct.length===2){var We=Ii.parse(I,ct[1]),Gt=ct[0];Cn(Gt)&&P.push({stop:{type:16,number:Gt.number*100,flags:Gt.flags},color:We})}}}}),Y===1?{angle:(O+ts(180))%ts(360),stops:P,type:Y}:{size:Ae,shape:ne,stops:P,position:Ce,type:Y}},id="closest-side",zc="farthest-side",Zl="closest-corner",If="farthest-corner",Pi="circle",ki="ellipse",Nn="cover",Sn="contain",Ss=function(I,T){var O=0,P=3,Y=[],ne=[];return Ws(T).forEach(function(Ae,Ce){var je=!0;if(Ce===0){var Re=!1;je=Ae.reduce(function(We,ct){if(Re)if(pr(ct))switch(ct.value){case"center":return ne.push(ed),We;case"top":case"left":return ne.push(ws),We;case"right":case"bottom":return ne.push(Di),We}else(Vn(ct)||lo(ct))&&ne.push(ct);else if(pr(ct))switch(ct.value){case Pi:return O=0,!1;case ki:return O=1,!1;case"at":return Re=!0,!1;case id:return P=0,!1;case Nn:case zc:return P=1,!1;case Sn:case Zl:return P=2,!1;case If:return P=3,!1}else if(lo(ct)||Vn(ct))return Array.isArray(P)||(P=[]),P.push(ct),!1;return We},je)}if(je){var Ue=Qc(I,Ae);Y.push(Ue)}}),{size:P,shape:O,stops:Y,position:ne,type:2}},ds=function(I,T){var O=0,P=3,Y=[],ne=[];return Ws(T).forEach(function(Ae,Ce){var je=!0;if(Ce===0?je=Ae.reduce(function(Ue,We){if(pr(We))switch(We.value){case"center":return ne.push(ed),!1;case"top":case"left":return ne.push(ws),!1;case"right":case"bottom":return ne.push(Di),!1}else if(Vn(We)||lo(We))return ne.push(We),!1;return Ue},je):Ce===1&&(je=Ae.reduce(function(Ue,We){if(pr(We))switch(We.value){case Pi:return O=0,!1;case ki:return O=1,!1;case Sn:case id:return P=0,!1;case zc:return P=1,!1;case Zl:return P=2,!1;case Nn:case If:return P=3,!1}else if(lo(We)||Vn(We))return Array.isArray(P)||(P=[]),P.push(We),!1;return Ue},je)),je){var Re=Qc(I,Ae);Y.push(Re)}}),{size:P,shape:O,stops:Y,position:ne,type:2}},ec=function(I){return I.type===1},cA=function(I){return I.type===2},Vc={name:"image",parse:function(I,T){if(T.type===22){var O={url:T.value,type:0};return I.cache.addImage(T.value),O}if(T.type===18){var P=Up[T.name];if(typeof P>"u")throw new Error('Attempting to parse an unsupported image function "'+T.name+'"');return P(I,T.values)}throw new Error("Unsupported image type "+T.type)}};function Lp(I){return!(I.type===20&&I.value==="none")&&(I.type!==18||!!Up[I.name])}var Up={"linear-gradient":sd,"-moz-linear-gradient":Uo,"-ms-linear-gradient":Uo,"-o-linear-gradient":Uo,"-webkit-linear-gradient":Uo,"radial-gradient":Ss,"-moz-radial-gradient":ds,"-ms-radial-gradient":ds,"-o-radial-gradient":ds,"-webkit-radial-gradient":ds,"-webkit-gradient":ad},$p={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(I,T){if(T.length===0)return[];var O=T[0];return O.type===20&&O.value==="none"?[]:T.filter(function(P){return ta(P)&&Lp(P)}).map(function(P){return Vc.parse(I,P)})}},Oi={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(I,T){return T.map(function(O){if(pr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uo={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(I,T){return Ws(T).map(function(O){return O.filter(Vn)}).map(Zu)}},Hp={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(I,T){return Ws(T).map(function(O){return O.filter(pr).map(function(P){return P.value}).join(" ")}).map(Qp)}},Qp=function(I){switch(I){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},od;(function(I){I.AUTO="auto",I.CONTAIN="contain",I.COVER="cover"})(od||(od={}));var zp={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(I,T){return Ws(T).map(function(O){return O.filter(Vp)})}},Vp=function(I){return pr(I)||Vn(I)},_f=function(I){return{name:"border-"+I+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Zw=_f("top"),fv=_f("right"),hv=_f("bottom"),Wp=_f("left"),Pf=function(I){return{name:"border-radius-"+I,initialValue:"0 0",prefix:!1,type:1,parse:function(T,O){return Zu(O.filter(Vn))}}},v5=Pf("top-left"),b5=Pf("top-right"),e1=Pf("bottom-right"),y5=Pf("bottom-left"),Gp=function(I){return{name:"border-"+I+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(T,O){switch(O){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w5=Gp("top"),j5=Gp("right"),C5=Gp("bottom"),Av=Gp("left"),kf=function(I){return{name:"border-"+I+"-width",initialValue:"0",type:0,prefix:!1,parse:function(T,O){return jn(O)?O.number:0}}},uA=kf("top"),N5=kf("right"),S5=kf("bottom"),t1=kf("left"),E5={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B5={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(I,T){switch(T){case"rtl":return 1;case"ltr":default:return 0}}},T5={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(I,T){return T.filter(pr).reduce(function(O,P){return O|D5(P.value)},0)}},D5=function(I){switch(I){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Wc={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(I,T){switch(T){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$o={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(I,T){return T.type===20&&T.value==="normal"?0:T.type===17||T.type===15?T.number:0}},fo;(function(I){I.NORMAL="normal",I.STRICT="strict"})(fo||(fo={}));var I5={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(I,T){switch(T){case"strict":return fo.STRICT;case"normal":default:return fo.NORMAL}}},r1={name:"line-height",initialValue:"normal",prefix:!1,type:4},tc=function(I,T){return pr(I)&&I.value==="normal"?1.2*T:I.type===17?T*I.number:Vn(I)?sn(I,T):T},ho={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(I,T){return T.type===20&&T.value==="none"?null:Vc.parse(I,T)}},_5={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(I,T){switch(T){case"inside":return 0;case"outside":default:return 1}}},mv={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(I,T){switch(T){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},dA=function(I){return{name:"margin-"+I,initialValue:"0",prefix:!1,type:4}},n1=dA("top"),s1=dA("right"),a1=dA("bottom"),P5=dA("left"),qp={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(I,T){return T.filter(pr).map(function(O){switch(O.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Kp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(I,T){switch(T){case"break-word":return"break-word";case"normal":default:return"normal"}}},Gc=function(I){return{name:"padding-"+I,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},pv=Gc("top"),k5=Gc("right"),i1=Gc("bottom"),O5=Gc("left"),F5={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(I,T){switch(T){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},R5={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(I,T){switch(T){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},M5={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(I,T){return T.length===1&&Os(T[0],"none")?[]:Ws(T).map(function(O){for(var P={color:ti.TRANSPARENT,offsetX:ws,offsetY:ws,blur:ws},Y=0,ne=0;ne<O.length;ne++){var Ae=O[ne];lo(Ae)?(Y===0?P.offsetX=Ae:Y===1?P.offsetY=Ae:P.blur=Ae,Y++):P.color=Ii.parse(I,Ae)}return P})}},L5={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(I,T){switch(T){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},U5={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(I,T){if(T.type===20&&T.value==="none")return null;if(T.type===18){var O=$5[T.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported transform function "'+T.name+'"');return O(T.values)}return null}},o1=function(I){var T=I.filter(function(O){return O.type===17}).map(function(O){return O.number});return T.length===6?T:null},Yp=function(I){var T=I.filter(function(je){return je.type===17}).map(function(je){return je.number}),O=T[0],P=T[1];T[2],T[3];var Y=T[4],ne=T[5];T[6],T[7],T[8],T[9],T[10],T[11];var Ae=T[12],Ce=T[13];return T[14],T[15],T.length===16?[O,P,Y,ne,Ae,Ce]:null},$5={matrix:o1,matrix3d:Yp},l1={type:16,number:50,flags:ll},c1=[l1,l1],B={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(I,T){var O=T.filter(Vn);return O.length!==2?c1:[O[0],O[1]]}},L={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(I,T){switch(T){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},W;(function(I){I.NORMAL="normal",I.BREAK_ALL="break-all",I.KEEP_ALL="keep-all"})(W||(W={}));for(var J={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(I,T){switch(T){case"break-all":return W.BREAK_ALL;case"keep-all":return W.KEEP_ALL;case"normal":default:return W.NORMAL}}},ce={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(I,T){if(T.type===20)return{auto:!0,order:0};if(Cn(T))return{auto:!1,order:T.number};throw new Error("Invalid z-index number parsed")}},he={name:"time",parse:function(I,T){if(T.type===15)switch(T.unit.toLowerCase()){case"s":return 1e3*T.number;case"ms":return T.number}throw new Error("Unsupported time type")}},me={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(I,T){return Cn(T)?T.number:1}},pe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(I,T){return T.filter(pr).map(function(O){switch(O.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(O){return O!==0})}},Ne={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(I,T){var O=[],P=[];return T.forEach(function(Y){switch(Y.type){case 20:case 0:O.push(Y.value);break;case 17:O.push(Y.number.toString());break;case 4:P.push(O.join(" ")),O.length=0;break}}),O.length&&P.push(O.join(" ")),P.map(function(Y){return Y.indexOf(" ")===-1?Y:"'"+Y+"'"})}},ke={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Ge={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(I,T){if(Cn(T))return T.number;if(pr(T))switch(T.value){case"bold":return 700;case"normal":default:return 400}return 400}},qe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(I,T){return T.filter(pr).map(function(O){return O.value})}},$e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(I,T){switch(T){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ot=function(I,T){return(I&T)!==0},st={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(I,T){if(T.length===0)return[];var O=T[0];return O.type===20&&O.value==="none"?[]:T}},Fe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(I,T){if(T.length===0)return null;var O=T[0];if(O.type===20&&O.value==="none")return null;for(var P=[],Y=T.filter(oo),ne=0;ne<Y.length;ne++){var Ae=Y[ne],Ce=Y[ne+1];if(Ae.type===20){var je=Ce&&Cn(Ce)?Ce.number:1;P.push({counter:Ae.value,increment:je})}}return P}},Le={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(I,T){if(T.length===0)return[];for(var O=[],P=T.filter(oo),Y=0;Y<P.length;Y++){var ne=P[Y],Ae=P[Y+1];if(pr(ne)&&ne.value!=="none"){var Ce=Ae&&Cn(Ae)?Ae.number:0;O.push({counter:ne.value,reset:Ce})}}return O}},mt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(I,T){return T.filter(jn).map(function(O){return he.parse(I,O)})}},jt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(I,T){if(T.length===0)return null;var O=T[0];if(O.type===20&&O.value==="none")return null;var P=[],Y=T.filter(Ca);if(Y.length%2!==0)return null;for(var ne=0;ne<Y.length;ne+=2){var Ae=Y[ne].value,Ce=Y[ne+1].value;P.push({open:Ae,close:Ce})}return P}},pt=function(I,T,O){if(!I)return"";var P=I[Math.min(T,I.length-1)];return P?O?P.open:P.close:""},Ht={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(I,T){return T.length===1&&Os(T[0],"none")?[]:Ws(T).map(function(O){for(var P={color:255,offsetX:ws,offsetY:ws,blur:ws,spread:ws,inset:!1},Y=0,ne=0;ne<O.length;ne++){var Ae=O[ne];Os(Ae,"inset")?P.inset=!0:lo(Ae)?(Y===0?P.offsetX=Ae:Y===1?P.offsetY=Ae:Y===2?P.blur=Ae:P.spread=Ae,Y++):P.color=Ii.parse(I,Ae)}return P})}},Rt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(I,T){var O=[0,1,2],P=[];return T.filter(pr).forEach(function(Y){switch(Y.value){case"stroke":P.push(1);break;case"fill":P.push(0);break;case"markers":P.push(2);break}}),O.forEach(function(Y){P.indexOf(Y)===-1&&P.push(Y)}),P}},lr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Lt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(I,T){return jn(T)?T.number:0}},an=function(){function I(T,O){var P,Y;this.animationDuration=Nt(T,mt,O.animationDuration),this.backgroundClip=Nt(T,Jl,O.backgroundClip),this.backgroundColor=Nt(T,Ns,O.backgroundColor),this.backgroundImage=Nt(T,$p,O.backgroundImage),this.backgroundOrigin=Nt(T,Oi,O.backgroundOrigin),this.backgroundPosition=Nt(T,uo,O.backgroundPosition),this.backgroundRepeat=Nt(T,Hp,O.backgroundRepeat),this.backgroundSize=Nt(T,zp,O.backgroundSize),this.borderTopColor=Nt(T,Zw,O.borderTopColor),this.borderRightColor=Nt(T,fv,O.borderRightColor),this.borderBottomColor=Nt(T,hv,O.borderBottomColor),this.borderLeftColor=Nt(T,Wp,O.borderLeftColor),this.borderTopLeftRadius=Nt(T,v5,O.borderTopLeftRadius),this.borderTopRightRadius=Nt(T,b5,O.borderTopRightRadius),this.borderBottomRightRadius=Nt(T,e1,O.borderBottomRightRadius),this.borderBottomLeftRadius=Nt(T,y5,O.borderBottomLeftRadius),this.borderTopStyle=Nt(T,w5,O.borderTopStyle),this.borderRightStyle=Nt(T,j5,O.borderRightStyle),this.borderBottomStyle=Nt(T,C5,O.borderBottomStyle),this.borderLeftStyle=Nt(T,Av,O.borderLeftStyle),this.borderTopWidth=Nt(T,uA,O.borderTopWidth),this.borderRightWidth=Nt(T,N5,O.borderRightWidth),this.borderBottomWidth=Nt(T,S5,O.borderBottomWidth),this.borderLeftWidth=Nt(T,t1,O.borderLeftWidth),this.boxShadow=Nt(T,Ht,O.boxShadow),this.color=Nt(T,E5,O.color),this.direction=Nt(T,B5,O.direction),this.display=Nt(T,T5,O.display),this.float=Nt(T,Wc,O.cssFloat),this.fontFamily=Nt(T,Ne,O.fontFamily),this.fontSize=Nt(T,ke,O.fontSize),this.fontStyle=Nt(T,$e,O.fontStyle),this.fontVariant=Nt(T,qe,O.fontVariant),this.fontWeight=Nt(T,Ge,O.fontWeight),this.letterSpacing=Nt(T,$o,O.letterSpacing),this.lineBreak=Nt(T,I5,O.lineBreak),this.lineHeight=Nt(T,r1,O.lineHeight),this.listStyleImage=Nt(T,ho,O.listStyleImage),this.listStylePosition=Nt(T,_5,O.listStylePosition),this.listStyleType=Nt(T,mv,O.listStyleType),this.marginTop=Nt(T,n1,O.marginTop),this.marginRight=Nt(T,s1,O.marginRight),this.marginBottom=Nt(T,a1,O.marginBottom),this.marginLeft=Nt(T,P5,O.marginLeft),this.opacity=Nt(T,me,O.opacity);var ne=Nt(T,qp,O.overflow);this.overflowX=ne[0],this.overflowY=ne[ne.length>1?1:0],this.overflowWrap=Nt(T,Kp,O.overflowWrap),this.paddingTop=Nt(T,pv,O.paddingTop),this.paddingRight=Nt(T,k5,O.paddingRight),this.paddingBottom=Nt(T,i1,O.paddingBottom),this.paddingLeft=Nt(T,O5,O.paddingLeft),this.paintOrder=Nt(T,Rt,O.paintOrder),this.position=Nt(T,R5,O.position),this.textAlign=Nt(T,F5,O.textAlign),this.textDecorationColor=Nt(T,pe,(P=O.textDecorationColor)!==null&&P!==void 0?P:O.color),this.textDecorationLine=Nt(T,xe,(Y=O.textDecorationLine)!==null&&Y!==void 0?Y:O.textDecoration),this.textShadow=Nt(T,M5,O.textShadow),this.textTransform=Nt(T,L5,O.textTransform),this.transform=Nt(T,U5,O.transform),this.transformOrigin=Nt(T,B,O.transformOrigin),this.visibility=Nt(T,L,O.visibility),this.webkitTextStrokeColor=Nt(T,lr,O.webkitTextStrokeColor),this.webkitTextStrokeWidth=Nt(T,Lt,O.webkitTextStrokeWidth),this.wordBreak=Nt(T,J,O.wordBreak),this.zIndex=Nt(T,ce,O.zIndex)}return I.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},I.prototype.isTransparent=function(){return Lo(this.backgroundColor)},I.prototype.isTransformed=function(){return this.transform!==null},I.prototype.isPositioned=function(){return this.position!==0},I.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},I.prototype.isFloating=function(){return this.float!==0},I.prototype.isInlineLevel=function(){return ot(this.display,4)||ot(this.display,33554432)||ot(this.display,268435456)||ot(this.display,536870912)||ot(this.display,67108864)||ot(this.display,134217728)},I}(),hn=function(){function I(T,O){this.content=Nt(T,st,O.content),this.quotes=Nt(T,jt,O.quotes)}return I}(),qr=function(){function I(T,O){this.counterIncrement=Nt(T,Fe,O.counterIncrement),this.counterReset=Nt(T,Le,O.counterReset)}return I}(),Nt=function(I,T,O){var P=new yr,Y=O!==null&&typeof O<"u"?O.toString():T.initialValue;P.write(Y);var ne=new zr(P.read());switch(T.type){case 2:var Ae=ne.parseComponentValue();return T.parse(I,pr(Ae)?Ae.value:T.initialValue);case 0:return T.parse(I,ne.parseComponentValue());case 1:return T.parse(I,ne.parseComponentValues());case 4:return ne.parseComponentValue();case 3:switch(T.format){case"angle":return Ef.parse(I,ne.parseComponentValue());case"color":return Ii.parse(I,ne.parseComponentValue());case"image":return Vc.parse(I,ne.parseComponentValue());case"length":var Ce=ne.parseComponentValue();return lo(Ce)?Ce:ws;case"length-percentage":var je=ne.parseComponentValue();return Vn(je)?je:ws;case"time":return he.parse(I,ne.parseComponentValue())}break}},En="data-html2canvas-debug",xn=function(I){var T=I.getAttribute(En);switch(T){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Nr=function(I,T){var O=xn(I);return O===1||T===O},An=function(){function I(T,O){if(this.context=T,this.textNodes=[],this.elements=[],this.flags=0,Nr(O,3))debugger;this.styles=new an(T,window.getComputedStyle(O,null)),K5(O)&&(this.styles.animationDuration.some(function(P){return P>0})&&(O.style.animationDuration="0s"),this.styles.transform!==null&&(O.style.transform="none")),this.bounds=u(this.context,O),Nr(O,4)&&(this.flags|=16)}return I}(),ni="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ra=typeof Uint8Array>"u"?[]:new Uint8Array(256),Zr=0;Zr<Es.length;Zr++)ra[Es.charCodeAt(Zr)]=Zr;for(var Fi=function(I){var T=I.length*.75,O=I.length,P,Y=0,ne,Ae,Ce,je;I[I.length-1]==="="&&(T--,I[I.length-2]==="="&&T--);var Re=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(T):new Array(T),Ue=Array.isArray(Re)?Re:new Uint8Array(Re);for(P=0;P<O;P+=4)ne=ra[I.charCodeAt(P)],Ae=ra[I.charCodeAt(P+1)],Ce=ra[I.charCodeAt(P+2)],je=ra[I.charCodeAt(P+3)],Ue[Y++]=ne<<2|Ae>>4,Ue[Y++]=(Ae&15)<<4|Ce>>2,Ue[Y++]=(Ce&3)<<6|je&63;return Re},Ri=function(I){for(var T=I.length,O=[],P=0;P<T;P+=2)O.push(I[P+1]<<8|I[P]);return O},na=function(I){for(var T=I.length,O=[],P=0;P<T;P+=4)O.push(I[P+3]<<24|I[P+2]<<16|I[P+1]<<8|I[P]);return O},rs=5,ma=11,si=2,fl=ma-rs,Gs=65536>>rs,rc=1<<rs,nc=rc-1,Of=1024>>rs,qc=Gs+Of,fs=qc,gv=32,u1=fs+gv,d1=65536>>ma,Xp=1<<fl,fA=Xp-1,hA=function(I,T,O){return I.slice?I.slice(T,O):new Uint16Array(Array.prototype.slice.call(I,T,O))},Ho=function(I,T,O){return I.slice?I.slice(T,O):new Uint32Array(Array.prototype.slice.call(I,T,O))},Ff=function(I,T){var O=Fi(I),P=Array.isArray(O)?na(O):new Uint32Array(O),Y=Array.isArray(O)?Ri(O):new Uint16Array(O),ne=24,Ae=hA(Y,ne/2,P[4]/2),Ce=P[5]===2?hA(Y,(ne+P[4])/2):Ho(P,Math.ceil((ne+P[4])/4));return new Rf(P[0],P[1],P[2],P[3],Ae,Ce)},Rf=function(){function I(T,O,P,Y,ne,Ae){this.initialValue=T,this.errorValue=O,this.highStart=P,this.highValueIndex=Y,this.index=ne,this.data=Ae}return I.prototype.get=function(T){var O;if(T>=0){if(T<55296||T>56319&&T<=65535)return O=this.index[T>>rs],O=(O<<si)+(T&nc),this.data[O];if(T<=65535)return O=this.index[Gs+(T-55296>>rs)],O=(O<<si)+(T&nc),this.data[O];if(T<this.highStart)return O=u1-d1+(T>>ma),O=this.index[O],O+=T>>rs&fA,O=this.index[O],O=(O<<si)+(T&nc),this.data[O];if(T<=1114111)return this.data[this.highValueIndex]}return this.errorValue},I}(),xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jp=typeof Uint8Array>"u"?[]:new Uint8Array(256),AA=0;AA<xv.length;AA++)Jp[xv.charCodeAt(AA)]=AA;var Zp=1,mA=2,Mf=3,Lf=4,f1=5,H5=7,eg=8,hl=9,vv=10,h1=11,A1=12,bv=13,pA=14,tg=15,m1=function(I){for(var T=[],O=0,P=I.length;O<P;){var Y=I.charCodeAt(O++);if(Y>=55296&&Y<=56319&&O<P){var ne=I.charCodeAt(O++);(ne&64512)===56320?T.push(((Y&1023)<<10)+(ne&1023)+65536):(T.push(Y),O--)}else T.push(Y)}return T},rg=function(){for(var I=[],T=0;T<arguments.length;T++)I[T]=arguments[T];if(String.fromCodePoint)return String.fromCodePoint.apply(String,I);var O=I.length;if(!O)return"";for(var P=[],Y=-1,ne="";++Y<O;){var Ae=I[Y];Ae<=65535?P.push(Ae):(Ae-=65536,P.push((Ae>>10)+55296,Ae%1024+56320)),(Y+1===O||P.length>16384)&&(ne+=String.fromCharCode.apply(String,P),P.length=0)}return ne},yv=Ff(ni),Sa="×",ng="÷",Q5=function(I){return yv.get(I)},sg=function(I,T,O){var P=O-2,Y=T[P],ne=T[O-1],Ae=T[O];if(ne===mA&&Ae===Mf)return Sa;if(ne===mA||ne===Mf||ne===Lf||Ae===mA||Ae===Mf||Ae===Lf)return ng;if(ne===eg&&[eg,hl,h1,A1].indexOf(Ae)!==-1||(ne===h1||ne===hl)&&(Ae===hl||Ae===vv)||(ne===A1||ne===vv)&&Ae===vv||Ae===bv||Ae===f1||Ae===H5||ne===Zp)return Sa;if(ne===bv&&Ae===pA){for(;Y===f1;)Y=T[--P];if(Y===pA)return Sa}if(ne===tg&&Ae===tg){for(var Ce=0;Y===tg;)Ce++,Y=T[--P];if(Ce%2===0)return Sa}return ng},p1=function(I){var T=m1(I),O=T.length,P=0,Y=0,ne=T.map(Q5);return{next:function(){if(P>=O)return{done:!0,value:null};for(var Ae=Sa;P<O&&(Ae=sg(T,ne,++P))===Sa;);if(Ae!==Sa||P===O){var Ce=rg.apply(null,T.slice(Y,P));return Y=P,{value:Ce,done:!1}}return{done:!0,value:null}}}},wv=function(I){for(var T=p1(I),O=[],P;!(P=T.next()).done;)P.value&&O.push(P.value.slice());return O},Kc=function(I){var T=123;if(I.createRange){var O=I.createRange();if(O.getBoundingClientRect){var P=I.createElement("boundtest");P.style.height=T+"px",P.style.display="block",I.body.appendChild(P),O.selectNode(P);var Y=O.getBoundingClientRect(),ne=Math.round(Y.height);if(I.body.removeChild(P),ne===T)return!0}}return!1},g1=function(I){var T=I.createElement("boundtest");T.style.width="50px",T.style.display="block",T.style.fontSize="12px",T.style.letterSpacing="0px",T.style.wordSpacing="0px",I.body.appendChild(T);var O=I.createRange();T.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var P=T.firstChild,Y=f(P.data).map(function(je){return A(je)}),ne=0,Ae={},Ce=Y.every(function(je,Re){O.setStart(P,ne),O.setEnd(P,ne+je.length);var Ue=O.getBoundingClientRect();ne+=je.length;var We=Ue.x>Ae.x||Ue.y>Ae.y;return Ae=Ue,Re===0?!0:We});return I.body.removeChild(T),Ce},x1=function(){return typeof new Image().crossOrigin<"u"},z5=function(){return typeof new XMLHttpRequest().responseType=="string"},v1=function(I){var T=new Image,O=I.createElement("canvas"),P=O.getContext("2d");if(!P)return!1;T.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{P.drawImage(T,0,0),O.toDataURL()}catch{return!1}return!0},ld=function(I){return I[0]===0&&I[1]===255&&I[2]===0&&I[3]===255},V5=function(I){var T=I.createElement("canvas"),O=100;T.width=O,T.height=O;var P=T.getContext("2d");if(!P)return Promise.reject(!1);P.fillStyle="rgb(0, 255, 0)",P.fillRect(0,0,O,O);var Y=new Image,ne=T.toDataURL();Y.src=ne;var Ae=ag(O,O,0,0,Y);return P.fillStyle="red",P.fillRect(0,0,O,O),b1(Ae).then(function(Ce){P.drawImage(Ce,0,0);var je=P.getImageData(0,0,O,O).data;P.fillStyle="red",P.fillRect(0,0,O,O);var Re=I.createElement("div");return Re.style.backgroundImage="url("+ne+")",Re.style.height=O+"px",ld(je)?b1(ag(O,O,0,0,Re)):Promise.reject(!1)}).then(function(Ce){return P.drawImage(Ce,0,0),ld(P.getImageData(0,0,O,O).data)}).catch(function(){return!1})},ag=function(I,T,O,P,Y){var ne="http://www.w3.org/2000/svg",Ae=document.createElementNS(ne,"svg"),Ce=document.createElementNS(ne,"foreignObject");return Ae.setAttributeNS(null,"width",I.toString()),Ae.setAttributeNS(null,"height",T.toString()),Ce.setAttributeNS(null,"width","100%"),Ce.setAttributeNS(null,"height","100%"),Ce.setAttributeNS(null,"x",O.toString()),Ce.setAttributeNS(null,"y",P.toString()),Ce.setAttributeNS(null,"externalResourcesRequired","true"),Ae.appendChild(Ce),Ce.appendChild(Y),Ae},b1=function(I){return new Promise(function(T,O){var P=new Image;P.onload=function(){return T(P)},P.onerror=O,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})},sa={get SUPPORT_RANGE_BOUNDS(){var I=Kc(document);return Object.defineProperty(sa,"SUPPORT_RANGE_BOUNDS",{value:I}),I},get SUPPORT_WORD_BREAKING(){var I=sa.SUPPORT_RANGE_BOUNDS&&g1(document);return Object.defineProperty(sa,"SUPPORT_WORD_BREAKING",{value:I}),I},get SUPPORT_SVG_DRAWING(){var I=v1(document);return Object.defineProperty(sa,"SUPPORT_SVG_DRAWING",{value:I}),I},get SUPPORT_FOREIGNOBJECT_DRAWING(){var I=typeof Array.from=="function"&&typeof window.fetch=="function"?V5(document):Promise.resolve(!1);return Object.defineProperty(sa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:I}),I},get SUPPORT_CORS_IMAGES(){var I=x1();return Object.defineProperty(sa,"SUPPORT_CORS_IMAGES",{value:I}),I},get SUPPORT_RESPONSE_TYPE(){var I=z5();return Object.defineProperty(sa,"SUPPORT_RESPONSE_TYPE",{value:I}),I},get SUPPORT_CORS_XHR(){var I="withCredentials"in new XMLHttpRequest;return Object.defineProperty(sa,"SUPPORT_CORS_XHR",{value:I}),I},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var I=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(sa,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:I}),I}},gA=function(){function I(T,O){this.text=T,this.bounds=O}return I}(),xA=function(I,T,O,P){var Y=Xc(T,O),ne=[],Ae=0;return Y.forEach(function(Ce){if(O.textDecorationLine.length||Ce.trim().length>0)if(sa.SUPPORT_RANGE_BOUNDS){var je=vA(P,Ae,Ce.length).getClientRects();if(je.length>1){var Re=Qo(Ce),Ue=0;Re.forEach(function(ct){ne.push(new gA(ct,c.fromDOMRectList(I,vA(P,Ue+Ae,ct.length).getClientRects()))),Ue+=ct.length})}else ne.push(new gA(Ce,c.fromDOMRectList(I,je)))}else{var We=P.splitText(Ce.length);ne.push(new gA(Ce,jv(I,P))),P=We}else sa.SUPPORT_RANGE_BOUNDS||(P=P.splitText(Ce.length));Ae+=Ce.length}),ne},jv=function(I,T){var O=T.ownerDocument;if(O){var P=O.createElement("html2canvaswrapper");P.appendChild(T.cloneNode(!0));var Y=T.parentNode;if(Y){Y.replaceChild(P,T);var ne=u(I,P);return P.firstChild&&Y.replaceChild(P.firstChild,P),ne}}return c.EMPTY},vA=function(I,T,O){var P=I.ownerDocument;if(!P)throw new Error("Node has no owner document");var Y=P.createRange();return Y.setStart(I,T),Y.setEnd(I,T+O),Y},Qo=function(I){if(sa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var T=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(T.segment(I)).map(function(O){return O.segment})}return wv(I)},Yc=function(I,T){if(sa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var O=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(O.segment(I)).map(function(P){return P.segment})}return Cv(I,T)},Xc=function(I,T){return T.letterSpacing!==0?Qo(I):Yc(I,T)},ig=[32,160,4961,65792,65793,4153,4241],Cv=function(I,T){for(var O=vp(I,{lineBreak:T.lineBreak,wordBreak:T.overflowWrap==="break-word"?"break-word":T.wordBreak}),P=[],Y,ne=function(){if(Y.value){var Ae=Y.value.slice(),Ce=f(Ae),je="";Ce.forEach(function(Re){ig.indexOf(Re)===-1?je+=A(Re):(je.length&&P.push(je),P.push(A(Re)),je="")}),je.length&&P.push(je)}};!(Y=O.next()).done;)ne();return P},y1=function(){function I(T,O,P){this.text=W5(O.data,P.textTransform),this.textBounds=xA(T,this.text,P,O)}return I}(),W5=function(I,T){switch(T){case 1:return I.toLowerCase();case 3:return I.replace(Nv,Sv);case 2:return I.toUpperCase();default:return I}},Nv=/(^|\s|:|-|\(|\))([a-z])/g,Sv=function(I,T,O){return I.length>0?T+O.toUpperCase():I},UF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.src=P.currentSrc||P.src,Y.intrinsicWidth=P.naturalWidth,Y.intrinsicHeight=P.naturalHeight,Y.context.cache.addImage(Y.src),Y}return T}(An),$F=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.canvas=P,Y.intrinsicWidth=P.width,Y.intrinsicHeight=P.height,Y}return T}(An),HF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this,ne=new XMLSerializer,Ae=u(O,P);return P.setAttribute("width",Ae.width+"px"),P.setAttribute("height",Ae.height+"px"),Y.svg="data:image/svg+xml,"+encodeURIComponent(ne.serializeToString(P)),Y.intrinsicWidth=P.width.baseVal.value,Y.intrinsicHeight=P.height.baseVal.value,Y.context.cache.addImage(Y.svg),Y}return T}(An),QF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.value=P.value,Y}return T}(An),G5=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.start=P.start,Y.reversed=typeof P.reversed=="boolean"&&P.reversed===!0,Y}return T}(An),ise=[{type:15,flags:0,unit:"px",number:3}],ose=[{type:16,flags:0,number:50}],lse=function(I){return I.width>I.height?new c(I.left+(I.width-I.height)/2,I.top,I.height,I.height):I.width<I.height?new c(I.left,I.top+(I.height-I.width)/2,I.width,I.width):I},cse=function(I){var T=I.type===use?new Array(I.value.length+1).join("•"):I.value;return T.length===0?I.placeholder||"":T},w1="checkbox",j1="radio",use="password",zF=707406591,q5=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;switch(Y.type=P.type.toLowerCase(),Y.checked=P.checked,Y.value=cse(P),(Y.type===w1||Y.type===j1)&&(Y.styles.backgroundColor=3739148031,Y.styles.borderTopColor=Y.styles.borderRightColor=Y.styles.borderBottomColor=Y.styles.borderLeftColor=2779096575,Y.styles.borderTopWidth=Y.styles.borderRightWidth=Y.styles.borderBottomWidth=Y.styles.borderLeftWidth=1,Y.styles.borderTopStyle=Y.styles.borderRightStyle=Y.styles.borderBottomStyle=Y.styles.borderLeftStyle=1,Y.styles.backgroundClip=[0],Y.styles.backgroundOrigin=[0],Y.bounds=lse(Y.bounds)),Y.type){case w1:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=ise;break;case j1:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=ose;break}return Y}return T}(An),VF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this,ne=P.options[P.selectedIndex||0];return Y.value=ne&&ne.text||"",Y}return T}(An),WF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.value=P.value,Y}return T}(An),GF=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;Y.src=P.src,Y.width=parseInt(P.width,10)||0,Y.height=parseInt(P.height,10)||0,Y.backgroundColor=Y.styles.backgroundColor;try{if(P.contentWindow&&P.contentWindow.document&&P.contentWindow.document.documentElement){Y.tree=KF(O,P.contentWindow.document.documentElement);var ne=P.contentWindow.document.documentElement?_i(O,getComputedStyle(P.contentWindow.document.documentElement).backgroundColor):ti.TRANSPARENT,Ae=P.contentWindow.document.body?_i(O,getComputedStyle(P.contentWindow.document.body).backgroundColor):ti.TRANSPARENT;Y.backgroundColor=Lo(ne)?Lo(Ae)?Y.styles.backgroundColor:Ae:ne}}catch{}return Y}return T}(An),dse=["OL","UL","MENU"],C1=function(I,T,O,P){for(var Y=T.firstChild,ne=void 0;Y;Y=ne)if(ne=Y.nextSibling,YF(Y)&&Y.data.trim().length>0)O.textNodes.push(new y1(I,Y,O.styles));else if(og(Y))if(rR(Y)&&Y.assignedNodes)Y.assignedNodes().forEach(function(Ce){return C1(I,Ce,O,P)});else{var Ae=qF(I,Y);Ae.styles.isVisible()&&(fse(Y,Ae,P)?Ae.flags|=4:hse(Ae.styles)&&(Ae.flags|=2),dse.indexOf(Y.tagName)!==-1&&(Ae.flags|=8),O.elements.push(Ae),Y.slot,Y.shadowRoot?C1(I,Y.shadowRoot,Ae,P):!S1(Y)&&!XF(Y)&&!E1(Y)&&C1(I,Y,Ae,P))}},qF=function(I,T){return X5(T)?new UF(I,T):JF(T)?new $F(I,T):XF(T)?new HF(I,T):Ase(T)?new QF(I,T):mse(T)?new G5(I,T):pse(T)?new q5(I,T):E1(T)?new VF(I,T):S1(T)?new WF(I,T):eR(T)?new GF(I,T):new An(I,T)},KF=function(I,T){var O=qF(I,T);return O.flags|=4,C1(I,T,O,O),O},fse=function(I,T,O){return T.styles.isPositionedWithZIndex()||T.styles.opacity<1||T.styles.isTransformed()||Y5(I)&&O.styles.isTransparent()},hse=function(I){return I.isPositioned()||I.isFloating()},YF=function(I){return I.nodeType===Node.TEXT_NODE},og=function(I){return I.nodeType===Node.ELEMENT_NODE},K5=function(I){return og(I)&&typeof I.style<"u"&&!N1(I)},N1=function(I){return typeof I.className=="object"},Ase=function(I){return I.tagName==="LI"},mse=function(I){return I.tagName==="OL"},pse=function(I){return I.tagName==="INPUT"},gse=function(I){return I.tagName==="HTML"},XF=function(I){return I.tagName==="svg"},Y5=function(I){return I.tagName==="BODY"},JF=function(I){return I.tagName==="CANVAS"},ZF=function(I){return I.tagName==="VIDEO"},X5=function(I){return I.tagName==="IMG"},eR=function(I){return I.tagName==="IFRAME"},tR=function(I){return I.tagName==="STYLE"},xse=function(I){return I.tagName==="SCRIPT"},S1=function(I){return I.tagName==="TEXTAREA"},E1=function(I){return I.tagName==="SELECT"},rR=function(I){return I.tagName==="SLOT"},nR=function(I){return I.tagName.indexOf("-")>0},vse=function(){function I(){this.counters={}}return I.prototype.getCounterValue=function(T){var O=this.counters[T];return O&&O.length?O[O.length-1]:1},I.prototype.getCounterValues=function(T){var O=this.counters[T];return O||[]},I.prototype.pop=function(T){var O=this;T.forEach(function(P){return O.counters[P].pop()})},I.prototype.parse=function(T){var O=this,P=T.counterIncrement,Y=T.counterReset,ne=!0;P!==null&&P.forEach(function(Ce){var je=O.counters[Ce.counter];je&&Ce.increment!==0&&(ne=!1,je.length||je.push(1),je[Math.max(0,je.length-1)]+=Ce.increment)});var Ae=[];return ne&&Y.forEach(function(Ce){var je=O.counters[Ce.counter];Ae.push(Ce.counter),je||(je=O.counters[Ce.counter]=[]),je.push(Ce.reset)}),Ae},I}(),sR={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},aR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},bse={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},yse={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},lg=function(I,T,O,P,Y,ne){return I<T||I>O?Bv(I,Y,ne.length>0):P.integers.reduce(function(Ae,Ce,je){for(;I>=Ce;)I-=Ce,Ae+=P.values[je];return Ae},"")+ne},iR=function(I,T,O,P){var Y="";do O||I--,Y=P(I)+Y,I/=T;while(I*T>=T);return Y},qs=function(I,T,O,P,Y){var ne=O-T+1;return(I<0?"-":"")+(iR(Math.abs(I),ne,P,function(Ae){return A(Math.floor(Ae%ne)+T)})+Y)},bA=function(I,T,O){O===void 0&&(O=". ");var P=T.length;return iR(Math.abs(I),P,!1,function(Y){return T[Math.floor(Y%P)]})+O},cg=1,Uf=2,$f=4,Ev=8,cd=function(I,T,O,P,Y,ne){if(I<-9999||I>9999)return Bv(I,4,Y.length>0);var Ae=Math.abs(I),Ce=Y;if(Ae===0)return T[0]+Ce;for(var je=0;Ae>0&&je<=4;je++){var Re=Ae%10;Re===0&&ot(ne,cg)&&Ce!==""?Ce=T[Re]+Ce:Re>1||Re===1&&je===0||Re===1&&je===1&&ot(ne,Uf)||Re===1&&je===1&&ot(ne,$f)&&I>100||Re===1&&je>1&&ot(ne,Ev)?Ce=T[Re]+(je>0?O[je-1]:"")+Ce:Re===1&&je>0&&(Ce=O[je-1]+Ce),Ae=Math.floor(Ae/10)}return(I<0?P:"")+Ce},oR="十百千萬",lR="拾佰仟萬",cR="マイナス",J5="마이너스",Bv=function(I,T,O){var P=O?". ":"",Y=O?"、":"",ne=O?", ":"",Ae=O?" ":"";switch(T){case 0:return"•"+Ae;case 1:return"◦"+Ae;case 2:return"◾"+Ae;case 5:var Ce=qs(I,48,57,!0,P);return Ce.length<4?"0"+Ce:Ce;case 4:return bA(I,"〇一二三四五六七八九",Y);case 6:return lg(I,1,3999,sR,3,P).toLowerCase();case 7:return lg(I,1,3999,sR,3,P);case 8:return qs(I,945,969,!1,P);case 9:return qs(I,97,122,!1,P);case 10:return qs(I,65,90,!1,P);case 11:return qs(I,1632,1641,!0,P);case 12:case 49:return lg(I,1,9999,aR,3,P);case 35:return lg(I,1,9999,aR,3,P).toLowerCase();case 13:return qs(I,2534,2543,!0,P);case 14:case 30:return qs(I,6112,6121,!0,P);case 15:return bA(I,"子丑寅卯辰巳午未申酉戌亥",Y);case 16:return bA(I,"甲乙丙丁戊己庚辛壬癸",Y);case 17:case 48:return cd(I,"零一二三四五六七八九",oR,"負",Y,Uf|$f|Ev);case 47:return cd(I,"零壹貳參肆伍陸柒捌玖",lR,"負",Y,cg|Uf|$f|Ev);case 42:return cd(I,"零一二三四五六七八九",oR,"负",Y,Uf|$f|Ev);case 41:return cd(I,"零壹贰叁肆伍陆柒捌玖",lR,"负",Y,cg|Uf|$f|Ev);case 26:return cd(I,"〇一二三四五六七八九","十百千万",cR,Y,0);case 25:return cd(I,"零壱弐参四伍六七八九","拾百千万",cR,Y,cg|Uf|$f);case 31:return cd(I,"영일이삼사오육칠팔구","십백천만",J5,ne,cg|Uf|$f);case 33:return cd(I,"零一二三四五六七八九","十百千萬",J5,ne,0);case 32:return cd(I,"零壹貳參四五六七八九","拾百千",J5,ne,cg|Uf|$f);case 18:return qs(I,2406,2415,!0,P);case 20:return lg(I,1,19999,yse,3,P);case 21:return qs(I,2790,2799,!0,P);case 22:return qs(I,2662,2671,!0,P);case 22:return lg(I,1,10999,bse,3,P);case 23:return bA(I,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return bA(I,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return qs(I,3302,3311,!0,P);case 28:return bA(I,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",Y);case 29:return bA(I,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",Y);case 34:return qs(I,3792,3801,!0,P);case 37:return qs(I,6160,6169,!0,P);case 38:return qs(I,4160,4169,!0,P);case 39:return qs(I,2918,2927,!0,P);case 40:return qs(I,1776,1785,!0,P);case 43:return qs(I,3046,3055,!0,P);case 44:return qs(I,3174,3183,!0,P);case 45:return qs(I,3664,3673,!0,P);case 46:return qs(I,3872,3881,!0,P);case 3:default:return qs(I,48,57,!0,P)}},uR="data-html2canvas-ignore",dR=function(){function I(T,O,P){if(this.context=T,this.options=P,this.scrolledElements=[],this.referenceElement=O,this.counters=new vse,this.quoteDepth=0,!O.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(O.ownerDocument.documentElement,!1)}return I.prototype.toIFrame=function(T,O){var P=this,Y=wse(T,O);if(!Y.contentWindow)return Promise.reject("Unable to find iframe window");var ne=T.defaultView.pageXOffset,Ae=T.defaultView.pageYOffset,Ce=Y.contentWindow,je=Ce.document,Re=Nse(Y).then(function(){return i(P,void 0,void 0,function(){var Ue,We;return o(this,function(ct){switch(ct.label){case 0:return this.scrolledElements.forEach(Tse),Ce&&(Ce.scrollTo(O.left,O.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ce.scrollY!==O.top||Ce.scrollX!==O.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ce.scrollX-O.left,Ce.scrollY-O.top,0,0))),Ue=this.options.onclone,We=this.clonedReferenceElement,typeof We>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:je.fonts&&je.fonts.ready?[4,je.fonts.ready]:[3,2];case 1:ct.sent(),ct.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Cse(je)]:[3,4];case 3:ct.sent(),ct.label=4;case 4:return typeof Ue=="function"?[2,Promise.resolve().then(function(){return Ue(je,We)}).then(function(){return Y})]:[2,Y]}})})});return je.open(),je.write(Ese(document.doctype)+"<html></html>"),Bse(this.referenceElement.ownerDocument,ne,Ae),je.replaceChild(je.adoptNode(this.documentElement),je.documentElement),je.close(),Re},I.prototype.createElementClone=function(T){if(Nr(T,2))debugger;if(JF(T))return this.createCanvasClone(T);if(ZF(T))return this.createVideoClone(T);if(tR(T))return this.createStyleClone(T);var O=T.cloneNode(!1);return X5(O)&&(X5(T)&&T.currentSrc&&T.currentSrc!==T.src&&(O.src=T.currentSrc,O.srcset=""),O.loading==="lazy"&&(O.loading="eager")),nR(O)?this.createCustomElementClone(O):O},I.prototype.createCustomElementClone=function(T){var O=document.createElement("html2canvascustomelement");return Z5(T.style,O),O},I.prototype.createStyleClone=function(T){try{var O=T.sheet;if(O&&O.cssRules){var P=[].slice.call(O.cssRules,0).reduce(function(ne,Ae){return Ae&&typeof Ae.cssText=="string"?ne+Ae.cssText:ne},""),Y=T.cloneNode(!1);return Y.textContent=P,Y}}catch(ne){if(this.context.logger.error("Unable to access cssRules property",ne),ne.name!=="SecurityError")throw ne}return T.cloneNode(!1)},I.prototype.createCanvasClone=function(T){var O;if(this.options.inlineImages&&T.ownerDocument){var P=T.ownerDocument.createElement("img");try{return P.src=T.toDataURL(),P}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",T)}}var Y=T.cloneNode(!1);try{Y.width=T.width,Y.height=T.height;var ne=T.getContext("2d"),Ae=Y.getContext("2d");if(Ae)if(!this.options.allowTaint&&ne)Ae.putImageData(ne.getImageData(0,0,T.width,T.height),0,0);else{var Ce=(O=T.getContext("webgl2"))!==null&&O!==void 0?O:T.getContext("webgl");if(Ce){var je=Ce.getContextAttributes();(je==null?void 0:je.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",T)}Ae.drawImage(T,0,0)}return Y}catch{this.context.logger.info("Unable to clone canvas as it is tainted",T)}return Y},I.prototype.createVideoClone=function(T){var O=T.ownerDocument.createElement("canvas");O.width=T.offsetWidth,O.height=T.offsetHeight;var P=O.getContext("2d");try{return P&&(P.drawImage(T,0,0,O.width,O.height),this.options.allowTaint||P.getImageData(0,0,O.width,O.height)),O}catch{this.context.logger.info("Unable to clone video as it is tainted",T)}var Y=T.ownerDocument.createElement("canvas");return Y.width=T.offsetWidth,Y.height=T.offsetHeight,Y},I.prototype.appendChildNode=function(T,O,P){(!og(O)||!xse(O)&&!O.hasAttribute(uR)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(O)))&&(!this.options.copyStyles||!og(O)||!tR(O))&&T.appendChild(this.cloneNode(O,P))},I.prototype.cloneChildNodes=function(T,O,P){for(var Y=this,ne=T.shadowRoot?T.shadowRoot.firstChild:T.firstChild;ne;ne=ne.nextSibling)if(og(ne)&&rR(ne)&&typeof ne.assignedNodes=="function"){var Ae=ne.assignedNodes();Ae.length&&Ae.forEach(function(Ce){return Y.appendChildNode(O,Ce,P)})}else this.appendChildNode(O,ne,P)},I.prototype.cloneNode=function(T,O){if(YF(T))return document.createTextNode(T.data);if(!T.ownerDocument)return T.cloneNode(!1);var P=T.ownerDocument.defaultView;if(P&&og(T)&&(K5(T)||N1(T))){var Y=this.createElementClone(T);Y.style.transitionProperty="none";var ne=P.getComputedStyle(T),Ae=P.getComputedStyle(T,":before"),Ce=P.getComputedStyle(T,":after");this.referenceElement===T&&K5(Y)&&(this.clonedReferenceElement=Y),Y5(Y)&&_se(Y);var je=this.counters.parse(new qr(this.context,ne)),Re=this.resolvePseudoContent(T,Y,Ae,Tv.BEFORE);nR(T)&&(O=!0),ZF(T)||this.cloneChildNodes(T,Y,O),Re&&Y.insertBefore(Re,Y.firstChild);var Ue=this.resolvePseudoContent(T,Y,Ce,Tv.AFTER);return Ue&&Y.appendChild(Ue),this.counters.pop(je),(ne&&(this.options.copyStyles||N1(T))&&!eR(T)||O)&&Z5(ne,Y),(T.scrollTop!==0||T.scrollLeft!==0)&&this.scrolledElements.push([Y,T.scrollLeft,T.scrollTop]),(S1(T)||E1(T))&&(S1(Y)||E1(Y))&&(Y.value=T.value),Y}return T.cloneNode(!1)},I.prototype.resolvePseudoContent=function(T,O,P,Y){var ne=this;if(P){var Ae=P.content,Ce=O.ownerDocument;if(!(!Ce||!Ae||Ae==="none"||Ae==="-moz-alt-content"||P.display==="none")){this.counters.parse(new qr(this.context,P));var je=new hn(this.context,P),Re=Ce.createElement("html2canvaspseudoelement");Z5(P,Re),je.content.forEach(function(We){if(We.type===0)Re.appendChild(Ce.createTextNode(We.value));else if(We.type===22){var ct=Ce.createElement("img");ct.src=We.value,ct.style.opacity="1",Re.appendChild(ct)}else if(We.type===18){if(We.name==="attr"){var Gt=We.values.filter(pr);Gt.length&&Re.appendChild(Ce.createTextNode(T.getAttribute(Gt[0].value)||""))}else if(We.name==="counter"){var kt=We.values.filter(ta),Ut=kt[0],kr=kt[1];if(Ut&&pr(Ut)){var sr=ne.counters.getCounterValue(Ut.value),er=kr&&pr(kr)?mv.parse(ne.context,kr.value):3;Re.appendChild(Ce.createTextNode(Bv(sr,er,!1)))}}else if(We.name==="counters"){var un=We.values.filter(ta),Ut=un[0],Lr=un[1],kr=un[2];if(Ut&&pr(Ut)){var wr=ne.counters.getCounterValues(Ut.value),zt=kr&&pr(kr)?mv.parse(ne.context,kr.value):3,en=Lr&&Lr.type===0?Lr.value:"",tn=wr.map(function(Ao){return Bv(Ao,zt,!1)}).join(en);Re.appendChild(Ce.createTextNode(tn))}}}else if(We.type===20)switch(We.value){case"open-quote":Re.appendChild(Ce.createTextNode(pt(je.quotes,ne.quoteDepth++,!0)));break;case"close-quote":Re.appendChild(Ce.createTextNode(pt(je.quotes,--ne.quoteDepth,!1)));break;default:Re.appendChild(Ce.createTextNode(We.value))}}),Re.className=eB+" "+tB;var Ue=Y===Tv.BEFORE?" "+eB:" "+tB;return N1(O)?O.className.baseValue+=Ue:O.className+=Ue,Re}}},I.destroy=function(T){return T.parentNode?(T.parentNode.removeChild(T),!0):!1},I}(),Tv;(function(I){I[I.BEFORE=0]="BEFORE",I[I.AFTER=1]="AFTER"})(Tv||(Tv={}));var wse=function(I,T){var O=I.createElement("iframe");return O.className="html2canvas-container",O.style.visibility="hidden",O.style.position="fixed",O.style.left="-10000px",O.style.top="0px",O.style.border="0",O.width=T.width.toString(),O.height=T.height.toString(),O.scrolling="no",O.setAttribute(uR,"true"),I.body.appendChild(O),O},jse=function(I){return new Promise(function(T){if(I.complete){T();return}if(!I.src){T();return}I.onload=T,I.onerror=T})},Cse=function(I){return Promise.all([].slice.call(I.images,0).map(jse))},Nse=function(I){return new Promise(function(T,O){var P=I.contentWindow;if(!P)return O("No window assigned for iframe");var Y=P.document;P.onload=I.onload=function(){P.onload=I.onload=null;var ne=setInterval(function(){Y.body.childNodes.length>0&&Y.readyState==="complete"&&(clearInterval(ne),T(I))},50)}})},Sse=["all","d","content"],Z5=function(I,T){for(var O=I.length-1;O>=0;O--){var P=I.item(O);Sse.indexOf(P)===-1&&T.style.setProperty(P,I.getPropertyValue(P))}return T},Ese=function(I){var T="";return I&&(T+="<!DOCTYPE ",I.name&&(T+=I.name),I.internalSubset&&(T+=I.internalSubset),I.publicId&&(T+='"'+I.publicId+'"'),I.systemId&&(T+='"'+I.systemId+'"'),T+=">"),T},Bse=function(I,T,O){I&&I.defaultView&&(T!==I.defaultView.pageXOffset||O!==I.defaultView.pageYOffset)&&I.defaultView.scrollTo(T,O)},Tse=function(I){var T=I[0],O=I[1],P=I[2];T.scrollLeft=O,T.scrollTop=P},Dse=":before",Ise=":after",eB="___html2canvas___pseudoelement_before",tB="___html2canvas___pseudoelement_after",fR=`{
    content: "" !important;
    display: none !important;
}`,_se=function(I){Pse(I,"."+eB+Dse+fR+`
         .`+tB+Ise+fR)},Pse=function(I,T){var O=I.ownerDocument;if(O){var P=O.createElement("style");P.textContent=T,I.appendChild(P)}},hR=function(){function I(){}return I.getOrigin=function(T){var O=I._link;return O?(O.href=T,O.href=O.href,O.protocol+O.hostname+O.port):"about:blank"},I.isSameOrigin=function(T){return I.getOrigin(T)===I._origin},I.setContext=function(T){I._link=T.document.createElement("a"),I._origin=I.getOrigin(T.location.href)},I._origin="about:blank",I}(),kse=function(){function I(T,O){this.context=T,this._options=O,this._cache={}}return I.prototype.addImage=function(T){var O=Promise.resolve();return this.has(T)||(nB(T)||Mse(T))&&(this._cache[T]=this.loadImage(T)).catch(function(){}),O},I.prototype.match=function(T){return this._cache[T]},I.prototype.loadImage=function(T){return i(this,void 0,void 0,function(){var O,P,Y,ne,Ae=this;return o(this,function(Ce){switch(Ce.label){case 0:return O=hR.isSameOrigin(T),P=!rB(T)&&this._options.useCORS===!0&&sa.SUPPORT_CORS_IMAGES&&!O,Y=!rB(T)&&!O&&!nB(T)&&typeof this._options.proxy=="string"&&sa.SUPPORT_CORS_XHR&&!P,!O&&this._options.allowTaint===!1&&!rB(T)&&!nB(T)&&!Y&&!P?[2]:(ne=T,Y?[4,this.proxy(ne)]:[3,2]);case 1:ne=Ce.sent(),Ce.label=2;case 2:return this.context.logger.debug("Added image "+T.substring(0,256)),[4,new Promise(function(je,Re){var Ue=new Image;Ue.onload=function(){return je(Ue)},Ue.onerror=Re,(Lse(ne)||P)&&(Ue.crossOrigin="anonymous"),Ue.src=ne,Ue.complete===!0&&setTimeout(function(){return je(Ue)},500),Ae._options.imageTimeout>0&&setTimeout(function(){return Re("Timed out ("+Ae._options.imageTimeout+"ms) loading image")},Ae._options.imageTimeout)})];case 3:return[2,Ce.sent()]}})})},I.prototype.has=function(T){return typeof this._cache[T]<"u"},I.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},I.prototype.proxy=function(T){var O=this,P=this._options.proxy;if(!P)throw new Error("No proxy defined");var Y=T.substring(0,256);return new Promise(function(ne,Ae){var Ce=sa.SUPPORT_RESPONSE_TYPE?"blob":"text",je=new XMLHttpRequest;je.onload=function(){if(je.status===200)if(Ce==="text")ne(je.response);else{var We=new FileReader;We.addEventListener("load",function(){return ne(We.result)},!1),We.addEventListener("error",function(ct){return Ae(ct)},!1),We.readAsDataURL(je.response)}else Ae("Failed to proxy resource "+Y+" with status code "+je.status)},je.onerror=Ae;var Re=P.indexOf("?")>-1?"&":"?";if(je.open("GET",""+P+Re+"url="+encodeURIComponent(T)+"&responseType="+Ce),Ce!=="text"&&je instanceof XMLHttpRequest&&(je.responseType=Ce),O._options.imageTimeout){var Ue=O._options.imageTimeout;je.timeout=Ue,je.ontimeout=function(){return Ae("Timed out ("+Ue+"ms) proxying "+Y)}}je.send()})},I}(),Ose=/^data:image\/svg\+xml/i,Fse=/^data:image\/.*;base64,/i,Rse=/^data:image\/.*/i,Mse=function(I){return sa.SUPPORT_SVG_DRAWING||!Use(I)},rB=function(I){return Rse.test(I)},Lse=function(I){return Fse.test(I)},nB=function(I){return I.substr(0,4)==="blob"},Use=function(I){return I.substr(-3).toLowerCase()==="svg"||Ose.test(I)},Qt=function(){function I(T,O){this.type=0,this.x=T,this.y=O}return I.prototype.add=function(T,O){return new I(this.x+T,this.y+O)},I}(),ug=function(I,T,O){return new Qt(I.x+(T.x-I.x)*O,I.y+(T.y-I.y)*O)},B1=function(){function I(T,O,P,Y){this.type=1,this.start=T,this.startControl=O,this.endControl=P,this.end=Y}return I.prototype.subdivide=function(T,O){var P=ug(this.start,this.startControl,T),Y=ug(this.startControl,this.endControl,T),ne=ug(this.endControl,this.end,T),Ae=ug(P,Y,T),Ce=ug(Y,ne,T),je=ug(Ae,Ce,T);return O?new I(this.start,P,Ae,je):new I(je,Ce,ne,this.end)},I.prototype.add=function(T,O){return new I(this.start.add(T,O),this.startControl.add(T,O),this.endControl.add(T,O),this.end.add(T,O))},I.prototype.reverse=function(){return new I(this.end,this.endControl,this.startControl,this.start)},I}(),Al=function(I){return I.type===1},$se=function(){function I(T){var O=T.styles,P=T.bounds,Y=js(O.borderTopLeftRadius,P.width,P.height),ne=Y[0],Ae=Y[1],Ce=js(O.borderTopRightRadius,P.width,P.height),je=Ce[0],Re=Ce[1],Ue=js(O.borderBottomRightRadius,P.width,P.height),We=Ue[0],ct=Ue[1],Gt=js(O.borderBottomLeftRadius,P.width,P.height),kt=Gt[0],Ut=Gt[1],kr=[];kr.push((ne+je)/P.width),kr.push((kt+We)/P.width),kr.push((Ae+Ut)/P.height),kr.push((Re+ct)/P.height);var sr=Math.max.apply(Math,kr);sr>1&&(ne/=sr,Ae/=sr,je/=sr,Re/=sr,We/=sr,ct/=sr,kt/=sr,Ut/=sr);var er=P.width-je,un=P.height-ct,Lr=P.width-We,wr=P.height-Ut,zt=O.borderTopWidth,en=O.borderRightWidth,tn=O.borderBottomWidth,Sr=O.borderLeftWidth,aa=sn(O.paddingTop,T.bounds.width),Ao=sn(O.paddingRight,T.bounds.width),zo=sn(O.paddingBottom,T.bounds.width),kn=sn(O.paddingLeft,T.bounds.width);this.topLeftBorderDoubleOuterBox=ne>0||Ae>0?hs(P.left+Sr/3,P.top+zt/3,ne-Sr/3,Ae-zt/3,vn.TOP_LEFT):new Qt(P.left+Sr/3,P.top+zt/3),this.topRightBorderDoubleOuterBox=ne>0||Ae>0?hs(P.left+er,P.top+zt/3,je-en/3,Re-zt/3,vn.TOP_RIGHT):new Qt(P.left+P.width-en/3,P.top+zt/3),this.bottomRightBorderDoubleOuterBox=We>0||ct>0?hs(P.left+Lr,P.top+un,We-en/3,ct-tn/3,vn.BOTTOM_RIGHT):new Qt(P.left+P.width-en/3,P.top+P.height-tn/3),this.bottomLeftBorderDoubleOuterBox=kt>0||Ut>0?hs(P.left+Sr/3,P.top+wr,kt-Sr/3,Ut-tn/3,vn.BOTTOM_LEFT):new Qt(P.left+Sr/3,P.top+P.height-tn/3),this.topLeftBorderDoubleInnerBox=ne>0||Ae>0?hs(P.left+Sr*2/3,P.top+zt*2/3,ne-Sr*2/3,Ae-zt*2/3,vn.TOP_LEFT):new Qt(P.left+Sr*2/3,P.top+zt*2/3),this.topRightBorderDoubleInnerBox=ne>0||Ae>0?hs(P.left+er,P.top+zt*2/3,je-en*2/3,Re-zt*2/3,vn.TOP_RIGHT):new Qt(P.left+P.width-en*2/3,P.top+zt*2/3),this.bottomRightBorderDoubleInnerBox=We>0||ct>0?hs(P.left+Lr,P.top+un,We-en*2/3,ct-tn*2/3,vn.BOTTOM_RIGHT):new Qt(P.left+P.width-en*2/3,P.top+P.height-tn*2/3),this.bottomLeftBorderDoubleInnerBox=kt>0||Ut>0?hs(P.left+Sr*2/3,P.top+wr,kt-Sr*2/3,Ut-tn*2/3,vn.BOTTOM_LEFT):new Qt(P.left+Sr*2/3,P.top+P.height-tn*2/3),this.topLeftBorderStroke=ne>0||Ae>0?hs(P.left+Sr/2,P.top+zt/2,ne-Sr/2,Ae-zt/2,vn.TOP_LEFT):new Qt(P.left+Sr/2,P.top+zt/2),this.topRightBorderStroke=ne>0||Ae>0?hs(P.left+er,P.top+zt/2,je-en/2,Re-zt/2,vn.TOP_RIGHT):new Qt(P.left+P.width-en/2,P.top+zt/2),this.bottomRightBorderStroke=We>0||ct>0?hs(P.left+Lr,P.top+un,We-en/2,ct-tn/2,vn.BOTTOM_RIGHT):new Qt(P.left+P.width-en/2,P.top+P.height-tn/2),this.bottomLeftBorderStroke=kt>0||Ut>0?hs(P.left+Sr/2,P.top+wr,kt-Sr/2,Ut-tn/2,vn.BOTTOM_LEFT):new Qt(P.left+Sr/2,P.top+P.height-tn/2),this.topLeftBorderBox=ne>0||Ae>0?hs(P.left,P.top,ne,Ae,vn.TOP_LEFT):new Qt(P.left,P.top),this.topRightBorderBox=je>0||Re>0?hs(P.left+er,P.top,je,Re,vn.TOP_RIGHT):new Qt(P.left+P.width,P.top),this.bottomRightBorderBox=We>0||ct>0?hs(P.left+Lr,P.top+un,We,ct,vn.BOTTOM_RIGHT):new Qt(P.left+P.width,P.top+P.height),this.bottomLeftBorderBox=kt>0||Ut>0?hs(P.left,P.top+wr,kt,Ut,vn.BOTTOM_LEFT):new Qt(P.left,P.top+P.height),this.topLeftPaddingBox=ne>0||Ae>0?hs(P.left+Sr,P.top+zt,Math.max(0,ne-Sr),Math.max(0,Ae-zt),vn.TOP_LEFT):new Qt(P.left+Sr,P.top+zt),this.topRightPaddingBox=je>0||Re>0?hs(P.left+Math.min(er,P.width-en),P.top+zt,er>P.width+en?0:Math.max(0,je-en),Math.max(0,Re-zt),vn.TOP_RIGHT):new Qt(P.left+P.width-en,P.top+zt),this.bottomRightPaddingBox=We>0||ct>0?hs(P.left+Math.min(Lr,P.width-Sr),P.top+Math.min(un,P.height-tn),Math.max(0,We-en),Math.max(0,ct-tn),vn.BOTTOM_RIGHT):new Qt(P.left+P.width-en,P.top+P.height-tn),this.bottomLeftPaddingBox=kt>0||Ut>0?hs(P.left+Sr,P.top+Math.min(wr,P.height-tn),Math.max(0,kt-Sr),Math.max(0,Ut-tn),vn.BOTTOM_LEFT):new Qt(P.left+Sr,P.top+P.height-tn),this.topLeftContentBox=ne>0||Ae>0?hs(P.left+Sr+kn,P.top+zt+aa,Math.max(0,ne-(Sr+kn)),Math.max(0,Ae-(zt+aa)),vn.TOP_LEFT):new Qt(P.left+Sr+kn,P.top+zt+aa),this.topRightContentBox=je>0||Re>0?hs(P.left+Math.min(er,P.width+Sr+kn),P.top+zt+aa,er>P.width+Sr+kn?0:je-Sr+kn,Re-(zt+aa),vn.TOP_RIGHT):new Qt(P.left+P.width-(en+Ao),P.top+zt+aa),this.bottomRightContentBox=We>0||ct>0?hs(P.left+Math.min(Lr,P.width-(Sr+kn)),P.top+Math.min(un,P.height+zt+aa),Math.max(0,We-(en+Ao)),ct-(tn+zo),vn.BOTTOM_RIGHT):new Qt(P.left+P.width-(en+Ao),P.top+P.height-(tn+zo)),this.bottomLeftContentBox=kt>0||Ut>0?hs(P.left+Sr+kn,P.top+wr,Math.max(0,kt-(Sr+kn)),Ut-(tn+zo),vn.BOTTOM_LEFT):new Qt(P.left+Sr+kn,P.top+P.height-(tn+zo))}return I}(),vn;(function(I){I[I.TOP_LEFT=0]="TOP_LEFT",I[I.TOP_RIGHT=1]="TOP_RIGHT",I[I.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",I[I.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vn||(vn={}));var hs=function(I,T,O,P,Y){var ne=4*((Math.sqrt(2)-1)/3),Ae=O*ne,Ce=P*ne,je=I+O,Re=T+P;switch(Y){case vn.TOP_LEFT:return new B1(new Qt(I,Re),new Qt(I,Re-Ce),new Qt(je-Ae,T),new Qt(je,T));case vn.TOP_RIGHT:return new B1(new Qt(I,T),new Qt(I+Ae,T),new Qt(je,Re-Ce),new Qt(je,Re));case vn.BOTTOM_RIGHT:return new B1(new Qt(je,T),new Qt(je,T+Ce),new Qt(I+Ae,Re),new Qt(I,Re));case vn.BOTTOM_LEFT:default:return new B1(new Qt(je,Re),new Qt(je-Ae,Re),new Qt(I,T+Ce),new Qt(I,T))}},T1=function(I){return[I.topLeftBorderBox,I.topRightBorderBox,I.bottomRightBorderBox,I.bottomLeftBorderBox]},Hse=function(I){return[I.topLeftContentBox,I.topRightContentBox,I.bottomRightContentBox,I.bottomLeftContentBox]},D1=function(I){return[I.topLeftPaddingBox,I.topRightPaddingBox,I.bottomRightPaddingBox,I.bottomLeftPaddingBox]},Qse=function(){function I(T,O,P){this.offsetX=T,this.offsetY=O,this.matrix=P,this.type=0,this.target=6}return I}(),I1=function(){function I(T,O){this.path=T,this.target=O,this.type=1}return I}(),zse=function(){function I(T){this.opacity=T,this.type=2,this.target=6}return I}(),Vse=function(I){return I.type===0},AR=function(I){return I.type===1},Wse=function(I){return I.type===2},mR=function(I,T){return I.length===T.length?I.some(function(O,P){return O===T[P]}):!1},Gse=function(I,T,O,P,Y){return I.map(function(ne,Ae){switch(Ae){case 0:return ne.add(T,O);case 1:return ne.add(T+P,O);case 2:return ne.add(T+P,O+Y);case 3:return ne.add(T,O+Y)}return ne})},pR=function(){function I(T){this.element=T,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return I}(),gR=function(){function I(T,O){if(this.container=T,this.parent=O,this.effects=[],this.curves=new $se(this.container),this.container.styles.opacity<1&&this.effects.push(new zse(this.container.styles.opacity)),this.container.styles.transform!==null){var P=this.container.bounds.left+this.container.styles.transformOrigin[0].number,Y=this.container.bounds.top+this.container.styles.transformOrigin[1].number,ne=this.container.styles.transform;this.effects.push(new Qse(P,Y,ne))}if(this.container.styles.overflowX!==0){var Ae=T1(this.curves),Ce=D1(this.curves);mR(Ae,Ce)?this.effects.push(new I1(Ae,6)):(this.effects.push(new I1(Ae,2)),this.effects.push(new I1(Ce,4)))}}return I.prototype.getEffects=function(T){for(var O=[2,3].indexOf(this.container.styles.position)===-1,P=this.parent,Y=this.effects.slice(0);P;){var ne=P.effects.filter(function(je){return!AR(je)});if(O||P.container.styles.position!==0||!P.parent){if(Y.unshift.apply(Y,ne),O=[2,3].indexOf(P.container.styles.position)===-1,P.container.styles.overflowX!==0){var Ae=T1(P.curves),Ce=D1(P.curves);mR(Ae,Ce)||Y.unshift(new I1(Ce,6))}}else Y.unshift.apply(Y,ne);P=P.parent}return Y.filter(function(je){return ot(je.target,T)})},I}(),sB=function(I,T,O,P){I.container.elements.forEach(function(Y){var ne=ot(Y.flags,4),Ae=ot(Y.flags,2),Ce=new gR(Y,I);ot(Y.styles.display,2048)&&P.push(Ce);var je=ot(Y.flags,8)?[]:P;if(ne||Ae){var Re=ne||Y.styles.isPositioned()?O:T,Ue=new pR(Ce);if(Y.styles.isPositioned()||Y.styles.opacity<1||Y.styles.isTransformed()){var We=Y.styles.zIndex.order;if(We<0){var ct=0;Re.negativeZIndex.some(function(kt,Ut){return We>kt.element.container.styles.zIndex.order?(ct=Ut,!1):ct>0}),Re.negativeZIndex.splice(ct,0,Ue)}else if(We>0){var Gt=0;Re.positiveZIndex.some(function(kt,Ut){return We>=kt.element.container.styles.zIndex.order?(Gt=Ut+1,!1):Gt>0}),Re.positiveZIndex.splice(Gt,0,Ue)}else Re.zeroOrAutoZIndexOrTransformedOrOpacity.push(Ue)}else Y.styles.isFloating()?Re.nonPositionedFloats.push(Ue):Re.nonPositionedInlineLevel.push(Ue);sB(Ce,Ue,ne?Ue:O,je)}else Y.styles.isInlineLevel()?T.inlineLevel.push(Ce):T.nonInlineLevel.push(Ce),sB(Ce,T,O,je);ot(Y.flags,8)&&xR(Y,je)})},xR=function(I,T){for(var O=I instanceof G5?I.start:1,P=I instanceof G5?I.reversed:!1,Y=0;Y<T.length;Y++){var ne=T[Y];ne.container instanceof QF&&typeof ne.container.value=="number"&&ne.container.value!==0&&(O=ne.container.value),ne.listValue=Bv(O,ne.container.styles.listStyleType,!0),O+=P?-1:1}},qse=function(I){var T=new gR(I,null),O=new pR(T),P=[];return sB(T,O,O,P),xR(T.container,P),O},vR=function(I,T){switch(T){case 0:return ml(I.topLeftBorderBox,I.topLeftPaddingBox,I.topRightBorderBox,I.topRightPaddingBox);case 1:return ml(I.topRightBorderBox,I.topRightPaddingBox,I.bottomRightBorderBox,I.bottomRightPaddingBox);case 2:return ml(I.bottomRightBorderBox,I.bottomRightPaddingBox,I.bottomLeftBorderBox,I.bottomLeftPaddingBox);case 3:default:return ml(I.bottomLeftBorderBox,I.bottomLeftPaddingBox,I.topLeftBorderBox,I.topLeftPaddingBox)}},Kse=function(I,T){switch(T){case 0:return ml(I.topLeftBorderBox,I.topLeftBorderDoubleOuterBox,I.topRightBorderBox,I.topRightBorderDoubleOuterBox);case 1:return ml(I.topRightBorderBox,I.topRightBorderDoubleOuterBox,I.bottomRightBorderBox,I.bottomRightBorderDoubleOuterBox);case 2:return ml(I.bottomRightBorderBox,I.bottomRightBorderDoubleOuterBox,I.bottomLeftBorderBox,I.bottomLeftBorderDoubleOuterBox);case 3:default:return ml(I.bottomLeftBorderBox,I.bottomLeftBorderDoubleOuterBox,I.topLeftBorderBox,I.topLeftBorderDoubleOuterBox)}},Yse=function(I,T){switch(T){case 0:return ml(I.topLeftBorderDoubleInnerBox,I.topLeftPaddingBox,I.topRightBorderDoubleInnerBox,I.topRightPaddingBox);case 1:return ml(I.topRightBorderDoubleInnerBox,I.topRightPaddingBox,I.bottomRightBorderDoubleInnerBox,I.bottomRightPaddingBox);case 2:return ml(I.bottomRightBorderDoubleInnerBox,I.bottomRightPaddingBox,I.bottomLeftBorderDoubleInnerBox,I.bottomLeftPaddingBox);case 3:default:return ml(I.bottomLeftBorderDoubleInnerBox,I.bottomLeftPaddingBox,I.topLeftBorderDoubleInnerBox,I.topLeftPaddingBox)}},Xse=function(I,T){switch(T){case 0:return _1(I.topLeftBorderStroke,I.topRightBorderStroke);case 1:return _1(I.topRightBorderStroke,I.bottomRightBorderStroke);case 2:return _1(I.bottomRightBorderStroke,I.bottomLeftBorderStroke);case 3:default:return _1(I.bottomLeftBorderStroke,I.topLeftBorderStroke)}},_1=function(I,T){var O=[];return Al(I)?O.push(I.subdivide(.5,!1)):O.push(I),Al(T)?O.push(T.subdivide(.5,!0)):O.push(T),O},ml=function(I,T,O,P){var Y=[];return Al(I)?Y.push(I.subdivide(.5,!1)):Y.push(I),Al(O)?Y.push(O.subdivide(.5,!0)):Y.push(O),Al(P)?Y.push(P.subdivide(.5,!0).reverse()):Y.push(P),Al(T)?Y.push(T.subdivide(.5,!1).reverse()):Y.push(T),Y},bR=function(I){var T=I.bounds,O=I.styles;return T.add(O.borderLeftWidth,O.borderTopWidth,-(O.borderRightWidth+O.borderLeftWidth),-(O.borderTopWidth+O.borderBottomWidth))},P1=function(I){var T=I.styles,O=I.bounds,P=sn(T.paddingLeft,O.width),Y=sn(T.paddingRight,O.width),ne=sn(T.paddingTop,O.width),Ae=sn(T.paddingBottom,O.width);return O.add(P+T.borderLeftWidth,ne+T.borderTopWidth,-(T.borderRightWidth+T.borderLeftWidth+P+Y),-(T.borderTopWidth+T.borderBottomWidth+ne+Ae))},Jse=function(I,T){return I===0?T.bounds:I===2?P1(T):bR(T)},Zse=function(I,T){return I===0?T.bounds:I===2?P1(T):bR(T)},aB=function(I,T,O){var P=Jse(fg(I.styles.backgroundOrigin,T),I),Y=Zse(fg(I.styles.backgroundClip,T),I),ne=eae(fg(I.styles.backgroundSize,T),O,P),Ae=ne[0],Ce=ne[1],je=js(fg(I.styles.backgroundPosition,T),P.width-Ae,P.height-Ce),Re=tae(fg(I.styles.backgroundRepeat,T),je,ne,P,Y),Ue=Math.round(P.left+je[0]),We=Math.round(P.top+je[1]);return[Re,Ue,We,Ae,Ce]},dg=function(I){return pr(I)&&I.value===od.AUTO},k1=function(I){return typeof I=="number"},eae=function(I,T,O){var P=T[0],Y=T[1],ne=T[2],Ae=I[0],Ce=I[1];if(!Ae)return[0,0];if(Vn(Ae)&&Ce&&Vn(Ce))return[sn(Ae,O.width),sn(Ce,O.height)];var je=k1(ne);if(pr(Ae)&&(Ae.value===od.CONTAIN||Ae.value===od.COVER)){if(k1(ne)){var Re=O.width/O.height;return Re<ne!=(Ae.value===od.COVER)?[O.width,O.width/ne]:[O.height*ne,O.height]}return[O.width,O.height]}var Ue=k1(P),We=k1(Y),ct=Ue||We;if(dg(Ae)&&(!Ce||dg(Ce))){if(Ue&&We)return[P,Y];if(!je&&!ct)return[O.width,O.height];if(ct&&je){var Gt=Ue?P:Y*ne,kt=We?Y:P/ne;return[Gt,kt]}var Ut=Ue?P:O.width,kr=We?Y:O.height;return[Ut,kr]}if(je){var sr=0,er=0;return Vn(Ae)?sr=sn(Ae,O.width):Vn(Ce)&&(er=sn(Ce,O.height)),dg(Ae)?sr=er*ne:(!Ce||dg(Ce))&&(er=sr/ne),[sr,er]}var un=null,Lr=null;if(Vn(Ae)?un=sn(Ae,O.width):Ce&&Vn(Ce)&&(Lr=sn(Ce,O.height)),un!==null&&(!Ce||dg(Ce))&&(Lr=Ue&&We?un/P*Y:O.height),Lr!==null&&dg(Ae)&&(un=Ue&&We?Lr/Y*P:O.width),un!==null&&Lr!==null)return[un,Lr];throw new Error("Unable to calculate background-size for element")},fg=function(I,T){var O=I[T];return typeof O>"u"?I[0]:O},tae=function(I,T,O,P,Y){var ne=T[0],Ae=T[1],Ce=O[0],je=O[1];switch(I){case 2:return[new Qt(Math.round(P.left),Math.round(P.top+Ae)),new Qt(Math.round(P.left+P.width),Math.round(P.top+Ae)),new Qt(Math.round(P.left+P.width),Math.round(je+P.top+Ae)),new Qt(Math.round(P.left),Math.round(je+P.top+Ae))];case 3:return[new Qt(Math.round(P.left+ne),Math.round(P.top)),new Qt(Math.round(P.left+ne+Ce),Math.round(P.top)),new Qt(Math.round(P.left+ne+Ce),Math.round(P.height+P.top)),new Qt(Math.round(P.left+ne),Math.round(P.height+P.top))];case 1:return[new Qt(Math.round(P.left+ne),Math.round(P.top+Ae)),new Qt(Math.round(P.left+ne+Ce),Math.round(P.top+Ae)),new Qt(Math.round(P.left+ne+Ce),Math.round(P.top+Ae+je)),new Qt(Math.round(P.left+ne),Math.round(P.top+Ae+je))];default:return[new Qt(Math.round(Y.left),Math.round(Y.top)),new Qt(Math.round(Y.left+Y.width),Math.round(Y.top)),new Qt(Math.round(Y.left+Y.width),Math.round(Y.height+Y.top)),new Qt(Math.round(Y.left),Math.round(Y.height+Y.top))]}},rae="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",yR="Hidden Text",nae=function(){function I(T){this._data={},this._document=T}return I.prototype.parseMetrics=function(T,O){var P=this._document.createElement("div"),Y=this._document.createElement("img"),ne=this._document.createElement("span"),Ae=this._document.body;P.style.visibility="hidden",P.style.fontFamily=T,P.style.fontSize=O,P.style.margin="0",P.style.padding="0",P.style.whiteSpace="nowrap",Ae.appendChild(P),Y.src=rae,Y.width=1,Y.height=1,Y.style.margin="0",Y.style.padding="0",Y.style.verticalAlign="baseline",ne.style.fontFamily=T,ne.style.fontSize=O,ne.style.margin="0",ne.style.padding="0",ne.appendChild(this._document.createTextNode(yR)),P.appendChild(ne),P.appendChild(Y);var Ce=Y.offsetTop-ne.offsetTop+2;P.removeChild(ne),P.appendChild(this._document.createTextNode(yR)),P.style.lineHeight="normal",Y.style.verticalAlign="super";var je=Y.offsetTop-P.offsetTop+2;return Ae.removeChild(P),{baseline:Ce,middle:je}},I.prototype.getMetrics=function(T,O){var P=T+" "+O;return typeof this._data[P]>"u"&&(this._data[P]=this.parseMetrics(T,O)),this._data[P]},I}(),wR=function(){function I(T,O){this.context=T,this.options=O}return I}(),sae=1e4,aae=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y._activeEffects=[],Y.canvas=P.canvas?P.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),P.canvas||(Y.canvas.width=Math.floor(P.width*P.scale),Y.canvas.height=Math.floor(P.height*P.scale),Y.canvas.style.width=P.width+"px",Y.canvas.style.height=P.height+"px"),Y.fontMetrics=new nae(document),Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-P.x,-P.y),Y.ctx.textBaseline="bottom",Y._activeEffects=[],Y.context.logger.debug("Canvas renderer initialized ("+P.width+"x"+P.height+") with scale "+P.scale),Y}return T.prototype.applyEffects=function(O){for(var P=this;this._activeEffects.length;)this.popEffect();O.forEach(function(Y){return P.applyEffect(Y)})},T.prototype.applyEffect=function(O){this.ctx.save(),Wse(O)&&(this.ctx.globalAlpha=O.opacity),Vse(O)&&(this.ctx.translate(O.offsetX,O.offsetY),this.ctx.transform(O.matrix[0],O.matrix[1],O.matrix[2],O.matrix[3],O.matrix[4],O.matrix[5]),this.ctx.translate(-O.offsetX,-O.offsetY)),AR(O)&&(this.path(O.path),this.ctx.clip()),this._activeEffects.push(O)},T.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},T.prototype.renderStack=function(O){return i(this,void 0,void 0,function(){var P;return o(this,function(Y){switch(Y.label){case 0:return P=O.element.container.styles,P.isVisible()?[4,this.renderStackContent(O)]:[3,2];case 1:Y.sent(),Y.label=2;case 2:return[2]}})})},T.prototype.renderNode=function(O){return i(this,void 0,void 0,function(){return o(this,function(P){switch(P.label){case 0:if(ot(O.container.flags,16))debugger;return O.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(O)]:[3,3];case 1:return P.sent(),[4,this.renderNodeContent(O)];case 2:P.sent(),P.label=3;case 3:return[2]}})})},T.prototype.renderTextWithLetterSpacing=function(O,P,Y){var ne=this;if(P===0)this.ctx.fillText(O.text,O.bounds.left,O.bounds.top+Y);else{var Ae=Qo(O.text);Ae.reduce(function(Ce,je){return ne.ctx.fillText(je,Ce,O.bounds.top+Y),Ce+ne.ctx.measureText(je).width},O.bounds.left)}},T.prototype.createFontStyle=function(O){var P=O.fontVariant.filter(function(Ae){return Ae==="normal"||Ae==="small-caps"}).join(""),Y=uae(O.fontFamily).join(", "),ne=jn(O.fontSize)?""+O.fontSize.number+O.fontSize.unit:O.fontSize.number+"px";return[[O.fontStyle,P,O.fontWeight,ne,Y].join(" "),Y,ne]},T.prototype.renderTextNode=function(O,P){return i(this,void 0,void 0,function(){var Y,ne,Ae,Ce,je,Re,Ue,We,ct=this;return o(this,function(Gt){return Y=this.createFontStyle(P),ne=Y[0],Ae=Y[1],Ce=Y[2],this.ctx.font=ne,this.ctx.direction=P.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",je=this.fontMetrics.getMetrics(Ae,Ce),Re=je.baseline,Ue=je.middle,We=P.paintOrder,O.textBounds.forEach(function(kt){We.forEach(function(Ut){switch(Ut){case 0:ct.ctx.fillStyle=Cs(P.color),ct.renderTextWithLetterSpacing(kt,P.letterSpacing,Re);var kr=P.textShadow;kr.length&&kt.text.trim().length&&(kr.slice(0).reverse().forEach(function(sr){ct.ctx.shadowColor=Cs(sr.color),ct.ctx.shadowOffsetX=sr.offsetX.number*ct.options.scale,ct.ctx.shadowOffsetY=sr.offsetY.number*ct.options.scale,ct.ctx.shadowBlur=sr.blur.number,ct.renderTextWithLetterSpacing(kt,P.letterSpacing,Re)}),ct.ctx.shadowColor="",ct.ctx.shadowOffsetX=0,ct.ctx.shadowOffsetY=0,ct.ctx.shadowBlur=0),P.textDecorationLine.length&&(ct.ctx.fillStyle=Cs(P.textDecorationColor||P.color),P.textDecorationLine.forEach(function(sr){switch(sr){case 1:ct.ctx.fillRect(kt.bounds.left,Math.round(kt.bounds.top+Re),kt.bounds.width,1);break;case 2:ct.ctx.fillRect(kt.bounds.left,Math.round(kt.bounds.top),kt.bounds.width,1);break;case 3:ct.ctx.fillRect(kt.bounds.left,Math.ceil(kt.bounds.top+Ue),kt.bounds.width,1);break}}));break;case 1:P.webkitTextStrokeWidth&&kt.text.trim().length&&(ct.ctx.strokeStyle=Cs(P.webkitTextStrokeColor),ct.ctx.lineWidth=P.webkitTextStrokeWidth,ct.ctx.lineJoin=window.chrome?"miter":"round",ct.ctx.strokeText(kt.text,kt.bounds.left,kt.bounds.top+Re)),ct.ctx.strokeStyle="",ct.ctx.lineWidth=0,ct.ctx.lineJoin="miter";break}})}),[2]})})},T.prototype.renderReplacedElement=function(O,P,Y){if(Y&&O.intrinsicWidth>0&&O.intrinsicHeight>0){var ne=P1(O),Ae=D1(P);this.path(Ae),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(Y,0,0,O.intrinsicWidth,O.intrinsicHeight,ne.left,ne.top,ne.width,ne.height),this.ctx.restore()}},T.prototype.renderNodeContent=function(O){return i(this,void 0,void 0,function(){var P,Y,ne,Ae,Ce,je,er,er,Re,Ue,We,ct,Lr,Gt,kt,wr,Ut,kr,sr,er,un,Lr,wr;return o(this,function(zt){switch(zt.label){case 0:this.applyEffects(O.getEffects(4)),P=O.container,Y=O.curves,ne=P.styles,Ae=0,Ce=P.textNodes,zt.label=1;case 1:return Ae<Ce.length?(je=Ce[Ae],[4,this.renderTextNode(je,ne)]):[3,4];case 2:zt.sent(),zt.label=3;case 3:return Ae++,[3,1];case 4:if(!(P instanceof UF))return[3,8];zt.label=5;case 5:return zt.trys.push([5,7,,8]),[4,this.context.cache.match(P.src)];case 6:return er=zt.sent(),this.renderReplacedElement(P,Y,er),[3,8];case 7:return zt.sent(),this.context.logger.error("Error loading image "+P.src),[3,8];case 8:if(P instanceof $F&&this.renderReplacedElement(P,Y,P.canvas),!(P instanceof HF))return[3,12];zt.label=9;case 9:return zt.trys.push([9,11,,12]),[4,this.context.cache.match(P.svg)];case 10:return er=zt.sent(),this.renderReplacedElement(P,Y,er),[3,12];case 11:return zt.sent(),this.context.logger.error("Error loading svg "+P.svg.substring(0,255)),[3,12];case 12:return P instanceof GF&&P.tree?(Re=new T(this.context,{scale:this.options.scale,backgroundColor:P.backgroundColor,x:0,y:0,width:P.width,height:P.height}),[4,Re.render(P.tree)]):[3,14];case 13:Ue=zt.sent(),P.width&&P.height&&this.ctx.drawImage(Ue,0,0,P.width,P.height,P.bounds.left,P.bounds.top,P.bounds.width,P.bounds.height),zt.label=14;case 14:if(P instanceof q5&&(We=Math.min(P.bounds.width,P.bounds.height),P.type===w1?P.checked&&(this.ctx.save(),this.path([new Qt(P.bounds.left+We*.39363,P.bounds.top+We*.79),new Qt(P.bounds.left+We*.16,P.bounds.top+We*.5549),new Qt(P.bounds.left+We*.27347,P.bounds.top+We*.44071),new Qt(P.bounds.left+We*.39694,P.bounds.top+We*.5649),new Qt(P.bounds.left+We*.72983,P.bounds.top+We*.23),new Qt(P.bounds.left+We*.84,P.bounds.top+We*.34085),new Qt(P.bounds.left+We*.39363,P.bounds.top+We*.79)]),this.ctx.fillStyle=Cs(zF),this.ctx.fill(),this.ctx.restore()):P.type===j1&&P.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(P.bounds.left+We/2,P.bounds.top+We/2,We/4,0,Math.PI*2,!0),this.ctx.fillStyle=Cs(zF),this.ctx.fill(),this.ctx.restore())),iae(P)&&P.value.length){switch(ct=this.createFontStyle(ne),Lr=ct[0],Gt=ct[1],kt=this.fontMetrics.getMetrics(Lr,Gt).baseline,this.ctx.font=Lr,this.ctx.fillStyle=Cs(ne.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=lae(P.styles.textAlign),wr=P1(P),Ut=0,P.styles.textAlign){case 1:Ut+=wr.width/2;break;case 2:Ut+=wr.width;break}kr=wr.add(Ut,0,0,-wr.height/2+1),this.ctx.save(),this.path([new Qt(wr.left,wr.top),new Qt(wr.left+wr.width,wr.top),new Qt(wr.left+wr.width,wr.top+wr.height),new Qt(wr.left,wr.top+wr.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gA(P.value,kr),ne.letterSpacing,kt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ot(P.styles.display,2048))return[3,20];if(P.styles.listStyleImage===null)return[3,19];if(sr=P.styles.listStyleImage,sr.type!==0)return[3,18];er=void 0,un=sr.url,zt.label=15;case 15:return zt.trys.push([15,17,,18]),[4,this.context.cache.match(un)];case 16:return er=zt.sent(),this.ctx.drawImage(er,P.bounds.left-(er.width+10),P.bounds.top),[3,18];case 17:return zt.sent(),this.context.logger.error("Error loading list-style-image "+un),[3,18];case 18:return[3,20];case 19:O.listValue&&P.styles.listStyleType!==-1&&(Lr=this.createFontStyle(ne)[0],this.ctx.font=Lr,this.ctx.fillStyle=Cs(ne.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",wr=new c(P.bounds.left,P.bounds.top+sn(P.styles.paddingTop,P.bounds.width),P.bounds.width,tc(ne.lineHeight,ne.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gA(O.listValue,wr),ne.letterSpacing,tc(ne.lineHeight,ne.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),zt.label=20;case 20:return[2]}})})},T.prototype.renderStackContent=function(O){return i(this,void 0,void 0,function(){var P,Y,sr,ne,Ae,sr,Ce,je,sr,Re,Ue,sr,We,ct,sr,Gt,kt,sr,Ut,kr,sr;return o(this,function(er){switch(er.label){case 0:if(ot(O.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(O.element)];case 1:er.sent(),P=0,Y=O.negativeZIndex,er.label=2;case 2:return P<Y.length?(sr=Y[P],[4,this.renderStack(sr)]):[3,5];case 3:er.sent(),er.label=4;case 4:return P++,[3,2];case 5:return[4,this.renderNodeContent(O.element)];case 6:er.sent(),ne=0,Ae=O.nonInlineLevel,er.label=7;case 7:return ne<Ae.length?(sr=Ae[ne],[4,this.renderNode(sr)]):[3,10];case 8:er.sent(),er.label=9;case 9:return ne++,[3,7];case 10:Ce=0,je=O.nonPositionedFloats,er.label=11;case 11:return Ce<je.length?(sr=je[Ce],[4,this.renderStack(sr)]):[3,14];case 12:er.sent(),er.label=13;case 13:return Ce++,[3,11];case 14:Re=0,Ue=O.nonPositionedInlineLevel,er.label=15;case 15:return Re<Ue.length?(sr=Ue[Re],[4,this.renderStack(sr)]):[3,18];case 16:er.sent(),er.label=17;case 17:return Re++,[3,15];case 18:We=0,ct=O.inlineLevel,er.label=19;case 19:return We<ct.length?(sr=ct[We],[4,this.renderNode(sr)]):[3,22];case 20:er.sent(),er.label=21;case 21:return We++,[3,19];case 22:Gt=0,kt=O.zeroOrAutoZIndexOrTransformedOrOpacity,er.label=23;case 23:return Gt<kt.length?(sr=kt[Gt],[4,this.renderStack(sr)]):[3,26];case 24:er.sent(),er.label=25;case 25:return Gt++,[3,23];case 26:Ut=0,kr=O.positiveZIndex,er.label=27;case 27:return Ut<kr.length?(sr=kr[Ut],[4,this.renderStack(sr)]):[3,30];case 28:er.sent(),er.label=29;case 29:return Ut++,[3,27];case 30:return[2]}})})},T.prototype.mask=function(O){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(O.slice(0).reverse()),this.ctx.closePath()},T.prototype.path=function(O){this.ctx.beginPath(),this.formatPath(O),this.ctx.closePath()},T.prototype.formatPath=function(O){var P=this;O.forEach(function(Y,ne){var Ae=Al(Y)?Y.start:Y;ne===0?P.ctx.moveTo(Ae.x,Ae.y):P.ctx.lineTo(Ae.x,Ae.y),Al(Y)&&P.ctx.bezierCurveTo(Y.startControl.x,Y.startControl.y,Y.endControl.x,Y.endControl.y,Y.end.x,Y.end.y)})},T.prototype.renderRepeat=function(O,P,Y,ne){this.path(O),this.ctx.fillStyle=P,this.ctx.translate(Y,ne),this.ctx.fill(),this.ctx.translate(-Y,-ne)},T.prototype.resizeImage=function(O,P,Y){var ne;if(O.width===P&&O.height===Y)return O;var Ae=(ne=this.canvas.ownerDocument)!==null&&ne!==void 0?ne:document,Ce=Ae.createElement("canvas");Ce.width=Math.max(1,P),Ce.height=Math.max(1,Y);var je=Ce.getContext("2d");return je.drawImage(O,0,0,O.width,O.height,0,0,P,Y),Ce},T.prototype.renderBackgroundImage=function(O){return i(this,void 0,void 0,function(){var P,Y,ne,Ae,Ce,je;return o(this,function(Re){switch(Re.label){case 0:P=O.styles.backgroundImage.length-1,Y=function(Ue){var We,ct,Gt,aa,mo,po,kn,Ua,tn,kt,aa,mo,po,kn,Ua,Ut,kr,sr,er,un,Lr,wr,zt,en,tn,Sr,aa,Ao,zo,kn,Ua,Hf,mo,po,yA,Jc,Qf,wA,jA,ud,CA,dd;return o(this,function(hg){switch(hg.label){case 0:if(Ue.type!==0)return[3,5];We=void 0,ct=Ue.url,hg.label=1;case 1:return hg.trys.push([1,3,,4]),[4,ne.context.cache.match(ct)];case 2:return We=hg.sent(),[3,4];case 3:return hg.sent(),ne.context.logger.error("Error loading background-image "+ct),[3,4];case 4:return We&&(Gt=aB(O,P,[We.width,We.height,We.width/We.height]),aa=Gt[0],mo=Gt[1],po=Gt[2],kn=Gt[3],Ua=Gt[4],tn=ne.ctx.createPattern(ne.resizeImage(We,kn,Ua),"repeat"),ne.renderRepeat(aa,tn,mo,po)),[3,6];case 5:ec(Ue)?(kt=aB(O,P,[null,null,null]),aa=kt[0],mo=kt[1],po=kt[2],kn=kt[3],Ua=kt[4],Ut=Tf(Ue.angle,kn,Ua),kr=Ut[0],sr=Ut[1],er=Ut[2],un=Ut[3],Lr=Ut[4],wr=document.createElement("canvas"),wr.width=kn,wr.height=Ua,zt=wr.getContext("2d"),en=zt.createLinearGradient(sr,un,er,Lr),Na(Ue.stops,kr).forEach(function(Dv){return en.addColorStop(Dv.stop,Cs(Dv.color))}),zt.fillStyle=en,zt.fillRect(0,0,kn,Ua),kn>0&&Ua>0&&(tn=ne.ctx.createPattern(wr,"repeat"),ne.renderRepeat(aa,tn,mo,po))):cA(Ue)&&(Sr=aB(O,P,[null,null,null]),aa=Sr[0],Ao=Sr[1],zo=Sr[2],kn=Sr[3],Ua=Sr[4],Hf=Ue.position.length===0?[ed]:Ue.position,mo=sn(Hf[0],kn),po=sn(Hf[Hf.length-1],Ua),yA=nd(Ue,mo,po,kn,Ua),Jc=yA[0],Qf=yA[1],Jc>0&&Qf>0&&(wA=ne.ctx.createRadialGradient(Ao+mo,zo+po,0,Ao+mo,zo+po,Jc),Na(Ue.stops,Jc*2).forEach(function(Dv){return wA.addColorStop(Dv.stop,Cs(Dv.color))}),ne.path(aa),ne.ctx.fillStyle=wA,Jc!==Qf?(jA=O.bounds.left+.5*O.bounds.width,ud=O.bounds.top+.5*O.bounds.height,CA=Qf/Jc,dd=1/CA,ne.ctx.save(),ne.ctx.translate(jA,ud),ne.ctx.transform(1,0,0,CA,0,0),ne.ctx.translate(-jA,-ud),ne.ctx.fillRect(Ao,dd*(zo-ud)+ud,kn,Ua*dd),ne.ctx.restore()):ne.ctx.fill())),hg.label=6;case 6:return P--,[2]}})},ne=this,Ae=0,Ce=O.styles.backgroundImage.slice(0).reverse(),Re.label=1;case 1:return Ae<Ce.length?(je=Ce[Ae],[5,Y(je)]):[3,4];case 2:Re.sent(),Re.label=3;case 3:return Ae++,[3,1];case 4:return[2]}})})},T.prototype.renderSolidBorder=function(O,P,Y){return i(this,void 0,void 0,function(){return o(this,function(ne){return this.path(vR(Y,P)),this.ctx.fillStyle=Cs(O),this.ctx.fill(),[2]})})},T.prototype.renderDoubleBorder=function(O,P,Y,ne){return i(this,void 0,void 0,function(){var Ae,Ce;return o(this,function(je){switch(je.label){case 0:return P<3?[4,this.renderSolidBorder(O,Y,ne)]:[3,2];case 1:return je.sent(),[2];case 2:return Ae=Kse(ne,Y),this.path(Ae),this.ctx.fillStyle=Cs(O),this.ctx.fill(),Ce=Yse(ne,Y),this.path(Ce),this.ctx.fill(),[2]}})})},T.prototype.renderNodeBackgroundAndBorders=function(O){return i(this,void 0,void 0,function(){var P,Y,ne,Ae,Ce,je,Re,Ue,We=this;return o(this,function(ct){switch(ct.label){case 0:return this.applyEffects(O.getEffects(2)),P=O.container.styles,Y=!Lo(P.backgroundColor)||P.backgroundImage.length,ne=[{style:P.borderTopStyle,color:P.borderTopColor,width:P.borderTopWidth},{style:P.borderRightStyle,color:P.borderRightColor,width:P.borderRightWidth},{style:P.borderBottomStyle,color:P.borderBottomColor,width:P.borderBottomWidth},{style:P.borderLeftStyle,color:P.borderLeftColor,width:P.borderLeftWidth}],Ae=oae(fg(P.backgroundClip,0),O.curves),Y||P.boxShadow.length?(this.ctx.save(),this.path(Ae),this.ctx.clip(),Lo(P.backgroundColor)||(this.ctx.fillStyle=Cs(P.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(O.container)]):[3,2];case 1:ct.sent(),this.ctx.restore(),P.boxShadow.slice(0).reverse().forEach(function(Gt){We.ctx.save();var kt=T1(O.curves),Ut=Gt.inset?0:sae,kr=Gse(kt,-Ut+(Gt.inset?1:-1)*Gt.spread.number,(Gt.inset?1:-1)*Gt.spread.number,Gt.spread.number*(Gt.inset?-2:2),Gt.spread.number*(Gt.inset?-2:2));Gt.inset?(We.path(kt),We.ctx.clip(),We.mask(kr)):(We.mask(kt),We.ctx.clip(),We.path(kr)),We.ctx.shadowOffsetX=Gt.offsetX.number+Ut,We.ctx.shadowOffsetY=Gt.offsetY.number,We.ctx.shadowColor=Cs(Gt.color),We.ctx.shadowBlur=Gt.blur.number,We.ctx.fillStyle=Gt.inset?Cs(Gt.color):"rgba(0,0,0,1)",We.ctx.fill(),We.ctx.restore()}),ct.label=2;case 2:Ce=0,je=0,Re=ne,ct.label=3;case 3:return je<Re.length?(Ue=Re[je],Ue.style!==0&&!Lo(Ue.color)&&Ue.width>0?Ue.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Ue.color,Ue.width,Ce,O.curves,2)]:[3,11]):[3,13];case 4:return ct.sent(),[3,11];case 5:return Ue.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Ue.color,Ue.width,Ce,O.curves,3)];case 6:return ct.sent(),[3,11];case 7:return Ue.style!==4?[3,9]:[4,this.renderDoubleBorder(Ue.color,Ue.width,Ce,O.curves)];case 8:return ct.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Ue.color,Ce,O.curves)];case 10:ct.sent(),ct.label=11;case 11:Ce++,ct.label=12;case 12:return je++,[3,3];case 13:return[2]}})})},T.prototype.renderDashedDottedBorder=function(O,P,Y,ne,Ae){return i(this,void 0,void 0,function(){var Ce,je,Re,Ue,We,ct,Gt,kt,Ut,kr,sr,er,un,Lr,wr,zt,wr,zt;return o(this,function(en){return this.ctx.save(),Ce=Xse(ne,Y),je=vR(ne,Y),Ae===2&&(this.path(je),this.ctx.clip()),Al(je[0])?(Re=je[0].start.x,Ue=je[0].start.y):(Re=je[0].x,Ue=je[0].y),Al(je[1])?(We=je[1].end.x,ct=je[1].end.y):(We=je[1].x,ct=je[1].y),Y===0||Y===2?Gt=Math.abs(Re-We):Gt=Math.abs(Ue-ct),this.ctx.beginPath(),Ae===3?this.formatPath(Ce):this.formatPath(je.slice(0,2)),kt=P<3?P*3:P*2,Ut=P<3?P*2:P,Ae===3&&(kt=P,Ut=P),kr=!0,Gt<=kt*2?kr=!1:Gt<=kt*2+Ut?(sr=Gt/(2*kt+Ut),kt*=sr,Ut*=sr):(er=Math.floor((Gt+Ut)/(kt+Ut)),un=(Gt-er*kt)/(er-1),Lr=(Gt-(er+1)*kt)/er,Ut=Lr<=0||Math.abs(Ut-un)<Math.abs(Ut-Lr)?un:Lr),kr&&(Ae===3?this.ctx.setLineDash([0,kt+Ut]):this.ctx.setLineDash([kt,Ut])),Ae===3?(this.ctx.lineCap="round",this.ctx.lineWidth=P):this.ctx.lineWidth=P*2+1.1,this.ctx.strokeStyle=Cs(O),this.ctx.stroke(),this.ctx.setLineDash([]),Ae===2&&(Al(je[0])&&(wr=je[3],zt=je[0],this.ctx.beginPath(),this.formatPath([new Qt(wr.end.x,wr.end.y),new Qt(zt.start.x,zt.start.y)]),this.ctx.stroke()),Al(je[1])&&(wr=je[1],zt=je[2],this.ctx.beginPath(),this.formatPath([new Qt(wr.end.x,wr.end.y),new Qt(zt.start.x,zt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},T.prototype.render=function(O){return i(this,void 0,void 0,function(){var P;return o(this,function(Y){switch(Y.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),P=qse(O),[4,this.renderStack(P)];case 1:return Y.sent(),this.applyEffects([]),[2,this.canvas]}})})},T}(wR),iae=function(I){return I instanceof WF||I instanceof VF?!0:I instanceof q5&&I.type!==j1&&I.type!==w1},oae=function(I,T){switch(I){case 0:return T1(T);case 2:return Hse(T);case 1:default:return D1(T)}},lae=function(I){switch(I){case 1:return"center";case 2:return"right";case 0:default:return"left"}},cae=["-apple-system","system-ui"],uae=function(I){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?I.filter(function(T){return cae.indexOf(T)===-1}):I},dae=function(I){n(T,I);function T(O,P){var Y=I.call(this,O,P)||this;return Y.canvas=P.canvas?P.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),Y.options=P,Y.canvas.width=Math.floor(P.width*P.scale),Y.canvas.height=Math.floor(P.height*P.scale),Y.canvas.style.width=P.width+"px",Y.canvas.style.height=P.height+"px",Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-P.x,-P.y),Y.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+P.width+"x"+P.height+" at "+P.x+","+P.y+") with scale "+P.scale),Y}return T.prototype.render=function(O){return i(this,void 0,void 0,function(){var P,Y;return o(this,function(ne){switch(ne.label){case 0:return P=ag(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,O),[4,fae(P)];case 1:return Y=ne.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(Y,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},T}(wR),fae=function(I){return new Promise(function(T,O){var P=new Image;P.onload=function(){T(P)},P.onerror=O,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(I))})},hae=function(){function I(T){var O=T.id,P=T.enabled;this.id=O,this.enabled=P,this.start=Date.now()}return I.prototype.debug=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,l([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},I.prototype.getTime=function(){return Date.now()-this.start},I.prototype.info=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,l([this.id,this.getTime()+"ms"],T))},I.prototype.warn=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,l([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},I.prototype.error=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,l([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},I.instances={},I}(),Aae=function(){function I(T,O){var P;this.windowBounds=O,this.instanceName="#"+I.instanceCount++,this.logger=new hae({id:this.instanceName,enabled:T.logging}),this.cache=(P=T.cache)!==null&&P!==void 0?P:new kse(this,T)}return I.instanceCount=1,I}(),mae=function(I,T){return T===void 0&&(T={}),pae(I,T)};typeof window<"u"&&hR.setContext(window);var pae=function(I,T){return i(void 0,void 0,void 0,function(){var O,P,Y,ne,Ae,Ce,je,Re,Ue,We,ct,Gt,kt,Ut,kr,sr,er,un,Lr,wr,en,zt,en,tn,Sr,aa,Ao,zo,kn,Ua,Hf,mo,po,yA,Jc,Qf,wA,jA,ud,CA;return o(this,function(dd){switch(dd.label){case 0:if(!I||typeof I!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(O=I.ownerDocument,!O)throw new Error("Element is not attached to a Document");if(P=O.defaultView,!P)throw new Error("Document is not attached to a Window");return Y={allowTaint:(tn=T.allowTaint)!==null&&tn!==void 0?tn:!1,imageTimeout:(Sr=T.imageTimeout)!==null&&Sr!==void 0?Sr:15e3,proxy:T.proxy,useCORS:(aa=T.useCORS)!==null&&aa!==void 0?aa:!1},ne=a({logging:(Ao=T.logging)!==null&&Ao!==void 0?Ao:!0,cache:T.cache},Y),Ae={windowWidth:(zo=T.windowWidth)!==null&&zo!==void 0?zo:P.innerWidth,windowHeight:(kn=T.windowHeight)!==null&&kn!==void 0?kn:P.innerHeight,scrollX:(Ua=T.scrollX)!==null&&Ua!==void 0?Ua:P.pageXOffset,scrollY:(Hf=T.scrollY)!==null&&Hf!==void 0?Hf:P.pageYOffset},Ce=new c(Ae.scrollX,Ae.scrollY,Ae.windowWidth,Ae.windowHeight),je=new Aae(ne,Ce),Re=(mo=T.foreignObjectRendering)!==null&&mo!==void 0?mo:!1,Ue={allowTaint:(po=T.allowTaint)!==null&&po!==void 0?po:!1,onclone:T.onclone,ignoreElements:T.ignoreElements,inlineImages:Re,copyStyles:Re},je.logger.debug("Starting document clone with size "+Ce.width+"x"+Ce.height+" scrolled to "+-Ce.left+","+-Ce.top),We=new dR(je,I,Ue),ct=We.clonedReferenceElement,ct?[4,We.toIFrame(O,Ce)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Gt=dd.sent(),kt=Y5(ct)||gse(ct)?d(ct.ownerDocument):u(je,ct),Ut=kt.width,kr=kt.height,sr=kt.left,er=kt.top,un=gae(je,ct,T.backgroundColor),Lr={canvas:T.canvas,backgroundColor:un,scale:(Jc=(yA=T.scale)!==null&&yA!==void 0?yA:P.devicePixelRatio)!==null&&Jc!==void 0?Jc:1,x:((Qf=T.x)!==null&&Qf!==void 0?Qf:0)+sr,y:((wA=T.y)!==null&&wA!==void 0?wA:0)+er,width:(jA=T.width)!==null&&jA!==void 0?jA:Math.ceil(Ut),height:(ud=T.height)!==null&&ud!==void 0?ud:Math.ceil(kr)},Re?(je.logger.debug("Document cloned, using foreign object rendering"),en=new dae(je,Lr),[4,en.render(ct)]):[3,3];case 2:return wr=dd.sent(),[3,5];case 3:return je.logger.debug("Document cloned, element located at "+sr+","+er+" with size "+Ut+"x"+kr+" using computed rendering"),je.logger.debug("Starting DOM parsing"),zt=KF(je,ct),un===zt.styles.backgroundColor&&(zt.styles.backgroundColor=ti.TRANSPARENT),je.logger.debug("Starting renderer for element at "+Lr.x+","+Lr.y+" with size "+Lr.width+"x"+Lr.height),en=new aae(je,Lr),[4,en.render(zt)];case 4:wr=dd.sent(),dd.label=5;case 5:return(!((CA=T.removeContainer)!==null&&CA!==void 0)||CA)&&(dR.destroy(Gt)||je.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),je.logger.debug("Finished rendering"),[2,wr]}})})},gae=function(I,T,O){var P=T.ownerDocument,Y=P.documentElement?_i(I,getComputedStyle(P.documentElement).backgroundColor):ti.TRANSPARENT,ne=P.body?_i(I,getComputedStyle(P.body).backgroundColor):ti.TRANSPARENT,Ae=typeof O=="string"?_i(I,O):O===null?ti.TRANSPARENT:4294967295;return T===P.documentElement?Lo(Y)?Lo(ne)?Ae:ne:Y:Ae};return mae})}(IT)),IT.exports}/*!
 * html2pdf.js v0.10.3
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */(function(t,e){(function(n,a){t.exports=a(iGe,oGe())})(self,function(r,n){return function(){var a={"./src/plugin/hyperlinks.js":function(c,u,d){d.r(u),d("./node_modules/core-js/modules/web.dom-collections.for-each.js"),d("./node_modules/core-js/modules/es.string.link.js");var f=d("./src/worker.js"),A=d("./src/utils.js"),h=[],m={toContainer:f.default.prototype.toContainer,toPdf:f.default.prototype.toPdf};f.default.prototype.toContainer=function(){return m.toContainer.call(this).then(function(){if(this.opt.enableLinks){var x=this.prop.container,v=x.querySelectorAll("a"),b=(0,A.unitConvert)(x.getBoundingClientRect(),this.prop.pageSize.k);h=[],Array.prototype.forEach.call(v,function(C){for(var j=C.getClientRects(),w=0;w<j.length;w++){var N=(0,A.unitConvert)(j[w],this.prop.pageSize.k);N.left-=b.left,N.top-=b.top;var E=Math.floor(N.top/this.prop.pageSize.inner.height)+1,_=this.opt.margin[0]+N.top%this.prop.pageSize.inner.height,k=this.opt.margin[1]+N.left;h.push({page:E,top:_,left:k,clientRect:N,link:C})}},this)}})},f.default.prototype.toPdf=function(){return m.toPdf.call(this).then(function(){if(this.opt.enableLinks){h.forEach(function(v){this.prop.pdf.setPage(v.page),this.prop.pdf.link(v.left,v.top,v.clientRect.width,v.clientRect.height,{url:v.link.href})},this);var x=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(x)}})}},"./src/plugin/jspdf-plugin.js":function(c,u,d){d.r(u),d("./node_modules/core-js/modules/es.symbol.js"),d("./node_modules/core-js/modules/es.symbol.description.js"),d("./node_modules/core-js/modules/es.object.to-string.js"),d("./node_modules/core-js/modules/es.symbol.iterator.js"),d("./node_modules/core-js/modules/es.array.iterator.js"),d("./node_modules/core-js/modules/es.string.iterator.js"),d("./node_modules/core-js/modules/web.dom-collections.iterator.js");var f=d("jspdf");function A(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(p){return typeof p}:A=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},A(h)}f.jsPDF.getPageSize=function(h,m,p){if(A(h)==="object"){var g=h;h=g.orientation,m=g.unit||m,p=g.format||p}m=m||"mm",p=p||"a4",h=(""+(h||"P")).toLowerCase();var x=(""+p).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":var b=1;break;case"mm":var b=72/25.4;break;case"cm":var b=72/2.54;break;case"in":var b=72;break;case"px":var b=72/96;break;case"pc":var b=12;break;case"em":var b=12;break;case"ex":var b=6;break;default:throw"Invalid unit: "+m}if(v.hasOwnProperty(x))var C=v[x][1]/b,j=v[x][0]/b;else try{var C=p[1],j=p[0]}catch{throw new Error("Invalid format: "+p)}if(h==="p"||h==="portrait"){if(h="p",j>C){var w=j;j=C,C=w}}else if(h==="l"||h==="landscape"){if(h="l",C>j){var w=j;j=C,C=w}}else throw"Invalid orientation: "+h;var N={width:j,height:C,unit:m,k:b};return N},u.default=f.jsPDF},"./src/plugin/pagebreaks.js":function(c,u,d){d.r(u),d("./node_modules/core-js/modules/es.array.concat.js"),d("./node_modules/core-js/modules/es.array.slice.js"),d("./node_modules/core-js/modules/es.array.join.js"),d("./node_modules/core-js/modules/web.dom-collections.for-each.js"),d("./node_modules/core-js/modules/es.object.keys.js");var f=d("./src/worker.js"),A=d("./src/utils.js"),h={toContainer:f.default.prototype.toContainer};f.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},f.default.prototype.toContainer=function(){return h.toContainer.call(this).then(function(){var g=this.prop.container,x=this.prop.pageSize.inner.px.height,v=[].concat(this.opt.pagebreak.mode),b={avoidAll:v.indexOf("avoid-all")!==-1,css:v.indexOf("css")!==-1,legacy:v.indexOf("legacy")!==-1},C={},j=this;["before","after","avoid"].forEach(function(E){var _=b.avoidAll&&E==="avoid";C[E]=_?[]:[].concat(j.opt.pagebreak[E]||[]),C[E].length>0&&(C[E]=Array.prototype.slice.call(g.querySelectorAll(C[E].join(", "))))});var w=g.querySelectorAll(".html2pdf__page-break");w=Array.prototype.slice.call(w);var N=g.querySelectorAll("*");Array.prototype.forEach.call(N,function(_){var k={before:!1,after:b.legacy&&w.indexOf(_)!==-1,avoid:b.avoidAll};if(b.css){var D=window.getComputedStyle(_),S=["always","page","left","right"],F=["avoid","avoid-page"];k={before:k.before||S.indexOf(D.breakBefore||D.pageBreakBefore)!==-1,after:k.after||S.indexOf(D.breakAfter||D.pageBreakAfter)!==-1,avoid:k.avoid||F.indexOf(D.breakInside||D.pageBreakInside)!==-1}}Object.keys(k).forEach(function(H){k[H]=k[H]||C[H].indexOf(_)!==-1});var M=_.getBoundingClientRect();if(k.avoid&&!k.before){var R=Math.floor(M.top/x),U=Math.floor(M.bottom/x),z=Math.abs(M.bottom-M.top)/x;U!==R&&z<=1&&(k.before=!0)}if(k.before){var Q=(0,A.createElement)("div",{style:{display:"block",height:x-M.top%x+"px"}});_.parentNode.insertBefore(Q,_)}if(k.after){var Q=(0,A.createElement)("div",{style:{display:"block",height:x-M.bottom%x+"px"}});_.parentNode.insertBefore(Q,_.nextSibling)}})})}},"./src/utils.js":function(c,u,d){d.r(u),d.d(u,{objType:function(){return A},createElement:function(){return h},cloneNode:function(){return m},unitConvert:function(){return p},toPx:function(){return g}}),d("./node_modules/core-js/modules/es.number.constructor.js"),d("./node_modules/core-js/modules/es.symbol.js"),d("./node_modules/core-js/modules/es.symbol.description.js"),d("./node_modules/core-js/modules/es.object.to-string.js"),d("./node_modules/core-js/modules/es.symbol.iterator.js"),d("./node_modules/core-js/modules/es.array.iterator.js"),d("./node_modules/core-js/modules/es.string.iterator.js"),d("./node_modules/core-js/modules/web.dom-collections.iterator.js");function f(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(b){return typeof b}:f=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(x)}var A=function(v){var b=f(v);return b==="undefined"?"undefined":b==="string"||v instanceof String?"string":b==="number"||v instanceof Number?"number":b==="function"||v instanceof Function?"function":v&&v.constructor===Array?"array":v&&v.nodeType===1?"element":b==="object"?"object":"unknown"},h=function(v,b){var C=document.createElement(v);if(b.className&&(C.className=b.className),b.innerHTML){C.innerHTML=b.innerHTML;for(var j=C.getElementsByTagName("script"),w=j.length;w-- >0;null)j[w].parentNode.removeChild(j[w])}for(var N in b.style)C.style[N]=b.style[N];return C},m=function x(v,b){for(var C=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),j=v.firstChild;j;j=j.nextSibling)(b===!0||j.nodeType!==1||j.nodeName!=="SCRIPT")&&C.appendChild(x(j,b));return v.nodeType===1&&(v.nodeName==="CANVAS"?(C.width=v.width,C.height=v.height,C.getContext("2d").drawImage(v,0,0)):(v.nodeName==="TEXTAREA"||v.nodeName==="SELECT")&&(C.value=v.value),C.addEventListener("load",function(){C.scrollTop=v.scrollTop,C.scrollLeft=v.scrollLeft},!0)),C},p=function(v,b){if(A(v)==="number")return v*72/96/b;var C={};for(var j in v)C[j]=v[j]*72/96/b;return C},g=function(v,b){return Math.floor(v*b/72*96)}},"./src/worker.js":function(c,u,d){d.r(u),d("./node_modules/core-js/modules/es.object.assign.js"),d("./node_modules/core-js/modules/es.array.map.js"),d("./node_modules/core-js/modules/es.object.keys.js"),d("./node_modules/core-js/modules/es.array.concat.js"),d("./node_modules/core-js/modules/es.object.to-string.js"),d("./node_modules/core-js/modules/es.regexp.to-string.js"),d("./node_modules/core-js/modules/es.function.name.js"),d("./node_modules/core-js/modules/web.dom-collections.for-each.js");var f=d("jspdf"),A=d("html2canvas"),h=d("./src/utils.js"),m=d("./node_modules/es6-promise/dist/es6-promise.js"),p=d.n(m),g=p().Promise,x=function v(b){var C=Object.assign(v.convert(g.resolve()),JSON.parse(JSON.stringify(v.template))),j=v.convert(g.resolve(),C);return j=j.setProgress(1,v,1,[v]),j=j.set(b),j};x.prototype=Object.create(g.prototype),x.prototype.constructor=x,x.convert=function(b,C){return b.__proto__=C||x.prototype,b},x.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},x.prototype.from=function(b,C){function j(w){switch((0,h.objType)(w)){case"string":return"string";case"element":return w.nodeName.toLowerCase&&w.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(C=C||j(b),C){case"string":return this.set({src:(0,h.createElement)("div",{innerHTML:b})});case"element":return this.set({src:b});case"canvas":return this.set({canvas:b});case"img":return this.set({img:b});default:return this.error("Unknown source type.")}})},x.prototype.to=function(b){switch(b){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},x.prototype.toContainer=function(){var b=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(b).then(function(){var j={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},w={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};j.opacity=0;var N=(0,h.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,h.createElement)("div",{className:"html2pdf__overlay",style:j}),this.prop.container=(0,h.createElement)("div",{className:"html2pdf__container",style:w}),this.prop.container.appendChild(N),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},x.prototype.toCanvas=function(){var b=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(b).then(function(){var j=Object.assign({},this.opt.html2canvas);return delete j.onrendered,A(this.prop.container,j)}).then(function(j){var w=this.opt.html2canvas.onrendered||function(){};w(j),this.prop.canvas=j,document.body.removeChild(this.prop.overlay)})},x.prototype.toImg=function(){var b=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(b).then(function(){var j=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=j})},x.prototype.toPdf=function(){var b=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(b).then(function(){var j=this.prop.canvas,w=this.opt,N=j.height,E=Math.floor(j.width*this.prop.pageSize.inner.ratio),_=Math.ceil(N/E),k=this.prop.pageSize.inner.height,D=document.createElement("canvas"),S=D.getContext("2d");D.width=j.width,D.height=E,this.prop.pdf=this.prop.pdf||new f.jsPDF(w.jsPDF);for(var F=0;F<_;F++){F===_-1&&N%E!==0&&(D.height=N%E,k=D.height*this.prop.pageSize.inner.width/D.width);var M=D.width,R=D.height;S.fillStyle="white",S.fillRect(0,0,M,R),S.drawImage(j,0,F*E,M,R,0,0,M,R),F&&this.prop.pdf.addPage();var U=D.toDataURL("image/"+w.image.type,w.image.quality);this.prop.pdf.addImage(U,w.image.type,w.margin[1],w.margin[0],this.prop.pageSize.inner.width,k)}})},x.prototype.output=function(b,C,j){return j=j||"pdf",j.toLowerCase()==="img"||j.toLowerCase()==="image"?this.outputImg(b,C):this.outputPdf(b,C)},x.prototype.outputPdf=function(b,C){var j=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(j).then(function(){return this.prop.pdf.output(b,C)})},x.prototype.outputImg=function(b,C){var j=[function(){return this.prop.img||this.toImg()}];return this.thenList(j).then(function(){switch(b){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+b+'" is not supported.'}})},x.prototype.save=function(b){var C=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(C).set(b?{filename:b}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},x.prototype.set=function(b){if((0,h.objType)(b)!=="object")return this;var C=Object.keys(b||{}).map(function(j){switch(j){case"margin":return this.setMargin.bind(this,b.margin);case"jsPDF":return function(){return this.opt.jsPDF=b.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,b.pageSize);default:return j in x.template.prop?function(){this.prop[j]=b[j]}:function(){this.opt[j]=b[j]}}},this);return this.then(function(){return this.thenList(C)})},x.prototype.get=function(b,C){return this.then(function(){var w=b in x.template.prop?this.prop[b]:this.opt[b];return C?C(w):w})},x.prototype.setMargin=function(b){return this.then(function(){switch((0,h.objType)(b)){case"number":b=[b,b,b,b];case"array":if(b.length===2&&(b=[b[0],b[1],b[0],b[1]]),b.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=b}).then(this.setPageSize)},x.prototype.setPageSize=function(b){return this.then(function(){b=b||f.jsPDF.getPageSize(this.opt.jsPDF),b.hasOwnProperty("inner")||(b.inner={width:b.width-this.opt.margin[1]-this.opt.margin[3],height:b.height-this.opt.margin[0]-this.opt.margin[2]},b.inner.px={width:(0,h.toPx)(b.inner.width,b.k),height:(0,h.toPx)(b.inner.height,b.k)},b.inner.ratio=b.inner.height/b.inner.width),this.prop.pageSize=b})},x.prototype.setProgress=function(b,C,j,w){return b!=null&&(this.progress.val=b),C!=null&&(this.progress.state=C),j!=null&&(this.progress.n=j),w!=null&&(this.progress.stack=w),this.progress.ratio=this.progress.val/this.progress.state,this},x.prototype.updateProgress=function(b,C,j,w){return this.setProgress(b?this.progress.val+b:null,C||null,j?this.progress.n+j:null,w?this.progress.stack.concat(w):null)},x.prototype.then=function(b,C){var j=this;return this.thenCore(b,C,function(N,E){return j.updateProgress(null,null,1,[N]),g.prototype.then.call(this,function(k){return j.updateProgress(null,N),k}).then(N,E).then(function(k){return j.updateProgress(1),k})})},x.prototype.thenCore=function(b,C,j){j=j||g.prototype.then;var w=this;b&&(b=b.bind(w)),C&&(C=C.bind(w));var N=g.toString().indexOf("[native code]")!==-1&&g.name==="Promise",E=N?w:x.convert(Object.assign({},w),g.prototype),_=j.call(E,b,C);return x.convert(_,w.__proto__)},x.prototype.thenExternal=function(b,C){return g.prototype.then.call(this,b,C)},x.prototype.thenList=function(b){var C=this;return b.forEach(function(w){C=C.thenCore(w)}),C},x.prototype.catch=function(v){v&&(v=v.bind(this));var b=g.prototype.catch.call(this,v);return x.convert(b,this)},x.prototype.catchExternal=function(b){return g.prototype.catch.call(this,b)},x.prototype.error=function(b){return this.then(function(){throw new Error(b)})},x.prototype.using=x.prototype.set,x.prototype.saveAs=x.prototype.save,x.prototype.export=x.prototype.output,x.prototype.run=x.prototype.then,u.default=x},"./node_modules/core-js/internals/a-function.js":function(c){c.exports=function(u){if(typeof u!="function")throw TypeError(String(u)+" is not a function");return u}},"./node_modules/core-js/internals/a-possible-prototype.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js");c.exports=function(A){if(!f(A)&&A!==null)throw TypeError("Can't set "+String(A)+" as a prototype");return A}},"./node_modules/core-js/internals/add-to-unscopables.js":function(c,u,d){var f=d("./node_modules/core-js/internals/well-known-symbol.js"),A=d("./node_modules/core-js/internals/object-create.js"),h=d("./node_modules/core-js/internals/object-define-property.js"),m=f("unscopables"),p=Array.prototype;p[m]==null&&h.f(p,m,{configurable:!0,value:A(null)}),c.exports=function(g){p[m][g]=!0}},"./node_modules/core-js/internals/an-object.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js");c.exports=function(A){if(!f(A))throw TypeError(String(A)+" is not an object");return A}},"./node_modules/core-js/internals/array-for-each.js":function(c,u,d){var f=d("./node_modules/core-js/internals/array-iteration.js").forEach,A=d("./node_modules/core-js/internals/array-method-is-strict.js"),h=A("forEach");c.exports=h?[].forEach:function(p){return f(this,p,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-indexed-object.js"),A=d("./node_modules/core-js/internals/to-length.js"),h=d("./node_modules/core-js/internals/to-absolute-index.js"),m=function(p){return function(g,x,v){var b=f(g),C=A(b.length),j=h(v,C),w;if(p&&x!=x){for(;C>j;)if(w=b[j++],w!=w)return!0}else for(;C>j;j++)if((p||j in b)&&b[j]===x)return p||j||0;return!p&&-1}};c.exports={includes:m(!0),indexOf:m(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(c,u,d){var f=d("./node_modules/core-js/internals/function-bind-context.js"),A=d("./node_modules/core-js/internals/indexed-object.js"),h=d("./node_modules/core-js/internals/to-object.js"),m=d("./node_modules/core-js/internals/to-length.js"),p=d("./node_modules/core-js/internals/array-species-create.js"),g=[].push,x=function(v){var b=v==1,C=v==2,j=v==3,w=v==4,N=v==6,E=v==7,_=v==5||N;return function(k,D,S,F){for(var M=h(k),R=A(M),U=f(D,S,3),z=m(R.length),Q=0,H=F||p,q=b?H(k,z):C||E?H(k,0):void 0,X,$;z>Q;Q++)if((_||Q in R)&&(X=R[Q],$=U(X,Q,M),v))if(b)q[Q]=$;else if($)switch(v){case 3:return!0;case 5:return X;case 6:return Q;case 2:g.call(q,X)}else switch(v){case 4:return!1;case 7:g.call(q,X)}return N?-1:j||w?w:q}};c.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js"),A=d("./node_modules/core-js/internals/well-known-symbol.js"),h=d("./node_modules/core-js/internals/engine-v8-version.js"),m=A("species");c.exports=function(p){return h>=51||!f(function(){var g=[],x=g.constructor={};return x[m]=function(){return{foo:1}},g[p](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js");c.exports=function(A,h){var m=[][A];return!!m&&f(function(){m.call(null,h||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js"),A=d("./node_modules/core-js/internals/is-array.js"),h=d("./node_modules/core-js/internals/well-known-symbol.js"),m=h("species");c.exports=function(p){var g;return A(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||A(g.prototype))?g=void 0:f(g)&&(g=g[m],g===null&&(g=void 0))),g===void 0?Array:g}},"./node_modules/core-js/internals/array-species-create.js":function(c,u,d){var f=d("./node_modules/core-js/internals/array-species-constructor.js");c.exports=function(A,h){return new(f(A))(h===0?0:h)}},"./node_modules/core-js/internals/classof-raw.js":function(c){var u={}.toString;c.exports=function(d){return u.call(d).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-string-tag-support.js"),A=d("./node_modules/core-js/internals/classof-raw.js"),h=d("./node_modules/core-js/internals/well-known-symbol.js"),m=h("toStringTag"),p=A(function(){return arguments}())=="Arguments",g=function(x,v){try{return x[v]}catch{}};c.exports=f?A:function(x){var v,b,C;return x===void 0?"Undefined":x===null?"Null":typeof(b=g(v=Object(x),m))=="string"?b:p?A(v):(C=A(v))=="Object"&&typeof v.callee=="function"?"Arguments":C}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(c,u,d){var f=d("./node_modules/core-js/internals/has.js"),A=d("./node_modules/core-js/internals/own-keys.js"),h=d("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),m=d("./node_modules/core-js/internals/object-define-property.js");c.exports=function(p,g){for(var x=A(g),v=m.f,b=h.f,C=0;C<x.length;C++){var j=x[C];f(p,j)||v(p,j,b(g,j))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js");c.exports=!f(function(){function A(){}return A.prototype.constructor=null,Object.getPrototypeOf(new A)!==A.prototype})},"./node_modules/core-js/internals/create-html.js":function(c,u,d){var f=d("./node_modules/core-js/internals/require-object-coercible.js"),A=d("./node_modules/core-js/internals/to-string.js"),h=/"/g;c.exports=function(m,p,g,x){var v=A(f(m)),b="<"+p;return g!==""&&(b+=" "+g+'="'+A(x).replace(h,"&quot;")+'"'),b+">"+v+"</"+p+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(c,u,d){var f=d("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,A=d("./node_modules/core-js/internals/object-create.js"),h=d("./node_modules/core-js/internals/create-property-descriptor.js"),m=d("./node_modules/core-js/internals/set-to-string-tag.js"),p=d("./node_modules/core-js/internals/iterators.js"),g=function(){return this};c.exports=function(x,v,b){var C=v+" Iterator";return x.prototype=A(f,{next:h(1,b)}),m(x,C,!1,!0),p[C]=g,x}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/object-define-property.js"),h=d("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=f?function(m,p,g){return A.f(m,p,h(1,g))}:function(m,p,g){return m[p]=g,m}},"./node_modules/core-js/internals/create-property-descriptor.js":function(c){c.exports=function(u,d){return{enumerable:!(u&1),configurable:!(u&2),writable:!(u&4),value:d}}},"./node_modules/core-js/internals/create-property.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-property-key.js"),A=d("./node_modules/core-js/internals/object-define-property.js"),h=d("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=function(m,p,g){var x=f(p);x in m?A.f(m,x,h(0,g)):m[x]=g}},"./node_modules/core-js/internals/define-iterator.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/create-iterator-constructor.js"),h=d("./node_modules/core-js/internals/object-get-prototype-of.js"),m=d("./node_modules/core-js/internals/object-set-prototype-of.js"),p=d("./node_modules/core-js/internals/set-to-string-tag.js"),g=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=d("./node_modules/core-js/internals/redefine.js"),v=d("./node_modules/core-js/internals/well-known-symbol.js"),b=d("./node_modules/core-js/internals/is-pure.js"),C=d("./node_modules/core-js/internals/iterators.js"),j=d("./node_modules/core-js/internals/iterators-core.js"),w=j.IteratorPrototype,N=j.BUGGY_SAFARI_ITERATORS,E=v("iterator"),_="keys",k="values",D="entries",S=function(){return this};c.exports=function(F,M,R,U,z,Q,H){A(R,M,U);var q=function(re){if(re===z&&Z)return Z;if(!N&&re in K)return K[re];switch(re){case _:return function(){return new R(this,re)};case k:return function(){return new R(this,re)};case D:return function(){return new R(this,re)}}return function(){return new R(this)}},X=M+" Iterator",$=!1,K=F.prototype,se=K[E]||K["@@iterator"]||z&&K[z],Z=!N&&se||q(z),ie=M=="Array"&&K.entries||se,ee,ue,ae;if(ie&&(ee=h(ie.call(new F)),w!==Object.prototype&&ee.next&&(!b&&h(ee)!==w&&(m?m(ee,w):typeof ee[E]!="function"&&g(ee,E,S)),p(ee,X,!0,!0),b&&(C[X]=S))),z==k&&se&&se.name!==k&&($=!0,Z=function(){return se.call(this)}),(!b||H)&&K[E]!==Z&&g(K,E,Z),C[M]=Z,z)if(ue={values:q(k),keys:Q?Z:q(_),entries:q(D)},H)for(ae in ue)(N||$||!(ae in K))&&x(K,ae,ue[ae]);else f({target:M,proto:!0,forced:N||$},ue);return ue}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(c,u,d){var f=d("./node_modules/core-js/internals/path.js"),A=d("./node_modules/core-js/internals/has.js"),h=d("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),m=d("./node_modules/core-js/internals/object-define-property.js").f;c.exports=function(p){var g=f.Symbol||(f.Symbol={});A(g,p)||m(g,p,{value:h.f(p)})}},"./node_modules/core-js/internals/descriptors.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js");c.exports=!f(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/is-object.js"),h=f.document,m=A(h)&&A(h.createElement);c.exports=function(p){return m?h.createElement(p):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(c){c.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(c,u,d){var f=d("./node_modules/core-js/internals/get-built-in.js");c.exports=f("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/engine-user-agent.js"),h=f.process,m=f.Deno,p=h&&h.versions||m&&m.version,g=p&&p.v8,x,v;g?(x=g.split("."),v=x[0]<4?1:x[0]+x[1]):A&&(x=A.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=A.match(/Chrome\/(\d+)/),x&&(v=x[1]))),c.exports=v&&+v},"./node_modules/core-js/internals/enum-bug-keys.js":function(c){c.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,h=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),m=d("./node_modules/core-js/internals/redefine.js"),p=d("./node_modules/core-js/internals/set-global.js"),g=d("./node_modules/core-js/internals/copy-constructor-properties.js"),x=d("./node_modules/core-js/internals/is-forced.js");c.exports=function(v,b){var C=v.target,j=v.global,w=v.stat,N,E,_,k,D,S;if(j?E=f:w?E=f[C]||p(C,{}):E=(f[C]||{}).prototype,E)for(_ in b){if(D=b[_],v.noTargetGet?(S=A(E,_),k=S&&S.value):k=E[_],N=x(j?_:C+(w?".":"#")+_,v.forced),!N&&k!==void 0){if(typeof D==typeof k)continue;g(D,k)}(v.sham||k&&k.sham)&&h(D,"sham",!0),m(E,_,D,v)}}},"./node_modules/core-js/internals/fails.js":function(c){c.exports=function(u){try{return!!u()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(c,u,d){var f=d("./node_modules/core-js/internals/a-function.js");c.exports=function(A,h,m){if(f(A),h===void 0)return A;switch(m){case 0:return function(){return A.call(h)};case 1:return function(p){return A.call(h,p)};case 2:return function(p,g){return A.call(h,p,g)};case 3:return function(p,g,x){return A.call(h,p,g,x)}}return function(){return A.apply(h,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=function(h){return typeof h=="function"?h:void 0};c.exports=function(h,m){return arguments.length<2?A(f[h]):f[h]&&f[h][m]}},"./node_modules/core-js/internals/global.js":function(c){var u=function(d){return d&&d.Math==Math&&d};c.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof Yo=="object"&&Yo)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-object.js"),A={}.hasOwnProperty;c.exports=Object.hasOwn||function(m,p){return A.call(f(m),p)}},"./node_modules/core-js/internals/hidden-keys.js":function(c){c.exports={}},"./node_modules/core-js/internals/html.js":function(c,u,d){var f=d("./node_modules/core-js/internals/get-built-in.js");c.exports=f("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/fails.js"),h=d("./node_modules/core-js/internals/document-create-element.js");c.exports=!f&&!A(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js"),A=d("./node_modules/core-js/internals/classof-raw.js"),h="".split;c.exports=f(function(){return!Object("z").propertyIsEnumerable(0)})?function(m){return A(m)=="String"?h.call(m,""):Object(m)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js"),A=d("./node_modules/core-js/internals/object-set-prototype-of.js");c.exports=function(h,m,p){var g,x;return A&&typeof(g=m.constructor)=="function"&&g!==p&&f(x=g.prototype)&&x!==p.prototype&&A(h,x),h}},"./node_modules/core-js/internals/inspect-source.js":function(c,u,d){var f=d("./node_modules/core-js/internals/shared-store.js"),A=Function.toString;typeof f.inspectSource!="function"&&(f.inspectSource=function(h){return A.call(h)}),c.exports=f.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(c,u,d){var f=d("./node_modules/core-js/internals/native-weak-map.js"),A=d("./node_modules/core-js/internals/global.js"),h=d("./node_modules/core-js/internals/is-object.js"),m=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=d("./node_modules/core-js/internals/has.js"),g=d("./node_modules/core-js/internals/shared-store.js"),x=d("./node_modules/core-js/internals/shared-key.js"),v=d("./node_modules/core-js/internals/hidden-keys.js"),b="Object already initialized",C=A.WeakMap,j,w,N,E=function(R){return N(R)?w(R):j(R,{})},_=function(R){return function(U){var z;if(!h(U)||(z=w(U)).type!==R)throw TypeError("Incompatible receiver, "+R+" required");return z}};if(f||g.state){var k=g.state||(g.state=new C),D=k.get,S=k.has,F=k.set;j=function(R,U){if(S.call(k,R))throw new TypeError(b);return U.facade=R,F.call(k,R,U),U},w=function(R){return D.call(k,R)||{}},N=function(R){return S.call(k,R)}}else{var M=x("state");v[M]=!0,j=function(R,U){if(p(R,M))throw new TypeError(b);return U.facade=R,m(R,M,U),U},w=function(R){return p(R,M)?R[M]:{}},N=function(R){return p(R,M)}}c.exports={set:j,get:w,has:N,enforce:E,getterFor:_}},"./node_modules/core-js/internals/is-array.js":function(c,u,d){var f=d("./node_modules/core-js/internals/classof-raw.js");c.exports=Array.isArray||function(h){return f(h)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js"),A=/#|\.prototype\./,h=function(v,b){var C=p[m(v)];return C==x?!0:C==g?!1:typeof b=="function"?f(b):!!b},m=h.normalize=function(v){return String(v).replace(A,".").toLowerCase()},p=h.data={},g=h.NATIVE="N",x=h.POLYFILL="P";c.exports=h},"./node_modules/core-js/internals/is-object.js":function(c){c.exports=function(u){return typeof u=="object"?u!==null:typeof u=="function"}},"./node_modules/core-js/internals/is-pure.js":function(c){c.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(c,u,d){var f=d("./node_modules/core-js/internals/get-built-in.js"),A=d("./node_modules/core-js/internals/use-symbol-as-uid.js");c.exports=A?function(h){return typeof h=="symbol"}:function(h){var m=f("Symbol");return typeof m=="function"&&Object(h)instanceof m}},"./node_modules/core-js/internals/iterators-core.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js"),A=d("./node_modules/core-js/internals/object-get-prototype-of.js"),h=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),m=d("./node_modules/core-js/internals/has.js"),p=d("./node_modules/core-js/internals/well-known-symbol.js"),g=d("./node_modules/core-js/internals/is-pure.js"),x=p("iterator"),v=!1,b=function(){return this},C,j,w;[].keys&&(w=[].keys(),"next"in w?(j=A(A(w)),j!==Object.prototype&&(C=j)):v=!0);var N=C==null||f(function(){var E={};return C[x].call(E)!==E});N&&(C={}),(!g||N)&&!m(C,x)&&h(C,x,b),c.exports={IteratorPrototype:C,BUGGY_SAFARI_ITERATORS:v}},"./node_modules/core-js/internals/iterators.js":function(c){c.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(c,u,d){var f=d("./node_modules/core-js/internals/engine-v8-version.js"),A=d("./node_modules/core-js/internals/fails.js");c.exports=!!Object.getOwnPropertySymbols&&!A(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&f&&f<41})},"./node_modules/core-js/internals/native-weak-map.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/inspect-source.js"),h=f.WeakMap;c.exports=typeof h=="function"&&/native code/.test(A(h))},"./node_modules/core-js/internals/object-assign.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/fails.js"),h=d("./node_modules/core-js/internals/object-keys.js"),m=d("./node_modules/core-js/internals/object-get-own-property-symbols.js"),p=d("./node_modules/core-js/internals/object-property-is-enumerable.js"),g=d("./node_modules/core-js/internals/to-object.js"),x=d("./node_modules/core-js/internals/indexed-object.js"),v=Object.assign,b=Object.defineProperty;c.exports=!v||A(function(){if(f&&v({b:1},v(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var C={},j={},w=Symbol(),N="abcdefghijklmnopqrst";return C[w]=7,N.split("").forEach(function(E){j[E]=E}),v({},C)[w]!=7||h(v({},j)).join("")!=N})?function(j,w){for(var N=g(j),E=arguments.length,_=1,k=m.f,D=p.f;E>_;)for(var S=x(arguments[_++]),F=k?h(S).concat(k(S)):h(S),M=F.length,R=0,U;M>R;)U=F[R++],(!f||D.call(S,U))&&(N[U]=S[U]);return N}:v},"./node_modules/core-js/internals/object-create.js":function(c,u,d){var f=d("./node_modules/core-js/internals/an-object.js"),A=d("./node_modules/core-js/internals/object-define-properties.js"),h=d("./node_modules/core-js/internals/enum-bug-keys.js"),m=d("./node_modules/core-js/internals/hidden-keys.js"),p=d("./node_modules/core-js/internals/html.js"),g=d("./node_modules/core-js/internals/document-create-element.js"),x=d("./node_modules/core-js/internals/shared-key.js"),v=">",b="<",C="prototype",j="script",w=x("IE_PROTO"),N=function(){},E=function(F){return b+j+v+F+b+"/"+j+v},_=function(F){F.write(E("")),F.close();var M=F.parentWindow.Object;return F=null,M},k=function(){var F=g("iframe"),M="java"+j+":",R;if(F.style)return F.style.display="none",p.appendChild(F),F.src=String(M),R=F.contentWindow.document,R.open(),R.write(E("document.F=Object")),R.close(),R.F},D,S=function(){try{D=new ActiveXObject("htmlfile")}catch{}S=document.domain&&D?_(D):k()||_(D);for(var F=h.length;F--;)delete S[C][h[F]];return S()};m[w]=!0,c.exports=Object.create||function(M,R){var U;return M!==null?(N[C]=f(M),U=new N,N[C]=null,U[w]=M):U=S(),R===void 0?U:A(U,R)}},"./node_modules/core-js/internals/object-define-properties.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/object-define-property.js"),h=d("./node_modules/core-js/internals/an-object.js"),m=d("./node_modules/core-js/internals/object-keys.js");c.exports=f?Object.defineProperties:function(g,x){h(g);for(var v=m(x),b=v.length,C=0,j;b>C;)A.f(g,j=v[C++],x[j]);return g}},"./node_modules/core-js/internals/object-define-property.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/ie8-dom-define.js"),h=d("./node_modules/core-js/internals/an-object.js"),m=d("./node_modules/core-js/internals/to-property-key.js"),p=Object.defineProperty;u.f=f?p:function(x,v,b){if(h(x),v=m(v),h(b),A)try{return p(x,v,b)}catch{}if("get"in b||"set"in b)throw TypeError("Accessors not supported");return"value"in b&&(x[v]=b.value),x}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/object-property-is-enumerable.js"),h=d("./node_modules/core-js/internals/create-property-descriptor.js"),m=d("./node_modules/core-js/internals/to-indexed-object.js"),p=d("./node_modules/core-js/internals/to-property-key.js"),g=d("./node_modules/core-js/internals/has.js"),x=d("./node_modules/core-js/internals/ie8-dom-define.js"),v=Object.getOwnPropertyDescriptor;u.f=f?v:function(C,j){if(C=m(C),j=p(j),x)try{return v(C,j)}catch{}if(g(C,j))return h(!A.f.call(C,j),C[j])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-indexed-object.js"),A=d("./node_modules/core-js/internals/object-get-own-property-names.js").f,h={}.toString,m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(g){try{return A(g)}catch{return m.slice()}};c.exports.f=function(x){return m&&h.call(x)=="[object Window]"?p(x):A(f(x))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(c,u,d){var f=d("./node_modules/core-js/internals/object-keys-internal.js"),A=d("./node_modules/core-js/internals/enum-bug-keys.js"),h=A.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(p){return f(p,h)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(c,u){u.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(c,u,d){var f=d("./node_modules/core-js/internals/has.js"),A=d("./node_modules/core-js/internals/to-object.js"),h=d("./node_modules/core-js/internals/shared-key.js"),m=d("./node_modules/core-js/internals/correct-prototype-getter.js"),p=h("IE_PROTO"),g=Object.prototype;c.exports=m?Object.getPrototypeOf:function(x){return x=A(x),f(x,p)?x[p]:typeof x.constructor=="function"&&x instanceof x.constructor?x.constructor.prototype:x instanceof Object?g:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(c,u,d){var f=d("./node_modules/core-js/internals/has.js"),A=d("./node_modules/core-js/internals/to-indexed-object.js"),h=d("./node_modules/core-js/internals/array-includes.js").indexOf,m=d("./node_modules/core-js/internals/hidden-keys.js");c.exports=function(p,g){var x=A(p),v=0,b=[],C;for(C in x)!f(m,C)&&f(x,C)&&b.push(C);for(;g.length>v;)f(x,C=g[v++])&&(~h(b,C)||b.push(C));return b}},"./node_modules/core-js/internals/object-keys.js":function(c,u,d){var f=d("./node_modules/core-js/internals/object-keys-internal.js"),A=d("./node_modules/core-js/internals/enum-bug-keys.js");c.exports=Object.keys||function(m){return f(m,A)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(c,u){var d={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,A=f&&!d.call({1:2},1);u.f=A?function(m){var p=f(this,m);return!!p&&p.enumerable}:d},"./node_modules/core-js/internals/object-set-prototype-of.js":function(c,u,d){var f=d("./node_modules/core-js/internals/an-object.js"),A=d("./node_modules/core-js/internals/a-possible-prototype.js");c.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h=!1,m={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(m,[]),h=m instanceof Array}catch{}return function(x,v){return f(x),A(v),h?p.call(x,v):x.__proto__=v,x}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-string-tag-support.js"),A=d("./node_modules/core-js/internals/classof.js");c.exports=f?{}.toString:function(){return"[object "+A(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js");c.exports=function(A,h){var m,p;if(h==="string"&&typeof(m=A.toString)=="function"&&!f(p=m.call(A))||typeof(m=A.valueOf)=="function"&&!f(p=m.call(A))||h!=="string"&&typeof(m=A.toString)=="function"&&!f(p=m.call(A)))return p;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(c,u,d){var f=d("./node_modules/core-js/internals/get-built-in.js"),A=d("./node_modules/core-js/internals/object-get-own-property-names.js"),h=d("./node_modules/core-js/internals/object-get-own-property-symbols.js"),m=d("./node_modules/core-js/internals/an-object.js");c.exports=f("Reflect","ownKeys")||function(g){var x=A.f(m(g)),v=h.f;return v?x.concat(v(g)):x}},"./node_modules/core-js/internals/path.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js");c.exports=f},"./node_modules/core-js/internals/redefine.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),h=d("./node_modules/core-js/internals/has.js"),m=d("./node_modules/core-js/internals/set-global.js"),p=d("./node_modules/core-js/internals/inspect-source.js"),g=d("./node_modules/core-js/internals/internal-state.js"),x=g.get,v=g.enforce,b=String(String).split("String");(c.exports=function(C,j,w,N){var E=N?!!N.unsafe:!1,_=N?!!N.enumerable:!1,k=N?!!N.noTargetGet:!1,D;if(typeof w=="function"&&(typeof j=="string"&&!h(w,"name")&&A(w,"name",j),D=v(w),D.source||(D.source=b.join(typeof j=="string"?j:""))),C===f){_?C[j]=w:m(j,w);return}else E?!k&&C[j]&&(_=!0):delete C[j];_?C[j]=w:A(C,j,w)})(Function.prototype,"toString",function(){return typeof this=="function"&&x(this).source||p(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(c,u,d){var f=d("./node_modules/core-js/internals/an-object.js");c.exports=function(){var A=f(this),h="";return A.global&&(h+="g"),A.ignoreCase&&(h+="i"),A.multiline&&(h+="m"),A.dotAll&&(h+="s"),A.unicode&&(h+="u"),A.sticky&&(h+="y"),h}},"./node_modules/core-js/internals/require-object-coercible.js":function(c){c.exports=function(u){if(u==null)throw TypeError("Can't call method on "+u);return u}},"./node_modules/core-js/internals/set-global.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js");c.exports=function(A,h){try{Object.defineProperty(f,A,{value:h,configurable:!0,writable:!0})}catch{f[A]=h}return h}},"./node_modules/core-js/internals/set-to-string-tag.js":function(c,u,d){var f=d("./node_modules/core-js/internals/object-define-property.js").f,A=d("./node_modules/core-js/internals/has.js"),h=d("./node_modules/core-js/internals/well-known-symbol.js"),m=h("toStringTag");c.exports=function(p,g,x){p&&!A(p=x?p:p.prototype,m)&&f(p,m,{configurable:!0,value:g})}},"./node_modules/core-js/internals/shared-key.js":function(c,u,d){var f=d("./node_modules/core-js/internals/shared.js"),A=d("./node_modules/core-js/internals/uid.js"),h=f("keys");c.exports=function(m){return h[m]||(h[m]=A(m))}},"./node_modules/core-js/internals/shared-store.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/set-global.js"),h="__core-js_shared__",m=f[h]||A(h,{});c.exports=m},"./node_modules/core-js/internals/shared.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-pure.js"),A=d("./node_modules/core-js/internals/shared-store.js");(c.exports=function(h,m){return A[h]||(A[h]=m!==void 0?m:{})})("versions",[]).push({version:"3.16.0",mode:f?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(c,u,d){var f=d("./node_modules/core-js/internals/fails.js");c.exports=function(A){return f(function(){var h=""[A]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-integer.js"),A=d("./node_modules/core-js/internals/to-string.js"),h=d("./node_modules/core-js/internals/require-object-coercible.js"),m=function(p){return function(g,x){var v=A(h(g)),b=f(x),C=v.length,j,w;return b<0||b>=C?p?"":void 0:(j=v.charCodeAt(b),j<55296||j>56319||b+1===C||(w=v.charCodeAt(b+1))<56320||w>57343?p?v.charAt(b):j:p?v.slice(b,b+2):(j-55296<<10)+(w-56320)+65536)}};c.exports={codeAt:m(!1),charAt:m(!0)}},"./node_modules/core-js/internals/string-trim.js":function(c,u,d){var f=d("./node_modules/core-js/internals/require-object-coercible.js"),A=d("./node_modules/core-js/internals/to-string.js"),h=d("./node_modules/core-js/internals/whitespaces.js"),m="["+h+"]",p=RegExp("^"+m+m+"*"),g=RegExp(m+m+"*$"),x=function(v){return function(b){var C=A(f(b));return v&1&&(C=C.replace(p,"")),v&2&&(C=C.replace(g,"")),C}};c.exports={start:x(1),end:x(2),trim:x(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-integer.js"),A=Math.max,h=Math.min;c.exports=function(m,p){var g=f(m);return g<0?A(g+p,0):h(g,p)}},"./node_modules/core-js/internals/to-indexed-object.js":function(c,u,d){var f=d("./node_modules/core-js/internals/indexed-object.js"),A=d("./node_modules/core-js/internals/require-object-coercible.js");c.exports=function(h){return f(A(h))}},"./node_modules/core-js/internals/to-integer.js":function(c){var u=Math.ceil,d=Math.floor;c.exports=function(f){return isNaN(f=+f)?0:(f>0?d:u)(f)}},"./node_modules/core-js/internals/to-length.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-integer.js"),A=Math.min;c.exports=function(h){return h>0?A(f(h),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(c,u,d){var f=d("./node_modules/core-js/internals/require-object-coercible.js");c.exports=function(A){return Object(f(A))}},"./node_modules/core-js/internals/to-primitive.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-object.js"),A=d("./node_modules/core-js/internals/is-symbol.js"),h=d("./node_modules/core-js/internals/ordinary-to-primitive.js"),m=d("./node_modules/core-js/internals/well-known-symbol.js"),p=m("toPrimitive");c.exports=function(g,x){if(!f(g)||A(g))return g;var v=g[p],b;if(v!==void 0){if(x===void 0&&(x="default"),b=v.call(g,x),!f(b)||A(b))return b;throw TypeError("Can't convert object to primitive value")}return x===void 0&&(x="number"),h(g,x)}},"./node_modules/core-js/internals/to-property-key.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-primitive.js"),A=d("./node_modules/core-js/internals/is-symbol.js");c.exports=function(h){var m=f(h,"string");return A(m)?m:String(m)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(c,u,d){var f=d("./node_modules/core-js/internals/well-known-symbol.js"),A=f("toStringTag"),h={};h[A]="z",c.exports=String(h)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(c,u,d){var f=d("./node_modules/core-js/internals/is-symbol.js");c.exports=function(A){if(f(A))throw TypeError("Cannot convert a Symbol value to a string");return String(A)}},"./node_modules/core-js/internals/uid.js":function(c){var u=0,d=Math.random();c.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++u+d).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(c,u,d){var f=d("./node_modules/core-js/internals/native-symbol.js");c.exports=f&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(c,u,d){var f=d("./node_modules/core-js/internals/well-known-symbol.js");u.f=f},"./node_modules/core-js/internals/well-known-symbol.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/shared.js"),h=d("./node_modules/core-js/internals/has.js"),m=d("./node_modules/core-js/internals/uid.js"),p=d("./node_modules/core-js/internals/native-symbol.js"),g=d("./node_modules/core-js/internals/use-symbol-as-uid.js"),x=A("wks"),v=f.Symbol,b=g?v:v&&v.withoutSetter||m;c.exports=function(C){return(!h(x,C)||!(p||typeof x[C]=="string"))&&(p&&h(v,C)?x[C]=v[C]:x[C]=b("Symbol."+C)),x[C]}},"./node_modules/core-js/internals/whitespaces.js":function(c){c.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/fails.js"),h=d("./node_modules/core-js/internals/is-array.js"),m=d("./node_modules/core-js/internals/is-object.js"),p=d("./node_modules/core-js/internals/to-object.js"),g=d("./node_modules/core-js/internals/to-length.js"),x=d("./node_modules/core-js/internals/create-property.js"),v=d("./node_modules/core-js/internals/array-species-create.js"),b=d("./node_modules/core-js/internals/array-method-has-species-support.js"),C=d("./node_modules/core-js/internals/well-known-symbol.js"),j=d("./node_modules/core-js/internals/engine-v8-version.js"),w=C("isConcatSpreadable"),N=9007199254740991,E="Maximum allowed index exceeded",_=j>=51||!A(function(){var F=[];return F[w]=!1,F.concat()[0]!==F}),k=b("concat"),D=function(F){if(!m(F))return!1;var M=F[w];return M!==void 0?!!M:h(F)},S=!_||!k;f({target:"Array",proto:!0,forced:S},{concat:function(M){var R=p(this),U=v(R,0),z=0,Q,H,q,X,$;for(Q=-1,q=arguments.length;Q<q;Q++)if($=Q===-1?R:arguments[Q],D($)){if(X=g($.length),z+X>N)throw TypeError(E);for(H=0;H<X;H++,z++)H in $&&x(U,z,$[H])}else{if(z>=N)throw TypeError(E);x(U,z++,$)}return U.length=z,U}})},"./node_modules/core-js/modules/es.array.iterator.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-indexed-object.js"),A=d("./node_modules/core-js/internals/add-to-unscopables.js"),h=d("./node_modules/core-js/internals/iterators.js"),m=d("./node_modules/core-js/internals/internal-state.js"),p=d("./node_modules/core-js/internals/define-iterator.js"),g="Array Iterator",x=m.set,v=m.getterFor(g);c.exports=p(Array,"Array",function(b,C){x(this,{type:g,target:f(b),index:0,kind:C})},function(){var b=v(this),C=b.target,j=b.kind,w=b.index++;return!C||w>=C.length?(b.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:w,done:!1}:j=="values"?{value:C[w],done:!1}:{value:[w,C[w]],done:!1}},"values"),h.Arguments=h.Array,A("keys"),A("values"),A("entries")},"./node_modules/core-js/modules/es.array.join.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/indexed-object.js"),h=d("./node_modules/core-js/internals/to-indexed-object.js"),m=d("./node_modules/core-js/internals/array-method-is-strict.js"),p=[].join,g=A!=Object,x=m("join",",");f({target:"Array",proto:!0,forced:g||!x},{join:function(b){return p.call(h(this),b===void 0?",":b)}})},"./node_modules/core-js/modules/es.array.map.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/array-iteration.js").map,h=d("./node_modules/core-js/internals/array-method-has-species-support.js"),m=h("map");f({target:"Array",proto:!0,forced:!m},{map:function(g){return A(this,g,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/is-object.js"),h=d("./node_modules/core-js/internals/is-array.js"),m=d("./node_modules/core-js/internals/to-absolute-index.js"),p=d("./node_modules/core-js/internals/to-length.js"),g=d("./node_modules/core-js/internals/to-indexed-object.js"),x=d("./node_modules/core-js/internals/create-property.js"),v=d("./node_modules/core-js/internals/well-known-symbol.js"),b=d("./node_modules/core-js/internals/array-method-has-species-support.js"),C=b("slice"),j=v("species"),w=[].slice,N=Math.max;f({target:"Array",proto:!0,forced:!C},{slice:function(_,k){var D=g(this),S=p(D.length),F=m(_,S),M=m(k===void 0?S:k,S),R,U,z;if(h(D)&&(R=D.constructor,typeof R=="function"&&(R===Array||h(R.prototype))?R=void 0:A(R)&&(R=R[j],R===null&&(R=void 0)),R===Array||R===void 0))return w.call(D,F,M);for(U=new(R===void 0?Array:R)(N(M-F,0)),z=0;F<M;F++,z++)F in D&&x(U,z,D[F]);return U.length=z,U}})},"./node_modules/core-js/modules/es.function.name.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/object-define-property.js").f,h=Function.prototype,m=h.toString,p=/^\s*function ([^ (]*)/,g="name";f&&!(g in h)&&A(h,g,{configurable:!0,get:function(){try{return m.call(this).match(p)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(c,u,d){var f=d("./node_modules/core-js/internals/descriptors.js"),A=d("./node_modules/core-js/internals/global.js"),h=d("./node_modules/core-js/internals/is-forced.js"),m=d("./node_modules/core-js/internals/redefine.js"),p=d("./node_modules/core-js/internals/has.js"),g=d("./node_modules/core-js/internals/classof-raw.js"),x=d("./node_modules/core-js/internals/inherit-if-required.js"),v=d("./node_modules/core-js/internals/is-symbol.js"),b=d("./node_modules/core-js/internals/to-primitive.js"),C=d("./node_modules/core-js/internals/fails.js"),j=d("./node_modules/core-js/internals/object-create.js"),w=d("./node_modules/core-js/internals/object-get-own-property-names.js").f,N=d("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,E=d("./node_modules/core-js/internals/object-define-property.js").f,_=d("./node_modules/core-js/internals/string-trim.js").trim,k="Number",D=A[k],S=D.prototype,F=g(j(S))==k,M=function(H){if(v(H))throw TypeError("Cannot convert a Symbol value to a number");var q=b(H,"number"),X,$,K,se,Z,ie,ee,ue;if(typeof q=="string"&&q.length>2){if(q=_(q),X=q.charCodeAt(0),X===43||X===45){if($=q.charCodeAt(2),$===88||$===120)return NaN}else if(X===48){switch(q.charCodeAt(1)){case 66:case 98:K=2,se=49;break;case 79:case 111:K=8,se=55;break;default:return+q}for(Z=q.slice(2),ie=Z.length,ee=0;ee<ie;ee++)if(ue=Z.charCodeAt(ee),ue<48||ue>se)return NaN;return parseInt(Z,K)}}return+q};if(h(k,!D(" 0o1")||!D("0b1")||D("+0x1"))){for(var R=function(q){var X=arguments.length<1?0:q,$=this;return $ instanceof R&&(F?C(function(){S.valueOf.call($)}):g($)!=k)?x(new D(M(X)),$,R):M(X)},U=f?w(D):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),z=0,Q;U.length>z;z++)p(D,Q=U[z])&&!p(R,Q)&&E(R,Q,N(D,Q));R.prototype=S,S.constructor=R,m(A,k,R)}},"./node_modules/core-js/modules/es.object.assign.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/object-assign.js");f({target:"Object",stat:!0,forced:Object.assign!==A},{assign:A})},"./node_modules/core-js/modules/es.object.keys.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/to-object.js"),h=d("./node_modules/core-js/internals/object-keys.js"),m=d("./node_modules/core-js/internals/fails.js"),p=m(function(){h(1)});f({target:"Object",stat:!0,forced:p},{keys:function(x){return h(A(x))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(c,u,d){var f=d("./node_modules/core-js/internals/to-string-tag-support.js"),A=d("./node_modules/core-js/internals/redefine.js"),h=d("./node_modules/core-js/internals/object-to-string.js");f||A(Object.prototype,"toString",h,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(c,u,d){var f=d("./node_modules/core-js/internals/redefine.js"),A=d("./node_modules/core-js/internals/an-object.js"),h=d("./node_modules/core-js/internals/to-string.js"),m=d("./node_modules/core-js/internals/fails.js"),p=d("./node_modules/core-js/internals/regexp-flags.js"),g="toString",x=RegExp.prototype,v=x[g],b=m(function(){return v.call({source:"a",flags:"b"})!="/a/b"}),C=v.name!=g;(b||C)&&f(RegExp.prototype,g,function(){var w=A(this),N=h(w.source),E=w.flags,_=h(E===void 0&&w instanceof RegExp&&!("flags"in x)?p.call(w):E);return"/"+N+"/"+_},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(c,u,d){var f=d("./node_modules/core-js/internals/string-multibyte.js").charAt,A=d("./node_modules/core-js/internals/to-string.js"),h=d("./node_modules/core-js/internals/internal-state.js"),m=d("./node_modules/core-js/internals/define-iterator.js"),p="String Iterator",g=h.set,x=h.getterFor(p);m(String,"String",function(v){g(this,{type:p,string:A(v),index:0})},function(){var b=x(this),C=b.string,j=b.index,w;return j>=C.length?{value:void 0,done:!0}:(w=f(C,j),b.index+=w.length,{value:w,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/create-html.js"),h=d("./node_modules/core-js/internals/string-html-forced.js");f({target:"String",proto:!0,forced:h("link")},{link:function(p){return A(this,"a","href",p)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/descriptors.js"),h=d("./node_modules/core-js/internals/global.js"),m=d("./node_modules/core-js/internals/has.js"),p=d("./node_modules/core-js/internals/is-object.js"),g=d("./node_modules/core-js/internals/object-define-property.js").f,x=d("./node_modules/core-js/internals/copy-constructor-properties.js"),v=h.Symbol;if(A&&typeof v=="function"&&(!("description"in v.prototype)||v().description!==void 0)){var b={},C=function(){var k=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),D=this instanceof C?new v(k):k===void 0?v():v(k);return k===""&&(b[D]=!0),D};x(C,v);var j=C.prototype=v.prototype;j.constructor=C;var w=j.toString,N=String(v("test"))=="Symbol(test)",E=/^Symbol\((.*)\)[^)]+$/;g(j,"description",{configurable:!0,get:function(){var k=p(this)?this.valueOf():this,D=w.call(k);if(m(b,k))return"";var S=N?D.slice(7,-1):D.replace(E,"$1");return S===""?void 0:S}}),f({global:!0,forced:!0},{Symbol:C})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(c,u,d){var f=d("./node_modules/core-js/internals/define-well-known-symbol.js");f("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(c,u,d){var f=d("./node_modules/core-js/internals/export.js"),A=d("./node_modules/core-js/internals/global.js"),h=d("./node_modules/core-js/internals/get-built-in.js"),m=d("./node_modules/core-js/internals/is-pure.js"),p=d("./node_modules/core-js/internals/descriptors.js"),g=d("./node_modules/core-js/internals/native-symbol.js"),x=d("./node_modules/core-js/internals/fails.js"),v=d("./node_modules/core-js/internals/has.js"),b=d("./node_modules/core-js/internals/is-array.js"),C=d("./node_modules/core-js/internals/is-object.js"),j=d("./node_modules/core-js/internals/is-symbol.js"),w=d("./node_modules/core-js/internals/an-object.js"),N=d("./node_modules/core-js/internals/to-object.js"),E=d("./node_modules/core-js/internals/to-indexed-object.js"),_=d("./node_modules/core-js/internals/to-property-key.js"),k=d("./node_modules/core-js/internals/to-string.js"),D=d("./node_modules/core-js/internals/create-property-descriptor.js"),S=d("./node_modules/core-js/internals/object-create.js"),F=d("./node_modules/core-js/internals/object-keys.js"),M=d("./node_modules/core-js/internals/object-get-own-property-names.js"),R=d("./node_modules/core-js/internals/object-get-own-property-names-external.js"),U=d("./node_modules/core-js/internals/object-get-own-property-symbols.js"),z=d("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Q=d("./node_modules/core-js/internals/object-define-property.js"),H=d("./node_modules/core-js/internals/object-property-is-enumerable.js"),q=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),X=d("./node_modules/core-js/internals/redefine.js"),$=d("./node_modules/core-js/internals/shared.js"),K=d("./node_modules/core-js/internals/shared-key.js"),se=d("./node_modules/core-js/internals/hidden-keys.js"),Z=d("./node_modules/core-js/internals/uid.js"),ie=d("./node_modules/core-js/internals/well-known-symbol.js"),ee=d("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),ue=d("./node_modules/core-js/internals/define-well-known-symbol.js"),ae=d("./node_modules/core-js/internals/set-to-string-tag.js"),re=d("./node_modules/core-js/internals/internal-state.js"),fe=d("./node_modules/core-js/internals/array-iteration.js").forEach,G=K("hidden"),oe="Symbol",Se="prototype",ge=ie("toPrimitive"),te=re.set,ye=re.getterFor(oe),we=Object[Se],be=A.Symbol,Te=h("JSON","stringify"),Oe=z.f,Me=Q.f,Ve=R.f,Pe=H.f,ze=$("symbols"),ht=$("op-symbols"),gt=$("string-to-symbol-registry"),Ct=$("symbol-to-string-registry"),xt=$("wks"),Ie=A.QObject,De=!Ie||!Ie[Se]||!Ie[Se].findChild,Je=p&&x(function(){return S(Me({},"a",{get:function(){return Me(this,"a",{value:7}).a}})).a!=7})?function(Mt,At,yt){var dt=Oe(we,At);dt&&delete we[At],Me(Mt,At,yt),dt&&Mt!==we&&Me(we,At,dt)}:Me,Ke=function(Mt,At){var yt=ze[Mt]=S(be[Se]);return te(yt,{type:oe,tag:Mt,description:At}),p||(yt.description=At),yt},St=function(At,yt,dt){At===we&&St(ht,yt,dt),w(At);var Ot=_(yt);return w(dt),v(ze,Ot)?(dt.enumerable?(v(At,G)&&At[G][Ot]&&(At[G][Ot]=!1),dt=S(dt,{enumerable:D(0,!1)})):(v(At,G)||Me(At,G,D(1,{})),At[G][Ot]=!0),Je(At,Ot,dt)):Me(At,Ot,dt)},it=function(At,yt){w(At);var dt=E(yt),Ot=F(dt).concat(ir(dt));return fe(Ot,function(Dt){(!p||dr.call(dt,Dt))&&St(At,Dt,dt[Dt])}),At},Pt=function(At,yt){return yt===void 0?S(At):it(S(At),yt)},dr=function(At){var yt=_(At),dt=Pe.call(this,yt);return this===we&&v(ze,yt)&&!v(ht,yt)?!1:dt||!v(this,yt)||!v(ze,yt)||v(this,G)&&this[G][yt]?dt:!0},ar=function(At,yt){var dt=E(At),Ot=_(yt);if(!(dt===we&&v(ze,Ot)&&!v(ht,Ot))){var Dt=Oe(dt,Ot);return Dt&&v(ze,Ot)&&!(v(dt,G)&&dt[G][Ot])&&(Dt.enumerable=!0),Dt}},gn=function(At){var yt=Ve(E(At)),dt=[];return fe(yt,function(Ot){!v(ze,Ot)&&!v(se,Ot)&&dt.push(Ot)}),dt},ir=function(At){var yt=At===we,dt=Ve(yt?ht:E(At)),Ot=[];return fe(dt,function(Dt){v(ze,Dt)&&(!yt||v(we,Dt))&&Ot.push(ze[Dt])}),Ot};if(g||(be=function(){if(this instanceof be)throw TypeError("Symbol is not a constructor");var At=!arguments.length||arguments[0]===void 0?void 0:k(arguments[0]),yt=Z(At),dt=function(Ot){this===we&&dt.call(ht,Ot),v(this,G)&&v(this[G],yt)&&(this[G][yt]=!1),Je(this,yt,D(1,Ot))};return p&&De&&Je(we,yt,{configurable:!0,set:dt}),Ke(yt,At)},X(be[Se],"toString",function(){return ye(this).tag}),X(be,"withoutSetter",function(Mt){return Ke(Z(Mt),Mt)}),H.f=dr,Q.f=St,z.f=ar,M.f=R.f=gn,U.f=ir,ee.f=function(Mt){return Ke(ie(Mt),Mt)},p&&(Me(be[Se],"description",{configurable:!0,get:function(){return ye(this).description}}),m||X(we,"propertyIsEnumerable",dr,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:be}),fe(F(xt),function(Mt){ue(Mt)}),f({target:oe,stat:!0,forced:!g},{for:function(Mt){var At=k(Mt);if(v(gt,At))return gt[At];var yt=be(At);return gt[At]=yt,Ct[yt]=At,yt},keyFor:function(At){if(!j(At))throw TypeError(At+" is not a symbol");if(v(Ct,At))return Ct[At]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),f({target:"Object",stat:!0,forced:!g,sham:!p},{create:Pt,defineProperty:St,defineProperties:it,getOwnPropertyDescriptor:ar}),f({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:gn,getOwnPropertySymbols:ir}),f({target:"Object",stat:!0,forced:x(function(){U.f(1)})},{getOwnPropertySymbols:function(At){return U.f(N(At))}}),Te){var nn=!g||x(function(){var Mt=be();return Te([Mt])!="[null]"||Te({a:Mt})!="{}"||Te(Object(Mt))!="{}"});f({target:"JSON",stat:!0,forced:nn},{stringify:function(At,yt,dt){for(var Ot=[At],Dt=1,Zt;arguments.length>Dt;)Ot.push(arguments[Dt++]);if(Zt=yt,!(!C(yt)&&At===void 0||j(At)))return b(yt)||(yt=function(Pr,_t){if(typeof Zt=="function"&&(_t=Zt.call(this,Pr,_t)),!j(_t))return _t}),Ot[1]=yt,Te.apply(null,Ot)}})}be[Se][ge]||q(be[Se],ge,be[Se].valueOf),ae(be,oe),se[G]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/dom-iterables.js"),h=d("./node_modules/core-js/internals/array-for-each.js"),m=d("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var p in A){var g=f[p],x=g&&g.prototype;if(x&&x.forEach!==h)try{m(x,"forEach",h)}catch{x.forEach=h}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(c,u,d){var f=d("./node_modules/core-js/internals/global.js"),A=d("./node_modules/core-js/internals/dom-iterables.js"),h=d("./node_modules/core-js/modules/es.array.iterator.js"),m=d("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=d("./node_modules/core-js/internals/well-known-symbol.js"),g=p("iterator"),x=p("toStringTag"),v=h.values;for(var b in A){var C=f[b],j=C&&C.prototype;if(j){if(j[g]!==v)try{m(j,g,v)}catch{j[g]=v}if(j[x]||m(j,x,b),A[b]){for(var w in h)if(j[w]!==h[w])try{m(j,w,h[w])}catch{j[w]=h[w]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(c){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(u,d){c.exports=d()})(this,function(){function u(Ie){var De=typeof Ie;return Ie!==null&&(De==="object"||De==="function")}function d(Ie){return typeof Ie=="function"}var f=void 0;Array.isArray?f=Array.isArray:f=function(Ie){return Object.prototype.toString.call(Ie)==="[object Array]"};var A=f,h=0,m=void 0,p=void 0,g=function(De,Je){F[h]=De,F[h+1]=Je,h+=2,h===2&&(p?p(M):U())};function x(Ie){p=Ie}function v(Ie){g=Ie}var b=typeof window<"u"?window:void 0,C=b||{},j=C.MutationObserver||C.WebKitMutationObserver,w=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",N=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function E(){return function(){return process.nextTick(M)}}function _(){return typeof m<"u"?function(){m(M)}:S()}function k(){var Ie=0,De=new j(M),Je=document.createTextNode("");return De.observe(Je,{characterData:!0}),function(){Je.data=Ie=++Ie%2}}function D(){var Ie=new MessageChannel;return Ie.port1.onmessage=M,function(){return Ie.port2.postMessage(0)}}function S(){var Ie=setTimeout;return function(){return Ie(M,1)}}var F=new Array(1e3);function M(){for(var Ie=0;Ie<h;Ie+=2){var De=F[Ie],Je=F[Ie+1];De(Je),F[Ie]=void 0,F[Ie+1]=void 0}h=0}function R(){try{var Ie=Function("return this")().require("vertx");return m=Ie.runOnLoop||Ie.runOnContext,_()}catch{return S()}}var U=void 0;w?U=E():j?U=k():N?U=D():b===void 0?U=R():U=S();function z(Ie,De){var Je=this,Ke=new this.constructor(q);Ke[H]===void 0&&Te(Ke);var St=Je._state;if(St){var it=arguments[St-1];g(function(){return te(St,Ke,it,Je._result)})}else Se(Je,Ke,Ie,De);return Ke}function Q(Ie){var De=this;if(Ie&&typeof Ie=="object"&&Ie.constructor===De)return Ie;var Je=new De(q);return re(Je,Ie),Je}var H=Math.random().toString(36).substring(2);function q(){}var X=void 0,$=1,K=2;function se(){return new TypeError("You cannot resolve a promise with itself")}function Z(){return new TypeError("A promises callback cannot return that same promise.")}function ie(Ie,De,Je,Ke){try{Ie.call(De,Je,Ke)}catch(St){return St}}function ee(Ie,De,Je){g(function(Ke){var St=!1,it=ie(Je,De,function(Pt){St||(St=!0,De!==Pt?re(Ke,Pt):G(Ke,Pt))},function(Pt){St||(St=!0,oe(Ke,Pt))},"Settle: "+(Ke._label||" unknown promise"));!St&&it&&(St=!0,oe(Ke,it))},Ie)}function ue(Ie,De){De._state===$?G(Ie,De._result):De._state===K?oe(Ie,De._result):Se(De,void 0,function(Je){return re(Ie,Je)},function(Je){return oe(Ie,Je)})}function ae(Ie,De,Je){De.constructor===Ie.constructor&&Je===z&&De.constructor.resolve===Q?ue(Ie,De):Je===void 0?G(Ie,De):d(Je)?ee(Ie,De,Je):G(Ie,De)}function re(Ie,De){if(Ie===De)oe(Ie,se());else if(u(De)){var Je=void 0;try{Je=De.then}catch(Ke){oe(Ie,Ke);return}ae(Ie,De,Je)}else G(Ie,De)}function fe(Ie){Ie._onerror&&Ie._onerror(Ie._result),ge(Ie)}function G(Ie,De){Ie._state===X&&(Ie._result=De,Ie._state=$,Ie._subscribers.length!==0&&g(ge,Ie))}function oe(Ie,De){Ie._state===X&&(Ie._state=K,Ie._result=De,g(fe,Ie))}function Se(Ie,De,Je,Ke){var St=Ie._subscribers,it=St.length;Ie._onerror=null,St[it]=De,St[it+$]=Je,St[it+K]=Ke,it===0&&Ie._state&&g(ge,Ie)}function ge(Ie){var De=Ie._subscribers,Je=Ie._state;if(De.length!==0){for(var Ke=void 0,St=void 0,it=Ie._result,Pt=0;Pt<De.length;Pt+=3)Ke=De[Pt],St=De[Pt+Je],Ke?te(Je,Ke,St,it):St(it);Ie._subscribers.length=0}}function te(Ie,De,Je,Ke){var St=d(Je),it=void 0,Pt=void 0,dr=!0;if(St){try{it=Je(Ke)}catch(ar){dr=!1,Pt=ar}if(De===it){oe(De,Z());return}}else it=Ke;De._state!==X||(St&&dr?re(De,it):dr===!1?oe(De,Pt):Ie===$?G(De,it):Ie===K&&oe(De,it))}function ye(Ie,De){try{De(function(Ke){re(Ie,Ke)},function(Ke){oe(Ie,Ke)})}catch(Je){oe(Ie,Je)}}var we=0;function be(){return we++}function Te(Ie){Ie[H]=we++,Ie._state=void 0,Ie._result=void 0,Ie._subscribers=[]}function Oe(){return new Error("Array Methods must be provided an Array")}var Me=function(){function Ie(De,Je){this._instanceConstructor=De,this.promise=new De(q),this.promise[H]||Te(this.promise),A(Je)?(this.length=Je.length,this._remaining=Je.length,this._result=new Array(this.length),this.length===0?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(Je),this._remaining===0&&G(this.promise,this._result))):oe(this.promise,Oe())}return Ie.prototype._enumerate=function(Je){for(var Ke=0;this._state===X&&Ke<Je.length;Ke++)this._eachEntry(Je[Ke],Ke)},Ie.prototype._eachEntry=function(Je,Ke){var St=this._instanceConstructor,it=St.resolve;if(it===Q){var Pt=void 0,dr=void 0,ar=!1;try{Pt=Je.then}catch(ir){ar=!0,dr=ir}if(Pt===z&&Je._state!==X)this._settledAt(Je._state,Ke,Je._result);else if(typeof Pt!="function")this._remaining--,this._result[Ke]=Je;else if(St===Ct){var gn=new St(q);ar?oe(gn,dr):ae(gn,Je,Pt),this._willSettleAt(gn,Ke)}else this._willSettleAt(new St(function(ir){return ir(Je)}),Ke)}else this._willSettleAt(it(Je),Ke)},Ie.prototype._settledAt=function(Je,Ke,St){var it=this.promise;it._state===X&&(this._remaining--,Je===K?oe(it,St):this._result[Ke]=St),this._remaining===0&&G(it,this._result)},Ie.prototype._willSettleAt=function(Je,Ke){var St=this;Se(Je,void 0,function(it){return St._settledAt($,Ke,it)},function(it){return St._settledAt(K,Ke,it)})},Ie}();function Ve(Ie){return new Me(this,Ie).promise}function Pe(Ie){var De=this;return A(Ie)?new De(function(Je,Ke){for(var St=Ie.length,it=0;it<St;it++)De.resolve(Ie[it]).then(Je,Ke)}):new De(function(Je,Ke){return Ke(new TypeError("You must pass an array to race."))})}function ze(Ie){var De=this,Je=new De(q);return oe(Je,Ie),Je}function ht(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function gt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ct=function(){function Ie(De){this[H]=be(),this._result=this._state=void 0,this._subscribers=[],q!==De&&(typeof De!="function"&&ht(),this instanceof Ie?ye(this,De):gt())}return Ie.prototype.catch=function(Je){return this.then(null,Je)},Ie.prototype.finally=function(Je){var Ke=this,St=Ke.constructor;return d(Je)?Ke.then(function(it){return St.resolve(Je()).then(function(){return it})},function(it){return St.resolve(Je()).then(function(){throw it})}):Ke.then(Je,Je)},Ie}();Ct.prototype.then=z,Ct.all=Ve,Ct.race=Pe,Ct.resolve=Q,Ct.reject=ze,Ct._setScheduler=x,Ct._setAsap=v,Ct._asap=g;function xt(){var Ie=void 0;if(typeof Yo<"u")Ie=Yo;else if(typeof self<"u")Ie=self;else try{Ie=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var De=Ie.Promise;if(De){var Je=null;try{Je=Object.prototype.toString.call(De.resolve())}catch{}if(Je==="[object Promise]"&&!De.cast)return}Ie.Promise=Ct}return Ct.polyfill=xt,Ct.Promise=Ct,Ct})},html2canvas:function(c){c.exports=n},jspdf:function(c){c.exports=r}},i={};function o(c){var u=i[c];if(u!==void 0)return u.exports;var d=i[c]={exports:{}};return a[c].call(d.exports,d,d.exports,o),d.exports}(function(){o.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(u,{a:u}),u}})(),function(){o.d=function(c,u){for(var d in u)o.o(u,d)&&!o.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:u[d]})}}(),function(){o.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)}}(),function(){o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}}();var l={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/o.r(l);var c=o("./src/worker.js");o("./src/plugin/jspdf-plugin.js"),o("./src/plugin/pagebreaks.js"),o("./src/plugin/hyperlinks.js");var u=function d(f,A){var h=new d.Worker(A);return f?h.from(f).save():h};u.Worker=c.default,l.default=u}(),l=l.default,l}()})})(see);var lGe=see.exports;const cGe=ln(lGe),$7=({affaire:t,financialData:e})=>{const r=y.useRef(),[n,a]=y.useState(!1),i=c=>c?new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"Non définie",o=c=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(c||0),l=async()=>{if(console.log("🔍 [DEBUG PDF] Début génération PDF"),console.log("🔍 [DEBUG PDF] Affaire:",t),console.log("🔍 [DEBUG PDF] FinancialData:",e),!r.current){console.error("❌ [DEBUG PDF] printRef.current est null"),ve.error("Erreur: Référence du contenu PDF manquante");return}if(!t){console.error("❌ [DEBUG PDF] Données affaire manquantes"),ve.error("Erreur: Données de l'affaire manquantes");return}if(!e){console.error("❌ [DEBUG PDF] Données financières manquantes"),ve.error("Erreur: Données financières manquantes");return}try{a(!0),ve.info("Génération du PDF en cours...");const c=r.current;console.log("🔍 [DEBUG PDF] Élément à convertir:",c),console.log("🔍 [DEBUG PDF] Contenu HTML:",c.innerHTML.substring(0,200)+"...");const u=c.style.cssText;c.style.position="static",c.style.left="auto",c.style.visibility="visible";const d={margin:[10,10,10,10],filename:`Synthese_Affaire_${t.numero}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!0,width:800,height:1120},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["avoid-all","css","legacy"]}};console.log("🔍 [DEBUG PDF] Options:",d),await cGe().set(d).from(c).save(),c.style.cssText=u,ve.success("PDF généré avec succès !"),console.log("✅ [DEBUG PDF] PDF généré avec succès")}catch(c){console.error("❌ [DEBUG PDF] Erreur lors de la génération du PDF:",c),ve.error("Erreur lors de la génération du PDF: "+c.message)}finally{a(!1)}};return!t||!e?(console.warn("⚠️ [DEBUG PDF] Données manquantes - affaire ou financialData"),s.jsx("div",{className:"flex justify-end mb-4",children:s.jsx(Xe,{disabled:!0,className:"bg-gray-400 text-white",children:"Données manquantes - Export PDF indisponible"})})):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(Xe,{onClick:l,disabled:n,className:"bg-amber-600 hover:bg-amber-700 text-white flex items-center gap-2",children:[s.jsx(x0e,{className:"w-4 h-4"}),n?"Génération...":"Exporter en PDF"]})}),s.jsxs("div",{ref:r,className:"print-content",style:{position:"absolute",left:"-9999px",top:"0",width:"800px",minHeight:"1120px",backgroundColor:"#ffffff",padding:"32px",fontSize:"14px",lineHeight:"1.6",fontFamily:"Arial, sans-serif",color:"#000000",boxSizing:"border-box"},children:[s.jsx("div",{style:{marginBottom:"32px",borderBottom:"2px solid #d1d5db",paddingBottom:"16px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{children:[s.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#111827",marginBottom:"8px",margin:"0"},children:"SYNTHÈSE D'AFFAIRE"}),s.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#2563eb",margin:"0"},children:[t==null?void 0:t.numero," - ",t==null?void 0:t.libelle]})]}),s.jsxs("div",{style:{textAlign:"right",fontSize:"12px",color:"#6b7280"},children:[s.jsxs("div",{style:{marginBottom:"4px"},children:["Généré le : ",i(new Date)]}),s.jsxs("div",{children:["Client : ",t==null?void 0:t.client]})]})]})}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#374151",marginBottom:"16px",borderLeft:"4px solid #3b82f6",paddingLeft:"12px",margin:"0 0 16px 0"},children:"Informations Générales"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",fontSize:"12px"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"Statut :"})," ",t==null?void 0:t.statut]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Date de commencement :"})," ",i(t==null?void 0:t.dateCommencement)]})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"Date de clôture prévue :"})," ",i(t==null?void 0:t.dateCloturePrevue)]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Adresse :"})," ",(t==null?void 0:t.adresse)||(t==null?void 0:t.ville)||"Non renseignée"]})]})]})]}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#374151",marginBottom:"16px",borderLeft:"4px solid #10b981",paddingLeft:"12px",margin:"0 0 16px 0"},children:"Métriques Financières"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[s.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"16px",borderRadius:"8px",border:"2px solid #bfdbfe"},children:[s.jsx("div",{style:{fontSize:"12px",color:"#2563eb",fontWeight:"600",marginBottom:"8px"},children:"CA OBJECTIF"}),s.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#1e3a8a"},children:o(e==null?void 0:e.objectifCA)})]}),s.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"8px",border:"2px solid #bbf7d0"},children:[s.jsx("div",{style:{fontSize:"12px",color:"#16a34a",fontWeight:"600",marginBottom:"8px"},children:"CA RÉALISÉ"}),s.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#14532d"},children:o(e==null?void 0:e.caReel)})]}),s.jsxs("div",{style:{backgroundColor:"#fff7ed",padding:"16px",borderRadius:"8px",border:"2px solid #fed7aa"},children:[s.jsx("div",{style:{fontSize:"12px",color:"#ea580c",fontWeight:"600",marginBottom:"8px"},children:"AVANCEMENT"}),s.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#9a3412"},children:[(e==null?void 0:e.objectifCA)>0?Math.round((e==null?void 0:e.caReel)/(e==null?void 0:e.objectifCA)*100):0,"%"]})]})]})]}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#374151",marginBottom:"16px",borderLeft:"4px solid #8b5cf6",paddingLeft:"12px",margin:"0 0 16px 0"},children:"Répartition des Coûts"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{fontWeight:"bold",color:"#374151",marginBottom:"12px",fontSize:"16px",margin:"0 0 12px 0"},children:"PRÉVISIONS"}),s.jsxs("div",{style:{fontSize:"12px"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Achats :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.objectifAchats)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Main-d'œuvre :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.coutObjectifMainOeuvre)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Frais généraux :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.fraisGenerauxObjectifs)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",fontWeight:"bold",paddingTop:"8px",fontSize:"14px"},children:[s.jsx("span",{children:"Marge prévue :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{children:o(e==null?void 0:e.margeObjectif)})})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{style:{fontWeight:"bold",color:"#374151",marginBottom:"12px",fontSize:"16px",margin:"0 0 12px 0"},children:"RÉALISATIONS"}),s.jsxs("div",{style:{fontSize:"12px"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Achats :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.achatReel)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Main-d'œuvre :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.totalMainOeuvreReelle)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px",marginBottom:"12px"},children:[s.jsx("span",{children:"Frais généraux :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{fontWeight:"600"},children:o(e==null?void 0:e.fraisGenerauxReels)})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",fontWeight:"bold",paddingTop:"8px",fontSize:"14px"},children:[s.jsx("span",{children:"Marge réelle :"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{color:"#16a34a"},children:o(e==null?void 0:e.margeReelle)})})]})]})]})]})]}),(e==null?void 0:e.margeReelle)<0&&s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#dc2626",marginBottom:"16px",borderLeft:"4px solid #ef4444",paddingLeft:"12px",margin:"0 0 16px 0"},children:"⚠️ Alertes"}),s.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"16px"},children:[s.jsx("div",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"8px"},children:"Marge négative détectée !"}),s.jsxs("div",{style:{color:"#b91c1c",fontSize:"12px"},children:["Cette affaire présente une marge négative de ",o(Math.abs(e==null?void 0:e.margeReelle)),"."]})]})]}),s.jsxs("div",{style:{marginTop:"48px",paddingTop:"16px",borderTop:"2px solid #d1d5db",textAlign:"center",fontSize:"10px",color:"#6b7280"},children:[s.jsxs("div",{children:["Document généré automatiquement le ",new Date().toLocaleString("fr-FR")]}),s.jsxs("div",{style:{marginTop:"4px"},children:["Synthèse d'affaire - ",t==null?void 0:t.numero]})]})]})]})},uGe=({affaire:t,alertes:e=[],onEstimationChange:r})=>s.jsx(Kt,{className:"estimation-cartouche bg-white border-gray-200 shadow-sm overflow-hidden",children:s.jsx(Er,{className:"relative p-6",children:s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:s.jsx(yx,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(Br,{className:"text-2xl font-semibold text-gray-900 mb-1",children:"Estimation Intelligente"}),s.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[s.jsx(j0e,{className:"w-4 h-4"}),"Pré-remplissage automatique avec liaison temps réel"]}),s.jsxs("div",{className:"mt-1 flex items-center gap-3 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Oh,{className:"w-3 h-3"}),"Synchronisé avec le planning équipe"]}),s.jsx("span",{children:"•"}),s.jsx("span",{children:"Calculs basés sur standards métier"})]})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("div",{className:"bg-gray-50 px-4 py-2 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:"Affaire"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t.numero}),s.jsx("div",{className:"text-xs text-gray-600",children:t.client})]})})})]})})})}),Kf=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0}).format(t||0),dGe=({affaire:t,onEstimationChange:e,estimation:r={}})=>{const[n,a]=y.useState(r.montantDevis||""),i=()=>{if(!n||n<=0)return;const f=parseFloat(n),A={montantDevis:f,affaireId:t.id,montantAchats:Math.round(f*.2),montantMainOeuvre:Math.round(f*.35),montantFraisGeneraux:Math.round(f*.3),montantMarge:Math.round(f*.15),totalDemiJournees:0,dateDebut:"",dateFin:"",montantMainOeuvreCout:Math.round(f*.35),montantMainOeuvreVente:Math.round(f*.35)*3,montantMainOeuvreGain:Math.round(f*.35)*2};e&&e(A),console.log("🔍 BlocMontant - Validation montant:",{montant:f,estimation:A})},o=f=>{const A=f.target.value.replace(/[^0-9]/g,"");a(A)},l=f=>{f.key==="Enter"&&n&&n>0&&(f.preventDefault(),i())},c=()=>{n&&n>0&&i()},u=r.montantDevis>0,d=r.montantAchats>0;return s.jsxs(Kt,{className:"bloc-montant bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 border-emerald-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsx(Er,{className:"relative overflow-hidden",children:s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs(Br,{className:"text-xl font-bold text-emerald-900 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg shadow-lg",children:s.jsx(t6,{className:"w-6 h-6 text-white"})}),"Montant du Devis"]})}),s.jsxs("p",{className:"text-emerald-600 text-sm mb-6 flex items-center gap-2",children:[s.jsx(o6,{className:"w-4 h-4"}),"Saisissez le montant puis remplissez obligatoirement le planning pour obtenir l'estimation"]})]})}),s.jsxs(nr,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(jr,{htmlFor:"montant",className:"text-emerald-800 font-medium",children:"Montant du devis (€)"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-emerald-600",children:s.jsx(t6,{className:"w-5 h-5"})}),s.jsx(Ur,{id:"montant",type:"text",value:n,onChange:o,onKeyDown:l,placeholder:"Ex: 10000",className:"pl-12 pr-16 text-lg font-bold text-emerald-900 border-emerald-300 focus:border-emerald-500 focus:ring-emerald-500 h-14"}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-600 font-medium",children:"€"})]}),n&&n>0&&!u&&s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs(Xe,{onClick:c,className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-8 py-3 text-lg font-bold shadow-lg hover:from-emerald-600 hover:to-teal-700 hover:shadow-xl transition-all duration-300",size:"lg",children:[s.jsx(o6,{className:"w-5 h-5 mr-2"}),"Valider le Montant"]}),s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"text-2xl font-bold text-emerald-900 bg-emerald-100 px-4 py-2 rounded-lg",children:Kf(parseFloat(n))})})]}),u&&!d&&s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("span",{className:"text-2xl font-bold text-emerald-900 bg-emerald-100 px-4 py-2 rounded-lg",children:Kf(r.montantDevis)}),s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-orange-800 text-sm",children:[s.jsx("div",{className:"font-medium",children:"⏳ Montant validé"}),s.jsx("div",{className:"text-orange-700",children:"Remplissez maintenant le planning ci-dessous pour obtenir l'estimation complète"})]})]})]}),d&&s.jsxs("div",{className:"bg-emerald-100/50 border border-emerald-200 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-800 font-medium",children:[s.jsx(Oh,{className:"w-5 h-5"}),"Estimation complète finalisée"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Achats"}),s.jsx("span",{className:"font-bold text-emerald-800",children:Kf(r.montantAchats)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Coût MO"}),s.jsx("span",{className:"font-bold text-emerald-800",children:Kf(r.montantMainOeuvreCout||r.montantMainOeuvre)})]}),r.montantMainOeuvreVente&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Vente MO"}),s.jsx("span",{className:"font-bold text-green-700",children:Kf(r.montantMainOeuvreVente)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Frais généraux"}),s.jsx("span",{className:"font-bold text-emerald-800",children:Kf(r.montantFraisGeneraux)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Marge"}),s.jsx("span",{className:"font-bold text-emerald-800",children:Kf(r.montantMarge)})]}),r.montantMainOeuvreGain>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-emerald-600",children:"Gain MO"}),s.jsxs("span",{className:"font-bold text-green-700",children:["+",Kf(r.montantMainOeuvreGain)]})]})]})]}),s.jsxs("div",{className:"border-t border-emerald-200 pt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-700",children:[s.jsx(Do,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:[r.totalDemiJournees," demi-journées • ",r.nombrePersonnes," personnes"]})]}),r.dateDebut&&r.dateFin&&s.jsxs("div",{className:"flex items-center gap-4 text-xs text-emerald-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"🚀 Début:"}),s.jsx("span",{className:"font-medium",children:new Date(r.dateDebut).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"🏁 Fin:"}),s.jsx("span",{className:"font-medium",children:new Date(r.dateFin).toLocaleDateString("fr-FR")})]})]})]}),s.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 text-green-800 text-sm",children:["✅ ",s.jsx("strong",{children:"Estimation finalisée"})," - Calculée automatiquement après planification"]})]})]}),s.jsx("style",{children:`
        .bloc-montant {
          transition: all 0.3s ease;
        }
        
        .bloc-montant:hover {
          transform: translateY(-2px);
        }
        
        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
          }
          40% {
            transform: translateY(-10px);
          }
          60% {
            transform: translateY(-5px);
          }
        }
      `})]})},fGe=({dateDebut:t,dateFin:e,onDateRangeChange:r,affaireId:n,estimation:a={},resetTrigger:i=0,className:o="",onAffectationsChange:l,onDateSurvol:c,affaire:u=null})=>{var ge;const[d,f]=y.useState(new Date),[A,h]=y.useState(""),[m,p]=y.useState(""),[g,x]=y.useState(!0),[v,b]=y.useState([]),[C,j]=y.useState(!1),[w,N]=y.useState(0),[E,_]=y.useState(!1),[k,D]=y.useState(n),S=te=>{if(!te)return"";if(typeof te=="string")return te;const ye=te.getFullYear(),we=String(te.getMonth()+1).padStart(2,"0"),be=String(te.getDate()).padStart(2,"0");return`${ye}-${we}-${be}`};y.useEffect(()=>{n!==k&&(console.log("🔄 CHANGEMENT D'AFFAIRE DÉTECTÉ dans le calendrier:",k,"→",n),_(!1),h(""),p(""),x(!0),N(0),b([]),r&&r("",""),D(n),l&&l([]),setTimeout(()=>{U()},100))},[n,k]),y.useEffect(()=>{!E&&!A&&!m&&g&&U()},[d]),y.useEffect(()=>{i>0&&(console.log("🔄 RÉINITIALISATION FORCÉE DU CALENDRIER - resetTrigger:",i),_(!1),h(""),p(""),x(!0),N(0),console.log("🔄 Vidage immédiat des affectations du calendrier"),b([]),l&&l([]),r&&(console.log("🔄 Notification au parent pour effacer les dates"),r("","")),setTimeout(()=>{U()},200))},[i]),y.useEffect(()=>{a.montantDevis===0&&(_(!1),h(""),p(""),x(!0))},[a.montantDevis]),y.useEffect(()=>{(t!==A||e!==m)&&(t&&e)&&(h(""),p(""),x(!0),_(!1))},[t,e]),y.useEffect(()=>{if(a&&typeof a.montantDevis<"u"){if(E||A||m)return;if(a.montantDevis===0||a.montantDevis>0&&!t&&!e){const ye=setTimeout(()=>{!E&&!A&&!m&&U()},300);return()=>clearTimeout(ye)}}},[a.montantDevis]),y.useEffect(()=>{t&&e&&E&&!A&&!m&&(_(!1),x(!0))},[t,e]);const F=()=>{if(l&&v.length>0){let te=v;n&&(!a.montantDevis||a.montantDevis<=0)&&(te=v.filter(we=>we.affaireId!==n)),l(te)}};y.useEffect(()=>{const te=ye=>{ye.target.tagName==="INPUT"||ye.target.tagName==="TEXTAREA"||(ye.key==="ArrowLeft"?(ye.preventDefault(),z(-1)):ye.key==="ArrowRight"&&(ye.preventDefault(),z(1)))};return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te)}},[]);const M=te=>{const ye=S(te),we=X(te);c&&c(ye,we)},R=()=>{c&&c(null,[])},U=async()=>{try{if(E||!g||A||m)return;if(a.montantDevis===0){console.log("🔄 Estimation réinitialisée, vidage des affectations du calendrier"),b([]),l&&l([]);return}j(!0);const te=new Date(d.getFullYear(),d.getMonth(),1),ye=new Date(d.getFullYear(),d.getMonth()+1,0),we=new Date(te);we.setDate(we.getDate()-((te.getDay()||7)-1));const be=new Date(ye);be.setDate(be.getDate()+(7-ye.getDay()));const Te=[];let Oe=new Date(we);for(;Oe.getDay()!==1;)Oe.setDate(Oe.getDate()-1);const Me=[];for(;Oe<=be;){try{const gt=S(Oe),Ct=await Bs.getPlanningHebdomadaire(gt,!1);Me.push(gt),Array.isArray(Ct)?Te.push(...Ct):Ct&&Ct.affectations&&Te.push(...Ct.affectations)}catch(gt){console.error(`❌ Erreur chargement semaine ${S(Oe)}:`,gt)}Oe.setDate(Oe.getDate()+7)}const Ve=new Map;Te.forEach(gt=>{const Ct=`${gt.id}-${gt.dateAffectation}-${gt.userId}-${gt.periode}`;Ve.has(Ct)||Ve.set(Ct,gt)});const Pe=Array.from(Ve.values()),ze=[];Pe.forEach((gt,Ct)=>{var De,Je,Ke,St;let xt;if(typeof gt.dateAffectation=="string")xt=gt.dateAffectation.split("T")[0];else{const it=new Date(gt.dateAffectation);xt=S(it)}const Ie=n&&gt.affaireId===n;ze.push({date:xt,affaireNumero:((De=gt.affaire)==null?void 0:De.numero)||"N/A",affaireLibelle:((Je=gt.affaire)==null?void 0:Je.libelle)||"Affaire",periode:gt.periode,ouvrier:`${((Ke=gt.user)==null?void 0:Ke.prenom)||""} ${((St=gt.user)==null?void 0:St.nom)||""}`.trim(),affaireId:gt.affaireId,estAffaireCourante:Ie})});const ht=ze.filter(gt=>{const xt=new Date(gt.date+"T12:00:00").getDay();return xt===0||xt===6});ht.length>0&&(console.warn(`🚨 WEEKEND ALERT: ${ht.length} affectation(s) détectée(s) en WEEKEND :`),ht.forEach(gt=>{const Ct=new Date(gt.date+"T12:00:00"),xt=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][Ct.getDay()];console.warn(`  - ${gt.date} (${xt}) : ${gt.affaireNumero} - ${gt.ouvrier} (${gt.periode})`)})),b(ze),setTimeout(()=>{F()},0)}catch(te){console.error("❌ Erreur chargement affectations:",te)}finally{j(!1)}},z=te=>{const ye=new Date(d);ye.setMonth(d.getMonth()+te),f(ye)},Q=()=>{f(new Date)},H=()=>{const te=d.getFullYear(),ye=d.getMonth(),we=new Date(te,ye,1),be=new Date(we);be.setDate(be.getDate()-((we.getDay()||7)-1));const Te=[],Oe=new Date(be);for(let Me=0;Me<42;Me++)Te.push(new Date(Oe)),Oe.setDate(Oe.getDate()+1);return Te},q=te=>X(te).length>0,X=te=>{const ye=S(te);let we=v.filter(be=>be.date===ye);return n&&(t&&e||A&&m||(we=we.filter(Te=>Te.affaireId!==n),console.log(`🔒 Masquage affectations affaire ${n} pour date ${ye} (pas de nouvelle sélection)`))),we},$=te=>te.getMonth()===d.getMonth(),K=te=>{const ye=te.getDay();return ye===0||ye===6},se=te=>{const ye=[];ye.push(`${te}-01-01`),ye.push(`${te}-05-01`),ye.push(`${te}-05-08`),ye.push(`${te}-07-14`),ye.push(`${te}-08-15`),ye.push(`${te}-11-01`),ye.push(`${te}-11-11`),ye.push(`${te}-12-25`);const we=te%19,be=Math.floor(te/100),Te=te%100,Oe=Math.floor(be/4),Me=be%4,Ve=Math.floor((be+8)/25),Pe=Math.floor((be-Ve+1)/3),ze=(19*we+be-Oe-Pe+15)%30,ht=Math.floor(Te/4),gt=Te%4,Ct=(32+2*Me+2*ht-ze-gt)%7,xt=Math.floor((we+11*ze+22*Ct)/451),Ie=Math.floor((ze+Ct-7*xt+114)/31),De=(ze+Ct-7*xt+114)%31+1,Je=new Date(te,Ie-1,De),Ke=new Date(Je);Ke.setDate(Je.getDate()+1),ye.push(S(Ke));const St=new Date(Je);St.setDate(Je.getDate()+39),ye.push(S(St));const it=new Date(Je);return it.setDate(Je.getDate()+50),ye.push(S(it)),ye},Z=te=>{const ye=S(te),we=te.getFullYear();return se(we).includes(ye)},ie=te=>{const ye=S(te),we=te.getMonth()+1,be=te.getDate();if(we===1&&be===1)return"Jour de l'An";if(we===5&&be===1)return"Fête du Travail";if(we===5&&be===8)return"Victoire 1945";if(we===7&&be===14)return"Fête Nationale";if(we===8&&be===15)return"Assomption";if(we===11&&be===1)return"Toussaint";if(we===11&&be===11)return"Armistice 1918";if(we===12&&be===25)return"Noël";const Te=te.getFullYear();if(se(Te).includes(ye)){const Me=Te%19,Ve=Math.floor(Te/100),Pe=Te%100,ze=Math.floor(Ve/4),ht=Ve%4,gt=Math.floor((Ve+8)/25),Ct=Math.floor((Ve-gt+1)/3),xt=(19*Me+Ve-ze-Ct+15)%30,Ie=Math.floor(Pe/4),De=Pe%4,Je=(32+2*ht+2*Ie-xt-De)%7,Ke=Math.floor((Me+11*xt+22*Je)/451),St=Math.floor((xt+Je-7*Ke+114)/31),it=(xt+Je-7*Ke+114)%31+1,Pt=new Date(Te,St-1,it),dr=Math.round((te-Pt)/(1e3*60*60*24));if(dr===1)return"Lundi de Pâques";if(dr===39)return"Ascension";if(dr===50)return"Lundi de Pentecôte"}return""},ee=te=>{const ye=S(te);return t&&e?A||m?ye===A||ye===m:!1:ye===A||ye===m},ue=te=>{const ye=t||A,we=e||m;if(!ye||!we)return!1;const be=S(te);return t&&e?!1:be>=ye&&be<=we},ae=te=>{const ye=S(te);if(!a.montantDevis||a.montantDevis<=0||!t||!e||t===""||e==="")return!1;let we=t,be=e;typeof t=="string"&&t.includes("T")&&(we=t.split("T")[0]),typeof e=="string"&&e.includes("T")&&(be=e.split("T")[0]);const Te=ye>=we&&ye<=be;return Te&&K(te)||Te&&Z(te)?!1:Te},re=te=>{const ye=Date.now();if(ye-w<300)return;N(ye);const we=S(te),Te=S(new Date);we<Te||K(te)||Z(te)||(g?(_(!0),h(we),p(""),x(!1)):we>=A?(r&&r(A,we),setTimeout(()=>{h(""),p(""),_(!1),x(!0)},100)):(h(we),p(""),x(!1)))},fe=te=>{const ye="relative w-10 h-10 rounded-lg flex items-center justify-center text-sm font-medium cursor-pointer transition-all duration-200",be=S(new Date),Te=S(te);let Oe=[ye];return $(te)?Oe.push("text-gray-700"):Oe.push("text-gray-300"),Te<be&&Oe.push("text-gray-400 cursor-not-allowed"),K(te)&&(Oe.push("text-gray-500 cursor-not-allowed bg-gray-50 border border-gray-200"),$(te)&&Oe.push("relative overflow-hidden")),Z(te)&&(Oe.push("text-orange-700 cursor-not-allowed bg-orange-50 border border-orange-200 font-semibold"),$(te)&&Oe.push("relative overflow-hidden")),Te===be&&Oe.push("font-bold bg-yellow-100 border-2 border-yellow-400 text-yellow-800 shadow-lg"),ee(te)||ue(te)?Oe.push("bg-blue-500 text-white font-bold"):ae(te)&&Oe.push("bg-green-100 text-green-800 border-2 border-green-400"),Te>=be&&!K(te)&&!Z(te)&&$(te)&&Oe.push("hover:bg-blue-50 hover:border-blue-200"),K(te)&&Oe.push("hover:bg-gray-50"),Z(te)&&Oe.push("hover:bg-orange-50"),Oe.join(" ")},G=te=>{const ye=[{bg:"#3b82f6",border:"#2563eb",name:"Bleu"},{bg:"#10b981",border:"#059669",name:"Vert"},{bg:"#8b5cf6",border:"#7c3aed",name:"Violet"},{bg:"#f59e0b",border:"#d97706",name:"Orange"},{bg:"#ef4444",border:"#dc2626",name:"Rouge"},{bg:"#06b6d4",border:"#0891b2",name:"Cyan"},{bg:"#84cc16",border:"#65a30d",name:"Lime"},{bg:"#d946ef",border:"#c026d3",name:"Magenta"}];if(!te||te==="N/A")return{bg:"#6b7280",border:"#4b5563",name:"Gris"};let we=0;for(let be=0;be<te.toString().length;be++)we=te.toString().charCodeAt(be)+((we<<5)-we);return ye[Math.abs(we)%ye.length]},oe=H(),Se=d.toLocaleDateString("fr-FR",{month:"long",year:"numeric"});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:`calendrier-unifie relative space-y-4 ${o}`,children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(_s,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 capitalize",children:Se}),s.jsx("p",{className:"text-sm text-blue-600",children:"Navigation du planning"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Xe,{variant:"outline",size:"default",onClick:()=>z(-1),className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400 transition-all duration-200 shadow-md hover:shadow-lg",title:"Mois précédent (ou utilisez ←)",children:[s.jsx(wx,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden md:inline font-medium",children:"Précédent"})]}),s.jsx(Xe,{variant:"default",size:"default",onClick:Q,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all duration-200",title:"Revenir au mois actuel",children:s.jsx("span",{className:"font-medium",children:"Aujourd'hui"})}),s.jsxs(Xe,{variant:"outline",size:"default",onClick:()=>z(1),className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400 transition-all duration-200 shadow-md hover:shadow-lg",title:"Mois suivant (ou utilisez →)",children:[s.jsx("span",{className:"hidden md:inline font-medium",children:"Suivant"}),s.jsx(jx,{className:"w-5 h-5"})]})]})]})}),a.montantDevis>0&&(!t||!e)&&s.jsxs("div",{className:"mb-4 bg-orange-50 border border-orange-300 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-orange-800 font-medium mb-2",children:[s.jsx(wo,{className:"w-5 h-5"}),"Planification obligatoire"]}),s.jsxs("div",{className:"text-orange-700 text-sm",children:["Pour finaliser votre estimation de ",s.jsxs("strong",{children:[(ge=a.montantDevis)==null?void 0:ge.toLocaleString(),"€"]}),", vous devez obligatoirement sélectionner les dates dans le calendrier ci-dessous."]}),s.jsx("div",{className:"text-orange-600 text-xs mt-1",children:"💡 Cette planification permet de synchroniser automatiquement le planning équipe et d'avoir une estimation précise."})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[s.jsx(wn,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:g?"Cliquez sur la date de début":"Cliquez sur la date de fin"})]}),C&&s.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-xs",children:"Chargement..."})]})]}),A&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-blue-700",children:[s.jsxs("span",{children:["Début : ",new Date(A).toLocaleDateString("fr-FR")]}),m&&s.jsxs("span",{children:["• Fin : ",new Date(m).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"mt-2 space-y-1",children:[v.length>0&&!C&&s.jsxs("div",{className:"flex items-center gap-2 text-blue-700 bg-blue-50 px-2 py-1 rounded",children:[s.jsx(Io,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-xs font-medium",children:[v.length," affectation(s) détectée(s) -",[...new Set(v.map(te=>te.affaireNumero))].length," affaire(s) distincte(s) trouvée(s)"]}),s.jsx("button",{onClick:()=>{const te=[...new Set(v.map(we=>we.affaireNumero))],ye=`🎯 AFFAIRES TROUVÉES (${te.length} distinctes) :

`+te.map((we,be)=>{const Te=v.filter(Oe=>Oe.affaireNumero===we).length;return`${be+1}. ${we} (${Te} affectations)`}).join(`
`);alert(ye)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 bg-blue-100 rounded hover:bg-blue-200",children:"📋 Détails"})]}),C&&s.jsxs("div",{className:"flex items-center gap-2 text-orange-700 bg-orange-50 px-2 py-1 rounded",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-orange-700 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-xs",children:"Chargement des affectations..."})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(te=>s.jsx("div",{className:"text-center text-sm font-medium text-gray-600 py-2",children:te},te))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:oe.map((te,ye)=>{S(te);const we=q(te),be=X(te),Te=ae(te);return s.jsxs("div",{className:fe(te),onClick:()=>re(te),onMouseEnter:()=>M(te),onMouseLeave:R,title:Z(te)?ie(te):we?`${be.length} affectation(s) existante(s)`:Te?"Date incluse dans l'estimation":"",children:[te.getDate(),Z(te)&&$(te)&&s.jsx("div",{className:"absolute top-0.5 right-0.5 text-[8px] font-bold text-orange-600 bg-orange-100 px-1 rounded",children:"JF"}),we&&(()=>{const Oe=be.reduce((Pe,ze)=>{const ht=ze.affaireNumero||"sans-numero";return Pe[ht]||(Pe[ht]={affaireId:ze.affaireId,affaireNumero:ze.affaireNumero,affectations:[]}),Pe[ht].affectations.push(ze),Pe},{}),Me=Object.values(Oe),Ve=be.length;return s.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md border-2 border-white",style:{zIndex:30,background:Me.length>1?"linear-gradient(135deg, #a855f7, #9333ea)":G(Me[0].affaireNumero).bg},title:`${Ve} affectation(s) - ${Me.length} affaire(s): ${Me.map(Pe=>Pe.affaireNumero).join(", ")}`,children:Ve})})()]},ye)})})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-green-100 rounded border-2 border-green-400"}),s.jsx("span",{children:"Estimation actuelle"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"flex items-center -space-x-1",children:s.jsx("div",{className:"w-5 h-5 bg-purple-500 rounded-full border-2 border-white flex items-center justify-center",children:s.jsx("span",{className:"text-white text-[10px] font-bold",children:"3"})})}),s.jsx("span",{children:"Badge violet = nombre total d'affectations sur ce jour"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-50 border border-gray-200 rounded relative flex items-center justify-center"}),s.jsx("span",{children:"Weekend (non travaillé)"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-50 border border-orange-200 rounded font-semibold flex items-center justify-center text-orange-700 text-[10px]",children:"JF"}),s.jsx("span",{children:"Jour férié (non travaillé)"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-100 border-2 border-yellow-400 rounded shadow-lg"}),s.jsx("span",{children:"Aujourd'hui"})]})]})]})})},hGe=({estimation:t={},onEstimationChange:e,affaire:r,resetTrigger:n=0,onAffectationsChange:a,onDateSurvol:i})=>{const[o,l]=y.useState(t.dateCommencement||t.dateDebut||""),[c,u]=y.useState(t.dateReception||t.dateFin||""),[d,f]=y.useState([]),[A,h]=y.useState({}),[m,p]=y.useState(!1),[g,x]=y.useState([]),[v,b]=y.useState(!1),C=y.useCallback((N=null,E=null)=>{const _=N||o,k=E||c;if(!(!_||!k)){console.log("🧮 Calcul des demi-journées entre:",_,"et",k),p(!0);try{const D=new Date(_+"T00:00:00"),S=new Date(k+"T00:00:00"),F=[];let M=new Date(D),R=0;for(;M<=S;){const z=M.getDay(),Q=M.toISOString().split("T")[0];z>=1&&z<=5&&(F.push({date:Q,jour:M.toLocaleDateString("fr-FR",{weekday:"long"}),numero:R+1,creneaux:["matin","après-midi"]}),R++),M.setDate(M.getDate()+1)}const U=R*2;if(f(F),h({joursOuvres:R,totalDemiJournees:U,dateDebut:_,dateFin:k,creneauxEstimes:t.totalDemiJournees||0,surcharge:!1,utilisationPourcentage:t.totalDemiJournees>0?100:0}),e){console.log("📤 Envoi du calcul au parent:",{totalDemiJournees:U,dateDebut:_,dateFin:k});const z=t.montantDevis||0,Q=t.repartitionFabrication||60,H=t.repartitionPose||40,q=Math.round(U*Q/100),X=U-q;let $={...t,dateDebut:_,dateFin:k,totalDemiJournees:U,demiJourneesFabrication:q,demiJourneesPose:X,repartitionFabrication:Q,repartitionPose:H,dateCommencement:_,dateReception:k};if(z>0){console.log("💰 Calcul initial de la répartition financière");const K=t.nombrePersonnes||0;if(K===0||!t.montantMainOeuvre){const se=Math.round(z*.2),Z=Math.round(z*.3),ie=Math.round(z*.35),ee=z-se-Z-ie;$={...$,montantMainOeuvre:ie,montantAchats:se,montantFraisGeneraux:Z,montantMarge:ee,recalculerRepartition:!1}}else{const se=t.tauxHoraireCout||25,Z=K*U*se*4,ie=Math.round(z*.2),ee=z-Z-ie;let ue,ae;ee>0?(ue=Math.round(ee*.6),ae=z-Z-ie-ue):(ue=0,ae=Math.max(0,z-Z-ie)),$={...$,montantMainOeuvre:Z,montantAchats:ie,montantFraisGeneraux:ue,montantMarge:ae,recalculerRepartition:!0}}}e($)}}catch(D){console.error("Erreur calcul durée:",D)}finally{p(!1)}}},[o,c,t,e]);y.useEffect(()=>{const N=t.dateCommencement||t.dateDebut||"",E=t.dateReception||t.dateFin||"";if(console.log("🔄 Synchronisation des dates:",{nouvelleDebut:N,nouvelleFin:E,estimation:t}),t.montantDevis===0){l(""),u(""),b(!1);return}N&&N!==o&&(console.log("📅 Mise à jour dateDebut:",N),l(N)),E&&E!==c&&(console.log("📅 Mise à jour dateFin:",E),u(E)),N&&E&&t.totalDemiJournees===0&&(console.log("🚨 Forçage du calcul - totalDemiJournees est à 0"),C(N,E))},[t.dateCommencement,t.dateDebut,t.dateReception,t.dateFin,t.montantDevis,n,C]),y.useEffect(()=>{n>0&&(console.log("🔄 RESET TRIGGER dans BlocTemps - Effacer TOUTES les dates"),l(""),u(""),f([]),h({}),x([]),b(!1))},[n]),y.useEffect(()=>{const N=o||t.dateDebut||t.dateCommencement,E=c||t.dateFin||t.dateReception;console.log("🗓️ Vérification des dates pour calcul:",{dateDebut:o,dateFin:c,dateDebutEffective:N,dateFinEffective:E,estimation:t,hasCalculatedOnce:v}),N&&E&&(!v||N!==o||E!==c)&&(console.log("🚀 Déclenchement du calcul des demi-journées"),C(N,E),b(!0))},[o,c,t.totalDemiJournees,t.dateDebut,t.dateFin,v,C]);const j=(N,E)=>{l(N),u(E),e&&e({...t,dateDebut:N,dateFin:E,dateCommencement:N,dateReception:E}),N&&E&&C(N,E)},w=o&&c;return s.jsxs(Kt,{className:"bloc-temps bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-blue-200 shadow-lg",style:{transition:"none",transform:"none"},children:[s.jsxs(Er,{children:[s.jsxs(Br,{className:"text-xl font-bold text-blue-900 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-lg",children:s.jsx(_s,{className:"w-6 h-6 text-white"})}),"Temps & Planning"]}),s.jsxs("p",{className:"text-blue-600 text-sm flex items-center gap-2",children:[s.jsx(il,{className:"w-4 h-4"}),"Définissez les dates pour synchroniser avec le planning équipe"]})]}),s.jsxs(nr,{className:"space-y-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-100",children:s.jsx(fGe,{dateDebut:o,dateFin:c,onDateRangeChange:j,affaireId:r.id,estimation:t,resetTrigger:n,onAffectationsChange:a,onDateSurvol:i,affaire:r})}),w&&s.jsxs("div",{className:"bg-blue-100/50 border border-blue-200 rounded-xl p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[s.jsx(wn,{className:"w-5 h-5"}),"Analyse temporelle"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:A.joursOuvres}),s.jsx("div",{className:"text-sm text-blue-600",children:"Jours ouvrés"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:A.totalDemiJournees}),s.jsx("div",{className:"text-sm text-blue-600",children:"Créneaux planifiés"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:A.creneauxEstimes}),s.jsx("div",{className:"text-sm text-blue-600",children:"Créneaux estimés"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`text-2xl font-bold ${A.surcharge?"text-red-600":"text-green-600"}`,children:[A.utilisationPourcentage,"%"]}),s.jsx("div",{className:"text-sm text-blue-600",children:"Utilisation"})]})]})]}),A.creneauxEstimes>0&&s.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 text-green-800 text-sm",children:["✅ ",s.jsx("strong",{children:"Planification personnalisée"})," Vous maîtrisez vos créneaux de travail sur la période."]}),s.jsxs("div",{className:"border-t border-blue-200 pt-3 text-sm text-blue-700",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Période totale"}),s.jsxs("span",{className:"font-medium",children:[A.joursTotal," jours"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Weekends exclus"}),s.jsxs("span",{className:"font-medium",children:[A.weekends," jours"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Mode planning"}),s.jsx("span",{className:"font-medium",children:A.creneauxEstimes>0?"Créneaux maîtrisés":"Période continue"})]})]})]}),d.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[s.jsx(Ji,{className:"w-5 h-5"}),"Jours ouvrés identifiés (",d.length," jours)"]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:d.slice(0,15).map((N,E)=>s.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3 text-center hover:bg-blue-50 transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-blue-900 capitalize",children:N.jour}),s.jsx("div",{className:"text-xs text-blue-600",children:new Date(N.date).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}),s.jsxs("div",{className:"flex justify-center mt-2 gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]})]},E))}),d.length>15&&s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-sm text-blue-600 bg-blue-100 px-3 py-1 rounded-full",children:["+",d.length-15," jour",d.length-15>1?"s":""," supplémentaire",d.length-15>1?"s":""]})})]}),w&&t.totalDemiJournees>0&&s.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-xl p-4 flex items-center gap-3",children:[s.jsx(Lk,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-green-800",children:"Planning synchronisé avec succès"}),s.jsx("div",{className:"text-sm text-green-600",children:"Les cases du planning équipe seront colorées automatiquement"})]})]})]})]})},AGe=({estimation:t={}})=>{const[e,r]=y.useState(!1),[n,a]=y.useState(null),[i,o]=y.useState("cout"),l=t.montantDevis||0;i==="cout"?t.montantMainOeuvreCout||t.montantMainOeuvre:t.montantMainOeuvreVente||t.montantMainOeuvre;const c=t.montantMainOeuvreGain||0,u=i==="cout"?[{label:"Achats",value:t.montantAchats||0,percentage:l>0?(t.montantAchats||0)/l*100:0,color:"#8B9B7A",lightColor:"#A8B88F",icon:s6,description:"Matériaux et fournitures"},{label:"Coût main d'œuvre",value:t.montantMainOeuvreCout||t.montantMainOeuvre||0,percentage:l>0?(t.montantMainOeuvreCout||t.montantMainOeuvre||0)/l*100:0,color:"#A67C52",lightColor:"#B8906B",icon:n6,description:"Coût interne équipe"},{label:"Frais généraux",value:t.montantFraisGeneraux||0,percentage:l>0?(t.montantFraisGeneraux||0)/l*100:0,color:"#007AFF",lightColor:"#339CFF",icon:ro,description:"Charges et administration"},{label:"Marge",value:t.montantMarge||0,percentage:l>0?(t.montantMarge||0)/l*100:0,color:"#34C759",lightColor:"#5DD777",icon:Oh,description:"Bénéfice estimé"}]:[{label:"Achats",value:t.montantAchats||0,percentage:l>0?(t.montantAchats||0)/l*100:0,color:"#8B9B7A",lightColor:"#A8B88F",icon:s6,description:"Matériaux et fournitures"},{label:"Vente main d'œuvre",value:t.montantMainOeuvreVente||t.montantMainOeuvre||0,percentage:l>0?(t.montantMainOeuvreVente||t.montantMainOeuvre||0)/l*100:0,color:"#FF6B6B",lightColor:"#FF8787",icon:n6,description:"Vente client main d'œuvre"},{label:"Frais généraux",value:t.montantFraisGeneraux||0,percentage:l>0?(t.montantFraisGeneraux||0)/l*100:0,color:"#007AFF",lightColor:"#339CFF",icon:ro,description:"Charges et administration"},{label:"Gain MO + Marge",value:(t.montantMarge||0)+c,percentage:l>0?((t.montantMarge||0)+c)/l*100:0,color:"#34C759",lightColor:"#5DD777",icon:Oh,description:`Gain MO: ${c}€ + Marge: ${t.montantMarge||0}€`}];console.log("🔍 DEBUG Camembert:",{totalMontant:l,segments:u.map(m=>({label:m.label,value:m.value,percentage:m.percentage})),viewMode:i}),y.useEffect(()=>{const m=setTimeout(()=>{r(!0)},300);return()=>clearTimeout(m)},[]);const d=()=>{let m=0;const p=80,g=100,x=100,v=u.filter(b=>b.value>0);return v.length===0?[]:v.map((b,C)=>{const j=b.percentage/100*360,w=m,N=m+j,E=g+p*Math.cos(w*Math.PI/180),_=x+p*Math.sin(w*Math.PI/180),k=g+p*Math.cos(N*Math.PI/180),D=x+p*Math.sin(N*Math.PI/180),S=j>180?1:0,F=[`M ${g} ${x}`,`L ${E} ${_}`,`A ${p} ${p} 0 ${S} 1 ${k} ${D}`,"Z"].join(" ");return m+=j,{...b,pathData:F,startAngle:w,endAngle:N,originalIndex:u.indexOf(b),isHovered:n===u.indexOf(b)}})},f=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0}).format(m),A=m=>{const p=Math.round(m*10)/10;return p%1===0?`${p}%`:`${p.toFixed(1)}%`},h=d();return!l||l===0?s.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 rounded-2xl p-8 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx(Tl,{className:"w-12 h-12 mx-auto"})}),s.jsx("p",{className:"text-gray-600",children:"Saisissez un montant pour afficher la répartition"})]}):s.jsxs("div",{className:"bg-gradient-to-br from-white via-gray-50 to-blue-50 border border-blue-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-500",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:s.jsx(Tl,{className:"w-5 h-5 text-white"})}),"Répartition Financière"]}),s.jsx("p",{className:"text-3xl font-bold text-transparent bg-gradient-to-r from-blue-600 via-purple-600 to-teal-600 bg-clip-text",children:f(l)}),t.montantMainOeuvreVente&&s.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[s.jsx("button",{onClick:()=>o("cout"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i==="cout"?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"💰 Vue Coûts"}),s.jsx("button",{onClick:()=>o("vente"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i==="vente"?"bg-green-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"💸 Vue Vente/Gain"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative group",children:[s.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",className:"mx-auto drop-shadow-lg",children:[s.jsxs("defs",{children:[s.jsx("filter",{id:"dropshadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:s.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"4",floodOpacity:"0.2"})}),h.map((m,p)=>s.jsx("defs",{children:s.jsxs("radialGradient",{id:`gradient-${p}`,cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:m.lightColor}),s.jsx("stop",{offset:"100%",stopColor:m.color})]})},`gradient-${p}`))]}),s.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"rgba(255, 255, 255, 0.1)",stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"1"}),h.length>0?h.map((m,p)=>s.jsxs("g",{children:[s.jsx("path",{d:m.pathData,fill:`url(#gradient-${p})`,stroke:"white",strokeWidth:"2",filter:"url(#dropshadow)",className:`transition-all duration-300 cursor-pointer ${e?"opacity-100":"opacity-0"} ${m.isHovered?"transform scale-105":""}`,style:{transformOrigin:"100px 100px",animationDelay:`${p*150}ms`,animation:e?"slideIn 0.8s ease-out forwards":"none"},onMouseEnter:()=>a(m.originalIndex),onMouseLeave:()=>a(null)}),m.percentage>5&&s.jsx("text",{x:100+50*Math.cos((m.startAngle+m.endAngle)/2*Math.PI/180),y:100+50*Math.sin((m.startAngle+m.endAngle)/2*Math.PI/180),textAnchor:"middle",dominantBaseline:"central",className:"text-sm font-bold fill-white drop-shadow-lg",style:{fontSize:"12px"},children:A(m.percentage)})]},p)):s.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#E5E7EB",stroke:"white",strokeWidth:"2",filter:"url(#dropshadow)"}),s.jsx("circle",{cx:"100",cy:"100",r:"25",fill:"url(#centerGradient)",className:"drop-shadow-lg"}),s.jsx("defs",{children:s.jsxs("radialGradient",{id:"centerGradient",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.9)"}),s.jsx("stop",{offset:"100%",stopColor:"rgba(200, 200, 200, 0.1)"})]})})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:s.jsx(Tl,{className:"w-6 h-6 text-blue-600"})})})]})}),s.jsx("div",{className:"space-y-3",children:u.map((m,p)=>{const g=m.icon,x=n===p;return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all duration-300 cursor-pointer ${x?"bg-white shadow-lg transform scale-105":"bg-gray-50 hover:bg-white"}`,onMouseEnter:()=>a(p),onMouseLeave:()=>a(null),children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:m.color}}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:m.label})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.description})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-gray-800",children:f(m.value)}),s.jsx("div",{className:"text-sm text-gray-500",children:A(m.percentage)})]})]},p)})})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-blue-700",children:t.totalDemiJournees||0}),s.jsx("div",{className:"text-blue-600",children:"Demi-journées"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"text-lg font-bold text-green-700",children:[t.nombrePersonnes||0,t.nombreSousTraitants>0&&` + ${t.nombreSousTraitants}`]}),s.jsxs("div",{className:"text-green-600",children:["Personnes",t.nombreSousTraitants>0&&" (+ sous-trait.)"]})]})]}),i==="vente"&&c>0&&s.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg border border-emerald-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-emerald-600 mb-1",children:"💰 Gain sur la vente main d'œuvre"}),s.jsxs("div",{className:"text-2xl font-bold text-emerald-700",children:["+ ",f(c)]}),s.jsxs("div",{className:"text-xs text-emerald-600 mt-2",children:["Vente (",f(t.montantMainOeuvreVente||0),") - Coût (",f(t.montantMainOeuvreCout||0),")"]})]})})]}),s.jsx("style",{children:`
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: scale(0.8) rotate(-10deg);
          }
          to {
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
        }
      `})]})},mGe=({estimation:t={},onEstimationChange:e})=>{const[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(null),[c,u]=y.useState({nombrePersonnes:t.nombrePersonnes||2,demiJourneesFabrication:t.demiJourneesFabrication||t.demiJourneesFabricationEstimees||0,demiJourneesPose:t.demiJourneesPose||t.demiJourneesPoseEstimees||0,totalDemiJournees:t.totalDemiJournees||0,repartitionFabrication:t.repartitionFabrication||60,repartitionPose:t.repartitionPose||40,tauxHoraireCout:t.tauxHoraireCout||25,tauxHoraireVente:t.tauxHoraireVente||75,tauxHoraire:t.tauxHoraire||25,nombreSousTraitants:t.nombreSousTraitants||0,dateCommencement:t.dateCommencement||t.dateDebut||"",dateReception:t.dateReception||t.dateFin||"",competences:{fabrication:["Menuisier","Ébéniste"],pose:["Poseur","Finisseur"]},planning:{semaine:5,heuresParJour:8,creneaux:["matin","après-midi"]}}),[d,f]=y.useState(!1);y.useEffect(()=>{t.montantDevis===0&&c.totalDemiJournees>0&&(console.log("🔄 Réinitialisation du bloc équipe - estimation vidée"),u({nombrePersonnes:2,demiJourneesFabrication:0,demiJourneesPose:0,totalDemiJournees:0,repartitionFabrication:60,repartitionPose:40,tauxHoraireCout:25,tauxHoraireVente:75,tauxHoraire:25,nombreSousTraitants:0,dateCommencement:"",dateReception:"",competences:{fabrication:["Menuisier","Ébéniste"],pose:["Poseur","Finisseur"]},planning:{semaine:5,heuresParJour:8,creneaux:["matin","après-midi"]}}))},[t.montantDevis]);const A=(b=null,C=null,j=null)=>{const w=b||c.totalDemiJournees||t.totalDemiJournees||0,N=C||c.repartitionFabrication||60,E=j||c.repartitionPose||40,_=Math.round(w*(N/100)),k=w-_;return console.log("🧮 Calcul répartition:",{totalDJ:w,fabricationPct:N,posePct:E,fabrication:_,pose:k,total:_+k}),{fabrication:_,pose:k}};y.useEffect(()=>{const b=t.totalDemiJournees>0,C=t.totalDemiJournees!==c.totalDemiJournees;if(console.log("🔍 BlocEquipe - Vérification sync:",{estimationTotal:t.totalDemiJournees,editableTotal:c.totalDemiJournees,hasNew:b,changed:C}),C&&b){console.log("🔄 Mise à jour du bloc équipe - Nouveau total:",t.totalDemiJournees);const{fabrication:j,pose:w}=A(t.totalDemiJournees);u(_=>({..._,totalDemiJournees:t.totalDemiJournees,demiJourneesFabrication:j,demiJourneesPose:w,tauxHoraire:_.tauxHoraire||t.tauxHoraire||75,repartitionFabrication:_.repartitionFabrication||t.repartitionFabrication||60,repartitionPose:_.repartitionPose||t.repartitionPose||40,dateCommencement:t.dateCommencement||t.dateDebut||_.dateCommencement,dateReception:t.dateReception||t.dateFin||_.dateReception,nombrePersonnes:_.nombrePersonnes||t.nombrePersonnes||2}));const N=h(c.nombrePersonnes||t.nombrePersonnes||2,t.totalDemiJournees,c.tauxHoraireCout||t.tauxHoraireCout||25,c.tauxHoraireVente||t.tauxHoraireVente||75,c.nombreSousTraitants||t.nombreSousTraitants||0),E={...t,demiJourneesFabrication:j,demiJourneesPose:w,montantMainOeuvre:N.cout,montantMainOeuvreCout:N.cout,montantMainOeuvreVente:N.vente,montantMainOeuvreGain:N.gain,recalculerRepartition:!0};e&&(console.log("📤 Propagation immédiate vers parent avec montant MO:",E),e(E))}},[t.totalDemiJournees]),y.useEffect(()=>{const b=t.dateCommencement||t.dateDebut,C=t.dateReception||t.dateFin;b&&b!==c.dateCommencement&&u(j=>({...j,dateCommencement:b})),C&&C!==c.dateReception&&u(j=>({...j,dateReception:C}))},[t.dateDebut,t.dateFin,t.dateCommencement,t.dateReception]);const h=(b,C,j,w,N=0)=>{const _=C*4,k=b+N,D=k*_*j,S=k*_*w,F=S-D;return console.log("💰 Calcul main d'œuvre:",{nbPersonnes:b,nbSousTraitants:N,totalPersonnes:k,totalDemiJournees:C,tauxHoraireCout:j,tauxHoraireVente:w,heuresParDemiJournee:4,totalHeures:_,coutTotal:D,venteTotal:S,gainTotal:F}),{cout:Math.round(D),vente:Math.round(S),gain:Math.round(F)}},m=(b,C)=>{u(j=>{const w={...j,[b]:C};b==="repartitionFabrication"?w.repartitionPose=100-C:b==="repartitionPose"&&(w.repartitionFabrication=100-C);const{fabrication:N,pose:E}=A(w.totalDemiJournees,w.repartitionFabrication,w.repartitionPose),_=h(w.nombrePersonnes,w.totalDemiJournees,w.tauxHoraireCout,w.tauxHoraireVente,w.nombreSousTraitants),k={...t,nombrePersonnes:w.nombrePersonnes,demiJourneesFabrication:N,demiJourneesPose:E,tauxHoraireCout:w.tauxHoraireCout,tauxHoraireVente:w.tauxHoraireVente,nombreSousTraitants:w.nombreSousTraitants,repartitionFabrication:w.repartitionFabrication,repartitionPose:w.repartitionPose,montantMainOeuvre:_.cout,montantMainOeuvreCout:_.cout,montantMainOeuvreVente:_.vente,montantMainOeuvreGain:_.gain,recalculerRepartition:!0};return e(k),w}),f(!0)},p=()=>{const{fabrication:b,pose:C}=A(),j=h(c.nombrePersonnes,c.totalDemiJournees,c.tauxHoraireCout,c.tauxHoraireVente,c.nombreSousTraitants),w={...t,nombrePersonnes:c.nombrePersonnes,demiJourneesFabrication:b,demiJourneesPose:C,tauxHoraireCout:c.tauxHoraireCout,tauxHoraireVente:c.tauxHoraireVente,nombreSousTraitants:c.nombreSousTraitants,repartitionFabrication:c.repartitionFabrication,repartitionPose:c.repartitionPose,montantMainOeuvre:j.cout,montantMainOeuvreCout:j.cout,montantMainOeuvreVente:j.vente,montantMainOeuvreGain:j.gain,recalculerRepartition:!0};e(w),n(!1),f(!1),i(!1)},g=()=>{u({nombrePersonnes:t.nombrePersonnes||2,demiJourneesFabrication:t.demiJourneesFabrication||0,demiJourneesPose:t.demiJourneesPose||0,totalDemiJournees:t.totalDemiJournees||0,repartitionFabrication:60,repartitionPose:40,tauxHoraireCout:25,tauxHoraireVente:75,tauxHoraire:25,nombreSousTraitants:0,dateCommencement:t.dateCommencement||t.dateDebut||"",dateReception:t.dateReception||t.dateFin||"",competences:{fabrication:["Menuisier","Ébéniste"],pose:["Poseur","Finisseur"]},planning:{semaine:5,heuresParJour:8,creneaux:["matin","après-midi"]}}),n(!1),f(!1),i(!1)},{fabrication:x,pose:v}=A();return s.jsxs(Kt,{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50 border-purple-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsx(Er,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Br,{className:"text-xl font-bold text-purple-900 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg shadow-lg",children:s.jsx(Ji,{className:"w-6 h-6 text-white"})}),"Équipe & Ressources"]}),s.jsx("div",{className:"flex items-center gap-2",children:r?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Xe,{variant:"outline",size:"sm",onClick:g,className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),"Annuler"]}),s.jsxs(Xe,{size:"sm",onClick:p,className:"bg-purple-600 hover:bg-purple-700 text-white",disabled:!d,children:[s.jsx(kl,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]}):s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>{n(!0),i(!0)},className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[s.jsx(Cx,{className:"w-4 h-4 mr-1"}),"Modifier"]})})]})}),s.jsx(nr,{className:"space-y-6",children:t.totalDemiJournees>0||c.totalDemiJournees>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-purple-100/50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-purple-800 font-medium mb-2 block",children:"Nombre de personnes affectées"}),r?s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>m("nombrePersonnes",Math.max(1,c.nombrePersonnes-1)),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:s.jsx(F2,{className:"w-4 h-4"})}),s.jsx(Ur,{type:"number",value:c.nombrePersonnes,onChange:b=>m("nombrePersonnes",parseInt(b.target.value)||1),min:"1",max:"10",className:"w-20 text-center border-purple-300 focus:border-purple-500"}),s.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>m("nombrePersonnes",Math.min(10,c.nombrePersonnes+1)),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:s.jsx(Jn,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-900",children:c.nombrePersonnes}),s.jsx("div",{className:"text-sm text-purple-600",children:"personnes affectées"})]})]}),s.jsxs("div",{className:"bg-orange-100/50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-orange-800 font-medium mb-2 block",children:"👷 Sous-traitants"}),r?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>m("nombreSousTraitants",Math.max(0,c.nombreSousTraitants-1)),className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:s.jsx(F2,{className:"w-4 h-4"})}),s.jsx(Ur,{type:"number",value:c.nombreSousTraitants,onChange:b=>m("nombreSousTraitants",parseInt(b.target.value)||0),min:"0",max:"10",className:"w-20 text-center border-orange-300 focus:border-orange-500"}),s.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>m("nombreSousTraitants",Math.min(10,c.nombreSousTraitants+1)),className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:s.jsx(Jn,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-orange-700 font-medium ml-2",children:["sous-traitant",c.nombreSousTraitants>1?"s":""]})]}),c.nombreSousTraitants>0&&s.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 p-2 rounded",children:["Équipe totale : ",c.nombrePersonnes+c.nombreSousTraitants," personnes"]})]}):s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:c.nombreSousTraitants}),s.jsx("div",{className:"text-sm text-orange-600",children:c.nombreSousTraitants===0?"Aucun sous-traitant":`sous-traitant${c.nombreSousTraitants>1?"s":""}`}),c.nombreSousTraitants>0&&s.jsxs("div",{className:"text-xs text-orange-500 mt-1",children:["Total équipe : ",c.nombrePersonnes+c.nombreSousTraitants," pers."]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jr,{className:"text-purple-800 font-medium",children:"Répartition des tâches"}),s.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-700",children:"Total demi-journées planifiées :"}),s.jsx("span",{className:"font-bold text-purple-900 text-lg",children:c.totalDemiJournees})]}),s.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"La répartition est calculée automatiquement (arrondie au plus proche)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-purple-100 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-purple-800",children:"Fabrication"}),s.jsxs(Kn,{variant:"outline",className:"text-purple-700",children:[c.repartitionFabrication,"%"]})]}),r?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ur,{type:"range",min:"0",max:"100",value:c.repartitionFabrication,onChange:b=>m("repartitionFabrication",parseInt(b.target.value)),className:"w-full"}),s.jsxs("div",{className:"text-center text-sm text-purple-600",children:[x," demi-journées"]})]}):s.jsxs("div",{className:"text-center text-purple-600",children:[c.demiJourneesFabrication," demi-j"]})]}),s.jsxs("div",{className:"bg-purple-100 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-purple-800",children:"Pose"}),s.jsxs(Kn,{variant:"outline",className:"text-purple-700",children:[c.repartitionPose,"%"]})]}),r?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ur,{type:"range",min:"0",max:"100",value:c.repartitionPose,onChange:b=>m("repartitionPose",parseInt(b.target.value)),className:"w-full"}),s.jsxs("div",{className:"text-center text-sm text-purple-600",children:[v," demi-journées"]})]}):s.jsxs("div",{className:"text-center text-purple-600",children:[c.demiJourneesPose," demi-j"]})]})]}),c.totalDemiJournees>0&&s.jsxs("div",{className:"text-center text-sm text-purple-600 bg-purple-50 p-2 rounded",children:["Total: ",c.demiJourneesFabrication," + ",c.demiJourneesPose," = ",c.demiJourneesFabrication+c.demiJourneesPose," demi-journées"]})]}),r&&s.jsxs("div",{className:"bg-purple-100/50 p-4 rounded-lg space-y-3",children:[s.jsx(jr,{className:"text-purple-800 font-medium block",children:"💰 Taux horaires"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(jr,{className:"text-purple-700 text-sm mb-1 block",children:"Coût interne"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{type:"number",value:c.tauxHoraireCout,onChange:b=>m("tauxHoraireCout",parseInt(b.target.value)||25),min:"10",max:"100",className:"w-20 border-purple-300 focus:border-purple-500"}),s.jsx("span",{className:"text-purple-700 text-sm",children:"€/h"})]})]}),s.jsxs("div",{children:[s.jsx(jr,{className:"text-purple-700 text-sm mb-1 block",children:"Vente client"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{type:"number",value:c.tauxHoraireVente,onChange:b=>m("tauxHoraireVente",parseInt(b.target.value)||75),min:"50",max:"200",className:"w-20 border-purple-300 focus:border-purple-500"}),s.jsx("span",{className:"text-purple-700 text-sm",children:"€/h"})]})]})]}),s.jsxs("div",{className:"text-xs text-purple-600 bg-purple-50 p-2 rounded",children:["Marge : ",c.tauxHoraireVente-c.tauxHoraireCout,"€/h (",Math.round((c.tauxHoraireVente-c.tauxHoraireCout)/c.tauxHoraireVente*100),"%)"]})]}),c.totalDemiJournees>0&&s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-indigo-100 p-4 rounded-lg border border-purple-300 space-y-3",children:[s.jsx(jr,{className:"text-purple-800 font-medium block",children:"💼 Analyse financière main d'œuvre"}),(()=>{const b=h(c.nombrePersonnes,c.totalDemiJournees,c.tauxHoraireCout,c.tauxHoraireVente,c.nombreSousTraitants),C=c.nombrePersonnes+c.nombreSousTraitants,j=c.totalDemiJournees*4;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-xs text-purple-600 bg-white/50 p-2 rounded",children:[C," personne",C>1?"s":"","(",c.nombrePersonnes," interne",c.nombrePersonnes>1?"s":"",c.nombreSousTraitants>0&&` + ${c.nombreSousTraitants} sous-traitant${c.nombreSousTraitants>1?"s":""}`,") × ",c.totalDemiJournees," demi-journées × 4h = ",j*C,"h"]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-purple-700",children:"Coût total :"}),s.jsxs("span",{className:"text-xl font-bold text-purple-900",children:[b.cout.toLocaleString("fr-FR")," €"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-purple-700",children:"Vente client :"}),s.jsxs("span",{className:"text-xl font-bold text-green-700",children:[b.vente.toLocaleString("fr-FR")," €"]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-300",children:[s.jsx("span",{className:"text-purple-800 font-medium",children:"Gain sur main d'œuvre :"}),s.jsxs("span",{className:"text-2xl font-bold text-emerald-700",children:["+ ",b.gain.toLocaleString("fr-FR")," €"]})]}),t.montantDevis>0&&s.jsxs("div",{className:"text-sm text-purple-700 bg-purple-50 p-2 rounded",children:[s.jsxs("div",{children:["Coût : ",Math.round(b.cout/t.montantDevis*100),"% du devis"]}),s.jsxs("div",{children:["Vente : ",Math.round(b.vente/t.montantDevis*100),"% du devis"]})]})]})})()]}),(c.dateCommencement||c.dateReception)&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-2",children:[s.jsx(il,{className:"w-4 h-4"}),"Synchronisé avec le planning"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[c.dateCommencement&&s.jsxs("div",{children:[s.jsx("span",{className:"text-green-600",children:"Début :"}),s.jsx("div",{className:"font-medium text-green-800",children:new Date(c.dateCommencement).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})})]}),c.dateReception&&s.jsxs("div",{children:[s.jsx("span",{className:"text-green-600",children:"Fin :"}),s.jsx("div",{className:"font-medium text-green-800",children:new Date(c.dateReception).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})})]})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-purple-800 font-medium mb-3 block",children:"Compétences requises"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-purple-700 mb-2",children:"Fabrication"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:c.competences.fabrication.map((b,C)=>s.jsx(Kn,{variant:"secondary",className:"text-xs",children:b},C))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-purple-700 mb-2",children:"Pose"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:c.competences.pose.map((b,C)=>s.jsx(Kn,{variant:"secondary",className:"text-xs",children:b},C))})]})]})]})]}):s.jsxs("div",{className:"text-center text-purple-600 py-8",children:[s.jsx(Ji,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("div",{children:"En attente du calcul d'estimation"})]})})]})},pGe=({estimation:t={},onEstimationChange:e,montantDevis:r=0})=>{const[n,a]=y.useState(!1),[i,o]=y.useState({montantTotal:t.montantAchats||0,pourcentageDevis:r>0?Math.round((t.montantAchats||0)/r*100):20,categories:[{nom:"Bois",pourcentage:40,montant:Math.round((t.montantAchats||0)*.4),couleur:"#8B4513"},{nom:"Panneaux",pourcentage:30,montant:Math.round((t.montantAchats||0)*.3),couleur:"#CD853F"},{nom:"Quincaillerie",pourcentage:20,montant:Math.round((t.montantAchats||0)*.2),couleur:"#708090"},{nom:"Autres",pourcentage:10,montant:Math.round((t.montantAchats||0)*.1),couleur:"#DAA520"}]}),[l,c]=y.useState(!1),[u,d]=y.useState({nom:"",montant:0});y.useEffect(()=>{const _=t.montantAchats>0,k=t.categoriesAchats&&JSON.stringify(t.categoriesAchats)!==JSON.stringify(i.categories),D=_&&Math.abs(t.montantAchats-i.montantTotal)>100;if(D||k){console.log("🛒 Synchronisation avec nouvel état:",{ancien:i.montantTotal,nouveau:t.montantAchats,changementCategories:k});const S={...i};D&&(S.montantTotal=t.montantAchats,S.pourcentageDevis=r>0?Math.round(t.montantAchats/r*100):20),k&&t.categoriesAchats?S.categories=t.categoriesAchats:D&&(S.categories=i.categories.map(F=>({...F,montant:Math.round(S.montantTotal*F.pourcentage/100)}))),o(S),c(!1)}},[t.montantAchats,t.categoriesAchats,r]);const f=_=>{var M,R;const k=parseInt(_)||0,D=i.categories.map(U=>({...U,montant:Math.round(k*U.pourcentage/100)})),S={...i,montantTotal:k,pourcentageDevis:r>0?Math.round(k/r*100):20,categories:D};o(S),c(!0);const F={...t,montantAchats:S.montantTotal,categoriesAchats:S.categories,repartitionAchats:{bois:((M=S.categories.find(U=>U.nom==="Bois"))==null?void 0:M.montant)||0,quincaillerie:((R=S.categories.find(U=>U.nom==="Quincaillerie"))==null?void 0:R.montant)||0,autres:S.categories.filter(U=>!["Bois","Quincaillerie"].includes(U.nom)).reduce((U,z)=>U+z.montant,0)}};e(F)},A=_=>{var R,U;const k=parseInt(_)||20,D=Math.round(r*k/100),S=i.categories.map(z=>({...z,montant:Math.round(D*z.pourcentage/100)})),F={...i,montantTotal:D,pourcentageDevis:k,categories:S};o(F),c(!0);const M={...t,montantAchats:F.montantTotal,categoriesAchats:F.categories,repartitionAchats:{bois:((R=F.categories.find(z=>z.nom==="Bois"))==null?void 0:R.montant)||0,quincaillerie:((U=F.categories.find(z=>z.nom==="Quincaillerie"))==null?void 0:U.montant)||0,autres:F.categories.filter(z=>!["Bois","Quincaillerie"].includes(z.nom)).reduce((z,Q)=>z+Q.montant,0)},recalculerRepartition:!0};e(M)},h=(_,k,D)=>{var R,U;const S=[...i.categories];if(k==="montant")S[_].montant=parseInt(D)||0;else if(k==="pourcentage"){const z=parseInt(D)||0;S[_].pourcentage=z,S[_].montant=Math.round(i.montantTotal*z/100)}const F={...i,categories:S};o(F),c(!0);const M={...t,montantAchats:F.montantTotal,categoriesAchats:F.categories,repartitionAchats:{bois:((R=F.categories.find(z=>z.nom==="Bois"))==null?void 0:R.montant)||0,quincaillerie:((U=F.categories.find(z=>z.nom==="Quincaillerie"))==null?void 0:U.montant)||0,autres:F.categories.filter(z=>!["Bois","Quincaillerie"].includes(z.nom)).reduce((z,Q)=>z+Q.montant,0)}};e(M)},m=()=>{var S,F;const _=i.categories.reduce((M,R)=>M+R.montant,0),k=i.categories.map(M=>({...M,pourcentage:_>0?Math.round(M.montant/_*100):0}));o(M=>({...M,montantTotal:_,categories:k})),c(!0);const D={...t,montantAchats:_,categoriesAchats:k,repartitionAchats:{bois:((S=k.find(M=>M.nom==="Bois"))==null?void 0:S.montant)||0,quincaillerie:((F=k.find(M=>M.nom==="Quincaillerie"))==null?void 0:F.montant)||0,autres:k.filter(M=>!["Bois","Quincaillerie"].includes(M.nom)).reduce((M,R)=>M+R.montant,0)}};e(D)},p=()=>{if(u.nom){const _=u.montant||0,k=[...i.categories,{nom:u.nom,montant:_,pourcentage:0,couleur:`#${Math.floor(Math.random()*16777215).toString(16)}`}],D=k.reduce((S,F)=>S+F.montant,0);k.forEach(S=>{D>0?S.pourcentage=Math.round(S.montant/D*100):S.pourcentage=0}),o(S=>({...S,montantTotal:D,categories:k})),d({nom:"",montant:0}),c(!0)}},g=_=>{const k=i.categories.filter((S,F)=>F!==_),D=k.reduce((S,F)=>S+F.montant,0);k.forEach(S=>{D>0?S.pourcentage=Math.round(S.montant/D*100):S.pourcentage=0}),o(S=>({...S,montantTotal:D,categories:k})),c(!0)},x=()=>{var D,S;const _=i.categories,k={...t,montantAchats:i.montantTotal,categoriesAchats:_,repartitionAchats:{bois:((D=_.find(F=>F.nom==="Bois"))==null?void 0:D.montant)||0,quincaillerie:((S=_.find(F=>F.nom==="Quincaillerie"))==null?void 0:S.montant)||0,autres:_.filter(F=>!["Bois","Quincaillerie"].includes(F.nom)).reduce((F,M)=>F+M.montant,0)}};e(k),a(!1),c(!1),console.log("🛒 Achats sauvegardés et modifiables à nouveau:",k)},v=()=>{const _=t.montantAchats||0,k=t.categoriesAchats&&t.categoriesAchats.length>0?t.categoriesAchats:[{nom:"Bois",pourcentage:40,montant:Math.round(_*.4),couleur:"#8B4513"},{nom:"Panneaux",pourcentage:30,montant:Math.round(_*.3),couleur:"#CD853F"},{nom:"Quincaillerie",pourcentage:20,montant:Math.round(_*.2),couleur:"#708090"},{nom:"Autres",pourcentage:10,montant:Math.round(_*.1),couleur:"#DAA520"}];o({montantTotal:_,categories:k}),a(!1),c(!1)},b=i.categories.reduce((_,k)=>_+k.montant,0),C=i.categories.reduce((_,k)=>_+k.pourcentage,0),j=b-i.montantTotal,w=j>0,N=j<0,E=j===0;return s.jsxs(Kt,{className:"bg-gradient-to-br from-orange-50 via-yellow-50 to-amber-50 border-orange-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsx(Er,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Br,{className:"text-xl font-bold text-orange-900 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-yellow-600 rounded-lg shadow-lg",children:s.jsx(i6,{className:"w-6 h-6 text-white"})}),"Achats & Fournitures"]}),s.jsx("div",{className:"flex items-center gap-2",children:n?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Xe,{variant:"outline",size:"sm",onClick:v,className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),"Annuler"]}),s.jsxs(Xe,{size:"sm",onClick:x,className:"bg-orange-600 hover:bg-orange-700 text-white",disabled:!l,children:[s.jsx(kl,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]}):s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:[s.jsx(Cx,{className:"w-4 h-4 mr-1"}),"Modifier"]})})]})}),s.jsx(nr,{className:"space-y-6",children:t.montantAchats>0||n?s.jsxs("div",{className:"space-y-4",children:[(i.montantTotal>0||i.categories.length>0||n)&&s.jsxs("div",{className:"bg-orange-100/50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-orange-800 font-medium mb-2 block",children:"Budget total alloué aux achats"}),s.jsx("div",{className:"flex items-center justify-center gap-2",children:n?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{type:"number",value:i.montantTotal,onChange:_=>f(_.target.value),min:"0",step:"100",className:"text-center text-2xl font-bold border-orange-300 focus:border-orange-500 w-48",placeholder:"Budget €"}),s.jsx("span",{className:"text-2xl font-bold text-orange-900",children:"€"})]}):s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-orange-900",children:[i.montantTotal.toLocaleString(),"€"]}),s.jsxs("div",{className:"text-sm text-orange-600",children:["Budget alloué",r>0&&s.jsxs("span",{className:"ml-2",children:["(",Math.round(i.montantTotal/r*100),"% du devis)"]})]})]})})]}),n&&b!==i.montantTotal&&i.categories.length>0&&s.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${w?"bg-red-100 text-red-800":N?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:[w?s.jsx(wo,{className:"w-5 h-5"}):s.jsx(Gr,{className:"w-5 h-5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:w?"Dépassement de budget":"Sous le budget"}),s.jsxs("div",{className:"text-sm",children:[b.toLocaleString(),"€ saisi / ",i.montantTotal.toLocaleString(),"€ alloué",j!==0&&s.jsxs("span",{className:"ml-1",children:["(",j>0?"+":"",j.toLocaleString(),"€)"]})]})]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:m,className:"border-orange-300 text-orange-700 hover:bg-orange-50",title:"Ajuster le budget total pour qu'il corresponde aux montants saisis",children:[s.jsx(Tm,{className:"w-4 h-4 mr-1"}),"Synchroniser"]})]}),n&&s.jsxs("div",{className:"bg-orange-100/50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-orange-800 font-medium mb-2 block",children:"Pourcentage du devis"}),s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Ur,{type:"number",value:i.pourcentageDevis,onChange:_=>A(_.target.value),min:"0",max:"100",step:"1",className:"text-center text-2xl font-bold border-orange-300 focus:border-orange-500 w-48",placeholder:"Pourcentage %"}),s.jsx("span",{className:"text-2xl font-bold text-orange-900",children:"%"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(jr,{className:"text-orange-800 font-medium",children:"Répartition par catégorie"}),i.categories.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Kn,{variant:E?"default":w?"destructive":"secondary",className:"text-xs",children:[b.toLocaleString(),"€ / ",i.montantTotal.toLocaleString(),"€"]}),C!==100&&s.jsxs(Kn,{variant:"outline",className:"text-xs",children:[C,"%"]})]})]}),s.jsx("div",{className:"space-y-3",children:i.categories.map((_,k)=>s.jsxs("div",{className:"bg-orange-100 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:_.couleur}}),n?s.jsx(Ur,{value:_.nom,onChange:D=>h(k,"nom",D.target.value),className:"h-8 border-orange-300 focus:border-orange-500",placeholder:"Nom de la catégorie"}):s.jsx("span",{className:"font-medium text-orange-800",children:_.nom})]}),s.jsx("div",{className:"flex items-center gap-2",children:n?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{type:"number",value:_.montant,onChange:D=>h(k,"montant",parseInt(D.target.value)||0),min:"0",step:"10",className:"w-24 h-8 text-center border-orange-300 focus:border-orange-500",placeholder:"€"}),s.jsx("span",{className:"text-orange-700",children:"€"}),s.jsxs("span",{className:"text-orange-600 text-sm w-12",children:["(",_.pourcentage,"%)"]}),s.jsx(Xe,{variant:"outline",size:"sm",onClick:()=>g(k),className:"h-8 w-8 p-0 border-red-300 text-red-600 hover:bg-red-50",children:s.jsx(Zn,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Kn,{variant:"outline",className:"text-orange-700",children:[_.montant.toLocaleString(),"€"]}),s.jsxs("span",{className:"text-orange-600 text-sm",children:["(",_.pourcentage,"%)"]})]})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sl,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-sm text-orange-600",children:_.nom})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-orange-800",children:[_.montant.toLocaleString(),"€"]}),s.jsxs("div",{className:"text-xs text-orange-600",children:[_.pourcentage,"% du total"]})]})]})]},k))}),n&&s.jsxs("div",{className:"bg-white border-2 border-dashed border-orange-300 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-orange-700",children:[s.jsx(Jn,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Ajouter une nouvelle catégorie"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(jr,{className:"text-orange-800 text-sm font-medium mb-1 block",children:"Nom de la catégorie *"}),s.jsx(Ur,{value:u.nom,onChange:_=>d(k=>({...k,nom:_.target.value})),placeholder:"Ex: Isolation, Peinture, Électricité...",className:"border-orange-300 focus:border-orange-500 focus:ring-orange-200"})]}),s.jsxs("div",{children:[s.jsx(jr,{className:"text-orange-800 text-sm font-medium mb-1 block",children:"Montant initial (optionnel)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{type:"number",value:u.montant,onChange:_=>d(k=>({...k,montant:parseInt(_.target.value)||0})),min:"0",step:"50",placeholder:"0",className:"w-32 text-center border-orange-300 focus:border-orange-500 focus:ring-orange-200"}),s.jsx("span",{className:"text-orange-700 font-medium",children:"€"}),s.jsx("span",{className:"text-xs text-orange-600",children:"(modifiable après création)"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsxs(Xe,{variant:"default",size:"sm",onClick:p,className:"bg-orange-600 hover:bg-orange-700 text-white",disabled:!u.nom||u.nom.trim()==="",children:[s.jsx(Jn,{className:"w-4 h-4 mr-1"}),"Ajouter la catégorie"]}),(u.nom||u.montant>0)&&s.jsxs(Xe,{variant:"outline",size:"sm",onClick:()=>d({nom:"",montant:0}),className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),"Vider"]})]})]})]})]}),i.categories.length>0?s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[s.jsx(jr,{className:"text-orange-800 font-medium mb-3 block",children:"Résumé estimation achats"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:i.categories.length}),s.jsx("div",{className:"text-sm text-orange-600",children:"Catégories"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`text-2xl font-bold ${E?"text-green-700":w?"text-red-700":"text-orange-900"}`,children:[b.toLocaleString(),"€"]}),s.jsx("div",{className:"text-sm text-orange-600",children:"Total saisi"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`text-2xl font-bold ${E?"text-green-700":w?"text-red-700":"text-blue-700"}`,children:[i.montantTotal>0?Math.round(b/i.montantTotal*100):0,"%"]}),s.jsx("div",{className:"text-sm text-orange-600",children:"du budget"})]})]})]}):s.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg text-center",children:[s.jsx(Sl,{className:"w-12 h-12 mx-auto mb-3 text-orange-300"}),s.jsx("div",{className:"text-orange-600 mb-2",children:"Aucune catégorie définie"}),s.jsx("div",{className:"text-sm text-orange-500",children:"Ajoutez des catégories d'achats pour commencer votre estimation"})]})]}):s.jsxs("div",{className:"text-center text-orange-600 py-8",children:[s.jsx(i6,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("div",{children:"En attente du calcul d'estimation"})]})})]})},gGe=({affectations:t=[],dateSurvolee:e,onRefresh:r,loading:n=!1,disabled:a=!1})=>{const[i,o]=y.useState(!0),l=f=>{const A=[{bg:"#3b82f6",border:"#2563eb",name:"Bleu"},{bg:"#10b981",border:"#059669",name:"Vert"},{bg:"#8b5cf6",border:"#7c3aed",name:"Violet"},{bg:"#f59e0b",border:"#d97706",name:"Orange"},{bg:"#ef4444",border:"#dc2626",name:"Rouge"},{bg:"#06b6d4",border:"#0891b2",name:"Cyan"},{bg:"#84cc16",border:"#65a30d",name:"Lime"},{bg:"#d946ef",border:"#c026d3",name:"Magenta"}];if(!f||f==="N/A")return{bg:"#6b7280",border:"#4b5563",name:"Gris"};let h=0;for(let m=0;m<f.toString().length;m++)h=f.toString().charCodeAt(m)+((h<<5)-h);return A[Math.abs(h)%A.length]},c=t.reduce((f,A)=>{const h=A.affaireNumero||"sans-numero";return f[h]||(f[h]={affaireNumero:A.affaireNumero,affaireLibelle:A.affaireLibelle,affectations:[]}),f[h].affectations.push(A),f},{}),u=t.reduce((f,A)=>(f[A.date]||(f[A.date]=[]),f[A.date].push(A),f),{}),d=Object.values(c);return Object.keys(u).sort(),s.jsxs(Kt,{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50 border-indigo-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsxs(Er,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Br,{className:"text-lg font-semibold text-indigo-900 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg shadow-lg",children:s.jsx(Ji,{className:"w-5 h-5 text-white"})}),e?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:"Affectations du jour"}),s.jsx("span",{className:"text-sm font-normal text-indigo-600",children:new Date(e).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}):"Affectations Détectées"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r&&s.jsx(Xe,{variant:"outline",size:"sm",onClick:r,disabled:n||a,className:"border-indigo-300 text-indigo-700 hover:bg-indigo-50 disabled:opacity-50",children:s.jsx(_a,{className:`w-4 h-4 ${n?"animate-spin":""}`})}),s.jsx(Xe,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-indigo-700 hover:bg-indigo-100",children:i?s.jsx(nD,{className:"w-4 h-4"}):s.jsx(y0,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-base text-indigo-600 mt-2",children:[!a&&s.jsxs(s.Fragment,{children:[s.jsxs(Kn,{variant:"outline",className:"text-indigo-700 border-indigo-300",children:[s.jsx(Ji,{className:"w-3 h-3 mr-1"}),d.length," affaire",d.length>1?"s":""]}),s.jsxs(Kn,{variant:"outline",className:"text-indigo-700 border-indigo-300",children:[s.jsx(wn,{className:"w-3 h-3 mr-1"}),t.length," affectation",t.length>1?"s":""]})]}),a&&s.jsxs(Kn,{variant:"outline",className:"text-gray-500 border-gray-300",children:[s.jsx(wn,{className:"w-3 h-3 mr-1"}),"En attente du planning"]})]})]}),i&&s.jsx(nr,{className:"pt-0 space-y-4",children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"p-3 rounded-full w-12 h-12 mx-auto mb-3 flex items-center justify-center bg-gray-100",children:s.jsx(_s,{className:"w-6 h-6 text-gray-400"})}),s.jsx("h3",{className:"text-base font-medium text-gray-500 mb-1",children:"Fonctionnalité verrouillée"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Saisissez d'abord un montant pour accéder aux affectations"})]}):n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),s.jsx("p",{className:"text-base text-indigo-600",children:"Chargement des affectations..."})]})}):t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"p-3 rounded-full w-12 h-12 mx-auto mb-3 flex items-center justify-center bg-gray-100",children:s.jsx(_s,{className:"w-6 h-6 text-gray-500"})}),s.jsx("h3",{className:"text-base font-medium text-gray-700 mb-1",children:e?"Aucune affectation ce jour":"Survolez une date"}),s.jsx("p",{className:"text-sm text-gray-500",children:e?"Planning libre pour cette date":"Survolez une date du calendrier pour voir les affectations"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-base font-medium text-indigo-800 flex items-center gap-2",children:[s.jsx(Ji,{className:"w-4 h-4"}),"Affectations de ce jour (",d.length," affaire",d.length>1?"s":"",")"]}),s.jsx("div",{className:"space-y-2",children:d.map((f,A)=>{const h=l(f.affaireNumero);return s.jsxs("div",{className:"border-l-4 pl-3 py-2 bg-white rounded-r-lg shadow-sm",style:{borderLeftColor:h.border},children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"font-medium text-gray-800 text-base",children:f.affaireNumero}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.bg}}),s.jsx("span",{className:"text-xs text-gray-500",children:f.affectations.length})]})]}),s.jsx("div",{className:"text-sm text-gray-600 mb-2",children:f.affaireLibelle}),s.jsx("div",{className:"space-y-1",children:f.affectations.map((m,p)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:h.bg}}),s.jsx("span",{className:"text-gray-700 font-medium",children:m.ouvrier}),s.jsxs("span",{className:"text-gray-500",children:["(",m.periode,")"]})]},p))})]},f.affaireNumero||A)})})]}),t.filter(A=>{const m=new Date(A.date+"T12:00:00").getDay();return m===0||m===6}).length>0?s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-800 font-medium mb-1",children:[s.jsx(Io,{className:"w-4 h-4"}),"Affectation weekend détectée"]}),s.jsx("div",{className:"text-sm text-red-600",children:"Cette date est un weekend"})]}):null]})})]})},vd=["#FFF8E1","#E8F5E8","#F3E5AB","#E1F5FE","#FCE4EC","#F1F8E9","#FFF3E0","#F3E5F5","#E8EAF6","#E0F2F1","#FFEBEE","#F9FBE7","#FFF8E1","#EFEBE9","#FAFAFA"],xGe=["#FFC107","#8B9B7A","#A67C52","#2196F3","#E91E63","#4CAF50","#FF9800","#9C27B0","#3F51B5","#009688","#F44336","#8BC34A","#FF6F00","#5D4037","#757575"],Hd=new Map,_b=new Set,See=t=>{if(Hd.has(t))return Hd.get(t);let e=0,r=vd[0];for(let n=0;n<vd.length;n++)if(!_b.has(n)){e=n,r=vd[n];break}if(_b.size>=vd.length){const n=wGe(t);e=Math.abs(n)%vd.length,r=vd[e]}return _b.add(e),Hd.set(t,r),console.log(`🎨 Couleur assignée à ${t}:`,r),r},vGe=t=>{const e=See(t),r=vd.indexOf(e);return r>=0?xGe[r]:"#666666"},bGe=t=>({pastel:See(t),bordure:vGe(t),affaireId:t}),yGe=()=>{Hd.clear(),_b.clear(),console.log("🎨 Toutes les couleurs réinitialisées")},wGe=t=>{let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e},jGe=()=>{const t={};for(const[e,r]of Hd.entries()){const n=vd.indexOf(r);t[e]={couleur:r,index:n,timestamp:Date.now()}}return t},CGe=t=>{yGe();for(const[e,r]of Object.entries(t))r.index>=0&&r.index<vd.length&&(Hd.set(e,r.couleur),_b.add(r.index))},Eee="mai-gestion-couleurs-affaires",NGe=()=>{try{const t=jGe();localStorage.setItem(Eee,JSON.stringify(t))}catch(t){console.warn("⚠️ Impossible de sauvegarder les couleurs:",t)}},SGe=()=>{try{const t=localStorage.getItem(Eee);if(t){const e=JSON.parse(t);CGe(e)}}catch(t){console.warn("⚠️ Impossible de charger les couleurs:",t)}};if(typeof window<"u"){SGe();const t=Hd.set.bind(Hd);Hd.set=function(e,r){const n=t(e,r);return NGe(),n}}window.planningEstimations=window.planningEstimations||new Map;const EGe=t=>{try{window.planningEstimations.delete(t);const e=document.querySelector('[data-component="planning-equipe"]');if(e){const n=new CustomEvent("estimationCleared",{detail:{affaireId:t}});e.dispatchEvent(n)}document.querySelectorAll(".time-slot-zone, .planning-cell").forEach(n=>{n.querySelectorAll(".estimation-indicator").forEach(i=>i.remove()),n.dataset.affaireEstimation===t&&(n.style.backgroundColor="",n.style.border="",delete n.dataset.affaireEstimation)}),console.log("🧹 Estimation nettoyée du planning:",t)}catch(e){console.error("❌ Erreur nettoyage planning:",e)}},l_=t=>window.planningEstimations.get(t),c_=()=>{document.addEventListener("estimationUpdated",t=>{console.log("🔄 Estimation mise à jour:",t.detail)}),document.addEventListener("estimationCleared",t=>{console.log("🧹 Estimation supprimée:",t.detail)})};typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c_):c_());const BGe=Object.freeze(Object.defineProperty({__proto__:null,clearPlanningEstimation:EGe,getEstimationAffaire:l_,initPlanningListeners:c_},Symbol.toStringTag,{value:"Module"})),H7=({affaire:t,onEstimationSave:e,onEstimationReset:r})=>{const[n,a]=y.useState({montantDevis:0,dateDebut:"",dateFin:"",totalDemiJournees:0,nombrePersonnes:2,nombreSousTraitants:0,montantAchats:0,montantMainOeuvre:0,montantMainOeuvreCout:0,montantMainOeuvreVente:0,montantMainOeuvreGain:0,montantFraisGeneraux:0,montantMarge:0,tauxHoraireCout:25,tauxHoraireVente:75}),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(null),[f,A]=y.useState(null),[h,m]=y.useState([]),[p,g]=y.useState(null),[x,v]=y.useState([]),[b,C]=y.useState(!1),[j,w]=y.useState(0),[N,E]=y.useState(!1),[_,k]=y.useState(!1),[D,S]=y.useState(!1),[F,M]=y.useState(!1);y.useEffect(()=>{console.log("🧹 CHANGEMENT D'AFFAIRE - Nettoyage complet des caches:",t.id),window.planningEstimations&&window.planningEstimations.has(t.id)&&(window.planningEstimations.delete(t.id),console.log("🧹 Cache mémoire nettoyé pour affaire:",t.id));try{localStorage.removeItem(`estimation_${t.id}`),console.log("🧹 LocalStorage nettoyé pour affaire:",t.id)}catch{}a({montantDevis:0,dateDebut:"",dateFin:"",totalDemiJournees:0,nombrePersonnes:2,nombreSousTraitants:0,montantAchats:0,montantMainOeuvre:0,montantMainOeuvreCout:0,montantMainOeuvreVente:0,montantMainOeuvreGain:0,montantFraisGeneraux:0,montantMarge:0,tauxHoraireCout:25,tauxHoraireVente:75}),w(X=>X+1),setTimeout(()=>{N||R()},100);const q=bGe(t.id);d(q)},[t.id]),y.useEffect(()=>{if(b){const q=setTimeout(()=>{C(!1)},500);return()=>clearTimeout(q)}},[b]),y.useEffect(()=>{if(_){const q=setTimeout(()=>{k(!1)},300);return()=>clearTimeout(q)}},[_]),y.useEffect(()=>{if(N){window.autoSaveTimeout&&(clearTimeout(window.autoSaveTimeout),window.autoSaveTimeout=null);const q=setTimeout(()=>{E(!1)},2e3);return()=>clearTimeout(q)}},[N]),y.useEffect(()=>{const q=n.montantDevis>0;S(q);const X=n.dateDebut||n.dateCommencement,$=n.dateFin||n.dateReception;M(q&&X&&$)},[n.montantDevis,n.dateDebut,n.dateFin,n.dateCommencement,n.dateReception]);const R=async()=>{try{if(N)return;const q=await ES(t.id);if(q&&q.length>0){const X=q[0],$={montantDevis:X.montantTotalEstime||0,dateDebut:X.dateCommencementEstimee||"",dateFin:X.dateReceptionEstimee||"",totalDemiJournees:X.dureeTotaleEstimee||0,nombrePersonnes:X.nombrePersonnesEstime||2,nombreSousTraitants:X.nombreSousTraitants||0,montantAchats:X.coutAchatsEstime||0,montantMainOeuvre:X.coutMainOeuvreEstime||0,montantMainOeuvreCout:X.coutMainOeuvreEstime||0,montantMainOeuvreVente:X.montantMainOeuvreVente||0,montantMainOeuvreGain:X.montantMainOeuvreGain||0,montantFraisGeneraux:X.coutFraisGenerauxEstime||0,montantMarge:X.margeEstimee||0,demiJourneesFabrication:X.demiJourneesFabricationEstimees||0,demiJourneesPose:X.demiJourneesPoseEstimees||0,tauxHoraire:X.tauxHoraireMoyenEstime||25,tauxHoraireCout:X.tauxHoraireMoyenEstime||25,tauxHoraireVente:X.tauxHoraireVente||75,dateCommencement:X.dateCommencementEstimee||"",dateReception:X.dateReceptionEstimee||"",categoriesAchats:X.categoriesAchats||[],repartitionAchats:X.repartitionAchats||{},repartitionFabrication:X.repartitionFabrication||60,repartitionPose:X.repartitionPose||40};N||a(K=>({...K,...$,demiJourneesFabrication:$.demiJourneesFabricationEstimees||K.demiJourneesFabrication||0,demiJourneesPose:$.demiJourneesPoseEstimees||K.demiJourneesPose||0,nombrePersonnes:$.nombrePersonnesEstime||K.nombrePersonnes||2,tauxHoraire:$.tauxHoraireMoyenEstime||K.tauxHoraire||75,repartitionFabrication:$.repartitionFabrication||K.repartitionFabrication||60,repartitionPose:$.repartitionPose||K.repartitionPose||40}))}else{const X=l_(t.id);X&&!N&&a($=>({...$,...X}))}}catch(q){console.error("❌ Erreur chargement estimation depuis l'API:",q);try{const X=l_(t.id);X&&!N&&a($=>({...$,...X}))}catch(X){console.error("❌ Erreur fallback estimation:",X)}}},U=q=>{console.log("🔄 Changement détecté dans l'estimation:",q);let X={...n,...q};if(console.log("🔍 DEBUG AffaireEstimation - handleEstimationChange:",{recalculerRepartition:X.recalculerRepartition,montantDevis:X.montantDevis,montantAchats:X.montantAchats,montantMainOeuvre:X.montantMainOeuvre,montantFraisGeneraux:X.montantFraisGeneraux,montantMarge:X.montantMarge}),X.recalculerRepartition&&X.montantDevis>0){console.log("💰 Recalcul de la répartition financière demandé");const $=X.montantDevis,K=X.montantMainOeuvreCout||X.montantMainOeuvre||0;let se=X.montantAchats||Math.round($*.2),Z=Math.round($*.3),ie=$-K-se-Z;if(ie<0){const fe=$-K;fe>0?fe>=se+Z?ie=fe-se-Z:fe>=se?(Z=fe-se,ie=0):(se=fe,Z=0,ie=0):(se=0,Z=0,ie=0)}const ee=$>0?Math.round(K/$*100):0,ue=$>0?Math.round(se/$*100):0,ae=$>0?Math.round(Z/$*100):0,re=$>0?Math.round(ie/$*100):0;console.log("💰 Nouvelle répartition:",{montantDevis:$,montantMainOeuvre:`${K}€ (${ee}%)`,montantAchats:`${se}€ (${ue}%)`,montantFraisGeneraux:`${Z}€ (${ae}%)`,montantMarge:`${ie}€ (${re}%)`}),X={...X,montantAchats:se,montantMainOeuvre:K,montantFraisGeneraux:Z,montantMarge:ie,pourcentages:{achats:ue,mainOeuvre:ee,fraisGeneraux:ae,marge:re},montantMainOeuvreCout:K,montantMainOeuvreVente:X.montantMainOeuvreVente||K*3,montantMainOeuvreGain:X.montantMainOeuvreGain||K*2},delete X.recalculerRepartition}a(X),c(!0),(X.dateDebut||X.dateFin)&&(E(!0),setTimeout(()=>{E(!1)},500)),window.autoSaveTimeout&&(clearTimeout(window.autoSaveTimeout),window.autoSaveTimeout=null)},z=async()=>{if(!n.montantDevis||n.montantDevis<=0){alert("Veuillez saisir un montant valide avant de sauvegarder");return}if(i){console.log("🔒 Sauvegarde déjà en cours, ignorée");return}o(!0);try{window.autoSaveTimeout&&(clearTimeout(window.autoSaveTimeout),window.autoSaveTimeout=null);const q={...n,affaireId:t.id,affaireNumero:t.numero,affaireClient:t.client,couleurPastel:u==null?void 0:u.pastel,couleurBordure:u==null?void 0:u.bordure,dateCreation:new Date().toISOString(),version:"1.0"};console.log("💾 SAUVEGARDE MANUELLE UNIQUE:",q),console.log("🔍 DEBUG - État estimation actuel:",{montantDevis:n.montantDevis,montantAchats:n.montantAchats,montantMainOeuvre:n.montantMainOeuvre,montantMainOeuvreCout:n.montantMainOeuvreCout,montantFraisGeneraux:n.montantFraisGeneraux,montantMarge:n.montantMarge,totalDemiJournees:n.totalDemiJournees}),e&&await e(q),window.dispatchEvent(new CustomEvent("estimation_updated",{detail:{affaireId:t.id}})),A(new Date),k(!0),console.log("✅ SAUVEGARDE TERMINÉE - Modifications futures autorisées")}catch(q){console.error("❌ Erreur sauvegarde:",q),alert("Erreur lors de la sauvegarde. Veuillez réessayer.")}finally{o(!1)}},Q=async()=>{if(confirm(`Êtes-vous sûr de vouloir réinitialiser l'estimation ?

Cette action supprimera :
- L'estimation intelligente
- Les objectifs de l'affaire (CA, achats, heures...)
- Les affectations planning associées
- Toutes les données en cache`)){console.log("🔄 DÉBUT RÉINITIALISATION COMPLÈTE"),window.autoSaveTimeout&&(clearTimeout(window.autoSaveTimeout),window.autoSaveTimeout=null);try{await cbe(t.id),console.log("🧹 Base de données nettoyée");try{const{default:X}=await Fh(async()=>{const{default:$}=await Promise.resolve().then(()=>Kve);return{default:$}},void 0,import.meta.url);await X.supprimerAffectationsAffaire(t.id),console.log("🧹 Affectations planning supprimées")}catch(X){console.warn("⚠️ Erreur lors de la suppression des affectations planning:",X)}try{console.log("🔄 Tentative de mise à jour des objectifs pour affaire:",t.id);const X={objectifCaHt:0,objectifAchatHt:0,objectifHeuresFab:0,objectifHeuresSer:0,objectifHeuresPose:0,objectifFraisGeneraux:0,dateCommencement:null,dateCloturePrevue:null};console.log("📊 Données à envoyer:",X);const $=await $n.updateAffaire(t.id,X);console.log("✅ Résultat de la mise à jour:",$),console.log("🧹 Objectifs de l'affaire remis à zéro avec succès")}catch(X){console.error("❌ ERREUR DÉTAILLÉE lors de la mise à jour des objectifs:",X),console.error("❌ Message:",X.message),console.error("❌ Stack:",X.stack),console.error("❌ Response:",X.response),alert(`Erreur lors de la remise à zéro des objectifs: ${X.message||"Erreur inconnue"}`)}window.planningEstimations&&window.planningEstimations.has(t.id)&&(window.planningEstimations.delete(t.id),console.log("🧹 Cache mémoire nettoyé"));try{localStorage.removeItem(`estimation_${t.id}`),console.log("🧹 LocalStorage nettoyé")}catch{}try{const{clearPlanningEstimation:X}=await Fh(async()=>{const{clearPlanningEstimation:$}=await Promise.resolve().then(()=>BGe);return{clearPlanningEstimation:$}},void 0,import.meta.url);X(t.id),console.log("🧹 Synchronisation planning nettoyée")}catch(X){console.warn("⚠️ Erreur lors du nettoyage de la synchronisation:",X)}}catch(X){console.warn("⚠️ Erreur lors de la suppression:",X)}a({montantDevis:0,dateDebut:"",dateFin:"",totalDemiJournees:0,nombrePersonnes:2,montantAchats:0,montantMainOeuvre:0,montantFraisGeneraux:0,montantMarge:0,demiJourneesFabrication:0,demiJourneesPose:0,tauxHoraire:75,dateCommencement:"",dateReception:"",categoriesAchats:[],repartitionAchats:{},repartitionFabrication:60,repartitionPose:40}),c(!1),m([]),g(null),v([]),A(null),S(!1),M(!1),w(X=>X+1),setTimeout(()=>{w(X=>X+1)},300),window.dispatchEvent(new CustomEvent("estimation_reset",{detail:{affaireId:t.id}})),console.log("✅ RÉINITIALISATION COMPLÈTE TERMINÉE"),alert(`✅ Estimation réinitialisée avec succès !

- Données supprimées de la base
- Objectifs de l'affaire remis à zéro
- Affectations planning nettoyées
- Caches vidés`),r&&r(),setTimeout(()=>{window.location.reload()},500)}},H=n.montantDevis>0&&n.dateDebut&&n.dateFin;return s.jsxs("div",{className:"affaire-estimation space-y-6 p-6 bg-white min-h-screen",children:[s.jsx(uGe,{affaire:t,onEstimationChange:U}),s.jsx(Kt,{className:"bg-white border-gray-200 shadow-sm",children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{variant:D?"default":"secondary",className:D?"bg-blue-100 text-blue-800":"",children:D?"1️⃣ Montant ✅":"1️⃣ Montant ⏳"}),s.jsx("span",{className:"text-gray-400",children:"→"}),s.jsx(Kn,{variant:F?"default":"secondary",className:F?"bg-purple-100 text-purple-800":"",children:F?"2️⃣ Planning ✅":"2️⃣ Planning ⏳"}),s.jsx("span",{className:"text-gray-400",children:"→"}),s.jsx(Kn,{variant:H?"default":"secondary",className:H?"bg-green-100 text-green-800":"",children:H?"3️⃣ Calculs ✅":"3️⃣ Calculs ⏳"})]}),n.montantDevis>0&&s.jsxs(Kn,{variant:"outline",className:"text-blue-600",children:[s.jsx(Do,{className:"w-4 h-4 mr-1"}),n.montantDevis.toLocaleString(),"€"]}),n.totalDemiJournees>0&&s.jsxs(Kn,{variant:"outline",className:"text-purple-600",children:[s.jsx(Ji,{className:"w-4 h-4 mr-1"}),n.totalDemiJournees," demi-j"]}),u&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:u.pastel,borderColor:u.bordure}}),s.jsx("span",{className:"text-sm text-gray-600",children:"Planning coloré"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[f&&!l&&s.jsxs(Kn,{variant:"secondary",className:"text-green-600",children:[s.jsx(kl,{className:"w-4 h-4 mr-1"}),"Sauvegardé à ",f.toLocaleTimeString()]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:Q,disabled:i,children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Réinitialiser"]}),s.jsxs(Xe,{onClick:z,disabled:i||!n.montantDevis,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:[s.jsx(kl,{className:`w-4 h-4 mr-2 ${i?"animate-spin":""}`}),i?"Sauvegarde...":"Sauvegarder"]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(dGe,{affaire:t,estimation:n,onEstimationChange:U}),s.jsxs("div",{className:`relative transition-all duration-500 ${D?"":"opacity-50 pointer-events-none"}`,children:[s.jsx(gGe,{affectations:x,dateSurvolee:p,disabled:!D,onRefresh:()=>{console.log("🔄 Rechargement des affectations depuis le bloc dédié")}}),!D&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg backdrop-blur-sm",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-lg font-semibold",children:"🔒 Verrouillé"}),s.jsx("div",{className:"text-sm",children:"Validez d'abord le montant du devis"})]})})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:`relative transition-all duration-500 ${D?"":"opacity-50 pointer-events-none"}`,children:[s.jsx(hGe,{estimation:n,onEstimationChange:U,affaire:t,disabled:!D,resetTrigger:j,onAffectationsChange:m,onDateSurvol:(q,X)=>{g(q),v(X)}}),!D&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg backdrop-blur-sm",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-lg font-semibold",children:"🔒 Verrouillé"}),s.jsx("div",{className:"text-sm",children:"Validez d'abord le montant du devis"})]})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`relative transition-all duration-500 ${F?"":"opacity-50 pointer-events-none"}`,children:[s.jsx(mGe,{estimation:n,onEstimationChange:U,disabled:!F}),!F&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg backdrop-blur-sm",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-lg font-semibold",children:"🔒 Verrouillé"}),s.jsx("div",{className:"text-sm",children:"Complétez le planning pour révéler les calculs"})]})})]}),s.jsxs("div",{className:`relative transition-all duration-500 ${F?"":"opacity-50 pointer-events-none"}`,children:[s.jsx(pGe,{estimation:n,onEstimationChange:U,disabled:!F,montantDevis:n.montantDevis}),!F&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg backdrop-blur-sm",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-lg font-semibold",children:"🔒 Verrouillé"}),s.jsx("div",{className:"text-sm",children:"Complétez le planning pour révéler les calculs"})]})})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:`relative transition-all duration-500 ${F?"":"opacity-50 pointer-events-none"}`,children:[s.jsx(AGe,{estimation:n}),!F&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg backdrop-blur-sm",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-lg font-semibold",children:"🔒 Verrouillé"}),s.jsx("div",{className:"text-sm",children:"Complétez le planning pour révéler les calculs"})]})})]})})]}),H&&s.jsx(Kt,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 shadow-lg",children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:"🎉 Estimation Complète"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-bold text-green-800",children:[n.montantDevis.toLocaleString(),"€"]}),s.jsx("div",{className:"text-sm text-green-600",children:"Montant total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-green-800",children:n.totalDemiJournees||0}),s.jsx("div",{className:"text-sm text-green-600",children:"Demi-journées"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-green-800",children:new Date(n.dateDebut).toLocaleDateString("fr-FR")}),s.jsx("div",{className:"text-sm text-green-600",children:"Date début"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-green-800",children:new Date(n.dateFin).toLocaleDateString("fr-FR")}),s.jsx("div",{className:"text-sm text-green-600",children:"Date fin"})]})]}),s.jsx("div",{className:"text-sm text-green-600",children:"L'estimation est synchronisée avec le planning équipe"})]})})})]})},I3=y.createContext(),Uw=({open:t,onOpenChange:e,children:r})=>{const[n,a]=y.useState(!1),i=t!==void 0?t:n,o=l=>{t===void 0&&a(l),e==null||e(l)};return s.jsx(I3.Provider,{value:{isOpen:i,onOpenChange:o},children:r})},TGe=le.forwardRef(({className:t,children:e,asChild:r,...n},a)=>{const i=y.useContext(I3);return r&&le.isValidElement(e)?le.cloneElement(e,{...n,ref:a,onClick:()=>i==null?void 0:i.onOpenChange(!0)}):s.jsx("button",{ref:a,className:t,onClick:()=>i==null?void 0:i.onOpenChange(!0),...n,children:e})}),$w=le.forwardRef(({className:t,children:e,...r},n)=>{const a=y.useContext(I3);return a!=null&&a.isOpen?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>a==null?void 0:a.onOpenChange(!1)}),s.jsx("div",{ref:n,className:qt("relative z-50 grid w-full max-w-lg gap-4 border bg-white p-6 shadow-lg rounded-lg",t),...r,children:e})]}):null}),Hw=({className:t,children:e,...r})=>s.jsx("div",{className:qt("flex flex-col space-y-1.5 text-center sm:text-left",t),...r,children:e}),Qw=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("h3",{ref:n,className:qt("text-lg font-semibold leading-none tracking-tight",t),...r,children:e})),_3=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("p",{ref:n,className:qt("text-sm text-gray-500",t),...r,children:e})),zE=({className:t,children:e,...r})=>s.jsx("div",{className:qt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r,children:e});Uw.displayName="Dialog";TGe.displayName="DialogTrigger";$w.displayName="DialogContent";Hw.displayName="DialogHeader";Qw.displayName="DialogTitle";_3.displayName="DialogDescription";zE.displayName="DialogFooter";const DGe=({isOpen:t,onClose:e,onUpload:r,affaireId:n})=>{const[a,i]=y.useState(null),[o,l]=y.useState(""),[c,u]=y.useState(""),[d,f]=y.useState(""),[A,h]=y.useState(""),[m,p]=y.useState(!1),[g,x]=y.useState(!1),v=y.useRef(null),b=[{id:"financier",label:"Financier"},{id:"plans",label:"Plans"},{id:"photos",label:"Photos"},{id:"autres",label:"Autres documents"}],C={financier:[{id:"devis",label:"Devis"},{id:"factures",label:"Factures"},{id:"avoirs",label:"Avoirs"}],plans:[{id:"plan-architecte",label:"Plan architecte"},{id:"plan-technique",label:"Plan technique"}]},j={financier:".pdf,.doc,.docx,.xls,.xlsx",plans:".pdf,.dwg,.dxf,.svg,.jpg,.png",photos:".jpg,.jpeg,.png,.gif,.bmp,.zip",autres:"*"},w=M=>{M.preventDefault(),p(!0)},N=M=>{M.preventDefault(),p(!1)},E=M=>{M.preventDefault(),p(!1);const R=M.dataTransfer.files;R.length>0&&_(R[0])},_=M=>{if(M.size>104857600){ve.error("Le fichier est trop volumineux (max 100MB)");return}i(M);const U=M.name.substring(0,M.name.lastIndexOf("."))||M.name;l(U)},k=()=>{i(null),l(""),u(""),f(""),h(""),v.current&&(v.current.value="")},D=async()=>{if(!a){ve.error("Veuillez sélectionner un fichier");return}if(!o.trim()){ve.error("Veuillez donner un nom au document");return}if(!c){ve.error("Veuillez sélectionner une catégorie");return}if(C[c]&&!d){ve.error("Veuillez sélectionner une sous-catégorie");return}x(!0);try{const M=new FormData;M.append("file",a),M.append("nom",o),M.append("categorie",c),d&&M.append("sousCategorie",d),A&&M.append("description",A),console.log("📤 Envoi upload avec:",{affaireId:n,nom:o,categorie:c,sousCategorie:d,description:A,fileName:a.name,fileSize:a.size});const U=await(await Fh(async()=>{const{default:z}=await Promise.resolve().then(()=>IGe);return{default:z}},void 0,import.meta.url)).default.uploadDocument(n,M);ve.success(`Document "${o}" uploadé avec succès`),r&&r({...U,taille:U.taille||F(a.size),uploadePar:U.uploadePar||"Utilisateur actuel",type:U.type||a.name.split(".").pop().toLowerCase()}),k(),e()}catch(M){console.error("Erreur lors de l'upload:",M),ve.error("Erreur lors de l'upload du document")}finally{x(!1)}},S=()=>{if(!a)return s.jsx(Nh,{className:"w-12 h-12 text-gray-400"});const M=a.name.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","bmp"].includes(M)?s.jsx(NS,{className:"w-12 h-12 text-purple-500"}):["pdf","doc","docx","xls","xlsx"].includes(M)?s.jsx(zi,{className:"w-12 h-12 text-blue-500"}):["zip","rar","7z"].includes(M)?s.jsx(RG,{className:"w-12 h-12 text-yellow-500"}):s.jsx(Nh,{className:"w-12 h-12 text-gray-500"})},F=M=>{if(M===0)return"0 Bytes";const R=1024,U=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(M)/Math.log(R));return parseFloat((M/Math.pow(R,z)).toFixed(2))+" "+U[z]};return s.jsx(Uw,{open:t,onOpenChange:e,children:s.jsxs($w,{className:"sm:max-w-[600px]",children:[s.jsxs(Hw,{children:[s.jsx(Qw,{children:"Ajouter un document"}),s.jsx(_3,{children:"Uploadez un document et organisez-le dans la bonne catégorie"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:`
              border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all
              ${m?"border-amber-500 bg-amber-50":"border-gray-300 hover:border-gray-400"}
              ${a?"bg-gray-50":""}
            `,onDragOver:w,onDragLeave:N,onDrop:E,onClick:()=>{var M;return(M=v.current)==null?void 0:M.click()},children:[s.jsx("input",{ref:v,type:"file",className:"hidden",onChange:M=>{var R;return((R=M.target.files)==null?void 0:R[0])&&_(M.target.files[0])},accept:c?j[c]:"*"}),a?s.jsxs("div",{className:"space-y-3",children:[S(),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:a.name}),s.jsx("p",{className:"text-xs text-gray-500",children:F(a.size)})]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:M=>{M.stopPropagation(),i(null),v.current&&(v.current.value="")},children:[s.jsx(ls,{className:"w-4 h-4 mr-1"}),"Changer de fichier"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(Rd,{className:"w-12 h-12 mx-auto text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Glissez-déposez un fichier ici"}),s.jsx("p",{className:"text-xs text-gray-500",children:"ou cliquez pour parcourir"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Taille maximale : 100 MB"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"documentName",children:"Nom du document *"}),s.jsx(Ur,{id:"documentName",value:o,onChange:M=>l(M.target.value),placeholder:"Ex: Devis cuisine moderne V2",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"category",children:"Catégorie *"}),s.jsxs(Xo,{value:c,onValueChange:M=>{u(M),f("")},children:[s.jsx(Jo,{className:"w-full",children:s.jsx(Zo,{placeholder:"Sélectionnez une catégorie"})}),s.jsx(el,{children:b.map(M=>s.jsx(la,{value:M.id,children:M.label},M.id))})]})]}),c&&C[c]&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"subCategory",children:"Sous-catégorie *"}),s.jsxs(Xo,{value:d,onValueChange:f,children:[s.jsx(Jo,{className:"w-full",children:s.jsx(Zo,{placeholder:"Sélectionnez une sous-catégorie"})}),s.jsx(el,{children:C[c].map(M=>s.jsx(la,{value:M.label,children:M.label},M.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(jr,{htmlFor:"description",children:"Description (optionnel)"}),s.jsx(Fm,{id:"description",value:A,onChange:M=>h(M.target.value),placeholder:"Ajoutez une description ou des notes...",rows:3,className:"w-full"})]}),c&&j[c]!=="*"&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg",children:[s.jsx(Ls,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-blue-800",children:[s.jsx("p",{className:"font-medium",children:"Types de fichiers acceptés :"}),s.jsx("p",{children:j[c]})]})]})]}),s.jsxs(zE,{children:[s.jsx(Xe,{variant:"outline",onClick:()=>{k(),e()},disabled:g,children:"Annuler"}),s.jsx(Xe,{onClick:D,disabled:g||!a||!o||!c,className:"bg-amber-600 hover:bg-amber-700",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Upload en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rd,{className:"w-4 h-4 mr-2"}),"Uploader"]})})]})]})})},vl="/documentations",Nl={async uploadDocument(t,e){var r,n;console.log("🚀 Service: upload document pour affaire",t);for(let[a,i]of e.entries())console.log(`FormData ${a}:`,i);try{const a=await Ee.post(`${vl}/affaire/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}});return console.log("✅ Upload réussi:",a.data),a.data}catch(a){throw console.error("❌ Erreur upload service:",a),console.error("❌ Response data:",(r=a.response)==null?void 0:r.data),console.error("❌ Response status:",(n=a.response)==null?void 0:n.status),a}},async getDocumentsByAffaire(t){return(await Ee.get(`${vl}/affaire/${t}`)).data},async getStatsByAffaire(t){return(await Ee.get(`${vl}/affaire/${t}/stats`)).data},async getDocument(t){return(await Ee.get(`${vl}/${t}`)).data},async downloadDocument(t){try{return(await Ee.get(`${vl}/${t}/download`,{responseType:"blob"})).data}catch(e){console.error("❌ Erreur téléchargement avec headers, tentative avec token en query:",e);const r=localStorage.getItem("auth_token");if(r)try{const a=`${Ee.defaults.baseURL||"http://localhost:8000/api"}${vl}/${t}/download?token=${encodeURIComponent(r)}`,i=await fetch(a);if(!i.ok)throw new Error(`HTTP ${i.status}`);return await i.blob()}catch(n){console.error("❌ Erreur téléchargement avec token en query aussi:",n)}throw e}},getPreviewUrl(t){const e=localStorage.getItem("auth_token");if(!e)throw console.error("❌ Aucun token d'authentification trouvé pour la prévisualisation"),console.log("🔍 Clés localStorage disponibles:",Object.keys(localStorage)),new Error("Authentification requise pour visualiser le document");const n=`${Ee.defaults.baseURL||"http://localhost:8000/api"}${vl}/${t}/preview?token=${encodeURIComponent(e)}`;return console.log("🔗 URL de prévisualisation générée:",n),console.log("🔑 Token utilisé:",e.substring(0,20)+"..."),n},async updateDocument(t,e){return(await Ee.patch(`${vl}/${t}`,e)).data},async deleteDocument(t){return(await Ee.delete(`${vl}/${t}`)).data},async searchDocuments(t,e){return(await Ee.get(`${vl}/affaire/${t}/search`,{params:e})).data},async downloadMultiple(t){return(await Ee.post(`${vl}/download-multiple`,{documentIds:t},{responseType:"blob"})).data},createUploadFormData(t){const e=new FormData;return e.append("file",t.file),e.append("nom",t.nom),e.append("categorie",t.categorie),t.sousCategorie&&e.append("sousCategorie",t.sousCategorie),t.description&&e.append("description",t.description),e},downloadBlob(t,e){const r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)},getApiBaseUrl(){return Ee.defaults.baseURL||"http://localhost:8000/api"},getAuthToken(){const t=localStorage.getItem("auth_token");if(!t)throw console.error("❌ Aucun token d'authentification trouvé"),console.log("🔍 Vérification localStorage:",Object.keys(localStorage)),new Error("Authentification requise");try{const e=t.split(".");if(e.length!==3)throw console.warn("⚠️ Token JWT mal formé"),new Error("Token invalide");const r=JSON.parse(atob(e[1])),n=Math.floor(Date.now()/1e3);r.exp&&r.exp<n&&console.warn("⚠️ Token expiré"),console.log("🔑 Token semble valide, expiration:",new Date(r.exp*1e3))}catch(e){console.warn("⚠️ Erreur validation token:",e.message)}return t},generateSecureUrl(t,e){try{const r=this.getAuthToken(),a=`${this.getApiBaseUrl()}${vl}/${e}/${t}?token=${encodeURIComponent(r)}`;return console.log(`🔗 URL sécurisée générée (${t}):`,a),a}catch(r){throw console.error(`❌ Impossible de générer l'URL sécurisée pour ${t}:`,r),r}},openDocumentInNewTab(t){try{const e=this.generateSecureUrl("preview",t),r=window.open(e,"_blank","noopener,noreferrer");return r||(console.warn("🚫 Popup bloqué, utilisation de la méthode alternative"),this.openDocumentAlternative(t))}catch(e){throw console.error("❌ Erreur lors de l'ouverture du document:",e),e}},openDocumentAlternative(t){try{const e=this.generateSecureUrl("preview",t),r=document.createElement("a");return r.href=e,r.target="_blank",r.rel="noopener noreferrer",document.body.appendChild(r),r.click(),document.body.removeChild(r),console.log("✅ Document ouvert via méthode alternative"),!0}catch(e){throw console.error("❌ Erreur méthode alternative:",e),e}},createDocumentPreviewIframe(t,e){try{const r=this.generateSecureUrl("preview",t),n=document.createElement("iframe");return n.src=r,n.style.width="100%",n.style.height="600px",n.style.border="none",n.style.borderRadius="8px",n.onload=()=>{console.log("✅ Iframe chargée avec succès")},n.onerror=()=>{console.error("❌ Erreur chargement iframe"),this.handleIframeError(e,t)},e.innerHTML="",e.appendChild(n),console.log("✅ Iframe de prévisualisation créée"),n}catch(r){throw console.error("❌ Erreur création iframe:",r),this.handleIframeError(e,t),r}},handleIframeError(t,e){t.innerHTML=`
      <div class="flex flex-col items-center justify-center h-full text-center p-8 bg-gray-50 rounded-lg">
        <div class="text-red-500 mb-4">
          <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"></path>
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900 mb-2">Impossible de charger la prévisualisation</h3>
        <p class="text-gray-600 mb-4">Le document ne peut pas être affiché dans cette fenêtre.</p>
        <div class="space-x-2">
          <button onclick="window.documentationsService.openDocumentInNewTab(${e})" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Ouvrir dans un nouvel onglet
          </button>
          <button onclick="window.documentationsService.fallbackDownload(${e})" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">
            Télécharger
          </button>
        </div>
      </div>
    `},async checkAuthValidity(){try{const t=this.getAuthToken();return(await fetch(`${this.getApiBaseUrl()}/auth/profile`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok?(console.log("✅ Authentification valide"),!0):(console.warn("⚠️ Token invalide, tentative de renouvellement"),!1)}catch(t){return console.error("❌ Erreur vérification auth:",t),!1}},async fallbackDownload(t){try{console.log("📥 Fallback: téléchargement direct du document");const e=await this.downloadDocument(t),r=`document_${t}_${Date.now()}`;return this.downloadBlob(e,r),!0}catch(e){throw console.error("❌ Erreur téléchargement fallback:",e),e}},getThumbnailUrl(t){return`https://sauvegarde-mai-gestion-production.up.railway.app/api/api/documentations/${t}/thumbnail`}};typeof window<"u"&&(window.documentationsService=Nl);const IGe=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),_Ge=({isOpen:t,onClose:e,document:r,onDownload:n})=>{const a=y.useRef(null);y.useEffect(()=>{t&&r&&a.current&&(async()=>{try{if(!await Nl.checkAuthValidity()){console.warn("⚠️ Authentification invalide, affichage des options de fallback"),Nl.handleIframeError(a.current,r.id);return}Nl.createDocumentPreviewIframe(r.id,a.current)}catch(c){console.error("Erreur lors de la création de la prévisualisation:",c),Nl.handleIframeError(a.current,r.id),ve.error("Impossible de prévisualiser le document. Utilisez les boutons alternatifs.")}})()},[t,r]);const i=()=>{try{Nl.openDocumentInNewTab(r.id),ve.success("Document ouvert dans un nouvel onglet")}catch(l){console.error("Erreur ouverture externe:",l),ve.error("Impossible d'ouvrir le document")}},o=async()=>{try{n&&await n(r)}catch(l){console.error("Erreur téléchargement:",l),ve.error("Impossible de télécharger le document")}};return r?s.jsx(Uw,{open:t,onOpenChange:e,children:s.jsxs($w,{className:"sm:max-w-4xl h-[80vh] flex flex-col",children:[s.jsxs(Hw,{className:"flex flex-row items-center justify-between py-4",children:[s.jsxs(Qw,{className:"flex items-center gap-2 text-lg",children:[s.jsx(zi,{className:"w-5 h-5 text-blue-600"}),r.nom]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Xe,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2",children:[s.jsx(Jj,{className:"w-4 h-4"}),"Ouvrir dans un nouvel onglet"]}),s.jsxs(Xe,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-2",children:[s.jsx(Va,{className:"w-4 h-4"}),"Télécharger"]}),s.jsx(Xe,{variant:"ghost",size:"sm",onClick:e,className:"p-2",children:s.jsx(ls,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{ref:a,className:"w-full h-full bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(zi,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"Chargement du document..."})]})})}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Catégorie:"})," ",r.categorie]}),r.sousCategorie&&s.jsxs("span",{children:[s.jsx("strong",{children:"Sous-catégorie:"})," ",r.sousCategorie]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Taille:"})," ",r.taille]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Uploadé le:"})," ",new Date(r.dateUpload).toLocaleDateString("fr-FR")]})]})]})})]})}):null},PGe=({document:t,className:e=""})=>{var d,f;const[r,n]=y.useState(!1),[a,i]=y.useState(!1),l=["jpg","jpeg","png","gif","webp","pdf"].includes((d=t.type)==null?void 0:d.toLowerCase()),c=()=>{var h;const A={className:"w-8 h-8 text-gray-400"};switch((h=t.type)==null?void 0:h.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":case"webp":return s.jsx(NS,{...A});case"pdf":return s.jsx(zi,{...A});default:return s.jsx(Nh,{...A})}};if(!l||r)return s.jsx("div",{className:`flex items-center justify-center bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg ${e}`,children:c()});const u=Nl.getThumbnailUrl(t.id);return s.jsxs("div",{className:`relative overflow-hidden rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 shadow-sm border ${e}`,children:[!a&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),s.jsx("img",{src:u,alt:`Miniature de ${t.nom}`,className:`w-full h-full object-contain transition-all duration-300 hover:scale-102 ${a?"opacity-100":"opacity-0"}`,onLoad:()=>{i(!0),n(!1)},onError:()=>{console.log(`❌ Erreur chargement miniature pour document ${t.id}`),n(!0),i(!1)}}),a&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 hover:opacity-100 transition-all duration-300"}),a&&s.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-md text-xs font-medium text-gray-700 opacity-0 hover:opacity-100 transition-all duration-200",children:(f=t.type)==null?void 0:f.toUpperCase()})]})},Q7=({affaire:t,onRefreshData:e})=>{const[r,n]=y.useState([]),[a,i]=y.useState(!0),[o,l]=y.useState(""),[c,u]=y.useState("all"),[d,f]=y.useState([]),[A,h]=y.useState(!1),[m,p]=y.useState(!1),[g,x]=y.useState(null),v=[{id:"all",label:"Tous",color:"bg-gray-100"},{id:"financier",label:"Financier",color:"bg-blue-100"},{id:"plans",label:"Plans",color:"bg-green-100"},{id:"photos",label:"Photos",color:"bg-purple-100"},{id:"autres",label:"Autres documents",color:"bg-orange-100"}],b={financier:["Devis","Factures","Avoirs"],plans:["Plan architecte","Plan technique"]};y.useEffect(()=>{C()},[t.id]);const C=async()=>{try{i(!0);const S=await Nl.getDocumentsByAffaire(t.id);n(S)}catch(S){console.error("Erreur lors du chargement des documents:",S),ve.error("Impossible de charger les documents")}finally{i(!1)}},j=S=>{switch(S){case"pdf":return s.jsx(zi,{className:"w-8 h-8 text-red-500"});case"zip":case"rar":case"7z":return s.jsx(RG,{className:"w-8 h-8 text-yellow-500"});case"jpg":case"png":case"jpeg":case"gif":return s.jsx(NS,{className:"w-8 h-8 text-purple-500"});case"doc":case"docx":return s.jsx(zi,{className:"w-8 h-8 text-blue-500"});case"xls":case"xlsx":case"csv":return s.jsx(zi,{className:"w-8 h-8 text-green-500"});case"dwg":case"dxf":return s.jsx(zi,{className:"w-8 h-8 text-orange-500"});default:return s.jsx(Nh,{className:"w-8 h-8 text-gray-500"})}},w=r.filter(S=>{const F=S.nom.toLowerCase().includes(o.toLowerCase()),M=c==="all"||S.categorie===c;return F&&M}),N=S=>{C(),e&&e()},E=async S=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer le document "${S.nom}" ?`))try{await Nl.deleteDocument(S.id),n(F=>F.filter(M=>M.id!==S.id)),ve.success("Document supprimé avec succès"),e&&e()}catch(F){console.error("Erreur lors de la suppression du document:",F),ve.error("Impossible de supprimer le document")}},_=async S=>{try{ve.info(`Téléchargement de "${S.nom}" en cours...`);const F=await Nl.downloadDocument(S.id);Nl.downloadBlob(F,S.nomOriginal||S.nom),ve.success(`Téléchargement de "${S.nom}" terminé`)}catch(F){console.error("Erreur lors du téléchargement du document:",F),ve.error(`Impossible de télécharger le document "${S.nom}"`)}},k=S=>{try{console.log("👁️ Tentative de visualisation du document:",S.nom,"ID:",S.id),x(S),p(!0),ve.success(`Prévisualisation de "${S.nom}"`)}catch(F){console.error("❌ Erreur lors de la visualisation du document:",F),F.message.includes("Authentification")?ve.error("Authentification requise. Veuillez vous reconnecter."):ve.error(`Impossible d'ouvrir le document "${S.nom}"`)}},D=()=>{const S=w.length;if(S===0){ve.warning("Aucun document à télécharger");return}ve.info(`Préparation du téléchargement de ${S} document${S>1?"s":""}...`)};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Kt,{children:s.jsx(Er,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Br,{className:"text-xl font-bold text-gray-800",children:"Documentations de l'affaire"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Xe,{variant:"outline",className:"flex items-center gap-2",onClick:D,children:[s.jsx(Va,{className:"w-4 h-4"}),"Télécharger"]}),s.jsxs(Xe,{className:"flex items-center gap-2 bg-amber-600 hover:bg-amber-700",onClick:()=>h(!0),children:[s.jsx(Rd,{className:"w-4 h-4"}),"Ajouter un document"]})]})]})})}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(Ur,{type:"text",placeholder:"Rechercher un document...",value:o,onChange:S=>l(S.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2",children:v.map(S=>s.jsxs(Xe,{variant:c===S.id?"default":"outline",size:"sm",onClick:()=>u(S.id),className:c===S.id?"bg-amber-600 hover:bg-amber-700":"",children:[s.jsx(Zj,{className:"w-4 h-4 mr-1"}),S.label]},S.id))})]}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:w.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zj,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Aucun document trouvé"})]}):s.jsx(s.Fragment,{children:(c==="financier"||c==="plans")&&b[c]?s.jsx("div",{className:`grid grid-cols-1 gap-6 ${c==="financier"?"md:grid-cols-3":c==="plans"?"md:grid-cols-2":"md:grid-cols-3"}`,children:b[c].map(S=>{const F=w.filter(M=>M.sousCategorie===S);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-800 border-b pb-2",children:S}),F.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx(Nh,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Aucun document"})]}):s.jsx("div",{className:"space-y-3",children:F.map(M=>s.jsxs("div",{className:"border rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer bg-white",children:[s.jsx("div",{className:"mb-3",children:s.jsx(PGe,{document:M,className:"w-full h-40"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate flex-1 mr-2",children:M.nom}),s.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:new Date(M.dateUpload).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:M.taille}),s.jsx("span",{children:M.uploadePar})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),k(M)},children:s.jsx(ha,{className:"w-4 h-4"})}),s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),_(M)},children:s.jsx(Va,{className:"w-4 h-4"})}),s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1 text-red-500 hover:text-red-700",onClick:R=>{R.stopPropagation(),E(M)},children:s.jsx(Zn,{className:"w-4 h-4"})})]})]},M.id))})]},S)})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(S=>s.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[j(S.type),s.jsx("span",{className:"text-xs text-gray-400",children:new Date(S.dateUpload).toLocaleDateString("fr-FR")})]}),s.jsx("h3",{className:"font-semibold text-sm mb-1 truncate",children:S.nom}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:S.taille}),s.jsx("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-3",children:s.jsx("span",{children:S.uploadePar})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1",onClick:F=>{F.stopPropagation(),k(S)},children:s.jsx(ha,{className:"w-4 h-4"})}),s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1",onClick:F=>{F.stopPropagation(),_(S)},children:s.jsx(Va,{className:"w-4 h-4"})}),s.jsx(Xe,{variant:"ghost",size:"sm",className:"flex-1 text-red-500 hover:text-red-700",onClick:F=>{F.stopPropagation(),E(S)},children:s.jsx(Zn,{className:"w-4 h-4"})})]})]},S.id))})})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Kt,{children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"Documents totaux"})]}),s.jsx(Nh,{className:"w-8 h-8 text-amber-500"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:"53.4 MB"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Espace utilisé"})]}),s.jsx(Zj,{className:"w-8 h-8 text-blue-500"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:"3"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs"})]}),s.jsx(zi,{className:"w-8 h-8 text-green-500"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:"15"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Téléchargements"})]}),s.jsx(Va,{className:"w-8 h-8 text-purple-500"})]})})})]}),s.jsx(DGe,{isOpen:A,onClose:()=>h(!1),onUpload:N,affaireId:t.id}),s.jsx(_Ge,{isOpen:m,onClose:()=>{p(!1),x(null)},document:g,onDownload:_})]})},kGe=({affaire:t,financialData:e,achatsParCategorie:r,onRefreshData:n,activeTab:a,onTabChange:i,marginAlerts:o,showOnlyTabs:l=!1,showOnlyContent:c=!1})=>{const u=async f=>{try{let A=function(x){if(x){if(x.includes("T")||x.match(/^\d{4}-\d{2}-\d{2}$/))return x.split("T")[0];if(x.includes("/")){const[v,b,C]=x.split("/");return`${C}-${b.padStart(2,"0")}-${v.padStart(2,"0")}`}return x}};console.log("🔥 DÉBUT SAUVEGARDE ESTIMATION INTELLIGENTE:",f);const h={affaireId:t.id,montantTotalEstime:f.montantDevis||0,dureeTotaleEstimee:f.totalDemiJournees||0,coutMainOeuvreEstime:f.montantMainOeuvreCout||f.montantMainOeuvre||0,coutAchatsEstime:f.montantAchats||0,coutFraisGenerauxEstime:f.montantFraisGeneraux||0,margeEstimee:f.montantMarge||0,demiJourneesFabricationEstimees:f.demiJourneesFabrication||0,demiJourneesPoseEstimees:f.demiJourneesPose||0,nombrePersonnesEstime:f.nombrePersonnes||2,tauxHoraireMoyenEstime:f.tauxHoraireCout||f.tauxHoraire||25,tauxHoraireVente:f.tauxHoraireVente||75,dateCommencementEstimee:f.dateCommencementEstimee?A(f.dateCommencementEstimee):f.dateDebut?A(f.dateDebut):void 0,dateReceptionEstimee:f.dateReceptionEstimee?A(f.dateReceptionEstimee):f.dateFin?A(f.dateFin):void 0,commentaire:"Estimation intelligente générée",donneesEtendues:JSON.stringify({categoriesAchats:f.categoriesAchats||[],repartitionAchats:f.repartitionAchats||{},repartitionFabrication:f.repartitionFabrication||60,repartitionPose:f.repartitionPose||40,montantMainOeuvreVente:f.montantMainOeuvreVente||0,montantMainOeuvreGain:f.montantMainOeuvreGain||0,couleurPastel:f.couleurPastel,couleurBordure:f.couleurBordure,affaireNumero:f.affaireNumero,affaireClient:f.affaireClient,version:f.version||"1.0"})};console.log("📊 DONNÉES ESTIMATION PRÉPARÉES:",h);const m=await ES(t.id);let p;if(m&&m.length>0){const x=m[0];p=await obe(x.id,h),console.log("✅ Estimation mise à jour avec succès")}else p=await ibe(h),console.log("✅ Nouvelle estimation créée avec succès");const g={objectifCaHt:f.montantDevis||0,objectifAchatHt:f.montantAchats||0,objectifHeuresFab:Math.round((f.demiJourneesFabrication||0)*4),objectifHeuresPose:Math.round((f.demiJourneesPose||0)*4),objectifFraisGeneraux:f.montantFraisGeneraux||0,dateCommencement:h.dateCommencementEstimee,dateCloturePrevue:h.dateReceptionEstimee};await $n.updateAffaire(t.id,g),console.log("✅ Objectifs affaire mis à jour"),n&&n(),console.log("🎉 SAUVEGARDE TERMINÉE AVEC SUCCÈS")}catch(A){throw console.error("❌ ERREUR SAUVEGARDE ESTIMATION:",A),A}},d=[{id:"synthese",label:"Synthèse",icon:_G,description:"Vue d'ensemble de l'affaire"},{id:"devis",label:"Devis",icon:zi,description:"Gestion des devis et factures",badge:e.nbDevis||0},{id:"achats",label:"Achats",icon:Nx,description:"Suivi des achats et BDC",badge:(e.nbAchats||0)+(e.nbBdc||0)},{id:"documentations",label:"Documentations",icon:Zj,description:"Documents et fichiers de l'affaire"},{id:"estimation",label:"Estimation",icon:yx,description:"Estimation intelligente avec pré-remplissage automatique"}];return l?s.jsx("div",{className:"w-full py-2",children:s.jsx(j0,{value:a,onValueChange:i,className:"w-full",children:s.jsx(C0,{className:"flex w-full bg-stone-200/80 backdrop-blur-xl border border-stone-300/50 shadow-lg rounded-xl p-1.5 gap-1",children:d.map(f=>{const A=f.icon,h={synthese:"text-amber-600",devis:"text-orange-600",achats:"text-lime-600",documentations:"text-indigo-600",estimation:"text-emerald-600"};return s.jsxs(Vi,{value:f.id,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 
                    bg-transparent hover:bg-stone-100/80 
                    data-[state=active]:bg-amber-600 data-[state=active]:text-white data-[state=active]:shadow-md
                    border border-transparent hover:border-stone-300/60
                    text-stone-600 hover:text-stone-800 data-[state=active]:text-white`,children:[s.jsx(A,{className:`w-4 h-4 ${h[f.id]||"text-stone-500"} data-[state=active]:text-white transition-colors`}),s.jsx("span",{className:"hidden sm:inline",children:f.label}),f.badge>0&&s.jsx(Kn,{variant:"secondary",className:"ml-1 text-xs bg-amber-100 text-amber-700 border-0 data-[state=active]:bg-white/20 data-[state=active]:text-white font-medium",children:f.badge})]},f.id)})})})}):c?s.jsxs("div",{className:"w-full",children:[a==="synthese"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($7,{affaire:t,financialData:e,marginAlerts:o}),s.jsx(x7,{affaire:t,financialData:e,marginAlerts:o}),s.jsx(v7,{affaire:t,financialData:e})]}),a==="devis"&&s.jsx(g7,{affaireId:t.id,onDevisValidated:n,onDevisChanged:n}),a==="achats"&&s.jsx(YI,{affaire:t,achatsParCategorie:r,onRefresh:n}),a==="documentations"&&s.jsx(Q7,{affaire:t,onRefreshData:n}),a==="estimation"&&s.jsx(H7,{affaire:t,onEstimationSave:u,onEstimationReset:n})]}):s.jsx("div",{className:"w-full",children:s.jsxs(j0,{value:a,onValueChange:i,className:"w-full",children:[s.jsx(C0,{className:"flex w-full mb-6 bg-stone-200/80 backdrop-blur-xl border border-stone-300/50 shadow-lg rounded-xl p-1.5 gap-1",children:d.map(f=>{const A=f.icon,h={synthese:"text-amber-600",devis:"text-orange-600",achats:"text-lime-600",documentations:"text-indigo-600",estimation:"text-emerald-600"};return s.jsxs(Vi,{value:f.id,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 
                  bg-transparent hover:bg-stone-100/80 
                  data-[state=active]:bg-amber-600 data-[state=active]:text-white data-[state=active]:shadow-md
                  border border-transparent hover:border-stone-300/60
                  text-stone-600 hover:text-stone-800 data-[state=active]:text-white`,children:[s.jsx(A,{className:`w-4 h-4 ${h[f.id]||"text-stone-500"} data-[state=active]:text-white transition-colors`}),s.jsx("span",{className:"hidden sm:inline",children:f.label}),f.badge>0&&s.jsx(Kn,{variant:"secondary",className:"ml-1 text-xs bg-amber-100 text-amber-700 border-0 data-[state=active]:bg-white/20 data-[state=active]:text-white font-medium",children:f.badge})]},f.id)})}),s.jsxs(Wi,{value:"synthese",className:"space-y-6",children:[s.jsx($7,{affaire:t,financialData:e,marginAlerts:o}),s.jsx(x7,{affaire:t,financialData:e,marginAlerts:o}),s.jsx(v7,{affaire:t,financialData:e})]}),s.jsx(Wi,{value:"devis",className:"space-y-6",children:s.jsx(g7,{affaireId:t.id,onDevisValidated:n,onDevisChanged:n})}),s.jsx(Wi,{value:"achats",className:"space-y-6",children:s.jsx(YI,{affaire:t,achatsParCategorie:r,onRefresh:n})}),s.jsx(Wi,{value:"documentations",className:"space-y-6",children:s.jsx(Q7,{affaire:t,onRefreshData:n})}),s.jsx(Wi,{value:"estimation",className:"space-y-6",children:s.jsx(H7,{affaire:t,onEstimationSave:u,onEstimationReset:n})})]})})},Bee=t=>{if(!t)return null;if(t.latitude&&t.longitude)return`https://www.google.com/maps?q=${t.latitude},${t.longitude}`;let e="";if(t.adresse)e=t.adresse;else{const n=[];t.rue&&n.push(t.rue),t.codePostal&&t.ville?n.push(`${t.codePostal} ${t.ville}`):(t.codePostal&&n.push(t.codePostal),t.ville&&n.push(t.ville)),t.pays&&t.pays!=="France"&&n.push(t.pays),e=n.join(", ")}return e?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`:null},OGe=t=>{if(!t)return null;if(t.latitude&&t.longitude)return`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;const e=Bee(t);if(!e)return null;const r=e.match(/query=(.+)$/);return r?`https://www.google.com/maps/dir/?api=1&destination=${r[1]}`:null},FGe=t=>{if(!t)return"";if(t.adresse)return t.adresse;const e=[];return t.rue&&e.push(t.rue),t.codePostal&&t.ville?e.push(`${t.codePostal} ${t.ville}`):(t.codePostal&&e.push(t.codePostal),t.ville&&e.push(t.ville)),t.pays&&t.pays!=="France"&&e.push(t.pays),e.join(", ")},RGe=t=>t?!!(t.latitude&&t.longitude||t.adresse&&t.adresse.trim()||t.ville&&t.ville.trim()):!1,MGe=({addressData:t,showDirections:e=!0,showMapLink:r=!0,showIcon:n=!0,className:a="",variant:i="default",children:o})=>{if(!RGe(t))return s.jsxs("div",{className:`flex items-center gap-2 text-gray-400 ${a}`,children:[s.jsx(Au,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm italic",children:"Aucune adresse renseignée"})]});const l=FGe(t),c=Bee(t),u=OGe(t),d=()=>{c&&window.open(c,"_blank","noopener,noreferrer")},f=()=>{u&&window.open(u,"_blank","noopener,noreferrer")};return i==="compact"?s.jsxs("div",{className:`space-y-1 ${a}`,children:[s.jsxs("div",{className:"flex items-start gap-2",children:[n&&s.jsx(Au,{className:"w-3 h-3 text-current/70 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-xs break-words leading-tight",children:l})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-5",children:[r&&c&&s.jsxs("button",{onClick:d,className:"inline-flex items-center gap-1 text-xs text-white/80 hover:text-white transition-colors",title:"Voir sur Google Maps",children:[s.jsx(Jj,{className:"w-2.5 h-2.5"}),"Carte"]}),e&&u&&s.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 text-xs text-white/80 hover:text-white transition-colors",title:"Obtenir l'itinéraire",children:[s.jsx(kB,{className:"w-2.5 h-2.5"}),"Itinéraire"]})]})]}):i==="detailed"?s.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 border border-blue-100 dark:border-blue-800 ${a}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(ro,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Adresse du chantier"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Localisation du projet"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 mb-3 border border-gray-100 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start gap-3",children:[n&&s.jsx(Au,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-900 dark:text-white font-medium leading-relaxed",children:l}),t.latitude&&t.longitude&&s.jsx("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-400",children:s.jsxs("span",{className:"font-mono",children:["📍 ",t.latitude.toFixed(6),", ",t.longitude.toFixed(6)]})})]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[r&&c&&s.jsxs("button",{onClick:d,className:"flex-1 min-w-0 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",title:"Voir sur Google Maps",children:[s.jsx(Jj,{className:"w-4 h-4"}),"Voir sur la carte"]}),e&&u&&s.jsxs("button",{onClick:f,className:"flex-1 min-w-0 inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",title:"Obtenir l'itinéraire",children:[s.jsx(kB,{className:"w-4 h-4"}),"Itinéraire"]})]}),o]}):s.jsxs("div",{className:`space-y-3 ${a}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[n&&s.jsx(Au,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-900 dark:text-white font-medium break-words leading-relaxed",children:l}),t.latitude&&t.longitude&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 font-mono",children:["📍 ",t.latitude.toFixed(6),", ",t.longitude.toFixed(6)]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 ml-8",children:[r&&c&&s.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/20 rounded-md transition-all",title:"Voir sur Google Maps",children:[s.jsx(Jj,{className:"w-4 h-4"}),"Voir sur la carte"]}),e&&u&&s.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-green-600 hover:text-green-800 hover:bg-green-50 dark:text-green-400 dark:hover:text-green-300 dark:hover:bg-green-900/20 rounded-md transition-all",title:"Obtenir l'itinéraire",children:[s.jsx(kB,{className:"w-4 h-4"}),"Itinéraire"]})]}),o]})},LGe=[{value:"PLANIFIEE",label:"Planifiée"},{value:"EN_COURS",label:"En cours"},{value:"TERMINEE",label:"Terminée"}],UGe=({statutActuel:t,onStatusChange:e,disabled:r=!1})=>{const[n,a]=y.useState(!1),[i,o]=y.useState(!1),l=y.useRef(null),c=D6(t);y.useEffect(()=>{const f=A=>{l.current&&!l.current.contains(A.target)&&a(!1)};if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);const u=async f=>{if(f===t){a(!1);return}o(!0);try{await e(f),a(!1),ve.success(`Statut changé vers "${D6(f).label}"`)}catch(A){console.error("Erreur lors du changement de statut:",A),ve.error("Erreur lors du changement de statut")}finally{o(!1)}},d=f=>{f.preventDefault(),f.stopPropagation(),!r&&!i&&a(!n)};return c?s.jsxs("div",{className:"relative inline-block",ref:l,children:[s.jsxs("button",{type:"button",onClick:d,disabled:r||i,className:`
          inline-flex items-center justify-between rounded-lg font-medium transition-all duration-200
          px-3 py-1.5 text-xs
          ${r?"opacity-50 cursor-not-allowed":"hover:shadow-md cursor-pointer"}
          ${i?"animate-pulse":""}
          min-w-[100px] 
          ${c.color}
          border border-white/20
        `,children:[s.jsx("span",{children:c.label}),!r&&s.jsx(y0,{className:`ml-2 w-3 h-3 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&!r&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50 overflow-hidden",children:s.jsx("div",{className:"py-1",children:LGe.map(f=>{const A=f.value===t;return s.jsxs("button",{type:"button",onClick:h=>{h.preventDefault(),h.stopPropagation(),u(f.value)},disabled:i,className:`
                    w-full px-3 py-2 text-left text-sm
                    hover:bg-gray-50 
                    transition-colors duration-150 
                    flex items-center justify-between
                    ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  `,children:[s.jsx("span",{className:"text-gray-900",children:f.label}),A&&s.jsx(Gr,{className:"w-4 h-4 text-gray-600"})]},f.value)})})})]}):s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:"Statut inconnu"})},$Ge=()=>{const{id:t}=Ka(),e=Fr(),[r,n]=y.useState("synthese"),{affaire:a,loading:i,error:o,updateAffaire:l,refreshAffaire:c}=abe(t),{financialData:u,loading:d,refreshFinancialData:f,getMarginAlerts:A}=ube(t,a),{achatsParCategorie:h,loading:m,refreshAchatsData:p}=dbe(t),g=i||d;y.useEffect(()=>{o&&(ve.error("Erreur lors du chargement de l'affaire"),e("/affaires"))},[o,e]);const x=async()=>{try{await Promise.all([c(),f(),p()]),ve.success("Données mises à jour")}catch(C){console.error("Erreur lors du rafraîchissement:",C),ve.error("Erreur lors de la mise à jour")}},v=u?A():{},b=async C=>{try{await l({statut:C}),await c()}catch(j){throw j}};return g?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des données..."})]})}):a?s.jsx("div",{className:"p-6 md:p-8 lg:p-10 bg-stone-50 min-h-screen",children:s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(Xe,{variant:"ghost",onClick:()=>e("/affaires"),className:"text-stone-600 hover:text-stone-800 hover:bg-stone-200/60 px-3 py-1.5 rounded-lg transition-colors",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Retour aux affaires"]})}),s.jsxs("div",{className:"p-6 rounded-2xl shadow-lg mb-8 text-white relative overflow-hidden",style:{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/site-web-commande-panneaux.firebasestorage.app/o/Divers%20belles%20images%2FCapture%20d%E2%80%99%C3%A9cran%20du%202025-06-24%2016-55-23.png?alt=media&token=2c074298-e573-40fc-9430-adf76c0dac3b')",backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("div",{className:"absolute inset-0 bg-black/40"}),s.jsxs("div",{className:"relative z-10 grid grid-cols-1 lg:grid-cols-12 gap-6 items-center",children:[s.jsxs("div",{className:"lg:col-span-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:s.jsx(b0,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-1 [text-shadow:0_2px_6px_rgba(0,0,0,0.8)]",children:[a.numero," - ",a.libelle]}),s.jsx(UGe,{statutActuel:a.statut,onStatusChange:b,size:"md"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 text-sm",children:[s.jsxs("div",{className:"p-3 bg-black/20 rounded-lg backdrop-blur-sm",children:[s.jsx("div",{className:"font-semibold mb-1 text-lime-700 [text-shadow:0_1px_2px_rgba(0,0,0,0.2)]",children:"Client"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"w-4 h-4 text-white/90"}),s.jsx("span",{className:"font-medium text-white",children:a.client})]})]}),s.jsxs("div",{className:"p-3 bg-black/20 rounded-lg backdrop-blur-sm",children:[s.jsx("div",{className:"font-semibold mb-1 text-lime-700 [text-shadow:0_1px_2px_rgba(0,0,0,0.2)]",children:"Adresse"}),(a.adresse||a.ville)&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Au,{className:"w-4 h-4 text-white/90 mt-1 flex-shrink-0"}),s.jsx(MGe,{addressData:a,variant:"compact",className:"text-white",showIcon:!1})]})]}),s.jsxs("div",{className:"p-3 bg-black/20 rounded-lg backdrop-blur-sm",children:[s.jsx("div",{className:"font-semibold mb-1 text-lime-700 [text-shadow:0_1px_2px_rgba(0,0,0,0.2)]",children:"Création"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(il,{className:"w-4 h-4 text-white/90"}),s.jsx("span",{className:"font-medium text-white",children:nbe(a.createdAt)})]})]})]})]}),s.jsxs("div",{className:"lg:col-span-4 flex lg:flex-col lg:items-end gap-3",children:[s.jsxs(Xe,{onClick:x,variant:"outline",className:"bg-white/10 hover:bg-white/20 border-white/30 text-white backdrop-blur-md w-full lg:w-auto",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Actualiser"]}),s.jsxs(Xe,{onClick:()=>e(`/affaires/${a.id}/modifier`),className:"bg-olive-700/80 hover:bg-olive-600/90 text-white font-bold shadow-lg backdrop-blur-sm w-full lg:w-auto",children:[s.jsx(Po,{className:"w-4 h-4 mr-2"}),"Modifier l'affaire"]})]})]})]}),s.jsxs("div",{className:"w-full",children:[v.isCritical&&s.jsxs(Kt,{className:"mb-6 bg-red-100/50 border-l-4 border-red-500 shadow-md",children:[s.jsxs(Er,{className:"flex flex-row items-center gap-3 space-y-0 pb-2",children:[s.jsx(wo,{className:"w-6 h-6 text-red-600"}),s.jsx(Br,{className:"text-red-800",children:"Alerte Marge Critique"})]}),s.jsx(nr,{children:s.jsxs("p",{className:"text-red-700",children:[v.message," La marge réelle est de ",s.jsxs("span",{className:"font-bold",children:[u.margeReelle.toFixed(2),"%"]}),"."]})})]}),s.jsx(kGe,{activeTab:r,onTabChange:n,affaire:a,financialData:u,marginAlerts:v,achatsParCategorie:h,onRefreshData:x,loading:{financial:d,achats:m}})]})]})}):s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx(b0,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Affaire non trouvée"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"L'affaire demandée n'existe pas ou n'est plus accessible."}),s.jsxs(Xe,{onClick:()=>e("/affaires"),className:"w-full",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Retour aux affaires"]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zw(t){return t+.5|0}const gh=(t,e,r)=>Math.max(Math.min(t,r),e);function fb(t){return gh(zw(t*2.55),0,255)}function Ih(t){return gh(zw(t*255),0,255)}function bd(t){return gh(zw(t/2.55)/100,0,1)}function z7(t){return gh(zw(t*100),0,100)}const bl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u_=[..."0123456789ABCDEF"],HGe=t=>u_[t&15],QGe=t=>u_[(t&240)>>4]+u_[t&15],gj=t=>(t&240)>>4===(t&15),zGe=t=>gj(t.r)&&gj(t.g)&&gj(t.b)&&gj(t.a);function VGe(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&bl[t[1]]*17,g:255&bl[t[2]]*17,b:255&bl[t[3]]*17,a:e===5?bl[t[4]]*17:255}:(e===7||e===9)&&(r={r:bl[t[1]]<<4|bl[t[2]],g:bl[t[3]]<<4|bl[t[4]],b:bl[t[5]]<<4|bl[t[6]],a:e===9?bl[t[7]]<<4|bl[t[8]]:255})),r}const WGe=(t,e)=>t<255?e(t):"";function GGe(t){var e=zGe(t)?HGe:QGe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+WGe(t.a,e):void 0}const qGe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Tee(t,e,r){const n=e*Math.min(r,1-r),a=(i,o=(i+t/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function KGe(t,e,r){const n=(a,i=(a+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function YGe(t,e,r){const n=Tee(t,1,.5);let a;for(e+r>1&&(a=1/(e+r),e*=a,r*=a),a=0;a<3;a++)n[a]*=1-e-r,n[a]+=e;return n}function XGe(t,e,r,n,a){return t===a?(e-r)/n+(e<r?6:0):e===a?(r-t)/n+2:(t-e)/n+4}function P3(t){const r=t.r/255,n=t.g/255,a=t.b/255,i=Math.max(r,n,a),o=Math.min(r,n,a),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=XGe(r,n,a,d,i),c=c*60+.5),[c|0,u||0,l]}function k3(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Ih)}function O3(t,e,r){return k3(Tee,t,e,r)}function JGe(t,e,r){return k3(YGe,t,e,r)}function ZGe(t,e,r){return k3(KGe,t,e,r)}function Dee(t){return(t%360+360)%360}function eqe(t){const e=qGe.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?fb(+e[5]):Ih(+e[5]));const a=Dee(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=JGe(a,i,o):e[1]==="hsv"?n=ZGe(a,i,o):n=O3(a,i,o),{r:n[0],g:n[1],b:n[2],a:r}}function tqe(t,e){var r=P3(t);r[0]=Dee(r[0]+e),r=O3(r),t.r=r[0],t.g=r[1],t.b=r[2]}function rqe(t){if(!t)return;const e=P3(t),r=e[0],n=z7(e[1]),a=z7(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${a}%, ${bd(t.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const V7={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},W7={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nqe(){const t={},e=Object.keys(W7),r=Object.keys(V7);let n,a,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],a=0;a<r.length;a++)i=r[a],l=l.replace(i,V7[i]);i=parseInt(W7[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let xj;function sqe(t){xj||(xj=nqe(),xj.transparent=[0,0,0,0]);const e=xj[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aqe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iqe(t){const e=aqe.exec(t);let r=255,n,a,i;if(e){if(e[7]!==n){const o=+e[7];r=e[8]?fb(o):gh(o*255,0,255)}return n=+e[1],a=+e[3],i=+e[5],n=255&(e[2]?fb(n):gh(n,0,255)),a=255&(e[4]?fb(a):gh(a,0,255)),i=255&(e[6]?fb(i):gh(i,0,255)),{r:n,g:a,b:i,a:r}}}function oqe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${bd(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const _T=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Bg=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lqe(t,e,r){const n=Bg(bd(t.r)),a=Bg(bd(t.g)),i=Bg(bd(t.b));return{r:Ih(_T(n+r*(Bg(bd(e.r))-n))),g:Ih(_T(a+r*(Bg(bd(e.g))-a))),b:Ih(_T(i+r*(Bg(bd(e.b))-i))),a:t.a+r*(e.a-t.a)}}function vj(t,e,r){if(t){let n=P3(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=O3(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Iee(t,e){return t&&Object.assign(e||{},t)}function G7(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ih(t[3]))):(e=Iee(t,{r:0,g:0,b:0,a:1}),e.a=Ih(e.a)),e}function cqe(t){return t.charAt(0)==="r"?iqe(t):eqe(t)}class Wy{constructor(e){if(e instanceof Wy)return e;const r=typeof e;let n;r==="object"?n=G7(e):r==="string"&&(n=VGe(e)||sqe(e)||cqe(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Iee(this._rgb);return e&&(e.a=bd(e.a)),e}set rgb(e){this._rgb=G7(e)}rgbString(){return this._valid?oqe(this._rgb):void 0}hexString(){return this._valid?GGe(this._rgb):void 0}hslString(){return this._valid?rqe(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,a=e.rgb;let i;const o=r===i?.5:r,l=2*o-1,c=n.a-a.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,n.r=255&u*n.r+i*a.r+.5,n.g=255&u*n.g+i*a.g+.5,n.b=255&u*n.b+i*a.b+.5,n.a=o*n.a+(1-o)*a.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=lqe(this._rgb,e._rgb,r)),this}clone(){return new Wy(this.rgb)}alpha(e){return this._rgb.a=Ih(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=zw(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vj(this._rgb,2,e),this}darken(e){return vj(this._rgb,2,-e),this}saturate(e){return vj(this._rgb,1,e),this}desaturate(e){return vj(this._rgb,1,-e),this}rotate(e){return tqe(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ad(){}const uqe=(()=>{let t=0;return()=>t++})();function yn(t){return t==null}function ca(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Yr(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ni(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function tu(t,e){return Ni(t)?t:e}function Qr(t,e){return typeof t>"u"?e:t}const dqe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,_ee=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ss(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Tn(t,e,r,n){let a,i,o;if(ca(t))for(i=t.length,a=0;a<i;a++)e.call(r,t[a],a);else if(Yr(t))for(o=Object.keys(t),i=o.length,a=0;a<i;a++)e.call(r,t[o[a]],o[a])}function nN(t,e){let r,n,a,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(a=t[r],i=e[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function sN(t){if(ca(t))return t.map(sN);if(Yr(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let a=0;for(;a<n;++a)e[r[a]]=sN(t[r[a]]);return e}return t}function Pee(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function fqe(t,e,r,n){if(!Pee(t))return;const a=e[t],i=r[t];Yr(a)&&Yr(i)?Gy(a,i,n):e[t]=sN(i)}function Gy(t,e,r){const n=ca(e)?e:[e],a=n.length;if(!Yr(t))return t;r=r||{};const i=r.merger||fqe;let o;for(let l=0;l<a;++l){if(o=n[l],!Yr(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,r)}return t}function Pb(t,e){return Gy(t,e,{merger:hqe})}function hqe(t,e,r){if(!Pee(t))return;const n=e[t],a=r[t];Yr(n)&&Yr(a)?Pb(n,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=sN(a))}const q7={"":t=>t,x:t=>t.x,y:t=>t.y};function Aqe(t){const e=t.split("."),r=[];let n="";for(const a of e)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function mqe(t){const e=Aqe(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function zm(t,e){return(q7[e]||(q7[e]=mqe(e)))(t)}function F3(t){return t.charAt(0).toUpperCase()+t.slice(1)}const qy=t=>typeof t<"u",Lh=t=>typeof t=="function",K7=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function pqe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Hs=Math.PI,Ts=2*Hs,gqe=Ts+Hs,aN=Number.POSITIVE_INFINITY,xqe=Hs/180,ya=Hs/2,TA=Hs/4,Y7=Hs*2/3,kee=Math.log10,Pu=Math.sign;function kb(t,e,r){return Math.abs(t-e)<r}function X7(t){const e=Math.round(t);t=kb(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(kee(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function vqe(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((a,i)=>a-i).pop(),e}function bqe(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ky(t){return!bqe(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function yqe(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function wqe(t,e,r){let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function _d(t){return t*(Hs/180)}function jqe(t){return t*(180/Hs)}function J7(t){if(!Ni(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function Oee(t,e){const r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*Hs&&(i+=Ts),{angle:i,distance:a}}function d_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Cqe(t,e){return(t-e+gqe)%Ts-Hs}function ou(t){return(t%Ts+Ts)%Ts}function Yy(t,e,r,n){const a=ou(t),i=ou(e),o=ou(r),l=ou(i-a),c=ou(o-a),u=ou(a-i),d=ou(a-o);return a===i||a===o||n&&i===o||l>c&&u<d}function vi(t,e,r){return Math.max(e,Math.min(r,t))}function Nqe(t){return vi(t,-32768,32767)}function Pd(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function R3(t,e,r){r=r||(o=>t[o]<e);let n=t.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const om=(t,e,r,n)=>R3(t,r,n?a=>{const i=t[a][e];return i<r||i===r&&t[a+1][e]===r}:a=>t[a][e]<r),Sqe=(t,e,r)=>R3(t,r,n=>t[n][e]>=r);function Eqe(t,e,r){let n=0,a=t.length;for(;n<a&&t[n]<e;)n++;for(;a>n&&t[a-1]>r;)a--;return n>0||a<t.length?t.slice(n,a):t}const Fee=["push","pop","shift","splice","unshift"];function Bqe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Fee.forEach(r=>{const n="_onData"+F3(r),a=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Z7(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(e);a!==-1&&n.splice(a,1),!(n.length>0)&&(Fee.forEach(i=>{delete t[i]}),delete t._chartjs)}function Ree(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Mee=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Lee(t,e){let r=[],n=!1;return function(...a){r=a,n||(n=!0,Mee.call(window,()=>{n=!1,t.apply(e,r)}))}}function Tqe(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const M3=t=>t==="start"?"left":t==="end"?"right":"center",ui=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,Dqe=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function Iqe(t,e,r){const n=e.length;let a=0,i=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:A,minDefined:h,maxDefined:m}=o.getUserBounds();if(h){if(a=Math.min(om(c,d,f).lo,r?n:om(e,d,o.getPixelForValue(f)).lo),u){const p=c.slice(0,a+1).reverse().findIndex(g=>!yn(g[l.axis]));a-=Math.max(0,p)}a=vi(a,0,n-1)}if(m){let p=Math.max(om(c,o.axis,A,!0).hi+1,r?0:om(e,d,o.getPixelForValue(A),!0).hi+1);if(u){const g=c.slice(p-1).findIndex(x=>!yn(x[l.axis]));p+=Math.max(0,g)}i=vi(p,a,n)-a}else i=n-a}return{start:a,count:i}}function _qe(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,a={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=a,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const bj=t=>t===0||t===1,eH=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ts/r)),tH=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ts/r)+1,Ob={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ya)+1,easeOutSine:t=>Math.sin(t*ya),easeInOutSine:t=>-.5*(Math.cos(Hs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>bj(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>bj(t)?t:eH(t,.075,.3),easeOutElastic:t=>bj(t)?t:tH(t,.075,.3),easeInOutElastic(t){return bj(t)?t:t<.5?.5*eH(t*2,.1125,.45):.5+.5*tH(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ob.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ob.easeInBounce(t*2)*.5:Ob.easeOutBounce(t*2-1)*.5+.5};function L3(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rH(t){return L3(t)?t:new Wy(t)}function PT(t){return L3(t)?t:new Wy(t).saturate(.5).darken(.1).hexString()}const Pqe=["x","y","borderWidth","radius","tension"],kqe=["color","borderColor","backgroundColor"];function Oqe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:kqe},numbers:{type:"number",properties:Pqe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Fqe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nH=new Map;function Rqe(t,e){e=e||{};const r=t+JSON.stringify(e);let n=nH.get(r);return n||(n=new Intl.NumberFormat(t,e),nH.set(r,n)),n}function U3(t,e,r){return Rqe(e,r).format(t)}const Mqe={values(t){return ca(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let a,i=t;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),i=Lqe(t,r)}const o=kee(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),U3(t,n,c)}};function Lqe(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var Uee={formatters:Mqe};function Uqe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Uee.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vm=Object.create(null),f_=Object.create(null);function Fb(t,e){if(!e)return t;const r=e.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function kT(t,e,r){return typeof e=="string"?Gy(Fb(t,e),r):Gy(Fb(t,""),e)}class $qe{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>PT(a.backgroundColor),this.hoverBorderColor=(n,a)=>PT(a.borderColor),this.hoverColor=(n,a)=>PT(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return kT(this,e,r)}get(e){return Fb(this,e)}describe(e,r){return kT(f_,e,r)}override(e,r){return kT(Vm,e,r)}route(e,r,n,a){const i=Fb(this,e),o=Fb(this,n),l="_"+r;Object.defineProperties(i,{[l]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],u=o[a];return Yr(c)?Object.assign({},u,c):Qr(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var Js=new $qe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Oqe,Fqe,Uqe]);function Hqe(t){return!t||yn(t.size)||yn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sH(t,e,r,n,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,r.push(a)),i>n&&(n=i),n}function DA(t,e,r){const n=t.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((e-a)*n)/n+a}function aH(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function h_(t,e,r,n){$ee(t,e,r,n,null)}function $ee(t,e,r,n,a){let i,o,l,c,u,d,f,A;const h=e.pointStyle,m=e.rotation,p=e.radius;let g=(m||0)*xqe;if(h&&typeof h=="object"&&(i=h.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(g),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),h){default:a?t.ellipse(r,n,a/2,p,0,0,Ts):t.arc(r,n,p,0,Ts),t.closePath();break;case"triangle":d=a?a/2:p,t.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=Y7,t.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=Y7,t.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),t.closePath();break;case"rectRounded":u=p*.516,c=p-u,o=Math.cos(g+TA)*c,f=Math.cos(g+TA)*(a?a/2-u:c),l=Math.sin(g+TA)*c,A=Math.sin(g+TA)*(a?a/2-u:c),t.arc(r-f,n-l,u,g-Hs,g-ya),t.arc(r+A,n-o,u,g-ya,g),t.arc(r+f,n+l,u,g,g+ya),t.arc(r-A,n+o,u,g+ya,g+Hs),t.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*p,d=a?a/2:c,t.rect(r-d,n-c,2*d,2*c);break}g+=TA;case"rectRot":f=Math.cos(g)*(a?a/2:p),o=Math.cos(g)*p,l=Math.sin(g)*p,A=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-l),t.lineTo(r+A,n-o),t.lineTo(r+f,n+l),t.lineTo(r-A,n+o),t.closePath();break;case"crossRot":g+=TA;case"cross":f=Math.cos(g)*(a?a/2:p),o=Math.cos(g)*p,l=Math.sin(g)*p,A=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-l),t.lineTo(r+f,n+l),t.moveTo(r+A,n-o),t.lineTo(r-A,n+o);break;case"star":f=Math.cos(g)*(a?a/2:p),o=Math.cos(g)*p,l=Math.sin(g)*p,A=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-l),t.lineTo(r+f,n+l),t.moveTo(r+A,n-o),t.lineTo(r-A,n+o),g+=TA,f=Math.cos(g)*(a?a/2:p),o=Math.cos(g)*p,l=Math.sin(g)*p,A=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-l),t.lineTo(r+f,n+l),t.moveTo(r+A,n-o),t.lineTo(r-A,n+o);break;case"line":o=a?a/2:Math.cos(g)*p,l=Math.sin(g)*p,t.moveTo(r-o,n-l),t.lineTo(r+o,n+l);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(g)*(a?a/2:p),n+Math.sin(g)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Xy(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function VE(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function WE(t){t.restore()}function Qqe(t,e,r,n,a){if(!e)return t.lineTo(r.x,r.y);if(a==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else a==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function zqe(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Vqe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),yn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Wqe(t,e,r,n,a){if(a.strikethrough||a.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,u=r+i.actualBoundingBoxDescent,d=a.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function Gqe(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Jy(t,e,r,n,a,i={}){const o=ca(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=a.string,Vqe(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&Gqe(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),yn(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,r,n,i.maxWidth)),t.fillText(u,r,n,i.maxWidth),Wqe(t,r,n,u,i),n+=Number(a.lineHeight);t.restore()}function iN(t,e){const{x:r,y:n,w:a,h:i,radius:o}=e;t.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*Hs,Hs,!0),t.lineTo(r,n+i-o.bottomLeft),t.arc(r+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Hs,ya,!0),t.lineTo(r+a-o.bottomRight,n+i),t.arc(r+a-o.bottomRight,n+i-o.bottomRight,o.bottomRight,ya,0,!0),t.lineTo(r+a,n+o.topRight),t.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-ya,!0),t.lineTo(r+o.topLeft,n)}const qqe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kqe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yqe(t,e){const r=(""+t).match(qqe);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const Xqe=t=>+t||0;function $3(t,e){const r={},n=Yr(e),a=n?Object.keys(e):e,i=Yr(t)?n?o=>Qr(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)r[o]=Xqe(i(o));return r}function Hee(t){return $3(t,{top:"y",right:"x",bottom:"y",left:"x"})}function i0(t){return $3(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ml(t){const e=Hee(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function bi(t,e){t=t||{},e=e||Js.font;let r=Qr(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Qr(t.style,e.style);n&&!(""+n).match(Kqe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:Qr(t.family,e.family),lineHeight:Yqe(Qr(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Qr(t.weight,e.weight),string:""};return a.string=Hqe(a),a}function yj(t,e,r,n){let a,i,o;for(a=0,i=t.length;a<i;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function Jqe(t,e,r){const{min:n,max:a}=t,i=_ee(e,(a-n)/2),o=(l,c)=>r&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(a,i)}}function fp(t,e){return Object.assign(Object.create(t),e)}function H3(t,e=[""],r,n,a=()=>t[0]){const i=r||t;typeof n>"u"&&(n=Wee("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:a,override:l=>H3([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return zee(l,c,()=>iKe(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return oH(l).includes(c)},ownKeys(l){return oH(l)},set(l,c,u){const d=l._storage||(l._storage=a());return l[c]=d[c]=u,delete l._keys,!0}})}function tx(t,e,r,n){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:Qee(t,n),setContext:i=>tx(t,i,r,n),override:i=>tx(t.override(i),e,r,n)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return zee(i,o,()=>eKe(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function Qee(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Lh(r)?r:()=>r,isIndexable:Lh(n)?n:()=>n}}const Zqe=(t,e)=>t?t+F3(e):e,Q3=(t,e)=>Yr(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function zee(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function eKe(t,e,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:o}=t;let l=n[e];return Lh(l)&&o.isScriptable(e)&&(l=tKe(e,l,t,r)),ca(l)&&l.length&&(l=rKe(e,l,t,o.isIndexable)),Q3(e,l)&&(l=tx(l,a,i&&i[e],o)),l}function tKe(t,e,r,n){const{_proxy:a,_context:i,_subProxy:o,_stack:l}=r;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Q3(t,c)&&(c=z3(a._scopes,a,t,c)),c}function rKe(t,e,r,n){const{_proxy:a,_context:i,_subProxy:o,_descriptors:l}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(Yr(e[0])){const c=e,u=a._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=z3(u,a,t,d);e.push(tx(f,i,o&&o[t],l))}}return e}function Vee(t,e,r){return Lh(t)?t(e,r):t}const nKe=(t,e)=>t===!0?e:typeof t=="string"?zm(e,t):void 0;function sKe(t,e,r,n,a){for(const i of e){const o=nKe(r,i);if(o){t.add(o);const l=Vee(o._fallback,r,a);if(typeof l<"u"&&l!==r&&l!==n)return l}else if(o===!1&&typeof n<"u"&&r!==n)return null}return!1}function z3(t,e,r,n){const a=e._rootScopes,i=Vee(e._fallback,r,n),o=[...t,...a],l=new Set;l.add(n);let c=iH(l,o,r,i||r,n);return c===null||typeof i<"u"&&i!==r&&(c=iH(l,o,i,c,n),c===null)?!1:H3(Array.from(l),[""],a,i,()=>aKe(e,r,n))}function iH(t,e,r,n,a){for(;r;)r=sKe(t,e,r,n,a);return r}function aKe(t,e,r){const n=t._getTarget();e in n||(n[e]={});const a=n[e];return ca(a)&&Yr(r)?r:a||{}}function iKe(t,e,r,n){let a;for(const i of e)if(a=Wee(Zqe(i,t),r),typeof a<"u")return Q3(t,a)?z3(r,n,t,a):a}function Wee(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function oH(t){let e=t._keys;return e||(e=t._keys=oKe(t._scopes)),e}function oKe(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))e.add(n);return Array.from(e)}const lKe=Number.EPSILON||1e-14,rx=(t,e)=>e<t.length&&!t[e].skip&&t[e],Gee=t=>t==="x"?"y":"x";function cKe(t,e,r,n){const a=t.skip?e:t,i=e,o=r.skip?e:r,l=d_(i,a),c=d_(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=n*u,A=n*d;return{previous:{x:i.x-f*(o.x-a.x),y:i.y-f*(o.y-a.y)},next:{x:i.x+A*(o.x-a.x),y:i.y+A*(o.y-a.y)}}}function uKe(t,e,r){const n=t.length;let a,i,o,l,c,u=rx(t,0);for(let d=0;d<n-1;++d)if(c=u,u=rx(t,d+1),!(!c||!u)){if(kb(e[d],0,lKe)){r[d]=r[d+1]=0;continue}a=r[d]/e[d],i=r[d+1]/e[d],l=Math.pow(a,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),r[d]=a*o*e[d],r[d+1]=i*o*e[d])}}function dKe(t,e,r="x"){const n=Gee(r),a=t.length;let i,o,l,c=rx(t,0);for(let u=0;u<a;++u){if(o=l,l=c,c=rx(t,u+1),!l)continue;const d=l[r],f=l[n];o&&(i=(d-o[r])/3,l[`cp1${r}`]=d-i,l[`cp1${n}`]=f-i*e[u]),c&&(i=(c[r]-d)/3,l[`cp2${r}`]=d+i,l[`cp2${n}`]=f+i*e[u])}}function fKe(t,e="x"){const r=Gee(e),n=t.length,a=Array(n).fill(0),i=Array(n);let o,l,c,u=rx(t,0);for(o=0;o<n;++o)if(l=c,c=u,u=rx(t,o+1),!!c){if(u){const d=u[e]-c[e];a[o]=d!==0?(u[r]-c[r])/d:0}i[o]=l?u?Pu(a[o-1])!==Pu(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}uKe(t,a,i),dKe(t,i,e)}function wj(t,e,r){return Math.max(Math.min(t,r),e)}function hKe(t,e){let r,n,a,i,o,l=Xy(t[0],e);for(r=0,n=t.length;r<n;++r)o=i,i=l,l=r<n-1&&Xy(t[r+1],e),i&&(a=t[r],o&&(a.cp1x=wj(a.cp1x,e.left,e.right),a.cp1y=wj(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=wj(a.cp2x,e.left,e.right),a.cp2y=wj(a.cp2y,e.top,e.bottom)))}function AKe(t,e,r,n,a){let i,o,l,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")fKe(t,a);else{let u=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=cKe(u,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&hKe(t,r)}function V3(){return typeof window<"u"&&typeof document<"u"}function W3(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oN(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const GE=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mKe(t,e){return GE(t).getPropertyValue(e)}const pKe=["top","right","bottom","left"];function ym(t,e,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=pKe[a];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const gKe=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function xKe(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:a,offsetY:i}=n;let o=!1,l,c;if(gKe(a,i,t.target))l=a,c=i;else{const u=e.getBoundingClientRect();l=n.clientX-u.left,c=n.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function HA(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,a=GE(r),i=a.boxSizing==="border-box",o=ym(a,"padding"),l=ym(a,"border","width"),{x:c,y:u,box:d}=xKe(t,r),f=o.left+(d&&l.left),A=o.top+(d&&l.top);let{width:h,height:m}=e;return i&&(h-=o.width+l.width,m-=o.height+l.height),{x:Math.round((c-f)/h*r.width/n),y:Math.round((u-A)/m*r.height/n)}}function vKe(t,e,r){let n,a;if(e===void 0||r===void 0){const i=t&&W3(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const o=i.getBoundingClientRect(),l=GE(i),c=ym(l,"border","width"),u=ym(l,"padding");e=o.width-u.width-c.width,r=o.height-u.height-c.height,n=oN(l.maxWidth,i,"clientWidth"),a=oN(l.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||aN,maxHeight:a||aN}}const jj=t=>Math.round(t*10)/10;function bKe(t,e,r,n){const a=GE(t),i=ym(a,"margin"),o=oN(a.maxWidth,t,"clientWidth")||aN,l=oN(a.maxHeight,t,"clientHeight")||aN,c=vKe(t,e,r);let{width:u,height:d}=c;if(a.boxSizing==="content-box"){const A=ym(a,"border","width"),h=ym(a,"padding");u-=h.width+A.width,d-=h.height+A.height}return u=Math.max(0,u-i.width),d=Math.max(0,n?u/n:d-i.height),u=jj(Math.min(u,o,c.maxWidth)),d=jj(Math.min(d,l,c.maxHeight)),u&&!d&&(d=jj(u/2)),(e!==void 0||r!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,u=jj(Math.floor(d*n))),{width:u,height:d}}function lH(t,e,r){const n=e||1,a=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==a||o.width!==i?(t.currentDevicePixelRatio=n,o.height=a,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const yKe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};V3()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function cH(t,e){const r=mKe(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function QA(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function wKe(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function jKe(t,e,r,n){const a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=QA(t,a,r),l=QA(a,i,r),c=QA(i,e,r),u=QA(o,l,r),d=QA(l,c,r);return QA(u,d,r)}const CKe=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},NKe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function o0(t,e,r){return t?CKe(e,r):NKe()}function qee(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Kee(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Yee(t){return t==="angle"?{between:Yy,compare:Cqe,normalize:ou}:{between:Pd,compare:(e,r)=>e-r,normalize:e=>e}}function uH({start:t,end:e,count:r,loop:n,style:a}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:a}}function SKe(t,e,r){const{property:n,start:a,end:i}=r,{between:o,normalize:l}=Yee(n),c=e.length;let{start:u,end:d,loop:f}=t,A,h;if(f){for(u+=c,d+=c,A=0,h=c;A<h&&o(l(e[u%c][n]),a,i);++A)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:t.style}}function Xee(t,e,r){if(!r)return[t];const{property:n,start:a,end:i}=r,o=e.length,{compare:l,between:c,normalize:u}=Yee(n),{start:d,end:f,loop:A,style:h}=SKe(t,e,r),m=[];let p=!1,g=null,x,v,b;const C=()=>c(a,b,x)&&l(a,b)!==0,j=()=>l(i,x)===0||c(i,b,x),w=()=>p||C(),N=()=>!p||j();for(let E=d,_=d;E<=f;++E)v=e[E%o],!v.skip&&(x=u(v[n]),x!==b&&(p=c(x,a,i),g===null&&w()&&(g=l(x,a)===0?E:_),g!==null&&N()&&(m.push(uH({start:g,end:E,loop:A,count:o,style:h})),g=null),_=E,b=x));return g!==null&&m.push(uH({start:g,end:f,loop:A,count:o,style:h})),m}function Jee(t,e){const r=[],n=t.segments;for(let a=0;a<n.length;a++){const i=Xee(n[a],t.points,e);i.length&&r.push(...i)}return r}function EKe(t,e,r,n){let a=0,i=e-1;if(r&&!n)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,r&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function BKe(t,e,r,n){const a=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=r;++c){const u=t[c%a];u.skip||u.stop?l.skip||(n=!1,i.push({start:e%a,end:(c-1)%a,loop:n}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&i.push({start:e%a,end:o%a,loop:n}),i}function TKe(t,e){const r=t.points,n=t.options.spanGaps,a=r.length;if(!a)return[];const i=!!t._loop,{start:o,end:l}=EKe(r,a,i,n);if(n===!0)return dH(t,[{start:o,end:l,loop:i}],r,e);const c=l<o?l+a:l,u=!!t._fullLoop&&o===0&&l===a-1;return dH(t,BKe(r,o,c,u),r,e)}function dH(t,e,r,n){return!n||!n.setContext||!r?e:DKe(t,e,r,n)}function DKe(t,e,r,n){const a=t._chart.getContext(),i=fH(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=r.length,u=[];let d=i,f=e[0].start,A=f;function h(m,p,g,x){const v=l?-1:1;if(m!==p){for(m+=c;r[m%c].skip;)m-=v;for(;r[p%c].skip;)p+=v;m%c!==p%c&&(u.push({start:m%c,end:p%c,loop:g,style:x}),d=x,f=p%c)}}for(const m of e){f=l?f:m.start;let p=r[f%c],g;for(A=f+1;A<=m.end;A++){const x=r[A%c];g=fH(n.setContext(fp(a,{type:"segment",p0:p,p1:x,p0DataIndex:(A-1)%c,p1DataIndex:A%c,datasetIndex:o}))),IKe(g,d)&&h(f,A-1,m.loop,d),p=x,d=g}f<A-1&&h(f,A-1,m.loop,d)}return u}function fH(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function IKe(t,e){if(!e)return!1;const r=[],n=function(a,i){return L3(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Cj(t,e,r){return t.options.clip?t[r]:e[r]}function _Ke(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Cj(r,e,"left"),right:Cj(r,e,"right"),top:Cj(n,e,"top"),bottom:Cj(n,e,"bottom")}:e}function Zee(t,e){const r=e._clip;if(r.disabled)return!1;const n=_Ke(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class PKe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,a){const i=r.listeners[a],o=r.duration;i.forEach(l=>l({chart:e,initial:r.initial,numSteps:o,currentStep:Math.min(n-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Mee.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(a.draw(),this._notify(a,n,e,"progress")),i.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var md=new PKe;const hH="transparent",kKe={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=rH(t||hH),a=n.valid&&rH(e||hH);return a&&a.valid?a.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class OKe{constructor(e,r,n,a){const i=r[n];a=yj([e.to,a,i,e.from]);const o=yj([e.from,i,a]);this._active=!0,this._fn=e.fn||kKe[e.type||typeof o],this._easing=Ob[e.easing]||Ob.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=yj([e.to,r,a,e.from]),this._from=yj([e.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,a=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||r<n),!this._active){this._target[a]=l,this._notify(!0);return}if(r<0){this._target[a]=i;return}c=r/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class ete{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Yr(e))return;const r=Object.keys(Js.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!Yr(i))return;const o={};for(const l of r)o[l]=i[l];(ca(i.properties)&&i.properties||[a]).forEach(l=>{(l===a||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,r){const n=r.options,a=RKe(e,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&FKe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(r),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,r));continue}const d=r[u];let f=i[u];const A=n.get(u);if(f)if(A&&f.active()){f.update(A,d,l);continue}else f.cancel();if(!A||!A.duration){e[u]=d;continue}i[u]=f=new OKe(A,e,u,d),a.push(f)}return a}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return md.add(this._chart,n),!0}}function FKe(t,e){const r=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const i=t[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function RKe(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function AH(t,e){const r=t&&t.options||{},n=r.reverse,a=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:a,end:n?a:i}}function MKe(t,e,r){if(r===!1)return!1;const n=AH(t,r),a=AH(e,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function LKe(t){let e,r,n,a;return Yr(t)?(e=t.top,r=t.right,n=t.bottom,a=t.left):e=r=n=a=t,{top:e,right:r,bottom:n,left:a,disabled:t===!1}}function tte(t,e){const r=[],n=t._getSortedDatasetMetas(e);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function mH(t,e,r,n={}){const a=t.keys,i=n.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===r){if(d=!0,n.all)continue;break}u=t.values[c],Ni(u)&&(i||e===0||Pu(e)===Pu(u))&&(e+=u)}return!d&&!n.all?0:e}function UKe(t,e){const{iScale:r,vScale:n}=e,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[a]:d,[i]:t[d]};return l}function OT(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function $Ke(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function HKe(t){const{min:e,max:r,minDefined:n,maxDefined:a}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function QKe(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function pH(t,e,r,n){for(const a of e.getMatchingVisibleMetas(n).reverse()){const i=t[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function gH(t,e){const{chart:r,_cachedMeta:n}=t,a=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,u=o.axis,d=$Ke(i,o,n),f=e.length;let A;for(let h=0;h<f;++h){const m=e[h],{[c]:p,[u]:g}=m,x=m._stacks||(m._stacks={});A=x[u]=QKe(a,d,p),A[l]=g,A._top=pH(A,o,!0,n.type),A._bottom=pH(A,o,!1,n.type);const v=A._visualValues||(A._visualValues={});v[l]=g}}function FT(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function zKe(t,e){return fp(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function VKe(t,e,r){return fp(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Jv(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const a of e){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const RT=t=>t==="reset"||t==="none",xH=(t,e)=>e?t:Object.assign({},t),WKe=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:tte(r,!0),values:null};class wm{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=OT(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(f,A,h,m)=>f==="x"?A:f==="r"?m:h,i=r.xAxisID=Qr(n.xAxisID,FT(e,"x")),o=r.yAxisID=Qr(n.yAxisID,FT(e,"y")),l=r.rAxisID=Qr(n.rAxisID,FT(e,"r")),c=r.indexAxis,u=r.iAxisID=a(c,i,o,l),d=r.vAxisID=a(c,o,i,l);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Z7(this._data,this),e._stacked&&Jv(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Yr(r)){const a=this._cachedMeta;this._data=UKe(r,a)}else if(n!==r){if(n){Z7(n,this);const a=this._cachedMeta;Jv(a),a._parsed=[]}r&&Object.isExtensible(r)&&Bqe(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=OT(r.vScale,r),r.stack!==n.stack&&(a=!0,Jv(r),r.stack=n.stack),this._resyncElements(e),(a||i!==r._stacked)&&(gH(this,r._parsed),r._stacked=OT(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&r===a.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,f,A;if(this._parsing===!1)n._parsed=a,n._sorted=!0,A=a;else{ca(a[e])?A=this.parseArrayData(n,a,e,r):Yr(a[e])?A=this.parseObjectData(n,a,e,r):A=this.parsePrimitiveData(n,a,e,r);const h=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<r;++d)n._parsed[d+e]=f=A[d],c&&(h()&&(c=!1),u=f);n._sorted=c}o&&gH(this,A)}parsePrimitiveData(e,r,n,a){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,f=new Array(a);let A,h,m;for(A=0,h=a;A<h;++A)m=A+n,f[A]={[l]:d||i.parse(u[m],m),[c]:o.parse(r[m],m)};return f}parseArrayData(e,r,n,a){const{xScale:i,yScale:o}=e,l=new Array(a);let c,u,d,f;for(c=0,u=a;c<u;++c)d=c+n,f=r[d],l[c]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return l}parseObjectData(e,r,n,a){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(a);let d,f,A,h;for(d=0,f=a;d<f;++d)A=d+n,h=r[A],u[d]={x:i.parse(zm(h,l),A),y:o.parse(zm(h,c),A)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const a=this.chart,i=this._cachedMeta,o=r[e.axis],l={keys:tte(a,!0),values:r._stacks[e.axis]._visualValues};return mH(l,o,i.index,{mode:n})}updateRangeFromParsed(e,r,n,a){const i=n[r.axis];let o=i===null?NaN:i;const l=a&&n._stacks[r.axis];a&&l&&(a.values=l,o=mH(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&e===n.iScale,o=a.length,l=this._getOtherScale(e),c=WKe(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=HKe(l);let A,h;function m(){h=a[A];const p=h[l.axis];return!Ni(h[e.axis])||d>p||f<p}for(A=0;A<o&&!(!m()&&(this.updateRangeFromParsed(u,e,h,c),i));++A);if(i){for(A=o-1;A>=0;--A)if(!m()){this.updateRangeFromParsed(u,e,h,c);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let a,i,o;for(a=0,i=r.length;a<i;++a)o=r[a][e.axis],Ni(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=LKe(Qr(this.options.clip,MKe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,i,l,c),d=l;d<l+c;++d){const f=a[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=VKe(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=zKe(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const a=r==="active",i=this._cachedDataOpts,o=e+"-"+r,l=i[o],c=this.enableOptionSharing&&qy(n);if(l)return xH(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],A=u.getOptionScopes(this.getDataset(),d),h=Object.keys(Js.elements[e]),m=()=>this.getContext(n,a,r),p=u.resolveNamedOptions(A,h,m,f);return p.$shared&&(p.$shared=c,i[o]=Object.freeze(xH(p,c))),p}_resolveAnimations(e,r,n){const a=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,l=i[o];if(l)return l;let c;if(a.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,r),A=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(A,this.getContext(e,n,r))}const u=new ete(a,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||RT(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),a=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:o}}updateElement(e,r,n,a){RT(a)?Object.assign(e,n):this._resolveAnimations(r,a).update(e,n)}updateSharedOptions(e,r,n){e&&!RT(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,a){e.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const a=n.length,i=r.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,r,n=!0){const a=this._cachedMeta,i=a.data,o=e+r;let l;const c=u=>{for(u.length+=r,l=u.length-1;l>=o;l--)u[l]=u[l-r]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,a){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(e,r);n._stacked&&Jv(n,a)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,a]=e;this[r](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}tr(wm,"defaults",{}),tr(wm,"datasetElementType",null),tr(wm,"dataElementType",null);function GKe(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let a=0,i=r.length;a<i;a++)n=n.concat(r[a].controller.getAllParsedValues(t));t._cache.$bar=Ree(n.sort((a,i)=>a-i))}return t._cache.$bar}function qKe(t){const e=t.iScale,r=GKe(e,t.type);let n=e._length,a,i,o,l;const c=()=>{o===32767||o===-32768||(qy(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(a=0,i=r.length;a<i;++a)o=e.getPixelForValue(r[a]),c();for(l=void 0,a=0,i=e.ticks.length;a<i;++a)o=e.getPixelForTick(a),c();return n}function KKe(t,e,r,n){const a=r.barThickness;let i,o;return yn(a)?(i=e.min*r.categoryPercentage,o=r.barPercentage):(i=a*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function YKe(t,e,r,n){const a=e.pixels,i=a[t];let o=t>0?a[t-1]:null,l=t<a.length-1?a[t+1]:null;const c=r.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:r.barPercentage,start:u}}function XKe(t,e,r,n){const a=r.parse(t[0],n),i=r.parse(t[1],n),o=Math.min(a,i),l=Math.max(a,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),e[r.axis]=u,e._custom={barStart:c,barEnd:u,start:a,end:i,min:o,max:l}}function rte(t,e,r,n){return ca(t)?XKe(t,e,r,n):e[r.axis]=r.parse(t,n),e}function vH(t,e,r,n){const a=t.iScale,i=t.vScale,o=a.getLabels(),l=a===i,c=[];let u,d,f,A;for(u=r,d=r+n;u<d;++u)A=e[u],f={},f[a.axis]=l||a.parse(o[u],u),c.push(rte(A,f,i,u));return c}function MT(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function JKe(t,e,r){return t!==0?Pu(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function ZKe(t){let e,r,n,a,i;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:e,top:a,bottom:i}}function eYe(t,e,r,n){let a=e.borderSkipped;const i={};if(!a){t.borderSkipped=i;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=ZKe(t);a==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?a=u:(r._bottom||0)===n?a=d:(i[bH(d,o,l,c)]=!0,a=u)),i[bH(a,o,l,c)]=!0,t.borderSkipped=i}function bH(t,e,r,n){return n?(t=tYe(t,e,r),t=yH(t,r,e)):t=yH(t,e,r),t}function tYe(t,e,r){return t===e?r:t===r?e:t}function yH(t,e,r){return t==="start"?e:t==="end"?r:t}function rYe(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class a2 extends wm{parsePrimitiveData(e,r,n,a){return vH(e,r,n,a)}parseArrayData(e,r,n,a){return vH(e,r,n,a)}parseObjectData(e,r,n,a){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,f=[];let A,h,m,p;for(A=n,h=n+a;A<h;++A)p=r[A],m={},m[i.axis]=i.parse(zm(p,u),A),f.push(rte(zm(p,d),m,o,A));return f}updateRangeFromParsed(e,r,n,a){super.updateRangeFromParsed(e,r,n,a);const i=n._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:a}=r,i=this.getParsed(e),o=i._custom,l=MT(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,a){const i=a==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:A}=this._getSharedOptions(r,a);for(let h=r;h<r+n;h++){const m=this.getParsed(h),p=i||yn(m[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,d),x=(m._stacks||{})[l.axis],v={horizontal:u,base:p.base,enableBorderRadius:!x||MT(m._custom)||o===x._top||o===x._bottom,x:u?p.head:g.center,y:u?g.center:p.head,height:u?g.size:Math.abs(p.size),width:u?Math.abs(p.size):g.size};A&&(v.options=f||this.resolveDataElementOptions(h,e[h].active?"active":a));const b=v.options||e[h].options;eYe(v,b,x,o),rYe(v,b,d.ratio),this.updateElement(e[h],h,v,a)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[n.axis],u=d=>{const f=d._parsed.find(h=>h[n.axis]===c),A=f&&f[d.vScale.axis];if(yn(A)||isNaN(A))return!0};for(const d of a)if(!(r!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,n){const a=this._getStacks(e,n),i=r!==void 0?a.indexOf(r):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,a=[];let i,o;for(i=0,o=r.data.length;i<o;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||qKe(r),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:a},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),u=c._custom,d=MT(u);let f=c[r.axis],A=0,h=n?this.applyStack(r,c,n):f,m,p;h!==f&&(A=h-f,h=f),d&&(f=u.barStart,h=u.barEnd-u.barStart,f!==0&&Pu(f)!==Pu(u.barEnd)&&(A=0),A+=f);const g=!yn(i)&&!d?i:A;let x=r.getPixelForValue(g);if(this.chart.getDataVisibility(e)?m=r.getPixelForValue(A+h):m=x,p=m-x,Math.abs(p)<o){p=JKe(p,r,l)*o,f===l&&(x-=p/2);const v=r.getPixelForDecimal(0),b=r.getPixelForDecimal(1),C=Math.min(v,b),j=Math.max(v,b);x=Math.max(Math.min(x,j),C),m=x+p,n&&!d&&(c._stacks[r.axis]._visualValues[a]=r.getValueForPixel(m)-r.getValueForPixel(x))}if(x===r.getPixelForValue(l)){const v=Pu(p)*r.getLineWidthForValue(l)/2;x+=v,p-=v}return{size:p,base:x,head:m,center:m+p/2}}_calculateBarIndexPixels(e,r){const n=r.scale,a=this.options,i=a.skipNull,o=Qr(a.maxBarThickness,1/0);let l,c;if(r.grouped){const u=i?this._getStackCount(e):r.stackCount,d=a.barThickness==="flex"?YKe(e,r,a,u):KKe(e,r,a,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);l=d.start+d.chunk*f+d.chunk/2,c=Math.min(o,d.chunk*d.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}tr(a2,"id","bar"),tr(a2,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),tr(a2,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function nYe(t,e,r){let n=1,a=1,i=0,o=0;if(e<Ts){const l=t,c=l+e,u=Math.cos(l),d=Math.sin(l),f=Math.cos(c),A=Math.sin(c),h=(b,C,j)=>Yy(b,l,c,!0)?1:Math.max(C,C*r,j,j*r),m=(b,C,j)=>Yy(b,l,c,!0)?-1:Math.min(C,C*r,j,j*r),p=h(0,u,f),g=h(ya,d,A),x=m(Hs,u,f),v=m(Hs+ya,d,A);n=(p-x)/2,a=(g-v)/2,i=-(p+x)/2,o=-(g+v)/2}return{ratioX:n,ratioY:a,offsetX:i,offsetY:o}}class Wg extends wm{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=n;else{let i=c=>+n[c];if(Yr(n[e])){const{key:c="value"}=this._parsing;i=u=>+zm(n[u],c)}let o,l;for(o=e,l=e+r;o<l;++o)a._parsed[o]=i(o)}}_getRotation(){return _d(this.options.rotation-90)}_getCircumference(){return _d(this.options.circumference)}_getRotationExtents(){let e=Ts,r=-Ts;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const a=this.chart.getDatasetMeta(n).controller,i=a._getRotation(),o=a._getCircumference();e=Math.min(e,i),r=Math.max(r,i+o)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-o)/2,0),c=Math.min(dqe(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:A,ratioY:h,offsetX:m,offsetY:p}=nYe(f,d,c),g=(n.width-o)/A,x=(n.height-o)/h,v=Math.max(Math.min(g,x)/2,0),b=_ee(this.options.radius,v),C=Math.max(b*c,0),j=(b-C)/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=p*b,a.total=this.calculateTotal(),this.outerRadius=b-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const n=this.options,a=this._cachedMeta,i=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*i/Ts)}updateElements(e,r,n,a){const i=a==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,d=(l.left+l.right)/2,f=(l.top+l.bottom)/2,A=i&&u.animateScale,h=A?0:this.innerRadius,m=A?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(r,a);let x=this._getRotation(),v;for(v=0;v<r;++v)x+=this._circumference(v,i);for(v=r;v<r+n;++v){const b=this._circumference(v,i),C=e[v],j={x:d+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+b,circumference:b,outerRadius:m,innerRadius:h};g&&(j.options=p||this.resolveDataElementOptions(v,C.active?"active":a)),x+=b,this.updateElement(C,v,j,a)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,a;for(a=0;a<r.length;a++){const i=e._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!r[a].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Ts*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,a=n.data.labels||[],i=U3(r._parsed[e],n.options.locale);return{label:a[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const n=this.chart;let a,i,o,l,c;if(!e){for(a=0,i=n.data.datasets.length;a<i;++a)if(n.isDatasetVisible(a)){o=n.getDatasetMeta(a),e=o.data,l=o.controller;break}}if(!e)return 0;for(a=0,i=e.length;a<i;++a)c=l.resolveDataElementOptions(a),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,a=e.length;n<a;++n){const i=this.resolveDataElementOptions(n);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(Qr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tr(Wg,"id","doughnut"),tr(Wg,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),tr(Wg,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),tr(Wg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:a}}=e.legend.options;return r.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:a,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class i2 extends wm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:l,count:c}=Iqe(r,a,o);this._drawStart=l,this._drawCount=c,_qe(r)&&(l=0,c=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},e),this.updateElements(a,l,c,e)}updateElements(e,r,n,a){const i=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,a),A=o.axis,h=l.axis,{spanGaps:m,segment:p}=this.options,g=Ky(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||i||a==="none",v=r+n,b=e.length;let C=r>0&&this.getParsed(r-1);for(let j=0;j<b;++j){const w=e[j],N=x?w:{};if(j<r||j>=v){N.skip=!0;continue}const E=this.getParsed(j),_=yn(E[h]),k=N[A]=o.getPixelForValue(E[A],j),D=N[h]=i||_?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[h],j);N.skip=isNaN(k)||isNaN(D)||_,N.stop=j>0&&Math.abs(E[A]-C[A])>g,p&&(N.parsed=E,N.raw=u.data[j]),f&&(N.options=d||this.resolveDataElementOptions(j,w.active?"active":a)),x||this.updateElement(w,j,N,a),C=E}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,a=e.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}tr(i2,"id","line"),tr(i2,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),tr(i2,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class A_ extends Wg{}tr(A_,"id","pie"),tr(A_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function IA(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class G3{constructor(e){tr(this,"options");this.options=e||{}}static override(e){Object.assign(G3.prototype,e)}init(){}formats(){return IA()}parse(){return IA()}format(){return IA()}add(){return IA()}diff(){return IA()}startOf(){return IA()}endOf(){return IA()}}var sYe={_date:G3};function aYe(t,e,r,n){const{controller:a,data:i,_sorted:o}=t,l=a._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?Sqe:om;if(n){if(a._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const A=u(i,e,r-f),h=u(i,e,r+f);return{lo:A.lo,hi:h.hi}}}}else{const d=u(i,e,r);if(c){const{vScale:f}=a._cachedMeta,{_parsed:A}=t,h=A.slice(0,d.lo+1).reverse().findIndex(p=>!yn(p[f.axis]));d.lo-=Math.max(0,h);const m=A.slice(d.hi).findIndex(p=>!yn(p[f.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:i.length-1}}function qE(t,e,r,n,a){const i=t.getSortedVisibleDatasetMetas(),o=r[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:f,hi:A}=aYe(i[l],e,o,a);for(let h=f;h<=A;++h){const m=d[h];m.skip||n(m,u,h)}}}function iYe(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,a){const i=e?Math.abs(n.x-a.x):0,o=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function LT(t,e,r,n,a){const i=[];return!a&&!t.isPointInArea(e)||qE(t,r,e,function(l,c,u){!a&&!Xy(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function oYe(t,e,r,n){let a=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:f}=Oee(o,{x:e.x,y:e.y});Yy(f,u,d)&&a.push({element:o,datasetIndex:l,index:c})}return qE(t,r,e,i),a}function lYe(t,e,r,n,a,i){let o=[];const l=iYe(r);let c=Number.POSITIVE_INFINITY;function u(d,f,A){const h=d.inRange(e.x,e.y,a);if(n&&!h)return;const m=d.getCenterPoint(a);if(!(!!i||t.isPointInArea(m))&&!h)return;const g=l(e,m);g<c?(o=[{element:d,datasetIndex:f,index:A}],c=g):g===c&&o.push({element:d,datasetIndex:f,index:A})}return qE(t,r,e,u),o}function UT(t,e,r,n,a,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?oYe(t,e,r,a):lYe(t,e,r,n,a,i)}function wH(t,e,r,n,a){const i=[],o=r==="x"?"inXRange":"inYRange";let l=!1;return qE(t,r,e,(c,u,d)=>{c[o]&&c[o](e[r],a)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,a))}),n&&!l?[]:i}var cYe={modes:{index(t,e,r,n){const a=HA(e,t),i=r.axis||"x",o=r.includeInvisible||!1,l=r.intersect?LT(t,a,i,n,o):UT(t,a,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,r,n){const a=HA(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;let l=r.intersect?LT(t,a,i,n,o):UT(t,a,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,u=t.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(t,e,r,n){const a=HA(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return LT(t,a,i,n,o)},nearest(t,e,r,n){const a=HA(e,t),i=r.axis||"xy",o=r.includeInvisible||!1;return UT(t,a,i,r.intersect,n,o)},x(t,e,r,n){const a=HA(e,t);return wH(t,a,"x",r.intersect,n)},y(t,e,r,n){const a=HA(e,t);return wH(t,a,"y",r.intersect,n)}}};const nte=["left","top","right","bottom"];function Zv(t,e){return t.filter(r=>r.pos===e)}function jH(t,e){return t.filter(r=>nte.indexOf(r.pos)===-1&&r.box.axis===e)}function eb(t,e){return t.sort((r,n)=>{const a=e?n:r,i=e?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function uYe(t){const e=[];let r,n,a,i,o,l;for(r=0,n=(t||[]).length;r<n;++r)a=t[r],{position:i,options:{stack:o,stackWeight:l=1}}=a,e.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:l});return e}function dYe(t){const e={};for(const r of t){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!nte.includes(a))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function fYe(t,e){const r=dYe(t),{vBoxMaxWidth:n,hBoxMaxHeight:a}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,u=r[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*n:c&&e.availableWidth,l.height=a):(l.width=n,l.height=d?d*a:c&&e.availableHeight)}return r}function hYe(t){const e=uYe(t),r=eb(e.filter(u=>u.box.fullSize),!0),n=eb(Zv(e,"left"),!0),a=eb(Zv(e,"right")),i=eb(Zv(e,"top"),!0),o=eb(Zv(e,"bottom")),l=jH(e,"x"),c=jH(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:Zv(e,"chartArea"),vertical:n.concat(a).concat(c),horizontal:i.concat(o).concat(l)}}function CH(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function ste(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function AYe(t,e,r,n){const{pos:a,box:i}=r,o=t.maxPadding;if(!Yr(a)){r.size&&(t[a]-=r.size);const f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,t[a]+=r.size}i.getPadding&&ste(o,i.getPadding());const l=Math.max(0,e.outerWidth-CH(o,t,"left","right")),c=Math.max(0,e.outerHeight-CH(o,t,"top","bottom")),u=l!==t.w,d=c!==t.h;return t.w=l,t.h=c,r.horizontal?{same:u,other:d}:{same:d,other:u}}function mYe(t){const e=t.maxPadding;function r(n){const a=Math.max(e[n]-t[n],0);return t[n]+=a,a}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function pYe(t,e){const r=e.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(e[o],r[o])}),i}return n(t?["left","right"]:["top","bottom"])}function hb(t,e,r,n){const a=[];let i,o,l,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,pYe(l.horizontal,e));const{same:f,other:A}=AYe(e,r,l,n);u|=f&&a.length,d=d||A,c.fullSize||a.push(l)}return u&&hb(a,e,r,n)||d}function Nj(t,e,r,n,a){t.top=r,t.left=e,t.right=e+n,t.bottom=r+a,t.width=n,t.height=a}function NH(t,e,r,n){const a=r.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,u=n[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*d,A=u.size||c.height;qy(u.start)&&(o=u.start),c.fullSize?Nj(c,a.left,o,r.outerWidth-a.right-a.left,A):Nj(c,e.left+u.placed,o,f,A),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*d,A=u.size||c.width;qy(u.start)&&(i=u.start),c.fullSize?Nj(c,i,a.top,A,r.outerHeight-a.bottom-a.top):Nj(c,i,e.top+u.placed,A,f),u.start=i,u.placed+=f,i=c.right}}e.x=i,e.y=o}var Bl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const a=Ml(t.options.layout.padding),i=Math.max(e-a.width,0),o=Math.max(r-a.height,0),l=hYe(t.boxes),c=l.vertical,u=l.horizontal;Tn(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const d=c.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:r,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),A=Object.assign({},a);ste(A,Ml(n));const h=Object.assign({maxPadding:A,w:i,h:o,x:a.left,y:a.top},a),m=fYe(c.concat(u),f);hb(l.fullSize,h,f,m),hb(c,h,f,m),hb(u,h,f,m)&&hb(c,h,f,m),mYe(h),NH(l.leftAndTop,h,f,m),h.x+=h.w,h.y+=h.h,NH(l.rightAndBottom,h,f,m),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Tn(l.chartArea,p=>{const g=p.box;Object.assign(g,t.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class ate{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,a){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(e){return!0}updateConfig(e){}}class gYe extends ate{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const o2="$chartjs",xYe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},SH=t=>t===null||t==="";function vYe(t,e){const r=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[o2]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",SH(a)){const i=cH(t,"width");i!==void 0&&(t.width=i)}if(SH(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=cH(t,"height");i!==void 0&&(t.height=i)}return t}const ite=yKe?{passive:!0}:!1;function bYe(t,e,r){t&&t.addEventListener(e,r,ite)}function yYe(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,ite)}function wYe(t,e){const r=xYe[t.type]||t.type,{x:n,y:a}=HA(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:a!==void 0?a:null}}function lN(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function jYe(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||lN(l.addedNodes,n),o=o&&!lN(l.removedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function CYe(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||lN(l.removedNodes,n),o=o&&!lN(l.addedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Zy=new Map;let EH=0;function ote(){const t=window.devicePixelRatio;t!==EH&&(EH=t,Zy.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function NYe(t,e){Zy.size||window.addEventListener("resize",ote),Zy.set(t,e)}function SYe(t){Zy.delete(t),Zy.size||window.removeEventListener("resize",ote)}function EYe(t,e,r){const n=t.canvas,a=n&&W3(n);if(!a)return;const i=Lee((l,c)=>{const u=a.clientWidth;r(l,c),u<a.clientWidth&&r()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(a),NYe(t,i),o}function $T(t,e,r){r&&r.disconnect(),e==="resize"&&SYe(t)}function BYe(t,e,r){const n=t.canvas,a=Lee(i=>{t.ctx!==null&&r(wYe(i,t))},t);return bYe(n,e,a),a}class TYe extends ate{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(vYe(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[o2])return!1;const n=r[o2].initial;["height","width"].forEach(i=>{const o=n[i];yn(o)?r.removeAttribute(i):r.setAttribute(i,o)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[o2],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const a=e.$proxies||(e.$proxies={}),o={attach:jYe,detach:CYe,resize:EYe}[r]||BYe;a[r]=o(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),a=n[r];if(!a)return;({attach:$T,detach:$T,resize:$T}[r]||yYe)(e,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,a){return bKe(e,r,n,a)}isAttached(e){const r=e&&W3(e);return!!(r&&r.isConnected)}}function DYe(t){return!V3()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?gYe:TYe}var Hj;let hf=(Hj=class{constructor(){tr(this,"x");tr(this,"y");tr(this,"active",!1);tr(this,"options");tr(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Ky(this.x)&&Ky(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const a={};return e.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}},tr(Hj,"defaults",{}),tr(Hj,"defaultRoutes"),Hj);function IYe(t,e){const r=t.options.ticks,n=_Ye(t),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?kYe(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>a)return OYe(e,u,i,o/a),u;const d=PYe(i,e,a);if(o>0){let f,A;const h=o>1?Math.round((c-l)/(o-1)):null;for(Sj(e,u,d,yn(h)?0:l-h,l),f=0,A=o-1;f<A;f++)Sj(e,u,d,i[f],i[f+1]);return Sj(e,u,d,c,yn(h)?e.length:c+h),u}return Sj(e,u,d),u}function _Ye(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),a=t._maxLength/r;return Math.floor(Math.min(n,a))}function PYe(t,e,r){const n=FYe(t),a=e.length/r;if(!n)return Math.max(a,1);const i=vqe(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>a)return c}return Math.max(a,1)}function kYe(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function OYe(t,e,r,n){let a=0,i=r[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),a++,i=r[a*n])}function Sj(t,e,r,n,a){const i=Qr(n,0),o=Math.min(Qr(a,t.length),t.length);let l=0,c,u,d;for(r=Math.ceil(r),a&&(c=a-n,r=c/Math.floor(c/r)),d=i;d<0;)l++,d=Math.round(i+l*r);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),l++,d=Math.round(i+l*r))}function FYe(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const RYe=t=>t==="left"?"right":t==="right"?"left":t,BH=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,TH=(t,e)=>Math.min(e||t,t);function DH(t,e){const r=[],n=t.length/e,a=t.length;let i=0;for(;i<a;i+=n)r.push(t[Math.floor(i)]);return r}function MYe(t,e,r){const n=t.ticks.length,a=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(a),u;if(!(r&&(n===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(a-1))/2,c+=a<e?u:-u,c<i-l||c>o+l)))return c}function LYe(t,e){Tn(t,r=>{const n=r.gc,a=n.length/2;let i;if(a>e){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function tb(t){return t.drawTicks?t.tickLength:0}function IH(t,e){if(!t.display)return 0;const r=bi(t.font,e),n=Ml(t.padding);return(ca(t.text)?t.text.length:1)*r.lineHeight+n.height}function UYe(t,e){return fp(t,{scale:e,type:"scale"})}function $Ye(t,e,r){return fp(t,{tick:r,index:e,type:"tick"})}function HYe(t,e,r){let n=M3(t);return(r&&e!=="right"||!r&&e==="right")&&(n=RYe(n)),n}function QYe(t,e,r,n){const{top:a,left:i,bottom:o,right:l,chart:c}=t,{chartArea:u,scales:d}=c;let f=0,A,h,m;const p=o-a,g=l-i;if(t.isHorizontal()){if(h=ui(n,i,l),Yr(r)){const x=Object.keys(r)[0],v=r[x];m=d[x].getPixelForValue(v)+p-e}else r==="center"?m=(u.bottom+u.top)/2+p-e:m=BH(t,r,e);A=l-i}else{if(Yr(r)){const x=Object.keys(r)[0],v=r[x];h=d[x].getPixelForValue(v)-g+e}else r==="center"?h=(u.left+u.right)/2-g+e:h=BH(t,r,e);m=ui(n,o,a),f=r==="left"?-ya:ya}return{titleX:h,titleY:m,maxWidth:A,rotation:f}}class Wx extends hf{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return e=tu(e,Number.POSITIVE_INFINITY),r=tu(r,Number.NEGATIVE_INFINITY),n=tu(n,Number.POSITIVE_INFINITY),a=tu(a,Number.NEGATIVE_INFINITY),{min:tu(e,n),max:tu(r,a),minDefined:Ni(e),maxDefined:Ni(r)}}getMinMax(e){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:r,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),a||(r=Math.min(r,o.min)),i||(n=Math.max(n,o.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:tu(r,tu(n,r)),max:tu(n,tu(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ss(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:a,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jqe(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?DH(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=IYe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ss(this.options.afterUpdate,[this])}beforeSetDimensions(){ss(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ss(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ss(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ss(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n],i.label=ss(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){ss(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ss(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=TH(this.ticks.length,e.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let o=a,l,c,u;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const d=this._getLabelSizes(),f=d.widest.width,A=d.highest.height,h=vi(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/n:h/(n-1),f+6>l&&(l=h/(n-(e.offset?.5:1)),c=this.maxHeight-tb(e.grid)-r.padding-IH(e.title,this.chart.options.font),u=Math.sqrt(f*f+A*A),o=jqe(Math.min(Math.asin(vi((d.highest.height+6)/l,-1,1)),Math.asin(vi(c/u,-1,1))-Math.asin(vi(A/u,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ss(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ss(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=IH(a,r.options.font);if(l?(e.width=this.maxWidth,e.height=tb(i)+c):(e.height=this.maxHeight,e.width=tb(i)+c),n.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:A}=this._getLabelSizes(),h=n.padding*2,m=_d(this.labelRotation),p=Math.cos(m),g=Math.sin(m);if(l){const x=n.mirror?0:g*f.width+p*A.height;e.height=Math.min(this.maxHeight,e.height+x+h)}else{const x=n.mirror?0:p*f.width+g*A.height;e.width=Math.min(this.maxWidth,e.width+x+h)}this._calculatePadding(u,d,g,p)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,a){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,h=0;c?u?(A=a*e.width,h=n*r.height):(A=n*e.height,h=a*r.width):i==="start"?h=r.width:i==="end"?A=e.width:i!=="inner"&&(A=e.width/2,h=r.width/2),this.paddingLeft=Math.max((A-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((h-f+o)*this.width/(this.width-f),0)}else{let d=r.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=r.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ss(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)yn(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=DH(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:a,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(r/TH(r,n));let u=0,d=0,f,A,h,m,p,g,x,v,b,C,j;for(f=0;f<r;f+=c){if(m=e[f].label,p=this._resolveTickFontOptions(f),a.font=g=p.string,x=i[g]=i[g]||{data:{},gc:[]},v=p.lineHeight,b=C=0,!yn(m)&&!ca(m))b=sH(a,x.data,x.gc,b,m),C=v;else if(ca(m))for(A=0,h=m.length;A<h;++A)j=m[A],!yn(j)&&!ca(j)&&(b=sH(a,x.data,x.gc,b,j),C+=v);o.push(b),l.push(C),u=Math.max(b,u),d=Math.max(C,d)}LYe(i,r);const w=o.indexOf(u),N=l.indexOf(d),E=_=>({width:o[_]||0,height:l[_]||0});return{first:E(0),last:E(r-1),widest:E(w),highest:E(N),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return Nqe(this._alignToPixels?DA(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=$Ye(this.getContext(),e,n))}return this.$context||(this.$context=UYe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=_d(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*a?l/n:c/a:c*a<l*n?c/n:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:o,border:l}=a,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),A=tb(i),h=[],m=l.setContext(this.getContext()),p=m.display?m.width:0,g=p/2,x=function(U){return DA(n,U,p)};let v,b,C,j,w,N,E,_,k,D,S,F;if(o==="top")v=x(this.bottom),N=this.bottom-A,_=v-g,D=x(e.top)+g,F=e.bottom;else if(o==="bottom")v=x(this.top),D=e.top,F=x(e.bottom)-g,N=v+g,_=this.top+A;else if(o==="left")v=x(this.right),w=this.right-A,E=v-g,k=x(e.left)+g,S=e.right;else if(o==="right")v=x(this.left),k=e.left,S=x(e.right)-g,w=v+g,E=this.left+A;else if(r==="x"){if(o==="center")v=x((e.top+e.bottom)/2+.5);else if(Yr(o)){const U=Object.keys(o)[0],z=o[U];v=x(this.chart.scales[U].getPixelForValue(z))}D=e.top,F=e.bottom,N=v+g,_=N+A}else if(r==="y"){if(o==="center")v=x((e.left+e.right)/2);else if(Yr(o)){const U=Object.keys(o)[0],z=o[U];v=x(this.chart.scales[U].getPixelForValue(z))}w=v-g,E=w-A,k=e.left,S=e.right}const M=Qr(a.ticks.maxTicksLimit,f),R=Math.max(1,Math.ceil(f/M));for(b=0;b<f;b+=R){const U=this.getContext(b),z=i.setContext(U),Q=l.setContext(U),H=z.lineWidth,q=z.color,X=Q.dash||[],$=Q.dashOffset,K=z.tickWidth,se=z.tickColor,Z=z.tickBorderDash||[],ie=z.tickBorderDashOffset;C=MYe(this,b,c),C!==void 0&&(j=DA(n,C,H),u?w=E=k=S=j:N=_=D=F=j,h.push({tx1:w,ty1:N,tx2:E,ty2:_,x1:k,y1:D,x2:S,y2:F,width:H,color:q,borderDash:X,borderDashOffset:$,tickWidth:K,tickColor:se,tickBorderDash:Z,tickBorderDashOffset:ie}))}return this._ticksLength=f,this._borderValue=v,h}_computeLabelItems(e){const r=this.axis,n=this.options,{position:a,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=i,A=tb(n.grid),h=A+d,m=f?-d:h,p=-_d(this.labelRotation),g=[];let x,v,b,C,j,w,N,E,_,k,D,S,F="middle";if(a==="top")w=this.bottom-m,N=this._getXAxisLabelAlignment();else if(a==="bottom")w=this.top+m,N=this._getXAxisLabelAlignment();else if(a==="left"){const R=this._getYAxisLabelAlignment(A);N=R.textAlign,j=R.x}else if(a==="right"){const R=this._getYAxisLabelAlignment(A);N=R.textAlign,j=R.x}else if(r==="x"){if(a==="center")w=(e.top+e.bottom)/2+h;else if(Yr(a)){const R=Object.keys(a)[0],U=a[R];w=this.chart.scales[R].getPixelForValue(U)+h}N=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")j=(e.left+e.right)/2-h;else if(Yr(a)){const R=Object.keys(a)[0],U=a[R];j=this.chart.scales[R].getPixelForValue(U)}N=this._getYAxisLabelAlignment(A).textAlign}r==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const M=this._getLabelSizes();for(x=0,v=l.length;x<v;++x){b=l[x],C=b.label;const R=i.setContext(this.getContext(x));E=this.getPixelForTick(x)+i.labelOffset,_=this._resolveTickFontOptions(x),k=_.lineHeight,D=ca(C)?C.length:1;const U=D/2,z=R.color,Q=R.textStrokeColor,H=R.textStrokeWidth;let q=N;o?(j=E,N==="inner"&&(x===v-1?q=this.options.reverse?"left":"right":x===0?q=this.options.reverse?"right":"left":q="center"),a==="top"?u==="near"||p!==0?S=-D*k+k/2:u==="center"?S=-M.highest.height/2-U*k+k:S=-M.highest.height+k/2:u==="near"||p!==0?S=k/2:u==="center"?S=M.highest.height/2-U*k:S=M.highest.height-D*k,f&&(S*=-1),p!==0&&!R.showLabelBackdrop&&(j+=k/2*Math.sin(p))):(w=E,S=(1-D)*k/2);let X;if(R.showLabelBackdrop){const $=Ml(R.backdropPadding),K=M.heights[x],se=M.widths[x];let Z=S-$.top,ie=0-$.left;switch(F){case"middle":Z-=K/2;break;case"bottom":Z-=K;break}switch(N){case"center":ie-=se/2;break;case"right":ie-=se;break;case"inner":x===v-1?ie-=se:x>0&&(ie-=se/2);break}X={left:ie,top:Z,width:se+$.width,height:K+$.height,color:R.backdropColor}}g.push({label:C,font:_,textOffset:S,options:{rotation:p,color:z,strokeColor:Q,strokeWidth:H,textAlign:q,textBaseline:F,translation:[j,w],backdrop:X}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-_d(this.labelRotation))return e==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,d;return r==="left"?a?(d=this.right+i,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d=this.left)):r==="right"?a?(d=this.left+i,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:a,width:i,height:o}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,a,i,o),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(i=0,o=a.length;i<o;++i){const c=a[i];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,A;this.isHorizontal()?(u=DA(e,this.left,o)-o/2,d=DA(e,this.right,l)+l/2,f=A=c):(f=DA(e,this.top,o)-o/2,A=DA(e,this.bottom,l)+l/2,u=d=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(u,f),r.lineTo(d,A),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&VE(n,a);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Jy(n,u,0,d,c,l)}a&&WE(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=bi(n.font),o=Ml(n.padding),l=n.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||Yr(r)?(c+=o.bottom,ca(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:A}=QYe(this,c,r,l);Jy(e,n.text,0,0,i,{color:n.color,maxWidth:f,rotation:A,textAlign:HYe(l,r,a),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Qr(e.grid&&e.grid.z,-1),a=Qr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Wx.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,o;for(i=0,o=r.length;i<o;++i){const l=r[i];l[n]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return bi(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ej{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;WYe(r)&&(n=this.register(r));const a=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,zYe(e,o,n),this.override&&Js.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,a=this.scope;n in r&&delete r[n],a&&n in Js[a]&&(delete Js[a][n],this.override&&delete Vm[n])}}function zYe(t,e,r){const n=Gy(Object.create(null),[r?Js.get(r):{},Js.get(e),t.defaults]);Js.set(e,n),t.defaultRoutes&&VYe(e,t.defaultRoutes),t.descriptors&&Js.describe(e,t.descriptors)}function VYe(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),a=n.pop(),i=[t].concat(n).join("."),o=e[r].split("."),l=o.pop(),c=o.join(".");Js.route(i,a,c,l)})}function WYe(t){return"id"in t&&"defaults"in t}class GYe{constructor(){this.controllers=new Ej(wm,"datasets",!0),this.elements=new Ej(hf,"elements"),this.plugins=new Ej(Object,"plugins"),this.scales=new Ej(Wx,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):Tn(a,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,r,n){const a=F3(e);ss(n["before"+a],[],n),r[e](n),ss(n["after"+a],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const a=r.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return a}}var iu=new GYe;class qYe{constructor(){this._init=[]}notify(e,r,n,a){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,r,n,a){a=a||{};for(const i of e){const o=i.plugin,l=o[n],c=[r,a,i.options];if(ss(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){yn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,a=Qr(n.options&&n.options.plugins,{}),i=KYe(n);return a===!1&&!r?[]:XYe(e,i,a,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,a=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(r,n),e,"stop"),this._notify(a(n,r),e,"start")}}function KYe(t){const e={},r=[],n=Object.keys(iu.plugins.items);for(let i=0;i<n.length;i++)r.push(iu.getPlugin(n[i]));const a=t.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];r.indexOf(o)===-1&&(r.push(o),e[o.id]=!0)}return{plugins:r,localIds:e}}function YYe(t,e){return!e&&t===!1?null:t===!0?{}:t}function XYe(t,{plugins:e,localIds:r},n,a){const i=[],o=t.getContext();for(const l of e){const c=l.id,u=YYe(n[c],a);u!==null&&i.push({plugin:l,options:JYe(t.config,{plugin:l,local:r[c]},u,o)})}return i}function JYe(t,{plugin:e,local:r},n,a){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return r&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function m_(t,e){const r=Js.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function ZYe(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function eXe(t,e){return t===e?"_index_":"_value_"}function _H(t){if(t==="x"||t==="y"||t==="r")return t}function tXe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function p_(t,...e){if(_H(t))return t;for(const r of e){const n=r.axis||tXe(r.position)||t.length>1&&_H(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function PH(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function rXe(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return PH(t,"x",r[0])||PH(t,"y",r[0])}return{}}function nXe(t,e){const r=Vm[t.type]||{scales:{}},n=e.scales||{},a=m_(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!Yr(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=p_(o,l,rXe(o,t),Js.scales[l.type]),u=eXe(c,a),d=r.scales||{};i[o]=Pb(Object.create(null),[{axis:c},l,d[c],d[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||m_(l,e),d=(Vm[l]||{}).scales||{};Object.keys(d).forEach(f=>{const A=ZYe(f,c),h=o[A+"AxisID"]||A;i[h]=i[h]||Object.create(null),Pb(i[h],[{axis:A},n[h],d[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];Pb(l,[Js.scales[l.type],Js.scale])}),i}function lte(t){const e=t.options||(t.options={});e.plugins=Qr(e.plugins,{}),e.scales=nXe(t,e)}function cte(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function sXe(t){return t=t||{},t.data=cte(t.data),lte(t),t}const kH=new Map,ute=new Set;function Bj(t,e){let r=kH.get(t);return r||(r=e(),kH.set(t,r),ute.add(r)),r}const rb=(t,e,r)=>{const n=zm(e,r);n!==void 0&&t.add(n)};class aXe{constructor(e){this._config=sXe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cte(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lte(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Bj(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Bj(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Bj(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Bj(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let a=n.get(e);return(!a||r)&&(a=new Map,n.set(e,a)),a}getOptionScopes(e,r,n){const{options:a,type:i}=this,o=this._cachedScopes(e,n),l=o.get(r);if(l)return l;const c=new Set;r.forEach(d=>{e&&(c.add(e),d.forEach(f=>rb(c,e,f))),d.forEach(f=>rb(c,a,f)),d.forEach(f=>rb(c,Vm[i]||{},f)),d.forEach(f=>rb(c,Js,f)),d.forEach(f=>rb(c,f_,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ute.has(r)&&o.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Vm[r]||{},Js.datasets[r]||{},{type:r},Js,f_]}resolveNamedOptions(e,r,n,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=OH(this._resolverCache,e,a);let c=o;if(oXe(o,r)){i.$shared=!1,n=Lh(n)?n():n;const u=this.createResolver(e,n,l);c=tx(o,n,u)}for(const u of r)i[u]=c[u];return i}createResolver(e,r,n=[""],a){const{resolver:i}=OH(this._resolverCache,e,n);return Yr(r)?tx(i,r,void 0,a):i}}function OH(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const a=r.join();let i=n.get(a);return i||(i={resolver:H3(e,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},n.set(a,i)),i}const iXe=t=>Yr(t)&&Object.getOwnPropertyNames(t).some(e=>Lh(t[e]));function oXe(t,e){const{isScriptable:r,isIndexable:n}=Qee(t);for(const a of e){const i=r(a),o=n(a),l=(o||i)&&t[a];if(i&&(Lh(l)||iXe(l))||o&&ca(l))return!0}return!1}var lXe="4.4.9";const cXe=["top","bottom","left","right","chartArea"];function FH(t,e){return t==="top"||t==="bottom"||cXe.indexOf(t)===-1&&e==="x"}function RH(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function MH(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),ss(r&&r.onComplete,[t],e)}function uXe(t){const e=t.chart,r=e.options.animation;ss(r&&r.onProgress,[t],e)}function dte(t){return V3()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const l2={},LH=t=>{const e=dte(t);return Object.values(l2).filter(r=>r.canvas===e).pop()};function dXe(t,e,r){const n=Object.keys(t);for(const a of n){const i=+a;if(i>=e){const o=t[a];delete t[a],(r>0||i>e)&&(t[i+r]=o)}}}function fXe(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}var Yf;let hp=(Yf=class{static register(...e){iu.add(...e),UH()}static unregister(...e){iu.remove(...e),UH()}constructor(e,r){const n=this.config=new aXe(r),a=dte(e),i=LH(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||DYe(a)),this.platform.updateConfig(n);const l=this.platform.acquireContext(a,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=uqe(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qYe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Tqe(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],l2[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}md.listen(this,"complete",MH),md.listen(this,"progress",uXe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return yn(e)?r&&i?i:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return iu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lH(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aH(this.canvas,this.ctx),this}stop(){return md.stop(this),this}resize(e,r){md.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,r,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lH(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ss(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Tn(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,a=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const l=r[o],c=p_(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Tn(i,o=>{const l=o.options,c=l.id,u=p_(c,l),d=Qr(l.type,o.dtype);(l.position===void 0||FH(l.position,u)!==FH(o.dposition))&&(l.position=o.dposition),a[c]=!0;let f=null;if(c in n&&n[c].type===d)f=n[c];else{const A=iu.getScale(d);f=new A({id:c,type:d,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(l,e)}),Tn(a,(o,l)=>{o||delete n[l]}),Tn(n,o=>{Bl.configure(this,o,o.options),Bl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(RH("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||m_(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=iu.getController(l),{datasetElementType:u,dataElementType:d}=Js.datasets[l];Object.assign(c,{dataElementType:iu.getElement(d),datasetElementType:u&&iu.getElement(u)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Tn(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),A=!a&&i.indexOf(f)===-1;f.buildOrUpdateElements(A),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),a||Tn(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(RH("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Tn(this.scales,e=>{Bl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!K7(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const o=n==="_removeElements"?-i:i;dXe(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!K7(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bl.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Tn(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Lh(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),a={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(md.has(this)?this.attached&&!md.running(this)&&md.start(this):(this.draw(),MH({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const o=r[a];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=Zee(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&VE(r,a),e.controller.draw(),a&&WE(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Xy(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,a){const i=cYe.modes[r];return typeof i=="function"?i(this,e,n,a):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=fp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,a);qy(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?a:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),md.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aH(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete l2[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,o)=>{r.addEventListener(this,i,o),e[i]=o},a=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Tn(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(c,u)=>{r.addEventListener(this,c,u),e[c]=u},a=(c,u)=>{e[c]&&(r.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{a("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",l)},r.isAttached(this.canvas)?l():o()}unbindEvents(){Tn(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Tn(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const a=n?"set":"remove";let i,o,l,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!nN(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const a=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(r,e),l=n?e:i(e,r);o.length&&this.updateHoverStyle(o,a.mode,!1),l.length&&a.mode&&this.updateHoverStyle(l,a.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:a=[],options:i}=this,o=r,l=this._getActiveElements(e,a,n,o),c=pqe(e),u=fXe(e,this._lastEvent,n,c);n&&(this._lastEvent=null,ss(i.onHover,[e,l,this],this),c&&ss(i.onClick,[e,l,this],this));const d=!nN(l,a);return(d||r)&&(this._active=l,this._updateHoverStyles(l,a,r)),this._lastEvent=u,d}_getActiveElements(e,r,n,a){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}},tr(Yf,"defaults",Js),tr(Yf,"instances",l2),tr(Yf,"overrides",Vm),tr(Yf,"registry",iu),tr(Yf,"version",lXe),tr(Yf,"getChart",LH),Yf);function UH(){return Tn(hp.instances,t=>t._plugins.invalidate())}function hXe(t,e,r){const{startAngle:n,pixelMargin:a,x:i,y:o,outerRadius:l,innerRadius:c}=e;let u=a/l;t.beginPath(),t.arc(i,o,l,n-u,r+u),c>a?(u=a/c,t.arc(i,o,c,r+u,n-u,!0)):t.arc(i,o,a,r+ya,n-ya),t.closePath(),t.clip()}function AXe(t){return $3(t,["outerStart","outerEnd","innerStart","innerEnd"])}function mXe(t,e,r,n){const a=AXe(t.options.borderRadius),i=(r-e)/2,o=Math.min(i,n*e/2),l=c=>{const u=(r-Math.min(i,c))*n/2;return vi(c,0,Math.min(i,u))};return{outerStart:l(a.outerStart),outerEnd:l(a.outerEnd),innerStart:vi(a.innerStart,0,o),innerEnd:vi(a.innerEnd,0,o)}}function Tg(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function cN(t,e,r,n,a,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=e,f=Math.max(e.outerRadius+n+r-u,0),A=d>0?d+n+r+u:0;let h=0;const m=a-c;if(n){const R=d>0?d-n:0,U=f>0?f-n:0,z=(R+U)/2,Q=z!==0?m*z/(z+n):m;h=(m-Q)/2}const p=Math.max(.001,m*f-r/Hs)/f,g=(m-p)/2,x=c+g+h,v=a-g-h,{outerStart:b,outerEnd:C,innerStart:j,innerEnd:w}=mXe(e,A,f,v-x),N=f-b,E=f-C,_=x+b/N,k=v-C/E,D=A+j,S=A+w,F=x+j/D,M=v-w/S;if(t.beginPath(),i){const R=(_+k)/2;if(t.arc(o,l,f,_,R),t.arc(o,l,f,R,k),C>0){const H=Tg(E,k,o,l);t.arc(H.x,H.y,C,k,v+ya)}const U=Tg(S,v,o,l);if(t.lineTo(U.x,U.y),w>0){const H=Tg(S,M,o,l);t.arc(H.x,H.y,w,v+ya,M+Math.PI)}const z=(v-w/A+(x+j/A))/2;if(t.arc(o,l,A,v-w/A,z,!0),t.arc(o,l,A,z,x+j/A,!0),j>0){const H=Tg(D,F,o,l);t.arc(H.x,H.y,j,F+Math.PI,x-ya)}const Q=Tg(N,x,o,l);if(t.lineTo(Q.x,Q.y),b>0){const H=Tg(N,_,o,l);t.arc(H.x,H.y,b,x-ya,_)}}else{t.moveTo(o,l);const R=Math.cos(_)*f+o,U=Math.sin(_)*f+l;t.lineTo(R,U);const z=Math.cos(k)*f+o,Q=Math.sin(k)*f+l;t.lineTo(z,Q)}t.closePath()}function pXe(t,e,r,n,a){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){cN(t,e,r,n,c,a);for(let u=0;u<i;++u)t.fill();isNaN(l)||(c=o+(l%Ts||Ts))}return cN(t,e,r,n,c,a),t.fill(),c}function gXe(t,e,r,n,a){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:u,borderJoinStyle:d,borderDash:f,borderDashOffset:A}=c,h=c.borderAlign==="inner";if(!u)return;t.setLineDash(f||[]),t.lineDashOffset=A,h?(t.lineWidth=u*2,t.lineJoin=d||"round"):(t.lineWidth=u,t.lineJoin=d||"bevel");let m=e.endAngle;if(i){cN(t,e,r,n,m,a);for(let p=0;p<i;++p)t.stroke();isNaN(l)||(m=o+(l%Ts||Ts))}h&&hXe(t,e,m),i||(cN(t,e,r,n,m,a),t.stroke())}class xh extends hf{constructor(r){super();tr(this,"circumference");tr(this,"endAngle");tr(this,"fullCircles");tr(this,"innerRadius");tr(this,"outerRadius");tr(this,"pixelMargin");tr(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.getProps(["x","y"],a),{angle:o,distance:l}=Oee(i,{x:r,y:n}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:f,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),h=(this.options.spacing+this.options.borderWidth)/2,m=Qr(A,u-c),p=Yy(o,c,u)&&c!==u,g=m>=Ts||p,x=Pd(l,d+h,f+h);return g&&x}getCenterPoint(r){const{x:n,y:a,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:u,spacing:d}=this.options,f=(i+o)/2,A=(l+c+d+u)/2;return{x:n+Math.cos(f)*A,y:a+Math.sin(f)*A}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:a}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=a>Ts?Math.floor(a/Ts):0,a===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Hs,a||0)),d=i*u;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,pXe(r,this,d,o,l),gXe(r,this,d,o,l),r.restore()}}tr(xh,"id","arc"),tr(xh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),tr(xh,"defaultRoutes",{backgroundColor:"backgroundColor"}),tr(xh,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function fte(t,e,r=e){t.lineCap=Qr(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Qr(r.borderDash,e.borderDash)),t.lineDashOffset=Qr(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Qr(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qr(r.borderWidth,e.borderWidth),t.strokeStyle=Qr(r.borderColor,e.borderColor)}function xXe(t,e,r){t.lineTo(r.x,r.y)}function vXe(t){return t.stepped?Qqe:t.tension||t.cubicInterpolationMode==="monotone"?zqe:xXe}function hte(t,e,r={}){const n=t.length,{start:a=0,end:i=n-1}=r,{start:o,end:l}=e,c=Math.max(a,o),u=Math.min(i,l),d=a<o&&i<o||a>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:u<c&&!d?n+u-c:u-c}}function bXe(t,e,r,n){const{points:a,options:i}=e,{count:o,start:l,loop:c,ilen:u}=hte(a,r,n),d=vXe(i);let{move:f=!0,reverse:A}=n||{},h,m,p;for(h=0;h<=u;++h)m=a[(l+(A?u-h:h))%o],!m.skip&&(f?(t.moveTo(m.x,m.y),f=!1):d(t,p,m,A,i.stepped),p=m);return c&&(m=a[(l+(A?u:0))%o],d(t,p,m,A,i.stepped)),!!c}function yXe(t,e,r,n){const a=e.points,{count:i,start:o,ilen:l}=hte(a,r,n),{move:c=!0,reverse:u}=n||{};let d=0,f=0,A,h,m,p,g,x;const v=C=>(o+(u?l-C:C))%i,b=()=>{p!==g&&(t.lineTo(d,g),t.lineTo(d,p),t.lineTo(d,x))};for(c&&(h=a[v(0)],t.moveTo(h.x,h.y)),A=0;A<=l;++A){if(h=a[v(A)],h.skip)continue;const C=h.x,j=h.y,w=C|0;w===m?(j<p?p=j:j>g&&(g=j),d=(f*d+C)/++f):(b(),t.lineTo(C,j),m=w,f=0,p=g=j),x=j}b()}function g_(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?yXe:bXe}function wXe(t){return t.stepped?wKe:t.tension||t.cubicInterpolationMode==="monotone"?jKe:QA}function jXe(t,e,r,n){let a=e._path;a||(a=e._path=new Path2D,e.path(a,r,n)&&a.closePath()),fte(t,e.options),t.stroke(a)}function CXe(t,e,r,n){const{segments:a,options:i}=e,o=g_(e);for(const l of a)fte(t,i,l.style),t.beginPath(),o(t,e,l,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const NXe=typeof Path2D=="function";function SXe(t,e,r,n){NXe&&!e.options.segment?jXe(t,e,r,n):CXe(t,e,r,n)}class bu extends hf{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;AKe(this._points,n,e,a,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=TKe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,a=e[r],i=this.points,o=Jee(this,{property:r,start:a,end:a});if(!o.length)return;const l=[],c=wXe(n);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:A}=o[u],h=i[f],m=i[A];if(h===m){l.push(h);continue}const p=Math.abs((a-h[r])/(m[r]-h[r])),g=c(h,m,p,n.stepped);g[r]=e[r],l.push(g)}return l.length===1?l[0]:l}pathSegment(e,r,n){return g_(this)(e,this,r,n)}path(e,r,n){const a=this.segments,i=g_(this);let o=this._loop;r=r||0,n=n||this.points.length-r;for(const l of a)o&=i(e,this,l,{start:r,end:r+n-1});return!!o}draw(e,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),SXe(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}tr(bu,"id","line"),tr(bu,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),tr(bu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),tr(bu,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $H(t,e,r,n){const a=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<a.radius+a.hitRadius}class l0 extends hf{constructor(r){super();tr(this,"parsed");tr(this,"skip");tr(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],a);return Math.pow(r-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return $H(this,r,"x",n)}inYRange(r,n){return $H(this,r,"y",n)}getCenterPoint(r){const{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){const a=this.options;this.skip||a.radius<.1||!Xy(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,h_(r,a,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}tr(l0,"id","point"),tr(l0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),tr(l0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ate(t,e){const{x:r,y:n,base:a,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,u,d,f;return t.horizontal?(f=o/2,l=Math.min(r,a),c=Math.max(r,a),u=n-f,d=n+f):(f=i/2,l=r-f,c=r+f,u=Math.min(n,a),d=Math.max(n,a)),{left:l,top:u,right:c,bottom:d}}function vh(t,e,r,n){return t?0:vi(e,r,n)}function EXe(t,e,r){const n=t.options.borderWidth,a=t.borderSkipped,i=Hee(n);return{t:vh(a.top,i.top,0,r),r:vh(a.right,i.right,0,e),b:vh(a.bottom,i.bottom,0,r),l:vh(a.left,i.left,0,e)}}function BXe(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=i0(a),o=Math.min(e,r),l=t.borderSkipped,c=n||Yr(a);return{topLeft:vh(!c||l.top||l.left,i.topLeft,0,o),topRight:vh(!c||l.top||l.right,i.topRight,0,o),bottomLeft:vh(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:vh(!c||l.bottom||l.right,i.bottomRight,0,o)}}function TXe(t){const e=Ate(t),r=e.right-e.left,n=e.bottom-e.top,a=EXe(t,r/2,n/2),i=BXe(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function HT(t,e,r,n){const a=e===null,i=r===null,l=t&&!(a&&i)&&Ate(t,n);return l&&(a||Pd(e,l.left,l.right))&&(i||Pd(r,l.top,l.bottom))}function DXe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function IXe(t,e){t.rect(e.x,e.y,e.w,e.h)}function QT(t,e,r={}){const n=t.x!==r.x?-e:0,a=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-n,o=(t.y+t.h!==r.y+r.h?e:0)-a;return{x:t.x+n,y:t.y+a,w:t.w+i,h:t.h+o,radius:t.radius}}class c0 extends hf{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:o}=TXe(this),l=DXe(o.radius)?iN:IXe;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,QT(o,r,i)),e.clip(),l(e,QT(i,-r,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,QT(i,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,r,n){return HT(this,e,r,n)}inXRange(e,r){return HT(this,e,null,r)}inYRange(e,r){return HT(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}tr(c0,"id","bar"),tr(c0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),tr(c0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function _Xe(t,e,r){const n=t.segments,a=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:u}=l;u=q3(c,u,a);const d=x_(r,a[c],a[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:a[c],end:a[u]});continue}const f=Jee(e,d);for(const A of f){const h=x_(r,i[A.start],i[A.end],A.loop),m=Xee(l,a,h);for(const p of m)o.push({source:p,target:A,start:{[r]:HH(d,h,"start",Math.max)},end:{[r]:HH(d,h,"end",Math.min)}})}}return o}function x_(t,e,r,n){if(n)return;let a=e[t],i=r[t];return t==="angle"&&(a=ou(a),i=ou(i)),{property:t,start:a,end:i}}function PXe(t,e){const{x:r=null,y:n=null}=t||{},a=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=q3(o,l,a);const c=a[o],u=a[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:u.x,y:n})):r!==null&&(i.push({x:r,y:c.y}),i.push({x:r,y:u.y}))}),i}function q3(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function HH(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function mte(t,e){let r=[],n=!1;return ca(t)?(n=!0,r=t):r=PXe(t,e),r.length?new bu({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function QH(t){return t&&t.fill!==!1}function kXe(t,e,r){let a=t[e].fill;const i=[e];let o;if(!r)return a;for(;a!==!1&&i.indexOf(a)===-1;){if(!Ni(a))return a;if(o=t[a],!o)return!1;if(o.visible)return a;i.push(a),a=o.fill}return!1}function OXe(t,e,r){const n=LXe(t);if(Yr(n))return isNaN(n.value)?!1:n;let a=parseFloat(n);return Ni(a)&&Math.floor(a)===a?FXe(n[0],e,a,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function FXe(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function RXe(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Yr(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function MXe(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Yr(t)?n=t.value:n=e.getBaseValue(),n}function LXe(t){const e=t.options,r=e.fill;let n=Qr(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function UXe(t){const{scale:e,index:r,line:n}=t,a=[],i=n.segments,o=n.points,l=$Xe(e,r);l.push(mte({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)HXe(a,o[d],l)}return new bu({points:a,options:{}})}function $Xe(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let a=0;a<n.length;a++){const i=n[a];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function HXe(t,e,r){const n=[];for(let a=0;a<r.length;a++){const i=r[a],{first:o,last:l,point:c}=QXe(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function QXe(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const a=n[r],i=t.segments,o=t.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],f=o[d.start][r],A=o[d.end][r];if(Pd(a,f,A)){l=a===f,c=a===A;break}}return{first:l,last:c,point:n}}class pte{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:a,y:i,radius:o}=this;return r=r||{start:0,end:Ts},e.arc(a,i,o,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:a}=this,i=e.angle;return{x:r+Math.cos(i)*a,y:n+Math.sin(i)*a,angle:i}}}function zXe(t){const{chart:e,fill:r,line:n}=t;if(Ni(r))return VXe(e,r);if(r==="stack")return UXe(t);if(r==="shape")return!0;const a=WXe(t);return a instanceof pte?a:mte(a,n)}function VXe(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function WXe(t){return(t.scale||{}).getPointPositionForValue?qXe(t):GXe(t)}function GXe(t){const{scale:e={},fill:r}=t,n=RXe(r,e);if(Ni(n)){const a=e.isHorizontal();return{x:a?n:null,y:a?null:n}}return null}function qXe(t){const{scale:e,fill:r}=t,n=e.options,a=e.getLabels().length,i=n.reverse?e.max:e.min,o=MXe(r,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new pte({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<a;++c)l.push(e.getPointPositionForValue(c,o));return l}function zT(t,e,r){const n=zXe(e),{chart:a,index:i,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,f=u.backgroundColor,{above:A=f,below:h=f}=d||{},m=a.getDatasetMeta(i),p=Zee(a,m);n&&o.points.length&&(VE(t,r),KXe(t,{line:o,target:n,above:A,below:h,area:r,scale:l,axis:c,clip:p}),WE(t))}function KXe(t,e){const{line:r,target:n,above:a,below:i,area:o,scale:l,clip:c}=e,u=r._loop?"angle":e.axis;t.save(),u==="x"&&i!==a&&(zH(t,n,o.top),VH(t,{line:r,target:n,color:a,scale:l,property:u,clip:c}),t.restore(),t.save(),zH(t,n,o.bottom)),VH(t,{line:r,target:n,color:i,scale:l,property:u,clip:c}),t.restore()}function zH(t,e,r){const{segments:n,points:a}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:u}=l,d=a[c],f=a[q3(c,u,a)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,r),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(f.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function VH(t,e){const{line:r,target:n,property:a,color:i,scale:o,clip:l}=e,c=_Xe(r,n,a);for(const{source:u,target:d,start:f,end:A}of c){const{style:{backgroundColor:h=i}={}}=u,m=n!==!0;t.save(),t.fillStyle=h,YXe(t,o,l,m&&x_(a,f,A)),t.beginPath();const p=!!r.pathSegment(t,u);let g;if(m){p?t.closePath():WH(t,n,A,a);const x=!!n.pathSegment(t,d,{move:p,reverse:!0});g=p&&x,g||WH(t,n,f,a)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function YXe(t,e,r,n){const a=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,u,d,f;i==="x"?(c=o,u=a.top,d=l,f=a.bottom):(c=a.left,u=o,d=a.right,f=l),t.beginPath(),r&&(c=Math.max(c,r.left),d=Math.min(d,r.right),u=Math.max(u,r.top),f=Math.min(f,r.bottom)),t.rect(c,u,d-c,f-u),t.clip()}}function WH(t,e,r,n){const a=e.interpolate(r,n);a&&t.lineTo(a.x,a.y)}var XXe={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,a=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof bu&&(c={visible:t.isDatasetVisible(o),index:o,fill:OXe(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,a.push(c);for(o=0;o<n;++o)c=a[o],!(!c||c.fill===!1)&&(c.fill=kXe(a,o,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",a=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=a.length-1;o>=0;--o){const l=a[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&zT(t.ctx,l,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let a=n.length-1;a>=0;--a){const i=n[a].$filler;QH(i)&&zT(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!QH(n)||r.drawTime!=="beforeDatasetDraw"||zT(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const GH=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},JXe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class qH extends hf{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=ss(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,a)=>e.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,a=bi(n.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=GH(n,i);let u,d;r.font=a.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,a,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,a){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=a+l;let f=e;i.textAlign="left",i.textBaseline="middle";let A=-1,h=-d;return this.legendItems.forEach((m,p)=>{const g=n+r/2+i.measureText(m.text).width;(p===0||u[u.length-1]+g+2*l>o)&&(f+=d,u[u.length-(p>0?0:1)]=0,h+=d,A++),c[p]={left:0,top:h,row:A,width:g,height:a},u[u.length-1]+=g+l}),f}_fitCols(e,r,n,a){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let f=l,A=0,h=0,m=0,p=0;return this.legendItems.forEach((g,x)=>{const{itemWidth:v,itemHeight:b}=ZXe(n,r,i,g,a);x>0&&h+b+2*l>d&&(f+=A+l,u.push({width:A,height:h}),m+=A+l,p++,A=h=0),c[x]={left:m,top:h,col:p,width:v,height:b},A=Math.max(A,v),h+=b+l}),f+=A,u.push({width:A,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,o=o0(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=ui(n,this.left+a,this.right-this.lineWidths[l]);for(const u of r)l!==u.row&&(l=u.row,c=ui(n,this.left+a,this.right-this.lineWidths[l])),u.top+=this.top+e+a,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+a}else{let l=0,c=ui(n,this.top+e+a,this.bottom-this.columnSizes[l].height);for(const u of r)u.col!==l&&(l=u.col,c=ui(n,this.top+e+a,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+a,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;VE(e,this),this._draw(),WE(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:o}=e,l=Js.color,c=o0(e.rtl,this.left,this.width),u=bi(o.font),{padding:d}=o,f=u.size,A=f/2;let h;this.drawTitle(),a.textAlign=c.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=u.string;const{boxWidth:m,boxHeight:p,itemHeight:g}=GH(o,f),x=function(w,N,E){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;a.save();const _=Qr(E.lineWidth,1);if(a.fillStyle=Qr(E.fillStyle,l),a.lineCap=Qr(E.lineCap,"butt"),a.lineDashOffset=Qr(E.lineDashOffset,0),a.lineJoin=Qr(E.lineJoin,"miter"),a.lineWidth=_,a.strokeStyle=Qr(E.strokeStyle,l),a.setLineDash(Qr(E.lineDash,[])),o.usePointStyle){const k={radius:p*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:_},D=c.xPlus(w,m/2),S=N+A;$ee(a,k,D,S,o.pointStyleWidth&&m)}else{const k=N+Math.max((f-p)/2,0),D=c.leftForLtr(w,m),S=i0(E.borderRadius);a.beginPath(),Object.values(S).some(F=>F!==0)?iN(a,{x:D,y:k,w:m,h:p,radius:S}):a.rect(D,k,m,p),a.fill(),_!==0&&a.stroke()}a.restore()},v=function(w,N,E){Jy(a,E.text,w,N+g/2,u,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},b=this.isHorizontal(),C=this._computeTitleHeight();b?h={x:ui(i,this.left+d,this.right-n[0]),y:this.top+d+C,line:0}:h={x:this.left+d,y:ui(i,this.top+C+d,this.bottom-r[0].height),line:0},qee(this.ctx,e.textDirection);const j=g+d;this.legendItems.forEach((w,N)=>{a.strokeStyle=w.fontColor,a.fillStyle=w.fontColor;const E=a.measureText(w.text).width,_=c.textAlign(w.textAlign||(w.textAlign=o.textAlign)),k=m+A+E;let D=h.x,S=h.y;c.setWidth(this.width),b?N>0&&D+k+d>this.right&&(S=h.y+=j,h.line++,D=h.x=ui(i,this.left+d,this.right-n[h.line])):N>0&&S+j>this.bottom&&(D=h.x=D+r[h.line].width+d,h.line++,S=h.y=ui(i,this.top+C+d,this.bottom-r[h.line].height));const F=c.x(D);if(x(F,S,w),D=Dqe(_,D+m+A,b?D+k:this.right,e.rtl),v(c.x(D),S,w),b)h.x+=k+d;else if(typeof w.text!="string"){const M=u.lineHeight;h.y+=gte(w,M)+d}else h.y+=j}),Kee(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=bi(r.font),a=Ml(r.padding);if(!r.display)return;const i=o0(e.rtl,this.left,this.width),o=this.ctx,l=r.position,c=n.size/2,u=a.top+c;let d,f=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),d=this.top+u,f=ui(e.align,f,this.right-A);else{const m=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);d=u+ui(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const h=ui(l,f,f+A);o.textAlign=i.textAlign(M3(l)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,Jy(o,r.text,h,d,n)}_computeTitleHeight(){const e=this.options.title,r=bi(e.font),n=Ml(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,a,i;if(Pd(e,this.left,this.right)&&Pd(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],Pd(e,a.left,a.left+a.width)&&Pd(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!rJe(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=JXe(a,n);a&&!i&&ss(r.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&ss(r.onHover,[e,n,this],this)}else n&&ss(r.onClick,[e,n,this],this)}}function ZXe(t,e,r,n,a){const i=eJe(n,t,e,r),o=tJe(a,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function eJe(t,e,r,n){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),e+r.size/2+n.measureText(a).width}function tJe(t,e,r){let n=t;return typeof e.text!="string"&&(n=gte(e,r)),n}function gte(t,e){const r=t.text?t.text.length:0;return e*r}function rJe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var KE={id:"legend",_element:qH,start(t,e,r){const n=t.legend=new qH({ctx:t.ctx,options:r,chart:t});Bl.configure(t,n,r),Bl.addBox(t,n)},stop(t){Bl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Bl.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),e.hidden=!0):(a.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(r?0:void 0),d=Ml(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class xte extends hf{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const a=ca(n.text)?n.text.length:1;this._padding=Ml(n.padding);const i=a*bi(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:a,right:i,options:o}=this,l=o.align;let c=0,u,d,f;return this.isHorizontal()?(d=ui(l,n,i),f=r+e,u=i-n):(o.position==="left"?(d=n+e,f=ui(l,a,r),c=Hs*-.5):(d=i-e,f=ui(l,r,a),c=Hs*.5),u=a-r),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=bi(r.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Jy(e,r.text,0,0,n,{color:r.color,maxWidth:c,rotation:u,textAlign:M3(r.align),textBaseline:"middle",translation:[o,l]})}}function nJe(t,e){const r=new xte({ctx:t.ctx,options:e,chart:t});Bl.configure(t,r,e),Bl.addBox(t,r),t.titleBlock=r}var K3={id:"title",_element:xte,start(t,e,r){nJe(t,r)},stop(t){const e=t.titleBlock;Bl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Bl.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ab={average(t){if(!t.length)return!1;let e,r,n=new Set,a=0,i=0;for(e=0,r=t.length;e<r;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),a+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,a=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=d_(e,u);d<a&&(a=d,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,n=c.y}return{x:r,y:n}}};function su(t,e){return e&&(ca(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function pd(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function sJe(t,e){const{element:r,datasetIndex:n,index:a}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(a);return{chart:t,label:o,parsed:i.getParsed(a),raw:t.data.datasets[n].data[a],formattedValue:l,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function KH(t,e){const r=t.chart.ctx,{body:n,footer:a,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=bi(e.bodyFont),u=bi(e.titleFont),d=bi(e.footerFont),f=i.length,A=a.length,h=n.length,m=Ml(e.padding);let p=m.height,g=0,x=n.reduce((C,j)=>C+j.before.length+j.lines.length+j.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),x){const C=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;p+=h*C+(x-h)*c.lineHeight+(x-1)*e.bodySpacing}A&&(p+=e.footerMarginTop+A*d.lineHeight+(A-1)*e.footerSpacing);let v=0;const b=function(C){g=Math.max(g,r.measureText(C).width+v)};return r.save(),r.font=u.string,Tn(t.title,b),r.font=c.string,Tn(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,Tn(n,C=>{Tn(C.before,b),Tn(C.lines,b),Tn(C.after,b)}),v=0,r.font=d.string,Tn(t.footer,b),r.restore(),g+=m.width,{width:g,height:p}}function aJe(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function iJe(t,e,r,n){const{x:a,width:i}=n,o=r.caretSize+r.caretPadding;if(t==="left"&&a+i+o>e.width||t==="right"&&a-i-o<0)return!0}function oJe(t,e,r,n){const{x:a,width:i}=r,{width:o,chartArea:{left:l,right:c}}=t;let u="center";return n==="center"?u=a<=(l+c)/2?"left":"right":a<=i/2?u="left":a>=o-i/2&&(u="right"),iJe(u,t,e,r)&&(u="center"),u}function YH(t,e,r){const n=r.yAlign||e.yAlign||aJe(t,r);return{xAlign:r.xAlign||e.xAlign||oJe(t,e,r,n),yAlign:n}}function lJe(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function cJe(t,e,r){let{y:n,height:a}=t;return e==="top"?n+=r:e==="bottom"?n-=a+r:n-=a/2,n}function XH(t,e,r,n){const{caretSize:a,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=r,u=a+i,{topLeft:d,topRight:f,bottomLeft:A,bottomRight:h}=i0(o);let m=lJe(e,l);const p=cJe(e,c,u);return c==="center"?l==="left"?m+=u:l==="right"&&(m-=u):l==="left"?m-=Math.max(d,A)+a:l==="right"&&(m+=Math.max(f,h)+a),{x:vi(m,0,n.width-e.width),y:vi(p,0,n.height-e.height)}}function Tj(t,e,r){const n=Ml(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function JH(t){return su([],pd(t))}function uJe(t,e,r){return fp(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function ZH(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const vte={beforeTitle:Ad,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Ad,beforeBody:Ad,beforeLabel:Ad,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return yn(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Ad,afterBody:Ad,beforeFooter:Ad,footer:Ad,afterFooter:Ad};function xo(t,e,r,n){const a=t[e].call(r,n);return typeof a>"u"?vte[e].call(r,n):a}class v_ extends hf{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new ete(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=uJe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,a=xo(n,"beforeTitle",this,e),i=xo(n,"title",this,e),o=xo(n,"afterTitle",this,e);let l=[];return l=su(l,pd(a)),l=su(l,pd(i)),l=su(l,pd(o)),l}getBeforeBody(e,r){return JH(xo(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,a=[];return Tn(e,i=>{const o={before:[],lines:[],after:[]},l=ZH(n,i);su(o.before,pd(xo(l,"beforeLabel",this,i))),su(o.lines,xo(l,"label",this,i)),su(o.after,pd(xo(l,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(e,r){return JH(xo(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,a=xo(n,"beforeFooter",this,e),i=xo(n,"footer",this,e),o=xo(n,"afterFooter",this,e);let l=[];return l=su(l,pd(a)),l=su(l,pd(i)),l=su(l,pd(o)),l}_createItems(e){const r=this._active,n=this.chart.data,a=[],i=[],o=[];let l=[],c,u;for(c=0,u=r.length;c<u;++c)l.push(sJe(this.chart,r[c]));return e.filter&&(l=l.filter((d,f,A)=>e.filter(d,f,A,n))),e.itemSort&&(l=l.sort((d,f)=>e.itemSort(d,f,n))),Tn(l,d=>{const f=ZH(e.callbacks,d);a.push(xo(f,"labelColor",this,d)),i.push(xo(f,"labelPointStyle",this,d)),o.push(xo(f,"labelTextColor",this,d))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const l=Ab[n.position].call(this,a,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=KH(this,n),u=Object.assign({},l,c),d=YH(this.chart,n,u),f=XH(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,a){const i=this.getCaretPosition(e,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=i0(l),{x:A,y:h}=e,{width:m,height:p}=r;let g,x,v,b,C,j;return i==="center"?(C=h+p/2,a==="left"?(g=A,x=g-o,b=C+o,j=C-o):(g=A+m,x=g+o,b=C-o,j=C+o),v=g):(a==="left"?x=A+Math.max(c,d)+o:a==="right"?x=A+m-Math.max(u,f)-o:x=this.caretX,i==="top"?(b=h,C=b-o,g=x-o,v=x+o):(b=h+p,C=b+o,g=x+o,v=x-o),j=b),{x1:g,x2:x,x3:v,y1:b,y2:C,y3:j}}drawTitle(e,r,n){const a=this.title,i=a.length;let o,l,c;if(i){const u=o0(n.rtl,this.x,this.width);for(e.x=Tj(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",o=bi(n.titleFont),l=n.titleSpacing,r.fillStyle=n.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(a[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,r,n,a,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:u}=i,d=bi(i.bodyFont),f=Tj(this,"left",i),A=a.x(f),h=c<d.lineHeight?(d.lineHeight-c)/2:0,m=r.y+h;if(i.usePointStyle){const p={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=a.leftForLtr(A,u)+u/2,x=m+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,h_(e,p,g,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,h_(e,p,g,x)}else{e.lineWidth=Yr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=a.leftForLtr(A,u),g=a.leftForLtr(a.xPlus(A,1),u-2),x=i0(o.borderRadius);Object.values(x).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,iN(e,{x:p,y:m,w:u,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),iN(e,{x:g,y:m+1,w:u-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,m,u,c),e.strokeRect(p,m,u,c),e.fillStyle=o.backgroundColor,e.fillRect(g,m+1,u-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=n,f=bi(n.bodyFont);let A=f.lineHeight,h=0;const m=o0(n.rtl,this.x,this.width),p=function(E){r.fillText(E,m.x(e.x+h),e.y+A/2),e.y+=A+i},g=m.textAlign(o);let x,v,b,C,j,w,N;for(r.textAlign=o,r.textBaseline="middle",r.font=f.string,e.x=Tj(this,g,n),r.fillStyle=n.bodyColor,Tn(this.beforeBody,p),h=l&&g!=="right"?o==="center"?u/2+d:u+2+d:0,C=0,w=a.length;C<w;++C){for(x=a[C],v=this.labelTextColors[C],r.fillStyle=v,Tn(x.before,p),b=x.lines,l&&b.length&&(this._drawColorBox(r,e,C,m,n),A=Math.max(f.lineHeight,c)),j=0,N=b.length;j<N;++j)p(b[j]),A=f.lineHeight;Tn(x.after,p)}h=0,A=f.lineHeight,Tn(this.afterBody,p),e.y-=i}drawFooter(e,r,n){const a=this.footer,i=a.length;let o,l;if(i){const c=o0(n.rtl,this.x,this.width);for(e.x=Tj(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=c.textAlign(n.footerAlign),r.textBaseline="middle",o=bi(n.footerFont),r.fillStyle=n.footerColor,r.font=o.string,l=0;l<i;++l)r.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,r,n,a){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=n,{topLeft:f,topRight:A,bottomLeft:h,bottomRight:m}=i0(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(l+f,c),o==="top"&&this.drawCaret(e,r,n,a),r.lineTo(l+u-A,c),r.quadraticCurveTo(l+u,c,l+u,c+A),o==="center"&&i==="right"&&this.drawCaret(e,r,n,a),r.lineTo(l+u,c+d-m),r.quadraticCurveTo(l+u,c+d,l+u-m,c+d),o==="bottom"&&this.drawCaret(e,r,n,a),r.lineTo(l+h,c+d),r.quadraticCurveTo(l,c+d,l,c+d-h),o==="center"&&i==="left"&&this.drawCaret(e,r,n,a),r.lineTo(l,c+f),r.quadraticCurveTo(l,c,l+f,c),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const o=Ab[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=KH(this,e),c=Object.assign({},o,this._size),u=YH(r,e,c),d=XH(e,c,u,r);(a._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ml(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,a,r),qee(e,r.textDirection),i.y+=o.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),Kee(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,a=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!nN(n,a),o=this._positionChanged(a,r);(i||o)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(e,i,r,n),l=this._positionChanged(o,e),c=r||!nN(o,i)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,n,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,r){const{caretX:n,caretY:a,options:i}=this,o=Ab[i.position].call(this,e,r);return o!==!1&&(n!==o.x||a!==o.y)}}tr(v_,"positioners",Ab);var YE={id:"tooltip",_element:v_,positioners:Ab,afterInit(t,e,r){r&&(t.tooltip=new v_({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vte},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dJe=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function fJe(t,e,r,n){const a=t.indexOf(e);if(a===-1)return dJe(t,e,r,n);const i=t.lastIndexOf(e);return a!==i?r:a}const hJe=(t,e)=>t===null?null:vi(Math.round(t),0,e);function eQ(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ew extends Wx{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(yn(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:fJe(n,e,Qr(r,e),this._addedLabels),hJe(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=r;o++)a.push({value:o});return a}getLabelForValue(e){return eQ.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}tr(ew,"id","category"),tr(ew,"defaults",{ticks:{callback:eQ}});function AJe(t,e){const r=[],{bounds:a,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:A}=t,h=i||1,m=d-1,{min:p,max:g}=e,x=!yn(o),v=!yn(l),b=!yn(u),C=(g-p)/(f+1);let j=X7((g-p)/m/h)*h,w,N,E,_;if(j<1e-14&&!x&&!v)return[{value:p},{value:g}];_=Math.ceil(g/j)-Math.floor(p/j),_>m&&(j=X7(_*j/m/h)*h),yn(c)||(w=Math.pow(10,c),j=Math.ceil(j*w)/w),a==="ticks"?(N=Math.floor(p/j)*j,E=Math.ceil(g/j)*j):(N=p,E=g),x&&v&&i&&yqe((l-o)/i,j/1e3)?(_=Math.round(Math.min((l-o)/j,d)),j=(l-o)/_,N=o,E=l):b?(N=x?o:N,E=v?l:E,_=u-1,j=(E-N)/_):(_=(E-N)/j,kb(_,Math.round(_),j/1e3)?_=Math.round(_):_=Math.ceil(_));const k=Math.max(J7(j),J7(N));w=Math.pow(10,yn(c)?k:c),N=Math.round(N*w)/w,E=Math.round(E*w)/w;let D=0;for(x&&(A&&N!==o?(r.push({value:o}),N<o&&D++,kb(Math.round((N+D*j)*w)/w,o,tQ(o,C,t))&&D++):N<o&&D++);D<_;++D){const S=Math.round((N+D*j)*w)/w;if(v&&S>l)break;r.push({value:S})}return v&&A&&E!==l?r.length&&kb(r[r.length-1].value,l,tQ(l,C,t))?r[r.length-1].value=l:r.push({value:l}):(!v||E===l)&&r.push({value:E}),r}function tQ(t,e,{horizontal:r,minRotation:n}){const a=_d(n),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class mJe extends Wx{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return yn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const o=c=>a=r?a:c,l=c=>i=n?i:c;if(e){const c=Pu(a),u=Pu(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(a===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(a-c)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=AJe(a,i);return e.bounds==="ticks"&&wqe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const a=(n-r)/Math.max(e.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return U3(e,this.chart.options.locale,this.options.ticks.format)}}class tw extends mJe{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Ni(e)?e:0,this.max=Ni(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=_d(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}tr(tw,"id","linear"),tr(tw,"defaults",{ticks:{callback:Uee.formatters.numeric}});const XE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jo=Object.keys(XE);function rQ(t,e){return t-e}function nQ(t,e){if(yn(e))return null;const r=t._adapter,{parser:n,round:a,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Ni(o)||(o=typeof n=="string"?r.parse(o,n):r.parse(o)),o===null?null:(a&&(o=a==="week"&&(Ky(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,a)),+o)}function sQ(t,e,r,n){const a=jo.length;for(let i=jo.indexOf(t);i<a-1;++i){const o=XE[jo[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-e)/(l*o.size))<=n)return jo[i]}return jo[a-1]}function pJe(t,e,r,n,a){for(let i=jo.length-1;i>=jo.indexOf(r);i--){const o=jo[i];if(XE[o].common&&t._adapter.diff(a,n,o)>=e-1)return o}return jo[r?jo.indexOf(r):0]}function gJe(t){for(let e=jo.indexOf(t)+1,r=jo.length;e<r;++e)if(XE[jo[e]].common)return jo[e]}function aQ(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:a}=R3(r,e),i=r[n]>=e?r[n]:r[a];t[i]=!0}}function xJe(t,e,r,n){const a=t._adapter,i=+a.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+a.add(l,1,n))c=r[l],c>=0&&(e[c].major=!0);return e}function iQ(t,e,r){const n=[],a={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],a[l]=o,n.push({value:l,major:!1});return i===0||!r?n:xJe(t,n,a,r)}class uN extends Wx{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),a=this._adapter=new sYe._date(e.adapters.date);a.init(r),Pb(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:nQ(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=Ni(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=Ni(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,l=Eqe(a,i,o);return this._unit=r.unit||(n.autoSkip?sQ(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):pJe(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:gJe(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),iQ(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?r=1-a:r=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=vi(r,0,o),n=vi(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,o=i.unit||sQ(i.minUnit,r,n,this._getLabelCapacity(r)),l=Qr(a.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Ky(c)||c===!0,d={};let f=r,A,h;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(n,r,o)>1e5*l)throw new Error(r+" and "+n+" are too far apart with stepSize of "+l+" "+o);const m=a.ticks.source==="data"&&this.getDataTimestamps();for(A=f,h=0;A<n;A=+e.add(A,l,o),h++)aQ(d,A,m);return(A===n||a.bounds==="ticks"||h===1)&&aQ(d,A,m),Object.keys(d).sort(rQ).map(p=>+p)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const a=this.options.time.displayFormats,i=this._unit,o=r||a[i];return this._adapter.format(e,o)}_tickFormatFunction(e,r,n,a){const i=this.options,o=i.ticks.callback;if(o)return ss(o,[e,r,n],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],A=n[r],h=u&&f&&A&&A.major;return this._adapter.format(e,a||(h?f:d))}generateTickLabels(e){let r,n,a;for(r=0,n=e.length;r<n;++r)a=e[r],a.label=this._tickFormatFunction(a.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,a=_d(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,iQ(this,[e],this._majorUnit),a),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)e=e.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)e.push(nQ(this,a[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ree(e.sort(rQ))}}tr(uN,"id","time"),tr(uN,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Dj(t,e,r){let n=0,a=t.length-1,i,o,l,c;r?(e>=t[n].pos&&e<=t[a].pos&&({lo:n,hi:a}=om(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[a]):(e>=t[n].time&&e<=t[a].time&&({lo:n,hi:a}=om(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[a]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class oQ extends uN{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Dj(r,this.min),this._tableRange=Dj(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,a=[],i=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=r&&u<=n&&a.push(u);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(o=0,l=a.length;o<l;++o)d=a[o+1],c=a[o-1],u=a[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Dj(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Dj(this._table,n*this._tableRange+this._minPos,!0)}}tr(oQ,"id","timeseries"),tr(oQ,"defaults",uN.defaults);const bte="label";function lQ(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function vJe(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function yte(t,e){t.labels=e}function wte(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bte;const n=[];t.datasets=e.map(a=>{const i=t.datasets.find(o=>o[r]===a[r]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function bJe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bte;const r={labels:[],datasets:[]};return yte(r,t.labels),wte(r,t.datasets,e),r}function yJe(t,e){const{height:r=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...A}=t,h=y.useRef(null),m=y.useRef(null),p=()=>{h.current&&(m.current=new hp(h.current,{type:o,data:bJe(l,i),options:c&&{...c},plugins:u}),lQ(e,m.current))},g=()=>{lQ(e,null),m.current&&(m.current.destroy(),m.current=null)};return y.useEffect(()=>{!a&&m.current&&c&&vJe(m.current,c)},[a,c]),y.useEffect(()=>{!a&&m.current&&yte(m.current.config.data,l.labels)},[a,l.labels]),y.useEffect(()=>{!a&&m.current&&l.datasets&&wte(m.current.config.data,l.datasets,i)},[a,l.datasets]),y.useEffect(()=>{m.current&&(a?(g(),setTimeout(p)):m.current.update(f))},[a,c,l.labels,l.datasets,f]),y.useEffect(()=>{m.current&&(g(),setTimeout(p))},[o]),y.useEffect(()=>(p(),()=>g()),[]),le.createElement("canvas",{ref:h,role:"img",height:r,width:n,...A},d)}const wJe=y.forwardRef(yJe);function JE(t,e){return hp.register(e),y.forwardRef((r,n)=>le.createElement(wJe,{...r,ref:n,type:t}))}const jJe=JE("line",i2),jte=JE("bar",a2),CJe=JE("doughnut",Wg),NJe=JE("pie",A_),Cte=y.createContext({dragDropManager:void 0});function yl(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var cQ=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),uQ=function(){return Math.random().toString(36).substring(7).split("").join(".")},dQ={INIT:"@@redux/INIT"+uQ(),REPLACE:"@@redux/REPLACE"+uQ()};function SJe(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Nte(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(yl(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(yl(1));return r(Nte)(t,e)}if(typeof t!="function")throw new Error(yl(2));var a=t,i=e,o=[],l=o,c=!1;function u(){l===o&&(l=o.slice())}function d(){if(c)throw new Error(yl(3));return i}function f(p){if(typeof p!="function")throw new Error(yl(4));if(c)throw new Error(yl(5));var g=!0;return u(),l.push(p),function(){if(g){if(c)throw new Error(yl(6));g=!1,u();var v=l.indexOf(p);l.splice(v,1),o=null}}}function A(p){if(!SJe(p))throw new Error(yl(7));if(typeof p.type>"u")throw new Error(yl(8));if(c)throw new Error(yl(9));try{c=!0,i=a(i,p)}finally{c=!1}for(var g=o=l,x=0;x<g.length;x++){var v=g[x];v()}return p}function h(p){if(typeof p!="function")throw new Error(yl(10));a=p,A({type:dQ.REPLACE})}function m(){var p,g=f;return p={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(yl(11));function b(){v.next&&v.next(d())}b();var C=g(b);return{unsubscribe:C}}},p[cQ]=function(){return this},p}return A({type:dQ.INIT}),n={dispatch:A,subscribe:f,getState:d,replaceReducer:h},n[cQ]=m,n}function Ir(t,e,...r){if(EJe()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(e.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function EJe(){return typeof process<"u"&&!0}function BJe(t,e,r){return e.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,t)}function TJe(t,e){return t.filter(r=>r!==e)}function Ste(t){return typeof t=="object"}function DJe(t,e){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(n),e.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function IJe(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Y3="dnd-core/INIT_COORDS",ZE="dnd-core/BEGIN_DRAG",X3="dnd-core/PUBLISH_DRAG_SOURCE",e5="dnd-core/HOVER",t5="dnd-core/DROP",r5="dnd-core/END_DRAG";function fQ(t,e){return{type:Y3,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const _Je={type:Y3,payload:{clientOffset:null,sourceClientOffset:null}};function PJe(t){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,l=t.getMonitor(),c=t.getRegistry();t.dispatch(fQ(i)),kJe(r,l,c);const u=RJe(r,l);if(u==null){t.dispatch(_Je);return}let d=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");OJe(o),d=o(u)}t.dispatch(fQ(i,d));const A=c.getSource(u).beginDrag(l,u);if(A==null)return;FJe(A),c.pinSource(u);const h=c.getSourceType(u);return{type:ZE,payload:{itemType:h,item:A,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!a}}}}function kJe(t,e,r){Ir(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){Ir(r.getSource(n),"Expected sourceIds to be registered.")})}function OJe(t){Ir(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function FJe(t){Ir(Ste(t),"Item must be an object.")}function RJe(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function MJe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LJe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){MJe(t,a,r[a])})}return t}function UJe(t){return function(r={}){const n=t.getMonitor(),a=t.getRegistry();$Je(n),zJe(n).forEach((o,l)=>{const c=HJe(o,l,a,n),u={type:t5,payload:{dropResult:LJe({},r,c)}};t.dispatch(u)})}}function $Je(t){Ir(t.isDragging(),"Cannot call drop while not dragging."),Ir(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function HJe(t,e,r,n){const a=r.getTarget(t);let i=a?a.drop(n,t):void 0;return QJe(i),typeof i>"u"&&(i=e===0?{}:n.getDropResult()),i}function QJe(t){Ir(typeof t>"u"||Ste(t),"Drop result must either be an object or undefined.")}function zJe(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function VJe(t){return function(){const r=t.getMonitor(),n=t.getRegistry();WJe(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:r5}}}function WJe(t){Ir(t.isDragging(),"Cannot call endDrag while not dragging.")}function b_(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function GJe(t){return function(r,{clientOffset:n}={}){qJe(r);const a=r.slice(0),i=t.getMonitor(),o=t.getRegistry(),l=i.getItemType();return YJe(a,o,l),KJe(a,i,o),XJe(a,i,o),{type:e5,payload:{targetIds:a,clientOffset:n||null}}}}function qJe(t){Ir(Array.isArray(t),"Expected targetIds to be an array.")}function KJe(t,e,r){Ir(e.isDragging(),"Cannot call hover while not dragging."),Ir(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const a=t[n];Ir(t.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);Ir(i,"Expected targetIds to be registered.")}}function YJe(t,e,r){for(let n=t.length-1;n>=0;n--){const a=t[n],i=e.getTargetType(a);b_(i,r)||t.splice(n,1)}}function XJe(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function JJe(t){return function(){if(t.getMonitor().isDragging())return{type:X3}}}function ZJe(t){return{beginDrag:PJe(t),publishDragSource:JJe(t),hover:GJe(t),drop:UJe(t),endDrag:VJe(t)}}class eZe{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const l=i.apply(e,o);typeof l<"u"&&r(l)}}const a=ZJe(this);return Object.keys(a).reduce((i,o)=>{const l=a[o];return i[o]=n(l),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function tZe(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Ete(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rZe(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:Ete(tZe(e,n),r)}function nZe(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:Ete(e,r)}const Rb=[],J3=[];Rb.__IS_NONE__=!0;J3.__IS_ALL__=!0;function sZe(t,e){return t===Rb?!1:t===J3||typeof e>"u"?!0:IJe(e,t).length>0}class aZe{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;Ir(typeof e=="function","listener must be a function."),Ir(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),l=o.stateId;try{l===a||l===a+1&&!sZe(o.dirtyHandlerIds,n)||e()}finally{a=l}};return this.store.subscribe(i)}subscribeToOffsetChange(e){Ir(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return Ir(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(Ir(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),a=this.getItemType();return b_(n,a)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(Ir(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),a=this.getItemType();return n!==a?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!b_(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(e);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return rZe(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return nZe(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const hQ=typeof global<"u"?global:self,Bte=hQ.MutationObserver||hQ.WebKitMutationObserver;function Tte(t){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),t()}}}function iZe(t){let e=1;const r=new Bte(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const oZe=typeof Bte=="function"?iZe:Tte;class lZe{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,a=e.length-this.index;n<a;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=oZe(this.flush),this.requestErrorThrow=Tte(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class cZe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class uZe{create(e){const r=this.freeTasks,n=r.length?r.pop():new cZe(this.onError,a=>r[r.length]=a);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Dte=new lZe,dZe=new uZe(Dte.registerPendingError);function fZe(t){Dte.enqueueTask(dZe.create(t))}const Z3="dnd-core/ADD_SOURCE",eF="dnd-core/ADD_TARGET",tF="dnd-core/REMOVE_SOURCE",n5="dnd-core/REMOVE_TARGET";function hZe(t){return{type:Z3,payload:{sourceId:t}}}function AZe(t){return{type:eF,payload:{targetId:t}}}function mZe(t){return{type:tF,payload:{sourceId:t}}}function pZe(t){return{type:n5,payload:{targetId:t}}}function gZe(t){Ir(typeof t.canDrag=="function","Expected canDrag to be a function."),Ir(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Ir(typeof t.endDrag=="function","Expected endDrag to be a function.")}function xZe(t){Ir(typeof t.canDrop=="function","Expected canDrop to be a function."),Ir(typeof t.hover=="function","Expected hover to be a function."),Ir(typeof t.drop=="function","Expected beginDrag to be a function.")}function y_(t,e){if(e&&Array.isArray(t)){t.forEach(r=>y_(r,!1));return}Ir(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var jl;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(jl||(jl={}));let vZe=0;function bZe(){return vZe++}function yZe(t){const e=bZe().toString();switch(t){case jl.SOURCE:return`S${e}`;case jl.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function AQ(t){switch(t[0]){case"S":return jl.SOURCE;case"T":return jl.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function mQ(t,e){const r=t.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===e)return!0;n=!!a}while(!n);return!1}class wZe{addSource(e,r){y_(e),gZe(r);const n=this.addHandler(jl.SOURCE,e,r);return this.store.dispatch(hZe(n)),n}addTarget(e,r){y_(e,!0),xZe(r);const n=this.addHandler(jl.TARGET,e,r);return this.store.dispatch(AZe(n)),n}containsHandler(e){return mQ(this.dragSources,e)||mQ(this.dropTargets,e)}getSource(e,r=!1){return Ir(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Ir(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Ir(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Ir(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return AQ(e)===jl.SOURCE}isTargetId(e){return AQ(e)===jl.TARGET}removeSource(e){Ir(this.getSource(e),"Expected an existing source."),this.store.dispatch(mZe(e)),fZe(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Ir(this.getTarget(e),"Expected an existing target."),this.store.dispatch(pZe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);Ir(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){Ir(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const a=yZe(e);return this.types.set(a,r),e===jl.SOURCE?this.dragSources.set(a,n):e===jl.TARGET&&this.dropTargets.set(a,n),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const jZe=(t,e)=>t===e;function CZe(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function NZe(t,e,r=jZe){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function SZe(t=Rb,e){switch(e.type){case e5:break;case Z3:case eF:case n5:case tF:return Rb;case ZE:case X3:case r5:case t5:default:return J3}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,a=DJe(r,n);if(!(a.length>0||!NZe(r,n)))return Rb;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&a.push(o),l&&a.push(l)),a}function EZe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){EZe(t,a,r[a])})}return t}const pQ={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function TZe(t=pQ,e){const{payload:r}=e;switch(e.type){case Y3:case ZE:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case e5:return CZe(t.clientOffset,r.clientOffset)?t:BZe({},t,{clientOffset:r.clientOffset});case r5:case t5:return pQ;default:return t}}function DZe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){DZe(t,a,r[a])})}return t}const IZe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function _Ze(t=IZe,e){const{payload:r}=e;switch(e.type){case ZE:return Dg({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case X3:return Dg({},t,{isSourcePublic:!0});case e5:return Dg({},t,{targetIds:r.targetIds});case n5:return t.targetIds.indexOf(r.targetId)===-1?t:Dg({},t,{targetIds:TJe(t.targetIds,r.targetId)});case t5:return Dg({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case r5:return Dg({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function PZe(t=0,e){switch(e.type){case Z3:case eF:return t+1;case tF:case n5:return t-1;default:return t}}function kZe(t=0){return t+1}function OZe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){OZe(t,a,r[a])})}return t}function RZe(t={},e){return{dirtyHandlerIds:SZe(t.dirtyHandlerIds,{type:e.type,payload:FZe({},e.payload,{prevTargetIds:BJe(t,"dragOperation.targetIds",[])})}),dragOffset:TZe(t.dragOffset,e),refCount:PZe(t.refCount,e),dragOperation:_Ze(t.dragOperation,e),stateId:kZe(t.stateId)}}function MZe(t,e=void 0,r={},n=!1){const a=LZe(n),i=new aZe(a,new wZe(a)),o=new eZe(a,i),l=t(o,e,r);return o.receiveBackend(l),o}function LZe(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Nte(RZe,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function UZe(t,e){if(t==null)return{};var r=$Ze(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $Ze(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}let gQ=0;const c2=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var HZe=y.memo(function(e){var{children:r}=e,n=UZe(e,["children"]);const[a,i]=QZe(n);return y.useEffect(()=>{if(i){const o=Ite();return++gQ,()=>{--gQ===0&&(o[c2]=null)}}},[]),s.jsx(Cte.Provider,{value:a,children:r})});function QZe(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=zZe(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function zZe(t,e=Ite(),r,n){const a=e;return a[c2]||(a[c2]={dragDropManager:MZe(t,e,r,n)}),a[c2]}function Ite(){return typeof global<"u"?global:window}const Wm=typeof window<"u"?y.useLayoutEffect:y.useEffect;function VZe(t,e,r){const[n,a]=y.useState(()=>e(t)),i=y.useCallback(()=>{const o=e(t);lb(n,o)||(a(o),r&&r())},[n,t,r]);return Wm(i),[n,i]}function WZe(t,e,r){const[n,a]=VZe(t,e,r);return Wm(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(a,{handlerIds:[o]})},[t,a]),n}function _te(t,e,r){return WZe(e,t||(()=>({})),()=>r.reconnect())}function Pte(t,e){const r=[];return typeof t!="function"&&r.push(t),y.useMemo(()=>typeof t=="function"?t():t,r)}function GZe(t){return y.useMemo(()=>t.hooks.dragSource(),[t])}function qZe(t){return y.useMemo(()=>t.hooks.dragPreview(),[t])}let VT=!1,WT=!1;class KZe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Ir(!VT,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return VT=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{VT=!1}}isDragging(){if(!this.sourceId)return!1;Ir(!WT,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return WT=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{WT=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let GT=!1;class YZe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;Ir(!GT,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return GT=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{GT=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function XZe(t,e,r){const n=r.getRegistry(),a=n.addTarget(t,e);return[a,()=>n.removeTarget(a)]}function JZe(t,e,r){const n=r.getRegistry(),a=n.addSource(t,e);return[a,()=>n.removeSource(a)]}function w_(t,e,r,n){let a;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<i.length;c++){const u=i[c];if(!l(u))return!1;const d=t[u],f=e[u];if(a=void 0,a===!1||a===void 0&&d!==f)return!1}return!0}function j_(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ZZe(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function eet(t){return(e=null,r=null)=>{if(!y.isValidElement(e)){const i=e;return t(i,r),i}const n=e;return ZZe(n),tet(n,r?i=>t(i,r):t)}}function kte(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const a=eet(n);e[r]=()=>a}}),e}function xQ(t,e){typeof t=="function"?t(e):t.current=e}function tet(t,e){const r=t.ref;return Ir(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?y.cloneElement(t,{ref:n=>{xQ(r,n),xQ(e,n)}}):y.cloneElement(t,{ref:e})}class ret{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!w_(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!w_(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=kte({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,j_(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,j_(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class net{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!w_(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=kte({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,j_(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Gx(){const{dragDropManager:t}=y.useContext(Cte);return Ir(t!=null,"Expected drag drop context"),t}function set(t,e){const r=Gx(),n=y.useMemo(()=>new ret(r.getBackend()),[r]);return Wm(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),Wm(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function aet(){const t=Gx();return y.useMemo(()=>new KZe(t),[t])}class iet{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:a}=e;a&&a(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function oet(t,e,r){const n=y.useMemo(()=>new iet(t,e,r),[e,r]);return y.useEffect(()=>{n.spec=t},[t]),n}function cet(t){return y.useMemo(()=>{const e=t.type;return Ir(e!=null,"spec.type must be defined"),e},[t])}function uet(t,e,r){const n=Gx(),a=oet(t,e,r),i=cet(t);Wm(function(){if(i!=null){const[l,c]=JZe(i,a,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),c}},[n,e,r,a,i])}function det(t,e){const r=Pte(t);Ir(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=aet(),a=set(r.options,r.previewOptions);return uet(r,n,a),[_te(r.collect,n,a),GZe(a),qZe(a)]}function fet(t){return y.useMemo(()=>t.hooks.dropTarget(),[t])}function het(t){const e=Gx(),r=y.useMemo(()=>new net(e.getBackend()),[e]);return Wm(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Aet(){const t=Gx();return y.useMemo(()=>new YZe(t),[t])}function met(t){const{accept:e}=t;return y.useMemo(()=>(Ir(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class pet{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function get(t,e){const r=y.useMemo(()=>new pet(t,e),[e]);return y.useEffect(()=>{r.spec=t},[t]),r}function xet(t,e,r){const n=Gx(),a=get(t,e),i=met(t);Wm(function(){const[l,c]=XZe(i,a,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),c},[n,e,a,r,i.map(o=>o.toString()).join("|")])}function vet(t,e){const r=Pte(t),n=Aet(),a=het(r.options);return xet(r,n,a),[_te(r.collect,n,a),fet(a)]}function Ote(t){let e=null;return()=>(e==null&&(e=t()),e)}function bet(t,e){return t.filter(r=>r!==e)}function yet(t,e){const r=new Set,n=i=>r.add(i);t.forEach(n),e.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class wet{enter(e){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=yet(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=bet(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class jet{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Fte="__NATIVE_FILE__",Rte="__NATIVE_URL__",Mte="__NATIVE_TEXT__",Lte="__NATIVE_HTML__",vQ=Object.freeze(Object.defineProperty({__proto__:null,FILE:Fte,HTML:Lte,TEXT:Mte,URL:Rte},Symbol.toStringTag,{value:"Module"}));function qT(t,e,r){const n=e.reduce((a,i)=>a||t.getData(i),"");return n??r}const C_={[Fte]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Lte]:{exposeProperties:{html:(t,e)=>qT(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Rte]:{exposeProperties:{urls:(t,e)=>qT(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Mte]:{exposeProperties:{text:(t,e)=>qT(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Cet(t,e){const r=C_[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new jet(r);return n.loadDataTransfer(e),n}function KT(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(C_).filter(r=>{const n=C_[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const Net=Ote(()=>/firefox/i.test(navigator.userAgent)),Ute=Ote(()=>!!window.safari);class bQ{interpolate(e){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let l=r.length-1;if(e===r[l])return n[l];let c=0,u=o.length-1,d;for(;c<=u;){d=Math.floor(.5*(c+u));const h=r[d];if(h<e)c=d+1;else if(h>e)u=d-1;else return n[d]}l=Math.max(0,u);const f=e-r[l],A=f*f;return n[l]+a[l]*f+i[l]*A+o[l]*f*A}constructor(e,r){const{length:n}=e,a=[];for(let h=0;h<n;h++)a.push(h);a.sort((h,m)=>e[h]<e[m]?-1:1);const i=[],o=[];let l,c;for(let h=0;h<n-1;h++)l=e[h+1]-e[h],c=r[h+1]-r[h],i.push(l),o.push(c/l);const u=[o[0]];for(let h=0;h<i.length-1;h++){const m=o[h],p=o[h+1];if(m*p<=0)u.push(0);else{l=i[h];const g=i[h+1],x=l+g;u.push(3*x/((x+g)/m+(x+l)/p))}}u.push(o[o.length-1]);const d=[],f=[];let A;for(let h=0;h<u.length-1;h++){A=o[h];const m=u[h],p=1/i[h],g=m+u[h+1]-A-A;d.push((A-m-g)*p),f.push(g*p*p)}this.xs=e,this.ys=r,this.c1s=u,this.c2s=d,this.c3s=f}}const Eet=1;function $te(t){const e=t.nodeType===Eet?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function Ij(t){return{x:t.clientX,y:t.clientY}}function Bet(t){var e;return t.nodeName==="IMG"&&(Net()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Tet(t,e,r,n){let a=t?e.width:r,i=t?e.height:n;return Ute()&&t&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Det(t,e,r,n,a){const i=Bet(e),l=$te(i?t:e),c={x:r.x-l.x,y:r.y-l.y},{offsetWidth:u,offsetHeight:d}=t,{anchorX:f,anchorY:A}=n,{dragPreviewWidth:h,dragPreviewHeight:m}=Tet(i,e,u,d),p=()=>{let w=new bQ([0,.5,1],[c.y,c.y/d*m,c.y+m-d]).interpolate(A);return Ute()&&i&&(w+=(window.devicePixelRatio-1)*m),w},g=()=>new bQ([0,.5,1],[c.x,c.x/u*h,c.x+h-u]).interpolate(f),{offsetX:x,offsetY:v}=a,b=x===0||x,C=v===0||v;return{x:b?x:g(),y:C?v:p()}}class Iet{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function _et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){_et(t,a,r[a])})}return t}class Pet{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const a=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),a=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return yQ({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return yQ({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(vQ).some(r=>vQ[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Cet(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&$te(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Ij(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=a,c=KT(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const d=this.monitor.getSourceId(),f=this.sourceNodes.get(d),A=this.sourcePreviewNodes.get(d)||f;if(A){const{anchorX:h,anchorY:m,offsetX:p,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),b=Det(f,A,o,{anchorX:h,anchorY:m},{offsetX:p,offsetY:g});l.setDragImage(A,b.x,b.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=KT(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Ij(a)}),i.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Ij(a),this.scheduleHover(i),(i||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else KT(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Ij(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Iet(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new wet(this.isNodeInDocument)}}const ket=function(e,r,n){return new Pet(e,r,n)},Oet=`
  .slider-custom::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #ffffff;
    border: 2px solid #3b82f6;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  .slider-custom::-moz-range-thumb {
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #ffffff;
    border: 2px solid #3b82f6;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.innerText=Oet,document.head.appendChild(t)}const Fet=({categorieSelectionnee:t,onUpdate:e,onDeselect:r,montantEstimationAchats:n,totalPourcentage:a})=>{const[i,o]=y.useState((t==null?void 0:t.pourcentage)||0);if(console.log("Catégorie sélectionnée:",t),console.log("Montant estimation achats:",n),console.log("Total pourcentage:",a),y.useEffect(()=>{console.log("Catégorie sélectionnée dans effect:",t),t&&(console.log("Définition tempPourcentage à:",t.pourcentage),o(t.pourcentage))},[t]),!t)return s.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-gray-500 mb-2",children:s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.121 2.122"})})}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Cliquez sur une catégorie dans le camembert"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"pour ajuster son pourcentage"})]});const l=d=>{o(d),e(t.id,parseInt(d))},c=i/100*n,u=100-(a-t.pourcentage+parseInt(i));return s.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full shadow-sm",style:{backgroundColor:t.couleur}}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:t.nom}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ajustement du pourcentage"})]})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fermer",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Pourcentage"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",min:"1",max:"100",value:i,onChange:d=>l(d.target.value),className:"w-20 px-3 py-1 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"%"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"range",min:"1",max:"100",value:i,onChange:d=>l(d.target.value),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-custom",style:{background:`linear-gradient(to right, ${t.couleur} 0%, ${t.couleur} ${i}%, #e5e7eb ${i}%, #e5e7eb 100%)`}}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[c.toFixed(0),"€"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Montant estimé"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`text-2xl font-bold ${u>=0?"text-green-600":"text-red-600"}`,children:[u.toFixed(0),"%"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Restant"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[(a-t.pourcentage+parseInt(i)).toFixed(0),"%"]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]})]}),u<0&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Dépassement de 100%"})]})}),u===0&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Répartition complète !"})]})})]})]})},Hte="CATEGORY_BUTTON",YT=({categorie:t,isInChart:e,onRemove:r,onDelete:n,onUpdatePercentage:a,editingCategoryId:i,setEditingCategoryId:o,montantEstimationAchats:l})=>{const[{isDragging:c},u]=det(()=>({type:Hte,item:{categorie:t},collect:A=>({isDragging:A.isDragging()}),canDrag:!e}));console.log(`CategoryButton ${t.nom}: isInChart=${e}, canDrag=${!e}`);const d=i===t.id,f=()=>{e&&o(d?null:t.id)};return s.jsx("div",{className:"space-y-0",children:s.jsxs("div",{ref:e?null:u,onClick:f,className:`
          group relative inline-flex items-center px-6 py-4 m-2 rounded-xl transition-all duration-300 transform
          ${e?"cursor-pointer hover:scale-102 hover:shadow-md":"cursor-move hover:scale-105 hover:shadow-lg"}
          ${c?"opacity-50 scale-95 rotate-3":""}
          ${e?d?"bg-blue-50 border-2 border-blue-400 text-blue-800 shadow-lg":"bg-gray-50 border-2 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-400":"bg-white border-2 border-gray-200 text-gray-800 hover:border-gray-400 shadow-md hover:shadow-xl"}
          ${d?"ring-2 ring-blue-500 border-blue-300":""}
        `,style:{borderLeftColor:t.couleur,borderLeftWidth:"6px"},title:e?"Cliquer pour modifier le pourcentage":"Glisser vers le camembert",children:[s.jsx("div",{className:"w-4 h-4 rounded-full mr-3 shadow-sm",style:{backgroundColor:t.couleur}}),s.jsx("span",{className:"font-semibold text-sm",children:t.nom}),s.jsxs("span",{className:`ml-3 px-2 py-1 rounded-full text-xs font-medium ${d?"bg-blue-100 text-blue-800 ring-2 ring-blue-300":"bg-gray-100 text-gray-600"}`,children:[t.pourcentage,"%"]}),s.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[e&&r&&s.jsx("button",{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Clic sur suppression de:",t.nom),r(t)},className:"w-7 h-7 bg-red-100 hover:bg-red-200 rounded-full flex items-center justify-center text-red-600 hover:text-red-800 transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"Retirer du camembert",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),!e&&t.isCustom&&n&&s.jsx("button",{onClick:A=>{A.preventDefault(),A.stopPropagation(),window.confirm(`Êtes-vous sûr de vouloir supprimer définitivement la catégorie "${t.nom}" ?`)&&n(t.id)},className:"w-6 h-6 bg-gray-100 hover:bg-red-100 rounded-full flex items-center justify-center text-gray-500 hover:text-red-600 transition-all duration-200 hover:scale-110",title:"Supprimer définitivement cette catégorie personnalisée",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),!e&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 group-hover:opacity-20 transition-opacity duration-300 rounded-xl"})]})})},Ret=({onCreateCategory:t,categoriesExistantes:e})=>{const[r,n]=y.useState(!1),[a,i]=y.useState({nom:"",pourcentage:5,couleur:"#3B82F6"}),[o,l]=y.useState({}),c=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#F43F5E","#8B5A2B","#6B7280","#DC2626"],u=()=>{const A={};return a.nom.trim()?a.nom.trim().length<2?A.nom="Le nom doit contenir au moins 2 caractères":e.some(h=>h.nom.toLowerCase()===a.nom.trim().toLowerCase())&&(A.nom="Une catégorie avec ce nom existe déjà"):A.nom="Le nom est requis",(a.pourcentage<1||a.pourcentage>100)&&(A.pourcentage="Le pourcentage doit être entre 1 et 100"),l(A),Object.keys(A).length===0},d=A=>{if(A.preventDefault(),!u())return;const h={id:`custom-${Date.now()}`,nom:a.nom.trim(),couleur:a.couleur,pourcentage:parseInt(a.pourcentage),isCustom:!0};t(h),i({nom:"",pourcentage:5,couleur:"#3B82F6"}),l({}),n(!1)},f=(A,h)=>{i(m=>({...m,[A]:h})),o[A]&&l(m=>({...m,[A]:""}))};return r?s.jsxs("div",{className:"border-2 border-blue-200 rounded-xl p-4 bg-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-800",children:"Nouvelle catégorie"}),s.jsx("button",{onClick:()=>{n(!1),i({nom:"",pourcentage:5,couleur:"#3B82F6"}),l({})},className:"text-blue-600 hover:text-blue-800",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Nom de la catégorie"}),s.jsx("input",{type:"text",value:a.nom,onChange:A=>f("nom",A.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.nom?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Ex: Matériel électrique"}),o.nom&&s.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.nom})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Pourcentage initial"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"1",max:"100",value:a.pourcentage,onChange:A=>f("pourcentage",parseInt(A.target.value)),className:"flex-1 h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),s.jsx("input",{type:"number",min:"1",max:"100",value:a.pourcentage,onChange:A=>f("pourcentage",parseInt(A.target.value)||1),className:`w-16 px-2 py-1 text-center border rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.pourcentage?"border-red-300 bg-red-50":"border-gray-300"}`}),s.jsx("span",{className:"text-sm text-blue-700",children:"%"})]}),o.pourcentage&&s.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.pourcentage})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Couleur"}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:c.map(A=>s.jsx("button",{type:"button",onClick:()=>f("couleur",A),className:`w-8 h-8 rounded-full border-2 transition-all duration-200 hover:scale-110 ${a.couleur===A?"border-blue-600 ring-2 ring-blue-300":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:A},title:A},A))})]}),s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[s.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Aperçu :"}),s.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-lg border-2 border-gray-200",style:{borderLeftColor:a.couleur,borderLeftWidth:"6px"},children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:a.couleur}}),s.jsx("span",{className:"font-medium text-sm",children:a.nom||"Nom de la catégorie"}),s.jsxs("span",{className:"ml-2 px-2 py-1 bg-gray-100 rounded-full text-xs",children:[a.pourcentage,"%"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{n(!1),i({nom:"",pourcentage:5,couleur:"#3B82F6"}),l({})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Créer"})]})]})]}):s.jsxs("button",{onClick:()=>n(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-blue-300 rounded-xl text-blue-600 hover:border-blue-400 hover:bg-blue-50 transition-all duration-200",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Créer une catégorie personnalisée"]})},N_=[{id:"bois-massif",nom:"Bois massif",couleur:"#8B4513",pourcentage:20},{id:"panneau",nom:"Panneau",couleur:"#D2691E",pourcentage:15},{id:"quincaillerie",nom:"Quincaillerie",couleur:"#708090",pourcentage:10},{id:"peinture",nom:"Peinture",couleur:"#FF6347",pourcentage:8},{id:"vernis",nom:"Vernis",couleur:"#DAA520",pourcentage:7},{id:"colle",nom:"Colle",couleur:"#FFD700",pourcentage:5},{id:"visserie",nom:"Visserie",couleur:"#C0C0C0",pourcentage:5},{id:"abrasifs",nom:"Abrasifs",couleur:"#F4A460",pourcentage:3},{id:"divers",nom:"Divers",couleur:"#9370DB",pourcentage:27}],wQ=30,Met=t=>{const[e,r]=y.useState(null),[n,a]=y.useState([]),[i,o]=y.useState(0),[l,c]=y.useState(0),[u,d]=y.useState([]),[f,A]=y.useState(null),[h,m]=y.useState(wQ),p=()=>{try{const F=localStorage.getItem("categoriesPersonnalisees");F&&d(JSON.parse(F))}catch(F){console.error("Erreur lors du chargement des catégories personnalisées:",F)}},g=F=>{try{localStorage.setItem("categoriesPersonnalisees",JSON.stringify(F))}catch(M){console.error("Erreur lors de la sauvegarde des catégories personnalisées:",M)}},x=async()=>{var F;try{console.log("🔄 Chargement des données pour affaire ID:",t);const[M,R]=await Promise.all([Fh(()=>Promise.resolve().then(()=>x6),void 0,import.meta.url).then(H=>H.affairesService.getAffaireById(t)),Fh(()=>Promise.resolve().then(()=>x6),void 0,import.meta.url).then(H=>H.affairesService.getFinancialSituation(t))]);console.log("📊 Réponse affaire:",M),console.log("💰 Réponse financière complète:",R);const U=M.data||M;r(U);const z=((F=R.devis)==null?void 0:F.totalValides)||0,Q=35e3;o(Q),console.log("✅ Données affaire chargées:",U),console.log("💵 Montant API des devis validés:",z),console.log("💵 Montant TEST forcé:",Q),console.log("📋 Structure devis dans la réponse:",R.devis),await v()}catch(M){console.error("❌ Erreur lors du chargement:",M),console.error("❌ Détails de l'erreur:",M.message,M.stack),r({id:t,numero:"Affaire inconnue",libelle:"Données non disponibles",client:"Client inconnu"}),o(0)}},v=async()=>{try{const F=await gY(t);F?(a(F.categoriesActives||[]),m(F.pourcentageBudgetAchats||wQ),console.log("Estimation chargée depuis le backend:",F)):a([{id:"bois-massif",nom:"Bois massif",couleur:"#8B4513",pourcentage:20},{id:"panneau",nom:"Panneau",couleur:"#D2691E",pourcentage:15}])}catch(F){console.error("Erreur lors du chargement de l'estimation:",F),a([{id:"bois-massif",nom:"Bois massif",couleur:"#8B4513",pourcentage:20},{id:"panneau",nom:"Panneau",couleur:"#D2691E",pourcentage:15}])}},b=async()=>{try{const F={affaireId:t,categoriesActives:n,pourcentageBudgetAchats:h,montantEstimationAchats:l,totalPourcentage:D,dateModification:new Date().toISOString()};return await pY(t,F),ve.success("Estimation sauvegardée avec succès !"),!0}catch(F){return console.error("Erreur lors de la sauvegarde:",F),ve.error("Erreur lors de la sauvegarde de l'estimation"),!1}},C=F=>{console.log("=== AJOUT CATEGORIE ==="),console.log("Catégorie à ajouter:",F.nom,F.id),a(M=>{console.log("Catégories actives AVANT:",M.map(U=>`${U.nom} (${U.id})`));const R=M.find(U=>U.id===F.id);if(console.log("Catégorie existante trouvée:",R?R.nom:"NON"),R)return console.log("Catégorie déjà présente, ignorée"),M;{const U={id:F.id,nom:F.nom,couleur:F.couleur,pourcentage:F.pourcentage,_timestamp:Date.now()},z=[...M,U];return console.log("Nouvelles catégories actives APRÈS:",z.map(Q=>`${Q.nom} (${Q.id})`)),console.log("Nombre de catégories:",z.length),z}}),console.log("=== FIN AJOUT CATEGORIE ===")},j=F=>{console.log("=== RETRAIT CATEGORIE ==="),console.log("Catégorie à retirer:",F.nom,F.id),console.log("Catégories actives AVANT:",n.map(R=>`${R.nom} (${R.id})`));const M=typeof F=="object"?F.id:F;a(R=>{const U=R.filter(z=>z.id!==M);return console.log("Catégories actives APRÈS:",U.map(z=>`${z.nom} (${z.id})`)),U}),console.log("=== FIN RETRAIT CATEGORIE ===")},w=(F,M)=>{if(console.log("=== MODIFICATION POURCENTAGE ==="),console.log("ID:",F,"Nouveau pourcentage:",M),a(n.map(U=>U.id===F?{...U,pourcentage:M}:U)),u.find(U=>U.id===F)){const U=u.map(z=>z.id===F?{...z,pourcentage:M}:z);d(U),g(U)}console.log("=== FIN MODIFICATION POURCENTAGE ===")},N=F=>{console.log("=== CRÉATION CATÉGORIE PERSONNALISÉE ==="),console.log("Nouvelle catégorie:",F);const M=[...u,F];d(M),g(M),console.log("Catégories personnalisées mises à jour:",M.length),console.log("=== FIN CRÉATION CATÉGORIE PERSONNALISÉE ===")},E=F=>{console.log("=== SUPPRESSION CATÉGORIE PERSONNALISÉE ==="),console.log("ID à supprimer:",F),a(R=>R.filter(U=>U.id!==F));const M=u.filter(R=>R.id!==F);d(M),g(M),console.log("=== FIN SUPPRESSION CATÉGORIE PERSONNALISÉE ===")};y.useEffect(()=>{c(Math.round(i*(h/100)))},[i,h]);const _=async()=>{await x()};y.useEffect(()=>{x(),p()},[t]),y.useEffect(()=>{const F=R=>{const{affaireId:U}=R.detail;U===t&&(console.log("🔄 Rafraîchissement automatique de l'estimation suite à une action BDC"),x())},M=R=>{const{affaireId:U}=R.detail;U===t&&(console.log("🔄 Rafraîchissement automatique de l'estimation suite à une action devis"),x())};return window.addEventListener("bdc_updated",F),window.addEventListener("devis_updated",M),window.addEventListener("affaire_updated",M),()=>{window.removeEventListener("bdc_updated",F),window.removeEventListener("devis_updated",M),window.removeEventListener("affaire_updated",M)}},[t]);const k=[...N_,...u],D=n.reduce((F,M)=>F+M.pourcentage,0),S=Math.max(0,100-D);return{affaire:e,categoriesActives:n,categoriesPersonnalisees:u,editingCategoryId:f,montantTotalDevis:i,montantEstimationAchats:l,pourcentageBudgetAchats:h,toutesLesCategories:k,totalPourcentage:D,pourcentageNonAffecte:S,setEditingCategoryId:A,setPourcentageBudgetAchats:m,ajouterCategorie:C,retirerCategorie:j,modifierPourcentage:w,creerCategoriePersonnalisee:N,supprimerCategoriePersonnalisee:E,sauvegarderEstimation:b,chargerEstimationSauvegardee:v,rafraichirDonnees:_}};hp.register(xh,YE,KE);const Ha=t=>typeof window>"u"?"#000":getComputedStyle(document.documentElement).getPropertyValue(t).trim(),Let=({children:t,onDrop:e,categoriesActives:r,themeColors:n})=>{const[{isOver:a},i]=vet(()=>({accept:Hte,drop:o=>{console.log("Item droppé:",o.categorie.nom,o.categorie.id),console.log("Catégories actives dans drop zone:",r.map(l=>`${l.nom} (${l.id})`)),e(o.categorie)},collect:o=>({isOver:o.isOver()})}));return s.jsxs("div",{ref:i,className:"relative p-8 rounded-xl border-4 border-dashed transition-all duration-200",style:{backgroundColor:a?n.primary100:n.secondary50,borderColor:a?n.primary400:n.secondary300},children:[t,a&&s.jsx("div",{className:"absolute inset-0 bg-opacity-50 rounded-xl flex items-center justify-center",style:{backgroundColor:n.primary200_a50},children:s.jsx("div",{className:"font-semibold text-lg",style:{color:n.primary600},children:"Déposez la catégorie ici"})})]})},Uet=()=>{const{id:t}=Ka(),[e,r]=y.useState({});y.useEffect(()=>{const E={primary100:Ha("--primary-100"),primary200_a50:Ha("--primary-200")+"80",primary400:Ha("--primary-400"),primary500:Ha("--primary-500"),primary600:Ha("--primary-600"),primary700:Ha("--primary-700"),primary800:Ha("--primary-800"),primary900:Ha("--primary-900"),secondary50:Ha("--secondary-50"),secondary100:Ha("--secondary-100"),secondary200:Ha("--secondary-200"),secondary300:Ha("--secondary-300"),secondary400:Ha("--secondary-400"),secondary500:Ha("--secondary-500"),secondary600:Ha("--secondary-600"),secondary700:Ha("--secondary-700"),secondary800:Ha("--secondary-800"),textOnPrimary:"#FFFFFF"};r(E)},[]);const{affaire:n,categoriesActives:a,categoriesPersonnalisees:i,editingCategoryId:o,montantTotalDevis:l,montantEstimationAchats:c,pourcentageBudgetAchats:u,toutesLesCategories:d,totalPourcentage:f,pourcentageNonAffecte:A,setEditingCategoryId:h,setPourcentageBudgetAchats:m,ajouterCategorie:p,retirerCategorie:g,modifierPourcentage:x,creerCategoriePersonnalisee:v,supprimerCategoriePersonnalisee:b,sauvegarderEstimation:C,rafraichirDonnees:j}=Met(t);console.log("Rendu - Catégories actives:",a.map(E=>`${E.nom} (${E.pourcentage}%)`)),console.log("Total pourcentage:",f);const w={labels:[...a.map(E=>E.nom),...A>0?["Non affecté"]:[]],datasets:[{data:[...a.map(E=>E.pourcentage),...A>0?[A]:[]],backgroundColor:[...a.map((E,_)=>{const k=["primary500","primary700","secondary500","primary400","secondary600","primary600","secondary400"];return e[k[_%k.length]]||E.couleur}),...A>0?[e.secondary300||"#E5E7EB"]:[]],hoverBackgroundColor:[...a.map((E,_)=>{const k=["primary600","primary800","secondary600","primary500","secondary700","primary700","secondary500"];return e[k[_%k.length]]||E.couleur}),...A>0?[e.secondary400||"#9CA3AF"]:[]],borderColor:e.secondary50||"#ffffff",borderWidth:4,hoverBorderColor:e.secondary50||"#ffffff"}]},N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{title:E=>E[0].label,label:E=>{const _=E.raw,k=E.chart.getDatasetMeta(0).total;return` ${(_/k*100).toFixed(2)}% (${(c*_/100).toFixed(0)}€)`},labelTextColor:()=>e.textOnPrimary},backgroundColor:e.secondary800||"rgba(0,0,0,0.8)",titleFont:{size:16,weight:"bold"},titleColor:e.textOnPrimary,bodyColor:e.textOnPrimary,borderColor:e.secondary300,borderWidth:1,padding:12,cornerRadius:8}},layout:{padding:{top:60,bottom:60,left:60,right:60}},elements:{arc:{borderWidth:3,borderColor:"#ffffff",hoverBorderWidth:4,hoverBorderColor:"#ffffff"}},animation:{animateRotate:!0,animateScale:!0,duration:1e3,easing:"easeInOutQuart"}};return n?s.jsx(HZe,{backend:ket,children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Estimation des Achats"}),s.jsxs("div",{className:"text-lg text-gray-600",children:[n.numero," - ",n.libelle," - ",n.client]})]}),s.jsx("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",title:"Actualiser les données des devis",children:"🔄 Actualiser"})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Devis Validés"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[l.toLocaleString(),"€"]}),s.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Dernière mise à jour: ",new Date().toLocaleTimeString()]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"text-sm text-green-600 font-medium flex items-center gap-2",children:["Budget Achats (",s.jsx("input",{type:"number",min:"1",max:"100",value:u,onChange:E=>m(parseInt(E.target.value)||30),className:"w-12 px-1 py-0.5 text-center border border-green-300 rounded text-green-700 bg-white focus:ring-2 focus:ring-green-500 focus:border-green-500"}),"%)"]}),s.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[c.toLocaleString(),"€"]})]}),s.jsxs("div",{className:`p-4 rounded-lg ${f===100?"bg-green-50":"bg-orange-50"}`,children:[s.jsx("div",{className:`text-sm font-medium ${f===100?"text-green-600":"text-orange-600"}`,children:"Répartition"}),s.jsxs("div",{className:`text-2xl font-bold ${f===100?"text-green-900":"text-orange-900"}`,children:[f,"%"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Catégories d'Achats"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Glissez les catégories dans le camembert pour créer votre estimation"}),s.jsx("div",{className:"mb-6",children:s.jsx(Ret,{onCreateCategory:v,categoriesExistantes:d})}),N_.filter(E=>!a.find(_=>_.id===E.id)).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Catégories prédéfinies"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:N_.filter(E=>!a.find(_=>_.id===E.id)).map(E=>s.jsx(YT,{categorie:E,isInChart:!1,editingCategoryId:o,setEditingCategoryId:h,montantEstimationAchats:c},E.id))})]}),i.filter(E=>!a.find(_=>_.id===E.id)).length>0&&s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-700 uppercase tracking-wide",children:"Catégories personnalisées"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.filter(E=>!a.find(_=>_.id===E.id)).map(E=>s.jsx(YT,{categorie:E,isInChart:!1,onDelete:b,editingCategoryId:o,setEditingCategoryId:h,montantEstimationAchats:c},E.id))})]}),a.length>0&&s.jsxs("div",{className:"space-y-2 mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-700 uppercase tracking-wide",children:"Dans le camembert"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:a.map(E=>s.jsx(YT,{categorie:E,isInChart:!0,onRemove:g,onUpdatePercentage:x,editingCategoryId:o,setEditingCategoryId:h,montantEstimationAchats:c},`${E.id}-${E._timestamp||0}`))})]})]})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx(Let,{onDrop:p,categoriesActives:a,themeColors:e,children:s.jsxs("div",{className:"relative w-full max-w-2xl mx-auto",style:{height:"500px"},children:[s.jsx(NJe,{data:w,options:N}),s.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none",children:[s.jsx("p",{className:"text-xl font-bold",style:{color:e.secondary800},children:"Total Estimé"}),s.jsxs("p",{className:"text-4xl font-extrabold",style:{color:e.primary600},children:[c.toFixed(0),"€"]}),s.jsxs("p",{className:"text-sm",style:{color:e.secondary600},children:["soit ",f.toFixed(1),"% du budget"]})]})]})}),s.jsx("div",{className:"mt-6",children:s.jsx(Fet,{categorieSelectionnee:a.find(E=>E.id===o),onUpdate:x,onDeselect:()=>h(null),montantEstimationAchats:c,totalPourcentage:f})}),f>100&&s.jsx("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-amber-600 mr-2",children:"⚠️"}),s.jsxs("div",{className:"text-amber-800",children:["La répartition totale est de ",f,"%. Ajustez les pourcentages pour atteindre 100%."]})]})})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>window.history.back(),children:"Annuler"}),s.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",disabled:f!==100,onClick:C,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Sauvegarder l'Estimation"]})]})]})}):s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-lg",children:"Chargement..."})})},rF=({isOpen:t,onClose:e,onConfirm:r,title:n="Confirmation requise",message:a="Cette action nécessite un mot de passe administrateur.",loading:i=!1})=>{const[o,l]=y.useState(""),[c,u]=y.useState(""),d=A=>{if(A.preventDefault(),!o.trim()){u("Le mot de passe est requis");return}u(""),r(o)},f=()=>{l(""),u(""),e()};return s.jsx(Uw,{open:t,onOpenChange:f,children:s.jsxs($w,{className:"sm:max-w-md",children:[s.jsx(Hw,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900/30",children:s.jsx(wu,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx(Qw,{className:"text-lg font-semibold",children:n}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a})]})]})}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(jr,{htmlFor:"password",className:"flex items-center gap-2",children:[s.jsx(lz,{className:"h-4 w-4"}),"Mot de passe administrateur"]}),s.jsx(Ur,{id:"password",type:"password",value:o,onChange:A=>l(A.target.value),placeholder:"Saisissez le mot de passe",className:c?"border-red-500":"",disabled:i,autoFocus:!0}),c&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})]}),s.jsxs(zE,{className:"gap-2",children:[s.jsx(Xe,{type:"button",variant:"outline",onClick:f,disabled:i,children:"Annuler"}),s.jsx(Xe,{type:"submit",variant:"destructive",disabled:i,className:"min-w-[100px]",children:i?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),s.jsx("span",{children:"Suppression..."})]}):"Confirmer"})]})]})]})})},$et=({affaireId:t,onBdcChanged:e})=>{console.log("🚨 [COMPOSANT ACTIF] AffaireBdc.jsx est utilisé avec affaireId:",t);const[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState(!0),[d,f]=y.useState(!1),[A,h]=y.useState(!1),[m,p]=y.useState(null),[g,x]=y.useState(!1),[v,b]=y.useState(null),[C,j]=y.useState(!1),w=Fl({initialValues:{fournisseur:"",montantHt:0,dateBdc:new Date,dateLivraison:null,categorieId:"",commentaire:""},validate:{fournisseur:re=>re?null:"Le fournisseur est obligatoire",montantHt:re=>!re||re<=0?"Le montant HT doit être supérieur à 0":null,categorieId:re=>re?null:"La catégorie est obligatoire"}});y.useEffect(()=>{Promise.all([N(),E(),_()])},[t]);const N=async()=>{try{u(!0);const re=await sp({affaireId:t});let fe=[];re!=null&&re.bdc?fe=re.bdc:re!=null&&re.bdcs?fe=re.bdcs:Array.isArray(re)&&(fe=re),n(fe)}catch(re){console.error("Erreur lors du chargement des BDC:",re),ve.error("Erreur lors du chargement des bons de commande")}finally{u(!1)}},E=async()=>{try{const re=await ay();i(re||[])}catch(re){console.error("Erreur lors du chargement des catégories:",re)}},_=async()=>{try{const re=await Pw();l(re||[])}catch(re){console.error("Erreur lors du chargement des fournisseurs:",re)}},k=async re=>{try{f(!0);const fe={montantHt:parseFloat(re.montantHt),dateBdc:re.dateBdc,affaireId:t,categorieId:re.categorieId,fournisseur:re.fournisseur,commentaire:re.commentaire||""};m?(await gb(m.id,fe),ve.success("Bon de commande modifié avec succès")):(await z2(fe),ve.success("Bon de commande créé avec succès")),N(),e&&e(),H()}catch(fe){console.error("Erreur lors de la création/modification du BDC:",fe),ve.error("Erreur lors de la sauvegarde")}finally{f(!1)}},D=re=>{p(re),w.setValues({fournisseur:re.fournisseur,montantHt:re.montantHt,dateBdc:new Date(re.dateBdc),dateLivraison:re.dateLivraison?new Date(re.dateLivraison):null,categorieId:re.categorieId,commentaire:re.commentaire||""}),h(!0)},S=async re=>{const fe=r.find(G=>G.id===re);fe&&fe.statut==="VALIDE"?(b(re),x(!0)):window.confirm("Êtes-vous sûr de vouloir supprimer ce bon de commande ?")&&await F(re)},F=async(re,fe=null)=>{var G,oe;try{j(!0),await sy(re,fe),ve.success("Bon de commande supprimé avec succès"),N(),e&&e()}catch(Se){console.error("Erreur lors de la suppression:",Se),((G=Se.response)==null?void 0:G.status)===400?ve.error("Un mot de passe est requis pour supprimer un BDC validé"):((oe=Se.response)==null?void 0:oe.status)===401?ve.error("Mot de passe incorrect"):ve.error("Erreur lors de la suppression")}finally{j(!1),x(!1),b(null)}},M=re=>{v&&F(v,re)},R=()=>{x(!1),b(null)},U=async re=>{try{await TS(re,new Date),ve.success("Bon de commande réceptionné"),N(),e&&e()}catch(fe){console.error("Erreur lors de la réception:",fe),ve.error("Erreur lors de la réception")}},z=async re=>{try{await DS(re),ve.success("Bon de commande validé"),N(),e&&e()}catch(fe){console.error("Erreur lors de la validation:",fe),ve.error("Erreur lors de la validation")}},Q=async re=>{if(window.confirm("Êtes-vous sûr de vouloir annuler ce bon de commande ?"))try{await qk(re),ve.success("Bon de commande annulé"),N(),e&&e()}catch(fe){console.error("Erreur lors de l'annulation:",fe),ve.error("Erreur lors de l'annulation")}},H=()=>{h(!1),p(null),w.reset()},q=async re=>{try{if(re.firebaseDownloadUrl){const fe=await fetch(re.firebaseDownloadUrl);if(!fe.ok)throw new Error("Erreur lors du téléchargement depuis Firebase");const G=await fe.blob(),oe=window.URL.createObjectURL(G),Se=document.createElement("a");Se.href=oe;const ge=re.nomFichier||`${re.numero}.pdf`;Se.setAttribute("download",ge),document.body.appendChild(Se),Se.click(),window.URL.revokeObjectURL(oe),document.body.removeChild(Se),ve.success(`PDF ${ge} téléchargé avec succès`)}else await Dq(re.id),ve.success(`PDF du BDC ${re.numero} téléchargé avec succès`)}catch(fe){console.error("Erreur lors du téléchargement du PDF:",fe),ve.error("Erreur lors du téléchargement du PDF")}},X=re=>re.dateReception?"green":{EN_ATTENTE:"orange",VALIDE:"blue",RECEPTIONNE:"green",ANNULE:"red"}[re.statut]||"orange",$=re=>re.dateReception?"Réceptionné":{EN_ATTENTE:"En attente",VALIDE:"Validé",RECEPTIONNE:"Réceptionné",ANNULE:"Annulé"}[re.statut]||"En attente",K=re=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(re),se=re=>new Date(re).toLocaleDateString("fr-FR"),Z=r.reduce((re,fe)=>re+fe.montantHt,0),ie=r.filter(re=>re.dateReception||re.statut==="RECEPTIONNE"),ee=ie.reduce((re,fe)=>re+fe.montantHt,0),ue=a.find(re=>re.id===w.values.categorieId),ae=ue&&w.values.montantHt?w.values.montantHt*ue.pourcentageFg/100:0;return s.jsxs(s.Fragment,{children:[s.jsx(Hr,{children:s.jsxs(ps,{gap:"md",children:[s.jsxs(Bt,{justify:"space-between",children:[s.jsx(Kr,{order:4,children:"Bons de commande"}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:16}),onClick:()=>h(!0),children:"Nouveau BDC"})]}),s.jsx(Ia,{icon:s.jsx(Io,{size:16}),color:"blue",children:"Bons de commande pour cette affaire : commandes auprès des fournisseurs."}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Total BDC"}),s.jsx(He,{size:"xl",fw:700,children:K(Z)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[r.length," bon(s)"]})]})}),s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"BDC réceptionnés"}),s.jsx(He,{size:"xl",fw:700,c:"green",children:K(ee)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[ie.length," bon(s)"]})]})}),s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"En attente"}),s.jsx(He,{size:"xl",fw:700,c:"orange",children:K(Z-ee)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[r.length-ie.length," bon(s)"]})]})})]}),s.jsx(to,{visible:c}),r.length===0&&!c?s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),color:"gray",children:"Aucun bon de commande pour cette affaire."}):s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"N° BDC"}),s.jsx(Ye.Th,{children:"Fournisseur"}),s.jsx(Ye.Th,{children:"Date"}),s.jsx(Ye.Th,{children:"Livraison"}),s.jsx(Ye.Th,{children:"Catégorie"}),s.jsx(Ye.Th,{children:"Montant HT"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:r.map(re=>{const fe=a.find(G=>G.id===re.categorieId);return console.log(`BDC ${re.numero}:`,{statut:re.statut,dateReception:re.dateReception,statusType:typeof re.statut}),s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:s.jsx(He,{fw:500,children:re.numero})}),s.jsx(Ye.Td,{children:s.jsx(He,{truncate:!0,style:{maxWidth:"150px"},children:re.fournisseur})}),s.jsx(Ye.Td,{children:se(re.dateBdc)}),s.jsx(Ye.Td,{children:re.dateLivraison?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(He,{size:"sm",children:bO(re.dateLivraison)}),(()=>{const G=mY(re.dateLivraison);return s.jsx("span",{className:`px-1 py-0.5 text-xs font-bold rounded-full border ${G.badge} text-center`,children:G.text})})()]}):s.jsx(He,{size:"sm",c:"dimmed",children:"-"})}),s.jsx(Ye.Td,{children:s.jsx(bn,{variant:"light",color:"blue",children:(fe==null?void 0:fe.intitule)||"Non définie"})}),s.jsx(Ye.Td,{children:s.jsx(He,{fw:500,children:K(re.montantHt)})}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:X(re),children:$(re)})}),s.jsx(Ye.Td,{children:s.jsxs(Bt,{gap:"xs",children:[console.log(`🔍 [BDC Actions] ${re.numero}:`,{statut:re.statut,statutType:typeof re.statut,dateReception:re.dateReception,condition1:re.statut==="EN_ATTENTE",condition2:!re.dateReception,shouldShowButtons:re.statut==="EN_ATTENTE"||!re.dateReception}),!re.dateReception&&s.jsxs(s.Fragment,{children:[s.jsx(Ai,{label:"Valider",children:s.jsx(Dn,{size:"sm",color:"blue",variant:"light",onClick:()=>z(re.id),children:s.jsx(Gr,{size:14})})}),s.jsx(Ai,{label:"Annuler",children:s.jsx(Dn,{size:"sm",color:"red",variant:"light",onClick:()=>Q(re.id),children:s.jsx(ls,{size:14})})})]}),re.statut==="VALIDE"&&!re.dateReception&&s.jsx(Ai,{label:"Réceptionner",children:s.jsx(Dn,{size:"sm",color:"green",variant:"light",onClick:()=>U(re.id),children:s.jsx(Gr,{size:14})})}),s.jsx(Ai,{label:"Télécharger PDF",children:s.jsx(Dn,{size:"sm",color:"green",variant:"light",onClick:()=>q(re),children:s.jsx(Va,{size:14})})}),s.jsx(Ai,{label:"Modifier",children:s.jsx(Dn,{size:"sm",color:"blue",variant:"light",onClick:()=>D(re),children:s.jsx(Po,{size:14})})}),s.jsx(Ai,{label:"Supprimer",children:s.jsx(Dn,{size:"sm",color:"red",variant:"light",onClick:()=>S(re.id),children:s.jsx(Zn,{size:14})})})]})})]},re.id)})})]})]})}),s.jsx(fa,{opened:A,onClose:H,title:s.jsxs(Bt,{children:[s.jsx(zi,{size:20}),s.jsx(He,{fw:500,children:m?"Modifier le bon de commande":"Nouveau bon de commande"})]}),size:"lg",children:s.jsx("form",{onSubmit:w.onSubmit(k),children:s.jsxs(ps,{gap:"md",children:[s.jsx(Ia,{icon:s.jsx(Io,{size:16}),color:"blue",children:m?"Modifiez les informations du bon de commande.":"Le numéro de BDC sera généré automatiquement au format : BDC-YYYY-XXX"}),m&&s.jsxs("div",{children:[s.jsx(He,{size:"sm",fw:500,mb:4,children:"Numéro de BDC"}),s.jsx("div",{style:{padding:8,backgroundColor:"var(--mantine-color-gray-0)",border:"1px solid var(--mantine-color-gray-3)",borderRadius:4,fontFamily:"monospace",color:"var(--mantine-color-gray-7)"},children:m.numero})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Fournisseur",placeholder:"Sélectionner un fournisseur",required:!0,searchable:!0,clearable:!0,data:(o==null?void 0:o.map(re=>({value:re.nom,label:re.nom,description:[re.categorie?`Catégorie: ${re.categorie}`:null,re.contact?`Contact: ${re.contact}`:null].filter(Boolean).join(" • ")})))||[],...w.getInputProps("fournisseur"),onChange:re=>{if(console.log("🔄 [AFFAIRE-BDC] Changement de fournisseur:",re),console.log("🔄 [AFFAIRE-BDC] Fournisseurs disponibles:",(o==null?void 0:o.length)||0),console.log("🔄 [AFFAIRE-BDC] Catégories disponibles:",(a==null?void 0:a.length)||0),w.setFieldValue("fournisseur",re),re&&o&&a){const fe=o.find(G=>G.nom===re);if(console.log("🏢 [AFFAIRE-BDC] Fournisseur trouvé:",fe),fe)try{const G=vO(fe,a);console.log("🎯 [AFFAIRE-BDC] Catégorie ID trouvée:",G),G?(w.setFieldValue("categorieId",G),ve.success(`Catégorie automatiquement sélectionnée : ${fe.categorie}`),console.log("✅ [AFFAIRE-BDC] Catégorie auto-sélectionnée avec succès")):(console.log("❌ [AFFAIRE-BDC] Aucune catégorie trouvée pour ce fournisseur"),ve.info(`Aucune catégorie automatique trouvée pour ${fe.nom}`))}catch(G){console.error("❌ [AFFAIRE-BDC] Erreur lors de la recherche de catégorie:",G)}else console.log("❌ [AFFAIRE-BDC] Fournisseur non trouvé dans la liste")}else console.log("⚠️ [AFFAIRE-BDC] Données manquantes pour l'auto-sélection")}})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Catégorie d'achat",placeholder:"Sélectionner une catégorie",required:!0,data:a.map(re=>({value:re.id,label:re.intitule})),...w.getInputProps("categorieId")})})]}),s.jsxs(tt,{children:[s.jsxs(tt.Col,{span:6,children:[s.jsx(Hi,{label:"Montant HT",placeholder:"0.00",required:!0,min:0,step:.01,decimalScale:2,fixedDecimalScale:!0,suffix:" €",...w.getInputProps("montantHt")}),ue&&s.jsxs(He,{size:"xs",c:"dimmed",mt:5,children:["Frais généraux (",ue.pourcentageFg,"%) : ",K(ae)]})]}),s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date du BDC",placeholder:"Sélectionner la date",required:!0,...w.getInputProps("dateBdc")})})]}),s.jsx(ko,{label:"Date de livraison prévue",placeholder:"Sélectionner la date de livraison",description:"📅 Date à laquelle vous souhaitez recevoir la commande",minDate:new Date,styles:{input:{borderColor:w.values.dateLivraison&&new Date(w.values.dateLivraison).toDateString()===new Date().toDateString()?"#f59e0b":void 0,borderWidth:w.values.dateLivraison&&new Date(w.values.dateLivraison).toDateString()===new Date().toDateString()?"2px":void 0,backgroundColor:w.values.dateLivraison&&new Date(w.values.dateLivraison).toDateString()===new Date().toDateString()?"#fef3c7":void 0}},...w.getInputProps("dateLivraison")}),s.jsx(Pl,{label:"Commentaire",placeholder:"Commentaire optionnel",rows:3,...w.getInputProps("commentaire")}),s.jsx(wi,{}),s.jsxs(Bt,{justify:"flex-end",children:[s.jsx(rr,{variant:"light",onClick:H,children:"Annuler"}),s.jsx(rr,{type:"submit",loading:d,children:m?"Modifier":"Créer"})]})]})})}),s.jsx(rF,{isOpen:g,onClose:R,onConfirm:M,title:"Suppression d'un BDC validé",message:"Ce bon de commande est validé. Un mot de passe administrateur est requis pour le supprimer.",loading:C})]})},Het=({affaireId:t,onAchatChanged:e})=>{const[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[A,h]=y.useState(null),m=Fl({initialValues:{fournisseur:"",montantHt:0,dateFacture:new Date,dateEcheance:null,categorieId:"",description:"",statut:"RECU"},validate:{fournisseur:R=>R?null:"Le fournisseur est obligatoire",montantHt:R=>!R||R<=0?"Le montant HT doit être supérieur à 0":null,dateFacture:R=>R?null:"La date de facture est obligatoire",categorieId:R=>R?null:"La catégorie est obligatoire"}});y.useEffect(()=>{Promise.all([p(),g()])},[t]);const p=async()=>{try{l(!0);const R=await Sx({affaireId:t}),U=(R==null?void 0:R.achats)||[];n(U)}catch(R){console.error("Erreur lors du chargement des achats:",R),ve.error("Erreur lors du chargement des achats")}finally{l(!1)}},g=async()=>{try{const R=await BS();i(R||[])}catch(R){console.error("Erreur lors du chargement des catégories:",R)}},x=async R=>{try{u(!0);const U=R.montantHt*1.2,z={montantHt:parseFloat(R.montantHt),montantTtc:U,dateFacture:R.dateFacture,affaireId:t,categorieId:R.categorieId,fournisseur:R.fournisseur,commentaire:R.description||""};if(A)await em(A.id,z),ve.success("Facture d'achat modifiée avec succès"),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"update",factureId:A.id}}));else{const Q=await _S(z);ve.success("Facture d'achat créée avec succès"),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"create",factureId:Q.id}}))}p(),e&&e(),j()}catch(U){console.error("Erreur lors de la création/modification de l'achat:",U),ve.error("Erreur lors de la sauvegarde")}finally{u(!1)}},v=R=>{h(R),m.setValues({fournisseur:R.fournisseur,montantHt:R.montantHt,dateFacture:new Date(R.dateFacture),dateEcheance:R.dateEcheance?new Date(R.dateEcheance):null,categorieId:R.categorieId,description:R.commentaire||"",statut:R.statut}),f(!0)},b=async R=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette facture d'achat ?"))try{await Kk(R),ve.success("Facture d'achat supprimée avec succès"),p(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"delete",factureId:R}})),e&&e()}catch(U){console.error("Erreur lors de la suppression:",U),ve.error("Erreur lors de la suppression")}},C=async R=>{try{await Tq(R),ve.success("Facture d'achat validée"),p(),window.dispatchEvent(new CustomEvent("achat_updated",{detail:{affaireId:t,action:"validate",factureId:R}})),e&&e()}catch(U){console.error("Erreur lors de la validation:",U),ve.error("Erreur lors de la validation")}},j=()=>{f(!1),h(null),m.reset()},w=R=>{switch(R){case"RECU":return"blue";case"VALIDE":return"green";case"PAYE":return"gray";default:return"gray"}},N=R=>{switch(R){case"RECU":return"Reçu";case"VALIDE":return"Validé";case"PAYE":return"Payé";default:return R}},E=R=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(R),_=R=>new Date(R).toLocaleDateString("fr-FR"),k=r.reduce((R,U)=>R+U.montantHt,0),D=r.filter(R=>R.statut==="VALIDE"),S=D.reduce((R,U)=>R+U.montantHt,0),F=a.find(R=>R.id===m.values.categorieId),M=F&&m.values.montantHt?m.values.montantHt*F.pourcentageFg/100:0;return s.jsxs(s.Fragment,{children:[s.jsx(Hr,{children:s.jsxs(ps,{gap:"md",children:[s.jsxs(Bt,{justify:"space-between",children:[s.jsx(Kr,{order:4,children:"Factures d'achats directes"}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:16}),onClick:()=>f(!0),children:"Ajouter une facture"})]}),s.jsx(Ia,{icon:s.jsx(Io,{size:16}),color:"blue",children:"Factures d'achats saisies directement (sans bon de commande préalable) : achats spontanés, bâches, petit matériel, etc."}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Total factures"}),s.jsx(He,{size:"xl",fw:700,children:E(k)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[r.length," facture(s)"]})]})}),s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Factures validées"}),s.jsx(He,{size:"xl",fw:700,c:"green",children:E(S)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[D.length," facture(s)"]})]})}),s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"En attente"}),s.jsx(He,{size:"xl",fw:700,c:"orange",children:E(k-S)}),s.jsxs(He,{size:"xs",c:"dimmed",children:[r.length-D.length," facture(s)"]})]})})]}),s.jsx(to,{visible:o}),r.length===0&&!o?s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),color:"gray",children:"Aucune facture d'achat pour cette affaire."}):s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"N° Facture"}),s.jsx(Ye.Th,{children:"Fournisseur"}),s.jsx(Ye.Th,{children:"Date"}),s.jsx(Ye.Th,{children:"Catégorie"}),s.jsx(Ye.Th,{children:"Montant HT"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:r.map(R=>{const U=a.find(z=>z.id===R.categorieId);return s.jsxs(Ye.Tr,{children:[s.jsxs(Ye.Td,{children:[s.jsx(He,{fw:500,children:R.numeroFacture}),s.jsx(He,{size:"xs",c:"dimmed",children:R.numero})]}),s.jsx(Ye.Td,{children:R.fournisseur}),s.jsx(Ye.Td,{children:_(R.dateFacture)}),s.jsx(Ye.Td,{children:s.jsx(bn,{variant:"light",color:"blue",children:(U==null?void 0:U.intitule)||"Non définie"})}),s.jsx(Ye.Td,{children:s.jsx(He,{fw:500,children:E(R.montantHt)})}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:w(R.statut),children:N(R.statut)})}),s.jsx(Ye.Td,{children:s.jsxs(Bt,{gap:"xs",children:[R.statut==="RECU"&&s.jsx(Dn,{size:"sm",color:"green",variant:"light",onClick:()=>C(R.id),children:s.jsx(Gr,{size:14})}),s.jsx(Dn,{size:"sm",color:"blue",variant:"light",onClick:()=>v(R),children:s.jsx(Po,{size:14})}),s.jsx(Dn,{size:"sm",color:"red",variant:"light",onClick:()=>b(R.id),children:s.jsx(Zn,{size:14})})]})})]},R.id)})})]})]})}),s.jsx(fa,{opened:d,onClose:j,title:s.jsxs(Bt,{children:[s.jsx(mu,{size:20}),s.jsx(He,{fw:500,children:A?"Modifier la facture d'achat":"Nouvelle facture d'achat"})]}),size:"lg",children:s.jsx("form",{onSubmit:m.onSubmit(x),children:s.jsxs(ps,{gap:"md",children:[s.jsx(Ia,{icon:s.jsx(Io,{size:16}),color:"blue",children:A?`Pour les achats avec bon de commande, utilisez l'onglet "Bons de commande".`:"Le numéro de facture sera généré automatiquement au format : FACT-YYYY-XXX"}),A&&s.jsxs("div",{children:[s.jsx(He,{size:"sm",fw:500,mb:4,children:"Numéro de facture"}),s.jsx("div",{style:{padding:8,backgroundColor:"var(--mantine-color-gray-0)",border:"1px solid var(--mantine-color-gray-3)",borderRadius:4,fontFamily:"monospace",color:"var(--mantine-color-gray-7)"},children:A.numeroFacture}),s.jsxs(He,{size:"xs",c:"dimmed",mt:4,children:["Numéro interne : ",A.numero]})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Fournisseur",placeholder:"Nom du fournisseur",required:!0,...m.getInputProps("fournisseur")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Catégorie d'achat",placeholder:"Sélectionner une catégorie",required:!0,data:a.map(R=>({value:R.id,label:R.intitule})),...m.getInputProps("categorieId")})})]}),s.jsx(tt,{children:s.jsxs(tt.Col,{span:6,children:[s.jsx(Hi,{label:"Montant HT",placeholder:"0.00",required:!0,min:0,step:.01,decimalScale:2,fixedDecimalScale:!0,suffix:" €",...m.getInputProps("montantHt")}),F&&s.jsxs(He,{size:"xs",c:"dimmed",mt:5,children:["Frais généraux (",F.pourcentageFg,"%) : ",E(M)]})]})}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date de facture",placeholder:"Sélectionner la date",required:!0,...m.getInputProps("dateFacture")})}),s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date d'échéance",placeholder:"Optionnelle",...m.getInputProps("dateEcheance")})})]}),s.jsx(Wr,{label:"Statut",data:[{value:"RECU",label:"Reçu"},{value:"VALIDE",label:"Validé"},{value:"PAYE",label:"Payé"}],...m.getInputProps("statut")}),s.jsx(Pl,{label:"Description",placeholder:"Description optionnelle",rows:3,...m.getInputProps("description")}),s.jsx(wi,{}),s.jsxs(Bt,{justify:"flex-end",children:[s.jsx(rr,{variant:"light",onClick:j,children:"Annuler"}),s.jsx(rr,{type:"submit",loading:c,children:A?"Modifier":"Créer"})]})]})})})]})},Qet=()=>{const{id:t}=Ka(),e=Fr(),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,l]=y.useState("estimation-vs-reel");y.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{i(!0);const f=await $n.getAffaireById(t);n(f)}catch(f){console.error("Erreur lors du chargement de l'affaire:",f),ve.error("Erreur lors du chargement de l'affaire"),e("/affaires")}finally{i(!1)}},u=()=>{c()};if(a)return s.jsx(Od,{size:"xl",py:"md",children:s.jsx(to,{visible:!0})});if(!r)return s.jsx(Od,{size:"xl",py:"md",children:s.jsx(Ia,{color:"red",title:"Erreur",children:"Affaire non trouvée"})});const d=[{title:"Affaires",href:"/affaires"},{title:r.libelle,href:`/affaires/${r.id}`},{title:"Gestion des Achats",href:null}].map((f,A)=>s.jsx(qN,{onClick:()=>f.href&&e(f.href),style:{cursor:f.href?"pointer":"default"},children:f.title},A));return s.jsxs(Od,{size:"xl",py:"md",children:[s.jsxs(Bt,{justify:"space-between",mb:"lg",children:[s.jsxs("div",{children:[s.jsx(JP,{mb:"xs",children:d}),s.jsx(Kr,{order:1,children:s.jsxs(Bt,{children:[s.jsx(Nx,{size:32}),"Gestion des Achats"]})})]}),s.jsx(rr,{variant:"outline",leftSection:s.jsx(Ci,{size:16}),onClick:()=>e(`/affaires/${r.id}`),children:"Retour à l'affaire"})]}),s.jsxs(qn,{value:o,onChange:l,children:[s.jsxs(qn.List,{children:[s.jsx(qn.Tab,{value:"estimation-vs-reel",leftSection:s.jsx(yx,{size:16}),children:"Estimation vs Réel"}),s.jsx(qn.Tab,{value:"bons-commande",leftSection:s.jsx(zi,{size:16}),children:"Bons de Commande"}),s.jsx(qn.Tab,{value:"factures-achats",leftSection:s.jsx(mu,{size:16}),children:"Factures d'Achats"})]}),s.jsx(qn.Panel,{value:"estimation-vs-reel",pt:"md",children:s.jsx(YI,{affaire:r,onDataChanged:u})}),s.jsx(qn.Panel,{value:"bons-commande",pt:"md",children:s.jsx($et,{affaireId:r.id,onBdcChanged:u})}),s.jsx(qn.Panel,{value:"factures-achats",pt:"md",children:s.jsx(Het,{affaireId:r.id,onAchatChanged:u})})]})]})},zet=()=>{const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!0),[i,o]=y.useState(null),l=y.useCallback(async()=>{try{a(!0),o(null);const m=await $n.getAffaires({take:1e3,skip:0});console.log("📊 Réponse API complète:",m);const p=m.affaires||m||[];console.log("📊 Affaires extraites:",p),console.log("📊 Nombre total d'affaires:",p.length),p.forEach(x=>{console.log(`- Affaire ${x.numero}: statut=${x.statut}, objectifCaHt=${x.objectifCaHt}`)});const g=await Promise.all(p.map(async x=>{try{const v=await $n.getFinancialSituation(x.id);return{...x,financial:v}}catch(v){return console.error(`Erreur chargement données financières pour ${x.numero}:`,v),x}}));console.log("📊 Affaires chargées:",g.length),console.log("📊 Détail des affaires:",g),r(g)}catch(m){console.error("Erreur lors du chargement des affaires:",m),o("Erreur lors du chargement des données"),ve.error("Erreur lors du chargement des affaires")}finally{a(!1)}},[]);y.useEffect(()=>{l()},[l]);const c=m=>m==null?"0 €":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),u=m=>m?`${Math.round(m)} h`:"0 h",d=m=>!m&&m!==0?"0%":`${Math.round(m)}%`,f=(m,p)=>{const g=p-m,x=g>=0;return s.jsxs("span",{className:x?"text-green-600":"text-red-600",children:[x?"+":"",c(g)]})},A=(m,p)=>{const g=p-m,x=g>=0;return s.jsxs("span",{className:x?"text-green-600":"text-red-600",children:[x?"+":"",u(g)]})},h=(m,p)=>{const g=p-m,x=g>=0;return s.jsxs("span",{className:x?"text-green-600":"text-red-600",children:[x?"+":"",d(g)]})};return n?s.jsx("div",{className:"p-8 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"p-6 bg-stone-50 min-h-screen",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Xe,{variant:"ghost",onClick:()=>t("/affaires"),className:"text-stone-600 hover:text-stone-800",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-stone-800",children:"Résultats Affaires"}),s.jsx("p",{className:"text-stone-600",children:"Vue condensée des objectifs, réalisations et écarts"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Xe,{onClick:l,variant:"outline",className:"bg-white",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Actualiser"]}),s.jsxs(Xe,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[s.jsx(u0e,{className:"w-4 h-4 mr-2"}),"Exporter Excel"]})]})]}),s.jsx(Kt,{className:"overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsxs("thead",{className:"bg-stone-100 border-b-2 border-stone-300",children:[s.jsxs("tr",{children:[s.jsx("th",{colSpan:"4",className:"text-center py-2 px-1 border-r-2 border-stone-300 bg-stone-200",children:"AFFAIRE"}),s.jsx("th",{colSpan:"5",className:"text-center py-2 px-1 border-r-2 border-stone-300 bg-pink-100",children:"OBJECTIFS & RÉSULTATS ACHATS"}),s.jsx("th",{colSpan:"4",className:"text-center py-2 px-1 border-r-2 border-stone-300 bg-yellow-100",children:"OBJECTIFS & RÉSULTATS HEURES"}),s.jsx("th",{colSpan:"6",className:"text-center py-2 px-1 bg-orange-100",children:"TAUX"})]}),s.jsxs("tr",{className:"text-[10px]",children:[s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"N°"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"NOM AFFAIRE"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"MONTANT HT"}),s.jsx("th",{className:"py-2 px-1 border-r-2 border-stone-300 font-medium",children:"POSTE"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"BOIS"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"QUINC"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"AUTRES"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium bg-pink-50",children:"TOTAL ACHATS"}),s.jsx("th",{className:"py-2 px-1 border-r-2 border-stone-300 font-medium",children:"%"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"FAB"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"POSE"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium bg-yellow-50",children:"TOTAL H"}),s.jsx("th",{className:"py-2 px-1 border-r-2 border-stone-300 font-medium",children:"COÛT MO"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"FG %"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"FG €"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"MARGE €"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium",children:"MARGE %"}),s.jsx("th",{className:"py-2 px-1 border-r border-stone-200 font-medium bg-orange-50",children:"FG+MARGE €"}),s.jsx("th",{className:"py-2 px-1 font-medium",children:"FG+MARGE %"})]})]}),s.jsx("tbody",{children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"19",className:"text-center py-8 text-stone-500",children:s.jsxs("div",{children:[s.jsx(Do,{className:"w-12 h-12 mx-auto mb-2 text-stone-300"}),s.jsx("p",{className:"font-medium",children:"Aucune affaire trouvée"}),s.jsx("p",{className:"text-sm mt-1",children:"Créez des affaires avec des montants et des estimations pour voir les résultats"})]})})}):e.map((m,p)=>{var K,se,Z,ie,ee,ue,ae,re,fe;console.log(`🔍 Affaire ${m.numero} - Propriétés complètes:`,m);const g=m.financial||{};console.log(`💰 Données financières pour ${m.numero}:`,g);const x=m.objectifCaHt||m.objectif_ca_ht||m.montant_devis_ht||0,v=((K=g.devis)==null?void 0:K.totalValides)||m.caReelHt||m.ca_reel_ht||0,b=m.objectifAchatHt||m.objectif_achat_ht||0,C=(((se=g.achats)==null?void 0:se.totalValides)||0)+(((Z=g.bdc)==null?void 0:Z.totalReceptionnes)||0)||m.achatReelHt||m.achat_reel_ht||0,j=x>0?b/x*100:0,w=v>0?C/v*100:0,N=m.objectifHeuresFab||m.objectif_heures_fab||0,E=m.objectifHeuresPose||m.objectif_heures_pose||0,_=((ee=(ie=g.planning)==null?void 0:ie.heuresParType)==null?void 0:ee.FAB)||m.heuresReellesFab||m.heures_reelles_fab||0,k=((ae=(ue=g.planning)==null?void 0:ue.heuresParType)==null?void 0:ae.POSE)||m.heuresReellesPose||m.heures_reelles_pose||0,D=30,S=x*.3,F=((re=g.fraisGeneraux)==null?void 0:re.montantReel)||v*.12,M=v>0?F/v*100:0,R=(N+E)*35,U=((fe=g.planning)==null?void 0:fe.coutTotalReel)||(_+k)*35,z=x-b-S-R,Q=v-C-F-U,H=S+z,q=F+Q,X=x>0?H/x*100:0,$=v>0?q/v*100:0;return s.jsxs(le.Fragment,{children:[s.jsxs("tr",{className:`border-b ${p%2===0?"bg-white":"bg-stone-50"}`,children:[s.jsx("td",{rowSpan:"3",className:"py-1 px-1 border-r border-stone-200 text-center font-medium",children:m.numero}),s.jsxs("td",{rowSpan:"3",className:"py-1 px-1 border-r border-stone-200",children:[s.jsx("div",{className:"font-medium",children:m.libelle}),s.jsx("div",{className:"text-[10px] text-stone-500",children:m.client})]}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(x)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 font-medium text-blue-600",children:"OBJECTIF"}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(b*.4)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(b*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(b*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-pink-50",children:c(b)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-center",children:d(j)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:u(N)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:u(E)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-yellow-50",children:u(N+E)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-right",children:c(R)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:d(D)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(S)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(z)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:d(x>0?z/x*100:0)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-orange-50",children:c(H)}),s.jsx("td",{className:"py-1 px-1 text-center",children:d(X)})]}),s.jsxs("tr",{className:`border-b ${p%2===0?"bg-white":"bg-stone-50"}`,children:[s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(v)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 font-medium text-green-600",children:"REALISE"}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(C*.4)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(C*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(C*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-pink-50",children:c(C)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-center",children:d(w)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:u(_)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:u(k)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-yellow-50",children:u(_+k)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-right",children:c(U)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:d(M)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(F)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:c(Q)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:d(v>0?Q/v*100:0)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-orange-50",children:c(q)}),s.jsx("td",{className:"py-1 px-1 text-center",children:d($)})]}),s.jsxs("tr",{className:`border-b-2 border-stone-300 ${p%2===0?"bg-gray-100":"bg-gray-50"}`,children:[s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium",children:f(x,v)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 font-medium text-gray-600",children:"ECART"}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:f(b*.4,C*.4)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:f(b*.3,C*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:f(b*.3,C*.3)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-pink-50",children:f(b,C)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-center",children:h(j,w)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:A(N,_)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:A(E,k)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-yellow-50",children:A(N+E,_+k)}),s.jsx("td",{className:"py-1 px-1 border-r-2 border-stone-300 text-right",children:f(R,U)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:h(D,M)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:f(S,F)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right",children:f(z,Q)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-center",children:h(x>0?z/x*100:0,v>0?Q/v*100:0)}),s.jsx("td",{className:"py-1 px-1 border-r border-stone-200 text-right font-medium bg-orange-50",children:f(H,q)}),s.jsx("td",{className:"py-1 px-1 text-center",children:h(X,$)})]})]},m.id)})})]})})})]})},Vet=()=>{const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{console.log("🔄 Chargement des affaires...");const o=await $n.getAffaires({take:1e3,skip:0});console.log("📊 Réponse complète:",o),console.log("📊 Type de réponse:",typeof o),console.log("📊 Clés disponibles:",Object.keys(o));const l=o.affaires||o||[];console.log("📊 Nombre d'affaires:",l.length),l.length>0&&console.log("📊 Première affaire complète:",l[0]),r(l)}catch(o){console.error("❌ Erreur:",o)}finally{a(!1)}})()},[]),n?s.jsx("div",{className:"p-8",children:"Chargement..."}):s.jsxs("div",{className:"p-6 bg-stone-50 min-h-screen",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs(Xe,{variant:"ghost",onClick:()=>t("/affaires"),className:"mb-4",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Test Résultats Affaires - Version Simple"})]}),s.jsxs(Kt,{className:"p-4",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Données brutes des affaires (",e.length," affaires)"]}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-stone-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Numéro"}),s.jsx("th",{className:"p-2 text-left",children:"Libellé"}),s.jsx("th",{className:"p-2 text-right",children:"Objectif CA"}),s.jsx("th",{className:"p-2 text-right",children:"CA Réel"}),s.jsx("th",{className:"p-2 text-right",children:"Objectif Achats"}),s.jsx("th",{className:"p-2 text-right",children:"Achats Réels"})]})}),s.jsx("tbody",{children:e.map((i,o)=>s.jsxs("tr",{className:o%2===0?"bg-white":"bg-stone-50",children:[s.jsx("td",{className:"p-2",children:i.numero}),s.jsx("td",{className:"p-2",children:i.libelle}),s.jsxs("td",{className:"p-2 text-right",children:[i.objectifCaHt||0," €"]}),s.jsxs("td",{className:"p-2 text-right",children:[i.caReelHt||0," €"]}),s.jsxs("td",{className:"p-2 text-right",children:[i.objectifAchatHt||0," €"]}),s.jsxs("td",{className:"p-2 text-right",children:[i.achatReelHt||0," €"]})]},i.id))})]}),e.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsx("summary",{className:"cursor-pointer text-blue-600",children:"Voir les propriétés complètes de la première affaire"}),s.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(e[0],null,2)})]})]})]})},Wet=()=>{const[t,e]=y.useState([]),[r,n]=y.useState({}),[a,i]=y.useState(!0),[o,l]=y.useState(""),[c,u]=y.useState("all"),[d,f]=y.useState({page:1,limit:10,total:0,totalPages:0}),A=Fr();y.useEffect(()=>{h(),m()},[d.page,o,c]);const h=async()=>{try{i(!0);const j={skip:(d.page-1)*d.limit,take:d.limit,statut:c!=="all"?c:void 0},w=await fi.getAllDevis(j),N=w.devis||w.data||w||[],E=w.total||N.length||0;e(Array.isArray(N)?N:[]),f(_=>({..._,total:E,totalPages:Math.ceil(E/d.limit)}))}catch(j){console.error("Erreur lors du chargement des devis:",j),ve.error("Erreur lors du chargement des devis")}finally{i(!1)}},m=async()=>{try{const j=await fi.getStats();n(j)}catch(j){console.error("Erreur lors du chargement des statistiques:",j),n({total:0,enAttenteValidation:0,valides:0,realises:0,refuses:0,expires:0,montantTotal:0,montantRealise:0})}},p=j=>{u(j),f(w=>({...w,page:1}))},g=async(j,w)=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer le devis "${w}" ?`))try{await fi.deleteDevis(j),ve.success("Devis supprimé avec succès"),h(),m()}catch(N){console.error("Erreur lors de la suppression:",N),ve.error("Erreur lors de la suppression du devis")}},x=async(j,w)=>{try{await fi.updateStatutDevis(j,w),ve.success("Statut mis à jour avec succès"),h(),m()}catch(N){console.error("Erreur lors de la mise à jour du statut:",N),ve.error("Erreur lors de la mise à jour du statut")}},v=j=>{const w=fi.getStatusBadge(j);return s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.color}`,children:[j==="EN_ATTENTE_VALIDATION"&&s.jsx(wn,{className:"w-3 h-3 mr-1"}),j==="VALIDE"&&s.jsx(Gr,{className:"w-3 h-3 mr-1"}),j==="REALISE"&&s.jsx(Gr,{className:"w-3 h-3 mr-1"}),j==="REFUSE"&&s.jsx(ls,{className:"w-3 h-3 mr-1"}),j==="EXPIRE"&&s.jsx(ls,{className:"w-3 h-3 mr-1"}),w.label]})},b=j=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(j||0),C=j=>new Date(j).toLocaleDateString("fr-FR");return a&&t.length===0?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-8 p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestion des Devis"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gérez et suivez tous vos devis"})]}),s.jsx(Xe,{onClick:()=>A("/devis/nouveau"),variant:"primary",icon:Jn,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 font-medium",children:"Nouveau devis"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Devis"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.total||0})]}),s.jsx(Su,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Attente"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.enAttenteValidation||0})]}),s.jsx(wn,{className:"w-8 h-8 text-yellow-600"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Validés"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.valides||0})]}),s.jsx(Gr,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Réalisés"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.realises||0})]}),s.jsx(Gr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Montant Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b(r.montantTotal)})]}),s.jsx(Tm,{className:"w-8 h-8 text-blue-600"})]})})})]}),s.jsx(Kt,{children:s.jsx(nr,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Rechercher un devis...",value:o,onChange:j=>l(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Xe,{onClick:()=>p("all"),variant:c==="all"?"primary":"outline",size:"sm",children:"Tous"}),s.jsx(Xe,{onClick:()=>p("EN_ATTENTE_VALIDATION"),variant:c==="EN_ATTENTE_VALIDATION"?"primary":"outline",size:"sm",children:"En attente"}),s.jsx(Xe,{onClick:()=>p("VALIDE"),variant:c==="VALIDE"?"primary":"outline",size:"sm",children:"Validés"}),s.jsx(Xe,{onClick:()=>p("REALISE"),variant:c==="REALISE"?"primary":"outline",size:"sm",children:"Réalisés"}),s.jsx(Xe,{onClick:()=>p("REFUSE"),variant:c==="REFUSE"?"primary":"outline",size:"sm",children:"Refusés"})]})]})})}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Br,{children:["Liste des Devis (",d.total,")"]}),s.jsx(Xe,{onClick:h,variant:"outline",size:"sm",icon:_a,children:"Actualiser"})]})}),s.jsxs(nr,{children:[t.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Numéro"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Libellé"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Affaire"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Statut"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Montant HT"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Validité"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Actions"})]})}),s.jsx("tbody",{children:t.map(j=>s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[s.jsx("td",{className:"py-3 px-4 text-sm text-gray-900 dark:text-white font-medium",children:j.numero}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.libelle}),j.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs",children:j.description})]})}),s.jsx("td",{className:"py-3 px-4",children:j.affaire&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.affaire.numero}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.affaire.client})]})}),s.jsx("td",{className:"py-3 px-4",children:v(j.statut)}),s.jsx("td",{className:"py-3 px-4 text-sm text-gray-900 dark:text-white",children:b(j.montantHt)}),s.jsx("td",{className:"py-3 px-4 text-sm text-gray-900 dark:text-white",children:C(j.dateValidite)}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xe,{onClick:()=>A(`/devis/${j.id}`),variant:"ghost",size:"sm",icon:ha,children:"Voir"}),s.jsx(Xe,{onClick:()=>A(`/devis/${j.id}/modifier`),variant:"ghost",size:"sm",icon:Po,children:"Modifier"}),j.statut==="EN_ATTENTE_VALIDATION"&&s.jsxs(s.Fragment,{children:[s.jsx(Xe,{onClick:()=>x(j.id,"VALIDE"),variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700",icon:Gr,children:"Valider"}),s.jsx(Xe,{onClick:()=>x(j.id,"REFUSE"),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",icon:ls,children:"Refuser"})]}),j.statut==="VALIDE"&&s.jsx(Xe,{onClick:()=>x(j.id,"REALISE"),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",icon:Gr,children:"Marquer réalisé"}),s.jsx(Xe,{onClick:()=>g(j.id,j.libelle),variant:"ghost",size:"sm",icon:Zn,className:"text-red-600 hover:text-red-700",children:"Supprimer"})]})})]},j.id))})]})}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Su,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun devis trouvé"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c!=="all"?"Aucun devis ne correspond à vos critères de filtrage.":"Commencez par créer votre premier devis."}),s.jsx(Xe,{onClick:()=>A("/devis/nouveau"),variant:"primary",icon:Jn,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 font-medium",children:"Créer un devis"})]}),d.totalPages>1&&s.jsxs("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",d.page," sur ",d.totalPages," (",d.total," devis au total)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Xe,{onClick:()=>f(j=>({...j,page:j.page-1})),disabled:d.page===1,variant:"outline",size:"sm",children:"Précédent"}),s.jsx(Xe,{onClick:()=>f(j=>({...j,page:j.page+1})),disabled:d.page===d.totalPages,variant:"outline",size:"sm",children:"Suivant"})]})]})]})]})]})},jQ=()=>{const t=Fr(),{id:e}=Ka(),r=!!e,[n,a]=y.useState(!1),[i,o]=y.useState([]),[l,c]=y.useState({libelle:"",description:"",montantHt:"",dateValidite:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],affaireId:"",commentaire:""});y.useEffect(()=>{u(),r&&d()},[e,r]);const u=async()=>{try{const m=await $n.getAffaires();o(Array.isArray(m)?m:[])}catch(m){console.error("Erreur lors du chargement des affaires:",m),ve.error("Erreur lors du chargement des affaires")}},d=async()=>{var m;try{a(!0);const p=await fi.getDevis(e),g=p.data||p;c({libelle:g.libelle||"",description:g.description||"",montantHt:((m=g.montantHt)==null?void 0:m.toString())||"",dateValidite:g.dateValidite?new Date(g.dateValidite).toISOString().split("T")[0]:"",affaireId:g.affaireId||"",commentaire:g.commentaire||""})}catch(p){console.error("Erreur lors du chargement du devis:",p),ve.error("Erreur lors du chargement du devis")}finally{a(!1)}},f=m=>{const{name:p,value:g}=m.target;c(x=>({...x,[p]:g}))},A=async m=>{var p;if(m.preventDefault(),!l.libelle.trim()){ve.error("Le libellé est obligatoire");return}if(!l.affaireId){ve.error("Veuillez sélectionner une affaire");return}if(!l.montantHt||parseFloat(l.montantHt)<=0){ve.error("Le montant HT doit être supérieur à 0");return}if(!l.dateValidite){ve.error("La date de validité est obligatoire");return}try{a(!0);const g={libelle:l.libelle.trim(),description:l.description.trim(),montantHt:parseFloat(l.montantHt),dateValidite:new Date(l.dateValidite),affaireId:l.affaireId,commentaire:((p=l.commentaire)==null?void 0:p.trim())||""};r?(await fi.updateDevis(e,g),ve.success("Devis modifié avec succès")):(await fi.createDevis(g),ve.success("Devis créé avec succès")),t("/devis")}catch(g){console.error("Erreur lors de la sauvegarde:",g),ve.error(`Erreur lors de la ${r?"modification":"création"} du devis`)}finally{a(!1)}},h=m=>`${m.numero} - ${m.libelle} (${m.client})`;return n&&r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(Xe,{variant:"outline",onClick:()=>t("/devis"),icon:Ci,children:"Retour"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r?"Modifier le devis":"Nouveau devis"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r?"Modifiez les informations du devis":"Créez un nouveau devis pour une affaire"})]})]})}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Informations du devis"})}),s.jsx(nr,{children:s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Affaire *"}),s.jsxs("select",{name:"affaireId",value:l.affaireId,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"Sélectionnez une affaire"}),i.map(m=>s.jsx("option",{value:m.id,children:h(m)},m.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Libellé *"}),s.jsx("input",{type:"text",name:"libelle",value:l.libelle,onChange:f,required:!0,placeholder:"Ex: Devis installation électrique",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{name:"description",value:l.description,onChange:f,rows:4,placeholder:"Description détaillée du devis...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Montant HT (€) *"}),s.jsx("input",{type:"number",name:"montantHt",value:l.montantHt,onChange:f,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date de validité *"}),s.jsx("input",{type:"date",name:"dateValidite",value:l.dateValidite,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Date limite de validité du devis"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Commentaire"}),s.jsx("textarea",{name:"commentaire",value:l.commentaire,onChange:f,rows:3,placeholder:"Commentaire sur le devis...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(Xe,{type:"button",variant:"outline",onClick:()=>t("/devis"),icon:ls,children:"Annuler"}),s.jsx(Xe,{type:"submit",variant:"primary",disabled:n,icon:n?hu:Gr,children:n?"Sauvegarde...":r?"Modifier":"Créer"})]})]})})]})]})},Get=()=>{const t=Fr(),[e,{open:r,close:n}]=lP(!1),[a,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(null),[d,f]=y.useState(null),[A,h]=y.useState(!1),[m,p]=y.useState("soft"),[g,x]=y.useState(""),[v,b]=y.useState(""),[C,j]=y.useState(""),[w,N]=y.useState(""),[E,_]=y.useState(1),[k,D]=y.useState(1),[S,F]=y.useState(0),M=10;y.useEffect(()=>{R(),U()},[E,g,v,C,w]);const R=async()=>{try{l(!0);const $={page:E,limit:M};g&&($.search=g),v&&($.actif=v),C&&($.enCompte=C),w&&($.categorie=w);const K=await mCe($);i(K.fournisseurs),F(K.total),D(Math.ceil(K.total/M))}catch($){console.error("Erreur lors du chargement des fournisseurs:",$),Vt.show({title:"Erreur",message:"Impossible de charger les fournisseurs",color:"red",icon:s.jsx(Ls,{size:16})})}finally{l(!1)}},U=async()=>{try{const $=await bCe();u($)}catch($){console.error("Erreur lors du chargement des statistiques:",$)}},z=()=>{_(1),R()},Q=()=>{x(""),b(""),j(""),N(""),_(1)},H=($,K="soft")=>{f($),p(K),r()},q=async()=>{if(d)try{h(!0),m==="hard"?(await yCe(d.id),Vt.show({title:"Succès",message:"Fournisseur supprimé définitivement avec succès",color:"green"})):(await xCe(d.id),Vt.show({title:"Succès",message:"Fournisseur désactivé avec succès",color:"green"})),R(),U()}catch($){console.error(`Erreur lors de la ${m==="hard"?"suppression":"désactivation"}:`,$),Vt.show({title:"Erreur",message:`Impossible de ${m==="hard"?"supprimer":"désactiver"} le fournisseur`,color:"red",icon:s.jsx(Ls,{size:16})})}finally{h(!1),n(),f(null)}},X=async $=>{try{h(!0),await vCe($.id),Vt.show({title:"Succès",message:"Fournisseur réactivé avec succès",color:"green"}),R(),U()}catch(K){console.error("Erreur lors de la réactivation:",K),Vt.show({title:"Erreur",message:"Impossible de réactiver le fournisseur",color:"red",icon:s.jsx(Ls,{size:16})})}finally{h(!1)}};return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(ps,{spacing:"lg",children:[s.jsxs(Hr,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[s.jsxs(Bt,{position:"apart",mb:"md",children:[s.jsxs(Bt,{children:[s.jsx(ro,{size:24}),s.jsx(Kr,{order:2,children:"Gestion des fournisseurs"})]}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:16}),onClick:()=>t("/fournisseurs/nouveau"),children:"Nouveau fournisseur"})]}),c&&s.jsxs(tt,{children:[s.jsxs(tt.Col,{span:3,children:[s.jsx(He,{size:"sm",color:"dimmed",children:"Total"}),s.jsx(He,{size:"xl",weight:600,children:c.total})]}),s.jsxs(tt.Col,{span:3,children:[s.jsx(He,{size:"sm",color:"dimmed",children:"Actifs"}),s.jsx(He,{size:"xl",weight:600,color:"green",children:c.actifs})]}),s.jsxs(tt.Col,{span:3,children:[s.jsx(He,{size:"sm",color:"dimmed",children:"Inactifs"}),s.jsx(He,{size:"xl",weight:600,color:"red",children:c.inactifs})]}),s.jsxs(tt.Col,{span:3,children:[s.jsx(He,{size:"sm",color:"dimmed",children:"En compte"}),s.jsx(He,{size:"xl",weight:600,color:"blue",children:c.enCompte})]})]})]}),s.jsx(Hr,{shadow:"sm",padding:"md",radius:"md",withBorder:!0,children:s.jsxs(Bt,{children:[s.jsx(dn,{placeholder:"Rechercher par nom, contact ou email...",icon:s.jsx(Ol,{size:16}),value:g,onChange:$=>x($.target.value),style:{flex:1}}),s.jsx(Wr,{placeholder:"Statut",value:v,onChange:b,data:[{value:"",label:"Tous"},{value:"true",label:"Actifs"},{value:"false",label:"Inactifs"}],clearable:!0,style:{width:120}}),s.jsx(Wr,{placeholder:"En compte",value:C,onChange:j,data:[{value:"",label:"Tous"},{value:"true",label:"En compte"},{value:"false",label:"Pas en compte"}],clearable:!0,style:{width:140}}),s.jsx(Wr,{placeholder:"Catégorie",value:w,onChange:N,data:[{value:"",label:"Toutes"},...AY],clearable:!0,style:{width:150}}),s.jsx(rr,{onClick:z,leftSection:s.jsx(Ol,{size:16}),children:"Rechercher"}),s.jsx(rr,{variant:"outline",onClick:Q,leftSection:s.jsx(_a,{size:16}),children:"Réinitialiser"})]})}),s.jsxs(Hr,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[s.jsx(to,{visible:o}),s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Nom"}),s.jsx("th",{children:"Catégorie"}),s.jsx("th",{children:"Code client"}),s.jsx("th",{children:"Contact"}),s.jsx("th",{children:"Téléphone"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"En compte"}),s.jsx("th",{children:"Statut"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:a.map($=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(He,{weight:500,children:$.nom})}),s.jsx("td",{children:$.categorie?s.jsx(bn,{color:CCe($.categorie),variant:"light",size:"sm",children:jCe($.categorie)}):s.jsx(He,{size:"sm",color:"dimmed",children:"-"})}),s.jsx("td",{children:s.jsx(He,{size:"sm",children:$.codeClient||"-"})}),s.jsx("td",{children:s.jsx(He,{size:"sm",children:$.contact||"-"})}),s.jsx("td",{children:s.jsx(He,{size:"sm",children:$.telephone||"-"})}),s.jsx("td",{children:s.jsx(He,{size:"sm",children:$.email||"-"})}),s.jsx("td",{children:$.enCompte?s.jsxs(bn,{color:"blue",variant:"light",children:[s.jsx(Gr,{size:12,style:{marginRight:4}}),"En compte"]}):s.jsxs(bn,{color:"gray",variant:"light",children:[s.jsx(ls,{size:12,style:{marginRight:4}}),"Non"]})}),s.jsx("td",{children:s.jsx(bn,{color:$.actif?"green":"red",variant:"light",children:$.actif?"Actif":"Inactif"})}),s.jsx("td",{children:s.jsxs(Bt,{spacing:"xs",children:[s.jsx(Dn,{color:"blue",variant:"light",onClick:()=>t(`/fournisseurs/${$.id}/modifier`),children:s.jsx(Po,{size:16})}),$.actif?s.jsxs(Ar,{shadow:"md",width:200,children:[s.jsx(Ar.Target,{children:s.jsx(Dn,{color:"red",variant:"light",children:s.jsx(l0e,{size:16})})}),s.jsxs(Ar.Dropdown,{children:[s.jsx(Ar.Item,{icon:s.jsx(sD,{size:14}),onClick:()=>H($,"soft"),children:"Désactiver"}),s.jsx(Ar.Item,{icon:s.jsx(Zn,{size:14}),color:"red",onClick:()=>H($,"hard"),children:"Supprimer définitivement"})]})]}):s.jsx(Dn,{color:"green",variant:"light",onClick:()=>X($),children:s.jsx(Gr,{size:16})})]})})]},$.id))})]}),a.length===0&&!o&&s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),color:"blue",variant:"light",mt:"md",children:"Aucun fournisseur trouvé avec les critères sélectionnés."}),k>1&&s.jsxs(Bt,{position:"center",mt:"md",children:[s.jsx(Ei,{value:E,onChange:_,total:k,size:"sm"}),s.jsxs(He,{size:"sm",color:"dimmed",children:[S," fournisseur",S>1?"s":""," au total"]})]})]}),s.jsx(fa,{opened:e,onClose:n,title:m==="hard"?"Confirmer la suppression définitive":"Confirmer la désactivation",centered:!0,children:s.jsxs(ps,{spacing:"md",children:[s.jsxs(Ia,{icon:s.jsx(Ls,{size:16}),color:m==="hard"?"red":"orange",variant:"light",children:["Êtes-vous sûr de vouloir ",m==="hard"?"supprimer définitivement":"désactiver"," le fournisseur ",s.jsx("strong",{children:d==null?void 0:d.nom})," ?"]}),s.jsx(He,{size:"sm",color:"dimmed",children:m==="hard"?"⚠️ Cette action est irréversible ! Le fournisseur et toutes ses données seront définitivement supprimés.":"Le fournisseur sera désactivé mais ses données seront conservées. Vous pourrez le réactiver plus tard si nécessaire."}),s.jsxs(Bt,{position:"right",children:[s.jsx(rr,{variant:"outline",onClick:n,children:"Annuler"}),s.jsx(rr,{color:"red",onClick:q,loading:A,children:m==="hard"?"Supprimer définitivement":"Désactiver"})]})]})})]})})},CQ=()=>{const t=Fr(),{id:e}=Ka(),r=!!e,[n,a]=y.useState(!1),[i,o]=y.useState(r),l=Fl({initialValues:{nom:"",codeClient:"",enCompte:!1,categorie:"",adresse:"",telephone:"",email:"",contact:"",commentaire:"",actif:!0},validate:{nom:d=>d?null:"Le nom du fournisseur est obligatoire",email:d=>d&&!/^\S+@\S+$/.test(d)?"Format d'email invalide":null}});y.useEffect(()=>{r&&c()},[e,r]);const c=async()=>{try{o(!0);const d=await pCe(e);l.setValues({nom:d.nom||"",codeClient:d.codeClient||"",enCompte:d.enCompte||!1,categorie:d.categorie||"",adresse:d.adresse||"",telephone:d.telephone||"",email:d.email||"",contact:d.contact||"",commentaire:d.commentaire||"",actif:d.actif!==void 0?d.actif:!0})}catch(d){console.error("Erreur lors du chargement du fournisseur:",d),Vt.show({title:"Erreur",message:"Impossible de charger les données du fournisseur",color:"red",icon:s.jsx(Ls,{size:16})})}finally{o(!1)}},u=async d=>{var f,A,h,m,p,g,x,v,b,C;try{a(!0);const j={...d,codeClient:((f=d.codeClient)==null?void 0:f.trim())||null,categorie:d.categorie||null,adresse:((A=d.adresse)==null?void 0:A.trim())||null,telephone:((h=d.telephone)==null?void 0:h.trim())||null,email:((m=d.email)==null?void 0:m.trim())||null,contact:((p=d.contact)==null?void 0:p.trim())||null,commentaire:((g=d.commentaire)==null?void 0:g.trim())||null};console.log("Données nettoyées à envoyer:",j),r?(await gCe(e,j),Vt.show({title:"Succès",message:"Fournisseur modifié avec succès",color:"green"})):(await ACe(j),Vt.show({title:"Succès",message:"Fournisseur créé avec succès",color:"green"})),t("/fournisseurs")}catch(j){console.error("Erreur lors de la sauvegarde:",j);let w="Une erreur est survenue lors de la sauvegarde";if(((x=j.response)==null?void 0:x.status)===409)w="Un fournisseur avec ce nom existe déjà";else if(((v=j.response)==null?void 0:v.status)===400){const N=(C=(b=j.response)==null?void 0:b.data)==null?void 0:C.message;Array.isArray(N)?w=N.join(", "):typeof N=="string"?w=N:w="Données de formulaire invalides"}Vt.show({title:"Erreur",message:w,color:"red",icon:s.jsx(Ls,{size:16})})}finally{a(!1)}};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(Hr,{children:[s.jsx(to,{visible:!0}),s.jsx("div",{style:{height:200}})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(Hr,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[s.jsx(to,{visible:n}),s.jsxs(Bt,{position:"apart",mb:"md",children:[s.jsxs(Bt,{children:[s.jsx(ro,{size:24}),s.jsx(Kr,{order:2,children:r?"Modifier le fournisseur":"Nouveau fournisseur"})]}),s.jsx(rr,{variant:"outline",leftSection:s.jsx(Ci,{size:16}),onClick:()=>t("/fournisseurs"),children:"Retour"})]}),s.jsx("form",{onSubmit:l.onSubmit(u),children:s.jsxs(ps,{spacing:"md",children:[s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),color:"blue",variant:"light",children:"Les champs marqués d'un * sont obligatoires"}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Nom du fournisseur",placeholder:"ex: Menuiseries Dupont SARL",required:!0,...l.getInputProps("nom")})}),s.jsx(tt.Col,{span:3,children:s.jsx(dn,{label:"Code client",placeholder:"ex: CLI-001234",description:"Votre code client chez ce fournisseur",...l.getInputProps("codeClient")})}),s.jsx(tt.Col,{span:3,children:s.jsx(Wr,{label:"Catégorie",placeholder:"Sélectionner une catégorie",description:"Domaine d'activité du fournisseur",data:AY,clearable:!0,searchable:!0,...l.getInputProps("categorie")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Téléphone",placeholder:"ex: 01.23.45.67.89",...l.getInputProps("telephone")})}),s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Email",placeholder:"ex: contact@fournisseur.fr",type:"email",...l.getInputProps("email")})})]}),s.jsx(dn,{label:"Personne de contact",placeholder:"ex: Jean Dupont",description:"Nom de votre interlocuteur principal",...l.getInputProps("contact")}),s.jsx(Pl,{label:"Adresse",placeholder:"Adresse complète du fournisseur",rows:2,...l.getInputProps("adresse")}),s.jsx(Pl,{label:"Commentaire",placeholder:"Notes ou informations complémentaires...",rows:3,...l.getInputProps("commentaire")}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Em,{label:"En compte",description:"Indique si vous êtes en compte avec ce fournisseur",...l.getInputProps("enCompte",{type:"checkbox"})})}),s.jsx(tt.Col,{span:6,children:s.jsx(Em,{label:"Actif",description:"Fournisseur actif dans le système",...l.getInputProps("actif",{type:"checkbox"})})})]}),s.jsxs(Bt,{position:"right",mt:"xl",children:[s.jsx(rr,{variant:"outline",onClick:()=>t("/fournisseurs"),children:"Annuler"}),s.jsx(rr,{type:"submit",leftSection:s.jsx(kl,{size:16}),loading:n,children:r?"Modifier":"Créer"})]})]})})]})})},Qte=({value:t,onChange:e,error:r,placeholder:n="Sélectionner un fournisseur",...a})=>{const[i,o]=y.useState([]),[l,c]=y.useState(!0),[u,d]=y.useState(""),f=KN({onDropdownClose:()=>{f.resetSelectedOption(),t&&d("")}});y.useEffect(()=>{A()},[]),y.useEffect(()=>{t&&d("")},[t]);const A=async()=>{try{c(!0);const x=await Pw(),v=Array.isArray(x)?x.filter(b=>b&&typeof b=="object"&&typeof b.nom=="string"&&b.nom.trim().length>0):[];o(v)}catch(x){console.error("Erreur lors du chargement des fournisseurs:",x),o([])}finally{c(!1)}},h=i.filter(x=>{if(!x||typeof x!="object")return!1;const v=(u||"").toLowerCase().trim();if(!v)return!0;const b=String(x.nom||"").toLowerCase(),C=String(x.codeClient||"").toLowerCase(),j=String(x.contact||"").toLowerCase();return b.includes(v)||C.includes(v)||j.includes(v)}),m=({fournisseur:x})=>!x||typeof x!="object"?s.jsx(He,{size:"sm",c:"red",children:"Données invalides"}):s.jsxs(Bt,{children:[s.jsx(ro,{size:16}),s.jsxs("div",{style:{flex:1},children:[s.jsx(He,{size:"sm",fw:500,children:String(x.nom||"Non défini")}),s.jsxs(Bt,{gap:8,children:[x.codeClient&&s.jsxs(He,{size:"xs",c:"dimmed",children:["Code: ",String(x.codeClient)]}),x.contact&&s.jsxs(He,{size:"xs",c:"dimmed",children:["Contact: ",String(x.contact)]}),x.enCompte?s.jsxs(bn,{size:"xs",color:"blue",variant:"light",children:[s.jsx(Gr,{size:8,style:{marginRight:2}}),"En compte"]}):s.jsxs(bn,{size:"xs",color:"gray",variant:"light",children:[s.jsx(ls,{size:8,style:{marginRight:2}}),"Non"]})]})]})]}),p=h.map(x=>{const v=x.id||x.nom||Math.random().toString(),b=String(x.nom||"");return s.jsx(Or.Option,{value:b,children:s.jsx(m,{fournisseur:x})},v)}),g=t||u||"";return l?s.jsx(eo,{...a,disabled:!0,rightSection:s.jsx(Zi,{size:16}),placeholder:"Chargement des fournisseurs...",error:r,value:"",readOnly:!0}):s.jsxs(Or,{store:f,onOptionSubmit:x=>{e&&typeof e=="function"&&e(x),f.closeDropdown(),d("")},position:"bottom-start",withinPortal:!1,children:[s.jsx(Or.Target,{children:s.jsx(eo,{...a,value:g,onChange:x=>{var b;const v=((b=x==null?void 0:x.currentTarget)==null?void 0:b.value)||"";d(v),f.openDropdown(),f.updateSelectedOptionIndex()},onClick:()=>f.toggleDropdown(),onFocus:()=>f.openDropdown(),onBlur:()=>{f.closeDropdown(),t||d("")},placeholder:n,rightSection:s.jsx(y0,{size:16}),error:r})}),s.jsx(Or.Dropdown,{children:s.jsx(Or.Options,{children:p.length>0?p:s.jsx(Or.Empty,{children:i.length===0?"Aucun fournisseur disponible":"Aucun fournisseur trouvé"})})})]})},zte=({hideHeader:t=!1})=>{const e=Fr(),[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState(!0),[d,f]=y.useState(!1),[A,h]=y.useState(!1),[m,p]=y.useState(null),[g,x]=y.useState(""),[v,b]=y.useState(""),[C,j]=y.useState(""),[w,N]=y.useState(""),[E,_]=y.useState(!1),[k,D]=y.useState(1),[S]=y.useState(20),[F,M]=y.useState(0),R=Fl({initialValues:{fournisseur:"",montantHt:0,montantTtc:0,dateFacture:new Date,dateEcheance:null,affaireId:"",categorieId:"",numeroFacture:"",commentaire:"",statut:"RECU"},validate:{fournisseur:G=>G?null:"Le fournisseur est obligatoire",montantHt:G=>!G||G<=0?"Le montant HT doit être supérieur à 0":null,dateFacture:G=>G?null:"La date de facture est obligatoire",affaireId:G=>G?null:"L'affaire est obligatoire",categorieId:G=>G?null:"La catégorie est obligatoire",numeroFacture:G=>G?null:"Le numéro de facture est obligatoire"}});y.useEffect(()=>{U()},[]),y.useEffect(()=>{z()},[k,g,v,C,w]);const U=async()=>{try{u(!0);const[G,oe]=await Promise.all([$n.getAffaires({take:1e3}),BS()]);i(G.affaires||[]),l(oe||[])}catch(G){console.error("Erreur lors du chargement des données:",G),ve.error("Erreur lors du chargement des données")}finally{u(!1)}},z=async()=>{try{const oe=await Sx({page:k,take:S,search:g,affaireId:v,categorieId:C,statut:w});Array.isArray(oe)?(n(oe),M(oe.length)):oe&&Array.isArray(oe.achats)?(n(oe.achats),M(oe.total||oe.achats.length)):(n([]),M(0))}catch(G){console.error("Erreur lors du chargement des achats:",G),ve.error("Erreur lors du chargement des factures"),n([])}},Q=async G=>{try{f(!0);const oe={fournisseur:G.fournisseur,montantHt:parseFloat(G.montantHt),montantTtc:parseFloat(G.montantTtc)||Math.round(parseFloat(G.montantHt)*1.2*100)/100,dateFacture:G.dateFacture,dateEcheance:G.dateEcheance,affaireId:G.affaireId,categorieId:G.categorieId,numeroFacture:G.numeroFacture,commentaire:G.commentaire,statut:G.statut};m?(await em(m.id,oe),ve.success("Facture modifiée avec succès")):(await _S(oe),ve.success("Facture créée avec succès")),await z(),$()}catch(oe){console.error("Erreur lors de la sauvegarde:",oe),ve.error("Erreur lors de la sauvegarde")}finally{f(!1)}},H=G=>{var oe,Se;p(G),R.setValues({fournisseur:G.fournisseur,montantHt:G.montantHt,montantTtc:G.montantTtc||Math.round(G.montantHt*1.2*100)/100,dateFacture:new Date(G.dateFacture),dateEcheance:G.dateEcheance?new Date(G.dateEcheance):null,affaireId:(oe=G.affaireId)==null?void 0:oe.toString(),categorieId:(Se=G.categorieId)==null?void 0:Se.toString(),numeroFacture:G.numeroFacture||"",commentaire:G.commentaire||"",statut:G.statut||"RECU"}),h(!0)},q=async G=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer la facture ${G.numeroFacture} ?`))try{await Kk(G.id),ve.success("Facture supprimée avec succès"),await z()}catch(oe){console.error("Erreur lors de la suppression:",oe),ve.error("Erreur lors de la suppression")}},X=G=>{if(G.firebaseDownloadUrl)window.open(G.firebaseDownloadUrl,"_blank");else if(G.fichierPdf){const oe=`https://sauvegarde-mai-gestion-production.up.railway.app/api/uploads/${G.fichierPdf}`;window.open(oe,"_blank")}else ve.error("Aucun document associé à cette facture")},$=()=>{h(!1),p(null),R.reset()},K=()=>{t?(p(null),R.reset(),h(!0)):e("/achats/factures/nouveau")},se=G=>{if(R.setFieldValue("montantHt",G),G){const oe=Math.round(G*1.2*100)/100;R.setFieldValue("montantTtc",oe)}},Z=r.filter(G=>!(E&&!G.numeroFacture)),ie=Z.length,ee=Z.reduce((G,oe)=>G+(oe.montantHt||0),0),ue=Z.filter(G=>G.statut==="RECU").length,ae=a.filter(G=>G&&G.id&&G.numero).map(G=>({value:String(G.id),label:`${G.numero} - ${(G.description||"").substring(0,50)}${G.description&&G.description.length>50?"...":""}`})),re=o.filter(G=>G&&G.id&&G.nom).map(G=>({value:String(G.id),label:String(G.nom)})),fe=[{value:"RECU",label:"Reçu"},{value:"EN_ATTENTE",label:"En attente"},{value:"PAYE",label:"Payé"},{value:"ANNULE",label:"Annulé"}];return c?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(Zi,{size:"lg"})}):s.jsxs("div",{className:t?"space-y-6":"p-6 space-y-6",children:[!t&&s.jsx(Hr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:s.jsx(Su,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx(Kr,{order:2,className:"text-blue-900",children:"Gestion des Factures d'Achats"}),s.jsx(He,{c:"dimmed",children:"Toutes les factures fournisseurs de l'entreprise"})]})]}),s.jsx(rr,{onClick:K,leftSection:s.jsx(Jn,{size:16}),className:"bg-blue-600 hover:bg-blue-700",children:"Nouvelle facture"})]})}),t&&s.jsx("div",{className:"flex justify-end",children:s.jsx(rr,{onClick:K,leftSection:s.jsx(Jn,{size:16}),className:"bg-blue-600 hover:bg-blue-700",children:"Nouvelle facture"})}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:s.jsx(Su,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"green.8",children:ie}),s.jsx(He,{size:"sm",c:"dimmed",children:"Factures totales"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:s.jsx(Tm,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"blue.8",children:Mn(ee)}),s.jsx(He,{size:"sm",c:"dimmed",children:"Montant total HT"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:s.jsx(Gr,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"orange.8",children:ue}),s.jsx(He,{size:"sm",c:"dimmed",children:"Factures reçues"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:s.jsx(ro,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"purple.8",children:a.length}),s.jsx(He,{size:"sm",c:"dimmed",children:"Affaires actives"})]})]})})})]}),s.jsx(Hr,{children:s.jsxs(ps,{gap:"md",children:[s.jsxs(Bt,{justify:"space-between",children:[s.jsxs(Bt,{children:[s.jsx(jc,{size:16}),s.jsx(He,{fw:600,children:"Filtres"})]}),s.jsx(rr,{variant:"light",size:"sm",onClick:()=>{x(""),b(""),j(""),N(""),D(1)},leftSection:s.jsx(_a,{size:14}),children:"Réinitialiser"})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(dn,{placeholder:"Rechercher...",value:g,onChange:G=>x(G.currentTarget.value),leftSection:s.jsx(Ol,{size:16})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Wr,{placeholder:"Filtrer par affaire",data:ae,value:v,onChange:b,clearable:!0})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Wr,{placeholder:"Filtrer par catégorie",data:re,value:C,onChange:j,clearable:!0})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Wr,{placeholder:"Filtrer par statut",data:fe,value:w,onChange:N,clearable:!0})})]}),s.jsx(Em,{label:"Afficher uniquement les factures avec numéro",checked:E,onChange:G=>_(G.currentTarget.checked)})]})}),s.jsxs(Hr,{children:[s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"N° Facture"}),s.jsx(Ye.Th,{children:"Fournisseur"}),s.jsx(Ye.Th,{children:"Affaire"}),s.jsx(Ye.Th,{children:"Catégorie"}),s.jsx(Ye.Th,{children:"Montant HT"}),s.jsx(Ye.Th,{children:"Date"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:Z.length===0?s.jsx(Ye.Tr,{children:s.jsx(Ye.Td,{colSpan:8,children:s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),title:"Aucune facture trouvée",children:"Aucune facture ne correspond aux critères de recherche."})})}):Z.map(G=>{if(!G||!G.id)return null;const oe=a.find(ge=>{var te;return ge&&ge.id&&ge.id.toString()===((te=G.affaireId)==null?void 0:te.toString())}),Se=o.find(ge=>{var te;return ge&&ge.id&&ge.id.toString()===((te=G.categorieId)==null?void 0:te.toString())});return s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(He,{fw:500,children:String(G.numeroFacture||"Non défini")}),(G.firebaseDownloadUrl||G.fichierPdf)&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Document disponible"})]})}),s.jsx(Ye.Td,{children:s.jsx(He,{children:String(G.fournisseur||"Non défini")})}),s.jsx(Ye.Td,{children:s.jsx(He,{children:oe?`${oe.numero} - ${(oe.description||"").substring(0,30)}${oe.description&&oe.description.length>30?"...":""}`:"N/A"})}),s.jsx(Ye.Td,{children:s.jsx(bn,{variant:"light",color:"blue",children:(Se==null?void 0:Se.nom)||"N/A"})}),s.jsx(Ye.Td,{children:s.jsx(He,{fw:600,c:"green.6",children:Mn(G.montantHt||0)})}),s.jsx(Ye.Td,{children:s.jsx(He,{size:"sm",children:G.dateFacture?new Date(G.dateFacture).toLocaleDateString():"N/A"})}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:G.statut==="RECU"?"green":G.statut==="PAYE"?"blue":G.statut==="ANNULE"?"red":"yellow",variant:"light",children:G.statut||"RECU"})}),s.jsx(Ye.Td,{children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[(G.firebaseDownloadUrl||G.fichierPdf)&&s.jsx("button",{type:"button",className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded",onClick:()=>X(G),title:"Voir le document",children:s.jsx(NS,{size:16})}),s.jsx("button",{type:"button",className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded",onClick:()=>H(G),title:"Modifier",children:s.jsx(Po,{size:16})}),s.jsx("button",{type:"button",className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded",onClick:()=>q(G),title:"Supprimer",children:s.jsx(Zn,{size:16})})]})})]},G.id)}).filter(Boolean)})]}),F>S&&s.jsx(Bt,{justify:"center",mt:"md",children:s.jsx(Ei,{value:k,onChange:D,total:Math.ceil(F/S),size:"sm"})})]}),s.jsx(fa,{opened:A,onClose:$,title:m?"Modifier la facture":"Nouvelle facture",size:"lg",children:s.jsx("form",{onSubmit:R.onSubmit(Q),children:s.jsxs(ps,{gap:"md",children:[s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Numéro de facture",placeholder:"F2025-001",required:!0,...R.getInputProps("numeroFacture")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Statut",data:fe,required:!0,...R.getInputProps("statut")})})]}),s.jsx(Qte,{label:"Fournisseur",placeholder:"Sélectionner un fournisseur",required:!0,...R.getInputProps("fournisseur")}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Affaire",placeholder:"Sélectionner une affaire",data:ae,required:!0,searchable:!0,...R.getInputProps("affaireId")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Catégorie",placeholder:"Sélectionner une catégorie",data:re,required:!0,...R.getInputProps("categorieId")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Montant HT (€)",placeholder:"0.00",required:!0,min:0,decimalScale:2,fixedDecimalScale:!0,value:R.values.montantHt,onChange:se,error:R.errors.montantHt})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Montant TTC (€)",placeholder:"0.00",min:0,decimalScale:2,fixedDecimalScale:!0,...R.getInputProps("montantTtc")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date de facture",placeholder:"Sélectionner une date",required:!0,...R.getInputProps("dateFacture")})}),s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date d'échéance",placeholder:"Optionnel",...R.getInputProps("dateEcheance")})})]}),s.jsx(Pl,{label:"Commentaire",placeholder:"Informations supplémentaires...",minRows:3,...R.getInputProps("commentaire")}),s.jsx(wi,{}),s.jsxs(Bt,{justify:"flex-end",children:[s.jsx(rr,{variant:"light",onClick:$,disabled:d,children:"Annuler"}),s.jsx(rr,{type:"submit",loading:d,leftSection:s.jsx(kl,{size:16}),children:m?"Modifier":"Créer"})]})]})})})]})},NQ=()=>{const t=Fr(),{id:e}=Ka(),r=!!e,[n,a]=y.useState(!1),[i,o]=y.useState(r),[l,c]=y.useState([]),[u,d]=y.useState([]),f=Fl({initialValues:{numero:"",fournisseur:"",montantHt:0,dateFacture:new Date,dateEcheance:null,affaireId:"",categorieId:"",description:"",numeroFacture:"",statut:"RECU"},validate:{fournisseur:v=>v?null:"Le fournisseur est obligatoire",montantHt:v=>v<=0?"Le montant HT doit être supérieur à 0":null,dateFacture:v=>v?null:"La date de facture est obligatoire",affaireId:v=>v?null:"L'affaire est obligatoire",categorieId:v=>v?null:"La catégorie est obligatoire",numeroFacture:v=>v?null:"Le numéro de facture est obligatoire"}});y.useEffect(()=>{(async()=>{var b,C;try{o(!0);const[j,w]=await Promise.all([$n.getAffaires({take:1e3}),BS()]);if(c(j.affaires||[]),d(w||[]),r){const N=await hbe(e);f.setValues({numero:N.numero,fournisseur:N.fournisseur,montantHt:N.montantHt,dateFacture:new Date(N.dateFacture),dateEcheance:N.dateEcheance?new Date(N.dateEcheance):null,affaireId:(b=N.affaireId)==null?void 0:b.toString(),categorieId:(C=N.categorieId)==null?void 0:C.toString(),description:N.description||"",numeroFacture:N.numeroFacture,statut:N.statut})}}catch(j){console.error("Erreur lors du chargement des données:",j),Vt.show({title:"Erreur",message:"Impossible de charger les données",color:"red"})}finally{o(!1)}})()},[e,r]);const A=async v=>{var b,C;try{a(!0);const j={...v,affaireId:v.affaireId,categorieId:v.categorieId,dateFacture:v.dateFacture,dateEcheance:v.dateEcheance,montantTtc:v.montantHt?Math.round(v.montantHt*1.2*100)/100:0};r?(await em(e,j),Vt.show({title:"Succès",message:"Facture d'achat modifiée avec succès",color:"green"})):(await _S(j),Vt.show({title:"Succès",message:"Facture d'achat créée avec succès",color:"green"})),t("/achats")}catch(j){console.error("Erreur lors de la sauvegarde:",j),Vt.show({title:"Erreur",message:((C=(b=j.response)==null?void 0:b.data)==null?void 0:C.message)||"Erreur lors de la sauvegarde",color:"red"})}finally{a(!1)}};if(i)return s.jsx(Od,{size:"md",children:s.jsx(to,{visible:!0})});const h=u.find(v=>v.id.toString()===f.values.categorieId),m=h&&f.values.montantHt?f.values.montantHt*(h.pourcentageFg||0)/100:0,p=l.map(v=>({value:v.id.toString(),label:`${v.numero} - ${v.description}`})),g=u.map(v=>({value:v.id.toString(),label:v.nom})),x=[{value:"RECU",label:"Reçu"},{value:"EN_ATTENTE",label:"En attente"},{value:"PAYE",label:"Payé"},{value:"ANNULE",label:"Annulé"}];return s.jsx(Od,{size:"md",children:s.jsxs(ps,{gap:"lg",children:[s.jsx(Bt,{children:s.jsx(rr,{variant:"subtle",leftSection:s.jsx(Ci,{size:20}),onClick:()=>t("/achats"),children:"Retour aux achats"})}),s.jsx(Hn,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:s.jsxs(ps,{gap:"md",children:[s.jsxs(Bt,{children:[s.jsx(mu,{size:24}),s.jsx(Kr,{order:2,children:r?"Modifier la facture d'achat":"Créer une facture d'achat"})]}),s.jsx(Ia,{icon:s.jsx(Io,{size:16}),color:"blue",children:"Utilisez ce formulaire pour saisir directement une facture d'achat sans passer par un bon de commande (ex: bâche, petit matériel, achats spontanés)."}),s.jsx("form",{onSubmit:f.onSubmit(A),children:s.jsxs(ps,{gap:"md",children:[s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Numéro de facture fournisseur",placeholder:"F-2025-001",required:!0,...f.getInputProps("numeroFacture")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Qte,{label:"Fournisseur",placeholder:"Sélectionner un fournisseur",required:!0,...f.getInputProps("fournisseur")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date de facture",placeholder:"Sélectionner une date",required:!0,...f.getInputProps("dateFacture")})}),s.jsx(tt.Col,{span:6,children:s.jsx(ko,{label:"Date d'échéance (optionnelle)",placeholder:"Sélectionner une date",...f.getInputProps("dateEcheance")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Affaire",placeholder:"Sélectionner une affaire",data:p,required:!0,searchable:!0,...f.getInputProps("affaireId")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Catégorie d'achat",placeholder:"Sélectionner une catégorie",data:g,required:!0,...f.getInputProps("categorieId")})})]}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:4,children:s.jsx(Hi,{label:"Montant HT (€)",placeholder:"0.00",required:!0,min:0,decimalScale:2,fixedDecimalScale:!0,...f.getInputProps("montantHt")})}),s.jsx(tt.Col,{span:4,children:s.jsx(Hi,{label:"Montant TTC (€)",placeholder:"Calculé automatiquement",disabled:!0,min:0,decimalScale:2,fixedDecimalScale:!0,value:f.values.montantHt?Math.round(f.values.montantHt*1.2*100)/100:0})}),s.jsx(tt.Col,{span:4,children:s.jsx(Wr,{label:"Statut",data:x,required:!0,...f.getInputProps("statut")})})]}),s.jsx(Pl,{label:"Description / Commentaire",placeholder:"Détails sur l'achat...",minRows:3,...f.getInputProps("description")}),h&&f.values.montantHt>0&&s.jsxs(Hr,{withBorder:!0,children:[s.jsx(Kr,{order:4,mb:"sm",children:"Résumé financier"}),s.jsxs(tt,{children:[s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Montant HT"}),s.jsxs(He,{fw:500,children:[f.values.montantHt.toFixed(2)," €"]})]}),s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"TVA (20%)"}),s.jsxs(He,{fw:500,children:[(f.values.montantHt*.2).toFixed(2)," €"]})]}),s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Montant TTC"}),s.jsxs(He,{fw:700,c:"blue",children:[(f.values.montantHt*1.2).toFixed(2)," €"]})]}),m>0&&s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Frais généraux estimés"}),s.jsxs(He,{fw:500,c:"orange",children:[m.toFixed(2)," €"]})]})]})]}),s.jsx(wi,{}),s.jsxs(Bt,{justify:"flex-end",children:[s.jsx(rr,{variant:"light",onClick:()=>t("/achats"),disabled:n,children:"Annuler"}),s.jsx(rr,{type:"submit",loading:n,leftSection:s.jsx(kl,{size:16}),children:r?"Modifier":"Créer la facture"})]})]})})]})})]})})},Vte=({hideHeader:t=!1})=>{var D;const[e,r]=y.useState([]),[n,a]=y.useState([]),[i,o]=y.useState([]),[l,c]=y.useState(!0),[u,d]=y.useState(null),[f,A]=y.useState(""),[h,m]=y.useState(new Date),[p,g]=y.useState(!1),[x,v]=y.useState(null);y.useEffect(()=>{b()},[]),y.useEffect(()=>{e.length>0&&n.length>0&&C()},[e,n,f,h]);const b=async()=>{try{c(!0);const[S,F,M]=await Promise.all([sp({take:1e3}),Sx({take:1e3}),$n.getAffaires({take:1e3})]),R=Array.isArray(S)?S:(S==null?void 0:S.bdc)||(S==null?void 0:S.bdcs)||[],U=Array.isArray(F)?F:(F==null?void 0:F.achats)||[];r(R.filter(z=>z&&z.id)),a(U.filter(z=>z&&z.id)),o((M==null?void 0:M.affaires)||[])}catch(S){console.error("Erreur lors du chargement des données:",S),ve.error("Erreur lors du chargement des données")}finally{c(!1)}},C=()=>{try{const S={},F=[],M=new Date(h.getFullYear(),h.getMonth(),1),R=new Date(h.getFullYear(),h.getMonth()+1,0);i.forEach(z=>{if(f&&z.id.toString()!==f)return;const Q=e.filter(ie=>{var ee;if(((ee=ie.affaireId)==null?void 0:ee.toString())!==z.id.toString())return!1;if(h){const ue=new Date(ie.dateBdc||ie.dateCreation);return ue>=M&&ue<=R}return!0}),H=n.filter(ie=>{var ee;if(((ee=ie.affaireId)==null?void 0:ee.toString())!==z.id.toString())return!1;if(h){const ue=new Date(ie.dateFacture);return ue>=M&&ue<=R}return!0});if(Q.length===0&&H.length===0)return;const q=Q.reduce((ie,ee)=>ie+(ee.montantHt||0),0),X=H.reduce((ie,ee)=>ie+(ee.montantHt||0),0),$=X-q,K=q>0?$/q*100:X>0?100:0,se=H.filter(ie=>ie.bdcId===null).length,Z={affaire:z,nbBdcs:Q.length,nbFactures:H.length,facturesSansBdc:se,totalBdcs:q,totalFactures:X,ecart:$,ecartPourcentage:K,ecartAbsolu:Math.abs($),status:j(Q.length,H.length,$,se,q,X),bdcsList:Q,facturesList:H};S[z.id]=Z,F.push(Z)});const U={totalAffaires:F.length,totalBdcs:F.reduce((z,Q)=>z+Q.totalBdcs,0),totalFactures:F.reduce((z,Q)=>z+Q.totalFactures,0),affairesConformes:F.filter(z=>z.status==="conforme"||z.status==="conforme_avec_factures_libres").length,affairesEnEcart:F.filter(z=>z.status==="ecart"||z.status==="ecart_avec_factures_libres").length,affairesSansFacture:F.filter(z=>z.status==="sans_facture").length,affairesSansBdc:F.filter(z=>z.status==="factures_sans_bdc").length,totalFacturesSansBdc:F.reduce((z,Q)=>z+(Q.facturesSansBdc||0),0),ecartGlobal:0};U.ecartGlobal=U.totalFactures-U.totalBdcs,d({details:S,affairesWithData:F.sort((z,Q)=>Q.ecartAbsolu-z.ecartAbsolu),stats:U})}catch(S){console.error("Erreur lors de l'analyse:",S),ve.error("Erreur lors de l'analyse")}},j=(S,F,M,R,U,z)=>S===0&&F>0?R===F?"factures_sans_bdc":"ecart":F===0&&S>0?"sans_facture":S===0&&F===0?"vide":M===0?R>0?"conforme_avec_factures_libres":"conforme":R>0?"ecart_avec_factures_libres":"ecart",w=(S,F,M)=>{switch(S){case"conforme":return s.jsx(bn,{color:"green",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(Gr,{size:12}),s.jsx("span",{children:"Conforme"})]})});case"conforme_avec_factures_libres":return s.jsx(bn,{color:"green",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(Gr,{size:12}),s.jsxs("span",{children:["Conforme + ",(M==null?void 0:M.facturesSansBdc)||0," fact. libres"]})]})});case"ecart":return s.jsx(bn,{color:F>0?"orange":"red",variant:"light",children:s.jsxs(Bt,{gap:4,children:[F>0?s.jsx(Tl,{size:12}):s.jsx(Dm,{size:12}),s.jsxs("span",{children:["Écart ",F>0?"+":"",Mn(F)]})]})});case"ecart_avec_factures_libres":return s.jsx(bn,{color:"orange",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(wo,{size:12}),s.jsxs("span",{children:["Écart + ",(M==null?void 0:M.facturesSansBdc)||0," fact. libres"]})]})});case"sans_facture":return s.jsx(bn,{color:"yellow",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(wo,{size:12}),s.jsx("span",{children:"BDC sans factures"})]})});case"factures_sans_bdc":return s.jsx(bn,{color:"blue",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(wo,{size:12}),s.jsx("span",{children:"Factures sans BDC"})]})});case"vide":return s.jsx(bn,{color:"gray",variant:"light",children:s.jsxs(Bt,{gap:4,children:[s.jsx(F2,{size:12}),s.jsx("span",{children:"Aucune donnée"})]})});default:return s.jsx(bn,{color:"gray",children:"Inconnu"})}},N=()=>{if(!u)return;const S=u.affairesWithData.map(F=>({Affaire:F.affaire.numero,Description:F.affaire.description,"Nb BDC":F.nbBdcs,"Total BDC (€)":F.totalBdcs,"Nb Factures":F.nbFactures,"Total Factures (€)":F.totalFactures,"Écart (€)":F.ecart,"Écart (%)":F.ecartPourcentage.toFixed(2),Statut:F.status}));console.log("Données à exporter:",S),ve.success("Export préparé (à implémenter avec librairie Excel)")},E=S=>{v(S),g(!0)},_=[{value:"",label:"Toutes les affaires"},...i.map(S=>{var F,M;return{value:S.id.toString(),label:`${S.numero} - ${(F=S.description)==null?void 0:F.substring(0,30)}${((M=S.description)==null?void 0:M.length)>30?"...":""}`}})],k=Array.from({length:12},(S,F)=>{const M=new Date;return M.setMonth(M.getMonth()-F),{value:M.toISOString(),label:M.toLocaleDateString("fr-FR",{year:"numeric",month:"long"})}});return l?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(Zi,{size:"lg"})}):s.jsxs("div",{className:t?"space-y-6":"p-6 space-y-6",children:[!t&&s.jsx(Hr,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:s.jsx(CS,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx(Kr,{order:2,className:"text-purple-900",children:"Rapprochement BDC vs Factures"}),s.jsx(He,{c:"dimmed",children:"Contrôle mensuel des écarts entre commandes et facturations"})]})]}),s.jsxs(Bt,{children:[s.jsx(rr,{variant:"light",leftSection:s.jsx(_a,{size:16}),onClick:b,children:"Actualiser"}),s.jsx(rr,{leftSection:s.jsx(Va,{size:16}),onClick:N,disabled:!u,children:"Export Excel"})]})]})}),t&&s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(rr,{variant:"light",leftSection:s.jsx(_a,{size:16}),onClick:b,children:"Actualiser"}),s.jsx(rr,{leftSection:s.jsx(Va,{size:16}),onClick:N,disabled:!u,children:"Export Excel"})]}),s.jsx(Hr,{children:s.jsxs(ps,{gap:"md",children:[s.jsx(Bt,{justify:"space-between",children:s.jsxs(Bt,{children:[s.jsx(jc,{size:16}),s.jsx(He,{fw:600,children:"Filtres d'analyse"})]})}),s.jsx(Ia,{mb:"md",color:"blue",variant:"light",children:s.jsxs(Bt,{children:[s.jsx(wo,{size:16}),s.jsxs("div",{children:[s.jsx(He,{fw:500,size:"sm",children:"Logique de rapprochement"}),s.jsxs(He,{size:"xs",c:"dimmed",children:["• ",s.jsx("strong",{children:"Facture AVEC BDC"})," : Facture liée à un bon de commande (rapprochement manuel effectué)",s.jsx("br",{}),"• ",s.jsx("strong",{children:"Facture SANS BDC"})," : Facture avec bdcId = null (aucun rapprochement effectué)",s.jsx("br",{}),"• ",s.jsx("strong",{children:"Conforme"})," : Montant total BDC = Montant total factures liées (écart = 0€)"]})]})]})}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6,md:4},children:s.jsx(Wr,{label:"Affaire",data:_,value:f,onChange:A,searchable:!0})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:4},children:s.jsx(Wr,{label:"Mois d'analyse",data:k,value:h==null?void 0:h.toISOString(),onChange:S=>m(S?new Date(S):new Date)})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:4},children:s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(rr,{variant:"light",fullWidth:!0,leftSection:s.jsx(_a,{size:16}),onClick:()=>{A(""),m(new Date),ve.success("Filtres réinitialisés")},children:"Réinitialiser"})})})]})]})}),u&&s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:s.jsx(Su,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"blue.8",children:u.stats.totalAffaires}),s.jsx(He,{size:"sm",c:"dimmed",children:"Affaires analysées"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:s.jsx(Gr,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"green.8",children:u.stats.affairesConformes}),s.jsx(He,{size:"sm",c:"dimmed",children:"Conformes (écart = 0€)"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:s.jsx(wo,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:"orange.8",children:u.stats.affairesEnEcart}),s.jsx(He,{size:"sm",c:"dimmed",children:"Avec écarts"})]})]})})}),s.jsx(tt.Col,{span:{base:12,sm:6,md:3},children:s.jsx(Hn,{p:"md",className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200",children:s.jsxs(Bt,{children:[s.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:s.jsx(yx,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(He,{size:"xl",fw:700,c:u.stats.ecartGlobal>=0?"purple.8":"red.8",children:Mn(u.stats.ecartGlobal)}),s.jsx(He,{size:"sm",c:"dimmed",children:"Écart global"})]})]})})})]}),u&&s.jsxs(Hr,{children:[s.jsx(Kr,{order:4,mb:"md",children:"Détail par affaire"}),s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"Affaire"}),s.jsx(Ye.Th,{children:"BDC"}),s.jsx(Ye.Th,{children:"Factures"}),s.jsx(Ye.Th,{children:"Fact. libres"}),s.jsx(Ye.Th,{children:"Écart"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:u.affairesWithData.map(S=>{var F,M;return s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:s.jsxs("div",{children:[s.jsx(He,{fw:500,children:S.affaire.numero}),s.jsxs(He,{size:"sm",c:"dimmed",children:[(F=S.affaire.description)==null?void 0:F.substring(0,40),((M=S.affaire.description)==null?void 0:M.length)>40?"...":""]})]})}),s.jsx(Ye.Td,{children:s.jsxs("div",{children:[s.jsx(He,{fw:600,children:Mn(S.totalBdcs)}),s.jsxs(He,{size:"sm",c:"dimmed",children:[S.nbBdcs," BDC"]})]})}),s.jsx(Ye.Td,{children:s.jsxs("div",{children:[s.jsx(He,{fw:600,children:Mn(S.totalFactures)}),s.jsxs(He,{size:"sm",c:"dimmed",children:[S.nbFactures," factures"]})]})}),s.jsx(Ye.Td,{children:s.jsxs("div",{children:[s.jsx(He,{fw:600,c:S.facturesSansBdc>0?"orange.6":"gray.5",children:S.facturesSansBdc||0}),s.jsx(He,{size:"sm",c:"dimmed",children:"sans BDC"})]})}),s.jsx(Ye.Td,{children:s.jsxs("div",{children:[s.jsxs(He,{fw:600,c:S.ecart>=0?"green.6":"red.6",children:[S.ecart>=0?"+":"",Mn(S.ecart)]}),s.jsxs(He,{size:"sm",c:"dimmed",children:[S.ecartPourcentage>=0?"+":"",S.ecartPourcentage.toFixed(1),"%"]})]})}),s.jsx(Ye.Td,{children:w(S.status,S.ecart,S)}),s.jsx(Ye.Td,{children:s.jsx("div",{className:"flex gap-2 justify-end",children:s.jsx("button",{type:"button",className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded",onClick:()=>E(S),title:"Voir détail",children:s.jsx(ha,{size:16})})})})]},S.affaire.id)})})]})]}),s.jsx(fa,{opened:p,onClose:()=>g(!1),title:`Détail - ${(D=x==null?void 0:x.affaire)==null?void 0:D.numero}`,size:"xl",children:x&&s.jsxs(ps,{gap:"md",children:[s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsxs(Kr,{order:5,mb:"sm",className:"flex items-center gap-2",children:[s.jsx(Su,{size:16}),"Bons de Commande (",x.nbBdcs,")"]}),x.bdcsList.length===0?s.jsx(He,{c:"dimmed",ta:"center",children:"Aucun BDC"}):s.jsxs(ps,{gap:"xs",children:[x.bdcsList.map(S=>s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsxs(He,{size:"sm",children:["BDC #",S.numero]}),s.jsx(He,{size:"sm",fw:600,children:Mn(S.montantHt)})]},S.id)),s.jsx(wi,{}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx(He,{children:"Total BDC"}),s.jsx(He,{fw:700,children:Mn(x.totalBdcs)})]})]})]})}),s.jsx(tt.Col,{span:6,children:s.jsxs(Hr,{withBorder:!0,children:[s.jsxs(Kr,{order:5,mb:"sm",className:"flex items-center gap-2",children:[s.jsx(mu,{size:16}),"Factures (",x.nbFactures,")"]}),x.facturesList.length===0?s.jsx(He,{c:"dimmed",ta:"center",children:"Aucune facture"}):s.jsxs(ps,{gap:"xs",children:[x.facturesList.map(S=>s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx(He,{size:"sm",children:S.numeroFacture||"Sans n°"}),s.jsx(He,{size:"sm",fw:600,children:Mn(S.montantHt)})]},S.id)),s.jsx(wi,{}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx(He,{children:"Total Factures"}),s.jsx(He,{fw:700,children:Mn(x.totalFactures)})]})]})]})})]}),s.jsxs(Hr,{withBorder:!0,className:"bg-blue-50",children:[s.jsx(Kr,{order:5,mb:"sm",children:"Résumé de l'écart"}),s.jsxs(tt,{children:[s.jsxs(tt.Col,{span:4,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Montant BDC"}),s.jsx(He,{fw:600,children:Mn(x.totalBdcs)})]}),s.jsxs(tt.Col,{span:4,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Montant Factures"}),s.jsx(He,{fw:600,children:Mn(x.totalFactures)})]}),s.jsxs(tt.Col,{span:4,children:[s.jsx(He,{size:"sm",c:"dimmed",children:"Écart"}),s.jsxs(He,{fw:700,c:x.ecart>=0?"green.6":"red.6",children:[x.ecart>=0?"+":"",Mn(x.ecart)]})]})]})]})]})})]})},S_=({hideHeader:t=!1})=>{console.log("🚨 [COMPOSANT ACTIF] BdcList.jsx est utilisé");const e=Fr(),[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState(!0),[c,u]=y.useState(0),[d,f]=y.useState(1),[A]=y.useState(10),[h,m]=y.useState({affaireId:"",fournisseur:""}),[p,g]=y.useState(!1),[x,v]=y.useState(null),[b,C]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const q=(await IS()).map(X=>({value:X.id,label:`${X.numero} - ${X.libelle}`}));i(q)}catch(H){console.error("Erreur lors du chargement des affaires:",H),Vt.show({title:"Erreur",message:"Impossible de charger la liste des affaires",color:"red"})}})()},[]),y.useEffect(()=>{(async()=>{try{l(!0);const q={skip:(d-1)*A,take:A,...h},X=await sp(q);n(X.bdc),u(X.total)}catch(H){console.error("Erreur lors du chargement des bons de commande:",H),Vt.show({title:"Erreur",message:"Impossible de charger la liste des bons de commande",color:"red"})}finally{l(!1)}})()},[d,A,h]);const j=Q=>{f(Q)},w=(Q,H)=>{m(q=>({...q,[Q]:H})),f(1)},N=()=>{m({affaireId:"",fournisseur:""}),f(1)},E=async Q=>{Q.statut==="VALIDE"?(v(Q),g(!0)):window.confirm("Êtes-vous sûr de vouloir supprimer ce bon de commande ?")&&await _(Q.id)},_=async(Q,H=null)=>{try{C(!0),await sy(Q,H),n(r.filter(q=>q.id!==Q)),u(q=>q-1),Vt.show({title:"Succès",message:"Bon de commande supprimé avec succès",color:"green"})}catch(q){console.error("Erreur lors de la suppression:",q),Vt.show({title:"Erreur",message:q.message||"Erreur lors de la suppression du bon de commande",color:"red"})}finally{C(!1),g(!1),v(null)}},k=()=>{g(!1),v(null),C(!1)},D=async Q=>{x&&await _(x.id,Q)},S=async Q=>{if(window.confirm("Êtes-vous sûr de vouloir valider ce bon de commande ?"))try{await DS(Q),n(r.map(H=>H.id===Q?{...H,statut:"VALIDE"}:H)),Vt.show({title:"Succès",message:"Bon de commande validé avec succès",color:"green"})}catch(H){console.error("Erreur lors de la validation du bon de commande:",H),Vt.show({title:"Erreur",message:"Impossible de valider le bon de commande",color:"red"})}},F=async Q=>{if(window.confirm("Êtes-vous sûr de vouloir réceptionner ce bon de commande ?"))try{const H=await TS(Q);n(r.map(q=>q.id===Q?{...q,dateReception:H.dateReception}:q)),Vt.show({title:"Succès",message:"Bon de commande réceptionné avec succès",color:"green"})}catch(H){console.error("Erreur lors de la réception du bon de commande:",H),Vt.show({title:"Erreur",message:"Impossible de réceptionner le bon de commande",color:"red"})}},M=Q=>{if(Q.firebaseDownloadUrl)window.open(Q.firebaseDownloadUrl,"_blank");else if(Q.fichierPdf){const H=`https://sauvegarde-mai-gestion-production.up.railway.app/api/uploads/${Q.fichierPdf}`;window.open(H,"_blank")}else Vt.show({title:"Information",message:"Aucun document associé à ce bon de commande",color:"orange"})},R=Q=>{const H={EN_ATTENTE:{color:"#FF9500",bgColor:"#FFF5E6",text:"En attente"},VALIDE:{color:"#007AFF",bgColor:"#E6F2FF",text:"Validé"},RECEPTIONNE:{color:"#34C759",bgColor:"#E6F7EA",text:"Réceptionné"},ANNULE:{color:"#FF3B30",bgColor:"#FFE6E6",text:"Annulé"}};if(Q.dateReception){const $=H.RECEPTIONNE;return s.jsxs("span",{style:{backgroundColor:$.bgColor,color:$.color,padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"4px"},children:["✓ ",$.text]})}const q=H[Q.statut]||H.EN_ATTENTE,X=Q.statut==="EN_ATTENTE"?"⏱️":Q.statut==="VALIDE"?"✓":Q.statut==="ANNULE"?"✕":"⏱️";return s.jsxs("span",{style:{backgroundColor:q.bgColor,color:q.color,padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"4px"},children:[X," ",q.text]})},U=async Q=>{try{if(console.log("🔽 Téléchargement PDF depuis BdcList pour BDC:",Q),Q.firebaseDownloadUrl){console.log("📁 Téléchargement depuis Firebase:",Q.firebaseDownloadUrl);const H=await fetch(Q.firebaseDownloadUrl);if(!H.ok)throw new Error("Erreur lors du téléchargement depuis Firebase");const q=await H.blob(),X=window.URL.createObjectURL(q),$=document.createElement("a");$.href=X;const K=Q.nomFichier||`${Q.numero}.pdf`;console.log("📄 Nom de fichier utilisé:",K),$.setAttribute("download",K),document.body.appendChild($),$.click(),window.URL.revokeObjectURL(X),document.body.removeChild($),Vt.show({title:"Succès",message:`PDF ${K} téléchargé avec succès`,color:"green"})}else console.log("🔧 Téléchargement depuis le backend (génération automatique)"),await Dq(Q.id),Vt.show({title:"Succès",message:`PDF du BDC ${Q.numero} téléchargé avec succès`,color:"green"})}catch(H){console.error("Erreur lors du téléchargement du PDF:",H),Vt.show({title:"Erreur",message:"Erreur lors du téléchargement du PDF",color:"red"})}},z={primaryButton:{backgroundColor:"#6b7c3d",color:"#ffffff",border:"none",padding:"10px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",gap:"8px"},secondaryButton:{backgroundColor:"#ffffff",border:"1px solid #d1d5db",color:"#374151",padding:"8px 16px",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",minHeight:"36px",display:"inline-flex",alignItems:"center",gap:"6px"},statsCardTerre:{backgroundColor:"#f5f0e8",border:"1px solid #e8dcc0",borderRadius:"12px",padding:"20px"},statsCardOlive:{backgroundColor:"#f0f4e8",border:"1px solid #d9e2c4",borderRadius:"12px",padding:"20px"},statsCardChene:{backgroundColor:"#faf6f0",border:"1px solid #f0e6d2",borderRadius:"12px",padding:"20px"},mainCard:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"}};return s.jsxs("div",{className:t?"space-y-8":"p-8 bg-gray-50 min-h-screen",children:[s.jsx(to,{visible:o,overlayProps:{blur:2}}),!t&&s.jsx("div",{style:z.mainCard,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"p-4 rounded-xl",style:{backgroundColor:"#6b7c3d"},children:s.jsx(mu,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Bons de Commande"}),s.jsx("p",{className:"text-gray-600",children:"Gestion professionnelle des commandes fournisseurs"})]})]}),s.jsxs("button",{onClick:()=>e("/bdc/nouveau"),style:z.primaryButton,onMouseEnter:Q=>Q.target.style.backgroundColor="#556533",onMouseLeave:Q=>Q.target.style.backgroundColor="#6b7c3d",children:[s.jsx(Jn,{size:18}),"Nouveau BDC"]})]})}),t&&s.jsx("div",{className:"flex justify-end mb-6",children:s.jsxs("button",{onClick:()=>e("/bdc/nouveau"),style:z.primaryButton,onMouseEnter:Q=>Q.target.style.backgroundColor="#556533",onMouseLeave:Q=>Q.target.style.backgroundColor="#6b7c3d",children:[s.jsx(Jn,{size:18}),"Nouveau BDC"]})}),r.length>0&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{style:z.statsCardTerre,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center",children:s.jsx(mu,{className:"w-5 h-5",style:{color:"#6b7c3d"}})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Total BDC"}),s.jsx("p",{className:"text-2xl font-bold text-black",children:c})]})]})}),s.jsx("div",{style:z.statsCardOlive,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center",children:s.jsx(Gr,{className:"w-5 h-5",style:{color:"#34C759"}})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Réceptionnés"}),s.jsx("p",{className:"text-2xl font-bold text-black",children:r.filter(Q=>Q.dateReception).length})]})]})}),s.jsx("div",{style:z.statsCardChene,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center",children:s.jsx(wn,{className:"w-5 h-5",style:{color:"#FF9500"}})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"En attente"}),s.jsx("p",{className:"text-2xl font-bold text-black",children:r.filter(Q=>!Q.dateReception).length})]})]})}),s.jsx("div",{style:z.statsCardTerre,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-white flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-bold",style:{color:"#6b7c3d"},children:"€"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Montant HT"}),s.jsxs("p",{className:"text-2xl font-bold text-black",children:[r.reduce((Q,H)=>Q+(H.montantHt||0),0).toLocaleString(),"€"]})]})]})})]}),s.jsxs("div",{style:z.mainCard,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(jc,{size:20,style:{color:"#6b7c3d"}}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtres de recherche"})]}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx(Wr,{placeholder:"Filtrer par affaire",clearable:!0,data:a,value:h.affaireId,onChange:Q=>w("affaireId",Q),leftSection:s.jsx(jc,{size:16}),style:{minWidth:280},styles:{input:{borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px"}}}),s.jsx(dn,{placeholder:"Rechercher par fournisseur",value:h.fournisseur,onChange:Q=>w("fournisseur",Q.target.value),leftSection:s.jsx(Ol,{size:16}),style:{minWidth:240},styles:{input:{borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px"}}}),s.jsxs("button",{style:{...z.secondaryButton,opacity:!h.affaireId&&!h.fournisseur?.5:1},onClick:N,disabled:!h.affaireId&&!h.fournisseur,children:[s.jsx(ls,{size:16}),"Réinitialiser"]})]})]}),s.jsxs("div",{style:z.mainCard,children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"2px solid #f3f4f6"},children:[s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Numéro"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Affaire"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Fournisseur"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Montant HT"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Date BDC"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900 text-sm",children:"Statut"}),s.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-900 text-sm",children:"Actions"})]})}),s.jsx("tbody",{children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(mu,{size:48,className:"text-gray-300"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun bon de commande trouvé"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Essayez de modifier vos filtres ou créez un nouveau BDC"})]})})}):r.map((Q,H)=>{var q;return s.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6",backgroundColor:H%2===0?"#ffffff":"#fafafa"},className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mu,{size:16,className:"text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:Q.numero}),(Q.firebaseDownloadUrl||Q.fichierPdf)&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Document disponible"})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("span",{className:"text-gray-700 font-medium",children:(q=Q.affaire)==null?void 0:q.numero})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("span",{className:"text-gray-700",children:Q.fournisseur})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("span",{className:"font-semibold text-gray-900",children:[Q.montantHt.toLocaleString("fr-FR")," €"]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("span",{className:"text-gray-600",children:Q.dateBdc?new Date(Q.dateBdc).toLocaleDateString("fr-FR"):"-"})}),s.jsx("td",{className:"py-4 px-6",children:R(Q)}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs("button",{onClick:()=>U(Q),style:{backgroundColor:"#34C759",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:"Télécharger PDF",children:[s.jsx(Va,{size:14}),"PDF"]}),s.jsxs(Ar,{shadow:"md",width:220,children:[s.jsx(Ar.Target,{children:s.jsxs("button",{style:{backgroundColor:"#007AFF",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[s.jsx($k,{size:14}),"Actions"]})}),s.jsxs(Ar.Dropdown,{children:[Q.statut==="EN_ATTENTE"&&!Q.dateReception&&s.jsx(Ar.Item,{onClick:()=>S(Q.id),color:"blue",leftSection:s.jsx(Gr,{size:16}),children:"Valider BDC"}),Q.statut==="VALIDE"&&!Q.dateReception&&s.jsx(Ar.Item,{onClick:()=>F(Q.id),color:"green",leftSection:s.jsx(Gr,{size:16}),children:"Réceptionner BDC"}),s.jsx(Ar.Item,{onClick:()=>U(Q),color:"green",leftSection:s.jsx(Va,{size:16}),children:"Télécharger PDF"}),(Q.firebaseDownloadUrl||Q.fichierPdf)&&s.jsx(Ar.Item,{onClick:()=>M(Q),color:"blue",leftSection:s.jsx(ha,{size:16}),children:"Voir le document"}),s.jsx(Ar.Divider,{}),s.jsx(Ar.Item,{onClick:()=>e(`/bdc/${Q.id}`),color:"blue",leftSection:s.jsx(ha,{size:16}),children:"Voir les détails"}),s.jsx(Ar.Item,{onClick:()=>e(`/bdc/${Q.id}/modifier`),color:"blue",leftSection:s.jsx(Po,{size:16}),children:"Modifier"}),s.jsx(Ar.Item,{onClick:()=>E(Q),color:"red",leftSection:s.jsx(Zn,{size:16}),children:"Supprimer"})]})]})]})})]},Q.id)})})]})}),c>0&&s.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Affichage de ",Math.min((d-1)*A+1,c)," à ",Math.min(d*A,c)," sur ",c," bons de commande"]}),s.jsx(Ei,{total:Math.ceil(c/A),page:d,onChange:j,size:"sm",styles:{control:{"&[data-active]":{backgroundColor:"#6b7c3d",borderColor:"#6b7c3d"}}}})]})]}),s.jsx(rF,{isOpen:p,onClose:k,onConfirm:D,title:"Suppression d'un BDC validé",message:`Ce bon de commande (${x==null?void 0:x.numero}) est validé. Un mot de passe administrateur est requis pour le supprimer.`,loading:b})]})},qet=()=>{const[t,e]=y.useState("factures");return s.jsxs("div",{className:"p-6",children:[s.jsx(Hr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:s.jsx(Nx,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx(Kr,{order:1,className:"text-blue-900",children:"Module Achats Complet"}),s.jsx(He,{c:"dimmed",children:"Gestion des factures, bons de commande et contrôles de rapprochement"})]})]})}),s.jsxs(qn,{value:t,onChange:e,children:[s.jsxs(qn.List,{className:"mb-6",children:[s.jsx(qn.Tab,{value:"factures",leftSection:s.jsx(mu,{size:16}),className:"text-lg",children:"Factures d'Achats"}),s.jsx(qn.Tab,{value:"bdc",leftSection:s.jsx(zi,{size:16}),className:"text-lg",children:"Bons de Commande"}),s.jsx(qn.Tab,{value:"rapprochement",leftSection:s.jsx(CS,{size:16}),className:"text-lg",children:"Rapprochement"})]}),s.jsx(qn.Panel,{value:"factures",children:s.jsx("div",{className:"mt-0",children:s.jsx(Ket,{})})}),s.jsx(qn.Panel,{value:"bdc",children:s.jsx("div",{className:"mt-0",children:s.jsx(Yet,{})})}),s.jsx(qn.Panel,{value:"rapprochement",children:s.jsx("div",{className:"mt-0",children:s.jsx(Xet,{})})})]})]})},Ket=()=>s.jsx(zte,{hideHeader:!0}),Yet=()=>s.jsx(S_,{hideHeader:!0}),Xet=()=>s.jsx(Vte,{hideHeader:!0}),Jet=({lignes:t,onLignesChange:e,disabled:r=!1,errors:n={}})=>{const a=()=>{const d={id:Date.now(),designation:"",reference:"",quantite:1,prixUnitaire:0,validee:!1};e([...t,d])},i=d=>{const f=t.filter((A,h)=>h!==d);e(f)},o=(d,f,A)=>{const h=[...t];h[d]={...h[d],[f]:A,validee:f==="validee"?A:!1},e(h)},l=d=>{var A;const f=t[d];(A=f.designation)!=null&&A.trim()&&f.quantite>0&&o(d,"validee",!0)},c=(d,f)=>f===0?"À définir":(d*f).toFixed(2),u=()=>t.reduce((f,A)=>A.prixUnitaire>0?f+A.quantite*A.prixUnitaire:f,0).toFixed(2);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:s.jsx(CR,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:"Liste des articles"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Ajoutez les articles à commander"}),s.jsxs("div",{className:"flex items-center mt-1 text-xs text-amber-600",children:[s.jsx(Gb,{className:"h-3 w-3 mr-1"}),"Les lignes vides seront automatiquement ignorées"]}),t.length>0&&s.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#8B9B7A]",children:[s.jsx(jh,{className:"h-3 w-3 mr-1"}),t.filter(d=>d.validee).length," / ",t.length," ligne(s) validée(s)"]})]})]}),s.jsxs(Xe,{type:"button",onClick:a,disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:[s.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Ajouter un article"]})]}),s.jsx("div",{className:"space-y-4",children:t.map((d,f)=>{var h;const A=d.validee||!1;return s.jsxs("div",{className:`bg-white border rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 ${A?"border-[#8B9B7A] bg-[#8B9B7A]/5":"border-gray-200"}`,children:[A&&s.jsxs("div",{className:"flex items-center mb-4 text-[#8B9B7A]",children:[s.jsx(jh,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"Ligne validée"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(CR,{className:"h-4 w-4 mr-2 text-blue-600"}),"Désignation *"]})}),s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(tz,{className:"h-4 w-4 mr-2 text-gray-500"}),"Référence"]})}),s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/12",children:"Quantité *"}),s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(h0,{className:"h-4 w-4 mr-2 text-green-600"}),"Prix unitaire (€)"]})}),s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/12",children:"Total (€)"}),s.jsx("th",{className:"text-sm font-medium text-gray-700 pb-2 w-1/6 text-center",children:"Actions"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"pr-4",children:[s.jsx(Ur,{placeholder:"Ex: Panneau MDF plaqué chêne",value:d.designation,onChange:m=>o(f,"designation",m.target.value),disabled:r,className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg h-10 w-full"}),n[`ligne_${f}_designation`]&&s.jsxs("p",{className:"text-red-500 text-xs flex items-center mt-1",children:[s.jsx(dh,{className:"h-3 w-3 mr-1"}),n[`ligne_${f}_designation`]]})]}),s.jsx("td",{className:"pr-4",children:s.jsx(Ur,{placeholder:"Ex: 124",value:d.reference,onChange:m=>o(f,"reference",m.target.value),disabled:r,className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg h-10 w-full"})}),s.jsxs("td",{className:"pr-4",children:[s.jsx(Ur,{type:"number",min:"1",step:"1",value:d.quantite,onChange:m=>o(f,"quantite",parseInt(m.target.value)||1),disabled:r,className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg h-10 w-full"}),n[`ligne_${f}_quantite`]&&s.jsxs("p",{className:"text-red-500 text-xs flex items-center mt-1",children:[s.jsx(dh,{className:"h-3 w-3 mr-1"}),n[`ligne_${f}_quantite`]]})]}),s.jsxs("td",{className:"pr-4",children:[s.jsx("div",{className:"relative",children:s.jsx(Ur,{type:"number",min:"0",step:"0.01",value:d.prixUnitaire===0?"":d.prixUnitaire,onChange:m=>o(f,"prixUnitaire",parseFloat(m.target.value)||0),disabled:r,placeholder:"Prix à définir...",className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg h-10 w-full"})}),n[`ligne_${f}_prix`]&&s.jsxs("p",{className:"text-red-500 text-xs flex items-center mt-1",children:[s.jsx(dh,{className:"h-3 w-3 mr-1"}),n[`ligne_${f}_prix`]]})]}),s.jsx("td",{className:"pr-4",children:s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-center h-10 flex items-center justify-center",children:s.jsx("span",{className:"font-medium text-gray-700",children:c(d.quantite,d.prixUnitaire)})})}),s.jsx("td",{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[(h=d.designation)!=null&&h.trim()&&d.quantite>0&&!d.validee?s.jsxs(Xe,{type:"button",size:"sm",onClick:()=>l(f),disabled:r,className:"bg-[#8B9B7A] hover:bg-[#7A8A69] text-white px-3 py-2 rounded-lg",title:"Valider cette ligne",children:[s.jsx(fh,{className:"h-4 w-4 mr-1"}),"Valider"]}):d.validee?s.jsxs("div",{className:"flex items-center text-[#8B9B7A] px-3 py-2 bg-[#8B9B7A]/10 rounded-lg",children:[s.jsx(jh,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"Validée"})]}):s.jsx("div",{className:"text-sm text-gray-400 px-3 py-2",children:"À compléter"}),t.length>1&&s.jsx(Xe,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(f),disabled:r,className:"text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg p-2",title:"Supprimer cette ligne",children:s.jsx(Hh,{className:"h-4 w-4"})})]})})]})})]})})]},d.id||f)})}),s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:s.jsx(h0,{className:"h-5 w-5 text-blue-600"})}),s.jsx("div",{children:t.some(d=>d.prixUnitaire===0)?s.jsxs(s.Fragment,{children:[s.jsxs("h3",{className:"font-medium text-blue-900",children:["Montant partiel HT : ",u()," €"]}),s.jsxs("p",{className:"text-sm text-amber-700 flex items-center",children:[s.jsx(Gb,{className:"h-4 w-4 mr-1"}),"Certains prix sont à définir"]})]}):s.jsxs("h3",{className:"font-medium text-blue-900",children:["Montant total HT : ",u()," €"]})})]})})}),n.lignes&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:s.jsxs("p",{className:"text-red-700 flex items-center",children:[s.jsx(dh,{className:"h-4 w-4 mr-2"}),n.lignes]})})]})},SQ=()=>{const{id:t}=Ka(),e=Fr(),r=!!t,[n,a]=y.useState({dateBdc:new Date().toISOString().split("T")[0],fournisseur:"",affaireId:"",categorieId:"",commentaire:"",montantHt:0,direction:"SORTANT",lieuLivraison:"ATELIER",adresseLivraison:"",lignes:[{id:Date.now(),designation:"",reference:"",quantite:1,prixUnitaire:0,validee:!1}]}),[i,o]=y.useState(!1),[l,c]=y.useState({}),[u,d]=y.useState([]),[f,A]=y.useState([]),[h,m]=y.useState([]);y.useEffect(()=>{p(),r&&g()},[t,r]);const p=async()=>{var w;try{const[N,E,_]=await Promise.all([Pw(),IS(),ay()]);console.log("🏢 [BDC-FORM] Fournisseurs response:",N),console.log("📋 [BDC-FORM] Affaires response:",E),console.log("📂 [BDC-FORM] Categories response:",_),d(N||[]),A(E||[]),m(_.data||_||[]),console.log("✅ [BDC-FORM] Données définies:",{fournisseurs:(N==null?void 0:N.length)||0,affaires:(E==null?void 0:E.length)||0,categories:((w=_.data||_)==null?void 0:w.length)||0})}catch(N){console.error("❌ [BDC-FORM] Erreur lors du chargement des données:",N),ve.error("Erreur lors du chargement des données")}},g=async()=>{var w;try{o(!0);const N=await Bq(t);if(N.data){const E=(N.data.lignes||n.lignes).map(_=>({..._,validee:_.validee||!1}));a({...N.data,dateBdc:((w=N.data.dateBdc)==null?void 0:w.split("T")[0])||new Date().toISOString().split("T")[0],lignes:E})}}catch(N){console.error("Erreur lors du chargement du BDC:",N),ve.error("Erreur lors du chargement du BDC")}finally{o(!1)}},x=(w,N)=>{a(E=>({...E,[w]:N})),l[w]&&c(E=>({...E,[w]:null}))},v=w=>{a(N=>({...N,lignes:w}))},b=()=>n.lignes.reduce((w,N)=>N.prixUnitaire>0?w+N.quantite*N.prixUnitaire:w,0),C=()=>{var _;const w={};n.dateBdc||(w.dateBdc="La date est requise"),n.fournisseur||(w.fournisseur="Le fournisseur est requis"),n.affaireId||(w.affaireId="L'affaire est requise"),n.categorieId||(w.categorieId="La catégorie est requise"),n.lieuLivraison==="CHANTIER"&&!((_=n.adresseLivraison)!=null&&_.trim())&&(w.adresseLivraison="L'adresse de livraison est requise pour un chantier");const N=n.lignes.filter(k=>{var D,S;return((D=k.designation)==null?void 0:D.trim())||((S=k.reference)==null?void 0:S.trim())});console.log("🔍 [BDC-VALIDATION] Lignes totales:",n.lignes.length),console.log("🔍 [BDC-VALIDATION] Lignes non vides:",N.length),console.log("🔍 [BDC-VALIDATION] Détail des lignes:",n.lignes.map((k,D)=>{var S,F;return{index:D,designation:k.designation,reference:k.reference,quantite:k.quantite,prixUnitaire:k.prixUnitaire,estVide:!((S=k.designation)!=null&&S.trim())&&!((F=k.reference)!=null&&F.trim())}})),N.length===0?w.lignes="Au moins un article est requis":N.forEach((k,D)=>{var F;const S=n.lignes.findIndex(M=>M===k);(F=k.designation)!=null&&F.trim()||(w[`ligne_${S}_designation`]="La désignation est requise"),(!k.quantite||k.quantite<=0)&&(w[`ligne_${S}_quantite`]="La quantité doit être positive"),k.prixUnitaire<0&&(w[`ligne_${S}_prix`]="Le prix ne peut pas être négatif")}),c(w);const E=Object.keys(w).length===0;return console.log("🔍 [BDC-VALIDATION] Erreurs détectées:",w),console.log("🔍 [BDC-VALIDATION] Formulaire valide:",E),E||console.log("❌ [BDC-VALIDATION] Échec de validation - détails:",{nombreErreurs:Object.keys(w).length,erreurs:w,formData:{dateBdc:n.dateBdc,fournisseur:n.fournisseur,affaireId:n.affaireId,categorieId:n.categorieId,lignes:n.lignes}}),E},j=async w=>{if(w.preventDefault(),console.log("🚀 [BDC-SUBMIT] Début de la soumission du formulaire"),!C()){console.log("❌ [BDC-SUBMIT] Validation échouée"),ve.error("Veuillez corriger les erreurs dans le formulaire");return}try{o(!0);const N=n.lignes.filter(_=>{var k,D;return((k=_.designation)==null?void 0:k.trim())||((D=_.reference)==null?void 0:D.trim())});console.log("📋 [BDC-SUBMIT] Préparation des données:",{lignesOriginales:n.lignes.length,lignesValides:N.length,formData:n});const E={...n,montantHt:b(),lignes:N.map(_=>({designation:_.designation,reference:_.reference||null,quantite:_.quantite,prixUnitaire:_.prixUnitaire||0}))};if(console.log("📤 [BDC-SUBMIT] Données à envoyer:",E),r)console.log("✏️ [BDC-SUBMIT] Mise à jour du BDC:",t),await gb(t,E),ve.success("BDC mis à jour avec succès");else{console.log("➕ [BDC-SUBMIT] Création du BDC");const _=await z2(E);console.log("✅ [BDC-SUBMIT] BDC créé avec succès:",_),ve.success("BDC créé avec succès")}e(-1)}catch(N){console.error("❌ [BDC-SUBMIT] Erreur lors de la sauvegarde:",N),ve.error("Erreur lors de la sauvegarde")}finally{o(!1)}};return i&&r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-lg font-medium",children:"Chargement..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 shadow-xl",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Xe,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"text-white hover:bg-white/10 rounded-lg",children:[s.jsx(cz,{className:"h-5 w-5 mr-2"}),"Retour"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-light text-white",children:r?"Modifier la demande de BDC":"Créer une demande de BDC"}),s.jsxs("p",{className:"text-blue-100 mt-1 flex items-center",children:[s.jsx(_ae,{className:"h-4 w-4 mr-2"}),"Le numéro de BDC sera généré automatiquement au format : BDC-YYYY-XXX (ex: BDC-2025-001)"]})]})]})})})}),s.jsx("div",{className:"w-full px-6 py-8",children:s.jsxs("form",{onSubmit:j,className:"space-y-8 max-w-8xl mx-auto",children:[s.jsxs(Kt,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[s.jsx(Er,{className:"pb-4",children:s.jsxs(Br,{className:"flex items-center text-xl font-light text-gray-800",children:[s.jsx(Qi,{className:"h-6 w-6 mr-3 text-blue-600"}),"Informations de la demande"]})}),s.jsxs(nr,{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:s.jsx(Qj,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Demande de BDC pour fournisseur"}),s.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("p",{children:"📋 Créez une demande détaillée avec articles à envoyer au fournisseur."}),s.jsx("p",{children:"⚠️ Les prix seront complétés lors du retour du fournisseur."})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs(jr,{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(Il,{className:"h-4 w-4 mr-2 text-gray-500"}),"Date de création *"]}),s.jsx(Ur,{type:"date",value:n.dateBdc,onChange:w=>x("dateBdc",w.target.value),className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg"}),l.dateBdc&&s.jsx("p",{className:"text-red-500 text-sm",children:l.dateBdc})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(jr,{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(NR,{className:"h-4 w-4 mr-2 text-gray-500"}),"Fournisseur * (",u.length," disponibles)"]}),s.jsxs(Xo,{value:n.fournisseur,onValueChange:w=>{console.log("🏢 [BDC-FORM] Fournisseur sélectionné:",w),x("fournisseur",w)},children:[s.jsx(Jo,{className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg",children:s.jsx(Zo,{placeholder:"Sélectionner un fournisseur"})}),s.jsx(el,{children:u.length>0?u.map(w=>s.jsx(la,{value:w.nom,children:w.nom},w.id)):s.jsx(la,{value:"loading",disabled:!0,children:"Chargement des fournisseurs..."})})]}),l.fournisseur&&s.jsx("p",{className:"text-red-500 text-sm",children:l.fournisseur})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(jr,{className:"text-sm font-medium text-gray-700",children:"Affaire *"}),s.jsxs(Xo,{value:n.affaireId,onValueChange:w=>x("affaireId",w),children:[s.jsx(Jo,{className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg",children:s.jsx(Zo,{placeholder:"Sélectionner une affaire"})}),s.jsx(el,{children:Array.isArray(f)&&f.map(w=>s.jsxs(la,{value:w.id,children:[w.numero," - ",w.libelle]},w.id))})]}),l.affaireId&&s.jsx("p",{className:"text-red-500 text-sm",children:l.affaireId})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(jr,{className:"text-sm font-medium text-gray-700",children:"Catégorie d'achat *"}),s.jsxs(Xo,{value:n.categorieId,onValueChange:w=>x("categorieId",w),children:[s.jsx(Jo,{className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg",children:s.jsx(Zo,{placeholder:"Sélectionner une catégorie"})}),s.jsx(el,{children:Array.isArray(h)&&h.map(w=>s.jsxs(la,{value:w.id,children:[w.code," - ",w.intitule]},w.id))})]}),l.categorieId&&s.jsx("p",{className:"text-red-500 text-sm",children:l.categorieId})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs(jr,{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(NR,{className:"h-4 w-4 mr-2 text-blue-600"}),"Lieu de livraison *"]}),s.jsxs(Xo,{value:n.lieuLivraison,onValueChange:w=>{x("lieuLivraison",w),w==="ATELIER"&&x("adresseLivraison","")},children:[s.jsx(Jo,{className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg",children:s.jsx(Zo,{placeholder:"Choisir le lieu de livraison"})}),s.jsxs(el,{children:[s.jsx(la,{value:"ATELIER",children:"🏭 Atelier - La Manufacture de l'agencement"}),s.jsx(la,{value:"CHANTIER",children:"🚧 Chantier - Adresse personnalisée"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(jr,{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(Qj,{className:"h-4 w-4 mr-2 text-green-600"}),"Adresse de livraison ",n.lieuLivraison==="CHANTIER"&&"*"]}),n.lieuLivraison==="ATELIER"?s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"La Manufacture de l'agencement"}),s.jsx("p",{className:"text-xs text-blue-600",children:"2273 avenue des Pyrénées"}),s.jsx("p",{className:"text-xs text-blue-600",children:"64520 Came"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Fm,{value:n.adresseLivraison,onChange:w=>x("adresseLivraison",w.target.value),placeholder:"Adresse complète du chantier...",className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg min-h-[80px] resize-none"}),l.adresseLivraison&&s.jsx("p",{className:"text-red-500 text-sm",children:l.adresseLivraison})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(jr,{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(tP,{className:"h-4 w-4 mr-2 text-gray-500"}),"Commentaire"]}),s.jsx(Fm,{value:n.commentaire,onChange:w=>x("commentaire",w.target.value),placeholder:"Commentaire sur la commande...",className:"border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 rounded-lg min-h-[100px] resize-none"})]})]})]}),s.jsxs(Kt,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:[s.jsx(Er,{className:"pb-4",children:s.jsxs(Br,{className:"flex items-center text-xl font-light text-gray-800",children:[s.jsx(Qj,{className:"h-6 w-6 mr-3 text-blue-600"}),"Articles commandés"]})}),s.jsx(nr,{children:s.jsx(Jet,{lignes:n.lignes,onLignesChange:v,errors:l})})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white/80 backdrop-blur-sm rounded-xl border-0 shadow-lg p-6",children:[s.jsx(Xe,{type:"button",variant:"outline",onClick:()=>e(-1),className:"px-6 py-2 border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg",children:"Annuler"}),s.jsx(Xe,{type:"submit",disabled:i,className:"px-8 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:i?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Création..."]}):s.jsxs("div",{className:"flex items-center",children:[s.jsx(uz,{className:"h-4 w-4 mr-2"}),"Créer le BDC"]})})]})]})})]})},Vo=({icon:t,label:e,value:r,color:n})=>(Qs(),s.jsxs(Bt,{align:"flex-start",spacing:"xs",children:[s.jsx(ut,{mt:3,style:{color:n},children:t}),s.jsxs("div",{children:[s.jsx(He,{size:"sm",c:"dimmed",children:e}),s.jsx(He,{children:r||"-"})]})]})),Zet=()=>{var j;const{id:t}=Ka(),e=Fr(),r=Qs(),[n,a]=y.useState(null),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(!1),[f,A]=y.useState(!1);y.useEffect(()=>{(async()=>{var N;try{c(!0);const E=await Bq(t);if(a(E),(N=E.affaire)!=null&&N.id){const _=await fbe(E.affaire.id);o(_)}}catch(E){console.error("Erreur lors du chargement des détails du bon de commande:",E),Vt.show({title:"Erreur",message:"Impossible de charger les détails du bon de commande",color:"red"})}finally{c(!1)}})()},[t]);const h=async()=>{n&&n.statut==="VALIDE"?d(!0):window.confirm("Êtes-vous sûr de vouloir supprimer ce bon de commande ?")&&await m()},m=async(w=null)=>{var N,E;try{A(!0),await sy(t,w),Vt.show({title:"Succès",message:"Bon de commande supprimé avec succès",color:"green"}),e("/bdc")}catch(_){console.error("Erreur lors de la suppression du bon de commande:",_),((N=_.response)==null?void 0:N.status)===400?Vt.show({title:"Erreur",message:"Un mot de passe est requis pour supprimer un BDC validé",color:"red"}):((E=_.response)==null?void 0:E.status)===401?Vt.show({title:"Erreur",message:"Mot de passe incorrect",color:"red"}):Vt.show({title:"Erreur",message:"Impossible de supprimer le bon de commande",color:"red"})}finally{A(!1),d(!1)}},p=w=>{m(w)},g=()=>{d(!1)},x=async()=>{try{const w=new Date;await TS(t,w),a({...n,dateReception:w}),Vt.show({title:"Succès",message:"Bon de commande réceptionné avec succès",color:"green"})}catch(w){console.error("Erreur lors de la réception du bon de commande:",w),Vt.show({title:"Erreur",message:"Impossible de réceptionner le bon de commande",color:"red"})}},v=async()=>{try{await DS(t),a({...n,statut:"VALIDE"}),Vt.show({title:"Succès",message:"Bon de commande validé avec succès",color:"green"})}catch(w){console.error("Erreur lors de la validation du bon de commande:",w),Vt.show({title:"Erreur",message:"Impossible de valider le bon de commande",color:"red"})}},b=async()=>{if(window.confirm("Êtes-vous sûr de vouloir annuler ce bon de commande ?"))try{await qk(t),a({...n,statut:"ANNULE"}),Vt.show({title:"Succès",message:"Bon de commande annulé avec succès",color:"orange"})}catch(w){console.error("Erreur lors de l'annulation du bon de commande:",w),Vt.show({title:"Erreur",message:"Impossible d'annuler le bon de commande",color:"red"})}},C=()=>{if(!n)return null;const w={EN_ATTENTE:{color:"orange",icon:wn,text:"En attente de validation"},VALIDE:{color:"blue",icon:Gr,text:"Validé"},RECEPTIONNE:{color:"green",icon:Gr,text:"Réceptionné"},ANNULE:{color:"red",icon:ls,text:"Annulé"}};if(n.dateReception){const _=w.RECEPTIONNE,k=_.icon;return s.jsx(bn,{color:_.color,size:"lg",variant:"light",children:s.jsxs(Bt,{spacing:4,children:[s.jsx(k,{size:16}),s.jsxs(He,{children:["Réceptionné le ",new Date(n.dateReception).toLocaleDateString("fr-FR")]})]})})}const N=w[n.statut]||w.EN_ATTENTE,E=N.icon;return s.jsx(bn,{color:N.color,size:"lg",variant:"light",children:s.jsxs(Bt,{spacing:4,children:[s.jsx(E,{size:16}),s.jsx(He,{children:N.text})]})})};return s.jsxs(Od,{size:"xl",children:[s.jsx(to,{visible:l,overlayProps:{blur:2}}),s.jsxs(Bt,{position:"apart",mb:"lg",align:"center",children:[s.jsxs(Bt,{children:[s.jsx(Dn,{variant:"light",component:Xi,to:"/bdc",size:"lg",children:s.jsx(Ci,{size:20})}),s.jsxs("div",{children:[s.jsx(Kr,{order:2,children:"Bon de commande"}),n&&s.jsx(He,{c:"dimmed",children:n.numero})]})]}),s.jsxs(Bt,{children:[n&&n.statut==="EN_ATTENTE"&&s.jsxs(s.Fragment,{children:[s.jsx(rr,{style:{backgroundColor:"#84a368",borderColor:"#84a368",color:"white"},onClick:v,leftSection:s.jsx(Gr,{size:16}),onMouseOver:w=>{w.target.style.backgroundColor="#6b7f54",w.target.style.borderColor="#6b7f54"},onMouseOut:w=>{w.target.style.backgroundColor="#84a368",w.target.style.borderColor="#84a368"},children:"Valider"}),s.jsx(rr,{style:{backgroundColor:"#8b4513",borderColor:"#8b4513",color:"white"},onClick:b,leftSection:s.jsx(ls,{size:16}),onMouseOver:w=>{w.target.style.backgroundColor="#6b3410",w.target.style.borderColor="#6b3410"},onMouseOut:w=>{w.target.style.backgroundColor="#8b4513",w.target.style.borderColor="#8b4513"},children:"Annuler"})]}),n&&n.statut==="VALIDE"&&!n.dateReception&&s.jsx(rr,{color:"green",onClick:x,leftSection:s.jsx(Gr,{size:16}),children:"Réceptionner"}),s.jsx(rr,{variant:"outline",component:Xi,to:`/bdc/${t}/modifier`,leftSection:s.jsx(Po,{size:16}),children:"Modifier"}),s.jsx(rr,{color:"red",variant:"subtle",onClick:h,leftSection:s.jsx(Zn,{size:16}),children:"Supprimer"})]})]}),n&&s.jsxs(tt,{children:[s.jsx(tt.Col,{span:8,children:s.jsxs(Hr,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[s.jsx(Hr.Section,{withBorder:!0,p:"md",bg:r.colors.blue[0],children:s.jsxs(Bt,{position:"apart",children:[s.jsxs(Bt,{children:[s.jsx(Su,{size:24,color:r.colors.blue[6]}),s.jsx(Kr,{order:3,children:n.numero})]}),C()]})}),s.jsx(wi,{my:"md",label:"Informations générales",labelPosition:"center"}),s.jsxs(tt,{columns:12,children:[s.jsxs(tt.Col,{span:6,children:[s.jsx(Vo,{icon:s.jsx(ro,{size:18}),label:"Affaire",value:n.affaire?`${n.affaire.numero} - ${n.affaire.libelle}`:"",color:r.colors.blue[6]}),s.jsx(Vo,{icon:s.jsx(C0e,{size:18}),label:"Catégorie",value:n.categorie?`${n.categorie.code} - ${n.categorie.intitule}`:"",color:r.colors.green[6]}),s.jsx(Vo,{icon:s.jsx(Wa,{size:18}),label:"Fournisseur",value:n.fournisseur,color:r.colors.violet[6]})]}),s.jsxs(tt.Col,{span:6,children:[s.jsx(Vo,{icon:s.jsx(_s,{size:18}),label:"Date du BDC",value:n.dateBdc?new Date(n.dateBdc).toLocaleDateString("fr-FR"):"-",color:r.colors.orange[6]}),s.jsx(Vo,{icon:s.jsx(Sl,{size:18}),label:"Date de réception",value:n.dateReception?new Date(n.dateReception).toLocaleDateString("fr-FR"):"Non réceptionné",color:r.colors.red[6]}),s.jsx(Vo,{icon:s.jsx(g0e,{size:18}),label:"Commentaire",value:n.commentaire||"Aucun commentaire",color:r.colors.gray[6]})]})]}),s.jsx(wi,{my:"md",label:"Montants",labelPosition:"center"}),s.jsxs(tt,{columns:12,children:[s.jsx(tt.Col,{span:4,children:s.jsx(Hn,{p:"md",withBorder:!0,radius:"md",bg:r.colors.blue[0],children:s.jsx(Vo,{icon:s.jsx(V1,{size:20}),label:"Montant HT",value:`${n.montantHt.toLocaleString("fr-FR")} €`,color:r.colors.blue[6]})})}),s.jsx(tt.Col,{span:4,children:s.jsx(Hn,{p:"md",withBorder:!0,radius:"md",bg:r.colors.green[0],children:s.jsx(Vo,{icon:s.jsx(Do,{size:20}),label:"Frais généraux",value:`${((j=n.montantFg)==null?void 0:j.toLocaleString("fr-FR"))||"0"} €`,color:r.colors.green[6]})})}),s.jsx(tt.Col,{span:4,children:s.jsx(Hn,{p:"md",withBorder:!0,radius:"md",bg:r.colors.orange[0],children:s.jsx(Vo,{icon:s.jsx(V1,{size:20}),label:"Total",value:`${(n.montantHt+(n.montantFg||0)).toLocaleString("fr-FR")} €`,color:r.colors.orange[6]})})})]})]})}),s.jsx(tt.Col,{span:4,children:s.jsxs(Hr,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,children:[s.jsx(Hr.Section,{withBorder:!0,p:"md",bg:r.colors.grape[0],children:s.jsxs(Bt,{children:[s.jsx(ro,{size:24,color:r.colors.grape[6]}),s.jsx(Kr,{order:3,children:"Statistiques affaire"})]})}),i?s.jsxs(s.Fragment,{children:[s.jsxs(He,{mt:"md",children:[i.numeroAffaire," - ",i.libelleAffaire]}),s.jsx(wi,{my:"md"}),s.jsx(Vo,{icon:s.jsx(V1,{size:18}),label:"Objectif achat HT",value:`${i.objectifAchatHt.toLocaleString("fr-FR")} €`,color:r.colors.blue[6]}),s.jsx(Vo,{icon:s.jsx(V1,{size:18}),label:"Total achat HT",value:`${i.totalMontantHt.toLocaleString("fr-FR")} €`,color:r.colors.green[6]}),s.jsx(Vo,{icon:s.jsx(Do,{size:18}),label:"Total frais généraux",value:`${i.totalMontantFg.toLocaleString("fr-FR")} €`,color:r.colors.orange[6]}),s.jsx(Vo,{icon:s.jsx(Do,{size:18}),label:"Écart objectif",value:`${i.ecartObjectif.toFixed(2)} %`,color:i.ecartObjectif>0?r.colors.red[6]:r.colors.green[6]})]}):s.jsx(He,{align:"center",c:"dimmed",my:"md",children:"Aucune statistique disponible"})]})})]}),s.jsx(rF,{isOpen:u,onClose:g,onConfirm:p,title:"Suppression d'un BDC validé",message:`Ce bon de commande (${n==null?void 0:n.numero}) est validé. Un mot de passe administrateur est requis pour le supprimer.`,loading:f})]})},Wte=async t=>{var e,r;try{const{data:n}=await Ee.post("/pointages",t);return n}catch(n){throw console.error("Erreur lors de la création du pointage:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},nF=async(t={})=>{var e,r;try{const{data:n}=await Ee.get("/pointages",{params:t});return n}catch(n){throw console.error("Erreur lors de la récupération des pointages:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Gte=async t=>{var e,r;try{const{data:n}=await Ee.get(`/pointages/${t}`);return n}catch(n){throw console.error(`Erreur lors de la récupération du pointage ${t}:`,((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},sF=async(t,e)=>{var r,n;try{const{data:a}=await Ee.patch(`/pointages/${t}`,e);return a}catch(a){throw console.error(`Erreur lors de la mise à jour du pointage ${t}:`,((r=a.response)==null?void 0:r.data)||a.message),((n=a.response)==null?void 0:n.data)||a}},ett=async t=>{var e,r;try{const{data:n}=await Ee.delete(`/pointages/${t}`);return n}catch(n){throw console.error(`Erreur lors de la suppression du pointage ${t}:`,((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},E_=async(t="mois")=>{try{return await new Promise(e=>setTimeout(e,500)),{totalHeures:175.5,heuresParType:[{type:"ATELIER",total:95},{type:"POSE",total:62.5},{type:"DEPLACEMENT",total:18}],heuresParAffaire:[{affaire:"A2023-041",total:42.5},{affaire:"A2023-053",total:36},{affaire:"A2023-039",total:25.5},{affaire:"A2023-047",total:22},{affaire:"A2023-051",total:18.5}],heuresParJour:[{date:"2023-06-01",total:8.5},{date:"2023-06-02",total:9},{date:"2023-06-05",total:7.5},{date:"2023-06-06",total:8},{date:"2023-06-07",total:9.5}]}}catch(e){throw console.error("Erreur lors de la récupération des statistiques:",e),e}},ttt={createPointage:Wte,getPointages:nF,getPointageById:Gte,updatePointage:sF,deletePointage:ett,getPointagesStats:E_,getStats:async t=>await E_(t)},EQ={FAB:"FAB",SER:"SER",POSE:"POSE"},B_=()=>{const{id:t}=Ka(),e=Fr(),r=J9(),n=!!t,i=new URLSearchParams(r.search).get("date"),[o,l]=y.useState({datePointage:i||new Date().toISOString().split("T")[0],nbHeures:"",commentaire:"",typeHeure:EQ.FAB,affaireId:""}),[c,u]=y.useState([]),[d,f]=y.useState(!1),[A,h]=y.useState(null),m=y.useCallback(async()=>{try{const b=await IS();u(b||[])}catch{ve.error("Erreur lors de la récupération des affaires."),h("Impossible de charger la liste des affaires.")}},[]),p=y.useCallback(async b=>{f(!0);try{const C=await Gte(b);C&&l({datePointage:new Date(C.datePointage).toISOString().split("T")[0],nbHeures:String(C.nbHeures),commentaire:C.commentaire||"",typeHeure:C.typeHeure,affaireId:String(C.affaireId)})}catch{ve.error("Erreur lors de la récupération du pointage."),h("Impossible de charger les données du pointage.")}f(!1)},[]);y.useEffect(()=>{m(),n&&t&&p(t)},[m,p,n,t]);const g=b=>{const{name:C,value:j}=b.target;l(w=>({...w,[C]:j}))},x=(b,C)=>{l(j=>({...j,[b]:C}))},v=async b=>{if(b.preventDefault(),!o.affaireId||!o.nbHeures||o.nbHeures<=0){ve.error("Veuillez sélectionner une affaire et saisir un nombre d'heures valide.");return}f(!0);try{const C={...o,nbHeures:parseFloat(o.nbHeures)};n?(await sF(t,C),ve.success("Pointage mis à jour avec succès !")):(await Wte(C),ve.success("Pointage créé avec succès !")),e("/pointages")}catch(C){ve.error(C.message||"Erreur lors de la sauvegarde du pointage.")}f(!1)};return A?s.jsx("div",{className:"container mx-auto p-4 text-red-600",children:A}):n&&d&&!o.affaireId?s.jsx("div",{className:"container mx-auto p-4",children:"Chargement du pointage..."}):s.jsx("div",{className:"container mx-auto p-4",children:s.jsxs(Kt,{className:"max-w-2xl mx-auto",children:[s.jsxs(Er,{children:[s.jsx(Br,{children:n?"Modifier le Pointage":"Saisir un Pointage"}),s.jsx(fm,{children:n?"Modifiez les détails de votre pointage.":"Enregistrez vos heures pour une affaire."})]}),s.jsx(nr,{children:s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"datePointage",children:"Date du pointage *"}),s.jsx(Ur,{id:"datePointage",name:"datePointage",type:"date",value:o.datePointage,onChange:g,required:!0})]}),s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"affaireId",children:"Affaire *"}),s.jsxs(Xo,{name:"affaireId",value:o.affaireId,onValueChange:b=>x("affaireId",b),required:!0,children:[s.jsx(Jo,{children:s.jsx(Zo,{placeholder:"Sélectionner une affaire"})}),s.jsxs(el,{children:[c.length===0&&s.jsx(la,{value:"",disabled:!0,children:"Chargement des affaires..."}),c.map(b=>s.jsxs(la,{value:String(b.id),children:[b.numero," - ",b.libelle]},b.id))]})]})]}),s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"typeHeure",children:"Type d'heure *"}),s.jsxs(Xo,{name:"typeHeure",value:o.typeHeure,onValueChange:b=>x("typeHeure",b),required:!0,children:[s.jsx(Jo,{children:s.jsx(Zo,{placeholder:"Sélectionner un type d'heure"})}),s.jsx(el,{children:Object.entries(EQ).map(([b,C])=>s.jsx(la,{value:C,children:C},b))})]})]}),s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"nbHeures",children:"Nombre d'heures *"}),s.jsx(Ur,{id:"nbHeures",name:"nbHeures",type:"number",step:"0.25",min:"0.25",value:o.nbHeures,onChange:g,required:!0,placeholder:"Ex: 7.5"})]}),s.jsxs("div",{children:[s.jsx(jr,{htmlFor:"commentaire",children:"Commentaire"}),s.jsx(Fm,{id:"commentaire",name:"commentaire",value:o.commentaire,onChange:g,placeholder:"Détails sur le travail effectué..."})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(Xe,{type:"button",variant:"outline",onClick:()=>e("/pointages"),disabled:d,children:"Annuler"}),s.jsx(Xe,{type:"submit",disabled:d||c.length===0,children:d?n?"Sauvegarde...":"Création...":n?"Sauvegarder":"Créer Pointage"})]})]})})]})})};var s5,ur,qte,Kte,nx,YA,BQ,Yte,Xte,dN={},Jte=[],rtt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function bh(t,e){for(var r in e)t[r]=e[r];return t}function Zte(t){var e=t.parentNode;e&&e.removeChild(t)}function rt(t,e,r){var n,a,i,o={};for(i in e)i=="key"?n=e[i]:i=="ref"?a=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?s5.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)o[i]===void 0&&(o[i]=t.defaultProps[i]);return u2(t,o,n,a,null)}function u2(t,e,r,n,a){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++qte};return a==null&&ur.vnode!=null&&ur.vnode(i),i}function Zd(){return{current:null}}function Us(t){return t.children}function ntt(t,e,r,n,a){var i;for(i in r)i==="children"||i==="key"||i in e||fN(t,i,null,r[i],n);for(i in e)a&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===e[i]||fN(t,i,e[i],r[i],n)}function TQ(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||rtt.test(e)?r:r+"px"}function fN(t,e,r,n,a){var i;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||TQ(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||TQ(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n||t.addEventListener(e,i?IQ:DQ,i):t.removeEventListener(e,i?IQ:DQ,i);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,r))}}function DQ(t){nx=!0;try{return this.l[t.type+!1](ur.event?ur.event(t):t)}finally{nx=!1}}function IQ(t){nx=!0;try{return this.l[t.type+!0](ur.event?ur.event(t):t)}finally{nx=!1}}function sl(t,e){this.props=t,this.context=e}function rw(t,e){if(e==null)return t.__?rw(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?rw(t):null}function ere(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return ere(t)}}function stt(t){nx?setTimeout(t):Yte(t)}function T_(t){(!t.__d&&(t.__d=!0)&&YA.push(t)&&!hN.__r++||BQ!==ur.debounceRendering)&&((BQ=ur.debounceRendering)||stt)(hN)}function hN(){var t,e,r,n,a,i,o,l;for(YA.sort(function(c,u){return c.__v.__b-u.__v.__b});t=YA.shift();)t.__d&&(e=YA.length,n=void 0,a=void 0,o=(i=(r=t).__v).__e,(l=r.__P)&&(n=[],(a=bh({},i)).__v=i.__v+1,aF(l,i,a,r.__n,l.ownerSVGElement!==void 0,i.__h!=null?[o]:null,n,o??rw(i),i.__h),are(n,i),i.__e!=o&&ere(i)),YA.length>e&&YA.sort(function(c,u){return c.__v.__b-u.__v.__b}));hN.__r=0}function tre(t,e,r,n,a,i,o,l,c,u){var d,f,A,h,m,p,g,x=n&&n.__k||Jte,v=x.length;for(r.__k=[],d=0;d<e.length;d++)if((h=r.__k[d]=(h=e[d])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?u2(null,h,null,null,h):Array.isArray(h)?u2(Us,{children:h},null,null,null):h.__b>0?u2(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=r,h.__b=r.__b+1,(A=x[d])===null||A&&h.key==A.key&&h.type===A.type)x[d]=void 0;else for(f=0;f<v;f++){if((A=x[f])&&h.key==A.key&&h.type===A.type){x[f]=void 0;break}A=null}aF(t,h,A=A||dN,a,i,o,l,c,u),m=h.__e,(f=h.ref)&&A.ref!=f&&(g||(g=[]),A.ref&&g.push(A.ref,null,h),g.push(f,h.__c||m,h)),m!=null?(p==null&&(p=m),typeof h.type=="function"&&h.__k===A.__k?h.__d=c=rre(h,c,t):c=nre(t,h,A,x,m,c),typeof r.type=="function"&&(r.__d=c)):c&&A.__e==c&&c.parentNode!=t&&(c=rw(A))}for(r.__e=p,d=v;d--;)x[d]!=null&&(typeof r.type=="function"&&x[d].__e!=null&&x[d].__e==r.__d&&(r.__d=sre(n).nextSibling),ore(x[d],x[d]));if(g)for(d=0;d<g.length;d++)ire(g[d],g[++d],g[++d])}function rre(t,e,r){for(var n,a=t.__k,i=0;a&&i<a.length;i++)(n=a[i])&&(n.__=t,e=typeof n.type=="function"?rre(n,e,r):nre(r,n,n,a,n.__e,e));return e}function AN(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(r){AN(r,e)}):e.push(t)),e}function nre(t,e,r,n,a,i){var o,l,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(r==null||a!=i||a.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(a),o=null;else{for(l=i,c=0;(l=l.nextSibling)&&c<n.length;c+=1)if(l==a)break e;t.insertBefore(a,i),o=i}return o!==void 0?o:a.nextSibling}function sre(t){var e,r,n;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((r=t.__k[e])&&(n=sre(r)))return n}return null}function aF(t,e,r,n,a,i,o,l,c){var u,d,f,A,h,m,p,g,x,v,b,C,j,w,N,E=e.type;if(e.constructor!==void 0)return null;r.__h!=null&&(c=r.__h,l=e.__e=r.__e,e.__h=null,i=[l]),(u=ur.__b)&&u(e);try{e:if(typeof E=="function"){if(g=e.props,x=(u=E.contextType)&&n[u.__c],v=u?x?x.props.value:u.__:n,r.__c?p=(d=e.__c=r.__c).__=d.__E:("prototype"in E&&E.prototype.render?e.__c=d=new E(g,v):(e.__c=d=new sl(g,v),d.constructor=E,d.render=itt),x&&x.sub(d),d.props=g,d.state||(d.state={}),d.context=v,d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),E.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=bh({},d.__s)),bh(d.__s,E.getDerivedStateFromProps(g,d.__s))),A=d.props,h=d.state,d.__v=e,f)E.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(E.getDerivedStateFromProps==null&&g!==A&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(g,v),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(g,d.__s,v)===!1||e.__v===r.__v){for(e.__v!==r.__v&&(d.props=g,d.state=d.__s,d.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(_){_&&(_.__=e)}),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(g,d.__s,v),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(A,h,m)})}if(d.context=v,d.props=g,d.__P=t,C=ur.__r,j=0,"prototype"in E&&E.prototype.render){for(d.state=d.__s,d.__d=!1,C&&C(e),u=d.render(d.props,d.state,d.context),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[]}else do d.__d=!1,C&&C(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++j<25);d.state=d.__s,d.getChildContext!=null&&(n=bh(bh({},n),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(A,h)),N=u!=null&&u.type===Us&&u.key==null?u.props.children:u,tre(t,Array.isArray(N)?N:[N],e,r,n,a,i,o,l,c),d.base=e.__e,e.__h=null,d.__h.length&&o.push(d),p&&(d.__E=d.__=null),d.__e=!1}else i==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=att(r.__e,e,r,n,a,i,o,c);(u=ur.diffed)&&u(e)}catch(_){e.__v=null,(c||i!=null)&&(e.__e=l,e.__h=!!c,i[i.indexOf(l)]=null),ur.__e(_,e,r)}}function are(t,e){ur.__c&&ur.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){ur.__e(n,r.__v)}})}function att(t,e,r,n,a,i,o,l){var c,u,d,f=r.props,A=e.props,h=e.type,m=0;if(h==="svg"&&(a=!0),i!=null){for(;m<i.length;m++)if((c=i[m])&&"setAttribute"in c==!!h&&(h?c.localName===h:c.nodeType===3)){t=c,i[m]=null;break}}if(t==null){if(h===null)return document.createTextNode(A);t=a?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,A.is&&A),i=null,l=!1}if(h===null)f===A||l&&t.data===A||(t.data=A);else{if(i=i&&s5.call(t.childNodes),u=(f=r.props||dN).dangerouslySetInnerHTML,d=A.dangerouslySetInnerHTML,!l){if(i!=null)for(f={},m=0;m<t.attributes.length;m++)f[t.attributes[m].name]=t.attributes[m].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(ntt(t,A,f,a,l),d)e.__k=[];else if(m=e.props.children,tre(t,Array.isArray(m)?m:[m],e,r,n,a&&h!=="foreignObject",i,o,i?i[0]:r.__k&&rw(r,0),l),i!=null)for(m=i.length;m--;)i[m]!=null&&Zte(i[m]);l||("value"in A&&(m=A.value)!==void 0&&(m!==t.value||h==="progress"&&!m||h==="option"&&m!==f.value)&&fN(t,"value",m,f.value,!1),"checked"in A&&(m=A.checked)!==void 0&&m!==t.checked&&fN(t,"checked",m,f.checked,!1))}return t}function ire(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){ur.__e(n,r)}}function ore(t,e,r){var n,a;if(ur.unmount&&ur.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ire(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){ur.__e(i,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(a=0;a<n.length;a++)n[a]&&ore(n[a],e,r||typeof t.type!="function");r||t.__e==null||Zte(t.__e),t.__=t.__e=t.__d=void 0}function itt(t,e,r){return this.constructor(t,r)}function nw(t,e,r){var n,a,i;ur.__&&ur.__(t,e),a=(n=!1)?null:e.__k,i=[],aF(e,t=e.__k=rt(Us,null,[t]),a||dN,dN,e.ownerSVGElement!==void 0,a?null:e.firstChild?s5.call(e.childNodes):null,i,a?a.__e:e.firstChild,n),are(i,t)}function ott(t,e){var r={__c:e="__cC"+Xte++,__:t,Consumer:function(n,a){return n.children(a)},Provider:function(n){var a,i;return this.getChildContext||(a=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(l){l.__e=!0,T_(l)})},this.sub=function(o){a.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),l&&l.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}s5=Jte.slice,ur={__e:function(t,e,r,n){for(var a,i,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,n||{}),o=a.__d),o)return a.__E=a}catch(l){t=l}throw t}},qte=0,Kte=function(t){return t!=null&&t.constructor===void 0},nx=!1,sl.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=bh({},this.state),typeof t=="function"&&(t=t(bh({},r),this.props)),t&&bh(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),T_(this))},sl.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),T_(this))},sl.prototype.render=Us,YA=[],Yte=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hN.__r=0,Xte=0;var lu,XT,_Q,lre=[],JT=[],PQ=ur.__b,kQ=ur.__r,OQ=ur.diffed,FQ=ur.__c,RQ=ur.unmount;function ltt(){for(var t;t=lre.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(d2),t.__H.__h.forEach(D_),t.__H.__h=[]}catch(e){t.__H.__h=[],ur.__e(e,t.__v)}}ur.__b=function(t){lu=null,PQ&&PQ(t)},ur.__r=function(t){kQ&&kQ(t);var e=(lu=t.__c).__H;e&&(XT===lu?(e.__h=[],lu.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=JT,r.__N=r.i=void 0})):(e.__h.forEach(d2),e.__h.forEach(D_),e.__h=[])),XT=lu},ur.diffed=function(t){OQ&&OQ(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(lre.push(e)!==1&&_Q===ur.requestAnimationFrame||((_Q=ur.requestAnimationFrame)||ctt)(ltt)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==JT&&(r.__=r.__V),r.i=void 0,r.__V=JT})),XT=lu=null},ur.__c=function(t,e){e.some(function(r){try{r.__h.forEach(d2),r.__h=r.__h.filter(function(n){return!n.__||D_(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],ur.__e(n,r.__v)}}),FQ&&FQ(t,e)},ur.unmount=function(t){RQ&&RQ(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{d2(n)}catch(a){e=a}}),r.__H=void 0,e&&ur.__e(e,r.__v))};var MQ=typeof requestAnimationFrame=="function";function ctt(t){var e,r=function(){clearTimeout(n),MQ&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);MQ&&(e=requestAnimationFrame(r))}function d2(t){var e=lu,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),lu=e}function D_(t){var e=lu;t.__c=t.__(),lu=e}function utt(t,e){for(var r in e)t[r]=e[r];return t}function LQ(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}function UQ(t){this.props=t}(UQ.prototype=new sl).isPureReactComponent=!0,UQ.prototype.shouldComponentUpdate=function(t,e){return LQ(this.props,t)||LQ(this.state,e)};var $Q=ur.__b;ur.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),$Q&&$Q(t)};var dtt=ur.__e;ur.__e=function(t,e,r,n){if(t.then){for(var a,i=e;i=i.__;)if((a=i.__c)&&a.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),a.__c(t,e)}dtt(t,e,r,n)};var HQ=ur.unmount;function cre(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=utt({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return cre(n,e,r)})),t}function ure(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return ure(n,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}function ZT(){this.__u=0,this.t=null,this.__b=null}function dre(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function _j(){this.u=null,this.o=null}ur.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),HQ&&HQ(t)},(ZT.prototype=new sl).__c=function(t,e){var r=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var a=dre(n.__v),i=!1,o=function(){i||(i=!0,r.__R=null,a?a(l):l())};r.__R=o;var l=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=ure(u,u.__c.__P,u.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},c=e.__h===!0;n.__u++||c||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(o,o)},ZT.prototype.componentWillUnmount=function(){this.t=[]},ZT.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=cre(this.__b,r,n.__O=n.__P)}this.__b=null}var a=e.__a&&rt(Us,null,t.fallback);return a&&(a.__h=null),[rt(Us,null,e.__a?null:t.children),a]};var QQ=function(t,e,r){if(++r[1]===r[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(r=t.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.u=r=r[2]}};function ftt(t){return this.getChildContext=function(){return t.context},t.children}function htt(t){var e=this,r=t.i;e.componentWillUnmount=function(){nw(null,e.l),e.l=null,e.i=null},e.i&&e.i!==r&&e.componentWillUnmount(),t.__v?(e.l||(e.i=r,e.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),e.i.appendChild(n)},insertBefore:function(n,a){this.childNodes.push(n),e.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.i.removeChild(n)}}),nw(rt(ftt,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function Att(t,e){var r=rt(htt,{__v:t,i:e});return r.containerInfo=e,r}(_j.prototype=new sl).__a=function(t){var e=this,r=dre(e.__v),n=e.o.get(t);return n[0]++,function(a){var i=function(){e.props.revealOrder?(n.push(a),QQ(e,t,n)):a()};r?r(i):i()}},_j.prototype.render=function(t){this.u=null,this.o=new Map;var e=AN(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.o.set(e[r],this.u=[1,0,this.u]);return t.children},_j.prototype.componentDidUpdate=_j.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,r){QQ(t,r,e)})};var mtt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ptt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,gtt=typeof document<"u",xtt=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};sl.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(sl.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var zQ=ur.event;function vtt(){}function btt(){return this.cancelBubble}function ytt(){return this.defaultPrevented}ur.event=function(t){return zQ&&(t=zQ(t)),t.persist=vtt,t.isPropagationStopped=btt,t.isDefaultPrevented=ytt,t.nativeEvent=t};var VQ={configurable:!0,get:function(){return this.class}},WQ=ur.vnode;ur.vnode=function(t){var e=t.type,r=t.props,n=r;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var i in n={},r){var o=r[i];gtt&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in r&&o==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&o===!0?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!xtt(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():a&&ptt.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=o)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=AN(r.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=AN(r.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),t.props=n,r.class!=r.className&&(VQ.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",VQ))}t.$$typeof=mtt,WQ&&WQ(t)};var GQ=ur.__r;ur.__r=function(t){GQ&&GQ(t),t.__c};const fre=[],I_=new Map;function hre(t){fre.push(t),I_.forEach(e=>{mre(e,t)})}function wtt(t){t.isConnected&&t.getRootNode&&Are(t.getRootNode())}function Are(t){let e=I_.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const r=Ctt();r&&(e.nonce=r);const n=t===document?document.head:t,a=t===document?n.querySelector("script,link[rel=stylesheet],link[as=style],style"):n.firstChild;n.insertBefore(e,a)}I_.set(t,e),jtt(e)}}function jtt(t){for(const e of fre)mre(t,e)}function mre(t,e){const{sheet:r}=t,n=r.cssRules.length;e.split("}").forEach((a,i)=>{a=a.trim(),a&&r.insertRule(a+"}",n+i)})}let e4;function Ctt(){return e4===void 0&&(e4=Ntt()),e4}function Ntt(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&Are(document);var Stt=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';hre(Stt);class iF{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:r}=this;r[e]=(r[e]||0)+1,this.clearTimeout()}resume(e="",r){let{pauseDepths:n}=this;e in n&&(r?delete n[e]:(n[e]-=1,n[e]<=0&&delete n[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function oF(t){t.parentNode&&t.parentNode.removeChild(t)}function xi(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(Ett(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function Ett(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function Btt(t,e){let r=t instanceof HTMLElement?[t]:t,n=[];for(let a=0;a<r.length;a+=1){let i=r[a].querySelectorAll(e);for(let o=0;o<i.length;o+=1)n.push(i[o])}return n}const Ttt=/(top|left|right|bottom|width|height)$/i;function Mb(t,e){for(let r in e)pre(t,r,e[r])}function pre(t,e,r){r==null?t.style[e]="":typeof r=="number"&&Ttt.test(e)?t.style[e]=`${r}px`:t.style[e]=r}function gre(t){var e,r;return(r=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&r!==void 0?r:t.target}let qQ=0;function a5(){return qQ+=1,"fc-dom-"+qQ}function i5(t){t.preventDefault()}function Dtt(t,e){return r=>{let n=xi(r.target,t);n&&e.call(n,r,n)}}function xre(t,e,r,n){let a=Dtt(r,n);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function Itt(t,e,r,n){let a;return xre(t,"mouseover",e,(i,o)=>{if(o!==a){a=o,r(i,o);let l=c=>{a=null,n(c,o),o.removeEventListener("mouseleave",l)};o.addEventListener("mouseleave",l)}})}const KQ=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function _tt(t,e){let r=n=>{e(n),KQ.forEach(a=>{t.removeEventListener(a,r)})};KQ.forEach(n=>{t.addEventListener(n,r)})}function vre(t){return Object.assign({onClick:t},bre(t))}function bre(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let YQ=0;function Ap(){return YQ+=1,String(YQ)}function lF(){document.body.classList.add("fc-not-allowed")}function cF(){document.body.classList.remove("fc-not-allowed")}function Ptt(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",i5)}function ktt(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",i5)}function Ott(t){t.addEventListener("contextmenu",i5)}function Ftt(t){t.removeEventListener("contextmenu",i5)}function Rtt(t){let e=[],r=[],n,a;for(typeof t=="string"?r=t.split(/\s*,\s*/):typeof t=="function"?r=[t]:Array.isArray(t)&&(r=t),n=0;n<r.length;n+=1)a=r[n],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function Mtt(t,e,r){let n,a;for(n=0;n<r.length;n+=1)if(a=Ltt(t,e,r[n]),a)return a;return 0}function Ltt(t,e,r){return r.func?r.func(t,e):Utt(t[r.field],e[r.field])*(r.order||1)}function Utt(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function t4(t,e){let r=String(t);return"000".substr(0,e-r.length)+r}function Lb(t,e,r){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((n,a,i)=>n.replace("$"+i,a||""),t):r}function $tt(t,e){return t-e}function r4(t){return t%1===0}function Htt(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),r=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!r)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+r.getBoundingClientRect().width}const Qtt=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function mn(t,e){return typeof t=="string"?ztt(t):typeof t=="object"&&t?XQ(t):typeof t=="number"?XQ({[e||"milliseconds"]:t}):null}function ztt(t){let e=Qtt.exec(t);if(e){let r=e[1]?-1:1;return{years:0,months:0,days:r*(e[2]?parseInt(e[2],10):0),milliseconds:r*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function XQ(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},r=t.weeks||t.week;return r&&(e.days+=r*7,e.specifiedWeeks=!0),e}function Vtt(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function Wtt(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function Gtt(t){return u0(t)/365}function qtt(t){return u0(t)/30}function u0(t){return sw(t)/864e5}function sw(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function __(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Uh(t,e,r){if(t===e)return!0;let n=t.length,a;if(n!==e.length)return!1;for(a=0;a<n;a+=1)if(!(r?r(t[a],e[a]):t[a]===e[a]))return!1;return!0}const Ktt=["sun","mon","tue","wed","thu","fri","sat"];function JQ(t,e){let r=yh(t);return r[2]+=e*7,So(r)}function ji(t,e){let r=yh(t);return r[2]+=e,So(r)}function $h(t,e){let r=yh(t);return r[6]+=e,So(r)}function Ytt(t,e){return qx(t,e)/7}function qx(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function Xtt(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function Jtt(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function Ztt(t,e){return(e.valueOf()-t.valueOf())/1e3}function ert(t,e){let r=xs(t),n=xs(e);return{years:0,months:0,days:Math.round(qx(r,n)),milliseconds:e.valueOf()-n.valueOf()-(t.valueOf()-r.valueOf())}}function trt(t,e){let r=mN(t,e);return r!==null&&r%7===0?r/7:null}function mN(t,e){return wh(t)===wh(e)?Math.round(qx(t,e)):null}function xs(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function rrt(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function nrt(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function srt(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function art(t,e,r){let n=t.getUTCFullYear(),a=n4(t,n,e,r);if(a<1)return n4(t,n-1,e,r);let i=n4(t,n+1,e,r);return i>=1?Math.min(a,i):a}function n4(t,e,r,n){let a=So([e,0,1+irt(e,r,n)]),i=xs(t),o=Math.round(qx(a,i));return Math.floor(o/7)+1}function irt(t,e,r){let n=7+e-r;return-((7+So([t,0,n]).getUTCDay()-e)%7)+n-1}function ZQ(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function e9(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function yh(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function So(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function yre(t){return!isNaN(t.valueOf())}function wh(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function ort(t,e,r=!1){let n=t.toISOString();return n=n.replace(".000",""),r&&(n=n.replace("T00:00:00Z","")),n.length>10&&(e==null?n=n.replace("Z",""):e!==0&&(n=n.replace("Z",dF(e,!0)))),n}function uF(t){return t.toISOString().replace(/T.*$/,"")}function lrt(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function dF(t,e=!1){let r=t<0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),i=Math.round(n%60);return e?`${r+t4(a,2)}:${t4(i,2)}`:`GMT${r}${a}${i?`:${t4(i,2)}`:""}`}function pn(t,e,r){let n,a;return function(...i){if(!n)a=t.apply(this,i);else if(!Uh(n,i)){let o=t.apply(this,i);(!e||!e(o,a))&&(a=o)}return n=i,a}}function f2(t,e,r){let n,a;return i=>(n?Lu(n,i)||(a=t.call(this,i)):a=t.call(this,i),n=i,a)}const s4={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},pN={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Pj=/\s*([ap])\.?m\.?/i,crt=/,/g,urt=/\s+/g,drt=/\u200e/g,frt=/UTC|GMT/;class hrt{constructor(e){let r={},n={},a=9;for(let i in e)i in s4?(n[i]=e[i],s4[i]<9&&(a=Math.min(s4[i],a))):(r[i]=e[i],i in pN&&(a=Math.min(pN[i],a)));this.standardDateProps=r,this.extendedSettings=n,this.smallestUnitNum=a,this.buildFormattingFunc=pn(t9)}format(e,r){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,r)(e)}formatRange(e,r,n,a){let{standardDateProps:i,extendedSettings:o}=this,l=vrt(e.marker,r.marker,n.calendarSystem);if(!l)return this.format(e,n);let c=l;c>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(c=1);let u=this.format(e,n),d=this.format(r,n);if(u===d)return u;let f=brt(i,c),A=t9(f,o,n),h=A(e),m=A(r),p=yrt(u,h,d,m),g=o.separator||a||n.defaultSeparator||"";return p?p.before+h+g+m+p.after:u+g+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function t9(t,e,r){let n=Object.keys(t).length;return n===1&&t.timeZoneName==="short"?a=>dF(a.timeZoneOffset):n===0&&e.week?a=>xrt(r.computeWeekNumber(a.marker),r.weekText,r.weekTextLong,r.locale,e.week):Art(t,e,r)}function Art(t,e,r){t=Object.assign({},t),e=Object.assign({},e),mrt(t,e),t.timeZone="UTC";let n=new Intl.DateTimeFormat(r.locale.codes,t),a;if(e.omitZeroMinute){let i=Object.assign({},t);delete i.minute,a=new Intl.DateTimeFormat(r.locale.codes,i)}return i=>{let{marker:o}=i,l;a&&!o.getUTCMinutes()?l=a:l=n;let c=l.format(o);return prt(c,i,t,e,r)}}function mrt(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function prt(t,e,r,n,a){return t=t.replace(drt,""),r.timeZoneName==="short"&&(t=grt(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":dF(e.timeZoneOffset))),n.omitCommas&&(t=t.replace(crt,"").trim()),n.omitZeroMinute&&(t=t.replace(":00","")),n.meridiem===!1?t=t.replace(Pj,"").trim():n.meridiem==="narrow"?t=t.replace(Pj,(i,o)=>o.toLocaleLowerCase()):n.meridiem==="short"?t=t.replace(Pj,(i,o)=>`${o.toLocaleLowerCase()}m`):n.meridiem==="lowercase"&&(t=t.replace(Pj,i=>i.toLocaleLowerCase())),t=t.replace(urt," "),t=t.trim(),t}function grt(t,e){let r=!1;return t=t.replace(frt,()=>(r=!0,e)),r||(t+=` ${e}`),t}function xrt(t,e,r,n,a){let i=[];return a==="long"?i.push(r):(a==="short"||a==="narrow")&&i.push(e),(a==="long"||a==="short")&&i.push(" "),i.push(n.simpleNumberFormat.format(t)),n.options.direction==="rtl"&&i.reverse(),i.join("")}function vrt(t,e,r){return r.getMarkerYear(t)!==r.getMarkerYear(e)?5:r.getMarkerMonth(t)!==r.getMarkerMonth(e)?4:r.getMarkerDay(t)!==r.getMarkerDay(e)?2:wh(t)!==wh(e)?1:0}function brt(t,e){let r={};for(let n in t)(!(n in pN)||pN[n]<=e)&&(r[n]=t[n]);return r}function yrt(t,e,r,n){let a=0;for(;a<t.length;){let i=t.indexOf(e,a);if(i===-1)break;let o=t.substr(0,i);a=i+e.length;let l=t.substr(a),c=0;for(;c<r.length;){let u=r.indexOf(n,c);if(u===-1)break;let d=r.substr(0,u);c=u+n.length;let f=r.substr(c);if(o===d&&l===f)return{before:o,after:l}}}return null}function r9(t,e){let r=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:r,year:r[0],month:r[1],day:r[2],hour:r[3],minute:r[4],second:r[5],millisecond:r[6]}}function gN(t,e,r,n){let a=r9(t,r.calendarSystem),i=e?r9(e,r.calendarSystem):null;return{date:a,start:a,end:i,timeZone:r.timeZone,localeCodes:r.locale.codes,defaultSeparator:n||r.defaultSeparator}}class wrt{constructor(e){this.cmdStr=e}format(e,r,n){return r.cmdFormatter(this.cmdStr,gN(e,null,r,n))}formatRange(e,r,n,a){return n.cmdFormatter(this.cmdStr,gN(e,r,n,a))}}class jrt{constructor(e){this.func=e}format(e,r,n){return this.func(gN(e,null,r,n))}formatRange(e,r,n,a){return this.func(gN(e,r,n,a))}}function Da(t){return typeof t=="object"&&t?new hrt(t):typeof t=="string"?new wrt(t):typeof t=="function"?new jrt(t):null}const n9={navLinkDayClick:et,navLinkWeekClick:et,duration:mn,bootstrapFontAwesome:et,buttonIcons:et,customButtons:et,defaultAllDayEventDuration:mn,defaultTimedEventDuration:mn,nextDayThreshold:mn,scrollTime:mn,scrollTimeReset:Boolean,slotMinTime:mn,slotMaxTime:mn,dayPopoverFormat:Da,slotDuration:mn,snapDuration:mn,headerToolbar:et,footerToolbar:et,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Da,dayHeaderClassNames:et,dayHeaderContent:et,dayHeaderDidMount:et,dayHeaderWillUnmount:et,dayCellClassNames:et,dayCellContent:et,dayCellDidMount:et,dayCellWillUnmount:et,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:et,weekNumbers:Boolean,weekNumberClassNames:et,weekNumberContent:et,weekNumberDidMount:et,weekNumberWillUnmount:et,editable:Boolean,viewClassNames:et,viewDidMount:et,viewWillUnmount:et,nowIndicator:Boolean,nowIndicatorClassNames:et,nowIndicatorContent:et,nowIndicatorDidMount:et,nowIndicatorWillUnmount:et,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:et,locale:et,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:et,eventOrder:Rtt,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:et,contentHeight:et,direction:String,weekNumberFormat:Da,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:et,initialDate:et,now:et,eventDataTransform:et,stickyHeaderDates:et,stickyFooterScrollbar:et,viewHeight:et,defaultAllDay:Boolean,eventSourceFailure:et,eventSourceSuccess:et,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:et,eventConstraint:et,eventAllow:et,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:et,eventContent:et,eventDidMount:et,eventWillUnmount:et,selectConstraint:et,selectOverlap:et,selectAllow:et,droppable:Boolean,unselectCancel:String,slotLabelFormat:et,slotLaneClassNames:et,slotLaneContent:et,slotLaneDidMount:et,slotLaneWillUnmount:et,slotLabelClassNames:et,slotLabelContent:et,slotLabelDidMount:et,slotLabelWillUnmount:et,dayMaxEvents:et,dayMaxEventRows:et,dayMinWidth:Number,slotLabelInterval:mn,allDayText:String,allDayClassNames:et,allDayContent:et,allDayDidMount:et,allDayWillUnmount:et,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Da,rerenderDelay:Number,moreLinkText:et,moreLinkHint:et,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:et,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:mn,hiddenDays:et,fixedWeekCount:Boolean,validRange:et,visibleRange:et,titleFormat:et,eventInteractive:Boolean,noEventsText:String,viewHint:et,navLinkHint:et,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:et,moreLinkClassNames:et,moreLinkContent:et,moreLinkDidMount:et,moreLinkWillUnmount:et,monthStartFormat:Da,handleCustomRendering:et,customRenderingMetaMap:et,customRenderingReplaces:Boolean},Ub={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},s9={datesSet:et,eventsSet:et,eventAdd:et,eventChange:et,eventRemove:et,windowResize:et,eventClick:et,eventMouseEnter:et,eventMouseLeave:et,select:et,unselect:et,loading:et,_unmount:et,_beforeprint:et,_afterprint:et,_noEventDrop:et,_noEventResize:et,_resize:et,_scrollRequest:et},a9={buttonText:et,buttonHints:et,views:et,plugins:et,initialEvents:et,events:et,eventSources:et},zA={headerToolbar:VA,footerToolbar:VA,buttonText:VA,buttonHints:VA,buttonIcons:VA,dateIncrement:VA,plugins:kj,events:kj,eventSources:kj,resources:kj};function VA(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?Lu(t,e):t===e}function kj(t,e){return Array.isArray(t)&&Array.isArray(e)?Uh(t,e):t===e}const Crt={type:String,component:et,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:et,usesMinMaxTime:Boolean,classNames:et,content:et,didMount:et,willUnmount:et};function a4(t){return hF(t,zA)}function fF(t,e){let r={},n={};for(let a in e)a in t&&(r[a]=e[a](t[a]));for(let a in t)a in e||(n[a]=t[a]);return{refined:r,extra:n}}function et(t){return t}const{hasOwnProperty:xN}=Object.prototype;function hF(t,e){let r={};if(e){for(let n in e)if(e[n]===VA){let a=[];for(let i=t.length-1;i>=0;i-=1){let o=t[i][n];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){r[n]=o;break}}a.length&&(r[n]=hF(a))}}for(let n=t.length-1;n>=0;n-=1){let a=t[n];for(let i in a)i in r||(r[i]=a[i])}return r}function Gm(t,e){let r={};for(let n in t)e(t[n],n)&&(r[n]=t[n]);return r}function mp(t,e){let r={};for(let n in t)r[n]=e(t[n],n);return r}function wre(t){let e={};for(let r of t)e[r]=!0;return e}function AF(t){let e=[];for(let r in t)e.push(t[r]);return e}function Lu(t,e){if(t===e)return!0;for(let r in t)if(xN.call(t,r)&&!(r in e))return!1;for(let r in e)if(xN.call(e,r)&&t[r]!==e[r])return!1;return!0}const Nrt=/^on[A-Z]/;function Srt(t,e){const r=P_(t,e);for(let n of r)if(!Nrt.test(n))return!1;return!0}function P_(t,e){let r=[];for(let n in t)xN.call(t,n)&&(n in e||r.push(n));for(let n in e)xN.call(e,n)&&t[n]!==e[n]&&r.push(n);return r}function i4(t,e,r={}){if(t===e)return!0;for(let n in e)if(!(n in t&&Ert(t[n],e[n],r[n])))return!1;for(let n in t)if(!(n in e))return!1;return!0}function Ert(t,e,r){return t===e||r===!0?!0:r?r(t,e):!1}function Brt(t,e=0,r,n=1){let a=[];r==null&&(r=Object.keys(t).length);for(let i=e;i<r;i+=n){let o=t[i];o!==void 0&&a.push(o)}return a}let jre={};function Trt(t,e){jre[t]=e}function Drt(t){return new jre[t]}class Irt{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return So(e)}markerToArray(e){return yh(e)}}Trt("gregory",Irt);const _rt=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function Prt(t){let e=_rt.exec(t);if(e){let r=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(yre(r)){let n=null;return e[13]&&(n=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:r,isTimeUnspecified:!e[6],timeZoneOffset:n}}}return null}class krt{constructor(e){let r=this.timeZone=e.timeZone,n=r!=="local"&&r!=="UTC";e.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(r)),this.canComputeOffset=!!(!n||this.namedTimeZoneImpl),this.calendarSystem=Drt(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let r=this.createMarkerMeta(e);return r===null?null:r.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):So(ZQ(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let r=null;return typeof e=="number"?r=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(r=this.timestampToMarker(e))):Array.isArray(e)&&(r=So(e)),r===null||!yre(r)?null:{marker:r,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let r=Prt(e);if(r===null)return null;let{marker:n}=r,a=null;return r.timeZoneOffset!==null&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-r.timeZoneOffset*60*1e3):a=r.timeZoneOffset),{marker:n,isTimeUnspecified:r.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]+=r.years,n[1]+=r.months,n[2]+=r.days,n[6]+=r.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]-=r.years,n[1]-=r.months,n[2]-=r.days,n[6]-=r.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]+=r,this.calendarSystem.arrayToMarker(n)}addMonths(e,r){let n=this.calendarSystem.markerToArray(e);return n[1]+=r,this.calendarSystem.arrayToMarker(n)}diffWholeYears(e,r){let{calendarSystem:n}=this;return wh(e)===wh(r)&&n.getMarkerDay(e)===n.getMarkerDay(r)&&n.getMarkerMonth(e)===n.getMarkerMonth(r)?n.getMarkerYear(r)-n.getMarkerYear(e):null}diffWholeMonths(e,r){let{calendarSystem:n}=this;return wh(e)===wh(r)&&n.getMarkerDay(e)===n.getMarkerDay(r)?n.getMarkerMonth(r)-n.getMarkerMonth(e)+(n.getMarkerYear(r)-n.getMarkerYear(e))*12:null}greatestWholeUnit(e,r){let n=this.diffWholeYears(e,r);return n!==null?{unit:"year",value:n}:(n=this.diffWholeMonths(e,r),n!==null?{unit:"month",value:n}:(n=trt(e,r),n!==null?{unit:"week",value:n}:(n=mN(e,r),n!==null?{unit:"day",value:n}:(n=Xtt(e,r),r4(n)?{unit:"hour",value:n}:(n=Jtt(e,r),r4(n)?{unit:"minute",value:n}:(n=Ztt(e,r),r4(n)?{unit:"second",value:n}:{unit:"millisecond",value:r.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,r,n){let a;return n.years&&(a=this.diffWholeYears(e,r),a!==null)?a/Gtt(n):n.months&&(a=this.diffWholeMonths(e,r),a!==null)?a/qtt(n):n.days&&(a=mN(e,r),a!==null)?a/u0(n):(r.valueOf()-e.valueOf())/sw(n)}startOf(e,r){return r==="year"?this.startOfYear(e):r==="month"?this.startOfMonth(e):r==="week"?this.startOfWeek(e):r==="day"?xs(e):r==="hour"?rrt(e):r==="minute"?nrt(e):r==="second"?srt(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):art(e,this.weekDow,this.weekDoy)}format(e,r,n={}){return r.format({marker:e,timeZoneOffset:n.forcedTzo!=null?n.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,r,n,a={}){return a.isEndExclusive&&(r=$h(r,-1)),n.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:r,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(r)},this,a.defaultSeparator)}formatIso(e,r={}){let n=null;return r.omitTimeZoneOffset||(r.forcedTzo!=null?n=r.forcedTzo:n=this.offsetForMarker(e)),ort(e,n,r.omitTime)}timestampToMarker(e){return this.timeZone==="local"?So(ZQ(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):So(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-e9(yh(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(yh(e)):null}toDate(e,r){return this.timeZone==="local"?e9(yh(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(yh(e))*1e3*60):new Date(e.valueOf()-(r||0))}}class Vw{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let r,n;if(typeof e=="object"&&e){r=Object.assign({},this.iconClasses);for(n in e)r[n]=this.applyIconOverridePrefix(e[n]);this.iconClasses=r}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let r=this.iconOverridePrefix;return r&&e.indexOf(r)!==0&&(e=r+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,r){let n;return r&&this.rtlIconClasses?n=this.rtlIconClasses[e]||this.iconClasses[e]:n=this.iconClasses[e],n?`${this.baseIconClass} ${n}`:""}getCustomButtonIconClass(e){let r;return this.iconOverrideCustomButtonOption&&(r=e[this.iconOverrideCustomButtonOption],r)?`${this.baseIconClass} ${this.applyIconOverridePrefix(r)}`:""}}Vw.prototype.classes={};Vw.prototype.iconClasses={};Vw.prototype.baseIconClass="";Vw.prototype.iconOverridePrefix="";function vN(t){t();let e=ur.debounceRendering,r=[];function n(a){r.push(a)}for(ur.debounceRendering=n,nw(rt(Ort,{}),document.createElement("div"));r.length;)r.shift()();ur.debounceRendering=e}class Ort extends sl{render(){return rt("div",{})}componentDidMount(){this.setState({})}}function Cre(t){let e=ott(t),r=e.Provider;return e.Provider=function(){let n=!this.getChildContext,a=r.apply(this,arguments);if(n){let i=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&i.forEach(l=>{l.context=o.value,l.forceUpdate()})},this.sub=o=>{i.push(o);let l=o.componentWillUnmount;o.componentWillUnmount=()=>{i.splice(i.indexOf(o),1),l&&l.call(o)}}}return a},e}class Frt{constructor(e,r,n,a){this.execFunc=e,this.emitter=r,this.scrollTime=n,this.scrollTimeReset=a,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},r.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const pp=Cre({});function Rrt(t,e,r,n,a,i,o,l,c,u,d,f,A,h){return{dateEnv:a,nowManager:i,options:r,pluginHooks:l,emitter:d,dispatch:c,getCurrentData:u,calendarApi:f,viewSpec:t,viewApi:e,dateProfileGenerator:n,theme:o,isRtl:r.direction==="rtl",addResizeHandler(m){d.on("_resize",m)},removeResizeHandler(m){d.off("_resize",m)},createScrollResponder(m){return new Frt(m,d,mn(r.scrollTime),r.scrollTimeReset)},registerInteractiveComponent:A,unregisterInteractiveComponent:h}}class gp extends sl{shouldComponentUpdate(e,r){return this.debug&&console.log(P_(e,this.props),P_(r,this.state)),!i4(this.props,e,this.propEquality)||!i4(this.state,r,this.stateEquality)}safeSetState(e){i4(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}gp.addPropsEquality=Mrt;gp.addStateEquality=Lrt;gp.contextType=pp;gp.prototype.propEquality={};gp.prototype.stateEquality={};class ks extends gp{}ks.contextType=pp;function Mrt(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function Lrt(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function ef(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class mF extends ks{constructor(){super(...arguments),this.id=Ap(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:r}=this.context,{generatorName:n}=this.props;(!r.customRenderingReplaces||!k_(n,r))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&ef(this.props.elRef,e)}}render(){const{props:e,context:r}=this,{options:n}=r,{customGenerator:a,defaultGenerator:i,renderProps:o}=e,l=Nre(e,[],this.handleEl);let c=!1,u,d=[],f;if(a!=null){const A=typeof a=="function"?a(o,rt):a;if(A===!0)c=!0;else{const h=A&&typeof A=="object";h&&"html"in A?l.dangerouslySetInnerHTML={__html:A.html}:h&&"domNodes"in A?d=Array.prototype.slice.call(A.domNodes):(h?Kte(A):typeof A!="function")?u=A:f=A}}else c=!k_(e.generatorName,n);return c&&i&&(u=i(o)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,rt(e.elTag,l,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var r;const{props:n,context:a}=this,{handleCustomRendering:i,customRenderingMetaMap:o}=a.options;if(i){const l=(r=this.currentGeneratorMeta)!==null&&r!==void 0?r:o==null?void 0:o[n.generatorName];l&&i(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},n),{elClasses:(n.elClasses||[]).filter(Urt)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:r}=this,n=this.base;if(!Uh(e,r)){r.forEach(oF);for(let a of e)n.appendChild(a);this.currentDomNodes=e}}}mF.addPropsEquality({elClasses:Uh,elStyle:Lu,elAttrs:Srt,renderProps:Lu});function k_(t,e){var r;return!!(e.handleCustomRendering&&t&&(!((r=e.customRenderingMetaMap)===null||r===void 0)&&r[t]))}function Nre(t,e,r){const n=Object.assign(Object.assign({},t.elAttrs),{ref:r});return(t.elClasses||e)&&(n.className=(t.elClasses||[]).concat(e||[]).concat(n.className||[]).filter(Boolean).join(" ")),t.elStyle&&(n.style=t.elStyle),n}function Urt(t){return!!t}const Sre=Cre(0);class Af extends sl{constructor(){super(...arguments),this.InnerContent=$rt.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(ef(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,r=Hrt(e.classNameGenerator,e.renderProps);if(e.children){const n=Nre(e,r,this.handleEl),a=e.children(this.InnerContent,e.renderProps,n);return e.elTag?rt(e.elTag,n,a):a}else return rt(mF,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var e,r;this.el?(r=(e=this.props).didMount)===null||r===void 0||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,r;(r=(e=this.props).willUnmount)===null||r===void 0||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Af.contextType=Sre;function $rt(t,e){const r=t.props;return rt(mF,Object.assign({renderProps:r.renderProps,generatorName:r.generatorName,customGenerator:r.customGenerator,defaultGenerator:r.defaultGenerator,renderId:t.context},e))}function Hrt(t,e){const r=typeof t=="function"?t(e):t||[];return typeof r=="string"?[r]:r}class i9 extends ks{render(){let{props:e,context:r}=this,{options:n}=r,a={view:r.viewApi};return rt(Af,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...Ere(e.viewSpec),...e.elClasses||[]],renderProps:a,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount}),()=>e.children)}}function Ere(t){return[`fc-${t.type}-view`,"fc-view"]}function Qrt(t,e){let r=null,n=null;return t.start&&(r=e.createMarker(t.start)),t.end&&(n=e.createMarker(t.end)),!r&&!n||r&&n&&n<r?null:{start:r,end:n}}function o9(t,e){let r=[],{start:n}=e,a,i;for(t.sort(zrt),a=0;a<t.length;a+=1)i=t[a],i.start>n&&r.push({start:n,end:i.start}),i.end>n&&(n=i.end);return n<e.end&&r.push({start:n,end:e.end}),r}function zrt(t,e){return t.start.valueOf()-e.start.valueOf()}function sx(t,e){let{start:r,end:n}=t,a=null;return e.start!==null&&(r===null?r=e.start:r=new Date(Math.max(r.valueOf(),e.start.valueOf()))),e.end!=null&&(n===null?n=e.end:n=new Date(Math.min(n.valueOf(),e.end.valueOf()))),(r===null||n===null||r<n)&&(a={start:r,end:n}),a}function Vrt(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function pF(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function o5(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function _h(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function Wrt(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function Bre(t){let e=Math.floor(qx(t.start,t.end))||1,r=xs(t.start),n=ji(r,e);return{start:r,end:n}}function Tre(t,e=mn(0)){let r=null,n=null;if(t.end){n=xs(t.end);let a=t.end.valueOf()-n.valueOf();a&&a>=sw(e)&&(n=ji(n,1))}return t.start&&(r=xs(t.start),n&&n<=r&&(n=ji(r,1))),{start:r,end:n}}function Gg(t,e,r,n){return n==="year"?mn(r.diffWholeYears(t,e),"year"):n==="month"?mn(r.diffWholeMonths(t,e),"month"):ert(t,e)}class Dre{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,r,n){let{dateEnv:a}=this.props,i=a.subtract(a.startOf(r,e.currentRangeUnit),e.dateIncrement);return this.build(i,-1,n)}buildNext(e,r,n){let{dateEnv:a}=this.props,i=a.add(a.startOf(r,e.currentRangeUnit),e.dateIncrement);return this.build(i,1,n)}build(e,r,n=!0){let{props:a}=this,i,o,l,c,u,d;return i=this.buildValidRange(),i=this.trimHiddenDays(i),n&&(e=Wrt(e,i)),o=this.buildCurrentRangeInfo(e,r),l=/^(year|month|week|day)$/.test(o.unit),c=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,l),c=this.trimHiddenDays(c),u=c,a.showNonCurrentDates||(u=sx(u,o.range)),u=this.adjustActiveRange(u),u=sx(u,i),d=pF(o.range,i),_h(c,e)||(e=c.start),{currentDate:e,validRange:i,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:l,activeRange:u,renderRange:c,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,r=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(r)||{start:null,end:null}}buildCurrentRangeInfo(e,r){let{props:n}=this,a=null,i=null,o=null,l;return n.duration?(a=n.duration,i=n.durationUnit,o=this.buildRangeFromDuration(e,r,a,i)):(l=this.props.dayCount)?(i="day",o=this.buildRangeFromDayCount(e,r,l)):(o=this.buildCustomVisibleRange(e))?i=n.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),i=__(a).unit,o=this.buildRangeFromDuration(e,r,a,i)),{duration:a,unit:i,range:o}}getFallbackDuration(){return mn({day:1})}adjustActiveRange(e){let{dateEnv:r,usesMinMaxTime:n,slotMinTime:a,slotMaxTime:i}=this.props,{start:o,end:l}=e;return n&&(u0(a)<0&&(o=xs(o),o=r.add(o,a)),u0(i)>1&&(l=xs(l),l=ji(l,-1),l=r.add(l,i))),{start:o,end:l}}buildRangeFromDuration(e,r,n,a){let{dateEnv:i,dateAlignment:o}=this.props,l,c,u;if(!o){let{dateIncrement:f}=this.props;f&&sw(f)<sw(n)?o=__(f).unit:o=a}u0(n)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,r),l=xs(l));function d(){l=i.startOf(e,o),c=i.add(l,n),u={start:l,end:c}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,r),d()),u}buildRangeFromDayCount(e,r,n){let{dateEnv:a,dateAlignment:i}=this.props,o=0,l=e,c;i&&(l=a.startOf(l,i)),l=xs(l),l=this.skipHiddenDays(l,r),c=l;do c=ji(c,1),this.isHiddenDay(c)||(o+=1);while(o<n);return{start:l,end:c}}buildCustomVisibleRange(e){let{props:r}=this,n=r.visibleRangeInput,a=typeof n=="function"?n.call(r.calendarApi,r.dateEnv.toDate(e)):n,i=this.refineRange(a);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(e,r,n){return e}buildDateIncrement(e){let{dateIncrement:r}=this.props,n;return r||((n=this.props.dateAlignment)?mn(1,n):e||mn({days:1}))}refineRange(e){if(e){let r=Qrt(e,this.props.dateEnv);return r&&(r=Tre(r)),r}return null}initHiddenDays(){let e=this.props.hiddenDays||[],r=[],n=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(r[a]=e.indexOf(a)!==-1)||(n+=1);if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=r}trimHiddenDays(e){let{start:r,end:n}=e;return r&&(r=this.skipHiddenDays(r)),n&&(n=this.skipHiddenDays(n,-1,!0)),r==null||n==null||r<n?{start:r,end:n}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,r=1,n=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(n?r:0)+7)%7];)e=ji(e,r);return e}}function gF(t,e,r,n){return{instanceId:Ap(),defId:t,range:e,forcedStartTzo:r??null,forcedEndTzo:n??null}}function Grt(t,e,r,n){for(let a=0;a<n.length;a+=1){let i=n[a].parse(t,r);if(i){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=i.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:i.duration,typeData:i.typeData,typeId:a}}}return null}function qm(t,e,r){let{dateEnv:n,pluginHooks:a,options:i}=r,{defs:o,instances:l}=t;l=Gm(l,c=>!o[c.defId].recurringDef);for(let c in o){let u=o[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let f=qrt(u,d,e,n,a.recurringTypes);for(let A of f){let h=gF(c,{start:A,end:n.add(A,d)});l[h.instanceId]=h}}}return{defs:o,instances:l}}function qrt(t,e,r,n,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:n.subtract(r.start,e),end:r.end},n);return t.allDay&&(o=o.map(xs)),o}const h2={id:String,groupId:String,title:String,url:String,interactive:Boolean},Ire={start:et,end:et,date:et,allDay:Boolean},Krt=Object.assign(Object.assign(Object.assign({},h2),Ire),{extendedProps:et});function _re(t,e,r,n,a=xF(r),i,o){let{refined:l,extra:c}=Pre(t,r,a),u=Xrt(e,r),d=Grt(l,u,r.dateEnv,r.pluginHooks.recurringTypes);if(d){let A=O_(l,c,e?e.sourceId:"",d.allDay,!!d.duration,r,i);return A.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:A,instance:null}}let f=Yrt(l,u,r,n);if(f){let A=O_(l,c,e?e.sourceId:"",f.allDay,f.hasEnd,r,i),h=gF(A.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return o&&A.publicId&&o[A.publicId]&&(h.instanceId=o[A.publicId]),{def:A,instance:h}}return null}function Pre(t,e,r=xF(e)){return fF(t,r)}function xF(t){return Object.assign(Object.assign(Object.assign({},bN),Krt),t.pluginHooks.eventRefiners)}function O_(t,e,r,n,a,i,o){let l={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||Ap(),sourceId:r,allDay:n,hasEnd:a,interactive:t.interactive,ui:yN(t,i),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let c of i.pluginHooks.eventDefMemberAdders)Object.assign(l,c(t));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function Yrt(t,e,r,n){let{allDay:a}=t,i,o=null,l=!1,c,u=null,d=t.start!=null?t.start:t.date;if(i=r.dateEnv.createMarkerMeta(d),i)o=i.marker;else if(!n)return null;return t.end!=null&&(c=r.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!i||i.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),a&&o&&(o=xs(o)),c&&(u=c.marker,a&&(u=xs(u)),o&&u<=o&&(u=null)),u?l=!0:n||(l=r.options.forceEventDuration||!1,u=r.dateEnv.add(o,a?r.options.defaultAllDayEventDuration:r.options.defaultTimedEventDuration)),{allDay:a,hasEnd:l,range:{start:o,end:u},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function Xrt(t,e){let r=null;return t&&(r=t.defaultAllDay),r==null&&(r=e.options.defaultAllDay),r}function aw(t,e,r,n,a,i){let o=bc(),l=xF(r);for(let c of t){let u=_re(c,e,r,n,l,a,i);u&&F_(u,o)}return o}function F_(t,e=bc()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function vF(t,e){let r=t.instances[e];if(r){let n=t.defs[r.defId],a=l5(t,i=>Jrt(n,i));return a.defs[n.defId]=n,a.instances[r.instanceId]=r,a}return bc()}function Jrt(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function bc(){return{defs:{},instances:{}}}function bF(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function l5(t,e){let r=Gm(t.defs,e),n=Gm(t.instances,a=>r[a.defId]);return{defs:r,instances:n}}function Zrt(t,e){let{defs:r,instances:n}=t,a={},i={};for(let o in r)e.defs[o]||(a[o]=r[o]);for(let o in n)!e.instances[o]&&a[n[o].defId]&&(i[o]=n[o]);return{defs:a,instances:i}}function ent(t,e){return Array.isArray(t)?aw(t,null,e,!0):typeof t=="object"&&t?aw([t],null,e,!0):t!=null?String(t):null}function l9(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const bN={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:et,overlap:et,allow:et,className:l9,classNames:l9,color:String,backgroundColor:String,borderColor:String,textColor:String},tnt={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function yN(t,e){let r=ent(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:r!=null?[r]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function rnt(t){return t.reduce(nnt,tnt)}function nnt(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const snt={id:String,defaultAllDay:Boolean,url:String,format:String,events:et,eventDataTransform:et,success:et,failure:et};function kre(t,e,r=Ore(e)){let n;if(typeof t=="string"?n={url:t}:typeof t=="function"||Array.isArray(t)?n={events:t}:typeof t=="object"&&t&&(n=t),n){let{refined:a,extra:i}=fF(n,r),o=ant(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:Ap(),sourceDefId:o.sourceDefId,meta:o.meta,ui:yN(a,e),extendedProps:i}}return null}function Ore(t){return Object.assign(Object.assign(Object.assign({},bN),snt),t.pluginHooks.eventSourceRefiners)}function ant(t,e){let r=e.pluginHooks.eventSourceDefs;for(let n=r.length-1;n>=0;n-=1){let i=r[n].parseMeta(t);if(i)return{sourceDefId:n,meta:i}}return null}function int(t,e,r,n,a){switch(e.type){case"RECEIVE_EVENTS":return ont(t,r[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return lnt(t,r[e.sourceId],e.rawEvents,n.activeRange,a);case"ADD_EVENTS":return cnt(t,e.eventStore,n?n.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return bF(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?qm(t,n.activeRange,a):t;case"REMOVE_EVENTS":return Zrt(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return Rre(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return l5(t,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return bc();default:return t}}function ont(t,e,r,n,a,i){if(e&&r===e.latestFetchId){let o=aw(Fre(a,e,i),e,i);return n&&(o=qm(o,n,i)),bF(Rre(t,e.sourceId),o)}return t}function lnt(t,e,r,n,a){const{defIdMap:i,instanceIdMap:o}=dnt(t);let l=aw(Fre(r,e,a),e,a,!1,i,o);return qm(l,n,a)}function Fre(t,e,r){let n=r.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=c9(t,a)),n&&(t=c9(t,n)),t}function c9(t,e){let r;if(!e)r=t;else{r=[];for(let n of t){let a=e(n);a?r.push(a):a==null&&r.push(n)}}return r}function cnt(t,e,r,n){return r&&(e=qm(e,r,n)),bF(t,e)}function u9(t,e,r){let{defs:n}=t,a=mp(t.instances,i=>n[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:r.createMarker(e.toDate(i.range.start,i.forcedStartTzo)),end:r.createMarker(e.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:r.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:r.canComputeOffset?null:i.forcedEndTzo}));return{defs:n,instances:a}}function Rre(t,e){return l5(t,r=>r.sourceId!==e)}function unt(t,e){return{defs:t.defs,instances:Gm(t.instances,r=>!e[r.instanceId])}}function dnt(t){const{defs:e,instances:r}=t,n={},a={};for(let i in e){const o=e[i],{publicId:l}=o;l&&(n[l]=i)}for(let i in r){const o=r[i],l=e[o.defId],{publicId:c}=l;c&&(a[c]=i)}return{defIdMap:n,instanceIdMap:a}}class c5{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,r){fnt(this.handlers,e,r)}off(e,r){hnt(this.handlers,e,r)}trigger(e,...r){let n=this.handlers[e]||[],a=this.options&&this.options[e],i=[].concat(a||[],n);for(let o of i)o.apply(this.thisContext,r)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function fnt(t,e,r){(t[e]||(t[e]=[])).push(r)}function hnt(t,e,r){r?t[e]&&(t[e]=t[e].filter(n=>n!==r)):delete t[e]}const Ant={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function mnt(t,e){return aw(pnt(t),null,e)}function pnt(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(r=>r.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(r=>Object.assign(Object.assign({},Ant),r)),e}function Mre(t,e,r){r.emitter.trigger("select",Object.assign(Object.assign({},yF(t,r)),{jsEvent:e?e.origEvent:null,view:r.viewApi||r.calendarApi.view}))}function gnt(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function yF(t,e){let r={};for(let n of e.pluginHooks.dateSpanTransforms)Object.assign(r,n(t,e));return Object.assign(r,_nt(t,e.dateEnv)),r}function d9(t,e,r){let{dateEnv:n,options:a}=r,i=e;return t?(i=xs(i),i=n.add(i,a.defaultAllDayEventDuration)):i=n.add(i,a.defaultTimedEventDuration),i}function wF(t,e,r,n){let a=wN(t.defs,e),i=bc();for(let o in t.defs){let l=t.defs[o];i.defs[o]=xnt(l,a[o],r,n)}for(let o in t.instances){let l=t.instances[o],c=i.defs[l.defId];i.instances[o]=vnt(l,c,a[l.defId],r,n)}return i}function xnt(t,e,r,n){let a=r.standardProps||{};a.hasEnd==null&&e.durationEditable&&(r.startDelta||r.endDelta)&&(a.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});r.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),r.extendedProps));for(let o of n.pluginHooks.eventDefMutationAppliers)o(i,r,n);return!i.hasEnd&&n.options.forceEventDuration&&(i.hasEnd=!0),i}function vnt(t,e,r,n,a){let{dateEnv:i}=a,o=n.standardProps&&n.standardProps.allDay===!0,l=n.standardProps&&n.standardProps.hasEnd===!1,c=Object.assign({},t);return o&&(c.range=Bre(c.range)),n.datesDelta&&r.startEditable&&(c.range={start:i.add(c.range.start,n.datesDelta),end:i.add(c.range.end,n.datesDelta)}),n.startDelta&&r.durationEditable&&(c.range={start:i.add(c.range.start,n.startDelta),end:c.range.end}),n.endDelta&&r.durationEditable&&(c.range={start:c.range.start,end:i.add(c.range.end,n.endDelta)}),l&&(c.range={start:c.range.start,end:d9(e.allDay,c.range.start,a)}),e.allDay&&(c.range={start:xs(c.range.start),end:xs(c.range.end)}),c.range.end<c.range.start&&(c.range.end=d9(e.allDay,c.range.start,a)),c}class Og{constructor(e,r){this.context=e,this.internalEventSource=r}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class vs{constructor(e,r,n){this._context=e,this._def=r,this._instance=n||null}setProp(e,r){if(e in Ire)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")r=h2[e](r),this.mutate({standardProps:{publicId:r}});else if(e in h2)r=h2[e](r),this.mutate({standardProps:{[e]:r}});else if(e in bN){let n=bN[e](r);e==="color"?n={backgroundColor:r,borderColor:r}:e==="editable"?n={startEditable:r,durationEditable:r}:n={[e]:r},this.mutate({standardProps:{ui:n}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,r){this.mutate({extendedProps:{[e]:r}})}setStart(e,r={}){let{dateEnv:n}=this._context,a=n.createMarker(e);if(a&&this._instance){let i=this._instance.range,o=Gg(i.start,a,n,r.granularity);r.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,r={}){let{dateEnv:n}=this._context,a;if(!(e!=null&&(a=n.createMarker(e),!a))&&this._instance)if(a){let i=Gg(this._instance.range.end,a,n,r.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,r,n={}){let{dateEnv:a}=this._context,i={allDay:n.allDay},o=a.createMarker(e),l;if(o&&!(r!=null&&(l=a.createMarker(r),!l))&&this._instance){let c=this._instance.range;n.allDay===!0&&(c=Bre(c));let u=Gg(c.start,o,a,n.granularity);if(l){let d=Gg(c.end,l,a,n.granularity);Vtt(u,d)?this.mutate({datesDelta:u,standardProps:i}):this.mutate({startDelta:u,endDelta:d,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:u,standardProps:i})}}moveStart(e){let r=mn(e);r&&this.mutate({startDelta:r})}moveEnd(e){let r=mn(e);r&&this.mutate({endDelta:r})}moveDates(e){let r=mn(e);r&&this.mutate({datesDelta:r})}setAllDay(e,r={}){let n={allDay:e},{maintainDuration:a}=r;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(n.hasEnd=a),this.mutate({standardProps:n})}formatRange(e){let{dateEnv:r}=this._context,n=this._instance,a=Da(e);return this._def.hasEnd?r.formatRange(n.range.start,n.range.end,a,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):r.format(n.range.start,a,{forcedTzo:n.forcedStartTzo})}mutate(e){let r=this._instance;if(r){let n=this._def,a=this._context,{eventStore:i}=a.getCurrentData(),o=vF(i,r.instanceId);o=wF(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let c=new vs(a,n,r);this._def=o.defs[n.defId],this._instance=o.instances[r.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:jm(o,a,r),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let e=this._context,r=Lre(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:r}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:r})}})}get source(){let{sourceId:e}=this._def;return e?new Og(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let r=this._def,{ui:n}=r,{startStr:a,endStr:i}=this,o={allDay:r.allDay};return r.title&&(o.title=r.title),a&&(o.start=a),i&&(o.end=i),r.publicId&&(o.id=r.publicId),r.groupId&&(o.groupId=r.groupId),r.url&&(o.url=r.url),n.display&&n.display!=="auto"&&(o.display=n.display),e.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?o.color=n.backgroundColor:(n.backgroundColor&&(o.backgroundColor=n.backgroundColor),n.borderColor&&(o.borderColor=n.borderColor)),n.textColor&&(o.textColor=n.textColor),n.classNames.length&&(o.classNames=n.classNames),Object.keys(r.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,r.extendedProps):o.extendedProps=r.extendedProps),o}toJSON(){return this.toPlainObject()}}function Lre(t){let e=t._def,r=t._instance;return{defs:{[e.defId]:e},instances:r?{[r.instanceId]:r}:{}}}function jm(t,e,r){let{defs:n,instances:a}=t,i=[],o=r?r.instanceId:"";for(let l in a){let c=a[l],u=n[c.defId];c.instanceId!==o&&i.push(new vs(e,u,c))}return i}function f9(t,e,r,n){let a={},i={},o={},l=[],c=[],u=wN(t.defs,e);for(let d in t.defs){let f=t.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(a[f.groupId]=[],o[f.groupId]||(o[f.groupId]=f)):i[d]=[])}for(let d in t.instances){let f=t.instances[d],A=t.defs[f.defId],h=u[A.defId],m=f.range,p=!A.allDay&&n?Tre(m,n):m,g=sx(p,r);g&&(h.display==="inverse-background"?A.groupId?a[A.groupId].push(g):i[f.defId].push(g):h.display!=="none"&&(h.display==="background"?l:c).push({def:A,ui:h,instance:f,range:g,isStart:p.start&&p.start.valueOf()===g.start.valueOf(),isEnd:p.end&&p.end.valueOf()===g.end.valueOf()}))}for(let d in a){let f=a[d],A=o9(f,r);for(let h of A){let m=o[d],p=u[m.defId];l.push({def:m,ui:p,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let d in i){let f=i[d],A=o9(f,r);for(let h of A)l.push({def:t.defs[d],ui:u[d],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function h9(t,e){t.fcSeg=e}function ax(t){return t.fcSeg||t.parentNode.fcSeg||null}function wN(t,e){return mp(t,r=>Ure(r,e))}function Ure(t,e){let r=[];return e[""]&&r.push(e[""]),e[t.defId]&&r.push(e[t.defId]),r.push(t.ui),rnt(r)}function bnt(t,e){let r=t.map(ynt);return r.sort((n,a)=>Mtt(n,a,e)),r.map(n=>n._seg)}function ynt(t){let{eventRange:e}=t,r=e.def,n=e.instance?e.instance.range:e.range,a=n.start?n.start.valueOf():0,i=n.end?n.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},r.extendedProps),r),{id:r.publicId,start:a,end:i,duration:i-a,allDay:Number(r.allDay),_seg:t})}function wnt(t,e){let{pluginHooks:r}=e,n=r.isDraggableTransformers,{def:a,ui:i}=t.eventRange,o=i.startEditable;for(let l of n)o=l(o,a,i,e);return o}function jnt(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function Cnt(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function $re(t,e,r,n,a,i,o){let{dateEnv:l,options:c}=r,{displayEventTime:u,displayEventEnd:d}=c,f=t.eventRange.def,A=t.eventRange.instance;u==null&&(u=n!==!1),d==null&&(d=a!==!1);let h=A.range.start,m=A.range.end,p=t.start||t.eventRange.range.start,g=t.end||t.eventRange.range.end,x=xs(h).valueOf()===xs(p).valueOf(),v=xs($h(m,-1)).valueOf()===xs($h(g,-1)).valueOf();return u&&!f.allDay&&(x||v)?(p=x?h:p,g=v?m:g,d&&f.hasEnd?l.formatRange(p,g,e,{forcedStartTzo:A.forcedStartTzo,forcedEndTzo:A.forcedEndTzo}):l.format(p,e,{forcedTzo:A.forcedStartTzo})):""}function $b(t,e,r){let n=t.eventRange.range;return{isPast:n.end<=e.start,isFuture:n.start>=e.end,isToday:e&&_h(e,n.start)}}function Nnt(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function Snt(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function Hre(t,e){let{def:r,instance:n}=t.eventRange,{url:a}=r;if(a)return{href:a};let{emitter:i,options:o}=e,{eventInteractive:l}=o;return l==null&&(l=r.interactive,l==null&&(l=!!i.hasHandlers("eventClick"))),l?bre(c=>{i.trigger("eventClick",{el:c.target,event:new vs(e,r,n),jsEvent:c,view:e.viewApi})}):{}}const Ent={start:et,end:et,allDay:Boolean};function Bnt(t,e,r){let n=Tnt(t,e),{range:a}=n;if(!a.start)return null;if(!a.end){if(r==null)return null;a.end=e.add(a.start,r)}return n}function Tnt(t,e){let{refined:r,extra:n}=fF(t,Ent),a=r.start?e.createMarkerMeta(r.start):null,i=r.end?e.createMarkerMeta(r.end):null,{allDay:o}=r;return o==null&&(o=a&&a.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:i?i.marker:null},allDay:o},n)}function Dnt(t,e){return Vrt(t.range,e.range)&&t.allDay===e.allDay&&Int(t,e)}function Int(t,e){for(let r in e)if(r!=="range"&&r!=="allDay"&&t[r]!==e[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}function _nt(t,e){return Object.assign(Object.assign({},zre(t.range,e,t.allDay)),{allDay:t.allDay})}function Qre(t,e,r){return Object.assign(Object.assign({},zre(t,e,r)),{timeZone:e.timeZone})}function zre(t,e,r){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:r}),endStr:e.formatIso(t.end,{omitTime:r})}}function Pnt(t,e,r){let n=Pre({editable:!1},r),a=O_(n.refined,n.extra,"",t.allDay,!0,r);return{def:a,ui:Ure(a,e),instance:gF(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function knt(t,e,r){let n=!1,a=function(l){n||(n=!0,e(l))},i=function(l){n||(n=!0,r(l))},o=t(a,i);o&&typeof o.then=="function"&&o.then(a,i)}class A9 extends Error{constructor(e,r){super(e),this.response=r}}function Ont(t,e,r){t=t.toUpperCase();const n={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(r):(n.body=new URLSearchParams(r),n.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,n).then(a=>{if(a.ok)return a.json().then(i=>[i,a],()=>{throw new A9("Failure parsing JSON",a)});throw new A9("Request failed",a)})}let o4;function Vre(){return o4==null&&(o4=Fnt()),o4}function Fnt(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let r=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),r}class Rnt extends ks{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{vN(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{vN(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:r}=e,{forPrint:n}=this.state,a=n||r.height==="auto"||r.contentHeight==="auto",i=!a&&r.height!=null?r.height:"",o=["fc",n?"fc-media-print":"fc-media-screen",`fc-direction-${r.direction}`,e.theme.getClass("root")];return Vre()||o.push("fc-liquid-hack"),e.children(o,i,a,n)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Kx{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function Mnt(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function jF(t){return{[t.component.uid]:t}}const R_={};class u5 extends sl{constructor(e,r){super(e,r),this.handleRefresh=()=>{let n=this.computeTiming();n.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(n.state),this.clearTimeout(),this.setTimeout(n.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:r}=this;return e.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:r}=this,n=r.nowManager.getDateMarker(),a=r.dateEnv.startOf(n,e.unit),o=r.dateEnv.add(a,mn(1,e.unit)).valueOf()-n.valueOf();return o=Math.min(1e3*60*60*24,o),{state:{nowDate:a,todayRange:Lnt(a)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const r=this.computeTiming();this.setState(r.state,()=>{this.setTimeout(r.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}u5.contextType=pp;function Lnt(t){let e=xs(t),r=ji(e,1);return{start:e,end:r}}class Unt{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,r){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:r})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,r){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[e]?n.emitter.on(e,r):console.warn(`Unknown listener name '${e}'`)}off(e,r){this.currentDataManager.emitter.off(e,r)}trigger(e,...r){this.currentDataManager.emitter.trigger(e,...r)}changeView(e,r){this.batchRendering(()=>{if(this.unselect(),r)if(r.start&&r.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:r});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:n.createMarker(r)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,r){let n=this.getCurrentData(),a;r=r||"day",a=n.viewSpecs[r]||this.getUnitViewSpec(r),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:r,toolbarConfig:n}=this.getCurrentData(),a=[].concat(n.header?n.header.viewsWithButtons:[],n.footer?n.footer.viewsWithButtons:[]),i,o;for(let l in r)a.push(l);for(i=0;i<a.length;i+=1)if(o=r[a[i]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let r=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.createMarker(e)})}incrementDate(e){let r=this.getCurrentData(),n=mn(e);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.add(r.currentDate,n)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,r){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(e),Da(r))}formatRange(e,r,n){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(r),Da(n),n)}formatIso(e,r){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(e),{omitTime:r})}select(e,r){let n;r==null?e.start!=null?n=e:n={start:e,end:null}:n={start:e,end:r};let a=this.getCurrentData(),i=Bnt(n,a.dateEnv,mn({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),Mre(i,null,a))}unselect(e){let r=this.getCurrentData();r.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),gnt(e,r))}addEvent(e,r){if(e instanceof vs){let o=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:F_({def:o,instance:l})}),this.triggerEventAdd(e)),e}let n=this.getCurrentData(),a;if(r instanceof Og)a=r.internalEventSource;else if(typeof r=="boolean")r&&([a]=AF(n.eventSources));else if(r!=null){let o=this.getEventSourceById(r);if(!o)return console.warn(`Could not find an event source with ID "${r}"`),null;a=o.internalEventSource}let i=_re(e,a,n,!1);if(i){let o=new vs(n,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:F_(i)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:r}=this.getCurrentData();r.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Lre(e)})}})}getEventById(e){let r=this.getCurrentData(),{defs:n,instances:a}=r.eventStore;e=String(e);for(let i in n){let o=n[i];if(o.publicId===e){if(o.recurringDef)return new vs(r,o,null);for(let l in a){let c=a[l];if(c.defId===o.defId)return new vs(r,o,c)}}}return null}getEvents(){let e=this.getCurrentData();return jm(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),r=e.eventSources,n=[];for(let a in r)n.push(new Og(e,r[a]));return n}getEventSourceById(e){let r=this.getCurrentData(),n=r.eventSources;e=String(e);for(let a in n)if(n[a].publicId===e)return new Og(r,n[a]);return null}addEventSource(e){let r=this.getCurrentData();if(e instanceof Og)return r.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let n=kre(e,r);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new Og(r,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let r=mn(e);r&&this.trigger("_scrollRequest",{time:r})}}function $nt(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function Wre(t,e){let r={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return r.left<r.right&&r.top<r.bottom?r:!1}function Hnt(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function Qnt(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function znt(t,e){return{left:t.left-e.left,top:t.top-e.top}}function Gre(t,e,r,n){return{dow:t.getUTCDay(),isDisabled:!!(n&&(!n.activeRange||!_h(n.activeRange,t))),isOther:!!(n&&!_h(n.currentRange,t)),isToday:!!(e&&_h(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function CF(t,e){let r=["fc-day",`fc-day-${Ktt[t.dow]}`];return t.isDisabled?r.push("fc-day-disabled"):(t.isToday&&(r.push("fc-day-today"),r.push(e.getClass("today"))),t.isPast&&r.push("fc-day-past"),t.isFuture&&r.push("fc-day-future"),t.isOther&&r.push("fc-day-other")),r}const Vnt=Da({year:"numeric",month:"long",day:"numeric"}),Wnt=Da({week:"long"});function M_(t,e,r="day",n=!0){const{dateEnv:a,options:i,calendarApi:o}=t;let l=a.format(e,r==="week"?Wnt:Vnt);if(i.navLinks){let c=a.toDate(e);const u=d=>{let f=r==="day"?i.navLinkDayClick:r==="week"?i.navLinkWeekClick:null;typeof f=="function"?f.call(o,a.toDate(e),d):(typeof f=="string"&&(r=f),o.zoomTo(e,r))};return Object.assign({title:Lb(i.navLinkHint,[l,c],l),"data-navlink":""},n?vre(u):{onClick:u})}return{"aria-label":l}}let l4=null;function Gnt(){return l4===null&&(l4=qnt()),l4}function qnt(){let t=document.createElement("div");Mb(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let r=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return oF(t),r}let c4;function Knt(){return c4||(c4=Ynt()),c4}function Ynt(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=qre(t);return document.body.removeChild(t),e}function qre(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function Xnt(t,e=!1){let r=window.getComputedStyle(t),n=parseInt(r.borderLeftWidth,10)||0,a=parseInt(r.borderRightWidth,10)||0,i=parseInt(r.borderTopWidth,10)||0,o=parseInt(r.borderBottomWidth,10)||0,l=qre(t),c=l.y-n-a,u=l.x-i-o,d={borderLeft:n,borderRight:a,borderTop:i,borderBottom:o,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return Gnt()&&r.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,e&&(d.paddingLeft=parseInt(r.paddingLeft,10)||0,d.paddingRight=parseInt(r.paddingRight,10)||0,d.paddingTop=parseInt(r.paddingTop,10)||0,d.paddingBottom=parseInt(r.paddingBottom,10)||0),d}function Jnt(t,e=!1,r){let n=NF(t),a=Xnt(t,e),i={left:n.left+a.borderLeft+a.scrollbarLeft,right:n.right-a.borderRight-a.scrollbarRight,top:n.top+a.borderTop,bottom:n.bottom-a.borderBottom-a.scrollbarBottom};return e&&(i.left+=a.paddingLeft,i.right-=a.paddingRight,i.top+=a.paddingTop,i.bottom-=a.paddingBottom),i}function NF(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function Znt(t){let e=Kre(t),r=t.getBoundingClientRect();for(let n of e){let a=Wre(r,n.getBoundingClientRect());if(a)r=a;else return null}return r}function Kre(t){let e=[];for(;t instanceof HTMLElement;){let r=window.getComputedStyle(t);if(r.position==="fixed")break;/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&e.push(t),t=t.parentNode}return e}class jN{constructor(e,r,n,a){this.els=r;let i=this.originClientRect=e.getBoundingClientRect();n&&this.buildElHorizontals(i.left),a&&this.buildElVerticals(i.top)}buildElHorizontals(e){let r=[],n=[];for(let a of this.els){let i=a.getBoundingClientRect();r.push(i.left-e),n.push(i.right-e)}this.lefts=r,this.rights=n}buildElVerticals(e){let r=[],n=[];for(let a of this.els){let i=a.getBoundingClientRect();r.push(i.top-e),n.push(i.bottom-e)}this.tops=r,this.bottoms=n}leftToIndex(e){let{lefts:r,rights:n}=this,a=r.length,i;for(i=0;i<a;i+=1)if(e>=r[i]&&e<n[i])return i}topToIndex(e){let{tops:r,bottoms:n}=this,a=r.length,i;for(i=0;i<a;i+=1)if(e>=r[i]&&e<n[i])return i}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Oj(this.tops||[],e.tops||[])&&Oj(this.bottoms||[],e.bottoms||[])&&Oj(this.lefts||[],e.lefts||[])&&Oj(this.rights||[],e.rights||[])}}function Oj(t,e){const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(Math.round(t[n])!==Math.round(e[n]))return!1;return!0}class SF{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class est extends SF{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class tst extends SF{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class xp extends ks{constructor(){super(...arguments),this.uid=Ap()}prepareHits(){}queryHit(e,r,n,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!xi(e,".fc-event-mirror")}isValidDateDownEl(e){return!xi(e,".fc-event:not(.fc-bg-event)")&&!xi(e,".fc-more-link")&&!xi(e,"a[data-navlink]")&&!xi(e,".fc-popover")}}class rst{constructor(e=r=>r.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let r=[];for(let n of e)this.insertEntry(n,r);return r}insertEntry(e,r){let n=this.findInsertion(e);this.isInsertionValid(n,e)?this.insertEntryAt(e,n):this.handleInvalidInsertion(n,e,r)}isInsertionValid(e,r){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(r)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,r,n){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},r),{span:Yre(r.span,e.touchingEntry.span)});n.push(a),this.splitEntry(r,e.touchingEntry,n)}else n.push(r)}splitEntry(e,r,n){let a=e.span,i=r.span;a.start<i.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:i.start}},n),a.end>i.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.end,end:a.end}},n)}insertEntryAt(e,r){let{entriesByLevel:n,levelCoords:a}=this;r.lateral===-1?(u4(a,r.level,r.levelCoord),u4(n,r.level,[e])):u4(n[r.level],r.lateral,e),this.stackCnts[Hb(e)]=r.stackCnt}findInsertion(e){let{levelCoords:r,entriesByLevel:n,strictOrder:a,stackCnts:i}=this,o=r.length,l=0,c=-1,u=-1,d=null,f=0;for(let m=0;m<o;m+=1){const p=r[m];if(!a&&p>=l+this.getEntryThickness(e))break;let g=n[m],x,v=p9(g,e.span.start,m9),b=v[0]+v[1];for(;(x=g[b])&&x.span.start<e.span.end;){let C=p+this.getEntryThickness(x);C>l&&(l=C,d=x,c=m,u=b),C===l&&(f=Math.max(f,i[Hb(x)]+1)),b+=1}}let A=0;if(d)for(A=c+1;A<o&&r[A]<l;)A+=1;let h=-1;return A<o&&r[A]===l&&(h=p9(n[A],e.span.end,m9)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:l,level:A,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:r}=this,n=e.length,a=[];for(let i=0;i<n;i+=1){let o=e[i],l=r[i];for(let c of o)a.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return a}}function m9(t){return t.span.end}function Hb(t){return t.index+":"+t.span.start}function Yre(t,e){let r=Math.max(t.start,e.start),n=Math.min(t.end,e.end);return r<n?{start:r,end:n}:null}function u4(t,e,r){t.splice(e,0,r)}function p9(t,e,r){let n=0,a=t.length;if(!a||e<r(t[n]))return[0,0];if(e>r(t[a-1]))return[a,0];for(;n<a;){let i=Math.floor(n+(a-n)/2),o=r(t[i]);if(e<o)a=i;else if(e>o)n=i+1;else return[i,1]}return[n,0]}class nst{constructor(e,r){this.emitter=new c5}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const EF={};function sst(t,e){return!t||e>10?Da({weekday:"short"}):e>1?Da({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Da({weekday:"long"})}const Xre="fc-col-header-cell";function Jre(t){return t.text}class ast extends ks{render(){let{dateEnv:e,options:r,theme:n,viewApi:a}=this.context,{props:i}=this,{date:o,dateProfile:l}=i,c=Gre(o,i.todayRange,null,l),u=[Xre].concat(CF(c,n)),d=e.format(o,i.dayHeaderFormat),f=!c.isDisabled&&i.colCnt>1?M_(this.context,o):{},A=e.toDate(o);e.namedTimeZoneImpl&&(A=$h(A,36e5));let h=Object.assign(Object.assign(Object.assign({date:A,view:a},i.extraRenderProps),{text:d}),c);return rt(Af,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":c.isDisabled?void 0:uF(o)},i.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:Jre,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},m=>rt("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&rt(m,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const ist=Da({weekday:"long"});class ost extends ks{render(){let{props:e}=this,{dateEnv:r,theme:n,viewApi:a,options:i}=this.context,o=ji(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=r.format(o,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:o},l),{view:a}),e.extraRenderProps),{text:c});return rt(Af,{elTag:"th",elClasses:[Xre,...CF(l,n),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:Jre,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},d=>rt("div",{className:"fc-scrollgrid-sync-inner"},rt(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":r.format(o,ist)}})))}}class lst extends ks{constructor(){super(...arguments),this.createDayHeaderFormatter=pn(cst)}render(){let{context:e}=this,{dates:r,dateProfile:n,datesRepDistinctDays:a,renderIntro:i}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,r.length);return rt(u5,{unit:"day"},(l,c)=>rt("tr",{role:"row"},i&&i("day"),r.map(u=>a?rt(ast,{key:u.toISOString(),date:u,dateProfile:n,todayRange:c,colCnt:r.length,dayHeaderFormat:o}):rt(ost,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:o}))))}}function cst(t,e,r){return t||sst(e,r)}class ust{constructor(e,r){let n=e.start,{end:a}=e,i=[],o=[],l=-1;for(;n<a;)r.isHiddenDay(n)?i.push(l+.5):(l+=1,i.push(l),o.push(n)),n=ji(n,1);this.dates=o,this.indices=i,this.cnt=o.length}sliceRange(e){let r=this.getDateDayIndex(e.start),n=this.getDateDayIndex(ji(e.end,-1)),a=Math.max(0,r),i=Math.min(this.cnt-1,n);return a=Math.ceil(a),i=Math.floor(i),a<=i?{firstIndex:a,lastIndex:i,isStart:r===a,isEnd:n===i}:null}getDateDayIndex(e){let{indices:r}=this,n=Math.floor(qx(this.dates[0],e));return n<0?r[0]-1:n>=r.length?r[r.length-1]+1:r[n]}}class dst{constructor(e,r){let{dates:n}=e,a,i,o;if(r){for(i=n[0].getUTCDay(),a=1;a<n.length&&n[a].getUTCDay()!==i;a+=1);o=Math.ceil(n.length/a)}else o=1,a=n.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let r=0;r<this.rowCnt;r+=1){let n=[];for(let a=0;a<this.colCnt;a+=1)n.push(this.buildCell(r,a));e.push(n)}return e}buildCell(e,r){let n=this.daySeries.dates[e*this.colCnt+r];return{key:n.toISOString(),date:n}}buildHeaderDates(){let e=[];for(let r=0;r<this.colCnt;r+=1)e.push(this.cells[0][r].date);return e}sliceRange(e){let{colCnt:r}=this,n=this.daySeries.sliceRange(e),a=[];if(n){let{firstIndex:i,lastIndex:o}=n,l=i;for(;l<=o;){let c=Math.floor(l/r),u=Math.min((c+1)*r,o+1);a.push({row:c,firstCol:l%r,lastCol:(u-1)%r,isStart:n.isStart&&l===i,isEnd:n.isEnd&&u-1===o}),l=u}}return a}}class fst{constructor(){this.sliceBusinessHours=pn(this._sliceBusinessHours),this.sliceDateSelection=pn(this._sliceDateSpan),this.sliceEventStore=pn(this._sliceEventStore),this.sliceEventDrag=pn(this._sliceInteraction),this.sliceEventResize=pn(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,r,n,a,...i){let{eventUiBases:o}=e,l=this.sliceEventStore(e.eventStore,o,r,n,...i);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,r,n,o,a,...i),businessHourSegs:this.sliceBusinessHours(e.businessHours,r,n,a,...i),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,r,n,...i),eventResize:this.sliceEventResize(e.eventResize,o,r,n,...i),eventSelection:e.eventSelection}}sliceNowDate(e,r,n,a,...i){return this._sliceDateSpan({range:{start:e,end:$h(e,1)},allDay:!1},r,n,{},a,...i)}_sliceBusinessHours(e,r,n,a,...i){return e?this._sliceEventStore(qm(e,Fj(r,!!n),a),{},r,n,...i).bg:[]}_sliceEventStore(e,r,n,a,...i){if(e){let o=f9(e,r,Fj(n,!!a),a);return{bg:this.sliceEventRanges(o.bg,i),fg:this.sliceEventRanges(o.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(e,r,n,a,...i){if(!e)return null;let o=f9(e.mutatedEvents,r,Fj(n,!!a),a);return{segs:this.sliceEventRanges(o.fg,i),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,r,n,a,i,...o){if(!e)return[];let l=Fj(r,!!n),c=sx(e.range,l);if(c){e=Object.assign(Object.assign({},e),{range:c});let u=Pnt(e,a,i),d=this.sliceRange(e.range,...o);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(e,r){let n=[];for(let a of e)n.push(...this.sliceEventRange(a,r));return n}sliceEventRange(e,r){let n=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(n={start:n.start,end:ji(n.start,1)});let a=this.sliceRange(n,...r);for(let i of a)i.eventRange=e,i.isStart=e.isStart&&i.isStart,i.isEnd=e.isEnd&&i.isEnd;return a}}function Fj(t,e){let r=t.activeRange;return e?r:{start:$h(r.start,t.slotMinTime.milliseconds),end:$h(r.end,t.slotMaxTime.milliseconds-864e5)}}function Zre(t,e,r){let{instances:n}=t.mutatedEvents;for(let a in n)if(!o5(e.validRange,n[a].range))return!1;return ene({eventDrag:t},r)}function hst(t,e,r){return o5(e.validRange,t.range)?ene({dateSelection:t},r):!1}function ene(t,e){let r=e.getCurrentData(),n=Object.assign({businessHours:r.businessHours,dateSelection:"",eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||Ast)(n,e)}function Ast(t,e,r={},n){return!(t.eventDrag&&!mst(t,e,r,n)||t.dateSelection&&!pst(t,e,r,n))}function mst(t,e,r,n){let a=e.getCurrentData(),i=t.eventDrag,o=i.mutatedEvents,l=o.defs,c=o.instances,u=wN(l,i.isEvent?t.eventUiBases:{"":a.selectionConfig});n&&(u=mp(u,n));let d=unt(t.eventStore,i.affectedEvents.instances),f=d.defs,A=d.instances,h=wN(f,t.eventUiBases);for(let m in c){let p=c[m],g=p.range,x=u[p.defId],v=l[p.defId];if(!tne(x.constraints,g,d,t.businessHours,e))return!1;let{eventOverlap:b}=e.options,C=typeof b=="function"?b:null;for(let w in A){let N=A[w];if(pF(g,N.range)&&(h[N.defId].overlap===!1&&i.isEvent||x.overlap===!1||C&&!C(new vs(e,f[N.defId],N),new vs(e,v,p))))return!1}let j=a.eventStore;for(let w of x.allows){let N=Object.assign(Object.assign({},r),{range:p.range,allDay:v.allDay}),E=j.defs[v.defId],_=j.instances[m],k;if(E?k=new vs(e,E,_):k=new vs(e,v),!w(yF(N,e),k))return!1}}return!0}function pst(t,e,r,n){let a=t.eventStore,i=a.defs,o=a.instances,l=t.dateSelection,c=l.range,{selectionConfig:u}=e.getCurrentData();if(n&&(u=n(u)),!tne(u.constraints,c,a,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,f=typeof d=="function"?d:null;for(let A in o){let h=o[A];if(pF(c,h.range)&&(u.overlap===!1||f&&!f(new vs(e,i[h.defId],h),null)))return!1}for(let A of u.allows){let h=Object.assign(Object.assign({},r),l);if(!A(yF(h,e),null))return!1}return!0}function tne(t,e,r,n,a){for(let i of t)if(!xst(gst(i,e,r,n,a),e))return!1;return!0}function gst(t,e,r,n,a){return t==="businessHours"?d4(qm(n,e,a)):typeof t=="string"?d4(l5(r,i=>i.groupId===t)):typeof t=="object"&&t?d4(qm(t,e,a)):[]}function d4(t){let{instances:e}=t,r=[];for(let n in e)r.push(e[n].range);return r}function xst(t,e){for(let r of t)if(o5(r,e))return!0;return!1}const Rj=/^(visible|hidden)$/;class vst extends ks{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,ef(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:r,liquidIsAbsolute:n}=e,a=r&&n,i=["fc-scroller"];return r&&(n?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),rt("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Rj.test(this.props.overflowX))return!1;let{el:e}=this,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().width>r)return!0;return!1}needsYScrolling(){if(Rj.test(this.props.overflowY))return!1;let{el:e}=this,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().height>r)return!0;return!1}getXScrollbarWidth(){return Rj.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Rj.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class lm{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(r,n)=>{let{depths:a,currentMap:i}=this,o=!1,l=!1;r!==null?(o=n in i,i[n]=r,a[n]=(a[n]||0)+1,l=!0):(a[n]-=1,a[n]||(delete i[n],delete this.callbackMap[n],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(n)),l&&this.masterCallback(r,String(n)))}}createRef(e){let r=this.callbackMap[e];return r||(r=this.callbackMap[e]=n=>{this.handleValue(n,String(e))}),r}collect(e,r,n){return Brt(this.currentMap,e,r,n)}getAll(){return AF(this.currentMap)}}function bst(t){let e=Btt(t,".fc-scrollgrid-shrink"),r=0;for(let n of e)r=Math.max(r,Htt(n));return Math.ceil(r)}function rne(t,e){return t.liquid&&e.liquid}function yst(t,e){return e.maxHeight!=null||rne(t,e)}function wst(t,e,r,n){let{expandRows:a}=r;return typeof e.content=="function"?e.content(r):rt("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:r.tableMinWidth,width:r.clientWidth,height:a?r.clientHeight:""}},r.tableColGroupNode,rt(n?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(r):e.rowContent))}function jst(t,e){return Uh(t,e,Lu)}function Cst(t,e){let r=[];for(let n of t){let a=n.span||1;for(let i=0;i<a;i+=1)r.push(rt("col",{style:{width:n.width==="shrink"?Nst(e):n.width||"",minWidth:n.minWidth||""}}))}return rt("colgroup",{},...r)}function Nst(t){return t??4}function Sst(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function Est(t,e){let r=["fc-scrollgrid",e.theme.getClass("table")];return t&&r.push("fc-scrollgrid-liquid"),r}function Bst(t,e){let r=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&r.push("fc-scrollgrid-section-liquid"),t.isSticky&&r.push("fc-scrollgrid-section-sticky"),r}function Tst(t){return rt("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function g9(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function Dst(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class nne extends ks{constructor(){super(...arguments),this.processCols=pn(e=>e,jst),this.renderMicroColGroup=pn(Cst),this.scrollerRefs=new lm,this.scrollerElRefs=new lm(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:r,context:n}=this,a=e.sections||[],i=this.processCols(e.cols),o=this.renderMicroColGroup(i,r.shrinkWidth),l=Est(e.liquid,n);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=a.length,u=0,d,f=[],A=[],h=[];for(;u<c&&(d=a[u]).type==="header";)f.push(this.renderSection(d,o,!0)),u+=1;for(;u<c&&(d=a[u]).type==="body";)A.push(this.renderSection(d,o,!1)),u+=1;for(;u<c&&(d=a[u]).type==="footer";)h.push(this.renderSection(d,o,!0)),u+=1;let m=!Vre();const p={role:"rowgroup"};return rt("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!m&&f.length)&&rt("thead",p,...f),!!(!m&&A.length)&&rt("tbody",p,...A),!!(!m&&h.length)&&rt("tfoot",p,...h),m&&rt("tbody",p,...f,...A,...h))}renderSection(e,r,n){return"outerContent"in e?rt(Us,{key:e.key},e.outerContent):rt("tr",{key:e.key,role:"presentation",className:Bst(e,this.props.liquid).join(" ")},this.renderChunkTd(e,r,e.chunk,n))}renderChunkTd(e,r,n,a){if("outerContent"in n)return n.outerContent;let{props:i}=this,{forceYScrollbars:o,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,u=yst(i,e),d=rne(i,e),f=i.liquid?o?"scroll":u?"auto":"hidden":"visible",A=e.key,h=wst(e,n,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&l[A]!==void 0?l[A]:null,clientHeight:c[A]!==void 0?c[A]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return rt(a?"th":"td",{ref:n.elRef,role:"presentation"},rt("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},rt(vst,{ref:this.scrollerRefs.createRef(A),elRef:this.scrollerElRefs.createRef(A),overflowY:f,overflowX:i.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,r){let n=Ist(this.props.sections,r);n&&ef(n.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return Sst(this.props.cols)?bst(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=Knt(),{scrollerRefs:r,scrollerElRefs:n}=this,a=!1,i={},o={};for(let l in r.currentMap){let c=r.currentMap[l];if(c&&c.needsYScrolling()){a=!0;break}}for(let l of this.props.sections){let c=l.key,u=n.currentMap[c];if(u){let d=u.parentNode;i[c]=Math.floor(d.getBoundingClientRect().width-(a?e.y:0)),o[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:i,scrollerClientHeights:o}}}nne.addStateEquality({scrollerClientWidths:Lu,scrollerClientHeights:Lu});function Ist(t,e){for(let r of t)if(r.key===e)return r;return null}class BF extends ks{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&h9(e,this.props.seg)}}render(){const{props:e,context:r}=this,{options:n}=r,{seg:a}=e,{eventRange:i}=a,{ui:o}=i,l={event:new vs(r,i.def,i.instance),view:r.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&wnt(a,r),isStartResizable:!e.disableResizing&&jnt(a,r),isEndResizable:!e.disableResizing&&Cnt(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return rt(Af,Object.assign({},e,{elRef:this.handleEl,elClasses:[...Nnt(l),...a.eventRange.ui.classNames,...e.elClasses||[]],renderProps:l,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&h9(this.el,this.props.seg)}}class _st extends ks{render(){let{props:e,context:r}=this,{options:n}=r,{seg:a}=e,{ui:i}=a.eventRange,o=n.eventTimeFormat||e.defaultTimeFormat,l=$re(a,o,r,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return rt(BF,Object.assign({},e,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:Hre(a,r),defaultGenerator:Pst,timeText:l}),(c,u)=>rt(Us,null,rt(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&rt("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&rt("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function Pst(t){return rt("div",{className:"fc-event-main-frame"},t.timeText&&rt("div",{className:"fc-event-time"},t.timeText),rt("div",{className:"fc-event-title-container"},rt("div",{className:"fc-event-title fc-sticky"},t.event.title||rt(Us,null," "))))}const kst=Da({day:"numeric"});class sne extends ks{constructor(){super(...arguments),this.refineRenderProps=f2(Ost)}render(){let{props:e,context:r}=this,{options:n}=r,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:r.viewApi,dateEnv:r.dateEnv,monthStartFormat:n.monthStartFormat});return rt(Af,Object.assign({},e,{elClasses:[...CF(a,r.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":uF(e.date)}),renderProps:a,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount}))}}function ane(t){return!!(t.dayCellContent||k_("dayCellContent",t))}function Ost(t){let{date:e,dateEnv:r,dateProfile:n,isMonthStart:a}=t,i=Gre(e,t.todayRange,null,n),o=t.showDayNumber?r.format(e,a?t.monthStartFormat:kst):"";return Object.assign(Object.assign(Object.assign({date:r.toDate(e),view:t.viewApi},i),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class Fst extends ks{render(){let{props:e}=this,{seg:r}=e;return rt(BF,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:r.eventRange.ui.backgroundColor},defaultGenerator:Rst,seg:r,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function Rst(t){let{title:e}=t.event;return e&&rt("div",{className:"fc-event-title"},t.event.title)}function Mst(t){return rt("div",{className:`fc-${t}`})}const Lst=t=>rt(pp.Consumer,null,e=>{let{dateEnv:r,options:n}=e,{date:a}=t,i=n.weekNumberFormat||t.defaultFormat,o=r.computeWeekNumber(a),l=r.format(a,i);return rt(Af,Object.assign({},t,{renderProps:{num:o,text:l,date:a},generatorName:"weekNumberContent",customGenerator:n.weekNumberContent,defaultGenerator:Ust,classNameGenerator:n.weekNumberClassNames,didMount:n.weekNumberDidMount,willUnmount:n.weekNumberWillUnmount}))});function Ust(t){return t.text}const f4=10;let $st=class extends ks{constructor(){super(...arguments),this.state={titleId:a5()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&ef(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const r=gre(e);this.rootEl.contains(r)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:r}=this.context,{props:n,state:a}=this,i=["fc-popover",e.getClass("popover")].concat(n.extraClassNames||[]);return Att(rt("div",Object.assign({},n.extraAttrs,{id:n.id,className:i.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),rt("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},rt("span",{className:"fc-popover-title",id:a.titleId},n.title),rt("span",{className:"fc-popover-close "+e.getIconClass("close"),title:r.closeHint,onClick:this.handleCloseClick})),rt("div",{className:"fc-popover-body "+e.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:r,alignGridTop:n}=this.props,{rootEl:a}=this,i=Znt(r);if(i){let o=a.getBoundingClientRect(),l=n?xi(r,".fc-scrollgrid").getBoundingClientRect().top:i.top,c=e?i.right-o.width:i.left;l=Math.max(l,f4),c=Math.min(c,document.documentElement.clientWidth-f4-o.width),c=Math.max(c,f4);let u=a.offsetParent.getBoundingClientRect();Mb(a,{top:l-u.top,left:c-u.left})}}};class Hst extends xp{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:r}=this.context,{props:n}=this,{startDate:a,todayRange:i,dateProfile:o}=n,l=r.format(a,e.dayPopoverFormat);return rt(sne,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:i},(c,u,d)=>rt($st,{elRef:d.ref,id:n.id,title:l,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},ane(e)&&rt(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children))}queryHit(e,r,n,a){let{rootEl:i,props:o}=this;return e>=0&&e<n&&r>=0&&r<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:n,bottom:a},layer:1}:null}}class Qst extends ks{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:a5()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&ef(this.props.elRef,e)},this.handleClick=e=>{let{props:r,context:n}=this,{moreLinkClick:a}=n.options,i=x9(r).start;function o(l){let{def:c,instance:u,range:d}=l.eventRange;return{event:new vs(n,c,u),start:n.dateEnv.toDate(d.start),end:n.dateEnv.toDate(d.end),isStart:l.isStart,isEnd:l.isEnd}}typeof a=="function"&&(a=a({date:i,allDay:!!r.allDayDate,allSegs:r.allSegs.map(o),hiddenSegs:r.hiddenSegs.map(o),jsEvent:e,view:n.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&n.calendarApi.zoomTo(i,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:r}=this;return rt(pp.Consumer,null,n=>{let{viewApi:a,options:i,calendarApi:o}=n,{moreLinkText:l}=i,{moreCnt:c}=e,u=x9(e),d=typeof l=="function"?l.call(o,c):`+${c} ${l}`,f=Lb(i.moreLinkHint,[c],d),A={num:c,shortText:`+${c}`,text:d,view:a};return rt(Us,null,!!e.moreCnt&&rt(Af,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),vre(this.handleClick)),{title:f,"aria-expanded":r.isPopoverOpen,"aria-controls":r.isPopoverOpen?r.popoverId:""}),renderProps:A,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:e.defaultGenerator||zst,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},e.children),r.isPopoverOpen&&rt(Hst,{id:r.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=xi(this.linkEl,".fc-view-harness"))}}function zst(t){return t.text}function x9(t){if(t.allDayDate)return{start:t.allDayDate,end:ji(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:Vst(e),end:Gst(e)}}function Vst(t){return t.reduce(Wst).eventRange.range.start}function Wst(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function Gst(t){return t.reduce(qst).eventRange.range.end}function qst(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class Kst{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let r of this.handlers)r(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class Yst extends Kst{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:r}=this;let n=!1;e.isActive?(r.set(e.id,e),n=!0):r.has(e.id)&&(r.delete(e.id),n=!0),n&&this.set(r)}}const Xst=[],ine={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},one=Object.assign(Object.assign({},ine),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function Jst(t){let e=t.length>0?t[0].code:"en",r=Xst.concat(t),n={en:one};for(let a of r)n[a.code]=a;return{map:n,defaultCode:e}}function lne(t,e){return typeof t=="object"&&!Array.isArray(t)?cne(t.code,[t.code],t):Zst(t,e)}function Zst(t,e){let r=[].concat(t||[]),n=eat(r,e)||one;return cne(t,r,n)}function eat(t,e){for(let r=0;r<t.length;r+=1){let n=t[r].toLocaleLowerCase().split("-");for(let a=n.length;a>0;a-=1){let i=n.slice(0,a).join("-");if(e[i])return e[i]}}return null}function cne(t,e,r){let n=hF([ine,r],["buttonText"]);delete n.code;let{week:a}=n;return delete n.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:n}}function Jh(t){return{id:Ap(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function tat(t,e){let r={},n={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(i){for(let o of i){const l=o.name,c=r[l];c===void 0?(r[l]=o.id,a(o.deps),n=nat(n,o)):c!==o.id&&console.warn(`Duplicate plugin '${l}'`)}}return t&&a(t),a(e),n}function rat(){let t=[],e=[],r;return(n,a)=>((!r||!Uh(n,t)||!Uh(a,e))&&(r=tat(n,a)),t=n,e=a,r)}function nat(t,e){return{premiumReleaseDate:sat(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function sat(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Zh extends Vw{}Zh.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Zh.prototype.baseIconClass="fc-icon";Zh.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Zh.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Zh.prototype.iconOverrideOption="buttonIcons";Zh.prototype.iconOverrideCustomButtonOption="icon";Zh.prototype.iconOverridePrefix="fc-icon-";function aat(t,e){let r={},n;for(n in t)L_(n,r,t,e);for(n in e)L_(n,r,t,e);return r}function L_(t,e,r,n){if(e[t])return e[t];let a=iat(t,e,r,n);return a&&(e[t]=a),a}function iat(t,e,r,n){let a=r[t],i=n[t],o=d=>a&&a[d]!==null?a[d]:i&&i[d]!==null?i[d]:null,l=o("component"),c=o("superType"),u=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");u=L_(c,e,r,n)}return!l&&u&&(l=u.component),l?{type:t,component:l,defaults:Object.assign(Object.assign({},u?u.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),i?i.rawOptions:{})}:null}function v9(t){return mp(t,oat)}function oat(t){let e=typeof t=="function"?{component:t}:t,{component:r}=e;return e.content?r=b9(e):r&&!(r.prototype instanceof ks)&&(r=b9(Object.assign(Object.assign({},e),{content:r}))),{superType:e.type,component:r,rawOptions:e}}function b9(t){return e=>rt(pp.Consumer,null,r=>rt(Af,{elTag:"div",elClasses:Ere(r.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:r.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function lat(t,e,r,n){let a=v9(t),i=v9(e.views),o=aat(a,i);return mp(o,l=>cat(l,i,e,r,n))}function cat(t,e,r,n,a){let i=t.overrides.duration||t.defaults.duration||n.duration||r.duration,o=null,l="",c="",u={};if(i&&(o=uat(i),o)){let A=__(o);l=A.unit,A.value===1&&(c=l,u=e[l]?e[l].rawOptions:{})}let d=A=>{let h=A.buttonText||{},m=t.defaults.buttonTextKey;return m!=null&&h[m]!=null?h[m]:h[t.type]!=null?h[t.type]:h[c]!=null?h[c]:null},f=A=>{let h=A.buttonHints||{},m=t.defaults.buttonTextKey;return m!=null&&h[m]!=null?h[m]:h[t.type]!=null?h[t.type]:h[c]!=null?h[c]:null};return{type:t.type,component:t.component,duration:o,durationUnit:l,singleUnit:c,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(n)||d(r)||t.overrides.buttonText,buttonTextDefault:d(a)||t.defaults.buttonText||d(Ub)||t.type,buttonTitleOverride:f(n)||f(r)||t.overrides.buttonHint,buttonTitleDefault:f(a)||t.defaults.buttonHint||f(Ub)}}let y9={};function uat(t){let e=JSON.stringify(t),r=y9[e];return r===void 0&&(r=mn(t),y9[e]=r),r}function dat(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function fat(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function hat(t,e,r){let n=t.initialDate;return n!=null?e.createMarker(n):r.getDateMarker()}function Aat(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function mat(t,e,r,n){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return n.build(e.dateMarker||r);case"CHANGE_DATE":return n.build(e.dateMarker);case"PREV":if(a=n.buildPrev(t,r),a.isValid)return a;break;case"NEXT":if(a=n.buildNext(t,r),a.isValid)return a;break}return t}function pat(t,e,r){let n=e?e.activeRange:null;return dne({},jat(t,r),n,r)}function gat(t,e,r,n){let a=r?r.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return dne(t,e.sources,a,n);case"REMOVE_EVENT_SOURCE":return vat(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?fne(t,a,n):t;case"FETCH_EVENT_SOURCES":return TF(t,e.sourceIds?wre(e.sourceIds):hne(t,n),a,e.isRefetch||!1,n);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return wat(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function xat(t,e,r){let n=e?e.activeRange:null;return TF(t,hne(t,r),n,!0,r)}function une(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function dne(t,e,r,n){let a={};for(let i of e)a[i.sourceId]=i;return r&&(a=fne(a,r,n)),Object.assign(Object.assign({},t),a)}function vat(t,e){return Gm(t,r=>r.sourceId!==e)}function fne(t,e,r){return TF(t,Gm(t,n=>bat(n,e,r)),e,!1,r)}function bat(t,e,r){return Ane(t,r)?!r.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function TF(t,e,r,n,a){let i={};for(let o in t){let l=t[o];e[o]?i[o]=yat(l,r,n,a):i[o]=l}return i}function yat(t,e,r,n){let{options:a,calendarApi:i}=n,o=n.pluginHooks.eventSourceDefs[t.sourceDefId],l=Ap();return o.fetch({eventSource:t,range:e,isRefetch:r,context:n},c=>{let{rawEvents:u}=c;a.eventSourceSuccess&&(u=a.eventSourceSuccess.call(i,u,c.response)||u),t.success&&(u=t.success.call(i,u,c.response)||u),n.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:l,fetchRange:e,rawEvents:u})},c=>{let u=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(i,c),u=!0),t.failure&&(t.failure(c),u=!0),u||console.warn(c.message,c),n.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:l,fetchRange:e,error:c})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:l})}function wat(t,e,r,n){let a=t[e];return a&&r===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:n})}):t}function hne(t,e){return Gm(t,r=>Ane(r,e))}function jat(t,e){let r=Ore(e),n=[].concat(t.eventSources||[]),a=[];t.initialEvents&&n.unshift(t.initialEvents),t.events&&n.unshift(t.events);for(let i of n){let o=kre(i,e,r);o&&a.push(o)}return a}function Ane(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function Cat(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function Nat(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function Sat(t,e){let r;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return r=e.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return t}}function Eat(t,e){let r;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return r=e.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return t}}function Bat(t,e,r,n,a){let i=t.headerToolbar?w9(t.headerToolbar,t,e,r,n,a):null,o=t.footerToolbar?w9(t.footerToolbar,t,e,r,n,a):null;return{header:i,footer:o}}function w9(t,e,r,n,a,i){let o={},l=[],c=!1;for(let u in t){let d=t[u],f=Tat(d,e,r,n,a,i);o[u]=f.widgets,l.push(...f.viewsWithButtons),c=c||f.hasTitle}return{sectionWidgets:o,viewsWithButtons:l,hasTitle:c}}function Tat(t,e,r,n,a,i){let o=e.direction==="rtl",l=e.customButtons||{},c=r.buttonText||{},u=e.buttonText||{},d=r.buttonHints||{},f=e.buttonHints||{},A=t?t.split(" "):[],h=[],m=!1;return{widgets:A.map(g=>g.split(",").map(x=>{if(x==="title")return m=!0,{buttonName:x};let v,b,C,j,w,N;if(v=l[x])C=E=>{v.click&&v.click.call(E.target,E,E.target)},(j=n.getCustomButtonIconClass(v))||(j=n.getIconClass(x,o))||(w=v.text),N=v.hint||v.text;else if(b=a[x]){h.push(x),C=()=>{i.changeView(x)},(w=b.buttonTextOverride)||(j=n.getIconClass(x,o))||(w=b.buttonTextDefault);let E=b.buttonTextOverride||b.buttonTextDefault;N=Lb(b.buttonTitleOverride||b.buttonTitleDefault||e.viewHint,[E,x],E)}else if(i[x])if(C=()=>{i[x]()},(w=c[x])||(j=n.getIconClass(x,o))||(w=u[x]),x==="prevYear"||x==="nextYear"){let E=x==="prevYear"?"prev":"next";N=Lb(d[E]||f[E],[u.year||"year","year"],u[x])}else N=E=>Lb(d[x]||f[x],[u[E]||E,E],u[x]);return{buttonName:x,buttonClick:C,buttonIcon:j,buttonText:w,buttonHint:N}})),viewsWithButtons:h,hasTitle:m}}class Dat{constructor(e,r,n){this.type=e,this.getCurrentData=r,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let Iat={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const _at=Jh({name:"array-event-source",eventSourceDefs:[Iat]});let Pat={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,r){const{dateEnv:n}=t.context,a=t.eventSource.meta;knt(a.bind(null,Qre(t.range,n)),i=>e({rawEvents:i}),r)}};const kat=Jh({name:"func-event-source",eventSourceDefs:[Pat]}),Oat={method:String,extraParams:et,startParam:String,endParam:String,timeZoneParam:String};let Fat={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,r){const{meta:n}=t.eventSource,a=Mat(n,t.range,t.context);Ont(n.method,n.url,a).then(([i,o])=>{e({rawEvents:i,response:o})},r)}};const Rat=Jh({name:"json-event-source",eventSourceRefiners:Oat,eventSourceDefs:[Fat]});function Mat(t,e,r){let{dateEnv:n,options:a}=r,i,o,l,c,u={};return i=t.startParam,i==null&&(i=a.startParam),o=t.endParam,o==null&&(o=a.endParam),l=t.timeZoneParam,l==null&&(l=a.timeZoneParam),typeof t.extraParams=="function"?c=t.extraParams():c=t.extraParams||{},Object.assign(u,c),u[i]=n.formatIso(e.start),u[o]=n.formatIso(e.end),n.timeZone!=="local"&&(u[l]=n.timeZone),u}const Lat={daysOfWeek:et,startTime:mn,endTime:mn,duration:mn,startRecur:et,endRecur:et};let Uat={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let r={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},n;return t.duration&&(n=t.duration),!n&&t.startTime&&t.endTime&&(n=Wtt(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:n,typeData:r}}return null},expand(t,e,r){let n=sx(e,{start:t.startRecur,end:t.endRecur});return n?Hat(t.daysOfWeek,t.startTime,t.dateEnv,r,n):[]}};const $at=Jh({name:"simple-recurring-event",recurringTypes:[Uat],eventRefiners:Lat});function Hat(t,e,r,n,a){let i=t?wre(t):null,o=xs(a.start),l=a.end,c=[];for(;o<l;){let u;(!i||i[o.getUTCDay()])&&(e?u=n.add(o,e):u=o,c.push(n.createMarker(r.toDate(u)))),o=ji(o,1)}return c}const Qat=Jh({name:"change-handler",optionChangeHandlers:{events(t,e){j9([t],e)},eventSources:j9}});function j9(t,e){let r=AF(e.getCurrentData().eventSources);if(r.length===1&&t.length===1&&Array.isArray(r[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:r[0].sourceId,rawEvents:t[0]});return}let n=[];for(let a of t){let i=!1;for(let o=0;o<r.length;o+=1)if(r[o]._raw===a){r.splice(o,1),i=!0;break}i||n.push(a)}for(let a of r)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of n)e.calendarApi.addEventSource(a)}function zat(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Qre(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function Vat(t,e){let{emitter:r}=e;r.hasHandlers("eventsSet")&&r.trigger("eventsSet",jm(t,e))}const Wat=[_at,kat,Rat,$at,Qat,Jh({name:"misc",isLoadingFuncs:[t=>une(t.eventSources)],propSetHandlers:{dateProfile:zat,eventStore:Vat}})];class Gat{constructor(e,r){this.runTaskOption=e,this.drainedOption=r,this.queue=[],this.delayedRunner=new iF(this.drain.bind(this))}request(e,r){this.queue.push(e),this.delayedRunner.request(r)}pause(e){this.delayedRunner.pause(e)}resume(e,r){this.delayedRunner.resume(e,r)}drain(){let{queue:e}=this;for(;e.length;){let r=[],n;for(;n=e.shift();)this.runTask(n),r.push(n);this.drained(r)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function qat(t,e,r){let n;return/^(year|month)$/.test(t.currentRangeUnit)?n=t.currentRange:n=t.activeRange,r.formatRange(n.start,n.end,Da(e.titleFormat||Kat(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function Kat(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let r=mN(t.currentRange.start,t.currentRange.end);return r!==null&&r>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class C9{constructor(){this.resetListeners=new Set}handleInput(e,r){const n=this.dateEnv;if(e!==n&&(typeof r=="function"?this.nowFn=r:n||(this.nowAnchorDate=e.toDate(r?e.createMarker(r):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,n))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class Yat{constructor(e){this.computeCurrentViewData=pn(this._computeCurrentViewData),this.organizeRawLocales=pn(Jst),this.buildLocale=pn(lne),this.buildPluginHooks=rat(),this.buildDateEnv=pn(Xat),this.buildTheme=pn(Jat),this.parseToolbars=pn(Bat),this.buildViewSpecs=pn(lat),this.buildDateProfileGenerator=f2(Zat),this.buildViewApi=pn(eit),this.buildViewUiProps=f2(nit),this.buildEventUiBySource=pn(tit,Lu),this.buildEventUiBases=pn(rit),this.parseContextBusinessHours=f2(sit),this.buildTitle=pn(qat),this.nowManager=new C9,this.emitter=new c5,this.actionRunner=new Gat(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=A=>{this.actionRunner.request(A)},this.props=e,this.actionRunner.pause(),this.nowManager=new C9;let r={},n=this.computeOptionsData(e.optionOverrides,r,e.calendarApi),a=n.calendarOptions.initialView||n.pluginHooks.initialView,i=this.computeCurrentViewData(a,n,e.optionOverrides,r);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(i.options);let o={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=hat(n.calendarOptions,n.dateEnv,this.nowManager),c=i.dateProfileGenerator.build(l);_h(c.activeRange,l)||(l=c.currentRange.start);for(let A of n.pluginHooks.contextInit)A(o);let u=pat(n.calendarOptions,c,o),d={dynamicOptionOverrides:r,currentViewType:a,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(o),eventSources:u,eventUiBases:{},eventStore:bc(),renderableEventStore:bc(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},f=Object.assign(Object.assign({},o),d);for(let A of n.pluginHooks.reducers)Object.assign(d,A(null,null,f));h4(d,o)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,r){let{props:n}=this;r===void 0?n.optionOverrides=e:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),e),this.optionsForRefining.push(...r)),(r===void 0||r.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:r,state:n,emitter:a}=this,i=Aat(n.dynamicOptionOverrides,e),o=this.computeOptionsData(r.optionOverrides,i,r.calendarApi),l=dat(n.currentViewType,e),c=this.computeCurrentViewData(l,o,r.optionOverrides,i);r.calendarApi.currentDataManager=this,a.setThisContext(r.calendarApi),a.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=n;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(f=c.dateProfileGenerator.build(d)),d=fat(d,e),f=mat(f,e,d,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!_h(f.currentRange,d))&&(d=f.currentRange.start);let A=gat(n.eventSources,e,f,u),h=int(n.eventStore,e,A,f,u),p=une(A)&&!c.options.progressiveEventRendering&&n.renderableEventStore||h,{eventUiSingleBase:g,selectionConfig:x}=this.buildViewUiProps(u),v=this.buildEventUiBySource(A),b=this.buildEventUiBases(p.defs,g,v),C={dynamicOptionOverrides:i,currentViewType:l,currentDate:d,dateProfile:f,eventSources:A,eventStore:h,renderableEventStore:p,selectionConfig:x,eventUiBases:b,businessHours:this.parseContextBusinessHours(u),dateSelection:Cat(n.dateSelection,e),eventSelection:Nat(n.eventSelection,e),eventDrag:Sat(n.eventDrag,e),eventResize:Eat(n.eventResize,e)},j=Object.assign(Object.assign({},u),C);for(let E of o.pluginHooks.reducers)Object.assign(C,E(n,e,j));let w=h4(n,u),N=h4(C,u);!w&&N?a.trigger("loading",!0):w&&!N&&a.trigger("loading",!1),this.state=C,r.onAction&&r.onAction(e)}updateData(){let{props:e,state:r}=this,n=this.data,a=this.computeOptionsData(e.optionOverrides,r.dynamicOptionOverrides,e.calendarApi),i=this.computeCurrentViewData(r.currentViewType,a,e.optionOverrides,r.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(r.dateProfile,i.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),i),r),l=a.pluginHooks.optionChangeHandlers,c=n&&n.calendarOptions,u=a.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(r.eventSources=o.eventSources=xat(o.eventSources,r.dateProfile,o),r.eventStore=o.eventStore=u9(o.eventStore,n.dateEnv,o.dateEnv),r.renderableEventStore=o.renderableEventStore=u9(o.renderableEventStore,n.dateEnv,o.dateEnv));for(let d in l)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&l[d](u[d],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,r,n){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&r===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:i,localeDefaults:o,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(e,r);N9(c);let u=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,i,l,a.defaultRangeSeparator),d=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),f=this.buildTheme(a,i),A=this.parseToolbars(a,this.stableOptionOverrides,f,d,n);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:i,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:A,localeDefaults:o,availableRawLocales:l.map}}processRawCalendarOptions(e,r){let{locales:n,locale:a}=a4([Ub,e,r]),i=this.organizeRawLocales(n),o=i.map,l=this.buildLocale(a||i.defaultCode,o).options,c=this.buildPluginHooks(e.plugins||[],Wat),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n9),s9),a9),c.listenerRefiners),c.optionRefiners),d={},f=a4([Ub,l,e,r]),A={},h=this.currentCalendarOptionsInput,m=this.currentCalendarOptionsRefined,p=!1;for(let g in f)this.optionsForRefining.indexOf(g)===-1&&(f[g]===h[g]||zA[g]&&g in h&&zA[g](h[g],f[g]))?A[g]=m[g]:u[g]?(A[g]=u[g](f[g]),p=!0):d[g]=h[g];return p&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=A,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=r),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:i,localeDefaults:l,extra:d}}_computeCurrentViewData(e,r,n,a){let i=r.viewSpecs[e];if(!i)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:l}=this.processRawViewOptions(i,r.pluginHooks,r.localeDefaults,n,a);N9(l),this.nowManager.handleInput(r.dateEnv,o.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:r.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,r.dateEnv);return{viewSpec:i,options:o,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(e,r,n,a,i){let o=a4([Ub,e.optionDefaults,n,a,e.optionOverrides,i]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n9),s9),a9),Crt),r.listenerRefiners),r.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,A={};for(let h in o)o[h]===u[h]||zA[h]&&zA[h](o[h],u[h])?c[h]=d[h]:(o[h]===this.currentCalendarOptionsInput[h]||zA[h]&&zA[h](o[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(c[h]=this.currentCalendarOptionsRefined[h]):l[h]?c[h]=l[h](o[h]):A[h]=o[h],f=!0);return f&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:A}}}function Xat(t,e,r,n,a,i,o,l){let c=lne(e||o.defaultCode,o.map);return new krt({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:c,weekNumberCalculation:r,firstDay:n,weekText:a,cmdFormatter:i.cmdFormatter,defaultSeparator:l})}function Jat(t,e){let r=e.themeClasses[t.themeSystem]||Zh;return new r(t)}function Zat(t){let e=t.dateProfileGeneratorClass||Dre;return new e(t)}function eit(t,e,r){return new Dat(t,e,r)}function tit(t){return mp(t,e=>e.ui)}function rit(t,e,r){let n={"":e};for(let a in t){let i=t[a];i.sourceId&&r[i.sourceId]&&(n[a]=r[i.sourceId])}return n}function nit(t){let{options:e}=t;return{eventUiSingleBase:yN({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:yN({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function h4(t,e){for(let r of e.pluginHooks.isLoadingFuncs)if(r(t))return!0;return!1}function sit(t){return mnt(t.options.businessHours,t)}function N9(t,e){for(let r in t)console.warn(`Unknown option '${r}'`)}class ait extends ks{render(){let e=this.props.widgetGroups.map(r=>this.renderWidgetGroup(r));return rt("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:r}=this,{theme:n}=this.context,a=[],i=!0;for(let o of e){let{buttonName:l,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:f}=o;if(l==="title")i=!1,a.push(rt("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{let A=l===r.activeButton,h=!r.isTodayEnabled&&l==="today"||!r.isPrevEnabled&&l==="prev"||!r.isNextEnabled&&l==="next",m=[`fc-${l}-button`,n.getClass("button")];A&&m.push(n.getClass("buttonActive")),a.push(rt("button",{type:"button",title:typeof f=="function"?f(r.navUnit):f,disabled:h,"aria-pressed":A,className:m.join(" "),onClick:c},u||(d?rt("span",{className:d,role:"img"}):"")))}}if(a.length>1){let o=i&&n.getClass("buttonGroup")||"";return rt("div",{className:o},...a)}return a[0]}}class S9 extends ks{render(){let{model:e,extraClassName:r}=this.props,n=!1,a,i,o=e.sectionWidgets,l=o.center;return o.left?(n=!0,a=o.left):a=o.start,o.right?(n=!0,i=o.right):i=o.end,rt("div",{className:[r||"","fc-toolbar",n?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",l||[]),this.renderSection("end",i||[]))}renderSection(e,r){let{props:n}=this;return rt(ait,{key:e,widgetGroups:r,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class iit extends ks{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,ef(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:r}=this,{aspectRatio:n}=e,a=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",o="";return n?r.availableWidth!==null?i=r.availableWidth/n:o=`${1/n*100}%`:i=e.height||"",rt("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:i,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class oit extends Kx{constructor(e){super(e),this.handleSegClick=(r,n)=>{let{component:a}=this,{context:i}=a,o=ax(n);if(o&&a.isValidSegDownEl(r.target)){let l=xi(r.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:n,event:new vs(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:i.viewApi}),c&&!r.defaultPrevented&&(window.location.href=c)}},this.destroy=xre(e.el,"click",".fc-event",this.handleSegClick)}}class lit extends Kx{constructor(e){super(e),this.handleEventElRemove=r=>{r===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(r,n)=>{ax(n)&&(this.currentSegEl=n,this.triggerEvent("eventMouseEnter",r,n))},this.handleSegLeave=(r,n)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",r,n))},this.removeHoverListeners=Itt(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,r,n){let{component:a}=this,{context:i}=a,o=ax(n);(!r||a.isValidSegDownEl(r.target))&&i.emitter.trigger(e,{el:n,event:new vs(i,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:i.viewApi})}}class cit extends gp{constructor(){super(...arguments),this.buildViewContext=pn(Rrt),this.buildViewPropTransformers=pn(dit),this.buildToolbarProps=pn(uit),this.headerRef=Zd(),this.footerRef=Zd(),this.interactionsStore={},this.state={viewLabelId:a5()},this.registerInteractiveComponent=(e,r)=>{let n=Mnt(e,r),o=[oit,lit].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(n));this.interactionsStore[e.uid]=o,R_[e.uid]=n},this.unregisterInteractiveComponent=e=>{let r=this.interactionsStore[e.uid];if(r){for(let n of r)n.destroy();delete this.interactionsStore[e.uid]}delete R_[e.uid]},this.resizeRunner=new iF(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:r}=this.props;r.handleWindowResize&&e.target===window&&this.resizeRunner.request(r.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:r,options:n}=e,a=!1,i="",o;e.isHeightAuto||e.forPrint?i="":n.height!=null?a=!0:n.contentHeight!=null?i=n.contentHeight:o=Math.max(n.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=r.header&&r.header.hasTitle?this.state.viewLabelId:void 0;return rt(pp.Provider,{value:l},rt(u5,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return rt(Us,null,r.header&&rt(S9,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:c},d)),rt(iit,{liquid:a,height:i,aspectRatio:o,labeledById:c},this.renderView(e),this.buildAppendContent()),r.footer&&rt(S9,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(n=>new n(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:r}=e.pluginHooks;for(let n in r)r[n](e[n],e)}componentDidUpdate(e){let{props:r}=this,{propSetHandlers:n}=r.pluginHooks;for(let a in n)r[a]!==e[a]&&n[a](r[a],r)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,r=e.pluginHooks.viewContainerAppends.map(n=>n(e));return rt(Us,{},...r)}renderView(e){let{pluginHooks:r}=e,{viewSpec:n}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},i=this.buildViewPropTransformers(r.viewPropsTransformers);for(let l of i)Object.assign(a,l.transform(a,e));let o=n.component;return rt(o,Object.assign({},a))}}function uit(t,e,r,n,a,i){let o=r.build(a,void 0,!1),l=r.buildPrev(e,n,!1),c=r.buildNext(e,n,!1);return{title:i,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!_h(e.currentRange,a),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function dit(t){return t.map(e=>new e)}let fit=class extends Unt{constructor(e,r={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=n=>{switch(n.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=n=>{this.currentData=n,this.renderRunner.request(n.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:n}=this;vN(()=>{nw(rt(Rnt,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},(a,i,o,l)=>(this.setClassNames(a),this.setHeight(i),rt(Sre.Provider,{value:this.customContentRenderId},rt(cit,Object.assign({isHeightAuto:o,forPrint:l},n))))),this.el)})}else this.isRendered&&(this.isRendered=!1,nw(null,this.el),this.setClassNames([]),this.setHeight(""))},wtt(e),this.el=e,this.renderRunner=new iF(this.handleRenderRequest),new Yat({optionOverrides:r,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){vN(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,r){this.currentDataManager.resetOptions(e,r)}setClassNames(e){if(!Uh(e,this.currentClassNames)){let{classList:r}=this.el;for(let n of this.currentClassNames)r.remove(n);for(let n of e)r.add(n);this.currentClassNames=e}}setHeight(e){pre(this.el,"height",e)}};const hit=parseInt(String(le.version).split(".")[0]),Ait=hit<18;class mne extends y.Component{constructor(){super(...arguments),this.elRef=y.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const r of this.state.customRenderingMap.values())e.push(le.createElement(mit,{key:r.id,customRendering:r}));return le.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new Yst;this.handleCustomRendering=e.handle.bind(e),this.calendar=new fit(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{hc.flushSync(()=>{})});let r;e.subscribe(n=>{const a=Date.now(),i=!r;(Ait||i||this.isUpdating||this.isUnmounting||a-r<100?pne:hc.flushSync)(()=>{this.setState({customRenderingMap:n},()=>{r=a,i?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}mne.act=pne;class mit extends y.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:r}=e,n=typeof r=="function"?r(e.renderProps):r;return hc.createPortal(n,e.containerEl)}}function pne(t){t()}class pit extends xp{constructor(){super(...arguments),this.headerElRef=Zd()}renderSimpleLayout(e,r){let{props:n,context:a}=this,i=[],o=g9(a.options);return e&&i.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),rt(i9,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},rt(nne,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}renderHScrollLayout(e,r,n,a){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:o,context:l}=this,c=!o.forPrint&&g9(l.options),u=!o.forPrint&&Dst(l.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Tst}]}),rt(i9,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},rt(i,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:n,minWidth:a}]}],sections:d}))}}function Mj(t,e){let r=[];for(let n=0;n<e;n+=1)r[n]=[];for(let n of t)r[n.row].push(n);return r}function Lj(t,e){let r=[];for(let n=0;n<e;n+=1)r[n]=[];for(let n of t)r[n.firstCol].push(n);return r}function E9(t,e){let r=[];if(t){for(let n=0;n<e;n+=1)r[n]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let n of t.segs)r[n.row].segs.push(n)}else for(let n=0;n<e;n+=1)r[n]=null;return r}const gne=Da({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function xne(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class vne extends ks{render(){let{props:e}=this;return rt(_st,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:gne,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class bne extends ks{render(){let{props:e,context:r}=this,{options:n}=r,{seg:a}=e,i=n.eventTimeFormat||gne,o=$re(a,i,r,!0,e.defaultDisplayEventEnd);return rt(BF,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Hre(e.seg,r),defaultGenerator:git,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function git(t){return rt(Us,null,rt("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&rt("div",{className:"fc-event-time"},t.timeText),rt("div",{className:"fc-event-title"},t.event.title||rt(Us,null," ")))}class xit extends ks{constructor(){super(...arguments),this.compileSegs=pn(vit)}render(){let{props:e}=this,{allSegs:r,invisibleSegs:n}=this.compileSegs(e.singlePlacements);return rt(Qst,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:r,hiddenSegs:n,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return rt(Us,null,r.map(i=>{let o=i.eventRange.instance.instanceId;return rt("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},xne(i)?rt(bne,Object.assign({seg:i,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},$b(i,e.todayRange))):rt(vne,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},$b(i,e.todayRange))))}))}})}}function vit(t){let e=[],r=[];for(let n of t)e.push(n.seg),n.isVisible||r.push(n.seg);return{allSegs:e,invisibleSegs:r}}const bit=Da({week:"narrow"});let yit=class extends xp{constructor(){super(...arguments),this.rootElRef=Zd(),this.state={dayNumberId:a5()},this.handleRootEl=e=>{ef(this.rootElRef,e),ef(this.props.elRef,e)}}render(){let{context:e,props:r,state:n,rootElRef:a}=this,{options:i,dateEnv:o}=e,{date:l,dateProfile:c}=r;const u=r.showDayNumber&&jit(l,c.currentRange,o);return rt(sne,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...r.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},r.extraDataAttrs),r.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:wit,date:l,dateProfile:c,todayRange:r.todayRange,showDayNumber:r.showDayNumber,isMonthStart:u,extraRenderProps:r.extraRenderProps},(d,f)=>rt("div",{ref:r.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:r.minHeight}},r.showWeekNumber&&rt(Lst,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:M_(e,l,"week"),date:l,defaultFormat:bit}),!f.isDisabled&&(r.showDayNumber||ane(i)||r.forceDayTop)?rt("div",{className:"fc-daygrid-day-top"},rt(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},M_(e,l)),{id:n.dayNumberId})})):r.showDayNumber?rt("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},rt("a",{className:"fc-daygrid-day-number"}," ")):void 0,rt("div",{className:"fc-daygrid-day-events",ref:r.fgContentElRef},r.fgContent,rt("div",{className:"fc-daygrid-day-bottom",style:{marginTop:r.moreMarginTop}},rt(xit,{allDayDate:l,singlePlacements:r.singlePlacements,moreCnt:r.moreCnt,alignmentElRef:a,alignGridTop:!r.showDayNumber,extraDateSpan:r.extraDateSpan,dateProfile:r.dateProfile,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,todayRange:r.todayRange}))),rt("div",{className:"fc-daygrid-day-bg"},r.bgContent)))}};function wit(t){return t.dayNumberText||rt(Us,null," ")}function jit(t,e,r){const{start:n,end:a}=e,i=$h(a,-1),o=r.getYear(n),l=r.getMonth(n),c=r.getYear(i),u=r.getMonth(i);return!(o===c&&l===u)&&(t.valueOf()===n.valueOf()||r.getDay(t)===1&&t.valueOf()<a.valueOf())}function yne(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function wne(t){return yne(t)+":"+t.lastCol}function Cit(t,e,r,n,a,i,o){let l=new Eit(x=>{let v=t[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return a[v]||1});l.allowReslicing=!0,l.strictOrder=n,e===!0||r===!0?(l.maxCoord=i,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof r=="number"&&(l.maxStackCnt=r,l.hiddenConsumes=!0);let c=[],u=[];for(let x=0;x<t.length;x+=1){let v=t[x],b=wne(v);a[b]!=null?c.push({index:x,span:{start:v.firstCol,end:v.lastCol+1}}):u.push(v)}let d=l.addSegs(c),f=l.toRects(),{singleColPlacements:A,multiColPlacements:h,leftoverMargins:m}=Nit(f,t,o),p=[],g=[];for(let x of u){h[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let v=x.firstCol;v<=x.lastCol;v+=1)A[v].push({seg:d0(x,v,v+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<o.length;x+=1)p.push(0);for(let x of d){let v=t[x.index],b=x.span;h[b.start].push({seg:d0(v,b.start,b.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let C=b.start;C<b.end;C+=1)p[C]+=1,A[C].push({seg:d0(v,C,C+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<o.length;x+=1)g.push(m[x]);return{singleColPlacements:A,multiColPlacements:h,moreCnts:p,moreMarginTops:g}}function Nit(t,e,r){let n=Sit(t,r.length),a=[],i=[],o=[];for(let l=0;l<r.length;l+=1){let c=n[l],u=[],d=0,f=0;for(let h of c){let m=e[h.index];u.push({seg:d0(m,l,l+1,r),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-d}),d=h.levelCoord+h.thickness}let A=[];d=0,f=0;for(let h of c){let m=e[h.index],p=h.span.end-h.span.start>1,g=h.span.start===l;f+=h.levelCoord-d,d=h.levelCoord+h.thickness,p?(f+=h.thickness,g&&A.push({seg:d0(m,h.span.start,h.span.end,r),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):g&&(A.push({seg:d0(m,h.span.start,h.span.end,r),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:f}),f=0)}a.push(u),i.push(A),o.push(f)}return{singleColPlacements:a,multiColPlacements:i,leftoverMargins:o}}function Sit(t,e){let r=[];for(let n=0;n<e;n+=1)r.push([]);for(let n of t)for(let a=n.span.start;a<n.span.end;a+=1)r[a].push(n);return r}function d0(t,e,r,n){if(t.firstCol===e&&t.lastCol===r-1)return t;let a=t.eventRange,i=a.range,o=sx(i,{start:n[e].date,end:ji(n[r-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:r-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===i.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===i.end.valueOf()})}class Eit extends rst{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const r=super.addSegs(e),{entriesByLevel:n}=this,a=i=>!this.forceHidden[Hb(i)];for(let i=0;i<n.length;i+=1)n[i]=n[i].filter(a);return r}handleInvalidInsertion(e,r,n){const{entriesByLevel:a,forceHidden:i}=this,{touchingEntry:o,touchingLevel:l,touchingLateral:c}=e;if(this.hiddenConsumes&&o){const u=Hb(o);if(!i[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},o),{span:Yre(o.span,r.span)}),f=Hb(d);i[f]=!0,a[l][c]=d,n.push(d),this.splitEntry(o,r,n)}else i[u]=!0,n.push(o)}super.handleInvalidInsertion(e,r,n)}}let jne=class extends xp{constructor(){super(...arguments),this.cellElRefs=new lm,this.frameElRefs=new lm,this.fgElRefs=new lm,this.segHarnessRefs=new lm,this.rootElRef=Zd(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:r,context:n}=this,{options:a}=n,i=e.cells.length,o=Lj(e.businessHourSegs,i),l=Lj(e.bgEventSegs,i),c=Lj(this.getHighlightSegs(),i),u=Lj(this.getMirrorSegs(),i),{singleColPlacements:d,multiColPlacements:f,moreCnts:A,moreMarginTops:h}=Cit(bnt(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,r.segHeights,r.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return rt("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((p,g)=>{let x=this.renderFgSegs(g,e.forPrint?d[g]:f[g],e.todayRange,m),v=this.renderFgSegs(g,Bit(u[g],f),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return rt(yit,{key:p.key,elRef:this.cellElRefs.createRef(p.key),innerElRef:this.frameElRefs.createRef(p.key),dateProfile:e.dateProfile,date:p.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&g===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,moreCnt:A[g],moreMarginTop:h[g],singlePlacements:d[g],fgContentElRef:this.fgElRefs.createRef(p.key),fgContent:rt(Us,null,rt(Us,null,x),rt(Us,null,v)),bgContent:rt(Us,null,this.renderFillSegs(c[g],"highlight"),this.renderFillSegs(o[g],"non-business"),this.renderFillSegs(l[g],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,r){let n=this.props;this.updateSizing(!Lu(e,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,r,n,a,i,o,l){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,A=i||o||l,h=[];if(d)for(let m of r){let{seg:p}=m,{instanceId:g}=p.eventRange.instance,x=m.isVisible&&!a[g],v=m.isAbsolute,b="",C="";v&&(c.isRtl?(C=0,b=d.lefts[p.lastCol]-d.lefts[p.firstCol]):(b=0,C=d.rights[p.firstCol]-d.rights[p.lastCol])),h.push(rt("div",{className:"fc-daygrid-event-harness"+(v?" fc-daygrid-event-harness-abs":""),key:yne(p),ref:A?null:this.segHarnessRefs.createRef(wne(p)),style:{visibility:x?"":"hidden",marginTop:v?"":m.marginTop,top:v?m.absoluteTop:"",left:b,right:C}},xne(p)?rt(bne,Object.assign({seg:p,isDragging:i,isSelected:g===u,defaultDisplayEventEnd:f},$b(p,n))):rt(vne,Object.assign({seg:p,isDragging:i,isResizing:o,isDateSelecting:l,isSelected:g===u,defaultDisplayEventEnd:f},$b(p,n)))))}return h}renderFillSegs(e,r){let{isRtl:n}=this.context,{todayRange:a}=this.props,{framePositions:i}=this.state,o=[];if(i)for(let l of e){let c=n?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};o.push(rt("div",{key:Snt(l.eventRange),className:"fc-daygrid-bg-harness",style:c},r==="bg-event"?rt(Fst,Object.assign({seg:l},$b(l,a))):Mst(r)))}return rt(Us,{},...o)}updateSizing(e){let{props:r,state:n,frameElRefs:a}=this;if(!r.forPrint&&r.clientWidth!==null){if(e){let c=r.cells.map(u=>a.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new jN(u,c,!0,!1);(!n.framePositions||!n.framePositions.similarTo(d))&&this.setState({framePositions:new jN(u,c,!0,!1)})}}const i=this.state.segHeights,o=this.querySegHeights(),l=r.dayMaxEvents===!0||r.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),o),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,r={};for(let n in e){let a=Math.round(e[n].getBoundingClientRect().height);r[n]=Math.max(r[n]||0,a)}return r}computeMaxContentHeight(){let e=this.props.cells[0].key,r=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return r.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(r=>e[r.key])}};jne.addStateEquality({segHeights:Lu});function Bit(t,e){if(!t.length)return[];let r=Tit(e);return t.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:r[n.eventRange.instance.instanceId],marginTop:0}))}function Tit(t){let e={};for(let r of t)for(let n of r)e[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return e}class Dit extends xp{constructor(){super(...arguments),this.splitBusinessHourSegs=pn(Mj),this.splitBgEventSegs=pn(Mj),this.splitFgEventSegs=pn(Mj),this.splitDateSelectionSegs=pn(Mj),this.splitEventDrag=pn(E9),this.splitEventResize=pn(E9),this.rowRefs=new lm}render(){let{props:e,context:r}=this,n=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,n),i=this.splitBgEventSegs(e.bgEventSegs,n),o=this.splitFgEventSegs(e.fgEventSegs,n),l=this.splitDateSelectionSegs(e.dateSelectionSegs,n),c=this.splitEventDrag(e.eventDrag,n),u=this.splitEventResize(e.eventResize,n),d=n>=7&&e.clientWidth?e.clientWidth/r.options.aspectRatio/6:null;return rt(u5,{unit:"day"},(f,A)=>rt(Us,null,e.cells.map((h,m)=>rt(jne,{ref:this.rowRefs.createRef(m),key:h.length?h[0].date.toISOString():m,showDayNumbers:n>1,showWeekNumbers:e.showWeekNumbers,todayRange:A,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:a[m],eventSelection:e.eventSelection,bgEventSegs:i[m].filter(Iit),fgEventSegs:o[m],dateSelectionSegs:l[m],eventDrag:c[m],eventResize:u[m],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],r=e?e.closest(".fc-daygrid-body"):null;r&&(this.rootEl=r,this.context.registerInteractiveComponent(this,{el:r,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new jN(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new jN(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,r){let{colPositions:n,rowPositions:a}=this,i=n.leftToIndex(e),o=a.topToIndex(r);if(o!=null&&i!=null){let l=this.props.cells[o][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,i),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(o,i),rect:{left:n.lefts[i],right:n.rights[i],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,r){return this.rowRefs.currentMap[e].getCellEls()[r]}getCellRange(e,r){let n=this.props.cells[e][r].date,a=ji(n,1);return{start:n,end:a}}}function Iit(t){return t.eventRange.def.allDay}let _it=class extends xp{constructor(){super(...arguments),this.elRef=Zd(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:r,dayMaxEvents:n,expandRows:a}=e,i=n===!0||r===!0;i&&!a&&(i=!1,r=null,n=null);let o=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return rt("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},rt("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,rt("tbody",{role:"presentation"},rt(Dit,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:n,dayMaxEventRows:r,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=Pit(this.elRef.current,this.props.dateProfile);if(e){const r=e.closest(".fc-daygrid-body"),n=r.closest(".fc-scroller"),a=e.getBoundingClientRect().top-r.getBoundingClientRect().top;n.scrollTop=a?a+1:0}this.needsScrollReset=!1}}};function Pit(t,e){let r;return e.currentRangeUnit.match(/year|month/)&&(r=t.querySelector(`[data-date="${lrt(e.currentDate)}-01"]`)),r||(r=t.querySelector(`[data-date="${uF(e.currentDate)}"]`)),r}class kit extends fst{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,r){return r.sliceRange(e)}}class Oit extends xp{constructor(){super(...arguments),this.slicer=new kit,this.tableRef=Zd()}render(){let{props:e,context:r}=this;return rt(_it,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,r,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class Fit extends pit{constructor(){super(...arguments),this.buildDayTableModel=pn(Rit),this.headerRef=Zd(),this.tableRef=Zd()}render(){let{options:e,dateProfileGenerator:r}=this.context,{props:n}=this,a=this.buildDayTableModel(n.dateProfile,r),i=e.dayHeaders&&rt(lst,{ref:this.headerRef,dateProfile:n.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=l=>rt(Oit,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:a,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return e.dayMinWidth?this.renderHScrollLayout(i,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(i,o)}}function Rit(t,e){let r=new ust(t.renderRange,e);return new dst(r,/year|month|week/.test(t.currentRangeUnit))}class Mit extends Dre{buildRenderRange(e,r,n){let a=super.buildRenderRange(e,r,n),{props:i}=this;return Lit({currentRange:a,snapToWeek:/^(year|month)$/.test(r),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function Lit(t){let{dateEnv:e,currentRange:r}=t,{start:n,end:a}=r,i;if(t.snapToWeek&&(n=e.startOfWeek(n),i=e.startOfWeek(a),i.valueOf()!==a.valueOf()&&(a=JQ(i,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(ji(r.end,-1))),l=Math.ceil(Ytt(o,a));a=JQ(a,6-l)}return{start:n,end:a}}var Uit=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';hre(Uit);var $it=Jh({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:Fit,dateProfileGeneratorClass:Mit},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});EF.touchMouseIgnoreWait=500;let U_=0,CN=0,$_=!1;class Cne{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=r=>{if(!this.shouldIgnoreMouse()&&Hit(r)&&this.tryStart(r)){let n=this.createEventFromMouse(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=r=>{let n=this.createEventFromMouse(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleMouseUp=r=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(r)),this.cleanup()},this.handleTouchStart=r=>{if(this.tryStart(r)){this.isTouchDragging=!0;let n=this.createEventFromTouch(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n);let a=r.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=r=>{let n=this.createEventFromTouch(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleTouchEnd=r=>{if(this.isDragging){let n=r.target;n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd),n.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(r)),this.cleanup(),this.isTouchDragging=!1,Qit()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=r=>{if(!this.shouldIgnoreMove){let n=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:r,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:n,pageY:a,deltaX:n-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new c5,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),zit()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),Vit()}tryStart(e){let r=this.querySubjectEl(e),n=e.target;return r&&(!this.handleSelector||xi(n,this.handleSelector))?(this.subjectEl=r,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){$_=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?xi(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return U_||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&($_=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,r){let n=0,a=0;return r?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:a}}createEventFromTouch(e,r){let n=e.touches,a,i,o=0,l=0;return n&&n.length?(a=n[0].pageX,i=n[0].pageY):(a=e.pageX,i=e.pageY),r?(this.origPageX=a,this.origPageY=i):(o=a-this.origPageX,l=i-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:i,deltaX:o,deltaY:l}}}function Hit(t){return t.button===0&&!t.ctrlKey}function Qit(){U_+=1,setTimeout(()=>{U_-=1},EF.touchMouseIgnoreWait)}function zit(){CN+=1,CN===1&&window.addEventListener("touchmove",Nne,{passive:!1})}function Vit(){CN-=1,CN||window.removeEventListener("touchmove",Nne,{passive:!1})}function Nne(t){$_&&t.preventDefault()}class Wit{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,r,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=r-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,r){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=r-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,r){let n=()=>{this.cleanup(),r()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(e,r){let n=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();n.style.transition="top "+r+"ms,left "+r+"ms",Mb(n,{left:a.left,top:a.top}),_tt(n,()=>{n.style.transition="",e()})}cleanup(){this.mirrorEl&&(oF(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Mb(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,r=this.mirrorEl;return r||(r=this.mirrorEl=this.sourceEl.cloneNode(!0),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.pointerEvents="none",r.classList.add("fc-event-dragging"),Mb(r,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(r)),r}}class Sne extends SF{constructor(e,r){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=r,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Ene extends Sne{constructor(e,r){super(new est(e),r)}getEventTarget(){return this.scrollController.el}computeClientRect(){return Jnt(this.scrollController.el)}}class Git extends Sne{constructor(e){super(new tst,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const B9=typeof performance=="function"?performance.now:Date.now;class qit{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let r=B9();this.handleSide(e,(r-this.msSinceRequest)/1e3),this.requestAnimation(r)}else this.isAnimating=!1}}}start(e,r,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,r))}handleMove(e,r){if(this.isEnabled){let n=e-window.scrollX,a=r-window.scrollY,i=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(B9()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,r){let{scrollCache:n}=e,{edgeThreshold:a}=this,i=a-e.distance,o=i*i/(a*a)*this.maxVelocity*r,l=1;switch(e.name){case"left":l=-1;case"right":n.setScrollLeft(n.getScrollLeft()+o*l);break;case"top":l=-1;case"bottom":n.setScrollTop(n.getScrollTop()+o*l);break}}computeBestEdge(e,r){let{edgeThreshold:n}=this,a=null,i=this.scrollCaches||[];for(let o of i){let l=o.clientRect,c=e-l.left,u=l.right-e,d=r-l.top,f=l.bottom-r;c>=0&&u>=0&&d>=0&&f>=0&&(d<=n&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"top",distance:d}),f<=n&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>f)&&(a={scrollCache:o,name:"bottom",distance:f}),c<=n&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>c)&&(a={scrollCache:o,name:"left",distance:c}),u<=n&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"right",distance:u}))}return a}buildCaches(e){return this.queryScrollEls(e).map(r=>r===window?new Git(!1):new Ene(r,!1))}queryScrollEls(e){let r=[];for(let n of this.scrollQuery)typeof n=="object"?r.push(n):r.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(n)));return r}}class Ww extends nst{constructor(e,r){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,Ptt(document.body),Ott(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let i=this.minDistance,o,{deltaX:l,deltaY:c}=a;o=l*l+c*c,o>=i*i&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,ktt(document.body),Ftt(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new Cne(e);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),r&&(n.selector=r),this.mirror=new Wit,this.autoScroller=new qit}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class Kit{constructor(e){this.el=e,this.origRect=NF(e),this.scrollCaches=Kre(e).map(r=>new Ene(r,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let r of this.scrollCaches)e+=r.origScrollLeft-r.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let r of this.scrollCaches)e+=r.origScrollTop-r.getScrollTop();return e}isWithinClipping(e,r){let n={left:e,top:r};for(let a of this.scrollCaches)if(!Yit(a.getEventTarget())&&!$nt(n,a.clientRect))return!1;return!0}}function Yit(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class d5{constructor(e,r){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=n=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(n),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",n)):a.setIgnoreMove(!0)},this.handleDragStart=n=>{this.emitter.trigger("dragstart",n),this.handleMove(n,!0)},this.handleDragMove=n=>{this.emitter.trigger("dragmove",n),this.handleMove(n)},this.handlePointerUp=n=>{this.releaseHits(),this.emitter.trigger("pointerup",n)},this.handleDragEnd=n=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,n),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",n)},this.droppableStore=r,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new c5}processFirstCoord(e){let r={left:e.pageX,top:e.pageY},n=r,a=e.subjectEl,i;a instanceof HTMLElement&&(i=NF(a),n=Hnt(n,i));let o=this.initialHit=this.queryHitForOffset(n.left,n.top);if(o){if(this.useSubjectCenter&&i){let l=Wre(i,o.rect);l&&(n=Qnt(l))}this.coordAdjust=znt(n,r)}else this.coordAdjust={left:0,top:0}}handleMove(e,r){let n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(r||!f5(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))}prepareHits(){this.offsetTrackers=mp(this.droppableStore,e=>(e.component.prepareHits(),new Kit(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let r in e)e[r].destroy();this.offsetTrackers={}}queryHitForOffset(e,r){let{droppableStore:n,offsetTrackers:a}=this,i=null;for(let o in n){let l=n[o].component,c=a[o];if(c&&c.isWithinClipping(e,r)){let u=c.computeLeft(),d=c.computeTop(),f=e-u,A=r-d,{origRect:h}=c,m=h.right-h.left,p=h.bottom-h.top;if(f>=0&&f<m&&A>=0&&A<p){let g=l.queryHit(f,A,m,p);g&&o5(g.dateProfile.activeRange,g.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(f+u-window.scrollX,A+d-window.scrollY)))&&(!i||g.layer>i.layer)&&(g.componentId=o,g.context=l.context,g.rect.left+=u,g.rect.right+=u,g.rect.top+=d,g.rect.bottom+=d,i=g)}}}return i}}function f5(t,e){return!t&&!e?!0:!!t!=!!e?!1:Dnt(t.dateSpan,e.dateSpan)}function Bne(t,e){let r={};for(let n of e.pluginHooks.datePointTransforms)Object.assign(r,n(t,e));return Object.assign(r,Xit(t,e.dateEnv)),r}function Xit(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class Jit extends Kx{constructor(e){super(e),this.handlePointerDown=n=>{let{dragging:a}=this,i=n.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=n=>{let{component:a}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:o,finalHit:l}=this.hitDragging;if(o&&l&&f5(o,l)){let{context:c}=a,u=Object.assign(Object.assign({},Bne(o.dateSpan,c)),{dayEl:o.dayEl,jsEvent:n.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new Ww(e.el),this.dragging.autoScroller.isEnabled=!1;let r=this.hitDragging=new d5(this.dragging,jF(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class Zit extends Kx{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:l,dragging:c}=this,{options:u}=l.context,d=u.selectable&&l.isValidDateDownEl(o.origEvent.target);c.setIgnoreMove(!d),c.delay=o.isTouch?eot(l):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,l)=>{let{context:c}=this.component,u=null,d=!1;if(o){let f=this.hitDragging.initialHit;o.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,o)||(u=tot(f,o,c.pluginHooks.dateSelectionTransformers)),(!u||!hst(u,o.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):l||c.dispatch({type:"UNSELECT_DATES"}),d?lF():cF(),l||(this.dragSelection=u)},this.handlePointerUp=o=>{this.dragSelection&&(Mre(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:r}=e,{options:n}=r.context,a=this.dragging=new Ww(e.el);a.touchScrollAllowed=!1,a.minDistance=n.selectMinDistance||0,a.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new d5(this.dragging,jF(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function eot(t){let{options:e}=t.context,r=e.selectLongPressDelay;return r==null&&(r=e.longPressDelay),r}function tot(t,e,r){let n=t.dateSpan,a=e.dateSpan,i=[n.range.start,n.range.end,a.range.start,a.range.end];i.sort($tt);let o={};for(let l of r){let c=l(t,e);if(c===!1)return null;c&&Object.assign(o,c)}return o.range={start:i[0],end:i[3]},o.allDay=n.allDay,o}class Gw extends Kx{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let l=o.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:f}=c.context,A=c.context;this.subjectEl=o.subjectEl;let h=this.subjectSeg=ax(o.subjectEl),p=(this.eventRange=h.eventRange).instance.instanceId;this.relevantEvents=vF(A.getCurrentData().eventStore,p),u.minDistance=o.isTouch?0:f.eventDragMinDistance,u.delay=o.isTouch&&p!==c.props.eventSelection?not(c):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=xi(l,".fc"),d.revertDuration=f.dragRevertDuration;let g=c.isValidSegDownEl(l)&&!xi(l,".fc-event-resizer");u.setIgnoreMove(!g),this.isDragging=g&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let l=this.component.context,c=this.eventRange,u=c.instance.instanceId;o.isTouch?u!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new vs(l,c.def,c.instance),jsEvent:o.origEvent,view:l.viewApi}))},this.handleHitUpdate=(o,l)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,A=null,h=null,m=!1,p={affectedEvents:c,mutatedEvents:bc(),isEvent:!0};if(o){f=o.context;let g=f.options;d===f||g.editable&&g.droppable?(A=rot(u,o,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),A&&(h=wF(c,f.getCurrentData().eventUiBases,A,f),p.mutatedEvents=h,Zre(p,o.dateProfile,f)||(m=!0,A=null,h=null,p.mutatedEvents=bc()))):f=null}this.displayDrag(f,p),m?lF():cF(),l||(d===f&&f5(u,o)&&(A=null),this.dragging.setMirrorNeedsRevert(!A),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=A,this.mutatedRelevantEvents=h)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let l=this.component.context,c=l.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,A=this.eventRange.instance,h=new vs(l,f,A),m=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:g}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:h,jsEvent:o.origEvent,view:c}),d){if(u===l){let x=new vs(l,p.defs[f.defId],A?p.instances[A.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:p});let v={oldEvent:h,event:x,relatedEvents:jm(p,l,A),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}},b={};for(let C of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(b,C(d,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},v),b),{el:o.subjectEl,delta:d.datesDelta,jsEvent:o.origEvent,view:c})),l.emitter.trigger("eventChange",v)}else if(u){let x={event:h,relatedEvents:jm(m,l,A),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:o.subjectEl,view:c})),l.dispatch({type:"REMOVE_EVENTS",eventStore:m}),l.emitter.trigger("eventRemove",x);let v=p.defs[f.defId],b=p.instances[A.instanceId],C=new vs(u,v,b);u.dispatch({type:"MERGE_EVENTS",eventStore:p});let j={event:C,relatedEvents:jm(p,u,b),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};u.emitter.trigger("eventAdd",j),o.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:A.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},Bne(g.dateSpan,u)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:g.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},j),{draggedEl:o.subjectEl,view:g.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:n}=r.context,a=this.dragging=new Ww(e.el);a.pointer.selector=Gw.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new d5(this.dragging,R_);i.useSubjectCenter=e.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,r){let n=this.component.context,a=this.receivingContext;a&&a!==e&&(a===n?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:bc(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let e=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e!==r&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Gw.SELECTOR=".fc-event-draggable, .fc-event-resizable";function rot(t,e,r,n){let a=t.dateSpan,i=e.dateSpan,o=a.range.start,l=i.range.start,c={};a.allDay!==i.allDay&&(c.allDay=i.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,i.allDay?o=xs(r):o=r);let u=Gg(o,l,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let f of n)f(d,t,e);return d}function not(t){let{options:e}=t.context,r=e.eventLongPressDelay;return r==null&&(r=e.longPressDelay),r}class sot extends Kx{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:o}=this,l=this.querySegEl(i),c=ax(l),u=this.eventRange=c.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=i=>{let{context:o}=this.component,l=this.eventRange;this.relevantEvents=vF(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(i);this.draggingSegEl=c,this.draggingSeg=ax(c),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:c,event:new vs(o,l.def,l.instance),jsEvent:i.origEvent,view:o.viewApi})},this.handleHitUpdate=(i,o,l)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,A=null,h=null,m=!1,p={affectedEvents:u,mutatedEvents:bc(),isEvent:!0};i&&(i.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,i)||(A=aot(d,i,l.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),A&&(h=wF(u,c.getCurrentData().eventUiBases,A,c),p.mutatedEvents=h,Zre(p,i.dateProfile,c)||(m=!0,A=null,h=null,p.mutatedEvents=null)),h?c.dispatch({type:"SET_EVENT_RESIZE",state:p}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),m?lF():cF(),o||(A&&f5(d,i)&&(A=null),this.validMutation=A,this.mutatedRelevantEvents=h)},this.handleDragEnd=i=>{let{context:o}=this.component,l=this.eventRange.def,c=this.eventRange.instance,u=new vs(o,l,c),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:i.origEvent,view:o.viewApi}),this.validMutation){let A=new vs(o,f.defs[l.defId],c?f.instances[c.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:f});let h={oldEvent:u,event:A,relatedEvents:jm(f,o,c),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:d})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},h),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||mn(0),endDelta:this.validMutation.endDelta||mn(0),jsEvent:i.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",h)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:r}=e,n=this.dragging=new Ww(e.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=r.context.options.dragScroll;let a=this.hitDragging=new d5(this.dragging,jF(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return xi(e.subjectEl,".fc-event")}}function aot(t,e,r,n){let a=t.context.dateEnv,i=t.dateSpan.range.start,o=e.dateSpan.range.start,l=Gg(i,o,a,t.largeUnit);if(r){if(a.add(n.start,l)<n.end)return{startDelta:l}}else if(a.add(n.end,l)>n.start)return{endDelta:l};return null}class iot{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=n=>{n.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=n=>{let a=this.context.options.unselectCancel,i=gre(n.origEvent);this.matchesCancel=!!xi(i,a),this.matchesEvent=!!xi(i,Gw.SELECTOR)},this.onDocumentPointerUp=n=>{let{context:a}=this,{documentPointer:i}=this,o=a.getCurrentData();if(!i.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let l=a.options.unselectAuto;l&&(!l||!this.matchesCancel)&&a.calendarApi.unselect(n)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let r=this.documentPointer=new Cne(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const oot={fixedMirrorParent:et},lot={dateClick:et,eventDragStart:et,eventDragStop:et,eventDrop:et,eventResizeStart:et,eventResizeStop:et,eventResize:et,drop:et,eventReceive:et,eventLeave:et};EF.dataAttrPrefix="";var cot=Jh({name:"@fullcalendar/interaction",componentInteractions:[Jit,Zit,Gw,sot],calendarInteractions:[iot],elementDraggingImpl:Ww,optionRefiners:oot,listenerRefiners:lot});const Tne=()=>{const t=Fr(),{user:e}=Ya(),[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState(""),[c,u]=y.useState(!1),[d,f]=y.useState(""),A=e&&["ADMIN_SYS","CHEF_ATELIER","CHARGE_AFFAIRE"].includes(e.role),h=y.useCallback(async()=>{u(!0);try{const v={};o&&(v.affaireId=o);const b=await nF(v);if(n((b==null?void 0:b.pointages)||[]),!a.length){const C=await IS();i(C||[])}}catch{ve.error("Erreur lors de la récupération des pointages.")}finally{u(!1)}},[o,a.length]);y.useEffect(()=>{h()},[h]);const m=v=>{t(`/pointages/saisie?date=${v.dateStr}`)},p=v=>{const b=v.event.extendedProps.id;t(`/pointages/saisie/${b}`)},g=v=>{l(v==="_TOUTES_AFFAIRES_"?"":v)},x=r.map(v=>{var b,C;return{id:v.id,title:`${v.nbHeures}h - ${((b=v.affaire)==null?void 0:b.numero)||"N/A"} (${v.typeHeure}) - ${((C=v.user)==null?void 0:C.prenom)||""}`,start:v.datePointage,allDay:!0,extendedProps:v,backgroundColor:v.valide?"#34D399":"#FBBF24",borderColor:v.valide?"#059669":"#D97706"}});return s.jsx("div",{className:"container mx-auto p-4",children:s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs(Br,{children:["Calendrier des Pointages ",d&&`- ${d}`]}),s.jsx(fm,{children:"Cliquez sur une date pour ajouter un pointage ou sur un pointage pour le modifier."})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Xi,{to:"/pointages/saisie",className:"btn-modern btn-primary inline-flex items-center justify-center px-4 py-2 text-sm font-medium",children:"Saisir un pointage"}),A&&s.jsx(Xi,{to:"/pointages/validation",className:"btn-modern btn-secondary inline-flex items-center justify-center px-4 py-2 text-sm font-medium",children:"Valider les pointages"}),s.jsx(Xi,{to:"/pointages/statistiques",className:"btn-modern btn-secondary inline-flex items-center justify-center px-4 py-2 text-sm font-medium",children:"Statistiques"})]})]})}),s.jsxs(nr,{children:[s.jsx("div",{className:"mb-4",children:s.jsxs(Xo,{onValueChange:g,value:o,children:[s.jsx(Jo,{className:"w-full sm:w-[300px]",children:s.jsx(Zo,{placeholder:"Filtrer par affaire..."})}),s.jsxs(el,{children:[s.jsx(la,{value:"_TOUTES_AFFAIRES_",children:"Toutes les affaires"}),a.map(v=>s.jsxs(la,{value:String(v.id),children:[v.numero," - ",v.libelle]},v.id))]})]})}),s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:"#FBBF24"}}),s.jsx("span",{className:"text-sm",children:"Non validé"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:"#34D399"}}),s.jsx("span",{className:"text-sm",children:"Validé"})]})]}),c&&!x.length?s.jsx("p",{children:"Chargement du calendrier et des pointages..."}):s.jsxs("div",{className:"fc-container",children:[" ",s.jsx(mne,{plugins:[$it,cot],initialView:"dayGridMonth",weekends:!0,events:x,dateClick:m,eventClick:p,locale:"fr",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek"},buttonText:{today:"Aujourd'hui",month:"Mois",week:"Semaine",day:"Jour",list:"Liste"},height:"auto",datesSet:v=>{f(v.view.title)}})]})]})]})})},A4=({title:t,description:e})=>s.jsx("div",{className:"flex items-center justify-center h-60 bg-muted/20 rounded-md border",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("h3",{className:"text-lg font-medium",children:t}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e}),s.jsx("p",{className:"mt-4 text-xs",children:"Chart.js sera intégré ultérieurement"})]})}),Dne=()=>{var o,l,c;const[t,e]=y.useState({totalHeures:0,heuresParType:[],heuresParAffaire:[],heuresParJour:[]}),[r,n]=y.useState(!0),[a,i]=y.useState("mois");return y.useEffect(()=>{(async()=>{try{n(!0);const d=await E_(a);e(d)}catch{ve.error("Erreur lors du chargement des statistiques")}finally{n(!1)}})()},[a]),s.jsx("div",{className:"container mx-auto p-4",children:s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx(Br,{children:"Statistiques des pointages"}),s.jsx(fm,{children:"Analyses des heures travaillées"})]}),s.jsx("div",{children:s.jsx(j0,{value:a,onValueChange:i,children:s.jsxs(C0,{children:[s.jsx(Vi,{value:"semaine",children:"Semaine"}),s.jsx(Vi,{value:"mois",children:"Mois"}),s.jsx(Vi,{value:"annee",children:"Année"})]})})})]})}),s.jsxs(nr,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs(Kt,{children:[s.jsx(Er,{className:"py-2",children:s.jsx(Br,{className:"text-sm text-muted-foreground",children:"Total des heures"})}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[t.totalHeures," h"]})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{className:"py-2",children:s.jsx(Br,{className:"text-sm text-muted-foreground",children:"Heures atelier"})}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[((o=t.heuresParType.find(u=>u.type==="ATELIER"))==null?void 0:o.total)||0," h"]})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{className:"py-2",children:s.jsx(Br,{className:"text-sm text-muted-foreground",children:"Heures pose"})}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[((l=t.heuresParType.find(u=>u.type==="POSE"))==null?void 0:l.total)||0," h"]})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{className:"py-2",children:s.jsx(Br,{className:"text-sm text-muted-foreground",children:"Heures déplacement"})}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[((c=t.heuresParType.find(u=>u.type==="DEPLACEMENT"))==null?void 0:c.total)||0," h"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Répartition par type"})}),s.jsx(nr,{children:r?s.jsx("div",{className:"flex items-center justify-center h-60",children:s.jsx("p",{children:"Chargement..."})}):s.jsx(A4,{title:"Répartition des heures par type",description:"Atelier, Pose, Déplacement, etc."})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Top affaires"})}),s.jsx(nr,{children:r?s.jsx("div",{className:"flex items-center justify-center h-60",children:s.jsx("p",{children:"Chargement..."})}):s.jsx(A4,{title:"Affaires les plus consommatrices",description:"Heures par affaire"})})]})]}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Évolution journalière"})}),s.jsx(nr,{children:r?s.jsx("div",{className:"flex items-center justify-center h-60",children:s.jsx("p",{children:"Chargement..."})}):s.jsx(A4,{title:"Heures travaillées par jour",description:"Évolution sur la période"})})]})]})]})})},Ine=le.forwardRef(({className:t,...e},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:`w-full caption-bottom text-sm ${t||""}`,...e})})),_ne=le.forwardRef(({className:t,...e},r)=>s.jsx("thead",{ref:r,className:`[&_tr]:border-b ${t||""}`,...e})),Pne=le.forwardRef(({className:t,...e},r)=>s.jsx("tbody",{ref:r,className:`[&_tr:last-child]:border-0 ${t||""}`,...e})),uot=le.forwardRef(({className:t,...e},r)=>s.jsx("tfoot",{ref:r,className:`border-t bg-gray-100/50 font-medium [&>tr]:last:border-b-0 ${t||""}`,...e})),H_=le.forwardRef(({className:t,...e},r)=>s.jsx("tr",{ref:r,className:`border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 ${t||""}`,...e})),Jf=le.forwardRef(({className:t,...e},r)=>s.jsx("th",{ref:r,className:`h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 ${t||""}`,...e})),Zf=le.forwardRef(({className:t,...e},r)=>s.jsx("td",{ref:r,className:`p-4 align-middle [&:has([role=checkbox])]:pr-0 ${t||""}`,...e})),dot=le.forwardRef(({className:t,...e},r)=>s.jsx("caption",{ref:r,className:`mt-4 text-sm text-gray-500 ${t||""}`,...e}));Ine.displayName="Table";_ne.displayName="TableHeader";Pne.displayName="TableBody";uot.displayName="TableFooter";H_.displayName="TableRow";Jf.displayName="TableHead";Zf.displayName="TableCell";dot.displayName="TableCaption";const Q_=le.forwardRef(({className:t,checked:e,onCheckedChange:r,disabled:n,...a},i)=>s.jsx("input",{type:"checkbox",ref:i,className:`h-4 w-4 rounded border border-gray-300 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,checked:e,onChange:o=>r==null?void 0:r(o.target.checked),disabled:n,...a}));Q_.displayName="Checkbox";const kne=({className:t,children:e,...r})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:`mx-auto flex w-full justify-center ${t||""}`,...r,children:e}),One=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("ul",{ref:n,className:`flex flex-row items-center gap-1 ${t||""}`,...r,children:e})),A2=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("li",{ref:n,className:`${t||""}`,...r,children:e})),h5=le.forwardRef(({className:t,isActive:e,size:r="default",children:n,...a},i)=>s.jsx("a",{ref:i,"aria-current":e?"page":void 0,className:`
      inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium 
      transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 
      disabled:pointer-events-none disabled:opacity-50 
      hover:bg-gray-100 hover:text-gray-900 
      h-9 px-4 py-2 cursor-pointer
      ${e?"border border-gray-200 bg-white shadow-sm":"border-0"}
      ${t||""}
    `,...a,children:n})),Fne=le.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(h5,{ref:n,"aria-label":"Go to previous page",size:"default",className:`gap-1 pl-2.5 ${t||""}`,...r,children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{children:e||"Previous"})]})),Rne=le.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(h5,{ref:n,"aria-label":"Go to next page",size:"default",className:`gap-1 pr-2.5 ${t||""}`,...r,children:[s.jsx("span",{children:e||"Next"}),s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})),fot=le.forwardRef(({className:t,...e},r)=>s.jsxs("span",{ref:r,"aria-hidden":!0,className:`flex h-9 w-9 items-center justify-center ${t||""}`,...e,children:[s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),s.jsx("span",{className:"sr-only",children:"More pages"})]}));kne.displayName="Pagination";One.displayName="PaginationContent";A2.displayName="PaginationItem";h5.displayName="PaginationLink";Fne.displayName="PaginationPrevious";Rne.displayName="PaginationNext";fot.displayName="PaginationEllipsis";const hot={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Aot=(t,e,r)=>{let n;const a=hot[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},mot={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},pot={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},got={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xot={date:Xg({formats:mot,defaultWidth:"full"}),time:Xg({formats:pot,defaultWidth:"full"}),dateTime:Xg({formats:got,defaultWidth:"full"})},vot={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},bot=(t,e,r,n)=>vot[t],yot={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},wot={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},jot={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Cot={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Not={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Sot=(t,e)=>{const r=Number(t),n=e==null?void 0:e.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let i;return r===1?i=n&&a.includes(n)?"ère":"er":i="ème",r+i},Eot=["MMM","MMMM"],Bot={preprocessor:(t,e)=>t.getDate()===1||!e.some(n=>n.isToken&&Eot.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:Sot,era:uu({values:yot,defaultWidth:"wide"}),quarter:uu({values:wot,defaultWidth:"wide",argumentCallback:t=>t-1}),month:uu({values:jot,defaultWidth:"wide"}),day:uu({values:Cot,defaultWidth:"wide"}),dayPeriod:uu({values:Not,defaultWidth:"wide"})},Tot=/^(\d+)(ième|ère|ème|er|e)?/i,Dot=/\d+/i,Iot={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},_ot={any:[/^av/i,/^ap/i]},Pot={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},kot={any:[/1/i,/2/i,/3/i,/4/i]},Oot={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Fot={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rot={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Mot={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Lot={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Uot={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},$ot={ordinalNumber:aq({matchPattern:Tot,parsePattern:Dot,valueCallback:t=>parseInt(t)}),era:du({matchPatterns:Iot,defaultMatchWidth:"wide",parsePatterns:_ot,defaultParseWidth:"any"}),quarter:du({matchPatterns:Pot,defaultMatchWidth:"wide",parsePatterns:kot,defaultParseWidth:"any",valueCallback:t=>t+1}),month:du({matchPatterns:Oot,defaultMatchWidth:"wide",parsePatterns:Fot,defaultParseWidth:"any"}),day:du({matchPatterns:Rot,defaultMatchWidth:"wide",parsePatterns:Mot,defaultParseWidth:"any"}),dayPeriod:du({matchPatterns:Lot,defaultMatchWidth:"any",parsePatterns:Uot,defaultParseWidth:"any"})},Un={code:"fr",formatDistance:Aot,formatLong:xot,formatRelative:bot,localize:Bot,match:$ot,options:{weekStartsOn:1,firstWeekContainsDate:4}},Mne=()=>{Fr();const{user:t}=Ya(),[e,r]=y.useState([]),[n,a]=y.useState(0),[i,o]=y.useState([]),[l,c]=y.useState(!1),[u,d]=y.useState(!1),[f,A]=y.useState({dateDebut:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],dateFin:new Date().toISOString().split("T")[0],valide:"non_valides"}),[h,m]=y.useState(1),p=10,g=y.useCallback(async()=>{c(!0);try{const N={dateDebut:f.dateDebut,dateFin:f.dateFin,skip:(h-1)*p,take:p};f.valide==="valides"?N.valide=!0:f.valide==="non_valides"&&(N.valide=!1);const E=await nF(N);r(E.pointages||[]),a(E.total||0),o([])}catch{ve.error("Erreur lors de la récupération des pointages.")}finally{c(!1)}},[f,h]);y.useEffect(()=>{g()},[g]);const x=(N,E)=>{A(_=>({..._,[N]:E})),m(1)},v=N=>{m(N)},b=N=>{o(N?e.map(E=>E.id):[])},C=(N,E)=>{o(N?_=>[..._,E]:_=>_.filter(k=>k!==E))},j=async()=>{if(i.length===0){ve.info("Veuillez sélectionner au moins un pointage à valider.");return}d(!0);try{for(const N of i)await sF(N,{valide:!0,validePar:t.id});ve.success(`${i.length} pointage(s) validé(s) avec succès.`),g()}catch{ve.error("Erreur lors de la validation des pointages.")}finally{d(!1)}},w=Math.ceil(n/p);return s.jsx("div",{className:"container mx-auto p-4",children:s.jsxs(Kt,{children:[s.jsxs(Er,{children:[s.jsx(Br,{children:"Validation des Pointages"}),s.jsx(fm,{children:"Validez les pointages de l'équipe pour le mois en cours."})]}),s.jsxs(nr,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date de début"}),s.jsx("input",{type:"date",className:"w-full border rounded-md p-2",value:f.dateDebut,onChange:N=>x("dateDebut",N.target.value)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date de fin"}),s.jsx("input",{type:"date",className:"w-full border rounded-md p-2",value:f.dateFin,onChange:N=>x("dateFin",N.target.value)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Statut"}),s.jsxs(Xo,{value:f.valide,onValueChange:N=>x("valide",N),children:[s.jsx(Jo,{children:s.jsx(Zo,{})}),s.jsxs(el,{children:[s.jsx(la,{value:"tous",children:"Tous"}),s.jsx(la,{value:"valides",children:"Validés"}),s.jsx(la,{value:"non_valides",children:"Non validés"})]})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx(Xe,{onClick:j,disabled:i.length===0||u,className:"mr-2",children:u?"Validation...":`Valider ${i.length} pointage(s)`})}),l?s.jsx("div",{className:"text-center py-8",children:"Chargement des pointages..."}):e.length===0?s.jsx("div",{className:"text-center py-8",children:"Aucun pointage trouvé pour les critères sélectionnés."}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(Ine,{children:[s.jsx(_ne,{children:s.jsxs(H_,{children:[s.jsx(Jf,{className:"w-12",children:s.jsx(Q_,{checked:i.length===e.length&&e.length>0,onCheckedChange:b})}),s.jsx(Jf,{children:"Date"}),s.jsx(Jf,{children:"Collaborateur"}),s.jsx(Jf,{children:"Affaire"}),s.jsx(Jf,{children:"Type"}),s.jsx(Jf,{children:"Heures"}),s.jsx(Jf,{children:"Statut"})]})}),s.jsx(Pne,{children:e.map(N=>{var E,_,k,D,S;return s.jsxs(H_,{children:[s.jsx(Zf,{children:s.jsx(Q_,{checked:i.includes(N.id),onCheckedChange:F=>C(F,N.id)})}),s.jsx(Zf,{children:on(new Date(N.datePointage),"dd MMMM yyyy",{locale:Un})}),s.jsxs(Zf,{children:[(E=N.user)==null?void 0:E.prenom," ",(_=N.user)==null?void 0:_.nom]}),s.jsxs(Zf,{children:[(k=N.affaire)==null?void 0:k.numero," - ",(S=(D=N.affaire)==null?void 0:D.libelle)==null?void 0:S.substring(0,20)]}),s.jsx(Zf,{children:N.typeHeure}),s.jsxs(Zf,{children:[N.nbHeures,"h"]}),s.jsx(Zf,{children:N.valide?s.jsx("span",{className:"text-green-600 font-medium",children:"Validé"}):s.jsx("span",{className:"text-yellow-600 font-medium",children:"En attente"})})]},N.id)})})]})}),w>1&&s.jsx("div",{className:"mt-4",children:s.jsx(kne,{children:s.jsxs(One,{children:[s.jsx(A2,{children:s.jsx(Fne,{onClick:()=>v(Math.max(1,h-1)),disabled:h===1||l})}),Array.from({length:Math.min(5,w)},(N,E)=>{const _=Math.min(Math.max(h-2+E,1),w);return E>0&&_<=Math.min(Math.max(h-2+E-1,1),w)?null:s.jsx(A2,{children:s.jsx(h5,{isActive:h===_,onClick:()=>v(_),children:_})},_)}),s.jsx(A2,{children:s.jsx(Rne,{onClick:()=>v(Math.min(w,h+1)),disabled:h===w||l})})]})})})]})]})})},Hot=()=>{var f;const[t,e]=y.useState("calendar"),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,l]=y.useState(!1),c=async()=>{try{const A=await ttt.getStats();n(A)}catch(A){console.error("Erreur chargement statistiques:",A)}finally{i(!1)}};y.useEffect(()=>{c()},[]);const u=[{id:"calendar",label:"Calendrier",icon:s.jsx(_s,{size:20}),component:s.jsx(Tne,{})},{id:"validation",label:"Validation",icon:s.jsx(PG,{size:20}),component:s.jsx(Mne,{})},{id:"stats",label:"Statistiques",icon:s.jsx(Do,{size:20}),component:s.jsx(Dne,{})}],d=A=>{const h=Math.floor(A/60),m=A%60;return`${h}h${m.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(wn,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Pointages"}),s.jsx("p",{className:"text-gray-600",children:"Suivi du temps de travail et des heures"})]})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[s.jsx(Jn,{size:16}),s.jsx("span",{children:"Nouveau pointage"})]})]}),!a&&r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Heures totales (semaine)"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(r.totalWeek||0)})]}),s.jsx(wn,{className:"text-blue-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Heures totales (mois)"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(r.totalMonth||0)})]}),s.jsx(Tl,{className:"text-green-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Collaborateurs actifs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.activeUsers||0})]}),s.jsx(Ji,{className:"text-purple-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En attente validation"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.pendingValidation||0})]}),s.jsx(Ls,{className:"text-orange-500",size:32})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:u.map(A=>s.jsxs("button",{onClick:()=>e(A.id),className:`flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ${t===A.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[A.icon,s.jsx("span",{children:A.label})]},A.id))})}),s.jsx("div",{className:"p-6",children:(f=u.find(A=>A.id===t))==null?void 0:f.component})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nouveau pointage"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsx(B_,{onSuccess:()=>{l(!1),c()},onCancel:()=>l(!1)})})]})})]})},Qot=le.forwardRef(({className:t,children:e,asChild:r,...n},a)=>s.jsx("button",{ref:a,className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 ${t||""}`,...n,children:e})),zot=le.forwardRef(({className:t,align:e="end",children:r,...n},a)=>s.jsx("div",{ref:a,className:`absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 shadow-md ${e==="end"?"right-0":"left-0"} ${t||""}`,...n,children:r})),Vot=le.forwardRef(({className:t,disabled:e,children:r,...n},a)=>s.jsx("div",{ref:a,className:`relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-gray-100 ${e?"pointer-events-none opacity-50":""} ${t||""}`,...n,children:r})),Wot=le.forwardRef(({className:t,...e},r)=>s.jsx("div",{ref:r,className:`-mx-1 my-1 h-px bg-gray-200 ${t||""}`,...e})),Got=le.forwardRef(({className:t,children:e,...r},n)=>s.jsx("div",{ref:n,className:`px-2 py-1.5 text-sm font-semibold ${t||""}`,...r,children:e}));Qot.displayName="DropdownMenuTrigger";zot.displayName="DropdownMenuContent";Vot.displayName="DropdownMenuItem";Wot.displayName="DropdownMenuSeparator";Got.displayName="DropdownMenuLabel";const qot=()=>{var _,k;const t=Fr(),{triggerRefresh:e,refreshTrigger:r}=nG(),[n,a]=y.useState([]),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(null),[f,A]=y.useState({search:"",role:"",actif:"all",statutContractuel:""}),[h,m]=y.useState({page:1,limit:20,total:0,pages:1}),[p,g]=y.useState(!1),[x,v]=y.useState(null),b=async()=>{try{c(!0);const D={page:h.page,limit:h.limit,...f},[S,F]=await Promise.all([Gk(D),Aq()]);a(S.users||[]),m(M=>({...M,total:S.total||0,pages:Math.ceil((S.total||0)/M.limit)})),o(F),d(null)}catch(D){d("Erreur lors du chargement des données"),console.error(D),ve.error("Erreur lors du chargement des données")}finally{c(!1)}};y.useEffect(()=>{b()},[f,h.page]),y.useEffect(()=>{r>0&&(console.log("🔄 Refresh déclenché depuis le contexte, trigger:",r),b())},[r]);const C=(D,S)=>{A(F=>({...F,[D]:S})),m(F=>({...F,page:1}))},j=D=>{v(D),g(!0)},w=async()=>{if(x)try{await fq(x.id),ve.success(`${x.prenom} ${x.nom} a été désactivé`),g(!1),v(null),e("delete",x)}catch{ve.error("Erreur lors de la désactivation de l'utilisateur")}},N=async D=>{try{await hq(D.id),ve.success(`${D.prenom} ${D.nom} a été réactivé`),e("reactivate",D)}catch{ve.error("Erreur lors de la réactivation de l'utilisateur")}},E=D=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(D||0);return l&&n.length===0?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestion de l'Équipe"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gérez les utilisateurs, leurs rôles et tarifs horaires"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:b,disabled:l,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(Cm,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),"Actualiser"]}),s.jsxs("button",{onClick:()=>t("/users/nouveau"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(Pae,{className:"w-4 h-4 mr-2"}),"Nouvel utilisateur"]})]})]}),i&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(v2,{className:"h-6 w-6 text-gray-400"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total utilisateurs"}),s.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.total||0})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(SR,{className:"h-6 w-6 text-green-400"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Utilisateurs actifs"}),s.jsx("dd",{className:"text-lg font-medium text-green-600",children:i.actifs||0})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Il,{className:"h-6 w-6 text-orange-400"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Équipe terrain"}),s.jsx("dd",{className:"text-lg font-medium text-orange-600",children:(((_=i.byRole)==null?void 0:_.OUVRIER_CHANTIER)||0)+(((k=i.byRole)==null?void 0:k.CHEF_CHANTIER)||0)})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(h0,{className:"h-6 w-6 text-purple-400"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Tarif moyen"}),s.jsx("dd",{className:"text-lg font-medium text-purple-600",children:E(i.tarifMoyen)})]})})]})})})]}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsx("div",{className:"px-4 py-5 sm:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Recherche"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(dz,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",id:"search",placeholder:"Nom, prénom, email...",value:f.search,onChange:D=>C("search",D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rôle"}),s.jsxs("select",{value:f.role,onChange:D=>C("role",D.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"",children:"Tous les rôles"}),Object.entries(np).map(([D,S])=>s.jsx("option",{value:D,children:S.label},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("select",{value:f.statutContractuel,onChange:D=>C("statutContractuel",D.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"",children:"Tous les types"}),Object.entries(Wk).map(([D,S])=>s.jsx("option",{value:D,children:S.label},D))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),s.jsxs("select",{value:f.actif,onChange:D=>C("actif",D.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Tous"}),s.jsx("option",{value:"true",children:"Actifs seulement"}),s.jsx("option",{value:"false",children:"Inactifs seulement"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:()=>{A({search:"",role:"",actif:"all",statutContractuel:""}),m(D=>({...D,page:1}))},className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(sz,{className:"w-4 h-4 mr-2"}),"Réinitialiser"]})})]})})}),u&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),s.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[s.jsx("div",{className:"px-4 py-5 sm:px-6",children:s.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[s.jsx(v2,{className:"w-5 h-5 mr-2"}),"Liste des utilisateurs (",h.total,")"]})}),s.jsx("div",{className:"border-t border-gray-200",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarif horaire"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Embauche"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"relative px-6 py-3 min-w-[120px]",children:s.jsx("span",{className:"sr-only",children:"Actions"})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:l?"Chargement...":"Aucun utilisateur trouvé"})}):n.map(D=>{var S,F;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsxs("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:S6(D.id,D)},children:[(S=D.prenom)==null?void 0:S[0],(F=D.nom)==null?void 0:F[0]]})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"text-sm font-medium",style:{color:S6(D.id,D)},children:[D.prenom," ",D.nom]}),s.jsx("div",{className:"text-sm text-gray-500",children:D.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-700",children:pq(D.role)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.statutContractuel==="SOUS_TRAITANT"?"text-white":Wve(D.statutContractuel)}`,style:D.statutContractuel==="SOUS_TRAITANT"?Lve.SOUS_TRAITANT:{},children:Vve(D.statutContractuel)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[D.email&&s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx(Kb,{className:"w-3 h-3 mr-1 text-gray-400"}),D.email]}),D.telephone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Z_,{className:"w-3 h-3 mr-1 text-gray-400"}),D.telephone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[D.tarifHoraireVente>0?s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["💸 ",E(D.tarifHoraireVente)]}):D.tarifHoraireCout>0?s.jsxs("div",{className:"text-sm font-medium text-red-600",children:["💰 ",E(D.tarifHoraireCout)]}):D.tarifHoraireBase>0?s.jsxs("div",{className:"text-sm font-medium text-yellow-600",children:["⚠️ ",E(D.tarifHoraireBase)]}):s.jsx("div",{className:"text-sm text-gray-400",children:"Non défini"}),D.tarifHoraireVente>0&&D.tarifHoraireCout>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Coût: ",E(D.tarifHoraireCout)]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.dateEmbauche?on(new Date(D.dateEmbauche),"dd/MM/yyyy",{locale:Un}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.actif?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.actif?"Actif":"Inactif"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium min-w-[120px]",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>t(`/users/${D.id}`),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Voir détails",children:s.jsx(ix,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>t(`/users/${D.id}/modifier`),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Modifier",children:s.jsx(Ym,{className:"w-4 h-4"})}),D.actif?s.jsx("button",{onClick:()=>j(D),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Désactiver",children:s.jsx(Km,{className:"w-4 h-4"})}):s.jsx("button",{onClick:()=>N(D),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Réactiver",children:s.jsx(SR,{className:"w-4 h-4"})})]})})]},D.id)})})]})})})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Désactiver l'utilisateur"}),s.jsx("div",{className:"mt-2 px-7 py-3",children:s.jsxs("p",{className:"text-sm text-gray-500",children:['Êtes-vous sûr de vouloir désactiver "',x==null?void 0:x.prenom," ",x==null?void 0:x.nom,`" ? L'utilisateur ne pourra plus se connecter mais ses données seront conservées.`]})}),s.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Annuler"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Désactiver"})]})]})})})]})},Kot=({onTarifCalcule:t,className:e=""})=>{const[r,n]=y.useState(""),[a,i]=y.useState("151.67"),[o,l]=y.useState(null),[c,u]=y.useState(!1),d={securiteSociale:8.5,allocFamiliales:5.25,assuranceChomage:4.05,retraiteComplementaire:4.72,prevoyance:1.5,congesPayes:10,intemperies:.5,formationProfessionnelle:.55,medecineTrail:.3,taxeApprentissage:.68,participationFormation:1,versementTransport:2.5,responsabiliteCivile:.8,accidentsTravail:3},f=()=>{const m=parseFloat(r)||0,p=parseFloat(a)||151.67;if(m<=0||p<=0){l(null);return}const x=m/(1-22/100),v={};let b=0;Object.entries(d).forEach(([N,E])=>{const _=x*(E/100);v[N]={taux:E,montant:_},b+=_});const C=x+b,j=C/p,w={salaireNet:m,salaireBrut:x,totalChargesPatronales:b,coutTotalEmployeur:C,tauxHoraireCout:j,heuresParMois:p,detailCharges:v,tauxChargesTotal:b/x*100};l(w),t&&t(j)};y.useEffect(()=>{f()},[r,a]);const A=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(m||0),h=m=>({securiteSociale:"Sécurité Sociale",allocFamiliales:"Allocations Familiales",assuranceChomage:"Assurance Chômage",retraiteComplementaire:"Retraite Complémentaire",prevoyance:"Prévoyance",congesPayes:"Congés Payés BTP",intemperies:"Intempéries BTP",formationProfessionnelle:"Formation Professionnelle",medecineTrail:"Médecine du Travail",taxeApprentissage:"Taxe d'Apprentissage",participationFormation:"Participation Formation",versementTransport:"Versement Transport",responsabiliteCivile:"Responsabilité Civile",accidentsTravail:"Accidents du Travail"})[m]||m;return s.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border-2 border-blue-200 p-4 ${e}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Yb,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-semibold text-blue-800",children:"Calculatrice Coût Salarié BTP"}),s.jsx("button",{type:"button",onClick:()=>u(!c),className:"text-blue-600 hover:text-blue-800",children:s.jsx(Gb,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"💰 Salaire Net Mensuel (€)"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h0,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:r,onChange:m=>n(m.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1800.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⏰ Heures/Mois"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(rP,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:a,onChange:m=>i(m.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"151.67"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"35h/semaine = 151.67h/mois"})]})]}),o&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-xs text-gray-600",children:"Salaire Brut"}),s.jsx("div",{className:"font-bold text-blue-600",children:A(o.salaireBrut)})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-xs text-gray-600",children:"Charges Patronales"}),s.jsx("div",{className:"font-bold text-red-600",children:A(o.totalChargesPatronales)})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-xs text-gray-600",children:"Coût Total"}),s.jsx("div",{className:"font-bold text-green-600",children:A(o.coutTotalEmployeur)})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-300",children:[s.jsx("div",{className:"text-xs text-gray-600",children:"💰 Coût Horaire"}),s.jsx("div",{className:"font-bold text-lg text-green-700",children:A(o.tauxHoraireCout)})]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Taux de charges patronales BTP :"})," ",o.tauxChargesTotal.toFixed(1),"%"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ce taux horaire inclut toutes les charges patronales spécifiques au BTP"})]}),c&&s.jsxs("div",{className:"bg-white rounded-lg border",children:[s.jsx("div",{className:"p-3 border-b",children:s.jsx("h5",{className:"font-medium text-gray-800",children:"Détail des Charges Patronales"})}),s.jsx("div",{className:"p-3 space-y-2 max-h-60 overflow-y-auto",children:Object.entries(o.detailCharges).map(([m,p])=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:h(m)}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-gray-500",children:[p.taux,"%"]}),s.jsx("span",{className:"font-medium text-red-600 min-w-[80px] text-right",children:A(p.montant)})]})]},m))})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("p",{className:"text-yellow-800 text-xs",children:["⚠️ ",s.jsx("strong",{children:"Calcul indicatif"})," : Les taux peuvent varier selon la taille de l'entreprise, la convention collective, et la localisation. Consultez votre expert-comptable pour des calculs précis."]})})]})},T9=()=>{var k;const t=Fr(),{id:e}=Ka(),r=!!e,{triggerRefresh:n}=nG(),[a,i]=y.useState({email:"",nom:"",prenom:"",password:"",confirmPassword:"",role:"",statutContractuel:"SALARIE",specialitePoseur:!1,specialiteFabriquant:!1,specialiteDessinateur:!1,specialiteChargeAffaire:!1,tarifHoraireBase:"",tarifHoraireCout:"",tarifHoraireVente:"",telephone:"",dateEmbauche:"",actif:!0,disponiblePlanning:!1}),[o,l]=y.useState({}),[c,u]=y.useState(!1),[d,f]=y.useState(r),[A,h]=y.useState(!1),[m,p]=y.useState(!1),[g,x]=y.useState(null),[v,b]=y.useState(!1);y.useEffect(()=>{r&&C()},[e,r]),y.useEffect(()=>()=>{g&&clearTimeout(g)},[g]);const C=async()=>{try{f(!0);const D=await cq(e);i({email:D.email,nom:D.nom,prenom:D.prenom,password:"",confirmPassword:"",role:D.role,statutContractuel:D.statutContractuel||"SALARIE",specialitePoseur:D.specialitePoseur||!1,specialiteFabriquant:D.specialiteFabriquant||!1,specialiteDessinateur:D.specialiteDessinateur||!1,specialiteChargeAffaire:D.specialiteChargeAffaire||!1,tarifHoraireBase:D.tarifHoraireBase?D.tarifHoraireBase.toString():"",tarifHoraireCout:D.tarifHoraireCout?D.tarifHoraireCout.toString():"",tarifHoraireVente:D.tarifHoraireVente?D.tarifHoraireVente.toString():"",telephone:D.telephone||"",dateEmbauche:D.dateEmbauche?new Date(D.dateEmbauche).toISOString().split("T")[0]:"",actif:D.actif,disponiblePlanning:D.disponiblePlanning||!1})}catch{ve.error("Erreur lors du chargement des données de l'utilisateur"),t("/users")}finally{f(!1)}},j=async D=>{if(!(!D||!D.includes("@"))){p(!0);try{const S=await mq(D,r?e:null);l(S?F=>({...F,email:""}):F=>({...F,email:"Cet email est déjà utilisé"}))}catch(S){console.error("Erreur lors de la vérification de l'email:",S)}finally{p(!1)}}},w=D=>{const{name:S,value:F,type:M,checked:R}=D.target;if(i(U=>({...U,[S]:M==="checkbox"?R:F})),o[S]&&l(U=>({...U,[S]:""})),S==="email"){g&&clearTimeout(g);const U=setTimeout(()=>{j(F)},1e3);x(U)}},N=D=>{i(S=>({...S,tarifHoraireCout:D.toFixed(2)})),o.tarifHoraireCout&&l(S=>({...S,tarifHoraireCout:""})),ve.success(`Tarif coût calculé : ${D.toFixed(2)}€/h`)},E=()=>{let S={...gq(a).errors};return!r&&!a.password&&(S.password="Le mot de passe est obligatoire"),a.password&&a.password.length<6&&(S.password="Le mot de passe doit contenir au moins 6 caractères"),a.password!==a.confirmPassword&&(S.confirmPassword="Les mots de passe ne correspondent pas"),a.tarifHoraireBase&&isNaN(parseFloat(a.tarifHoraireBase))&&(S.tarifHoraireBase="Le tarif horaire doit être un nombre"),a.tarifHoraireCout&&isNaN(parseFloat(a.tarifHoraireCout))&&(S.tarifHoraireCout="Le tarif coût doit être un nombre"),a.tarifHoraireVente&&isNaN(parseFloat(a.tarifHoraireVente))&&(S.tarifHoraireVente="Le tarif vente doit être un nombre"),l(S),Object.keys(S).length===0},_=async D=>{var S,F,M,R;if(D.preventDefault(),!E()){ve.error("Veuillez corriger les erreurs dans le formulaire");return}if(o.email){ve.error("Veuillez corriger l'erreur avec l'email");return}if(m){ve.error("Vérification de l'email en cours, veuillez patienter...");return}u(!0);try{const U={email:a.email,nom:a.nom,prenom:a.prenom,role:a.role,statutContractuel:a.statutContractuel,specialitePoseur:a.specialitePoseur,specialiteFabriquant:a.specialiteFabriquant,specialiteDessinateur:a.specialiteDessinateur,specialiteChargeAffaire:a.specialiteChargeAffaire,tarifHoraireBase:a.tarifHoraireBase?parseFloat(a.tarifHoraireBase):void 0,tarifHoraireCout:a.tarifHoraireCout?parseFloat(a.tarifHoraireCout):void 0,tarifHoraireVente:a.tarifHoraireVente?parseFloat(a.tarifHoraireVente):void 0,telephone:a.telephone||void 0,dateEmbauche:a.dateEmbauche||void 0,actif:a.actif,disponiblePlanning:a.disponiblePlanning};r?a.password&&(U.password=a.password):U.password=a.password;let z;r?(z=await dq(e,U),ve.success("Utilisateur modifié avec succès")):(z=await uq(U),ve.success("Utilisateur créé avec succès")),console.log("🔄 Déclenchement refresh utilisateurs:",r?"update":"create"),n(r?"update":"create",z),r&&(console.log("🔄 Déclenchement refresh global pour mise à jour utilisateur (taux horaires)"),window.dispatchEvent(new CustomEvent("user_updated",{detail:{userId:z.id,userData:z,action:"update",tarifHoraireCout:z.tarifHoraireCout,tarifHoraireVente:z.tarifHoraireVente}}))),t("/users")}catch(U){ob.logError(r?"Modification utilisateur":"Création utilisateur",U,{formData:a,isEditing:r,userId:e}),((S=U.response)==null?void 0:S.status)===409?(ve.error("Cet email est déjà utilisé par un autre utilisateur"),l(z=>({...z,email:"Cet email est déjà utilisé"}))):((F=U.response)==null?void 0:F.status)===400?ve.error("Données invalides. Vérifiez vos informations."):(R=(M=U.response)==null?void 0:M.data)!=null&&R.message?ve.error(U.response.data.message):ve.error(r?"Erreur lors de la modification":"Erreur lors de la création")}finally{u(!1)}};return Q2(),d?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{children:"Chargement des données..."})]})}):s.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("button",{onClick:()=>t("/users"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(cz,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x2,{className:"h-6 w-6 text-blue-500"}),s.jsx("h1",{className:"text-2xl font-bold",children:r?"Modifier l'utilisateur":"Nouvel utilisateur"})]})]}),s.jsx("p",{className:"text-gray-600",children:r?"Modifiez les informations de l'utilisateur":"Créez un nouvel utilisateur avec ses rôles et tarifs"})]}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prenom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prénom *"}),s.jsx("input",{type:"text",id:"prenom",name:"prenom",value:a.prenom,onChange:w,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.prenom?"border-red-300":"border-gray-300"}`,placeholder:"Jean"}),o.prenom&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.prenom})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),s.jsx("input",{type:"text",id:"nom",name:"nom",value:a.nom,onChange:w,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.nom?"border-red-300":"border-gray-300"}`,placeholder:"Martin"}),o.nom&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.nom})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Kb,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:w,className:`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.email?"border-red-300":"border-gray-300"}`,placeholder:"jean.martin@entreprise.fr"}),m&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]}),o.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.email}),!o.email&&!m&&a.email&&a.email.includes("@")&&s.jsx("p",{className:"text-green-600 text-sm mt-1",children:"✓ Email disponible"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telephone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Téléphone"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Z_,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"tel",id:"telephone",name:"telephone",value:a.telephone,onChange:w,className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.telephone?"border-red-300":"border-gray-300"}`,placeholder:"06.12.34.56.78"})]}),o.telephone&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.telephone})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Authentification"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:r?"Nouveau mot de passe (optionnel)":"Mot de passe *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:A?"text":"password",id:"password",name:"password",value:a.password,onChange:w,className:`block w-full pr-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>h(!A),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:A?s.jsx(qb,{className:"h-5 w-5 text-gray-400"}):s.jsx(ix,{className:"h-5 w-5 text-gray-400"})})]}),o.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le mot de passe"}),s.jsx("input",{type:A?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:w,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"••••••••"}),o.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.confirmPassword})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statut contractuel et rôle"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"statutContractuel",className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut contractuel *"}),s.jsxs("select",{id:"statutContractuel",name:"statutContractuel",value:a.statutContractuel,onChange:w,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.statutContractuel?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"SALARIE",children:"Salarié de l'entreprise"}),s.jsx("option",{value:"SOUS_TRAITANT",children:"Sous-traitant"})]}),o.statutContractuel&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.statutContractuel}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:a.statutContractuel==="SALARIE"?"Employé permanent de l'entreprise":"Intervenant externe ou prestataire"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rôle dans l'entreprise *"}),s.jsxs("select",{id:"role",name:"role",value:a.role,onChange:w,className:`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.role?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Sélectionner un rôle"}),E6(a.statutContractuel).map(D=>s.jsx("option",{value:D.value,children:D.label},D.value))]}),o.role&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.role}),a.role&&s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:(k=E6(a.statutContractuel).find(D=>D.value===a.role))==null?void 0:k.description})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Spécialités et tarification"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Spécialités (plusieurs choix possibles)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Gve().map(D=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:D.key,name:D.key,checked:a[D.key],onChange:w,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:D.key,className:"ml-2 block text-sm text-gray-700",children:D.label})]},D.key))}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Sélectionnez les spécialités de cette personne (peut être poseur ET fabriquant par exemple)"})]}),a.statutContractuel==="SALARIE"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Calculatrice de Coût Salarié BTP"}),s.jsxs("button",{type:"button",onClick:()=>b(!v),className:"inline-flex items-center px-3 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Yb,{className:"h-4 w-4 mr-2"}),v?"Masquer":"Afficher"," la calculatrice"]})]}),v&&s.jsx(Kot,{onTarifCalcule:N,className:"mb-4"}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("p",{className:"text-blue-800 text-sm",children:["💡 ",s.jsx("strong",{children:"Astuce :"})," Cette calculatrice permet de calculer automatiquement le tarif coût à partir du salaire net en incluant toutes les charges patronales spécifiques au BTP."]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"tarifHoraireCout",className:"block text-sm font-medium text-gray-700 mb-2",children:["💰 Tarif Coût (€/h)",a.statutContractuel==="SALARIE"&&s.jsx("span",{className:"text-blue-600 text-xs ml-2",children:"(Calculable automatiquement)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h0,{className:"h-5 w-5 text-red-400"})}),s.jsx("input",{type:"number",step:"0.01",min:"0",id:"tarifHoraireCout",name:"tarifHoraireCout",value:a.tarifHoraireCout,onChange:w,className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 ${o.tarifHoraireCout?"border-red-300":"border-gray-300"}`,placeholder:"15.00"})]}),o.tarifHoraireCout&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.tarifHoraireCout}),s.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Tarif utilisé pour les calculs de coûts internes"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tarifHoraireVente",className:"block text-sm font-medium text-gray-700 mb-2",children:"💸 Tarif Vente (€/h)"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h0,{className:"h-5 w-5 text-green-400"})}),s.jsx("input",{type:"number",step:"0.01",min:"0",id:"tarifHoraireVente",name:"tarifHoraireVente",value:a.tarifHoraireVente,onChange:w,className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${o.tarifHoraireVente?"border-red-300":"border-gray-300"}`,placeholder:"35.00"})]}),o.tarifHoraireVente&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.tarifHoraireVente}),s.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Tarif utilisé pour la facturation client"})]})]}),a.tarifHoraireBase&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("p",{className:"text-yellow-800 text-sm",children:["⚠️ ",s.jsx("strong",{children:"Ancien tarif de base :"})," ",a.tarifHoraireBase,"€/h (maintenu pour compatibilité)"]})})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations complémentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateEmbauche",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date d'embauche"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Il,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"date",id:"dateEmbauche",name:"dateEmbauche",value:a.dateEmbauche,onChange:w,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"actif",id:"actif",checked:a.actif,onChange:w,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"actif",className:"ml-2 block text-sm text-gray-700",children:"Compte Actif"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"disponiblePlanning",id:"disponiblePlanning",checked:a.disponiblePlanning,onChange:w,className:"h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-green-500"}),s.jsx("label",{htmlFor:"disponiblePlanning",className:"ml-2 block text-sm text-gray-700",children:"Disponible pour Planning"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>t("/users"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),r?"Modification...":"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(eP,{className:"h-4 w-4 mr-2"}),r?"Modifier":"Créer"]})})]})]})]})},Yot=async(t={})=>{var e,r;try{const{data:n}=await Ee.get("/reporting/heures-stats",{params:t});return n}catch(n){throw console.error("Erreur lors de la récupération des statistiques d'heures:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Xot=async(t={})=>{var e,r;try{const{data:n}=await Ee.get("/reporting/achats-evolution",{params:t});return n}catch(n){throw console.error("Erreur lors de la récupération de l'évolution des achats:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Jot=async(t={})=>{var e,r;try{const{data:n}=await Ee.get("/reporting/marges-affaires",{params:t});return n}catch(n){throw console.error("Erreur lors de la récupération des marges par affaire:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},Zot=async(t,e={})=>{var r,n;try{const a=await Ee.get(`/reporting/export/${t}`,{params:e,responseType:"blob"}),i=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");return o.href=i,o.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(i),document.body.removeChild(o),!0}catch(a){throw console.error("Erreur lors de l'exportation des données:",((r=a.response)==null?void 0:r.data)||a.message),((n=a.response)==null?void 0:n.data)||a}},elt=async(t={})=>{var e,r;try{const{data:n}=await Ee.get("/reporting/inventaire-stats",{params:t});return n}catch(n){throw console.error("Erreur lors de la récupération des statistiques d'inventaire:",((e=n.response)==null?void 0:e.data)||n.message),((r=n.response)==null?void 0:r.data)||n}},z_=le.forwardRef(({className:t,selected:e,onSelect:r,mode:n="single",...a},i)=>{const[o,l]=y.useState(new Date),[c,u]=y.useState(new Date),d=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],f=v=>new Date(v.getFullYear(),v.getMonth()+1,0).getDate(),A=v=>new Date(v.getFullYear(),v.getMonth(),1).getDay(),h=v=>{const b=new Date;return v.toDateString()===b.toDateString()},m=(v,b)=>v&&b&&v.toDateString()===b.toDateString(),p=v=>{const b=new Date(c.getFullYear(),c.getMonth(),v);r==null||r(b)},g=v=>{u(b=>{const C=new Date(b);return C.setMonth(b.getMonth()+v),C})},x=()=>{const v=f(c),b=A(c),C=[];for(let j=0;j<b;j++)C.push(s.jsx("div",{className:"h-8"},`empty-${j}`));for(let j=1;j<=v;j++){const w=new Date(c.getFullYear(),c.getMonth(),j),N=m(w,e),E=h(w);C.push(s.jsx("button",{type:"button",onClick:()=>p(j),className:qt("h-8 w-8 text-sm rounded-md hover:bg-blue-100 transition-colors",{"bg-blue-500 text-white hover:bg-blue-600":N,"bg-blue-100 text-blue-600":E&&!N,"text-gray-900":!N&&!E}),children:j},j))}return C};return s.jsxs("div",{ref:i,className:qt("p-3 bg-white border rounded-lg shadow-sm",t),...a,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{type:"button",onClick:()=>g(-1),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("h2",{className:"text-sm font-medium",children:[d[c.getMonth()]," ",c.getFullYear()]}),s.jsx("button",{type:"button",onClick:()=>g(1),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(v=>s.jsx("div",{className:"text-center text-xs font-medium text-gray-500 h-8 flex items-center justify-center",children:v},v))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:x()})]})});z_.displayName="Calendar";const DF=y.createContext(),V_=({open:t,onOpenChange:e,children:r})=>{const[n,a]=y.useState(!1),i=t!==void 0?t:n,o=l=>{t===void 0&&a(l),e==null||e(l)};return s.jsx(DF.Provider,{value:{isOpen:i,onOpenChange:o},children:s.jsx("div",{className:"relative",children:r})})},W_=le.forwardRef(({className:t,children:e,asChild:r,...n},a)=>{const i=y.useContext(DF);return r&&le.isValidElement(e)?le.cloneElement(e,{...n,ref:a,onClick:()=>i==null?void 0:i.onOpenChange(!i.isOpen)}):s.jsx("button",{ref:a,className:t,onClick:()=>i==null?void 0:i.onOpenChange(!i.isOpen),...n,children:e})}),G_=le.forwardRef(({className:t,align:e="center",sideOffset:r=4,children:n,...a},i)=>{const o=y.useContext(DF),l=y.useRef(null);if(y.useEffect(()=>{const u=d=>{l.current&&!l.current.contains(d.target)&&(o==null||o.onOpenChange(!1))};if(o!=null&&o.isOpen)return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[o==null?void 0:o.isOpen,o==null?void 0:o.onOpenChange]),!(o!=null&&o.isOpen))return null;const c={start:"left-0",center:"left-1/2 transform -translate-x-1/2",end:"right-0"};return s.jsx("div",{ref:u=>{l.current=u,i&&(typeof i=="function"?i(u):i.current=u)},className:qt("absolute z-50 w-72 rounded-md border bg-white p-4 shadow-md",`top-full mt-${r}`,c[e],t),...a,children:n})});V_.displayName="Popover";W_.displayName="PopoverTrigger";G_.displayName="PopoverContent";hp.register(ew,tw,c0,bu,l0,xh,K3,YE,KE);const tlt=()=>{const[t,e]=y.useState({marges:[],resumeMarges:{}}),[r,n]=y.useState({}),[a,i]=y.useState({}),[o,l]=y.useState({}),[c,u]=y.useState(!1),[d,f]=y.useState("marges"),[A,h]=y.useState(lq(new Date,12)),[m,p]=y.useState(new Date),[g,x]=y.useState(15),[v,b]=y.useState({debut:!1,fin:!1}),C=async()=>{u(!0);try{const E={dateDebut:on(A,"yyyy-MM-dd"),dateFin:on(m,"yyyy-MM-dd")};switch(d){case"marges":const _=await Jot({...E,seuilMarge:g});e(_);break;case"inventaire":const k=await elt(E);n(k);break;case"heures":const D=await Yot(E);i(D);break;case"achats":const S=await Xot(E);l(S);break}}catch{ve.error("Erreur lors du chargement des données")}finally{u(!1)}};y.useEffect(()=>{C()},[d,A,m,g]);const j=()=>s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(jr,{htmlFor:"dateDebut",children:"Date de début"}),s.jsxs(V_,{open:v.debut,onOpenChange:E=>b(_=>({..._,debut:E})),children:[s.jsx(W_,{asChild:!0,children:s.jsxs(Xe,{variant:"outline",className:`w-full justify-start text-left font-normal ${!A&&"text-muted-foreground"}`,children:[s.jsx(Il,{className:"mr-2 h-4 w-4"}),A?on(A,"PPP",{locale:Un}):"Sélectionner une date"]})}),s.jsx(G_,{className:"w-auto p-0",align:"start",children:s.jsx(z_,{mode:"single",selected:A,onSelect:E=>{h(E),b(_=>({..._,debut:!1}))},disabled:E=>E>new Date||E<new Date("1900-01-01"),initialFocus:!0})})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(jr,{htmlFor:"dateFin",children:"Date de fin"}),s.jsxs(V_,{open:v.fin,onOpenChange:E=>b(_=>({..._,fin:E})),children:[s.jsx(W_,{asChild:!0,children:s.jsxs(Xe,{variant:"outline",className:`w-full justify-start text-left font-normal ${!m&&"text-muted-foreground"}`,children:[s.jsx(Il,{className:"mr-2 h-4 w-4"}),m?on(m,"PPP",{locale:Un}):"Sélectionner une date"]})}),s.jsx(G_,{className:"w-auto p-0",align:"start",children:s.jsx(z_,{mode:"single",selected:m,onSelect:E=>{p(E),b(_=>({..._,fin:!1}))},disabled:E=>E>new Date||E<new Date("1900-01-01"),initialFocus:!0})})]})]}),s.jsx("div",{className:"flex-none",children:s.jsxs(Xe,{onClick:()=>Zot(d,{dateDebut:on(A,"yyyy-MM-dd"),dateFin:on(m,"yyyy-MM-dd")}),className:"mt-6",children:[s.jsx(ku,{className:"mr-2 h-4 w-4"}),"Exporter CSV"]})})]}),w=()=>{var _,k,D,S,F,M,R,U,z,Q;const E={labels:((_=t.marges)==null?void 0:_.map(H=>H.numero))||[],datasets:[{label:"Taux de marge (%)",data:((k=t.marges)==null?void 0:k.map(H=>H.tauxMarge))||[],backgroundColor:H=>H.parsed.y<g?"rgba(239, 68, 68, 0.6)":"rgba(34, 197, 94, 0.6)",borderColor:H=>H.parsed.y<g?"rgba(239, 68, 68, 1)":"rgba(34, 197, 94, 1)",borderWidth:1}]};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-4 items-end",children:s.jsxs("div",{className:"flex-1",children:[s.jsx(jr,{htmlFor:"seuilMarge",children:"Seuil d'alerte marge (%)"}),s.jsx(Ur,{id:"seuilMarge",type:"number",value:g,onChange:H=>x(parseFloat(H.target.value)||0),placeholder:"15",className:"mt-1"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Marge Moyenne"}),s.jsx(S4,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[((S=(D=t.resumeMarges)==null?void 0:D.margeMoyenne)==null?void 0:S.toFixed(1))||0,"%"]})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Affaires Positives"}),s.jsx(S4,{className:"h-4 w-4 text-green-500"})]}),s.jsx(nr,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:((F=t.resumeMarges)==null?void 0:F.nombreAffairesPositives)||0})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Affaires Négatives"}),s.jsx(kae,{className:"h-4 w-4 text-red-500"})]}),s.jsx(nr,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:((M=t.resumeMarges)==null?void 0:M.nombreAffairesNegatives)||0})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Marge Max"}),s.jsx(N4,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(nr,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[((U=(R=t.resumeMarges)==null?void 0:R.margeMaximale)==null?void 0:U.toFixed(1))||0,"%"]})})]})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{children:[s.jsx(Br,{children:"Analyse des Marges par Affaire"}),s.jsxs(fm,{children:["Répartition des taux de marge (seuil d'alerte : ",g,"%)"]})]}),s.jsx(nr,{children:((z=t.marges)==null?void 0:z.length)>0?s.jsx("div",{className:"h-80",children:s.jsx(jte,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Taux de marge (%)"}}}}})}):s.jsx("p",{className:"text-center text-muted-foreground",children:"Aucune donnée disponible"})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{children:[s.jsx(Br,{children:"Affaires en Alerte"}),s.jsxs(fm,{children:["Affaires avec un taux de marge inférieur à ",g,"%"]})]}),s.jsx(nr,{children:s.jsx("div",{className:"space-y-2",children:((Q=t.marges)==null?void 0:Q.filter(H=>H.alerteMarge).map(H=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wu,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[H.numero," - ",H.libelle]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:H.client})]})]}),s.jsxs(Kn,{variant:H.tauxMarge<0?"destructive":"secondary",children:[H.tauxMarge.toFixed(1),"%"]})]},H.affaireId)))||s.jsx("p",{className:"text-center text-muted-foreground",children:"Aucune affaire en alerte"})})})]})]})},N=()=>{var E,_,k,D,S;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Articles Actifs"}),s.jsx(Qj,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(nr,{children:s.jsx("div",{className:"text-2xl font-bold",children:((_=(E=r.articlesStats)==null?void 0:E._count)==null?void 0:_.id)||0})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Valeur Stock"}),s.jsx(nP,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(nr,{children:s.jsx("div",{className:"text-2xl font-bold",children:((k=r.valeurStock)==null?void 0:k.toLocaleString("fr-FR",{style:"currency",currency:"EUR"}))||"0 €"})})]}),s.jsxs(Kt,{children:[s.jsxs(Er,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Br,{className:"text-sm font-medium",children:"Alertes Stock"}),s.jsx(wu,{className:"h-4 w-4 text-red-500"})]}),s.jsx(nr,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:((D=r.alertesStock)==null?void 0:D.length)||0})})]})]}),((S=r.alertesStock)==null?void 0:S.length)>0&&s.jsxs(Kt,{children:[s.jsxs(Er,{children:[s.jsx(Br,{children:"Articles en Rupture de Stock"}),s.jsx(fm,{children:"Articles dont le stock actuel est inférieur au stock minimum"})]}),s.jsx(nr,{children:s.jsx("div",{className:"space-y-2",children:r.alertesStock.map(F=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wu,{className:"h-5 w-5 text-red-500"}),s.jsx("div",{children:s.jsxs("p",{className:"font-medium",children:[F.code," - ",F.designation]})})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-sm font-medium",children:["Stock: ",F.stockActuel," / Min: ",F.stockMinimum]})})]},F.id))})})]})]})};return s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analyses Avancées"}),s.jsx("p",{className:"text-muted-foreground",children:"Analyses détaillées et indicateurs de performance"})]}),s.jsx(j,{}),s.jsxs(j0,{value:d,onValueChange:f,className:"space-y-6",children:[s.jsxs(C0,{className:"grid w-full grid-cols-4",children:[s.jsx(Vi,{value:"marges",children:"Analyse des Marges"}),s.jsx(Vi,{value:"inventaire",children:"Inventaire"}),s.jsx(Vi,{value:"heures",children:"Temps de Travail"}),s.jsx(Vi,{value:"achats",children:"Achats"})]}),s.jsx(Wi,{value:"marges",className:"space-y-6",children:s.jsx(w,{})}),s.jsx(Wi,{value:"inventaire",className:"space-y-6",children:s.jsx(N,{})}),s.jsx(Wi,{value:"heures",className:"space-y-6",children:s.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[s.jsx(rP,{className:"h-12 w-12 mx-auto mb-4"}),s.jsx("p",{children:"Analyse des temps de travail - En cours de développement"})]})}),s.jsx(Wi,{value:"achats",className:"space-y-6",children:s.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[s.jsx(N4,{className:"h-12 w-12 mx-auto mb-4"}),s.jsx("p",{children:"Analyse des achats - En cours de développement"})]})})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{children:"Chargement des données..."})]})})]})},_A={async exportAffaires(){var t,e;try{const r=await Ee.get("/migration/export/affaires",{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");return a.href=n,a.setAttribute("download",`affaires_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n),{success:!0,message:"Export des affaires terminé"}}catch(r){throw console.error("Erreur lors de l'export des affaires:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de l'export")}},async exportArticles(){var t,e;try{const r=await Ee.get("/migration/export/articles",{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");return a.href=n,a.setAttribute("download",`articles_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n),{success:!0,message:"Export des articles terminé"}}catch(r){throw console.error("Erreur lors de l'export des articles:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de l'export")}},async exportBdc(){var t,e;try{const r=await Ee.get("/migration/export/bdc",{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");return a.href=n,a.setAttribute("download",`bdc_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n),{success:!0,message:"Export des BDC terminé"}}catch(r){throw console.error("Erreur lors de l'export des BDC:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de l'export")}},async downloadArticlesTemplate(){var t,e;try{const r=await Ee.get("/migration/template/articles",{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");return a.href=n,a.setAttribute("download","modele_articles.xlsx"),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n),{success:!0,message:"Modèle téléchargé"}}catch(r){throw console.error("Erreur lors du téléchargement du modèle:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors du téléchargement")}},async downloadAffairesTemplate(){var t,e;try{const r=await Ee.get("/migration/template/affaires",{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");return a.href=n,a.setAttribute("download","modele_affaires.xlsx"),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n),{success:!0,message:"Modèle téléchargé"}}catch(r){throw console.error("Erreur lors du téléchargement du modèle:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors du téléchargement")}},async importArticles(t){var e,r;try{const n=new FormData;return n.append("file",t),(await Ee.post("/migration/import/articles",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Erreur lors de l'import des articles:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de l'import")}},async importAffaires(t){var e,r;try{const n=new FormData;return n.append("file",t),(await Ee.post("/migration/import/affaires",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Erreur lors de l'import des affaires:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de l'import")}}},rlt=()=>{const[t,e]=y.useState({}),[r,n]=y.useState({}),[a,i]=y.useState({}),o=async h=>{e(m=>({...m,[h]:!0}));try{let m;switch(h){case"affaires":m=await _A.exportAffaires();break;case"articles":m=await _A.exportArticles();break;case"bdc":m=await _A.exportBdc();break;default:throw new Error("Type d'export non supporté")}i(p=>({...p,[`export_${h}`]:{type:"success",message:m.message}})),setTimeout(()=>{i(p=>{const g={...p};return delete g[`export_${h}`],g})},3e3)}catch(m){console.error(`Erreur export ${h}:`,m),i(p=>({...p,[`export_${h}`]:{type:"error",message:m.message}}))}finally{e(m=>({...m,[h]:!1}))}},l=async h=>{e(m=>({...m,[`template_${h}`]:!0}));try{let m;switch(h){case"articles":m=await _A.downloadArticlesTemplate();break;case"affaires":m=await _A.downloadAffairesTemplate();break;default:throw new Error("Type de modèle non supporté")}i(p=>({...p,[`template_${h}`]:{type:"success",message:m.message}})),setTimeout(()=>{i(p=>{const g={...p};return delete g[`template_${h}`],g})},3e3)}catch(m){console.error(`Erreur téléchargement modèle ${h}:`,m),i(p=>({...p,[`template_${h}`]:{type:"error",message:m.message}}))}finally{e(m=>({...m,[`template_${h}`]:!1}))}},c=(h,m)=>{const p=m.target.files[0];p&&n(g=>({...g,[h]:p}))},u=async h=>{const m=r[h];if(!m){i(p=>({...p,[`import_${h}`]:{type:"error",message:"Veuillez sélectionner un fichier"}}));return}e(p=>({...p,[`import_${h}`]:!0}));try{let p;switch(h){case"articles":p=await _A.importArticles(m);break;case"affaires":p=await _A.importAffaires(m);break;default:throw new Error("Type d'import non supporté")}i(g=>({...g,[`import_${h}`]:{type:"success",message:p.message,details:p.details}})),n(g=>({...g,[h]:null}))}catch(p){console.error(`Erreur import ${h}:`,p),i(g=>({...g,[`import_${h}`]:{type:"error",message:p.message}}))}finally{e(p=>({...p,[`import_${h}`]:!1}))}},d=[{key:"affaires",title:"Affaires",description:"Exporter toutes les affaires avec leurs détails",icon:zi,color:"blue"},{key:"articles",title:"Articles / Inventaire",description:"Exporter tous les articles avec stocks et prix",icon:Sl,color:"green"},{key:"bdc",title:"Bons de Commande",description:"Exporter tous les BDC avec leurs relations",icon:jS,color:"purple"}],f=[{key:"articles",title:"Articles",description:"Importer/Mettre à jour des articles depuis Excel",color:"green"},{key:"affaires",title:"Affaires",description:"Importer/Mettre à jour des affaires depuis Excel",color:"blue"}],A=({result:h})=>{var m;return h?s.jsxs("div",{className:`mt-3 p-3 rounded-lg border ${h.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[h.type==="success"?s.jsx(Gr,{size:16}):s.jsx(Ls,{size:16}),s.jsx("span",{className:"text-sm font-medium",children:h.message})]}),h.details&&s.jsxs("div",{className:"mt-2 text-xs",children:[s.jsxs("p",{children:["Créés: ",h.details.created,", Mis à jour: ",h.details.updated]}),((m=h.details.errors)==null?void 0:m.length)>0&&s.jsxs("div",{className:"mt-1",children:[s.jsx("p",{className:"font-medium",children:"Erreurs:"}),s.jsxs("ul",{className:"list-disc list-inside",children:[h.details.errors.slice(0,3).map((p,g)=>s.jsx("li",{children:p},g)),h.details.errors.length>3&&s.jsxs("li",{children:["... et ",h.details.errors.length-3," autres erreurs"]})]})]})]})]}):null};return s.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(OG,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Migration Excel"}),s.jsx("p",{className:"text-gray-600",children:"Import et export de données vers/depuis Excel"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Va,{className:"text-green-600",size:24}),s.jsx("span",{children:"Export vers Excel"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Télécharger vos données au format Excel"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(h=>{const m=h.icon,p=t[h.key],g=a[`export_${h.key}`];return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(m,{className:`text-${h.color}-600`,size:24}),s.jsx("h3",{className:"font-semibold text-gray-900",children:h.title})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h.description}),s.jsxs("button",{onClick:()=>o(h.key),disabled:p,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${p?"bg-gray-100 text-gray-400 cursor-not-allowed":`bg-${h.color}-600 hover:bg-${h.color}-700 text-white`}`,children:[p?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-gray-600"}):s.jsx(r6,{size:16}),s.jsx("span",{children:p?"Export...":"Exporter"})]}),s.jsx(A,{result:g})]},h.key)})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Rd,{className:"text-blue-600",size:24}),s.jsx("span",{children:"Import depuis Excel"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Charger des données depuis des fichiers Excel"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map(h=>{const m=t[`template_${h.key}`],p=t[`import_${h.key}`],g=a[`template_${h.key}`],x=a[`import_${h.key}`],v=r[h.key];return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(r6,{className:`text-${h.color}-600`,size:24}),s.jsx("h3",{className:"font-semibold text-gray-900",children:h.title})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h.description}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("button",{onClick:()=>l(h.key),disabled:m,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:[m?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-gray-600"}):s.jsx(Va,{size:16}),s.jsx("span",{children:m?"Téléchargement...":"Télécharger le modèle"})]}),s.jsx(A,{result:g})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:b=>c(h.key,b),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),v&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Fichier sélectionné: ",v.name]})]}),s.jsxs("button",{onClick:()=>u(h.key),disabled:p||!v,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${p||!v?"bg-gray-100 text-gray-400 cursor-not-allowed":`bg-${h.color}-600 hover:bg-${h.color}-700 text-white`}`,children:[p?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-gray-600"}):s.jsx(Rd,{size:16}),s.jsx("span",{children:p?"Import...":"Importer"})]}),s.jsx(A,{result:x})]},h.key)})})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Ls,{className:"text-blue-600 mt-0.5",size:20}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Instructions d'utilisation :"}),s.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"Pour l'import, téléchargez d'abord le modèle Excel correspondant"}),s.jsx("li",{children:"Remplissez le modèle avec vos données en respectant les colonnes obligatoires (*)"}),s.jsx("li",{children:"Seuls les fichiers Excel (.xlsx) sont acceptés"}),s.jsx("li",{children:"Les imports mettent à jour les enregistrements existants ou en créent de nouveaux"}),s.jsx("li",{children:"Vérifiez les messages de résultat pour détecter d'éventuelles erreurs"})]})]})]})})]})},nlt=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState("all"),[d,f]=y.useState("all"),A=async()=>{i(!0),l(null);try{const[x,v]=await Promise.all([Sd.getNotifications(),Sd.getNotificationStats()]);e(x),n(v)}catch(x){console.error("Erreur chargement données:",x),l(x.message)}finally{i(!1)}};y.useEffect(()=>{A()},[]);const h=t.filter(x=>{const v=c==="all"||x.type===c,b=d==="all"||x.priority===d;return v&&b}),m=x=>{switch(x){case"stock_faible":return s.jsx(Sl,{size:20,className:"text-orange-600"});case"echeance_affaire":return s.jsx(il,{size:20,className:"text-blue-600"});case"bdc_en_attente":return s.jsx(jS,{size:20,className:"text-purple-600"});case"pointage_manquant":return s.jsx(wn,{size:20,className:"text-yellow-600"});default:return s.jsx(Io,{size:20,className:"text-gray-600"})}},p=x=>{switch(x){case"urgent":return"border-l-red-500 bg-red-50";case"high":return"border-l-orange-500 bg-orange-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},g=x=>{switch(x){case"urgent":return s.jsx(wo,{size:16,className:"text-red-600"});case"high":return s.jsx(FG,{size:16,className:"text-orange-600"});case"medium":return s.jsx(Io,{size:16,className:"text-yellow-600"});case"low":return s.jsx(F2,{size:16,className:"text-blue-600"});default:return s.jsx(Io,{size:16,className:"text-gray-600"})}};return a?s.jsx("div",{className:"max-w-6xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-gray-300 border-t-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des notifications..."})]})}):o?s.jsx("div",{className:"max-w-6xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wo,{className:"mx-auto text-red-500 mb-4",size:48}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erreur de chargement"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o}),s.jsx("button",{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Réessayer"})]})}):s.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fd,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),s.jsxs("p",{className:"text-gray-600",children:[t.length," notification(s) active(s)"]})]})]}),s.jsxs("button",{onClick:A,disabled:a,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:[s.jsx(_a,{size:16,className:a?"animate-spin":""}),s.jsx("span",{children:"Actualiser"})]})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.total})]}),s.jsx(Fd,{className:"text-blue-500",size:24})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Urgentes"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.byPriority.urgent||0})]}),s.jsx(wo,{className:"text-red-500",size:24})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Stock faible"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.byType.stock_faible||0})]}),s.jsx(Sl,{className:"text-orange-500",size:24})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Échéances"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.byType.echeance_affaire||0})]}),s.jsx(il,{className:"text-blue-500",size:24})]})})]}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(jc,{className:"text-gray-400",size:20}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type :"}),s.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"Tous"}),s.jsx("option",{value:"stock_faible",children:"Stock faible"}),s.jsx("option",{value:"echeance_affaire",children:"Échéances"}),s.jsx("option",{value:"bdc_en_attente",children:"BDC en attente"}),s.jsx("option",{value:"pointage_manquant",children:"Pointages manquants"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priorité :"}),s.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"Toutes"}),s.jsx("option",{value:"urgent",children:"Urgente"}),s.jsx("option",{value:"high",children:"Élevée"}),s.jsx("option",{value:"medium",children:"Moyenne"}),s.jsx("option",{value:"low",children:"Faible"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[h.length," résultat(s)"]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:h.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Fd,{className:"mx-auto text-gray-300 mb-4",size:48}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune notification"}),s.jsx("p",{className:"text-gray-600",children:c!=="all"||d!=="all"?"Aucune notification correspond aux filtres sélectionnés.":"Aucune notification active pour le moment."})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:h.map(x=>s.jsx("div",{className:`p-4 border-l-4 hover:bg-gray-50 transition-colors ${p(x.priority)}`,children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:m(x.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:x.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[g(x.priority),s.jsx("span",{className:"text-sm text-gray-500",children:Sd.formatTimeAgo(x.createdAt)})]})]}),s.jsx("p",{className:"text-gray-700 mb-3",children:x.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.priority==="urgent"?"bg-red-100 text-red-800":x.priority==="high"?"bg-orange-100 text-orange-800":x.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:Sd.getTypeLabel(x.type)}),s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.priority==="urgent"?"bg-red-100 text-red-800":x.priority==="high"?"bg-orange-100 text-orange-800":x.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:["Priorité ",x.priority==="urgent"?"urgente":x.priority==="high"?"élevée":x.priority==="medium"?"moyenne":"faible"]})]}),x.data&&s.jsxs("div",{className:"text-sm text-gray-500",children:[x.type==="stock_faible"&&s.jsxs("span",{children:["Stock: ",x.data.stockActuel]}),x.type==="echeance_affaire"&&s.jsxs("span",{children:["Dans ",x.data.joursRestants," jour(s)"]}),x.type==="bdc_en_attente"&&s.jsxs("span",{children:["Depuis ",x.data.joursAttente," jour(s)"]})]})]})]})]})},x.id))})})]})},qw="/api/plannings",slt=async()=>{try{const t=await Ee.get(qw);return console.log("Réponse getAllPlannings:",t),t.data}catch(t){throw console.error("Erreur getAllPlannings:",t),t}},alt=async t=>{try{const e=await Ee.get(`${qw}/${t}`);return console.log(`Réponse getPlanningById ${t}:`,e),e.data.planning}catch(e){throw console.error(`Erreur getPlanningById ${t}:`,e),e}},ilt=async t=>{try{console.log("Données du planning à créer:",t);const e=await Ee.post(qw,t);return console.log("Réponse createPlanning:",e),e.data}catch(e){throw console.error("Erreur createPlanning:",e),e}},olt=async(t,e)=>{try{console.log(`Mise à jour planning ${t} - données:`,e);const r=await Ee.put(`${qw}/${t}`,e);return console.log(`Réponse updatePlanning ${t}:`,r),r.data}catch(r){throw console.error(`Erreur updatePlanning ${t}:`,r),r}},llt=async t=>{try{const e=await Ee.delete(`${qw}/${t}`);return console.log(`Réponse deletePlanning ${t}:`,e),e.data}catch(e){throw console.error(`Erreur deletePlanning ${t}:`,e),e}},NN=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",Lne=({status:t})=>{let e,r;switch(t){case"En cours":e="blue",r=s.jsx(wn,{size:14});break;case"Terminé":e="green",r=s.jsx(PG,{size:14});break;case"En attente":e="yellow",r=s.jsx(wn,{size:14});break;default:e="gray",r=null}return s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e==="blue"?"bg-blue-100 text-blue-800":e==="green"?"bg-green-100 text-green-800":e==="yellow"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[r&&s.jsx("span",{className:"mr-1",children:r}),t]})},clt=({planning:t,onEdit:e,onDelete:r,...n})=>s.jsxs(Hr,{withBorder:!0,shadow:"sm",radius:"md",padding:"lg",...n,children:[s.jsx(Hr.Section,{withBorder:!0,p:"md",children:s.jsxs(Bt,{justify:"space-between",wrap:"nowrap",children:[s.jsx(He,{fw:700,truncate:!0,children:t.titre}),s.jsxs(Ar,{position:"bottom-end",withArrow:!0,shadow:"md",children:[s.jsx(Ar.Target,{children:s.jsx("button",{className:"p-1 rounded hover:bg-gray-100","aria-label":"Options",children:s.jsx($k,{size:18})})}),s.jsxs(Ar.Dropdown,{children:[s.jsx(Ar.Item,{leftSection:s.jsx(ha,{size:14}),onClick:()=>e(t),children:"Afficher les détails"}),s.jsx(Ar.Item,{leftSection:s.jsx(Po,{size:14}),onClick:()=>e(t),children:"Modifier"}),s.jsx(Ar.Item,{leftSection:s.jsx(Uk,{size:14}),children:"Dupliquer"}),s.jsx(Ar.Divider,{}),s.jsx(Ar.Item,{leftSection:s.jsx(Va,{size:14}),children:"Exporter"}),s.jsx(Ar.Divider,{}),s.jsx(Ar.Item,{leftSection:s.jsx(Zn,{size:14}),color:"red",onClick:()=>r(t),children:"Supprimer"})]})]})]})}),s.jsxs(ut,{mt:"md",children:[s.jsx(He,{size:"sm",lineClamp:2,mb:"md",children:t.description||"Aucune description"}),s.jsx(Bt,{gap:"xs",mb:"md",children:s.jsx(Lne,{status:t.statut})}),s.jsx(wi,{my:"sm"}),s.jsxs(Bt,{position:"apart",children:[s.jsxs("div",{children:[s.jsx(He,{size:"xs",c:"dimmed",children:"Date de début"}),s.jsx(He,{size:"sm",fw:500,children:NN(t.dateDebut)})]}),s.jsxs("div",{children:[s.jsx(He,{size:"xs",c:"dimmed",ta:"right",children:"Date de fin"}),s.jsx(He,{size:"sm",fw:500,ta:"right",children:NN(t.dateFin)||"-"})]})]}),t.responsable&&s.jsxs(s.Fragment,{children:[s.jsx(wi,{my:"sm"}),s.jsxs(Bt,{children:[s.jsx(Ch,{color:"blue",radius:"xl",size:"sm",children:t.responsable.nom?t.responsable.nom.charAt(0):"U"}),s.jsxs("div",{children:[s.jsx(He,{size:"xs",c:"dimmed",children:"Responsable"}),s.jsx(He,{size:"sm",children:t.responsable.nom||"Non assigné"})]})]})]}),s.jsx(Bt,{mt:"lg",justify:"flex-end",children:s.jsx(Xe,{variant:"light",size:"xs",onClick:()=>e(t),children:"Modifier"})})]})]});function ult(){const[t,e]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState(!0),[o,l]=y.useState(null),[c,u]=y.useState(null),[d,{open:f,close:A}]=lP(!1),[h,m]=y.useState("list"),[p,g]=y.useState(""),[x,v]=y.useState("all"),[b,C]=y.useState("desc"),[j,w]=y.useState({page:1,limit:10,total:0}),N=Fr(),E=async()=>{i(!0);try{const U=await slt({page:j.page,limit:j.limit,search:p,status:x!=="all"?x:void 0,sort:b});e(U.data),w(z=>({...z,total:U.total})),l(null)}catch(U){l("Erreur lors du chargement des plannings"),console.error(U)}finally{i(!1)}};y.useEffect(()=>{const U=setTimeout(()=>{E()},300);return()=>clearTimeout(U)},[j.page,p,x,b]);const _=U=>{w(z=>({...z,page:U}))},k=U=>{g(U),w(z=>({...z,page:1}))},D=U=>{v(U),w(z=>({...z,page:1}))},S=()=>{C(U=>U==="asc"?"desc":"asc"),w(U=>({...U,page:1}))},F=U=>{u(U),f()},M=async()=>{if(c)try{await llt(c._id);try{Vt.show({title:"Planning supprimé",message:`Le planning "${c.titre}" a été supprimé avec succès`,color:"green"})}catch(U){console.error("Erreur lors de l'affichage de la notification",U)}await E(),A()}catch(U){l("Erreur lors de la suppression du planning"),console.error(U);try{Vt.show({title:"Erreur",message:"Impossible de supprimer le planning",color:"red"})}catch(z){console.error("Erreur lors de l'affichage de la notification",z)}}},R=U=>{N(`/plannings/${U._id}`)};return a?s.jsx(ut,{className:"flex justify-center items-center py-16",children:s.jsx(Zi,{size:"lg"})}):s.jsxs("div",{children:[s.jsxs(Hr,{p:"lg",withBorder:!0,shadow:"sm",radius:"md",mb:"lg",children:[s.jsxs(MP,{justify:"space-between",align:"center",mb:"md",children:[s.jsx(Kr,{children:"Plannings"}),s.jsx(LinkButton,{to:"/plannings/nouveau",leftSection:s.jsx(Jn,{size:16}),children:"Nouveau Planning"})]}),s.jsx(qn,{defaultValue:"all",mb:"lg",children:s.jsxs(qn.List,{children:[s.jsx(qn.Tab,{value:"all",leftSection:s.jsx(_B,{size:16}),children:"Tous les plannings"}),s.jsx(qn.Tab,{value:"recent",leftSection:s.jsx(_B,{size:16}),children:"Récents"}),s.jsx(qn.Tab,{value:"upcoming",leftSection:s.jsx(_B,{size:16}),children:"À venir"})]})}),s.jsxs(Bt,{mb:"lg",children:[s.jsx(dn,{placeholder:"Rechercher...",leftSection:s.jsx(Ol,{size:16}),style:{flex:1},value:p,onChange:U=>k(U.currentTarget.value)}),s.jsx(Wr,{placeholder:"Statut",data:[{value:"all",label:"Tous les statuts"},{value:"En cours",label:"En cours"},{value:"Terminé",label:"Terminé"},{value:"En attente",label:"En attente"}],leftSection:s.jsx(jc,{size:16}),value:x,onChange:D,w:200}),s.jsx(Ai,{label:b==="asc"?"Plus récent d'abord":"Plus ancien d'abord",children:s.jsx(Dn,{variant:"subtle",onClick:S,children:b==="asc"?s.jsx(y0e,{size:18}):s.jsx(w0e,{size:18})})}),s.jsx(bk,{data:[{value:"list",label:s.jsx(LG,{size:16})},{value:"grid",label:s.jsx(MG,{size:16})}],value:h,onChange:m})]}),o&&s.jsx(Hr,{shadow:"sm",withBorder:!0,mb:"md",className:"bg-red-50",children:s.jsx(He,{color:"red",children:o})}),r.length===0?s.jsxs(Hn,{shadow:"sm",withBorder:!0,p:"xl",radius:"md",className:"text-center",children:[s.jsx(He,{size:"lg",mb:"md",children:"Aucun planning disponible"}),s.jsx(Xe,{component:Xi,to:"/plannings/nouveau",variant:"outline",leftSection:s.jsx(Jn,{size:16}),children:"Créer un planning"})]}):h==="list"?s.jsx(ut,{style:{overflowX:"auto"},children:s.jsxs(Ye,{striped:!0,highlightOnHover:!0,verticalSpacing:"md",children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"Titre"}),s.jsx(Ye.Th,{children:"Description"}),s.jsx(Ye.Th,{children:"Date début"}),s.jsx(Ye.Th,{children:"Date fin"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{style:{textAlign:"right"},children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:r.map(U=>s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:s.jsx(He,{fw:500,children:U.titre})}),s.jsx(Ye.Td,{children:U.description?U.description.length>30?`${U.description.substring(0,30)}...`:U.description:"-"}),s.jsx(Ye.Td,{children:NN(U.dateDebut)}),s.jsx(Ye.Td,{children:NN(U.dateFin)}),s.jsx(Ye.Td,{children:s.jsx(Lne,{status:U.statut})}),s.jsx(Ye.Td,{style:{textAlign:"right"},children:s.jsxs(Bt,{gap:"xs",justify:"flex-end",children:[s.jsx(TooltipWithRef,{label:"Modifier",children:s.jsx(ActionIconWithRef,{variant:"subtle",color:"blue",onClick:()=>R(U),children:s.jsx(Po,{size:16,stroke:1.5})})}),s.jsxs(Ar,{position:"bottom-end",withArrow:!0,shadow:"md",children:[s.jsx(Ar.Target,{children:s.jsx(ActionIconWithRef,{variant:"subtle",children:s.jsx($k,{size:16,stroke:1.5})})}),s.jsxs(Ar.Dropdown,{children:[s.jsx(Ar.Item,{leftSection:s.jsx(ha,{size:14}),children:"Afficher les détails"}),s.jsx(Ar.Item,{leftSection:s.jsx(Uk,{size:14}),children:"Dupliquer"}),s.jsx(Ar.Divider,{}),s.jsx(Ar.Item,{leftSection:s.jsx(Zn,{size:14}),color:"red",onClick:()=>F(U),children:"Supprimer"})]})]})]})})]},U._id))})]})}):s.jsx(yk,{cols:{base:1,xs:2,md:3,xl:4},spacing:"lg",children:r.map(U=>s.jsx(clt,{planning:U,onEdit:R,onDelete:F},U._id))})]}),s.jsxs(fa,{opened:d,onClose:A,title:"Confirmer la suppression",centered:!0,children:[s.jsxs(He,{mb:"md",children:['Êtes-vous sûr de vouloir supprimer le planning "',c==null?void 0:c.titre,'" ? Cette action est irréversible.']}),s.jsxs(Bt,{justify:"flex-end",mt:"xl",children:[s.jsx(Xe,{variant:"outline",onClick:A,leftSection:s.jsx(ls,{size:16}),children:"Annuler"}),s.jsx(Xe,{color:"red",onClick:M,leftSection:s.jsx(Zn,{size:16}),children:"Supprimer"})]})]}),s.jsx(Ei,{total:Math.ceil(j.total/j.limit),value:j.page,onChange:_,mt:"md",position:"center"})]})}function D9(){const{id:t}=Ka(),e=Fr(),[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(null),[c,u]=y.useState(0),[d,f]=y.useState(!1),A=!!t,h=[{value:"1",label:"Jean Dupont"},{value:"2",label:"Marie Durand"},{value:"3",label:"Philippe Martin"},{value:"4",label:"Sophie Bernard"}],m=[{value:"1",label:"Jean Dupont"},{value:"2",label:"Marie Durand"},{value:"3",label:"Philippe Martin"},{value:"4",label:"Sophie Bernard"},{value:"5",label:"Thomas Robert"},{value:"6",label:"Isabelle Petit"},{value:"7",label:"Luc Moreau"},{value:"8",label:"Laura Simon"}],p=Fl({initialValues:{titre:localStorage.getItem("planning_titre")||"",description:localStorage.getItem("planning_description")||"",dateDebut:localStorage.getItem("planning_dateDebut")?new Date(localStorage.getItem("planning_dateDebut")):null,dateFin:localStorage.getItem("planning_dateFin")?new Date(localStorage.getItem("planning_dateFin")):null,statut:localStorage.getItem("planning_statut")||"En attente",responsable:localStorage.getItem("planning_responsable")||"",participants:localStorage.getItem("planning_participants")?JSON.parse(localStorage.getItem("planning_participants")):[],priorite:localStorage.getItem("planning_priorite")||"Normale",lieu:localStorage.getItem("planning_lieu")||"",notes:localStorage.getItem("planning_notes")||""},validate:{titre:C=>!C||C.trim().length<3?"Le titre doit contenir au moins 3 caractères":null,dateDebut:C=>C?null:"La date de début est requise"}});y.useEffect(()=>{localStorage.setItem("planning_titre",p.values.titre),localStorage.setItem("planning_description",p.values.description),localStorage.setItem("planning_statut",p.values.statut),localStorage.setItem("planning_priorite",p.values.priorite),localStorage.setItem("planning_responsable",p.values.responsable),localStorage.setItem("planning_participants",JSON.stringify(p.values.participants)),localStorage.setItem("planning_lieu",p.values.lieu),localStorage.setItem("planning_notes",p.values.notes),p.values.dateDebut&&localStorage.setItem("planning_dateDebut",p.values.dateDebut.toString()),p.values.dateFin&&localStorage.setItem("planning_dateFin",p.values.dateFin.toString()),localStorage.setItem("planning_currentStep",c.toString())},[p.values,c]),y.useEffect(()=>{const C=localStorage.getItem("planning_currentStep");C!==null&&u(parseInt(C,10))},[]),y.useEffect(()=>{A&&(async()=>{var j;try{i(!0);const w=await alt(t);p.setValues({titre:w.titre||"",description:w.description||"",dateDebut:w.dateDebut?new Date(w.dateDebut):null,dateFin:w.dateFin?new Date(w.dateFin):null,statut:w.statut||"En attente",responsable:((j=w.responsable)==null?void 0:j._id)||"",participants:[],priorite:"Normale",lieu:"",notes:""}),l(null)}catch(w){l("Erreur lors du chargement du planning"),console.error(w),Vt.show({title:"Erreur",message:"Impossible de charger les informations du planning",color:"red"})}finally{i(!1)}})()},[t,A]);const g=async C=>{try{if(n(!0),l(null),!C.titre||!C.dateDebut){l("Le titre et la date de début sont requis");return}const j=C.dateDebut instanceof Date?C.dateDebut:new Date(C.dateDebut),w=C.dateFin instanceof Date?C.dateFin:C.dateFin?new Date(C.dateFin):void 0;if(isNaN(j.getTime())){l("La date de début n'est pas valide");return}if(w&&isNaN(w.getTime())){l("La date de fin n'est pas valide");return}const N={titre:C.titre,description:C.description||void 0,dateDebut:j,dateFin:w,statut:C.statut,responsable:C.responsable||void 0,lieu:C.lieu||void 0,notes:C.notes||void 0};if(A)try{await olt(t,N),Vt.show({title:"Planning mis à jour",message:"Le planning a été mis à jour avec succès",color:"green"}),e("/plannings")}catch(E){console.error("Erreur lors de la mise à jour du planning:",E),l(`Erreur lors de la mise à jour du planning: ${E.message||"Erreur inconnue"}`)}else try{await ilt(N),Vt.show({title:"Planning créé",message:"Le nouveau planning a été créé avec succès",color:"green"}),e("/plannings")}catch(E){console.error("Erreur lors de la création du planning:",E),l(`Erreur lors de la création du planning: ${E.message||"Erreur inconnue"}`)}}catch(j){console.error("Erreur générale:",j),l(`Erreur: ${j.message||"Une erreur inattendue est survenue"}`)}finally{n(!1)}},x=()=>{try{console.log("Bouton suivant cliqué, étape actuelle:",c),c===0?(p.values.titre||"").trim().length>=3?(p.clearErrors("titre"),setTimeout(()=>u(1),10)):p.setFieldError("titre","Le titre doit contenir au moins 3 caractères"):c===1?p.values.dateDebut?(p.clearErrors("dateDebut"),setTimeout(()=>u(2),10)):p.setFieldError("dateDebut","La date de début est requise"):c===2&&setTimeout(()=>u(3),10)}catch(C){console.error("Erreur lors du changement d'étape:",C)}},v=()=>u(C=>C>0?C-1:C),b=()=>{var C,j;return s.jsxs(Hn,{withBorder:!0,p:"lg",radius:"md",children:[s.jsxs(Bt,{mb:"md",children:[s.jsx(_2,{color:"blue",size:"lg",radius:"xl",children:s.jsx(il,{size:20})}),s.jsxs(ut,{children:[s.jsx(He,{fw:700,size:"lg",children:p.values.titre}),s.jsxs(He,{size:"sm",c:"dimmed",children:[p.values.dateDebut?`Du ${p.values.dateDebut.toLocaleDateString("fr-FR")}`:"Date non définie",p.values.dateFin?` au ${p.values.dateFin.toLocaleDateString("fr-FR")}`:""]})]})]}),s.jsx(wi,{mb:"md"}),s.jsxs(tt,{mb:"md",children:[s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",fw:500,children:"Statut"}),s.jsx(BadgeWithRef,{color:p.values.statut==="En cours"?"blue":p.values.statut==="Terminé"?"green":"yellow",children:p.values.statut})]}),s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",fw:500,children:"Priorité"}),s.jsx(BadgeWithRef,{color:p.values.priorite==="Haute"?"red":p.values.priorite==="Normale"?"blue":"green",children:p.values.priorite})]})]}),s.jsx(He,{size:"sm",fw:500,mb:"xs",children:"Description"}),s.jsx(He,{size:"sm",mb:"lg",style:{whiteSpace:"pre-wrap"},children:p.values.description||"Aucune description fournie"}),p.values.lieu&&s.jsxs(s.Fragment,{children:[s.jsx(He,{size:"sm",fw:500,mb:"xs",children:"Lieu"}),s.jsx(He,{size:"sm",mb:"lg",children:p.values.lieu})]}),s.jsxs(tt,{children:[s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",fw:500,mb:"xs",children:"Responsable"}),s.jsx(Bt,{children:p.values.responsable?s.jsxs(s.Fragment,{children:[s.jsx(Ch,{color:"blue",radius:"xl",size:"sm",children:((C=h.find(w=>w.value===p.values.responsable))==null?void 0:C.label.charAt(0))||"R"}),s.jsx(He,{size:"sm",children:((j=h.find(w=>w.value===p.values.responsable))==null?void 0:j.label)||"Non assigné"})]}):s.jsx(He,{size:"sm",c:"dimmed",children:"Non assigné"})})]}),s.jsxs(tt.Col,{span:6,children:[s.jsx(He,{size:"sm",fw:500,mb:"xs",children:"Participants"}),p.values.participants&&p.values.participants.length>0?s.jsxs(Bt,{children:[p.values.participants.slice(0,3).map(w=>{var N;return s.jsx(Ch,{color:"green",radius:"xl",size:"sm",children:((N=m.find(E=>E.value===w))==null?void 0:N.label.charAt(0))||"P"},w)}),p.values.participants.length>3&&s.jsxs(Ch,{radius:"xl",size:"sm",children:["+",p.values.participants.length-3]})]}):s.jsx(He,{size:"sm",c:"dimmed",children:"Aucun participant"})]})]})]})};return a?s.jsxs(ut,{p:"xl",className:"flex justify-center items-center",children:[s.jsx(Zi,{size:"lg"}),s.jsx(He,{mt:"md",children:"Chargement du planning..."})]}):s.jsx("div",{children:s.jsxs(Hr,{p:"lg",withBorder:!0,shadow:"sm",radius:"md",mb:"lg",children:[s.jsxs(Bt,{justify:"space-between",mb:"md",children:[s.jsx(Kr,{children:A?"Modifier le planning":"Nouveau planning"}),s.jsxs(Bt,{children:[s.jsx(ForwardRefButton,{variant:d?"filled":"light",onClick:()=>f(!d),leftSection:s.jsx(ha,{size:16}),children:"Aperçu"}),s.jsx(ForwardRefButton,{variant:"outline",leftSection:s.jsx(Ci,{size:16}),onClick:()=>e("/plannings"),children:"Retour"})]})]}),o&&s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),title:"Erreur",color:"red",mb:"md",children:o}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,md:d?6:12},children:s.jsxs("form",{onSubmit:p.onSubmit(g),children:[s.jsxs(wd,{active:c,onStepClick:u,mb:"xl",children:[s.jsx(wd.Step,{label:"Informations de base",description:"Titre et description",icon:s.jsx(Io,{size:18}),children:s.jsxs(ps,{spacing:"md",children:[s.jsx(dn,{required:!0,label:"Titre",placeholder:"Titre du planning",description:"Donnez un titre clair et concis à votre planning",...p.getInputProps("titre")}),s.jsx(Pl,{label:"Description",placeholder:"Description détaillée du planning",description:"Décrivez l'objectif et les détails du planning",autosize:!0,minRows:4,...p.getInputProps("description")}),s.jsxs(tt,{children:[s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Statut",placeholder:"Sélectionnez un statut",data:[{value:"En attente",label:"En attente"},{value:"En cours",label:"En cours"},{value:"Terminé",label:"Terminé"}],...p.getInputProps("statut")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Wr,{label:"Priorité",placeholder:"Sélectionnez une priorité",data:[{value:"Basse",label:"Basse"},{value:"Normale",label:"Normale"},{value:"Haute",label:"Haute"}],...p.getInputProps("priorite")})})]})]})}),s.jsxs(wd.Step,{label:"Dates",description:"Période du planning",icon:s.jsx(il,{size:18}),children:[s.jsxs(Hn,{p:"md",withBorder:!0,mb:"md",children:[s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6},children:s.jsx(ko,{required:!0,label:"Date de début",placeholder:"Sélectionnez une date",valueFormat:"DD/MM/YYYY",description:"Date de début du planning",...p.getInputProps("dateDebut"),clearable:!1})}),s.jsx(tt.Col,{span:{base:12,sm:6},children:s.jsx(ko,{label:"Date de fin",placeholder:"Sélectionnez une date",valueFormat:"DD/MM/YYYY",description:"Date de fin du planning (optionnelle)",...p.getInputProps("dateFin"),minDate:p.values.dateDebut?new Date(p.values.dateDebut):void 0,clearable:!0})})]}),p.values.dateDebut&&s.jsx(ut,{mt:"lg",children:s.jsx(_m,{getDayProps:C=>{if(!C)return{};const j=new Date(C);return p.values.dateDebut&&j.getDate()===new Date(p.values.dateDebut).getDate()&&j.getMonth()===new Date(p.values.dateDebut).getMonth()&&j.getFullYear()===new Date(p.values.dateDebut).getFullYear()?{style:{backgroundColor:"var(--mantine-color-blue-filled)"}}:p.values.dateFin&&j.getDate()===new Date(p.values.dateFin).getDate()&&j.getMonth()===new Date(p.values.dateFin).getMonth()&&j.getFullYear()===new Date(p.values.dateFin).getFullYear()?{style:{backgroundColor:"var(--mantine-color-blue-filled)"}}:p.values.dateDebut&&p.values.dateFin&&j>new Date(p.values.dateDebut)&&j<new Date(p.values.dateFin)?{style:{backgroundColor:"var(--mantine-color-blue-1)"}}:{}}})})]}),s.jsx(dn,{label:"Lieu",placeholder:"Lieu du planning (optionnel)",...p.getInputProps("lieu")})]}),s.jsxs(wd.Step,{label:"Participants",description:"Assignation des personnes",icon:s.jsx(Ji,{size:18}),children:[s.jsxs(tt,{children:[s.jsx(tt.Col,{span:{base:12,sm:6},children:s.jsx(Wr,{label:"Responsable",placeholder:"Sélectionnez un responsable",data:h,...p.getInputProps("responsable"),clearable:!0})}),s.jsx(tt.Col,{span:{base:12,sm:6},children:s.jsx(iS,{label:"Participants",placeholder:"Sélectionnez les participants",data:m,...p.getInputProps("participants"),clearable:!0,searchable:!0})})]}),s.jsx(Pl,{label:"Notes additionnelles",placeholder:"Notes ou commentaires (optionnel)",description:"Ajoutez des notes supplémentaires pour les participants",mt:"md",autosize:!0,minRows:3,...p.getInputProps("notes")})]}),s.jsx(wd.Completed,{children:s.jsx(Hn,{withBorder:!0,p:"xl",radius:"md",mb:"xl",children:s.jsxs(ps,{align:"center",spacing:"md",children:[s.jsx(_2,{size:80,radius:100,color:"green",children:s.jsx(Gr,{size:40})}),s.jsx(Kr,{order:2,children:"Prêt à finaliser !"}),s.jsxs(He,{ta:"center",size:"md",maw:500,children:["Vous avez complété toutes les étapes. Vérifiez les informations et cliquez sur",A?' "Mettre à jour"':' "Créer le planning"'," pour finaliser."]}),s.jsx(Bt,{mt:"xl",children:s.jsx(ForwardRefButton,{leftSection:s.jsx(kl,{size:16}),loading:r,type:"submit",size:"md",children:A?"Mettre à jour":"Créer le planning"})})]})})})]}),c!==3&&s.jsxs(Bt,{justify:"space-between",mt:"xl",children:[s.jsx(ForwardRefButton,{variant:"default",onClick:v,disabled:c===0,children:"Précédent"}),s.jsx(ForwardRefButton,{onClick:x,children:c===2?"Finaliser":"Suivant"})]})]})}),d&&s.jsxs(tt.Col,{span:{base:12,md:6},children:[s.jsx(Kr,{order:3,mb:"md",children:"Aperçu du planning"}),s.jsx(b,{})]})]})]})})}const A5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Yx(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function IF(t){return"nodeType"in t}function io(t){var e,r;return t?Yx(t)?t:IF(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function _F(t){const{Document:e}=io(t);return t instanceof e}function Kw(t){return Yx(t)?!1:t instanceof io(t).HTMLElement}function Une(t){return t instanceof io(t).SVGElement}function Xx(t){return t?Yx(t)?t.document:IF(t)?_F(t)?t:Kw(t)||Une(t)?t.ownerDocument:document:document:document}const tf=A5?y.useLayoutEffect:y.useEffect;function m5(t){const e=y.useRef(t);return tf(()=>{e.current=t}),y.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function dlt(){const t=y.useRef(null),e=y.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function iw(t,e){e===void 0&&(e=[t]);const r=y.useRef(t);return tf(()=>{r.current!==t&&(r.current=t)},e),r}function Yw(t,e){const r=y.useRef();return y.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function SN(t){const e=m5(t),r=y.useRef(null),n=y.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function EN(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let m4={};function p5(t,e){return y.useMemo(()=>{if(e)return e;const r=m4[t]==null?0:m4[t]+1;return m4[t]=r,t+"-"+r},[t,e])}function $ne(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+t*u)}return i},{...e})}}const f0=$ne(1),BN=$ne(-1);function flt(t){return"clientX"in t&&"clientY"in t}function PF(t){if(!t)return!1;const{KeyboardEvent:e}=io(t.target);return e&&t instanceof e}function hlt(t){if(!t)return!1;const{TouchEvent:e}=io(t.target);return e&&t instanceof e}function TN(t){if(hlt(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return flt(t)?{x:t.clientX,y:t.clientY}:null}const ow=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[ow.Translate.toString(t),ow.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),I9="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Alt(t){return t.matches(I9)?t:t.querySelector(I9)}const mlt={display:"none"};function plt(t){let{id:e,value:r}=t;return le.createElement("div",{id:e,style:mlt},r)}function glt(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return le.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function xlt(){const[t,e]=y.useState("");return{announce:y.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const Hne=y.createContext(null);function vlt(t){const e=y.useContext(Hne);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function blt(){const[t]=y.useState(()=>new Set),e=y.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[y.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[t]),e]}const ylt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wlt={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function jlt(t){let{announcements:e=wlt,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=ylt}=t;const{announce:i,announcement:o}=xlt(),l=p5("DndLiveRegion"),[c,u]=y.useState(!1);if(y.useEffect(()=>{u(!0)},[]),vlt(y.useMemo(()=>({onDragStart(f){let{active:A}=f;i(e.onDragStart({active:A}))},onDragMove(f){let{active:A,over:h}=f;e.onDragMove&&i(e.onDragMove({active:A,over:h}))},onDragOver(f){let{active:A,over:h}=f;i(e.onDragOver({active:A,over:h}))},onDragEnd(f){let{active:A,over:h}=f;i(e.onDragEnd({active:A,over:h}))},onDragCancel(f){let{active:A,over:h}=f;i(e.onDragCancel({active:A,over:h}))}}),[i,e])),!c)return null;const d=le.createElement(le.Fragment,null,le.createElement(plt,{id:n,value:a.draggable}),le.createElement(glt,{id:l,announcement:o}));return r?hc.createPortal(d,r):d}var xa;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(xa||(xa={}));function DN(){}function _9(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Clt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return y.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Sc=Object.freeze({x:0,y:0});function Nlt(t,e){const r=TN(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function Slt(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function Elt(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function Blt(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,l=i-r;if(n<a&&r<i){const c=e.width*e.height,u=t.width*t.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const Tlt=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const c=Blt(l,e);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(Slt)};function Dlt(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function Qne(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Sc}function Ilt(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const _lt=Ilt(1);function zne(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Plt(t,e,r){const n=zne(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:l}=n,c=t.left-o-(1-a)*parseFloat(r),u=t.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?t.width/a:t.width,f=i?t.height/i:t.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const klt={ignoreTransform:!1};function Xw(t,e){e===void 0&&(e=klt);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=io(t).getComputedStyle(t);u&&(r=Plt(r,u,d))}const{top:n,left:a,width:i,height:o,bottom:l,right:c}=r;return{top:n,left:a,width:i,height:o,bottom:l,right:c}}function P9(t){return Xw(t,{ignoreTransform:!0})}function Olt(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function Flt(t,e){return e===void 0&&(e=io(t).getComputedStyle(t)),e.position==="fixed"}function Rlt(t,e){e===void 0&&(e=io(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function kF(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(_F(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Kw(a)||Une(a)||r.includes(a))return r;const i=io(t).getComputedStyle(a);return a!==t&&Rlt(a,i)&&r.push(a),Flt(a,i)?r:n(a.parentNode)}return t?n(t):r}function Vne(t){const[e]=kF(t,1);return e??null}function p4(t){return!A5||!t?null:Yx(t)?t:IF(t)?_F(t)||t===Xx(t).scrollingElement?window:Kw(t)?t:null:null}function Wne(t){return Yx(t)?t.scrollX:t.scrollLeft}function Gne(t){return Yx(t)?t.scrollY:t.scrollTop}function q_(t){return{x:Wne(t),y:Gne(t)}}var Ba;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ba||(Ba={}));function qne(t){return!A5||!t?!1:t===document.scrollingElement}function Kne(t){const e={x:0,y:0},r=qne(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:e}}const Mlt={x:.2,y:.2};function Llt(t,e,r,n,a){let{top:i,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=Mlt);const{isTop:u,isBottom:d,isLeft:f,isRight:A}=Kne(t),h={x:0,y:0},m={x:0,y:0},p={height:e.height*a.y,width:e.width*a.x};return!u&&i<=e.top+p.height?(h.y=Ba.Backward,m.y=n*Math.abs((e.top+p.height-i)/p.height)):!d&&c>=e.bottom-p.height&&(h.y=Ba.Forward,m.y=n*Math.abs((e.bottom-p.height-c)/p.height)),!A&&l>=e.right-p.width?(h.x=Ba.Forward,m.x=n*Math.abs((e.right-p.width-l)/p.width)):!f&&o<=e.left+p.width&&(h.x=Ba.Backward,m.x=n*Math.abs((e.left+p.width-o)/p.width)),{direction:h,speed:m}}function Ult(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function Yne(t){return t.reduce((e,r)=>f0(e,q_(r)),Sc)}function $lt(t){return t.reduce((e,r)=>e+Wne(r),0)}function Hlt(t){return t.reduce((e,r)=>e+Gne(r),0)}function Xne(t,e){if(e===void 0&&(e=Xw),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);Vne(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Qlt=[["x",["left","right"],$lt],["y",["top","bottom"],Hlt]];class OF{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=kF(r),a=Yne(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of Qlt)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),d=a[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qb{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function zlt(t){const{EventTarget:e}=io(t);return t instanceof e?t:Xx(t)}function g4(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var wl;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(wl||(wl={}));function k9(t){t.preventDefault()}function Vlt(t){t.stopPropagation()}var Rn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Rn||(Rn={}));const Jne={start:[Rn.Space,Rn.Enter],cancel:[Rn.Esc],end:[Rn.Space,Rn.Enter,Rn.Tab]},Wlt=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Rn.Right:return{...r,x:r.x+25};case Rn.Left:return{...r,x:r.x-25};case Rn.Down:return{...r,y:r.y+25};case Rn.Up:return{...r,y:r.y-25}}};class Zne{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Qb(Xx(r)),this.windowListeners=new Qb(io(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(wl.Resize,this.handleCancel),this.windowListeners.add(wl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(wl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&Xne(n),r(Sc)}handleKeyDown(e){if(PF(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=Jne,coordinateGetter:o=Wlt,scrollBehavior:l="smooth"}=a,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Sc;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(e,{active:r,context:n.current,currentCoordinates:d});if(f){const A=BN(f,d),h={x:0,y:0},{scrollableAncestors:m}=n.current;for(const p of m){const g=e.code,{isTop:x,isRight:v,isLeft:b,isBottom:C,maxScroll:j,minScroll:w}=Kne(p),N=Ult(p),E={x:Math.min(g===Rn.Right?N.right-N.width/2:N.right,Math.max(g===Rn.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(g===Rn.Down?N.bottom-N.height/2:N.bottom,Math.max(g===Rn.Down?N.top:N.top+N.height/2,f.y))},_=g===Rn.Right&&!v||g===Rn.Left&&!b,k=g===Rn.Down&&!C||g===Rn.Up&&!x;if(_&&E.x!==f.x){const D=p.scrollLeft+A.x,S=g===Rn.Right&&D<=j.x||g===Rn.Left&&D>=w.x;if(S&&!A.y){p.scrollTo({left:D,behavior:l});return}S?h.x=p.scrollLeft-D:h.x=g===Rn.Right?p.scrollLeft-j.x:p.scrollLeft-w.x,h.x&&p.scrollBy({left:-h.x,behavior:l});break}else if(k&&E.y!==f.y){const D=p.scrollTop+A.y,S=g===Rn.Down&&D<=j.y||g===Rn.Up&&D>=w.y;if(S&&!A.x){p.scrollTo({top:D,behavior:l});return}S?h.y=p.scrollTop-D:h.y=g===Rn.Down?p.scrollTop-j.y:p.scrollTop-w.y,h.y&&p.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(e,f0(BN(f,this.referenceCoordinates),h))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zne.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=Jne,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function O9(t){return!!(t&&"distance"in t)}function F9(t){return!!(t&&"delay"in t)}class FF{constructor(e,r,n){var a;n===void 0&&(n=zlt(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=Xx(o),this.documentListeners=new Qb(this.document),this.listeners=new Qb(n),this.windowListeners=new Qb(io(o)),this.initialCoordinates=(a=TN(i))!=null?a:Sc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(wl.Resize,this.handleCancel),this.windowListeners.add(wl.DragStart,k9),this.windowListeners.add(wl.VisibilityChange,this.handleCancel),this.windowListeners.add(wl.ContextMenu,k9),this.documentListeners.add(wl.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(F9(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(O9(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(wl.Click,Vlt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(wl.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(r=TN(e))!=null?r:Sc,u=BN(a,c);if(!n&&l){if(O9(l)){if(l.tolerance!=null&&g4(u,l.tolerance))return this.handleCancel();if(g4(u,l.distance))return this.handleStart()}if(F9(l)&&g4(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Glt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class RF extends FF{constructor(e){const{event:r}=e,n=Xx(r.target);super(e,Glt,n)}}RF.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const qlt={move:{name:"mousemove"},end:{name:"mouseup"}};var K_;(function(t){t[t.RightClick=2]="RightClick"})(K_||(K_={}));class Klt extends FF{constructor(e){super(e,qlt,Xx(e.event.target))}}Klt.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===K_.RightClick?!1:(n==null||n({event:r}),!0)}}];const x4={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ese extends FF{constructor(e){super(e,x4)}static setup(){return window.addEventListener(x4.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(x4.move.name,e)};function e(){}}}ese.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var zb;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(zb||(zb={}));var IN;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(IN||(IN={}));function Ylt(t){let{acceleration:e,activator:r=zb.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=IN.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:A}=t;const h=Jlt({delta:f,disabled:!i}),[m,p]=dlt(),g=y.useRef({x:0,y:0}),x=y.useRef({x:0,y:0}),v=y.useMemo(()=>{switch(r){case zb.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case zb.DraggableRect:return a}},[r,a,c]),b=y.useRef(null),C=y.useCallback(()=>{const w=b.current;if(!w)return;const N=g.current.x*x.current.x,E=g.current.y*x.current.y;w.scrollBy(N,E)},[]),j=y.useMemo(()=>l===IN.TreeOrder?[...u].reverse():u,[l,u]);y.useEffect(()=>{if(!i||!u.length||!v){p();return}for(const w of j){if((n==null?void 0:n(w))===!1)continue;const N=u.indexOf(w),E=d[N];if(!E)continue;const{direction:_,speed:k}=Llt(w,E,v,e,A);for(const D of["x","y"])h[D][_[D]]||(k[D]=0,_[D]=0);if(k.x>0||k.y>0){p(),b.current=w,m(C,o),g.current=k,x.current=_;return}}g.current={x:0,y:0},x.current={x:0,y:0},p()},[e,C,n,p,i,o,JSON.stringify(v),JSON.stringify(h),m,u,j,d,JSON.stringify(A)])}const Xlt={x:{[Ba.Backward]:!1,[Ba.Forward]:!1},y:{[Ba.Backward]:!1,[Ba.Forward]:!1}};function Jlt(t){let{delta:e,disabled:r}=t;const n=EN(e);return Yw(a=>{if(r||!n||!a)return Xlt;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ba.Backward]:a.x[Ba.Backward]||i.x===-1,[Ba.Forward]:a.x[Ba.Forward]||i.x===1},y:{[Ba.Backward]:a.y[Ba.Backward]||i.y===-1,[Ba.Forward]:a.y[Ba.Forward]||i.y===1}}},[r,e,n])}function Zlt(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Yw(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function ect(t,e){return y.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var lw;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(lw||(lw={}));var Y_;(function(t){t.Optimized="optimized"})(Y_||(Y_={}));const R9=new Map;function tct(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=y.useState(null),{frequency:l,measure:c,strategy:u}=a,d=y.useRef(t),f=g(),A=iw(f),h=y.useCallback(function(x){x===void 0&&(x=[]),!A.current&&o(v=>v===null?x:v.concat(x.filter(b=>!v.includes(b))))},[A]),m=y.useRef(null),p=Yw(x=>{if(f&&!r)return R9;if(!x||x===R9||d.current!==t||i!=null){const v=new Map;for(let b of t){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){v.set(b.id,b.rect.current);continue}const C=b.node.current,j=C?new OF(c(C),C):null;b.rect.current=j,j&&v.set(b.id,j)}return v}return x},[t,i,r,f,c]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{f||h()},[r,f]),y.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),y.useEffect(()=>{f||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},l))},[l,f,h,...n]),{droppableRects:p,measureDroppableContainers:h,measuringScheduled:i!=null};function g(){switch(u){case lw.Always:return!1;case lw.BeforeDragging:return r;default:return!r}}}function MF(t,e){return Yw(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function rct(t,e){return MF(t,e)}function nct(t){let{callback:e,disabled:r}=t;const n=m5(e),a=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return y.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function g5(t){let{callback:e,disabled:r}=t;const n=m5(e),a=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return y.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function sct(t){return new OF(Xw(t),t)}function M9(t,e,r){e===void 0&&(e=sct);const[n,a]=y.useState(null);function i(){a(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=e(t);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=nct({callback(c){if(t)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=g5({callback:i});return tf(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),n}function act(t){const e=MF(t);return Qne(t,e)}const L9=[];function ict(t){const e=y.useRef(t),r=Yw(n=>t?n&&n!==L9&&t&&e.current&&t.parentNode===e.current.parentNode?n:kF(t):L9,[t]);return y.useEffect(()=>{e.current=t},[t]),r}function oct(t){const[e,r]=y.useState(null),n=y.useRef(t),a=y.useCallback(i=>{const o=p4(i.target);o&&r(l=>l?(l.set(o,q_(o)),new Map(l)):null)},[]);return y.useEffect(()=>{const i=n.current;if(t!==i){o(i);const l=t.map(c=>{const u=p4(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,q_(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=p4(c);u==null||u.removeEventListener("scroll",a)})}},[a,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>f0(i,o),Sc):Yne(t):Sc,[t,e])}function U9(t,e){e===void 0&&(e=[]);const r=y.useRef(null);return y.useEffect(()=>{r.current=null},e),y.useEffect(()=>{const n=t!==Sc;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?BN(t,r.current):Sc}function lct(t){y.useEffect(()=>{if(!A5)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function cct(t,e){return y.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function tse(t){return y.useMemo(()=>t?Olt(t):null,[t])}const $9=[];function uct(t,e){e===void 0&&(e=Xw);const[r]=t,n=tse(r?io(r):null),[a,i]=y.useState($9);function o(){i(()=>t.length?t.map(c=>qne(c)?n:new OF(e(c),c)):$9)}const l=g5({callback:o});return tf(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),a}function rse(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Kw(e)?e:t}function dct(t){let{measure:e}=t;const[r,n]=y.useState(null),a=y.useCallback(u=>{for(const{target:d}of u)if(Kw(d)){n(f=>{const A=e(d);return f?{...f,width:A.width,height:A.height}:A});break}},[e]),i=g5({callback:a}),o=y.useCallback(u=>{const d=rse(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?e(d):null)},[e,i]),[l,c]=SN(o);return y.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const fct=[{sensor:RF,options:{}},{sensor:Zne,options:{}}],hct={current:{}},m2={draggable:{measure:P9},droppable:{measure:P9,strategy:lw.WhileDragging,frequency:Y_.Optimized},dragOverlay:{measure:Xw}};class Vb extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const Act={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vb,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:DN},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:m2,measureDroppableContainers:DN,windowRect:null,measuringScheduled:!1},nse={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:DN,draggableNodes:new Map,over:null,measureDroppableContainers:DN},Jw=y.createContext(nse),sse=y.createContext(Act);function mct(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vb}}}function pct(t,e){switch(e.type){case xa.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xa.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case xa.DragEnd:case xa.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xa.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Vb(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case xa.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Vb(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case xa.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Vb(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function gct(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=y.useContext(Jw),i=EN(n),o=EN(r==null?void 0:r.id);return y.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!PF(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=Alt(d);if(f){f.focus();break}}})}},[n,e,a,o,i]),null}function ase(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function xct(t){return y.useMemo(()=>({draggable:{...m2.draggable,...t==null?void 0:t.draggable},droppable:{...m2.droppable,...t==null?void 0:t.droppable},dragOverlay:{...m2.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function vct(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=y.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;tf(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!n)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=Qne(d,n);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const A=Vne(u);A&&A.scrollBy({top:f.y,left:f.x})}},[e,o,l,n,r])}const x5=y.createContext({...Sc,scaleX:1,scaleY:1});var rh;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(rh||(rh={}));const bct=y.memo(function(e){var r,n,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=fct,collisionDetection:f=Tlt,measuring:A,modifiers:h,...m}=e;const p=y.useReducer(pct,void 0,mct),[g,x]=p,[v,b]=blt(),[C,j]=y.useState(rh.Uninitialized),w=C===rh.Initialized,{draggable:{active:N,nodes:E,translate:_},droppable:{containers:k}}=g,D=N!=null?E.get(N):null,S=y.useRef({initial:null,translated:null}),F=y.useMemo(()=>{var Mt;return N!=null?{id:N,data:(Mt=D==null?void 0:D.data)!=null?Mt:hct,rect:S}:null},[N,D]),M=y.useRef(null),[R,U]=y.useState(null),[z,Q]=y.useState(null),H=iw(m,Object.values(m)),q=p5("DndDescribedBy",o),X=y.useMemo(()=>k.getEnabled(),[k]),$=xct(A),{droppableRects:K,measureDroppableContainers:se,measuringScheduled:Z}=tct(X,{dragging:w,dependencies:[_.x,_.y],config:$.droppable}),ie=Zlt(E,N),ee=y.useMemo(()=>z?TN(z):null,[z]),ue=nn(),ae=rct(ie,$.draggable.measure);vct({activeNode:N!=null?E.get(N):null,config:ue.layoutShiftCompensation,initialRect:ae,measure:$.draggable.measure});const re=M9(ie,$.draggable.measure,ae),fe=M9(ie?ie.parentElement:null),G=y.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=k.getNodeFor((r=G.current.over)==null?void 0:r.id),Se=dct({measure:$.dragOverlay.measure}),ge=(n=Se.nodeRef.current)!=null?n:ie,te=w?(a=Se.rect)!=null?a:re:null,ye=!!(Se.nodeRef.current&&Se.rect),we=act(ye?null:re),be=tse(ge?io(ge):null),Te=ict(w?oe??ie:null),Oe=uct(Te),Me=ase(h,{transform:{x:_.x-we.x,y:_.y-we.y,scaleX:1,scaleY:1},activatorEvent:z,active:F,activeNodeRect:re,containerNodeRect:fe,draggingNodeRect:te,over:G.current.over,overlayNodeRect:Se.rect,scrollableAncestors:Te,scrollableAncestorRects:Oe,windowRect:be}),Ve=ee?f0(ee,_):null,Pe=oct(Te),ze=U9(Pe),ht=U9(Pe,[re]),gt=f0(Me,ze),Ct=te?_lt(te,Me):null,xt=F&&Ct?f({active:F,collisionRect:Ct,droppableRects:K,droppableContainers:X,pointerCoordinates:Ve}):null,Ie=Elt(xt,"id"),[De,Je]=y.useState(null),Ke=ye?Me:f0(Me,ht),St=Dlt(Ke,(i=De==null?void 0:De.rect)!=null?i:null,re),it=y.useRef(null),Pt=y.useCallback((Mt,At)=>{let{sensor:yt,options:dt}=At;if(M.current==null)return;const Ot=E.get(M.current);if(!Ot)return;const Dt=Mt.nativeEvent,Zt=new yt({active:M.current,activeNode:Ot,event:Dt,options:dt,context:G,onAbort(_t){if(!E.get(_t))return;const{onDragAbort:Rr}=H.current,Mr={id:_t};Rr==null||Rr(Mr),v({type:"onDragAbort",event:Mr})},onPending(_t,cn,Rr,Mr){if(!E.get(_t))return;const{onDragPending:Jr}=H.current,Pn={id:_t,constraint:cn,initialCoordinates:Rr,offset:Mr};Jr==null||Jr(Pn),v({type:"onDragPending",event:Pn})},onStart(_t){const cn=M.current;if(cn==null)return;const Rr=E.get(cn);if(!Rr)return;const{onDragStart:Mr}=H.current,Xt={activatorEvent:Dt,active:{id:cn,data:Rr.data,rect:S}};hc.unstable_batchedUpdates(()=>{Mr==null||Mr(Xt),j(rh.Initializing),x({type:xa.DragStart,initialCoordinates:_t,active:cn}),v({type:"onDragStart",event:Xt}),U(it.current),Q(Dt)})},onMove(_t){x({type:xa.DragMove,coordinates:_t})},onEnd:Pr(xa.DragEnd),onCancel:Pr(xa.DragCancel)});it.current=Zt;function Pr(_t){return async function(){const{active:Rr,collisions:Mr,over:Xt,scrollAdjustedTranslate:Jr}=G.current;let Pn=null;if(Rr&&Jr){const{cancelDrop:us}=H.current;Pn={activatorEvent:Dt,active:Rr,collisions:Mr,delta:Jr,over:Xt},_t===xa.DragEnd&&typeof us=="function"&&await Promise.resolve(us(Pn))&&(_t=xa.DragCancel)}M.current=null,hc.unstable_batchedUpdates(()=>{x({type:_t}),j(rh.Uninitialized),Je(null),U(null),Q(null),it.current=null;const us=_t===xa.DragEnd?"onDragEnd":"onDragCancel";if(Pn){const ea=H.current[us];ea==null||ea(Pn),v({type:us,event:Pn})}})}}},[E]),dr=y.useCallback((Mt,At)=>(yt,dt)=>{const Ot=yt.nativeEvent,Dt=E.get(dt);if(M.current!==null||!Dt||Ot.dndKit||Ot.defaultPrevented)return;const Zt={active:Dt};Mt(yt,At.options,Zt)===!0&&(Ot.dndKit={capturedBy:At.sensor},M.current=dt,Pt(yt,At))},[E,Pt]),ar=ect(d,dr);lct(d),tf(()=>{re&&C===rh.Initializing&&j(rh.Initialized)},[re,C]),y.useEffect(()=>{const{onDragMove:Mt}=H.current,{active:At,activatorEvent:yt,collisions:dt,over:Ot}=G.current;if(!At||!yt)return;const Dt={active:At,activatorEvent:yt,collisions:dt,delta:{x:gt.x,y:gt.y},over:Ot};hc.unstable_batchedUpdates(()=>{Mt==null||Mt(Dt),v({type:"onDragMove",event:Dt})})},[gt.x,gt.y]),y.useEffect(()=>{const{active:Mt,activatorEvent:At,collisions:yt,droppableContainers:dt,scrollAdjustedTranslate:Ot}=G.current;if(!Mt||M.current==null||!At||!Ot)return;const{onDragOver:Dt}=H.current,Zt=dt.get(Ie),Pr=Zt&&Zt.rect.current?{id:Zt.id,rect:Zt.rect.current,data:Zt.data,disabled:Zt.disabled}:null,_t={active:Mt,activatorEvent:At,collisions:yt,delta:{x:Ot.x,y:Ot.y},over:Pr};hc.unstable_batchedUpdates(()=>{Je(Pr),Dt==null||Dt(_t),v({type:"onDragOver",event:_t})})},[Ie]),tf(()=>{G.current={activatorEvent:z,active:F,activeNode:ie,collisionRect:Ct,collisions:xt,droppableRects:K,draggableNodes:E,draggingNode:ge,draggingNodeRect:te,droppableContainers:k,over:De,scrollableAncestors:Te,scrollAdjustedTranslate:gt},S.current={initial:te,translated:Ct}},[F,ie,xt,Ct,E,ge,te,K,k,De,Te,gt]),Ylt({...ue,delta:_,draggingRect:Ct,pointerCoordinates:Ve,scrollableAncestors:Te,scrollableAncestorRects:Oe});const gn=y.useMemo(()=>({active:F,activeNode:ie,activeNodeRect:re,activatorEvent:z,collisions:xt,containerNodeRect:fe,dragOverlay:Se,draggableNodes:E,droppableContainers:k,droppableRects:K,over:De,measureDroppableContainers:se,scrollableAncestors:Te,scrollableAncestorRects:Oe,measuringConfiguration:$,measuringScheduled:Z,windowRect:be}),[F,ie,re,z,xt,fe,Se,E,k,K,De,se,Te,Oe,$,Z,be]),ir=y.useMemo(()=>({activatorEvent:z,activators:ar,active:F,activeNodeRect:re,ariaDescribedById:{draggable:q},dispatch:x,draggableNodes:E,over:De,measureDroppableContainers:se}),[z,ar,F,re,x,q,E,De,se]);return le.createElement(Hne.Provider,{value:b},le.createElement(Jw.Provider,{value:ir},le.createElement(sse.Provider,{value:gn},le.createElement(x5.Provider,{value:St},u)),le.createElement(gct,{disabled:(l==null?void 0:l.restoreFocus)===!1})),le.createElement(jlt,{...l,hiddenTextDescribedById:q}));function nn(){const Mt=(R==null?void 0:R.autoScrollEnabled)===!1,At=typeof c=="object"?c.enabled===!1:c===!1,yt=w&&!Mt&&!At;return typeof c=="object"?{...c,enabled:yt}:{enabled:yt}}}),yct=y.createContext(null),H9="button",wct="Draggable";function jct(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=p5(wct),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:A}=y.useContext(Jw),{role:h=H9,roleDescription:m="draggable",tabIndex:p=0}=a??{},g=(c==null?void 0:c.id)===e,x=y.useContext(g?x5:yct),[v,b]=SN(),[C,j]=SN(),w=cct(o,e),N=iw(r);tf(()=>(f.set(e,{id:e,key:i,node:v,activatorNode:C,data:N}),()=>{const _=f.get(e);_&&_.key===i&&f.delete(e)}),[f,e]);const E=y.useMemo(()=>({role:h,tabIndex:p,"aria-disabled":n,"aria-pressed":g&&h===H9?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[n,h,p,g,m,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:g,listeners:n?void 0:w,node:v,over:A,setNodeRef:b,setActivatorNodeRef:j,transform:x}}function Cct(){return y.useContext(sse)}const Nct="Droppable",Sct={timeout:25};function Ect(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=p5(Nct),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=y.useContext(Jw),d=y.useRef({disabled:r}),f=y.useRef(!1),A=y.useRef(null),h=y.useRef(null),{disabled:m,updateMeasurementsFor:p,timeout:g}={...Sct,...a},x=iw(p??n),v=y.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),h.current=null},g)},[g]),b=g5({callback:v,disabled:m||!o}),C=y.useCallback((E,_)=>{b&&(_&&(b.unobserve(_),f.current=!1),E&&b.observe(E))},[b]),[j,w]=SN(C),N=iw(e);return y.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),y.useEffect(()=>(l({type:xa.RegisterDroppable,element:{id:n,key:i,disabled:r,node:j,rect:A,data:N}}),()=>l({type:xa.UnregisterDroppable,key:i,id:n})),[n]),y.useEffect(()=>{r!==d.current.disabled&&(l({type:xa.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,l]),{active:o,rect:A,isOver:(c==null?void 0:c.id)===n,node:j,over:c,setNodeRef:w}}function Bct(t){let{animation:e,children:r}=t;const[n,a]=y.useState(null),[i,o]=y.useState(null),l=EN(r);return!r&&!n&&l&&a(l),tf(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(e(u,i)).then(()=>{a(null)})},[e,n,i]),le.createElement(le.Fragment,null,r,n?y.cloneElement(n,{ref:o}):null)}const Tct={x:0,y:0,scaleX:1,scaleY:1};function Dct(t){let{children:e}=t;return le.createElement(Jw.Provider,{value:nse},le.createElement(x5.Provider,{value:Tct},e))}const Ict={position:"fixed",touchAction:"none"},_ct=t=>PF(t)?"transform 250ms ease":void 0,Pct=y.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:l,style:c,transform:u,transition:d=_ct}=t;if(!l)return null;const f=a?u:{...u,scaleX:1,scaleY:1},A={...Ict,width:l.width,height:l.height,top:l.top,left:l.left,transform:ow.Transform.toString(f),transformOrigin:a&&n?Nlt(n,l):void 0,transition:typeof d=="function"?d(n):d,...c};return le.createElement(r,{className:o,style:A,ref:e},i)}),kct=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(a[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);o!=null&&o.active&&r.node.classList.remove(o.active)}},Oct=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:ow.Transform.toString(e)},{transform:ow.Transform.toString(r)}]},Fct={duration:250,easing:"ease",keyframes:Oct,sideEffects:kct({styles:{active:{opacity:"0"}}})};function Rct(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return m5((i,o)=>{if(e===null)return;const l=r.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=rse(o);if(!u)return;const{transform:d}=io(o).getComputedStyle(o),f=zne(d);if(!f)return;const A=typeof e=="function"?e:Mct(e);return Xne(c,a.draggable.measure),A({active:{id:i,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:f})})}function Mct(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...Fct,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},A={x:c.x-d.x,y:c.y-d.y,...f},h=a({...u,active:o,dragOverlay:l,transform:{initial:c,final:A}}),[m]=h,p=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(p))return;const g=n==null?void 0:n({active:o,dragOverlay:l,...u}),x=l.node.animate(h,{duration:e,easing:r,fill:"forwards"});return new Promise(v=>{x.onfinish=()=>{g==null||g(),v()}})}}let Q9=0;function Lct(t){return y.useMemo(()=>{if(t!=null)return Q9++,Q9},[t])}const Uct=le.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:d,active:f,activeNodeRect:A,containerNodeRect:h,draggableNodes:m,droppableContainers:p,dragOverlay:g,over:x,measuringConfiguration:v,scrollableAncestors:b,scrollableAncestorRects:C,windowRect:j}=Cct(),w=y.useContext(x5),N=Lct(f==null?void 0:f.id),E=ase(o,{activatorEvent:d,active:f,activeNodeRect:A,containerNodeRect:h,draggingNodeRect:g.rect,over:x,overlayNodeRect:g.rect,scrollableAncestors:b,scrollableAncestorRects:C,transform:w,windowRect:j}),_=MF(A),k=Rct({config:n,draggableNodes:m,droppableContainers:p,measuringConfiguration:v}),D=_?g.setRef:void 0;return le.createElement(Dct,null,le.createElement(Bct,{animation:k},f&&N?le.createElement(Pct,{key:N,id:f.id,ref:D,as:l,activatorEvent:d,adjustScale:e,className:c,transition:i,rect:_,style:{zIndex:u,...a},transform:E},r):null))}),z9=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#D7BDE2","#A3E4D7","#F9E79F","#D5A6BD","#AED6F1","#A9DFBF","#FAD7A0","#E8DAEF","#D6EAF8","#D5F4E6"],PA=new Map;class $ct{getAutoColor(e){if(PA.has(e))return PA.get(e);const r=e.toString().split("").reduce((a,i)=>(a=(a<<5)-a+i.charCodeAt(0),a&a),0),n=z9[Math.abs(r)%z9.length];return PA.set(e,n),n}async getAffairesPlanning(e,r){try{return(await Ee.get("/planning/affaires",{params:{dateDebut:e.toISOString(),dateFin:r.toISOString()}})).data.map(i=>({...i,couleur:i.couleur||this.getAutoColor(i.id),dateDebut:new Date(i.dateDebut),dateFin:new Date(i.dateFin)}))}catch(n){console.error("Erreur lors de la récupération des affaires planning:",n);try{return(await Ee.get("/affaires")).data.map(i=>({...i,couleur:this.getAutoColor(i.id),dateDebut:i.dateDebutPrevue?new Date(i.dateDebutPrevue):new Date,dateFin:i.dateCloturePrevue?new Date(i.dateCloturePrevue):new Date}))}catch(a){throw console.error("Erreur fallback affaires:",a),n}}}async moveAffaire(e,r,n){try{const a=await Ee.patch(`/planning/affaires/${e}/planning`,{dateDebut:r.toISOString(),dateFin:n.toISOString()});return this.notifyPlanningChange(e,"MOVED"),a.data}catch(a){throw console.error("Erreur lors du déplacement de l'affaire:",a),a}}async updateCouleur(e,r){try{const n=await Ee.patch(`/affaires/${e}/couleur`,{couleur:r});return PA.set(e,r),n.data}catch(n){return console.error("Erreur lors de la mise à jour de couleur:",n),PA.set(e,r),{id:e,couleur:r}}}async getUsers(){try{return(await Ee.get("/users")).data}catch(e){throw console.error("Erreur lors de la récupération des utilisateurs:",e),e}}notifyPlanningChange(e,r){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{n.showNotification("Planning mis à jour",{body:`Affaire ${e} ${r.toLowerCase()}`,icon:"/favicon.ico",tag:"planning-update"})}).catch(n=>{console.log("Notifications pas supportées:",n)})}async getAffairesByPeriod(e,r,n="week"){try{return(await Ee.get("/planning/affaires/period",{params:{startDate:e.toISOString(),endDate:r.toISOString(),viewType:n}})).data.map(i=>({...i,couleur:i.couleur||this.getAutoColor(i.id),dateDebut:new Date(i.dateDebut),dateFin:new Date(i.dateFin)}))}catch(a){return console.error("Erreur lors de la récupération par période:",a),this.getAffairesPlanning(e,r)}}async getPlanningStats(e,r){try{return(await Ee.get("/planning/stats",{params:{dateDebut:e.toISOString(),dateFin:r.toISOString()}})).data}catch(n){return console.error("Erreur lors de la récupération des stats:",n),{totalAffaires:0,affairesEnCours:0,affairesTerminees:0,affairesPlanifiees:0,chargeEquipe:0}}}validateMove(e,r,n){const a=[];n&&r>n&&a.push("La date de fin ne peut pas être antérieure à la date de début");const i=new Date;return i.setHours(0,0,0,0),r<i&&e.statut==="PLANIFIEE"&&a.push("Impossible de planifier une affaire dans le passé"),{isValid:a.length===0,errors:a}}clearColorCache(){PA.clear()}getCachedColors(){return Object.fromEntries(PA)}}const Uj=new $ct,X_=({affaire:t,isDragging:e=!1,isCompact:r=!1,onClick:n,style:a={}})=>{var p;const{attributes:i,listeners:o,setNodeRef:l,transform:c,isDragging:u}=jct({id:t.id,data:{affaire:t,type:"affaire"}}),d=g=>{const x=g.replace("#",""),v=parseInt(x.substr(0,2),16),b=parseInt(x.substr(2,2),16),C=parseInt(x.substr(4,2),16);return`rgb(${Math.max(0,v-40)}, ${Math.max(0,b-40)}, ${Math.max(0,C-40)})`},f=g=>{switch(g){case"EN_COURS":return{bg:"rgba(34, 197, 94, 0.1)",text:"#16a34a"};case"TERMINEE":return{bg:"rgba(59, 130, 246, 0.1)",text:"#2563eb"};case"PLANIFIEE":return{bg:"rgba(245, 158, 11, 0.1)",text:"#d97706"};case"ANNULEE":return{bg:"rgba(239, 68, 68, 0.1)",text:"#dc2626"};default:return{bg:"rgba(107, 114, 128, 0.1)",text:"#6b7280"}}},A=t.progression||0,h=c?{transform:`translate3d(${c.x}px, ${c.y}px, 0) ${e?"rotate(5deg)":""}`}:{},m=f(t.statut);return s.jsxs("div",{ref:l,...o,...i,onClick:n,className:`
        relative overflow-hidden cursor-grab rounded-lg transition-all duration-200
        ${u||e?"cursor-grabbing opacity-80 z-50":"hover:scale-105 hover:shadow-lg"}
        ${r?"min-h-[60px]":"min-h-[120px]"}
      `,style:{backgroundColor:t.couleur,border:`2px solid ${d(t.couleur)}`,boxShadow:u||e?"0 10px 25px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.1)",userSelect:"none",WebkitTouchCallout:"none",touchAction:"manipulation",...h,...a},children:[A>0&&s.jsx("div",{className:"absolute top-0 left-0 h-1 bg-white bg-opacity-80 transition-all duration-300",style:{width:`${A}%`}}),s.jsxs("div",{className:"p-3 h-full flex flex-col justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(He,{size:r?"xs":"sm",fw:700,className:"text-white text-shadow-sm truncate",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:t.numero}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:m.bg,color:m.text},children:(p=t.statut)==null?void 0:p.replace("_"," ")})]}),!r&&s.jsx(He,{size:"xs",className:"text-white text-opacity-95 line-clamp-2",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:t.libelle})]}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(Wa,{size:12,className:"text-white text-opacity-80"}),s.jsx(He,{size:"xs",className:"text-white text-opacity-90 truncate",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:t.client})]}),!r&&s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(_s,{size:12,className:"text-white text-opacity-80"}),s.jsx(He,{size:"xs",className:"text-white text-opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:on(t.dateDebut,"dd/MM",{locale:Un})})]}),t.estimationBudget&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Tm,{size:12,className:"text-white text-opacity-80"}),s.jsxs(He,{size:"xs",className:"text-white text-opacity-90",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:[(t.estimationBudget/1e3).toFixed(0),"k"]})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"bg-white bg-opacity-20 px-2 py-1 rounded-full",children:s.jsxs(He,{size:"xs",className:"text-white font-medium",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:[t.dureeJours||Math.ceil((t.dateFin-t.dateDebut)/(1e3*60*60*24))," j"]})})})]}),t.equipe&&t.equipe.length>0&&!r&&s.jsx("div",{className:"mt-2 flex items-center space-x-1",children:s.jsxs("div",{className:"flex -space-x-1",children:[t.equipe.slice(0,3).map((g,x)=>{var v,b;return s.jsx(Ai,{label:`${g.prenom} ${g.nom}`,position:"top",children:s.jsx("div",{className:"w-6 h-6 rounded-full bg-white bg-opacity-90 flex items-center justify-center text-xs font-bold border-2 border-white",style:{color:t.couleur,zIndex:t.equipe.length-x},children:((v=g.prenom)==null?void 0:v.charAt(0))||((b=g.nom)==null?void 0:b.charAt(0))||"?"})},g.id)}),t.equipe.length>3&&s.jsxs("div",{className:"w-6 h-6 rounded-full bg-white bg-opacity-70 flex items-center justify-center text-xs font-bold border-2 border-white",children:["+",t.equipe.length-3]})]})})]}),s.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-0 hover:bg-opacity-10 transition-all duration-200 pointer-events-none"})]})},V9=({affaires:t,currentView:e,currentDate:r,onAffaireSelect:n,isFullPage:a=!1,isFullWidth:i=!1,isLoading:o=!1})=>{const l=y.useMemo(()=>{if(!r)return[new Date];const f=new Date(r);if(isNaN(f.getTime()))return[new Date];switch(e){case"day":return[f];case"week":return b6({start:Gi(f,{locale:Un}),end:H2(f,{locale:Un})});case"month":return b6({start:fD(f),end:dD(f)});default:return[f]}},[e,r]),c=f=>!t||!Array.isArray(t)?[]:t.filter(A=>{if(!A.dateDebut||!A.dateFin)return!1;const h=new Date(A.dateDebut),m=new Date(A.dateFin);return isNaN(h.getTime())||isNaN(m.getTime())?!1:f>=h&&f<=m}),u=f=>{switch(f){case"EN_COURS":return"bg-green-100 text-green-800";case"PLANIFIEE":return"bg-blue-100 text-blue-800";case"TERMINEE":return"bg-gray-100 text-gray-800";case"EN_ATTENTE":return"bg-yellow-100 text-yellow-800";case"ANNULEE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=({date:f,children:A})=>{const{isOver:h,setNodeRef:m}=Ect({id:`drop-${on(f,"yyyy-MM-dd")}`,data:{date:f,type:"day-slot"}});return s.jsx("div",{ref:m,className:`
          ${a?"min-h-[200px]":"min-h-[150px]"} p-2 rounded-lg border-2 border-dashed transition-all duration-200
          ${h?"border-[#6b7c3d] bg-[#f0f4e8] shadow-lg":"border-[#d9e2c4] bg-white"}
        `,style:{touchAction:"manipulation",WebkitTouchCallout:"none"},children:A})};if(e==="day"){const f=l[0],A=c(f);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(He,{size:"lg",fw:600,className:"text-[#000000]",children:on(f,"EEEE dd MMMM yyyy",{locale:Un})}),s.jsxs(He,{size:"sm",className:"text-[#333333]",children:[A.length," affaire",A.length>1?"s":""," planifiée",A.length>1?"s":""]})]}),s.jsx(d,{date:f,children:o?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#6b7c3d]"})}):A.length>0?s.jsx("div",{className:"space-y-3",children:A.map(h=>s.jsx(X_,{affaire:h,onClick:()=>n==null?void 0:n(h)},h.id))}):s.jsx("div",{className:"flex items-center justify-center h-32 text-[#6b7c3d] text-center",children:s.jsxs("div",{children:[s.jsx(He,{size:"sm",fw:500,children:"Aucune affaire planifiée"}),s.jsx(He,{size:"xs",className:"text-[#333333] mt-1",children:"Glissez une affaire ici pour la planifier"})]})})})]})}return e==="week"?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-center",children:s.jsxs(He,{size:"lg",fw:600,className:"text-[#000000]",children:["Semaine du ",on(l[0],"dd MMMM",{locale:Un})," au ",on(l[6],"dd MMMM yyyy",{locale:Un})]})}),s.jsx("div",{className:"grid grid-cols-7 gap-3",children:l.map(f=>{const A=c(f),h=Rve(f);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`
                  text-center p-2 rounded-lg
                  ${h?"bg-[#6b7c3d] text-white":"bg-[#f0f4e8] text-[#6b7c3d]"}
                `,children:[s.jsx(He,{size:"xs",fw:600,children:on(f,"EEE",{locale:Un}).toUpperCase()}),s.jsx(He,{size:"lg",fw:700,children:on(f,"dd")})]}),s.jsx(d,{date:f,children:o?s.jsx("div",{className:"flex items-center justify-center h-16",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#6b7c3d]"})}):A.length>0?s.jsxs("div",{className:"space-y-2",children:[A.slice(0,3).map(m=>s.jsx(X_,{affaire:m,isCompact:!0,onClick:()=>n==null?void 0:n(m)},m.id)),A.length>3&&s.jsx("div",{className:"text-center",children:s.jsxs(bn,{size:"xs",color:"gray",children:["+",A.length-3," autres"]})})]}):s.jsx("div",{className:"flex items-center justify-center h-16 text-[#6b7c3d] opacity-50",children:s.jsx(He,{size:"xs",children:"Libre"})})})]},f.toISOString())})})]}):e==="month"?(Rxe({start:fD(r),end:dD(r)},{locale:Un}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:`grid gap-4 ${i?"grid-cols-7 w-full":a?"grid-cols-7 max-w-6xl mx-auto":"grid-cols-7"}`,children:l.map(f=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`
                font-medium text-gray-600 dark:text-gray-400
                ${i?"text-lg mb-2":"text-sm mb-1"}
              `,children:on(f,"EEEE",{locale:Un})}),s.jsx("div",{className:`
                font-bold text-gray-900 dark:text-white
                ${i?"text-2xl mb-1":"text-lg"}
              `,children:on(f,"d")}),s.jsx("div",{className:`
                text-gray-500 dark:text-gray-500
                ${i?"text-base":"text-xs"}
              `,children:on(f,"MMM",{locale:Un})})]},f.toISOString()))}),s.jsx("div",{className:`grid gap-4 ${i?"grid-cols-7 w-full min-h-[600px]":a?"grid-cols-7 max-w-6xl mx-auto min-h-[500px]":"grid-cols-7 min-h-[400px]"}`,children:l.map(f=>{const A=c(f),h=$2(f,new Date);return s.jsxs("div",{className:`
                  relative border-2 border-dashed rounded-xl p-4 transition-all duration-200
                  ${h?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-300 dark:border-gray-600 hover:border-emerald-300 hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10"}
                  ${i?"min-h-[250px] p-6":a?"min-h-[200px] p-4":"min-h-[150px] p-3"}
                `,children:[h&&s.jsx("div",{className:`
                    absolute top-2 right-2 px-2 py-1 text-xs font-medium text-emerald-700 bg-emerald-200 rounded-full
                    ${i?"px-3 py-2 text-sm":""}
                  `,children:"Aujourd'hui"}),s.jsx("div",{className:"space-y-3",children:A.map((m,p)=>s.jsxs("div",{onClick:()=>n==null?void 0:n(m),className:`
                        p-3 rounded-lg border cursor-pointer transition-all duration-200
                        bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700
                        hover:shadow-md hover:border-emerald-300 dark:hover:border-emerald-600
                        hover:bg-emerald-50 dark:hover:bg-emerald-900/20
                        ${i?"p-4":""}
                      `,children:[s.jsx("div",{className:`
                        font-semibold text-gray-900 dark:text-white mb-1
                        ${i?"text-base":"text-sm"}
                      `,children:m.numero}),s.jsx("div",{className:`
                        text-gray-600 dark:text-gray-400 mb-2
                        ${i?"text-sm":"text-xs"}
                      `,children:m.libelle}),s.jsx("div",{className:`
                        text-gray-500 dark:text-gray-500
                        ${i?"text-sm":"text-xs"}
                      `,children:m.client}),s.jsx("div",{className:`
                        inline-block px-2 py-1 mt-2 text-xs font-medium rounded-full
                        ${u(m.statut)}
                        ${i?"px-3 py-1 text-sm":""}
                      `,children:m.statut})]},`${m.id}-${p}`))}),A.length===0&&s.jsx("div",{className:`
                    flex items-center justify-center h-full text-gray-400 dark:text-gray-600 text-center
                    ${i?"text-lg":"text-sm"}
                  `,children:s.jsxs("div",{children:[s.jsx(_s,{className:`
                        mx-auto mb-2 text-gray-300 dark:text-gray-700
                        ${i?"h-8 w-8":"h-6 w-6"}
                      `}),s.jsx("div",{children:"Aucune affaire"})]})})]},f.toISOString())})})]})):s.jsx("div",{className:"flex items-center justify-center h-64 text-[#6b7c3d]",children:s.jsxs("div",{className:"text-center",children:[s.jsxs(He,{size:"lg",fw:600,children:["Vue ",e]}),s.jsx(He,{size:"sm",className:"text-[#333333] mt-2",children:"Cette vue sera implémentée dans le prochain sprint"})]})})},W9=({currentView:t,onViewChange:e,currentDate:r,onDateChange:n,onNavigate:a,periodTitle:i,isCompact:o=!1,isFullWidth:l=!1})=>{const c=[{key:"day",label:"Jour",icon:_s},{key:"week",label:"Semaine",icon:MG},{key:"month",label:"Mois",icon:UG},{key:"timeline",label:"Timeline",icon:Tl},{key:"kanban",label:"Kanban",icon:f0e}],u=()=>{if(!r)return"";const d=new Date(r);switch(t){case"day":return d.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});case"week":const f=new Date(d);f.setDate(d.getDate()-d.getDay()+1);const A=new Date(f);return A.setDate(f.getDate()+6),`${f.toLocaleDateString("fr-FR")} - ${A.toLocaleDateString("fr-FR")}`;case"month":return d.toLocaleDateString("fr-FR",{year:"numeric",month:"long"});default:return d.toLocaleDateString("fr-FR")}};return s.jsxs("div",{className:`${l?"w-full":""} ${o?"space-y-3":"space-y-6"}`,children:[s.jsx("div",{className:`flex ${l?"justify-center":"justify-start"} ${o?"gap-2":"gap-4"}`,children:c.map(d=>{const f=d.icon;return s.jsx(rr,{variant:t===d.key?"filled":"outline",onClick:()=>e(d.key),leftSection:s.jsx(f,{size:o?16:l?20:18}),size:o?"sm":l?"lg":"md",className:`
                ${t===d.key?"bg-emerald-600 text-white border-emerald-600":"border-emerald-600 text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}
                ${l?"px-8 py-3 text-lg font-medium":o?"px-3 py-2 text-sm":"px-6 py-2 text-base"}
                transition-all duration-200
              `,children:d.label},d.key)})}),s.jsxs("div",{className:`flex items-center ${l?"justify-center":"justify-between"} ${o?"gap-3":"gap-6"}`,children:[s.jsx(rr,{variant:"outline",onClick:()=>a("prev"),size:o?"sm":l?"lg":"md",className:`
            border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-800
            ${l?"px-6 py-3":o?"px-3 py-2":"px-4 py-2"}
          `,leftSection:s.jsx(wx,{size:o?16:l?20:18})}),s.jsxs("div",{className:`text-center ${l?"mx-8":o?"mx-4":"mx-6"}`,children:[s.jsx("h3",{className:`
            font-semibold text-gray-900 dark:text-white
            ${l?"text-2xl":o?"text-lg":"text-xl"}
          `,children:i}),!o&&s.jsx("p",{className:`
              text-gray-500 dark:text-gray-400 mt-1
              ${l?"text-lg":"text-base"}
            `,children:u()})]}),s.jsx(rr,{variant:"outline",onClick:()=>a("next"),size:o?"sm":l?"lg":"md",className:`
            border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-800
            ${l?"px-6 py-3":o?"px-3 py-2":"px-4 py-2"}
          `,leftSection:s.jsx(jx,{size:o?16:l?20:18})})]}),!o&&s.jsx("div",{className:`text-center ${l?"mt-4":"mt-2"}`,children:s.jsxs("span",{className:`
            inline-flex items-center px-4 py-2 rounded-full text-sm font-medium
            bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300
            ${l?"text-base px-6 py-3":""}
          `,children:[s.jsx(_s,{size:l?18:16,className:"mr-2"}),"Vue ",t==="day"?"journalière":t==="week"?"hebdomadaire":"mensuelle"]})})]})},v4=({stats:t,isLoading:e=!1,isCompact:r=!1,isSidebar:n=!1})=>{const{totalAffaires:a=0,affairesEnCours:i=0,affairesTerminees:o=0,chargeEquipe:l=0,budgetTotal:c=0,budgetUtilise:u=0,tempsEstime:d=0,tempsRealise:f=0,membresActifs:A=0}=t||{};if(e)return s.jsx("div",{className:`
        ${n?"space-y-4":r?"grid grid-cols-2 gap-3":"grid grid-cols-4 gap-6"}
      `,children:[1,2,3,4].map(m=>s.jsx("div",{className:`
            animate-pulse bg-gray-200 dark:bg-gray-700 rounded-xl
            ${n?"h-24":r?"h-20":"h-32"}
          `},m))});const h=[{title:"Affaires Actives",value:t.affairesActives||0,IconComponent:n0e,iconColor:"#6b7c3d",bgColor:"#f0f4e8",borderColor:"#d9e2c4",trend:"+12%"},{title:"Heures Planifiées",value:t.heuresPlanifiees||0,IconComponent:wn,iconColor:"#8b6914",bgColor:"#faf6f0",borderColor:"#f0e6d2",trend:"+5%"},{title:"Équipe Disponible",value:t.equipeDisponible||0,IconComponent:Ji,iconColor:"#6b7c3d",bgColor:"#f5f0e8",borderColor:"#e8dcc0",trend:"0%"},{title:"Charge de Travail",value:`${t.chargeTravail||0}%`,IconComponent:Do,iconColor:t.chargeTravail>80?"#dc2626":"#6b7c3d",bgColor:t.chargeTravail>80?"#fef2f2":"#f0f4e8",borderColor:t.chargeTravail>80?"#fecaca":"#d9e2c4",trend:"+8%"}];return s.jsx("div",{className:`
      ${n?"space-y-6":r?"grid grid-cols-1 gap-4":"grid grid-cols-4 gap-6"}
    `,children:h.map((m,p)=>s.jsxs("div",{className:`
            rounded-xl border transition-all duration-200 hover:shadow-lg hover:border-[#6b7c3d]
            ${n?"p-6":r?"p-4":"p-6"}
          `,style:{backgroundColor:m.bgColor,borderColor:m.borderColor},children:[s.jsxs("div",{className:`flex items-center ${n?"justify-between mb-4":r?"justify-between mb-3":"justify-between mb-4"}`,children:[s.jsx("div",{className:`
              rounded-lg p-3 bg-white/60 backdrop-blur-sm
              ${n?"p-4":""}
            `,children:s.jsx(m.IconComponent,{className:`${n?"h-8 w-8":r?"h-5 w-5":"h-6 w-6"}`,style:{color:m.iconColor}})}),n&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`
                  text-sm font-medium
                  ${m.trend.startsWith("+")?"text-green-600":m.trend.startsWith("-")?"text-red-600":"text-gray-600"}
                `,children:m.trend}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"vs semaine dernière"})]})]}),s.jsx("div",{className:`
            font-bold text-[#000000] mb-2
            ${n?"text-3xl":r?"text-xl":"text-2xl"}
          `,children:m.value}),s.jsx("div",{className:`
            text-[#333333] font-medium
            ${n?"text-lg":r?"text-sm":"text-base"}
          `,children:m.title}),!n&&!r&&s.jsxs("div",{className:"mt-3 flex items-center text-sm",children:[s.jsx("span",{className:`
                ${m.trend.startsWith("+")?"text-green-600":m.trend.startsWith("-")?"text-red-600":"text-gray-600"}
                font-medium
              `,children:m.trend}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"vs période précédente"})]}),m.title==="Charge de Travail"&&n&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:`
                    h-3 rounded-full transition-all duration-500
                    ${t.chargeTravail>80?"bg-red-500":t.chargeTravail>60?"bg-yellow-500":"bg-green-500"}
                  `,style:{width:`${Math.min(t.chargeTravail||0,100)}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{children:"0%"}),s.jsx("span",{children:"100%"})]})]})]},p))})},LF=({isFullPage:t=!1})=>{const[e,r]=y.useState([]),[n,a]=y.useState(!0),[i,o]=y.useState(null),[l,c]=y.useState("week"),[u,d]=y.useState(new Date),[f,A]=y.useState({start:new Date,end:new Date}),[h,m]=y.useState(null),[p,g]=y.useState(null),[x,v]=y.useState(null),b=y.useRef(null),C=Clt(_9(RF,{activationConstraint:{distance:8}}),_9(ese,{activationConstraint:{delay:200,tolerance:5}})),j=()=>{switch(l){case"day":return{start:new Date(u),end:new Date(u)};case"week":return{start:Gi(u,{weekStartsOn:1}),end:H2(u,{weekStartsOn:1})};case"month":const D=new Date(u.getFullYear(),u.getMonth(),1),S=new Date(u.getFullYear(),u.getMonth()+1,0);return{start:D,end:S};default:return{start:Gi(u,{weekStartsOn:1}),end:H2(u,{weekStartsOn:1})}}},w=async()=>{try{a(!0),o(null);const{start:D,end:S}=j(),[F,M]=await Promise.all([Uj.getAffairesPlanning(D,S),Uj.getPlanningStats(D,S)]);r(F),v(M)}catch(D){console.error("Erreur lors du chargement des affaires:",D),o("Erreur lors du chargement du planning"),Vt.show({title:"Erreur",message:"Impossible de charger les données du planning",color:"red"})}finally{a(!1)}};y.useEffect(()=>{const D=j();A(D)},[l,u]),y.useEffect(()=>{w()},[l,u]);const N=D=>{const S=e.find(F=>F.id===D.active.id);g(S)},E=async D=>{const{active:S,over:F}=D;if(g(null),!!F)try{const M=S.id,R=F.data.current;if(!R||!R.date){console.warn("Drop data invalide");return}const U=e.find(X=>X.id===M);if(!U){console.warn("Affaire non trouvée");return}const z=new Date(R.date),Q=U.dateFin.getTime()-U.dateDebut.getTime(),H=new Date(z.getTime()+Q),q=Uj.validateMove(U,z,H);if(!q.isValid){Vt.show({title:"Déplacement impossible",message:q.errors.join(", "),color:"red"});return}await Uj.moveAffaire(M,z,H),r(X=>X.map($=>$.id===M?{...$,dateDebut:z,dateFin:H}:$)),Vt.show({title:"Affaire déplacée",message:`${U.numero} déplacée vers le ${on(z,"dd/MM/yyyy",{locale:Un})}`,color:"green"})}catch(M){console.error("Erreur lors du déplacement:",M),Vt.show({title:"Erreur",message:"Impossible de déplacer l'affaire",color:"red"})}},_=D=>{const S=D==="next"?1:-1;switch(l){case"day":d(F=>new Date(F.getTime()+S*24*60*60*1e3));break;case"week":d(F=>S>0?Vk(F,1):Mve(F));break;case"month":d(F=>new Date(F.getFullYear(),F.getMonth()+S,1));break}},k=()=>{const{start:D,end:S}=j();switch(l){case"day":return on(u,"EEEE dd MMMM yyyy",{locale:Un});case"week":return`Semaine du ${on(D,"dd/MM",{locale:Un})} au ${on(S,"dd/MM/yyyy",{locale:Un})}`;case"month":return on(u,"MMMM yyyy",{locale:Un});default:return""}};return n?s.jsx(Hr,{p:"lg",withBorder:!0,shadow:"sm",radius:"md",children:s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(Zi,{size:"lg"})})}):t?s.jsxs("div",{className:"h-full w-full",style:{background:"#faf6f0"},children:[s.jsxs("div",{className:"w-full border-b border-[#e8dcc0] px-8 py-6",style:{background:"#f5f0e8"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(_s,{className:"h-7 w-7 text-[#6b7c3d]"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-[#000000]",children:"Planning Interactif"}),s.jsx("p",{className:"text-[#333333] text-lg",children:k()})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(rr,{variant:"outline",leftSection:s.jsx(_a,{size:18}),onClick:w,size:"md",className:"border-[#6b7c3d] text-[#6b7c3d] hover:bg-[#6b7c3d] hover:text-white text-base px-6",children:"Actualiser"}),s.jsx(rr,{onClick:()=>d(new Date),size:"md",className:"bg-[#6b7c3d] text-white hover:bg-[#556533] text-base px-6",children:"Aujourd'hui"})]})]}),s.jsx(W9,{currentView:l,onViewChange:c,currentDate:u,onDateChange:d,onNavigate:_,periodTitle:k(),isCompact:!1,isFullWidth:!0})]}),s.jsxs("div",{className:"flex h-[calc(100%-180px)] w-full",children:[s.jsx("div",{className:"flex-1 overflow-auto p-8",children:s.jsx(V9,{affaires:e,currentView:l,currentDate:u,onAffaireSelect:m,isFullPage:!0,isFullWidth:!0,isLoading:n})}),s.jsx("div",{className:"w-96 border-l border-[#e8dcc0] flex-shrink-0",style:{background:"#f0f4e8"},children:s.jsxs("div",{className:"h-full overflow-auto p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-[#000000] mb-6 flex items-center",children:[s.jsx(_a,{className:"h-5 w-5 mr-2 text-[#6b7c3d]"}),"Statistiques"]}),s.jsx(v4,{stats:x,isCompact:!1,isSidebar:!0})]})})]})]}):s.jsxs("div",{className:`${t?"h-full flex flex-col":"max-w-full mx-auto"} ${t?"gap-3":"space-y-6"}`,children:[s.jsxs(Hr,{p:t?"md":"lg",withBorder:!0,shadow:"sm",radius:"md",style:{background:"#faf6f0"},className:t?"flex-shrink-0":"",children:[s.jsxs(Bt,{justify:"space-between",mb:t?"xs":"md",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_s,{className:"text-[#6b7c3d]",size:t?28:32}),s.jsxs("div",{children:[s.jsx(Kr,{order:t?3:2,className:"text-[#000000]",children:t?"Planning":"Planning Interactif"}),!t&&s.jsx("p",{className:"text-[#333333] text-sm",children:"Surface Microsoft optimisé"})]})]}),s.jsxs(Bt,{children:[s.jsx(rr,{variant:"outline",leftSection:s.jsx(_a,{size:16}),onClick:w,size:t?"sm":"md",className:"border-[#6b7c3d] text-[#6b7c3d] hover:bg-[#6b7c3d] hover:text-white",children:"Actualiser"}),s.jsx(rr,{onClick:()=>d(new Date),size:t?"sm":"md",className:"bg-[#6b7c3d] text-white hover:bg-[#556533]",children:"Aujourd'hui"})]})]}),s.jsx(W9,{currentView:l,onViewChange:c,currentDate:u,onDateChange:d,onNavigate:_,periodTitle:k(),isCompact:t})]}),s.jsxs("div",{className:t?"flex gap-3 flex-1 overflow-hidden":"space-y-6",children:[t&&x&&s.jsx("div",{className:"w-80 flex-shrink-0",children:s.jsx(v4,{stats:x,isCompact:!0})}),s.jsxs("div",{className:t?"flex-1 flex flex-col overflow-hidden":"",children:[!t&&x&&s.jsx(v4,{stats:x}),i&&s.jsx(Ia,{icon:s.jsx(Ls,{size:16}),title:"Erreur",color:"red",className:"bg-red-50 border-red-200",children:i}),s.jsx(Hr,{p:t?"md":"lg",withBorder:!0,shadow:"sm",radius:"md",ref:b,className:t?"flex-1 overflow-hidden":"",children:s.jsxs(bct,{sensors:C,onDragStart:N,onDragEnd:E,children:[s.jsx(V9,{affaires:e,currentView:l,currentDate:u,onAffaireSelect:m,isFullPage:t,isLoading:n}),s.jsx(Uct,{children:p&&s.jsx(X_,{affaire:p,isDragging:!0,style:{transform:"rotate(5deg)",opacity:.8,cursor:"grabbing"}})})]})})]})]})]})},Hct=()=>s.jsx("div",{className:"h-full",children:s.jsx(LF,{isFullPage:!1})}),Qct=()=>s.jsx("div",{className:"h-full",children:s.jsx(LF,{isFullPage:!0})}),zct=({children:t})=>{var c,u;const e=Fr(),{user:r,logout:n}=Ya(),{isDark:a,toggleTheme:i}=Pk(),o=()=>{e(-1)},l=()=>{n(),e("/auth/login")};return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsx("div",{className:"w-full px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_s,{className:"h-8 w-8 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Planning Interactif"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vision complète du planning"})]})]}),s.jsx(rr,{variant:"light",leftSection:s.jsx(Ci,{size:16}),onClick:o,className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:"Retour"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Dn,{variant:"light",onClick:i,size:"lg",className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:a?s.jsx(Qk,{size:20}):s.jsx(Hk,{size:20})}),s.jsx(sk,{inline:!0,label:"3",size:16,color:"red",children:s.jsx(Dn,{variant:"light",size:"lg",className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:s.jsx(Fd,{size:20})})}),s.jsxs(Ar,{shadow:"md",width:200,children:[s.jsx(Ar.Target,{children:s.jsxs(rr,{variant:"light",leftSection:s.jsxs(Ch,{size:"sm",radius:"xl",children:[(c=r==null?void 0:r.prenom)==null?void 0:c[0],(u=r==null?void 0:r.nom)==null?void 0:u[0]]}),className:"text-gray-700 dark:text-gray-300",children:[r==null?void 0:r.prenom," ",r==null?void 0:r.nom]})}),s.jsxs(Ar.Dropdown,{children:[s.jsx(Ar.Item,{leftSection:s.jsx(Wa,{size:16}),onClick:()=>e("/profil"),children:"Mon profil"}),s.jsx(Ar.Item,{leftSection:s.jsx(kh,{size:16}),onClick:()=>e("/securite"),children:"Sécurité"}),s.jsx(Ar.Item,{leftSection:s.jsx(kh,{size:16}),onClick:()=>e("/parametres"),children:"Paramètres"}),s.jsx(Ar.Divider,{}),s.jsx(Ar.Item,{leftSection:s.jsx($G,{size:16}),onClick:l,color:"red",children:"Déconnexion"})]})]})]})]})})}),s.jsx("main",{className:"flex-1 overflow-hidden",children:t})]})},nb="/api/chantiers";function Vct(){const[t,e]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState("estimation"),A=Fl({initialValues:{nom:"",code:"",client:"",dateDebut:null,dateFin:null,statut:"En préparation",description:"",adresse:"",responsable:""},validate:{nom:w=>w.trim().length<2?"Le nom doit contenir au moins 2 caractères":null,code:w=>w.trim().length<2?"Le code doit contenir au moins 2 caractères":null,client:w=>w.trim().length<2?"Le nom du client est requis":null,dateDebut:w=>w?null:"La date de début est requise",dateFin:w=>w?null:"La date de fin est requise"}}),h=Fl({initialValues:{montantMarcheSigne:0,budgetDepenses:0,achatMatieresPremieres:0,sousTraitance:0,tempsFabrication:0,tempsPause:0},validate:{montantMarcheSigne:w=>w<0?"Le montant ne peut pas être négatif":null,budgetDepenses:w=>w<0?"Le budget ne peut pas être négatif":null,achatMatieresPremieres:w=>w<0?"Le montant ne peut pas être négatif":null,sousTraitance:w=>w<0?"Le montant ne peut pas être négatif":null,tempsFabrication:w=>w<0?"Le temps ne peut pas être négatif":null,tempsPause:w=>w<0?"Le temps ne peut pas être négatif":null}}),m=async()=>{try{n(!0);const w=await Yn.get(nb);e(w.data.data),n(!1)}catch(w){console.error("Erreur lors de la récupération des chantiers:",w),Vt.show({title:"Erreur",message:"Impossible de récupérer les chantiers",color:"red"}),n(!1)}};y.useEffect(()=>{m()},[]);const p=()=>{A.reset(),u(null),i(!0)},g=w=>{A.setValues({nom:w.nom,code:w.code,client:w.client,dateDebut:new Date(w.dateDebut),dateFin:new Date(w.dateFin),statut:w.statut,description:w.description||"",adresse:w.adresse||"",responsable:w.responsable||""}),u(w),i(!0)},x=(w,N)=>{u(w),f(N);const E=w[N]||{montantMarcheSigne:0,budgetDepenses:0,achatMatieresPremieres:0,sousTraitance:0,tempsFabrication:0,tempsPause:0};h.setValues(E),l(!0)},v=async w=>{var N,E;try{c?(await Yn.put(`${nb}/${c._id}`,w),Vt.show({title:"Succès",message:"Chantier mis à jour avec succès",color:"green"})):(await Yn.post(nb,w),Vt.show({title:"Succès",message:"Chantier créé avec succès",color:"green"})),i(!1),m()}catch(_){console.error("Erreur lors de l'enregistrement du chantier:",_),Vt.show({title:"Erreur",message:((E=(N=_.response)==null?void 0:N.data)==null?void 0:E.message)||"Une erreur est survenue",color:"red"})}},b=async w=>{var N,E;try{await Yn.put(`${nb}/${c._id}/finances`,{type:d,donnees:w}),Vt.show({title:"Succès",message:`Données financières (${d==="estimation"?"Estimation":"Réel"}) mises à jour avec succès`,color:"green"}),l(!1),m()}catch(_){console.error("Erreur lors de l'enregistrement des données financières:",_),Vt.show({title:"Erreur",message:((E=(N=_.response)==null?void 0:N.data)==null?void 0:E.message)||"Une erreur est survenue",color:"red"})}},C=async w=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce chantier ?"))try{await Yn.delete(`${nb}/${w}`),Vt.show({title:"Succès",message:"Chantier supprimé avec succès",color:"green"}),m()}catch(N){console.error("Erreur lors de la suppression du chantier:",N),Vt.show({title:"Erreur",message:"Impossible de supprimer le chantier",color:"red"})}},j=w=>{switch(w){case"En préparation":return"blue";case"En cours":return"green";case"En pause":return"yellow";case"Terminé":return"teal";case"Annulé":return"red";default:return"gray"}};return s.jsxs("div",{children:[s.jsxs(Bt,{position:"apart",mb:"lg",children:[s.jsx(Kr,{children:"Gestion des Chantiers"}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:18}),onClick:p,children:"Nouveau Chantier"})]}),s.jsxs(Ye,{striped:!0,highlightOnHover:!0,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Code"}),s.jsx("th",{children:"Nom"}),s.jsx("th",{children:"Client"}),s.jsx("th",{children:"Statut"}),s.jsx("th",{children:"Date début"}),s.jsx("th",{children:"Date fin"}),s.jsx("th",{children:"Marché signé (€)"}),s.jsx("th",{children:"Marge prev. (€)"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:9,children:s.jsx(He,{align:"center",children:"Chargement..."})})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:9,children:s.jsx(He,{align:"center",children:"Aucun chantier trouvé"})})}):t.map(w=>{var N,E,_;return s.jsxs("tr",{children:[s.jsx("td",{children:w.code}),s.jsx("td",{children:w.nom}),s.jsx("td",{children:w.client}),s.jsx("td",{children:s.jsx(bn,{color:j(w.statut),children:w.statut})}),s.jsx("td",{children:new Date(w.dateDebut).toLocaleDateString()}),s.jsx("td",{children:new Date(w.dateFin).toLocaleDateString()}),s.jsxs("td",{children:[((E=(N=w.estimation)==null?void 0:N.montantMarcheSigne)==null?void 0:E.toLocaleString())||0," €"]}),s.jsx("td",{children:s.jsxs(He,{c:w.margePrevisionnelle>=0?"green":"red",fw:500,children:[((_=w.margePrevisionnelle)==null?void 0:_.toLocaleString())||0," €"]})}),s.jsx("td",{children:s.jsxs(Bt,{spacing:5,children:[s.jsx(Ai,{label:"Modifier",children:s.jsx(Dn,{onClick:()=>g(w),color:"blue",children:s.jsx(Cx,{size:18})})}),s.jsx(Ai,{label:"Gérer l'estimation",children:s.jsx(Dn,{onClick:()=>x(w,"estimation"),color:"teal",children:s.jsx(Do,{size:18})})}),s.jsx(Ai,{label:"Gérer le réel",children:s.jsx(Dn,{onClick:()=>x(w,"reel"),color:"violet",children:s.jsx(Tm,{size:18})})}),s.jsx(Ai,{label:"Supprimer",children:s.jsx(Dn,{onClick:()=>C(w._id),color:"red",children:s.jsx(Zn,{size:18})})})]})})]},w._id)})})]}),s.jsx(fa,{opened:a,onClose:()=>i(!1),title:c?"Modifier le chantier":"Nouveau chantier",size:"lg",children:s.jsxs("form",{onSubmit:A.onSubmit(v),children:[s.jsxs(tt,{gutter:"md",children:[s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Nom du chantier",placeholder:"Ex: Rénovation bureaux Paris",required:!0,...A.getInputProps("nom")})}),s.jsx(tt.Col,{span:6,children:s.jsx(dn,{label:"Code du chantier",placeholder:"Ex: CHAN-2023-001",required:!0,...A.getInputProps("code")})}),s.jsx(tt.Col,{span:12,children:s.jsx(dn,{label:"Client",placeholder:"Nom du client",required:!0,...A.getInputProps("client")})}),s.jsx(tt.Col,{span:6,children:s.jsx(V2,{label:"Date de début",placeholder:"Sélectionner une date",required:!0,...A.getInputProps("dateDebut")})}),s.jsx(tt.Col,{span:6,children:s.jsx(V2,{label:"Date de fin",placeholder:"Sélectionner une date",required:!0,...A.getInputProps("dateFin")})}),s.jsx(tt.Col,{span:12,children:s.jsx(Wr,{label:"Statut",data:[{value:"En préparation",label:"En préparation"},{value:"En cours",label:"En cours"},{value:"En pause",label:"En pause"},{value:"Terminé",label:"Terminé"},{value:"Annulé",label:"Annulé"}],required:!0,...A.getInputProps("statut")})}),s.jsx(tt.Col,{span:12,children:s.jsx(dn,{label:"Adresse",placeholder:"Adresse du chantier",...A.getInputProps("adresse")})}),s.jsx(tt.Col,{span:12,children:s.jsx(dn,{label:"Description",placeholder:"Description du chantier",...A.getInputProps("description")})})]}),s.jsxs(Bt,{position:"right",mt:"md",children:[s.jsx(rr,{variant:"outline",onClick:()=>i(!1),children:"Annuler"}),s.jsx(rr,{type:"submit",children:"Enregistrer"})]})]})}),s.jsx(fa,{opened:o,onClose:()=>l(!1),title:s.jsxs(Bt,{children:[s.jsx(Tm,{size:20}),s.jsxs(He,{fw:500,children:[d==="estimation"?"Estimation financière":"Données financières réelles"," - ",c==null?void 0:c.nom]})]}),size:"lg",children:s.jsxs("form",{onSubmit:h.onSubmit(b),children:[s.jsxs(Hn,{p:"md",withBorder:!0,mb:"md",children:[s.jsxs(Kr,{order:4,mb:"sm",children:["Données ",d==="estimation"?"prévisionnelles":"réelles"]}),s.jsxs(tt,{gutter:"md",children:[s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Montant du marché signé (€)",placeholder:"0",precision:2,min:0,step:1e3,...h.getInputProps("montantMarcheSigne")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Budget des dépenses (€)",placeholder:"0",precision:2,min:0,step:1e3,...h.getInputProps("budgetDepenses")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Achat des matières premières (€)",placeholder:"0",precision:2,min:0,step:500,...h.getInputProps("achatMatieresPremieres")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Sous-traitance (€)",placeholder:"0",precision:2,min:0,step:500,...h.getInputProps("sousTraitance")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Temps de fabrication (h)",placeholder:"0",precision:1,min:0,step:4,...h.getInputProps("tempsFabrication")})}),s.jsx(tt.Col,{span:6,children:s.jsx(Hi,{label:"Temps de pause (h)",placeholder:"0",precision:1,min:0,step:1,...h.getInputProps("tempsPause")})})]}),s.jsx(wi,{my:"md"}),s.jsxs(ut,{children:[s.jsx(He,{fw:500,mb:5,children:"Marge calculée:"}),s.jsxs(He,{size:"xl",fw:700,c:h.values.montantMarcheSigne-h.values.budgetDepenses>=0?"green":"red",children:[(h.values.montantMarcheSigne-h.values.budgetDepenses).toLocaleString()," €"]})]})]}),s.jsxs(Bt,{position:"right",mt:"md",children:[s.jsx(rr,{variant:"outline",onClick:()=>l(!1),children:"Annuler"}),s.jsx(rr,{type:"submit",color:d==="estimation"?"teal":"violet",children:"Enregistrer"})]})]})})]})}const Wct=()=>{const[t,e]=y.useState(new Date),[r,n]=y.useState(new Date),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState([]),[A,h]=y.useState(!0),[m,p]=y.useState(!1),[g,x]=y.useState(null),[v,b]=y.useState({user:"",affaire:"",search:""}),C={plannings:[{id:1,title:"Installation cuisine - Maison Dupont",startDate:new Date,endDate:cb(new Date,2),userId:1,userName:"Jean Martin",affaireId:1,affaireName:"Cuisine Dupont",status:"en_cours",priority:"high",estimatedHours:16,description:"Installation complète de la cuisine avec pose du plan de travail"},{id:2,title:"Réparation porte d'entrée",startDate:cb(new Date,1),endDate:cb(new Date,1),userId:2,userName:"Pierre Durand",affaireId:2,affaireName:"Réparations Maison Martin",status:"planifie",priority:"medium",estimatedHours:4,description:"Réparation et ajustement de la porte d'entrée"}],users:[{id:1,name:"Jean Martin",role:"Menuisier"},{id:2,name:"Pierre Durand",role:"Apprenti"},{id:3,name:"Marie Petit",role:"Chef d'équipe"}],affaires:[{id:1,name:"Cuisine Dupont",status:"en_cours"},{id:2,name:"Réparations Maison Martin",status:"en_cours"},{id:3,name:"Dressing chambre",status:"planifie"}]};y.useEffect(()=>{j()},[]),y.useEffect(()=>{w()},[a,v]);const j=async()=>{h(!0);try{await new Promise(R=>setTimeout(R,500)),i(C.plannings),u(C.users),f(C.affaires)}catch(R){console.error("Erreur chargement données:",R)}finally{h(!1)}},w=()=>{let R=[...a];if(v.user&&(R=R.filter(U=>U.userId.toString()===v.user)),v.affaire&&(R=R.filter(U=>U.affaireId.toString()===v.affaire)),v.search){const U=v.search.toLowerCase();R=R.filter(z=>z.title.toLowerCase().includes(U)||z.userName.toLowerCase().includes(U)||z.affaireName.toLowerCase().includes(U))}l(R)},N=()=>{e(lq(t,1))},E=()=>{e(rq(t,1))},_=()=>{const R=fD(t),U=dD(R),z=Gi(R,{locale:Un}),Q=H2(U,{locale:Un}),H=[];let q=z;for(;q<=Q;)H.push(q),q=cb(q,1);return H},k=R=>o.filter(U=>{const z=new Date(U.startDate),Q=new Date(U.endDate);return R>=z&&R<=Q}),D=R=>{switch(R){case"planifie":return"bg-blue-100 text-blue-800";case"en_cours":return"bg-green-100 text-green-800";case"termine":return"bg-gray-100 text-gray-800";case"annule":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=R=>{switch(R){case"high":return"border-l-red-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-300"}},F=R=>{switch(R){case"planifie":return"Planifié";case"en_cours":return"En cours";case"termine":return"Terminé";case"annule":return"Annulé";default:return R}},M=_();return A?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_s,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Planification"}),s.jsx("p",{className:"text-gray-600",children:"Gestion des plannings et affectations d'équipe"})]})]}),s.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[s.jsx(Jn,{size:16}),s.jsx("span",{children:"Nouveau planning"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Plannings actifs"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.filter(R=>R.status==="en_cours").length})]}),s.jsx(Oh,{className:"text-blue-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Planifiés"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.filter(R=>R.status==="planifie").length})]}),s.jsx(wn,{className:"text-yellow-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Collaborateurs"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.length})]}),s.jsx(Ji,{className:"text-green-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Heures planifiées"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[a.reduce((R,U)=>R+U.estimatedHours,0),"h"]})]}),s.jsx(wn,{className:"text-purple-500",size:32})]})})]}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(jc,{className:"text-gray-400",size:20}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collaborateur"}),s.jsxs("select",{value:v.user,onChange:R=>b({...v,user:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Tous les collaborateurs"}),c.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Affaire"}),s.jsxs("select",{value:v.affaire,onChange:R=>b({...v,affaire:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les affaires"}),d.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),s.jsx("input",{type:"text",value:v.search,onChange:R=>b({...v,search:R.target.value}),placeholder:"Rechercher...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:on(t,"MMMM yyyy",{locale:Un})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(wx,{size:20})}),s.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(jx,{size:20})})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(R=>s.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500",children:R},R))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:M.map((R,U)=>{const z=k(R),Q=Fve(R,t),H=$2(R,new Date),q=$2(R,r);return s.jsxs("div",{onClick:()=>n(R),className:`min-h-24 p-2 border border-gray-100 cursor-pointer transition-colors ${Q?"bg-white hover:bg-gray-50":"bg-gray-50 text-gray-400"} ${H?"ring-2 ring-blue-500":""} ${q?"bg-blue-50":""}`,children:[s.jsx("div",{className:"text-sm font-medium",children:on(R,"d")}),s.jsxs("div",{className:"mt-1 space-y-1",children:[z.slice(0,2).map(X=>s.jsxs("div",{className:`text-xs p-1 rounded border-l-2 ${S(X.priority)} bg-gray-50`,title:X.title,children:[s.jsx("div",{className:"truncate font-medium",children:X.userName}),s.jsx("div",{className:"truncate text-gray-600",children:X.title})]},X.id)),z.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",z.length-2," autres"]})]})]},U)})})]})]}),r&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Plannings du ",on(r,"dd MMMM yyyy",{locale:Un})]})}),s.jsx("div",{className:"p-6",children:k(r).length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_s,{className:"mx-auto text-gray-400 mb-4",size:48}),s.jsx("p",{className:"text-gray-500",children:"Aucun planning pour cette date"})]}):s.jsx("div",{className:"space-y-4",children:k(r).map(R=>s.jsx("div",{className:`border rounded-lg p-4 border-l-4 ${S(R.priority)}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:R.title}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ji,{size:16}),s.jsx("span",{children:R.userName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ro,{size:16}),s.jsx("span",{children:R.affaireName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(wn,{size:16}),s.jsxs("span",{children:[R.estimatedHours,"h estimées"]})]})]}),R.description&&s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:R.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D(R.status)}`,children:F(R.status)}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>{x(R),p(!0)},className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(Po,{size:16})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(Zn,{size:16})})]})]})]})},R.id))})})]})]})},Gct=()=>{const[t,e]=y.useState("materiels"),[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState(!0),[d,f]=y.useState(!1),[A,h]=y.useState(null),[m,p]=y.useState({category:"",status:"",location:"",search:""}),g={materiels:[{id:1,name:"Perceuse Bosch Professional",category:"Outils électriques",type:"materiel",status:"disponible",location:"Atelier principal",description:"Perceuse sans fil 18V avec batteries",serialNumber:"BSH-2024-001",purchaseDate:"2024-01-15",value:350,maintenanceDate:"2024-06-15",condition:"excellent",currentUser:null},{id:2,name:"Scie circulaire Festool",category:"Outils électriques",type:"materiel",status:"en_utilisation",location:"Chantier Dupont",description:"Scie circulaire plongeante avec rail de guidage",serialNumber:"FST-2023-045",purchaseDate:"2023-08-20",value:850,maintenanceDate:"2024-08-20",condition:"bon",currentUser:"Jean Martin"},{id:3,name:"Camionnette Iveco",category:"Véhicules",type:"vehicule",status:"maintenance",location:"Garage",description:"Camionnette utilitaire pour transport matériel",serialNumber:"IVC-2022-003",purchaseDate:"2022-03-10",value:35e3,maintenanceDate:"2024-03-10",condition:"maintenance_required",currentUser:null},{id:4,name:"Échafaudage mobile",category:"Équipement sécurité",type:"equipement",status:"disponible",location:"Entrepôt",description:"Échafaudage mobile 4 niveaux",serialNumber:"ECH-2023-012",purchaseDate:"2023-05-15",value:1200,maintenanceDate:"2024-05-15",condition:"bon",currentUser:null}],reservations:[{id:1,ressourceId:1,ressourceName:"Perceuse Bosch Professional",userId:2,userName:"Pierre Durand",startDate:"2024-01-20",endDate:"2024-01-22",purpose:"Installation étagères",status:"confirmee",affaireName:"Aménagement bureau"},{id:2,ressourceId:3,ressourceName:"Camionnette Iveco",userId:1,userName:"Jean Martin",startDate:"2024-01-25",endDate:"2024-01-25",purpose:"Livraison matériel",status:"en_attente",affaireName:"Cuisine Dupont"}]},x=["Outils électriques","Outils manuels","Véhicules","Équipement sécurité","Machines","Consommables"],v=["Atelier principal","Entrepôt","Garage","Chantier externe","En réparation"];y.useEffect(()=>{b()},[]),y.useEffect(()=>{C()},[r,m,t]);const b=async()=>{u(!0);try{await new Promise(S=>setTimeout(S,500)),n(g.materiels),i(g.reservations)}catch(S){console.error("Erreur chargement données:",S)}finally{u(!1)}},C=()=>{let S=[...r];if(t==="materiels"?S=S.filter(F=>F.type==="materiel"):t==="vehicules"?S=S.filter(F=>F.type==="vehicule"):t==="equipements"&&(S=S.filter(F=>F.type==="equipement")),m.category&&(S=S.filter(F=>F.category===m.category)),m.status&&(S=S.filter(F=>F.status===m.status)),m.location&&(S=S.filter(F=>F.location===m.location)),m.search){const F=m.search.toLowerCase();S=S.filter(M=>M.name.toLowerCase().includes(F)||M.description.toLowerCase().includes(F)||M.serialNumber.toLowerCase().includes(F))}l(S)},j=S=>{switch(S){case"disponible":return"bg-green-100 text-green-800";case"en_utilisation":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-red-100 text-red-800";case"reserve":return"bg-yellow-100 text-yellow-800";case"hors_service":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=S=>{switch(S){case"excellent":return"text-green-600";case"bon":return"text-blue-600";case"moyen":return"text-yellow-600";case"maintenance_required":return"text-red-600";default:return"text-gray-600"}},N=S=>{switch(S){case"disponible":return"Disponible";case"en_utilisation":return"En utilisation";case"maintenance":return"En maintenance";case"reserve":return"Réservé";case"hors_service":return"Hors service";default:return S}},E=S=>{switch(S){case"excellent":return"Excellent";case"bon":return"Bon";case"moyen":return"Moyen";case"maintenance_required":return"Maintenance requise";default:return S}},_=S=>{switch(S){case"disponible":return s.jsx(Gr,{className:"w-4 h-4"});case"en_utilisation":return s.jsx(Wa,{className:"w-4 h-4"});case"maintenance":return s.jsx(kh,{className:"w-4 h-4"});case"reserve":return s.jsx(wn,{className:"w-4 h-4"});case"hors_service":return s.jsx(Ls,{className:"w-4 h-4"});default:return s.jsx(Sl,{className:"w-4 h-4"})}},k={total:r.length,disponible:r.filter(S=>S.status==="disponible").length,en_utilisation:r.filter(S=>S.status==="en_utilisation").length,maintenance:r.filter(S=>S.status==="maintenance").length,valeur_totale:r.reduce((S,F)=>S+F.value,0)},D=[{id:"materiels",label:"Matériels",icon:R2},{id:"vehicules",label:"Véhicules",icon:Rk},{id:"equipements",label:"Équipements",icon:Sl},{id:"reservations",label:"Réservations",icon:_s}];return c?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(R2,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Ressources"}),s.jsx("p",{className:"text-gray-600",children:"Matériels, véhicules et équipements de l'entreprise"})]})]}),s.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[s.jsx(Jn,{size:16}),s.jsx("span",{children:"Nouvelle ressource"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total ressources"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.total})]}),s.jsx(Sl,{className:"text-gray-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Disponibles"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.disponible})]}),s.jsx(Gr,{className:"text-green-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En utilisation"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:k.en_utilisation})]}),s.jsx(Wa,{className:"text-blue-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En maintenance"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.maintenance})]}),s.jsx(kh,{className:"text-red-500",size:32})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Valeur totale"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[k.valeur_totale.toLocaleString(),"€"]})]}),s.jsx(t0e,{className:"text-purple-500",size:32})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:D.map(S=>{const F=S.icon;return s.jsxs("button",{onClick:()=>e(S.id),className:`flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ${t===S.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(F,{size:20}),s.jsx("span",{children:S.label})]},S.id)})})}),s.jsx("div",{className:"p-6",children:t==="reservations"?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Réservations en cours"}),s.jsx("div",{className:"space-y-4",children:a.map(S=>s.jsx("div",{className:"border rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:S.ressourceName}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wa,{size:16}),s.jsx("span",{children:S.userName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_s,{size:16}),s.jsxs("span",{children:[S.startDate," - ",S.endDate]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ro,{size:16}),s.jsx("span",{children:S.affaireName})]}),s.jsx("p",{className:"mt-2",children:S.purpose})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="confirmee"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:S.status==="confirmee"?"Confirmée":"En attente"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(Po,{size:16})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(Zn,{size:16})})]})]})]})},S.id))})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(jc,{className:"text-gray-400",size:20}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{children:s.jsxs("select",{value:m.category,onChange:S=>p({...m,category:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Toutes les catégories"}),x.map(S=>s.jsx("option",{value:S,children:S},S))]})}),s.jsx("div",{children:s.jsxs("select",{value:m.status,onChange:S=>p({...m,status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tous les statuts"}),s.jsx("option",{value:"disponible",children:"Disponible"}),s.jsx("option",{value:"en_utilisation",children:"En utilisation"}),s.jsx("option",{value:"maintenance",children:"En maintenance"}),s.jsx("option",{value:"reserve",children:"Réservé"}),s.jsx("option",{value:"hors_service",children:"Hors service"})]})}),s.jsx("div",{children:s.jsxs("select",{value:m.location,onChange:S=>p({...m,location:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tous les emplacements"}),v.map(S=>s.jsx("option",{value:S,children:S},S))]})}),s.jsxs("div",{className:"relative",children:[s.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),s.jsx("input",{type:"text",value:m.search,onChange:S=>p({...m,search:S.target.value}),placeholder:"Rechercher...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(S=>s.jsxs("div",{className:"border rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:S.name}),s.jsx("p",{className:"text-sm text-gray-600",children:S.category})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[_(S.status),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(S.status)}`,children:N(S.status)})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"N° série:"}),s.jsx("span",{className:"font-mono text-gray-900",children:S.serialNumber})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"État:"}),s.jsx("span",{className:`font-medium ${w(S.condition)}`,children:E(S.condition)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Emplacement:"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Au,{size:14,className:"text-gray-400"}),s.jsx("span",{className:"text-gray-900",children:S.location})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Valeur:"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[S.value.toLocaleString(),"€"]})]}),S.currentUser&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Utilisateur:"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Wa,{size:14,className:"text-blue-400"}),s.jsx("span",{className:"text-blue-600",children:S.currentUser})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:S.description}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(ha,{size:16})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 transition-colors",children:s.jsx(Po,{size:16})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(Zn,{size:16})})]}),S.status==="disponible"&&s.jsx("button",{className:"text-sm bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded transition-colors",children:"Réserver"})]})]},S.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Sl,{className:"mx-auto text-gray-400 mb-4",size:48}),s.jsx("p",{className:"text-gray-500",children:"Aucune ressource trouvée"})]})]})})]})]})};hp.register(ew,tw,l0,bu,K3,YE,KE,xh,c0);const qct=()=>{const[t,e]=y.useState("overview"),[r,n]=y.useState([]),[a,i]=y.useState(null),[o,l]=y.useState(!0),[c,u]=y.useState("week"),[d,f]=y.useState(""),[A,h]=y.useState(""),m={timeEntries:[{id:1,userId:1,userName:"Jean Martin",affaireId:1,affaireName:"Cuisine Dupont",date:"2024-01-15",heuresNormales:8,heuresSupplementaires:2,typeHeure:"normale",description:"Installation des meubles hauts",taux:35},{id:2,userId:2,userName:"Pierre Durand",affaireId:1,affaireName:"Cuisine Dupont",date:"2024-01-15",heuresNormales:7,heuresSupplementaires:0,typeHeure:"normale",description:"Préparation et découpe",taux:28},{id:3,userId:1,userName:"Jean Martin",affaireId:2,affaireName:"Dressing chambre",date:"2024-01-16",heuresNormales:6,heuresSupplementaires:0,typeHeure:"normale",description:"Prise de mesures et étude",taux:35}],users:[{id:1,name:"Jean Martin",role:"Menuisier senior",tauxHoraire:35},{id:2,name:"Pierre Durand",role:"Apprenti",tauxHoraire:28},{id:3,name:"Marie Petit",role:"Chef d'équipe",tauxHoraire:42}],affaires:[{id:1,name:"Cuisine Dupont",budget:15e3},{id:2,name:"Dressing chambre",budget:8e3},{id:3,name:"Aménagement bureau",budget:12e3}]};y.useEffect(()=>{p()},[c]);const p=async()=>{l(!0);try{await new Promise(N=>setTimeout(N,500)),n(m.timeEntries),g(m.timeEntries)}catch(N){console.error("Erreur chargement données:",N)}finally{l(!1)}},g=N=>{const E=N.reduce((F,M)=>F+M.heuresNormales+M.heuresSupplementaires,0),_=N.reduce((F,M)=>F+(M.heuresNormales+M.heuresSupplementaires)*M.taux,0),k=N.filter(F=>F.date===on(new Date,"yyyy-MM-dd")).reduce((F,M)=>F+M.heuresNormales+M.heuresSupplementaires,0),D=N.reduce((F,M)=>(F[M.userName]||(F[M.userName]=0),F[M.userName]+=M.heuresNormales+M.heuresSupplementaires,F),{}),S=N.reduce((F,M)=>(F[M.affaireName]||(F[M.affaireName]=0),F[M.affaireName]+=M.heuresNormales+M.heuresSupplementaires,F),{});i({totalHeures:E,totalCout:_,moyenneHeuresToday:k,nombreCollaborateurs:Object.keys(D).length,repartitionUtilisateurs:D,repartitionAffaires:S,tendance:E>160?"up":"down"})},x=N=>{const E=Math.floor(N),_=Math.round((N-E)*60);return`${E}h${_.toString().padStart(2,"0")}`},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12,family:"Inter"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{font:{size:11}}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}}}},b={labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],datasets:[{label:"Heures travaillées",data:[48,52,45,38,42,8,0],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4}]},C=a?{labels:Object.keys(a.repartitionUtilisateurs),datasets:[{data:Object.values(a.repartitionUtilisateurs),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderWidth:0}]}:null,j=a?{labels:Object.keys(a.repartitionAffaires),datasets:[{label:"Heures par affaire",data:Object.values(a.repartitionAffaires),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]}:null,w=[{id:"overview",label:"Vue d'ensemble",icon:Do},{id:"users",label:"Par utilisateur",icon:Wa},{id:"projects",label:"Par affaire",icon:ro},{id:"details",label:"Détails",icon:Rk}];return o?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(wn,{className:"text-blue-600",size:32}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Suivi du Temps Passé"}),s.jsx("p",{className:"text-gray-600",children:"Analyse et rapports du temps de travail"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("select",{value:c,onChange:N=>u(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"week",children:"Cette semaine"}),s.jsx("option",{value:"month",children:"Ce mois"}),s.jsx("option",{value:"quarter",children:"Ce trimestre"}),s.jsx("option",{value:"year",children:"Cette année"})]}),s.jsxs("button",{className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[s.jsx(Va,{size:16}),s.jsx("span",{children:"Exporter"})]})]})]}),a&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total heures"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x(a.totalHeures)}),s.jsxs("div",{className:"flex items-center mt-2",children:[a.tendance==="up"?s.jsx(Tl,{className:"text-green-500 mr-1",size:16}):s.jsx(Dm,{className:"text-red-500 mr-1",size:16}),s.jsxs("span",{className:`text-sm ${a.tendance==="up"?"text-green-600":"text-red-600"}`,children:[a.tendance==="up"?"+12%":"-5%"," vs semaine précédente"]})]})]}),s.jsx(wn,{className:"text-blue-500",size:40})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Coût total"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[a.totalCout.toLocaleString(),"€"]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Moy: ",Math.round(a.totalCout/a.totalHeures),"€/h"]})]}),s.jsx(Oh,{className:"text-green-500",size:40})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Collaborateurs actifs"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.nombreCollaborateurs}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Moy: ",x(a.totalHeures/a.nombreCollaborateurs),"/pers"]})]}),s.jsx(Wa,{className:"text-purple-500",size:40})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Heures aujourd'hui"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x(a.moyenneHeuresToday)}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"En cours"})]}),s.jsx(il,{className:"text-orange-500",size:40})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8 px-6",children:w.map(N=>{const E=N.icon;return s.jsxs("button",{onClick:()=>e(N.id),className:`flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ${t===N.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(E,{size:20}),s.jsx("span",{children:N.label})]},N.id)})})}),s.jsxs("div",{className:"p-6",children:[t==="overview"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Évolution des heures"}),s.jsx("div",{className:"h-64",children:s.jsx(jJe,{data:b,options:v})})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Répartition par utilisateur"}),s.jsx("div",{className:"h-64",children:C&&s.jsx(CJe,{data:C,options:v})})]})]}),t==="users"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analyse par utilisateur"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.users.map(N=>{const E=(a==null?void 0:a.repartitionUtilisateurs[N.name])||0,_=E*N.tauxHoraire;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Wa,{className:"text-blue-600",size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),s.jsx("p",{className:"text-sm text-gray-600",children:N.role})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Heures totales:"}),s.jsx("span",{className:"font-semibold",children:x(E)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Taux horaire:"}),s.jsxs("span",{className:"font-semibold",children:[N.tauxHoraire,"€/h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Coût total:"}),s.jsxs("span",{className:"font-semibold text-green-600",children:[_.toLocaleString(),"€"]})]})]})]},N.id)})})]}),t==="projects"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analyse par affaire"}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Heures par affaire"}),s.jsx("div",{className:"h-64",children:j&&s.jsx(jte,{data:j,options:v})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.affaires.map(N=>{const E=(a==null?void 0:a.repartitionAffaires[N.name])||0,_=E>0?Math.min(E*35/N.budget*100,100):0;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ro,{className:"text-green-600",size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Budget: ",N.budget.toLocaleString(),"€"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Heures passées:"}),s.jsx("span",{className:"font-semibold",children:x(E)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Coût estimé:"}),s.jsxs("span",{className:"font-semibold",children:[(E*35).toLocaleString(),"€"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progression:"}),s.jsxs("span",{className:"font-semibold",children:[_.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${_}%`}})})]})]})]},N.id)})})]}),t==="details"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Détails des entrées de temps"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tous les utilisateurs"}),m.users.map(N=>s.jsx("option",{value:N.name,children:N.name},N.id))]}),s.jsxs("select",{value:A,onChange:N=>h(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Toutes les affaires"}),m.affaires.map(N=>s.jsx("option",{value:N.name,children:N.name},N.id))]})]})]}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Affaire"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coût"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.filter(N=>!d||N.userName===d).filter(N=>!A||N.affaireName===A).map(N=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:on(new Date(N.date),"dd/MM/yyyy",{locale:Un})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(Wa,{className:"text-blue-600",size:16})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.userName})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.affaireName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(N.heuresNormales+N.heuresSupplementaires)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:[((N.heuresNormales+N.heuresSupplementaires)*N.taux).toLocaleString(),"€"]}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:N.description})]},N.id))})]})})]})]})]})]})},Wb={getAllTasks:async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(a=>{t[a]!==void 0&&t[a]!==null&&t[a]!==""&&e.append(a,t[a])});const r=e.toString(),n=`/tasks${r?`?${r}`:""}`;return await Ee.get(n)}catch(e){throw e}},getTaskById:async t=>{try{return await Ee.get(`/tasks/${t}`)}catch(e){throw e}},createTask:async t=>{try{return await Ee.post("/tasks",t)}catch(e){throw e}},updateTask:async(t,e)=>{try{return await Ee.put(`/tasks/${t}`,e)}catch(r){throw r}},deleteTask:async t=>{try{return await Ee.delete(`/tasks/${t}`)}catch(e){throw e}},getTasksStats:async()=>{try{return await Ee.get("/tasks/stats")}catch(t){throw t}}},Kct=()=>{const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!0),[i,o]=y.useState({page:1,limit:10,total:0,pages:1}),[l,c]=y.useState({search:"",statut:"",priorite:""}),u=async()=>{a(!0);try{const p=await Wb.getAllTasks({...l,page:i.page,limit:i.limit});if(p&&p.data){r(p.data.tasks||[]);const g=p.data.pagination||{page:1,limit:10,total:0,pages:1};o(g)}else r([]),o({page:1,limit:10,total:0,pages:1})}catch(p){console.error("Erreur lors du chargement des tâches:",p),Vt.show({title:"Erreur",message:"Impossible de charger la liste des tâches",color:"red"}),r([]),o({page:1,limit:10,total:0,pages:1})}finally{a(!1)}};y.useEffect(()=>{u()},[i.page,l]);const d=p=>{switch(p){case"à faire":return"gray";case"en cours":return"blue";case"terminée":return"green";default:return"gray"}},f=p=>{switch(p){case"à faire":return s.jsx(Ls,{size:16});case"en cours":return s.jsx(wn,{size:16});case"terminée":return s.jsx(Gr,{size:16});default:return null}},A=p=>{switch(p){case"basse":return"teal";case"moyenne":return"yellow";case"haute":return"red";default:return"gray"}},h=async p=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette tâche ?"))try{await Wb.deleteTask(p),u(),Vt.show({title:"Succès",message:"Tâche supprimée avec succès",color:"green"})}catch(g){console.error("Erreur lors de la suppression de la tâche:",g),Vt.show({title:"Erreur",message:"Impossible de supprimer la tâche",color:"red"})}},m=()=>{o(p=>({...p,page:1}))};return s.jsxs("div",{children:[s.jsxs(Bt,{position:"apart",mb:"md",children:[s.jsx(Kr,{children:"Gestion des Tâches"}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:16}),onClick:()=>t("/taches/nouveau"),children:"Nouvelle Tâche"})]}),s.jsx(Hn,{p:"md",mb:"lg",children:s.jsxs(Bt,{children:[s.jsx(dn,{placeholder:"Rechercher une tâche...",icon:s.jsx(Ol,{size:16}),value:l.search,onChange:p=>c(g=>({...g,search:p.target.value})),style:{flex:1}}),s.jsx(Wr,{placeholder:"Statut",icon:s.jsx(jc,{size:16}),clearable:!0,data:[{value:"à faire",label:"À faire"},{value:"en cours",label:"En cours"},{value:"terminée",label:"Terminée"}],value:l.statut,onChange:p=>c(g=>({...g,statut:p}))}),s.jsx(Wr,{placeholder:"Priorité",icon:s.jsx(jc,{size:16}),clearable:!0,data:[{value:"basse",label:"Basse"},{value:"moyenne",label:"Moyenne"},{value:"haute",label:"Haute"}],value:l.priorite,onChange:p=>c(g=>({...g,priorite:p}))}),s.jsx(rr,{onClick:m,children:"Filtrer"})]})}),s.jsxs(Hn,{p:"md",pos:"relative",children:[s.jsx(to,{visible:n}),s.jsxs(Ye,{children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"Titre"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Priorité"}),s.jsx(Ye.Th,{children:"Assigné à"}),s.jsx(Ye.Th,{children:"Date début"}),s.jsx(Ye.Th,{children:"Date fin"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:e.length===0?s.jsx(Ye.Tr,{children:s.jsx(Ye.Td,{colSpan:7,align:"center",children:s.jsx(He,{fz:"sm",c:"dimmed",children:"Aucune tâche trouvée"})})}):e.map(p=>s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:p.titre}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:d(p.statut),leftSection:f(p.statut),children:p.statut.charAt(0).toUpperCase()+p.statut.slice(1)})}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:A(p.priorite),children:p.priorite.charAt(0).toUpperCase()+p.priorite.slice(1)})}),s.jsx(Ye.Td,{children:p.assigneA?`${p.assigneA.prenom} ${p.assigneA.nom}`:s.jsx(He,{fz:"sm",c:"dimmed",children:"Non assigné"})}),s.jsx(Ye.Td,{children:p.dateDebut?new Date(p.dateDebut).toLocaleDateString():"-"}),s.jsx(Ye.Td,{children:p.dateFin?new Date(p.dateFin).toLocaleDateString():"-"}),s.jsx(Ye.Td,{children:s.jsxs(Bt,{spacing:0,position:"right",children:[s.jsx(Dn,{color:"blue",onClick:()=>t(`/taches/${p._id}`),children:s.jsx(Cx,{size:16})}),s.jsx(Dn,{color:"red",onClick:()=>h(p._id),children:s.jsx(Zn,{size:16})})]})})]},p._id))})]}),i&&i.total>0&&s.jsxs(Bt,{position:"center",mt:"md",children:[s.jsx(Ei,{total:i.pages||1,value:i.page||1,onChange:p=>o(g=>({...g,page:p}))}),s.jsxs(He,{size:"sm",color:"dimmed",children:["Affichage de ",i.total>0?(i.page-1)*i.limit+1:0," à ",Math.min(i.page*i.limit,i.total)," sur ",i.total," tâches"]})]})]})]})},G9=()=>{const{id:t}=Ka(),e=Fr(),{user:r}=Ya(),[n,a]=y.useState(!1),[i,o]=y.useState(!1),[l,c]=y.useState([]),[u,d]=y.useState([]),f=Fl({initialValues:{titre:"",description:"",statut:"à faire",priorite:"moyenne",dateDebut:new Date,dateFin:null,assigneA:"",planningId:"",tags:[],completionPourcentage:0},validate:{titre:h=>h.length>=3?null:"Le titre doit contenir au moins 3 caractères",dateDebut:h=>h?null:"La date de début est requise"}});y.useEffect(()=>{(async()=>{if(c([{value:"1",label:"Jean Dupont"},{value:"2",label:"Marie Martin"},{value:"3",label:"Pierre Durand"}]),d([{value:"1",label:"Planning Q3 2025"},{value:"2",label:"Planning Marketing"},{value:"3",label:"Planning RH"}]),t&&t!=="nouveau"){o(!0);try{const m=await Wb.getTaskById(t),p=m.dateDebut?new Date(m.dateDebut):null,g=m.dateFin?new Date(m.dateFin):null;f.setValues({titre:m.titre,description:m.description||"",statut:m.statut,priorite:m.priorite,dateDebut:p,dateFin:g,assigneA:m.assigneA?m.assigneA._id:"",planningId:m.planningId?m.planningId._id:"",tags:m.tags||[],completionPourcentage:m.completionPourcentage||0})}catch(m){console.error("Erreur lors du chargement de la tâche:",m),Vt.show({title:"Erreur",message:"Impossible de charger la tâche",color:"red"}),e("/taches")}finally{o(!1)}}})()},[t]);const A=async h=>{a(!0);try{t&&t!=="nouveau"?(await Wb.updateTask(t,h),Vt.show({title:"Succès",message:"Tâche mise à jour avec succès",color:"green"})):(await Wb.createTask({...h,creePar:r.id}),Vt.show({title:"Succès",message:"Tâche créée avec succès",color:"green"})),e("/taches")}catch(m){console.error("Erreur lors de la sauvegarde de la tâche:",m),Vt.show({title:"Erreur",message:"Impossible de sauvegarder la tâche",color:"red"})}finally{a(!1)}};return s.jsxs(Hn,{p:"lg",pos:"relative",children:[s.jsx(to,{visible:i}),s.jsx(Bt,{position:"apart",mb:"md",children:s.jsx(rr,{variant:"outline",leftSection:s.jsx(Ci,{size:16}),onClick:()=>e("/taches"),children:"Retour à la liste"})}),s.jsx(Kr,{order:2,mb:"xl",children:t&&t!=="nouveau"?"Modifier la tâche":"Nouvelle tâche"}),s.jsx("form",{onSubmit:f.onSubmit(A),children:s.jsxs(ps,{spacing:"md",children:[s.jsx(dn,{required:!0,label:"Titre",placeholder:"Titre de la tâche",...f.getInputProps("titre"),disabled:n}),s.jsx(Pl,{label:"Description",placeholder:"Description détaillée de la tâche",minRows:3,...f.getInputProps("description"),disabled:n}),s.jsxs(Bt,{grow:!0,children:[s.jsx(Wr,{required:!0,label:"Statut",placeholder:"Sélectionner un statut",data:[{value:"à faire",label:"À faire"},{value:"en cours",label:"En cours"},{value:"terminée",label:"Terminée"}],...f.getInputProps("statut"),disabled:n}),s.jsx(Wr,{required:!0,label:"Priorité",placeholder:"Sélectionner une priorité",data:[{value:"basse",label:"Basse"},{value:"moyenne",label:"Moyenne"},{value:"haute",label:"Haute"}],...f.getInputProps("priorite"),disabled:n})]}),s.jsxs(Bt,{grow:!0,children:[s.jsx(_m,{required:!0,label:"Date de début",placeholder:"Sélectionner une date",leftSection:s.jsx(il,{size:16}),value:f.values.dateDebut,onChange:h=>f.setFieldValue("dateDebut",h),error:f.errors.dateDebut,disabled:n}),s.jsx(_m,{label:"Date de fin",placeholder:"Sélectionner une date",leftSection:s.jsx(il,{size:16}),value:f.values.dateFin,onChange:h=>f.setFieldValue("dateFin",h),disabled:n})]}),s.jsxs(Bt,{grow:!0,children:[s.jsx(Wr,{label:"Assigné à",placeholder:"Sélectionner un utilisateur",data:l,...f.getInputProps("assigneA"),disabled:n,clearable:!0}),s.jsx(Wr,{label:"Planning associé",placeholder:"Sélectionner un planning",data:u,...f.getInputProps("planningId"),disabled:n,clearable:!0})]}),s.jsx(iS,{label:"Tags",placeholder:"Ajouter des tags",data:["Urgent","Important","BugFix","Feature","Documentation"],...f.getInputProps("tags"),disabled:n,searchable:!0,creatable:!0,getCreateLabel:h=>`+ Créer "${h}"`,onCreate:h=>({value:h,label:h})}),s.jsxs("div",{children:[s.jsxs(He,{size:"sm",mb:5,children:["Progression: ",f.values.completionPourcentage,"%"]}),s.jsx(wk,{min:0,max:100,step:5,label:h=>`${h}%`,...f.getInputProps("completionPourcentage"),disabled:n})]}),s.jsxs(Bt,{position:"right",mt:"xl",children:[s.jsx(rr,{variant:"outline",onClick:()=>e("/taches"),disabled:n,children:"Annuler"}),s.jsx(rr,{type:"submit",leftSection:s.jsx(kl,{size:16}),loading:n,children:"Enregistrer"})]})]})})]})},Yct=()=>{const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState({page:1,limit:10,total:0,pages:1}),[l,c]=y.useState({search:"",role:""});y.useEffect(()=>{a(!0),setTimeout(()=>{const f=[{_id:"1",nom:"Dupont",prenom:"Jean",email:"jean.dupont@example.com",role:"admin",poste:"Directeur",actif:!0},{_id:"2",nom:"Martin",prenom:"Sophie",email:"sophie.martin@example.com",role:"manager",poste:"Chef de projet",actif:!0},{_id:"3",nom:"Durand",prenom:"Pierre",email:"pierre.durand@example.com",role:"utilisateur",poste:"Développeur",actif:!0}];r(f),o({page:1,limit:10,total:f.length,pages:1}),a(!1)},500)},[]);const u=f=>{switch(f){case"admin":return"red";case"manager":return"blue";case"utilisateur":return"green";default:return"gray"}},d=f=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&(r(e.filter(A=>A._id!==f)),Vt.show({title:"Succès",message:"Utilisateur supprimé avec succès",color:"green"}))};return s.jsxs("div",{children:[s.jsxs(Bt,{position:"apart",mb:"md",children:[s.jsx(Kr,{children:"Gestion des Collaborateurs"}),s.jsx(rr,{leftSection:s.jsx(Jn,{size:16}),onClick:()=>t("/collaborateurs/nouveau"),children:"Nouveau Collaborateur"})]}),s.jsx(Hn,{p:"md",mb:"lg",children:s.jsxs(Bt,{children:[s.jsx(dn,{placeholder:"Rechercher un collaborateur...",icon:s.jsx(Ol,{size:16}),value:l.search,onChange:f=>c(A=>({...A,search:f.target.value})),style:{flex:1}}),s.jsx(Wr,{placeholder:"Rôle",icon:s.jsx(jc,{size:16}),clearable:!0,data:[{value:"admin",label:"Administrateur"},{value:"manager",label:"Manager"},{value:"utilisateur",label:"Utilisateur"}],value:l.role,onChange:f=>c(A=>({...A,role:f}))}),s.jsx(rr,{onClick:()=>console.log("Filtrer"),children:"Filtrer"})]})}),s.jsxs(Hn,{p:"md",pos:"relative",children:[s.jsx(to,{visible:n}),s.jsxs(Ye,{children:[s.jsx(Ye.Thead,{children:s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Th,{children:"Nom"}),s.jsx(Ye.Th,{children:"Prénom"}),s.jsx(Ye.Th,{children:"Email"}),s.jsx(Ye.Th,{children:"Poste"}),s.jsx(Ye.Th,{children:"Rôle"}),s.jsx(Ye.Th,{children:"Statut"}),s.jsx(Ye.Th,{children:"Actions"})]})}),s.jsx(Ye.Tbody,{children:e.length===0?s.jsx(Ye.Tr,{children:s.jsx(Ye.Td,{colSpan:7,align:"center",children:s.jsx(He,{fz:"sm",c:"dimmed",children:"Aucun collaborateur trouvé"})})}):e.map(f=>s.jsxs(Ye.Tr,{children:[s.jsx(Ye.Td,{children:f.nom}),s.jsx(Ye.Td,{children:f.prenom}),s.jsx(Ye.Td,{children:f.email}),s.jsx(Ye.Td,{children:f.poste}),s.jsx(Ye.Td,{children:s.jsxs(bn,{color:u(f.role),children:[f.role==="admin"&&"Administrateur",f.role==="manager"&&"Manager",f.role==="utilisateur"&&"Utilisateur"]})}),s.jsx(Ye.Td,{children:s.jsx(bn,{color:f.actif?"green":"red",children:f.actif?"Actif":"Inactif"})}),s.jsx(Ye.Td,{children:s.jsxs(Bt,{spacing:0,position:"right",children:[s.jsx(Dn,{color:"blue",onClick:()=>t(`/collaborateurs/${f._id}`),children:s.jsx(Cx,{size:16})}),s.jsx(Dn,{color:"red",onClick:()=>d(f._id),children:s.jsx(Zn,{size:16})})]})})]},f._id))})]}),i.total>0&&s.jsxs(Bt,{position:"center",mt:"md",children:[s.jsx(Ei,{total:i.pages,value:i.page,onChange:f=>o(A=>({...A,page:f}))}),s.jsxs(He,{size:"sm",color:"dimmed",children:["Affichage de ",(i.page-1)*i.limit+1," à ",Math.min(i.page*i.limit,i.total)," sur ",i.total," collaborateurs"]})]})]})]})},q9=()=>{const{id:t}=Ka(),e=Fr(),{user:r}=Ya(),[n,a]=y.useState(!1),[i,o]=y.useState(!1),l=Fl({initialValues:{nom:"",prenom:"",email:"",password:"",role:"utilisateur",poste:"",actif:!0},validate:{nom:u=>u.length>=2?null:"Le nom doit contenir au moins 2 caractères",prenom:u=>u.length>=2?null:"Le prénom doit contenir au moins 2 caractères",email:u=>/^\S+@\S+$/.test(u)?null:"Email invalide",password:u=>!t&&u.length<6?"Le mot de passe doit contenir au moins 6 caractères":null,poste:u=>u.length>=2?null:"Le poste doit contenir au moins 2 caractères"}});y.useEffect(()=>{t&&t!=="nouveau"&&(o(!0),setTimeout(()=>{const u={_id:t,nom:"Dupont",prenom:"Jean",email:"jean.dupont@example.com",role:"admin",poste:"Directeur",actif:!0};l.setValues({...u,password:""}),o(!1)},500))},[t]);const c=async u=>{a(!0),setTimeout(()=>{try{t&&t!=="nouveau"?Vt.show({title:"Succès",message:"Collaborateur mis à jour avec succès",color:"green"}):Vt.show({title:"Succès",message:"Collaborateur créé avec succès",color:"green"}),e("/collaborateurs")}catch(d){console.error("Erreur:",d),Vt.show({title:"Erreur",message:"Une erreur est survenue",color:"red"})}finally{a(!1)}},1e3)};return s.jsxs(Hn,{p:"lg",pos:"relative",children:[s.jsx(to,{visible:i}),s.jsx(Bt,{position:"apart",mb:"md",children:s.jsx(rr,{variant:"outline",leftSection:s.jsx(Ci,{size:16}),onClick:()=>e("/collaborateurs"),children:"Retour à la liste"})}),s.jsx(Kr,{order:2,mb:"xl",children:t&&t!=="nouveau"?"Modifier le collaborateur":"Nouveau collaborateur"}),s.jsx("form",{onSubmit:l.onSubmit(c),children:s.jsxs(ps,{spacing:"md",children:[s.jsxs(Bt,{grow:!0,children:[s.jsx(dn,{required:!0,label:"Nom",placeholder:"Nom de famille",icon:s.jsx(Wa,{size:16}),...l.getInputProps("nom"),disabled:n}),s.jsx(dn,{required:!0,label:"Prénom",placeholder:"Prénom",icon:s.jsx(Wa,{size:16}),...l.getInputProps("prenom"),disabled:n})]}),s.jsx(dn,{required:!0,label:"Email",placeholder:"email@exemple.com",icon:s.jsx(Mk,{size:16}),...l.getInputProps("email"),disabled:n||t&&t!=="nouveau"}),s.jsx(dn,{label:"Poste",placeholder:"Poste ou fonction",icon:s.jsx(b0,{size:16}),...l.getInputProps("poste"),disabled:n}),s.jsx(Wr,{required:!0,label:"Rôle",placeholder:"Sélectionner un rôle",data:[{value:"admin",label:"Administrateur"},{value:"manager",label:"Manager"},{value:"utilisateur",label:"Utilisateur"}],...l.getInputProps("role"),disabled:n||(r==null?void 0:r.role)!=="admin"}),(!t||t==="nouveau")&&s.jsx(v0,{required:!0,label:"Mot de passe",placeholder:"Mot de passe sécurisé",icon:s.jsx(w0,{size:16}),...l.getInputProps("password"),disabled:n}),t&&t!=="nouveau"&&s.jsx(v0,{label:"Nouveau mot de passe",placeholder:"Laisser vide pour ne pas changer",description:"Laisser vide pour conserver le mot de passe actuel",icon:s.jsx(w0,{size:16}),...l.getInputProps("password"),disabled:n}),s.jsx(Em,{label:"Compte actif",checked:l.values.actif,onChange:u=>l.setFieldValue("actif",u.currentTarget.checked),disabled:n}),s.jsxs(Bt,{position:"right",mt:"xl",children:[s.jsx(rr,{variant:"outline",onClick:()=>e("/collaborateurs"),disabled:n,children:"Annuler"}),s.jsx(rr,{type:"submit",leftSection:s.jsx(kl,{size:16}),loading:n,children:"Enregistrer"})]})]})})]})},Xct={apiKey:"AIzaSyCC1VwhprRXivPSEL_9UwCksOZLuka9de4",authDomain:"entreprise-organiser.firebaseapp.com",projectId:"entreprise-organiser",storageBucket:"entreprise-organiser.firebasestorage.app",messagingSenderId:"148962094148",appId:"1:148962094148:web:670deb9a62f005a5ef6011"},Jct=nO(Xct),K9=kK(Jct),Y9=()=>{const[t,e]=y.useState(null),[r,n]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState(""),[c,u]=y.useState(""),d=h=>{const m=h.target.files[0];if(m){if(m.type!=="application/pdf"){l("Seuls les fichiers PDF sont autorisés");return}if(m.size>10*1024*1024){l("Le fichier ne doit pas dépasser 10MB");return}e(m),l("")}},f=async()=>{if(!t){l("Veuillez sélectionner un fichier");return}n(!0),l(""),u("");try{const m=`test_${Date.now()}_${t.name}`,p=gd(K9,`test/${m}`);console.log("🔥 Début upload vers Firebase Storage...");const g={contentType:t.type,customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),testUpload:"true"}},x=await cje(p,t,g);console.log("✅ Upload terminé:",x);const v=await ub(x.ref);console.log("🔗 URL de téléchargement:",v),i(v),u(`✅ Fichier uploadé avec succès ! Taille: ${(t.size/1024).toFixed(2)} KB`)}catch(h){console.error("❌ Erreur upload:",h),l(`Erreur upload: ${h.message}`)}finally{n(!1)}},A=async()=>{if(a)try{const m=new URL(a).pathname.match(/\/o\/(.+)\?/);if(!m)throw new Error("Impossible d'extraire le chemin du fichier");const p=decodeURIComponent(m[1]),g=gd(K9,p);await PK(g),console.log("🗑️ Fichier supprimé"),i(""),u("Fichier supprimé avec succès"),e(null)}catch(h){console.error("❌ Erreur suppression:",h),l(`Erreur suppression: ${h.message}`)}};return s.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"🔥 Test Firebase Storage"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sélectionner un fichier PDF (max 10MB)"}),s.jsx("input",{type:"file",accept:".pdf",onChange:d,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),t&&s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["📄 Fichier sélectionné: ",t.name," (",(t.size/1024).toFixed(2)," KB)"]})]}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx("button",{onClick:f,disabled:!t||r,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:r?"⏳ Upload en cours...":"📤 Upload vers Firebase"}),a&&s.jsx("button",{onClick:A,className:"bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",children:"🗑️ Supprimer"})]}),o&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:["❌ ",o]}),c&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:c}),a&&s.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"📄 Fichier uploadé :"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"URL:"}),s.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"Ouvrir le PDF"})]}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(a),className:"text-sm bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"📋 Copier l'URL"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("iframe",{src:a,className:"w-full h-96 border rounded",title:"Prévisualisation PDF",allow:"fullscreen"})})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📋 Instructions :"}),s.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"1. Configurez Firebase Storage dans la console"}),s.jsx("li",{children:"2. Activez le plan Blaze (pay-as-you-go)"}),s.jsx("li",{children:"3. Configurez les règles de sécurité en mode test"}),s.jsx("li",{children:"4. Sélectionnez un fichier PDF et testez l'upload"}),s.jsx("li",{children:"5. Vérifiez que la prévisualisation fonctionne"})]})]})]})},ci="/bdc",b4={async getAll(t={}){var e,r;try{return(await Ee.get(ci,{params:t})).data}catch(n){throw console.error("Erreur lors de la récupération des BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des BDC")}},async getById(t){var e,r;try{return(await Ee.get(`${ci}/${t}`)).data}catch(n){throw console.error("Erreur lors de la récupération du BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération du BDC")}},async getBdcsByAffaire(t){var e,r;try{return(await Ee.get(ci,{params:{affaireId:t}})).data}catch(n){throw console.error("Erreur lors de la récupération des BDC de l'affaire:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la récupération des BDC de l'affaire")}},async create(t){var e,r;try{return(await Ee.post(ci,t)).data}catch(n){throw console.error("Erreur lors de la création du BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la création du BDC")}},async update(t,e){var r,n;try{return(await Ee.patch(`${ci}/${t}`,e)).data}catch(a){throw console.error("Erreur lors de la mise à jour du BDC:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la mise à jour du BDC")}},async delete(t){var e,r;try{return(await Ee.delete(`${ci}/${t}`)).data}catch(n){throw console.error("Erreur lors de la suppression du BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la suppression du BDC")}},async valider(t){var e,r;try{return(await Ee.patch(`${ci}/${t}/valider`)).data}catch(n){throw console.error("Erreur lors de la validation du BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de la validation du BDC")}},async annuler(t){var e,r;try{return(await Ee.patch(`${ci}/${t}/annuler`)).data}catch(n){throw console.error("Erreur lors de l'annulation du BDC:",n),new Error(((r=(e=n.response)==null?void 0:e.data)==null?void 0:r.message)||"Erreur lors de l'annulation du BDC")}},async receptionner(t,e=new Date){var r,n;try{return(await Ee.patch(`${ci}/${t}/receptionner`,{dateReception:e.toISOString()})).data}catch(a){throw console.error("Erreur lors de la réception du BDC:",a),new Error(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Erreur lors de la réception du BDC")}},async uploadPdfFirebase(t,e,r=null){try{const a=(await Ee.get(`${ci}/${t}`)).data.numero,i=await dc.uploadBdcPdf(t,e,r,a),o={firebaseStoragePath:i.fullPath,firebaseDownloadUrl:i.downloadURL,nomFichier:i.originalName,tailleFichier:i.size,dateUpload:new Date().toISOString()};return{...(await Ee.patch(`${ci}/${t}`,o)).data,firebaseData:i}}catch(n){throw console.error("Erreur lors de l'upload Firebase du PDF:",n),new Error(n.message||"Erreur lors de l'upload du fichier PDF")}},async getPdfViewUrlFirebase(t){try{const e=await this.getById(t);if(!e.firebaseStoragePath)throw new Error("Aucun fichier PDF associé à ce BDC");return await dc.getPdfDownloadUrl(e.firebaseStoragePath)}catch(e){throw console.error("Erreur lors de la récupération de l'URL Firebase:",e),new Error(e.message||"Erreur lors de la récupération de l'URL du PDF")}},async deletePdfFirebase(t){try{const e=await this.getById(t);if(!e.firebaseStoragePath)throw new Error("Aucun fichier PDF associé à ce BDC");await dc.deletePdf(e.firebaseStoragePath);const r={firebaseStoragePath:null,firebaseDownloadUrl:null,nomFichier:null,tailleFichier:null,dateUpload:null};return(await Ee.patch(`${ci}/${t}`,r)).data}catch(e){throw console.error("Erreur lors de la suppression Firebase du PDF:",e),new Error(e.message||"Erreur lors de la suppression du fichier PDF")}},async checkPdfExistsFirebase(t){try{const e=await this.getById(t);return e.firebaseStoragePath?await dc.pdfExists(e.firebaseStoragePath):!1}catch(e){return console.error("Erreur lors de la vérification Firebase du PDF:",e),!1}},async getPdfMetadataFirebase(t){try{const e=await this.getById(t);if(!e.firebaseStoragePath)throw new Error("Aucun fichier PDF associé à ce BDC");return await dc.getPdfMetadata(e.firebaseStoragePath)}catch(e){throw console.error("Erreur lors de la récupération des métadonnées Firebase:",e),new Error(e.message||"Erreur lors de la récupération des métadonnées du PDF")}},async getPdfViewUrl(t){try{return(await this.getById(t)).firebaseStoragePath?await this.getPdfViewUrlFirebase(t):`${Ee.defaults.baseURL}${ci}/${t}/view-pdf`}catch(e){return console.error("Erreur lors de la récupération de l'URL PDF:",e),`${Ee.defaults.baseURL}${ci}/${t}/view-pdf`}},async getPdfEmbedUrl(t){try{return(await this.getById(t)).firebaseStoragePath?await this.getPdfViewUrlFirebase(t):`${Ee.defaults.baseURL}${ci}/${t}/pdf-embed`}catch(e){return console.error("Erreur lors de la récupération de l'URL embed:",e),`${Ee.defaults.baseURL}${ci}/${t}/pdf-embed`}},async getCategories(){var t,e;try{return(await Ee.get("/categories-achat")).data}catch(r){throw console.error("Erreur lors de la récupération des catégories:",r),new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Erreur lors de la récupération des catégories")}},formatStatut(t){return{EN_ATTENTE_VALIDATION:"En attente de validation",VALIDE:"Validé",COMMANDE:"Commandé",RECEPTIONNE:"Réceptionné",ANNULE:"Annulé"}[t]||t},getStatutColor(t){return{EN_ATTENTE_VALIDATION:"orange",VALIDE:"blue",COMMANDE:"purple",RECEPTIONNE:"green",ANNULE:"red"}[t]||"gray"}},Zct=({affaireId:t="test-affaire-123",onUpdate:e})=>{const[r,n]=y.useState([{id:"bdc-test-1",numero:"BDC-2025-001",montantHt:1250,dateBdc:"2025-01-15",fournisseur:"Fournisseur Test SA",statut:"EN_ATTENTE",commentaire:"Bon de commande de test pour démonstration Firebase",nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null},{id:"bdc-test-2",numero:"BDC-2025-002",montantHt:850.75,dateBdc:"2025-01-10",fournisseur:"Entreprise Demo SARL",statut:"VALIDE",commentaire:"Deuxième BDC de test",nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null}]),[a,i]=y.useState(!1),[o,l]=y.useState(null),[c,u]=y.useState(!1),[d,f]=y.useState(null),A=()=>{const S={id:`bdc-test-${Date.now()}`,numero:`BDC-2025-${String(r.length+1).padStart(3,"0")}`,montantHt:Math.round((Math.random()*2e3+500)*100)/100,dateBdc:new Date().toISOString().split("T")[0],fournisseur:"Nouveau Fournisseur",statut:"EN_ATTENTE",commentaire:"Nouveau BDC créé pour test",nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null};n([...r,S]),u(!1),ve.success("Nouveau BDC créé avec succès !")},h=S=>{window.confirm("Êtes-vous sûr de vouloir supprimer ce BDC ?")&&(n(r.filter(F=>F.id!==S)),ve.success("BDC supprimé avec succès !"))},m=S=>{console.log("Modifier BDC:",S)},p=async S=>{try{await b4.valider(S),ve.success("BDC validé avec succès"),n(F=>F.map(M=>M.id===S?{...M,statut:"VALIDE"}:M)),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"validate",bdcId:S,affaireId:affaire.id}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:affaire.id}}))}catch(F){console.error("Erreur lors de la validation du BDC:",F),ve.error("Erreur lors de la validation du BDC")}},g=async S=>{if(window.confirm("Êtes-vous sûr de vouloir annuler ce BDC ?"))try{await b4.annuler(S),ve.success("BDC annulé avec succès"),n(F=>F.map(M=>M.id===S?{...M,statut:"ANNULE"}:M)),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"cancel",bdcId:S,affaireId:affaire.id}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:affaire.id}}))}catch(F){console.error("Erreur lors de l'annulation du BDC:",F),ve.error("Erreur lors de l'annulation du BDC")}},x=async S=>{try{await b4.receptionner(S),ve.success("BDC réceptionné avec succès"),n(F=>F.map(M=>M.id===S?{...M,statut:"RECEPTIONNE",dateReception:new Date}:M)),e&&e(),window.dispatchEvent(new CustomEvent("bdc_updated",{detail:{action:"receive",bdcId:S,affaireId:affaire.id}})),window.dispatchEvent(new CustomEvent("affaire_updated",{detail:{affaireId:affaire.id}}))}catch(F){console.error("Erreur lors de la réception du BDC:",F),ve.error("Erreur lors de la réception du BDC")}},v=async(S,F)=>{try{console.log("🔥 Upload success result:",F),console.log("🔥 BDC ID:",S),n(M=>{const R=M.map(U=>U.id===S?{...U,nomFichier:F.fileName||F.nomFichier,tailleFichier:F.size||F.tailleFichier,dateUpload:F.uploadedAt||F.dateUpload||new Date().toISOString(),firebaseDownloadUrl:F.downloadURL||F.firebaseDownloadUrl,firebaseStoragePath:F.fullPath||F.firebaseStoragePath}:U);return console.log("🔥 Updated BDCs:",R),R}),ve.success("PDF uploadé avec succès sur Firebase !"),e&&e()}catch(M){console.error("Erreur après upload:",M)}},b=(S,F)=>{console.error("Erreur upload PDF:",F),ve.error(`Erreur lors de l'upload: ${F.message}`)},C=async S=>{try{n(F=>F.map(M=>M.id===S?{...M,nomFichier:null,tailleFichier:null,dateUpload:null,firebaseDownloadUrl:null,firebaseStoragePath:null}:M)),ve.success("PDF supprimé avec succès !")}catch(F){console.error("Erreur suppression PDF:",F),ve.error("Erreur lors de la suppression du PDF")}},j=async(S,F,M)=>await dc.uploadBdcPdf(S,F,M),w=async(S,F)=>{F&&await dc.deletePdf(F),await C(S)},N=async(S,F)=>F,E=S=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(S),_=S=>S?new Date(S).toLocaleDateString("fr-FR"):"-",k=S=>({EN_ATTENTE:"yellow",VALIDE:"green",REFUSE:"red",LIVRE:"blue"})[S]||"gray",D=S=>({EN_ATTENTE:"En attente",VALIDE:"Validé",REFUSE:"Refusé",LIVRE:"Livré"})[S]||S;return a?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})}):s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Qi,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Bons de Commande"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.length," BDC • Firebase Storage"]})]})]}),s.jsxs("button",{onClick:A,className:"inline-flex items-center px-3 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[s.jsx(Qd,{className:"w-4 h-4 mr-2"}),"Nouveau BDC"]})]}),s.jsxs("div",{className:"p-2 bg-yellow-50 border-b text-xs text-gray-600",children:["🔍 Debug: ",r.length," BDCs - PDFs: ",r.filter(S=>S.nomFichier).length," avec fichiers"]}),s.jsx("div",{className:"p-4",children:r.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun bon de commande"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Commencez par créer votre premier bon de commande pour cette affaire."}),s.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700",children:[s.jsx(Qd,{className:"w-4 h-4 mr-2"}),"Créer un BDC"]})]}):s.jsx("div",{className:"space-y-6",children:r.filter(S=>S&&S.id).map(S=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["BDC #",S.numero]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${k(S.statut)}-100 text-${k(S.statut)}-800`,children:D(S.statut)})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(nP,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsx("span",{className:"font-medium",children:E(S.montantHt)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Il,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsxs("span",{children:["Créé le ",_(S.dateBdc)]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-medium",children:"Fournisseur:"}),s.jsx("span",{className:"ml-1",children:S.fournisseur})]})]}),S.commentaire&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700",children:S.commentaire})})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[S.statut==="EN_ATTENTE"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>p(S.id),className:"px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors",title:"Valider le BDC",children:"Valider"}),s.jsx("button",{onClick:()=>g(S.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded hover:bg-red-700 transition-colors",title:"Annuler le BDC",children:"Annuler"})]}),S.statut==="VALIDE"&&!S.dateReception&&s.jsx("button",{onClick:()=>x(S.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors",title:"Réceptionner le BDC",children:"Réceptionner"}),s.jsx("button",{onClick:()=>m(S),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Modifier",children:s.jsx(Ym,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>h(S.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(Km,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Document PDF (Firebase Storage)"}),s.jsx(zS,{entityId:S.id,entityType:"bdc",existingFile:S&&S.nomFichier?{nomFichier:S.nomFichier,tailleFichier:S.tailleFichier,dateUpload:S.dateUpload,firebaseDownloadUrl:S.firebaseDownloadUrl,firebaseStoragePath:S.firebaseStoragePath}:null,uploadFunction:(F,M,R)=>j(F,M,R),deleteFunction:(F,M)=>w(F,M),getViewUrlFunction:(F,M)=>N(F,M),onUploadSuccess:F=>v(S.id,F),onUploadError:F=>b(S.id,F)})]})]},S.id))})})]})},eut=()=>{var a;const[t,e]=y.useState("basic"),r=[{id:"basic",label:"🔥 Test Firebase Basic",component:Y9},{id:"upload",label:"📤 Upload Component",component:()=>s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Test Composant Upload PDF"}),s.jsx(zS,{onUploadSuccess:(i,o)=>{console.log("Upload réussi:",{url:i,metadata:o}),alert(`Upload réussi ! URL: ${i}`)},onUploadError:i=>{console.error("Erreur upload:",i),alert(`Erreur: ${i.message}`)}})]})},{id:"bdc",label:"📋 Section BDC Firebase",component:()=>s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Test Section BDC Firebase"}),s.jsx(Zct,{affaireId:"test-affaire-123",onBdcUpdate:i=>{console.log("BDC mis à jour:",i)}})]})}],n=((a=r.find(i=>i.id===t))==null?void 0:a.component)||Y9;return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🔥 Firebase Storage - Tests & Intégration"}),s.jsx("p",{className:"text-gray-600",children:"Tests complets de l'intégration Firebase pour les PDFs des BDC"})]}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8 justify-center",children:r.map(i=>s.jsx("button",{onClick:()=>e(i.id),className:`py-2 px-4 border-b-2 font-medium text-sm transition-colors ${t===i.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:i.label},i.id))})})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:s.jsx(n,{})}),s.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"📋 Instructions de configuration Firebase"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-700 mb-2",children:"1. Console Firebase"}),s.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[s.jsx("li",{children:"• Aller sur console.firebase.google.com"}),s.jsx("li",{children:'• Sélectionner le projet "entreprise-organiser"'}),s.jsx("li",{children:"• Activer le plan Blaze (pay-as-you-go)"}),s.jsx("li",{children:"• Aller dans Storage → Commencer"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-700 mb-2",children:"2. Configuration Storage"}),s.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[s.jsx("li",{children:"• Choisir la région europe-west1"}),s.jsx("li",{children:"• Configurer les règles en mode test"}),s.jsx("li",{children:"• Tester l'upload avec les composants"}),s.jsx("li",{children:"• Vérifier les URLs et prévisualisations"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-yellow-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"⚠️ Statut actuel"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Configuration Firebase en cours. Assurez-vous d'avoir configuré Firebase Storage et activé le plan Blaze avant de tester les uploads."})]})]})})},tut=()=>{const[t,e]=y.useState(""),[r,n]=y.useState([]),[a,i]=y.useState(!1),o=[{name:"PDF Test public W3C",url:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",description:"Test avec un PDF public simple"},{name:"PDF Test simple Mozilla",url:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf",description:"Test avec PDF.js de Mozilla"}],l=async(d,f,A="")=>{const h=Date.now(),m={name:d,url:f,description:A,timestamp:new Date().toLocaleTimeString(),status:"testing",details:[],duration:0};try{m.details.push("🔍 Test d'accessibilité de l'URL...");const p=await fetch(f,{method:"HEAD",mode:"cors"});m.details.push(`✅ URL accessible (${p.status})`),m.details.push(`📄 Content-Type: ${p.headers.get("content-type")||"Non spécifié"}`),m.details.push(`📏 Content-Length: ${p.headers.get("content-length")||"Non spécifié"}`);const g=p.headers.get("access-control-allow-origin");g?m.details.push(`🌐 CORS autorisé: ${g}`):m.details.push("⚠️ Pas d'en-têtes CORS détectés");const x=p.headers.get("content-type");x&&x.includes("application/pdf")?m.details.push("✅ Type PDF confirmé"):m.details.push(`⚠️ Type PDF non confirmé: ${x}`),m.status="success",m.details.push("🎉 Test réussi!")}catch(p){m.status="error",m.details.push(`❌ Erreur: ${p.message}`),p.message.includes("CORS")&&m.details.push("🔒 Problème CORS détecté"),p.message.includes("Failed to fetch")&&m.details.push("🌐 Problème de réseau ou d'accessibilité")}return m.duration=Date.now()-h,m},c=async()=>{i(!0),n([]);for(const d of o){const f=await l(d.name,d.url,d.description);n(A=>[...A,f])}i(!1)},u=async()=>{if(!t.trim())return;i(!0);const d=await l("Test personnalisé",t.trim());n(f=>[...f,d]),i(!1)};return s.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"🔬 Diagnostic PDF - Test d'URL"}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"🎯 Objectif"}),s.jsx("p",{className:"text-blue-700 text-sm",children:"Ce composant teste l'accessibilité des URLs PDF et diagnostique les problèmes d'affichage. Il vérifie la connectivité, les en-têtes CORS, le type de contenu, etc."})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"🧪 Test d'URL personnalisée"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:t,onChange:d=>e(d.target.value),placeholder:"https://example.com/mon-pdf.pdf",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("button",{onClick:u,disabled:a||!t.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[a?"⏳":"🧪"," Tester"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"🎲 Tests prédéfinis"}),s.jsx("button",{onClick:c,disabled:a,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Cm,{className:"w-4 h-4 mr-2 animate-spin"}),"Tests en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jh,{className:"w-4 h-4 mr-2"}),"Lancer les tests prédéfinis"]})})]}),r.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"📋 Résultats des tests"}),s.jsx("div",{className:"space-y-4",children:r.map((d,f)=>s.jsxs("div",{className:`border rounded-lg p-4 ${d.status==="success"?"border-green-200 bg-green-50":d.status==="error"?"border-red-200 bg-red-50":"border-yellow-200 bg-yellow-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[d.status==="success"&&s.jsx(jh,{className:"w-5 h-5 text-green-600"}),d.status==="error"&&s.jsx(dh,{className:"w-5 h-5 text-red-600"}),d.status==="testing"&&s.jsx(Cm,{className:"w-5 h-5 text-yellow-600 animate-spin"}),s.jsx("h4",{className:"font-semibold text-gray-800",children:d.name}),s.jsxs("span",{className:"text-xs text-gray-500",children:[d.timestamp," • ",d.duration,"ms"]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>window.open(d.url,"_blank"),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Ouvrir dans un nouvel onglet",children:s.jsx(j4,{className:"w-4 h-4"})})})]}),d.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.description}),s.jsxs("div",{className:"text-sm font-mono text-gray-700 bg-white rounded p-2 border",children:[s.jsxs("div",{className:"font-semibold mb-1",children:["URL: ",d.url]}),d.details.map((A,h)=>s.jsx("div",{className:"py-0.5",children:A},h))]})]},f))})]}),s.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"💡 Instructions d'utilisation"}),s.jsxs("ol",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("li",{children:"1. 🧪 Testez d'abord les URLs prédéfinies pour vérifier le fonctionnement"}),s.jsx("li",{children:"2. 🔗 Copiez l'URL Firebase de votre PDF problématique"}),s.jsx("li",{children:"3. 📋 Collez-la dans le champ de test personnalisé"}),s.jsx("li",{children:"4. 🔍 Analysez les résultats pour identifier le problème"}),s.jsx("li",{children:"5. 🛠️ Utilisez les informations pour corriger le problème"})]})]})]})})},rut=({userContext:t={},crmData:e=null,className:r=""})=>{const{user:n}=Ya(),[a,i]=y.useState([]),[o,l]=y.useState(""),[c,u]=y.useState(null),[d,f]=y.useState(!1),[A,h]=y.useState(!1),[m,p]=y.useState(!1),g=y.useRef(null);y.useEffect(()=>{n&&!m&&v()},[n,m]),y.useEffect(()=>{x()},[a]);const x=()=>{var _;(_=g.current)==null||_.scrollIntoView({behavior:"smooth"})},v=async()=>{try{f(!0);const _=await Ee.post("/claude/conversation/start",{userId:n.id,userContext:{userName:`${n.prenom} ${n.nom}`,role:n.role,company:"Entreprise Organiser",...t}});_.data.success&&(u(_.data.sessionId),i([_.data.message]),p(!0),ve.success("Chat Claude initialisé !"))}catch(_){console.error("Erreur démarrage conversation:",_),ve.error("Erreur lors de l'initialisation du chat")}finally{f(!1)}},b=async()=>{if(!o.trim()||!c||d)return;const _={role:"user",content:o,createdAt:new Date().toISOString()};i(k=>[...k,_]),l(""),f(!0);try{const k={sessionId:c,message:o},D=await Ee.post("/claude/conversation/message",k);if(D.data.success){const S={role:"assistant",content:D.data.response,createdAt:new Date().toISOString(),metadata:D.data.metadata};i(F=>[...F,S])}}catch(k){console.error("Erreur envoi message:",k),ve.error("Erreur lors de l'envoi du message");const D={role:"assistant",content:"Désolé, j'ai rencontré une erreur. Veuillez réessayer.",createdAt:new Date().toISOString()};i(S=>[...S,D])}finally{f(!1)}},C=async(_,k=e)=>{if(!c||d)return;const D={role:"user",content:_,createdAt:new Date().toISOString()};i(S=>[...S,D]),f(!0);try{const S=await Ee.post("/claude/conversation/message",{sessionId:c,message:_,crmData:k});if(S.data.success){const F={role:"assistant",content:S.data.response,createdAt:new Date().toISOString(),metadata:S.data.metadata};i(M=>[...M,F])}}catch(S){console.error("Erreur envoi message avec CRM:",S),ve.error("Erreur lors de l'envoi du message");const F={role:"assistant",content:"Désolé, j'ai rencontré une erreur. Veuillez réessayer.",createdAt:new Date().toISOString()};i(M=>[...M,F])}finally{f(!1)}},j=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),b())},w=async(_,k=e)=>{f(!0);try{const D=await Ee.post("/claude/quick-action",{action:_,data:k,sessionId:c});if(D.data.success){const S={role:"user",content:`Action rapide: ${N(_)}`,createdAt:new Date().toISOString(),isQuickAction:!0},F={role:"assistant",content:D.data.response,createdAt:new Date().toISOString()};i(M=>[...M,S,F])}}catch(D){console.error("Erreur action rapide:",D),ve.error("Erreur lors de l'exécution de l'action")}finally{f(!1)}},N=_=>({"analyze-customer":"🔍 Analyser client","write-email":"📧 Écrire email","sales-strategy":"💡 Stratégie vente","financial-analysis":"📊 Analyse financière"})[_]||_,E=_=>new Date(_).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return A?s.jsx("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-full cursor-pointer shadow-lg hover:bg-blue-700 transition-colors z-50",onClick:()=>h(!1),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"🤖"}),s.jsx("span",{className:"font-medium",children:"Claude Assistant"}),a.length>1&&s.jsx(Kn,{variant:"secondary",className:"ml-1",children:a.length-1})]})}):s.jsxs(Kt,{className:`fixed bottom-4 right-4 w-96 h-[600px] shadow-lg z-50 flex flex-col ${r}`,children:[s.jsx(Er,{className:"pb-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🤖"}),s.jsxs("div",{children:[s.jsx(Br,{className:"text-lg",children:"Claude Assistant"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"En ligne"})]})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx(Xe,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"text-white hover:bg-white/20 p-1",children:"━"})})]})}),s.jsxs(nr,{className:"flex-1 flex flex-col p-0",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 max-h-[400px]",children:[a.map((_,k)=>{var D;return s.jsx("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${_.role==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 text-gray-900 rounded-bl-sm"} ${_.isQuickAction?"bg-purple-100 border border-purple-200":""}`,children:[s.jsx("div",{className:"whitespace-pre-wrap break-words",children:_.content}),s.jsxs("div",{className:`text-xs mt-1 ${_.role==="user"?"text-blue-100":"text-gray-500"}`,children:[E(_.createdAt),((D=_.metadata)==null?void 0:D.tokensUsed)&&s.jsxs("span",{className:"ml-2",children:["• ",_.metadata.tokensUsed," tokens"]})]})]})},k)}),d&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 text-gray-900 rounded-lg p-3 rounded-bl-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"Claude réfléchit..."})]})})}),s.jsx("div",{ref:g})]}),e&&s.jsxs("div",{className:"border-t p-3",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Actions rapides :"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Xe,{size:"sm",variant:"outline",onClick:()=>w("analyze-customer"),disabled:d,className:"text-xs",children:"🔍 Analyser"}),s.jsx(Xe,{size:"sm",variant:"outline",onClick:()=>w("financial-analysis"),disabled:d,className:"text-xs",children:"📊 Finance"}),s.jsx(Xe,{size:"sm",variant:"outline",onClick:()=>w("sales-strategy"),disabled:d,className:"text-xs",children:"💡 Stratégie"})]})]}),s.jsxs("div",{className:"border-t p-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ur,{value:o,onChange:_=>l(_.target.value),onKeyPress:j,placeholder:"Posez votre question à Claude...",disabled:d||!c,className:"flex-1"}),s.jsx(Xe,{onClick:b,disabled:d||!o.trim()||!c,size:"sm",title:"Envoyer message",children:"📤"}),e&&s.jsx(Xe,{onClick:()=>C(o),disabled:d||!o.trim()||!c,size:"sm",variant:"outline",title:"Analyser avec données CRM",children:"📊"})]}),e&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"💡 Utilisez 📊 pour forcer l'analyse avec les données CRM"})]})]})]})},nut=()=>{const[t,e]=y.useState(!0),[r]=y.useState({affaire:{id:"aff-001",numero:"AFF-2024-001",libelle:"Rénovation Bureau Dupont",client:"Société Dupont SARL",objectifCaHt:45e3,caReelHt:32e3,objectifAchatHt:25e3,achatReelHt:18500,statut:"EN_COURS",avancementPourcentage:65},devis:[{numero:"DEV-001",montantHt:15e3,statut:"VALIDE"},{numero:"DEV-002",montantHt:17e3,statut:"REALISE"}],bdc:[{numero:"BDC-001",fournisseur:"Leroy Merlin",montantHt:8500,statut:"RECEPTIONNE"},{numero:"BDC-002",fournisseur:"Castorama",montantHt:1e4,statut:"EN_ATTENTE"}],pointages:[{date:"2024-01-15",heures:8,type:"FAB",ouvrier:"Jean Martin"},{date:"2024-01-16",heures:7.5,type:"POSE",ouvrier:"Pierre Durand"}]}),n={currentPage:"Affaire",activeAffaire:r.affaire.id,totalAffaires:25,affairesEnCours:8,budgetMensuel:"125000€"};return s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Test Assistant Claude"}),s.jsx("p",{className:"text-muted-foreground",children:"Page de démonstration de l'intégration Claude dans le CRM"})]}),s.jsx(Xe,{onClick:()=>e(!t),variant:t?"destructive":"default",children:t?"Masquer Claude":"Afficher Claude"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Affaire en cours"})}),s.jsx(nr,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Numéro:"})," ",r.affaire.numero]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," ",r.affaire.client]}),s.jsxs("p",{children:[s.jsx("strong",{children:"CA Objectif:"})," ",r.affaire.objectifCaHt.toLocaleString(),"€"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"CA Réel:"})," ",r.affaire.caReelHt.toLocaleString(),"€"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Avancement:"})," ",r.affaire.avancementPourcentage,"%"]})]})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Devis"})}),s.jsx(nr,{children:s.jsxs("div",{className:"space-y-2",children:[r.devis.map((a,i)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:a.numero}),s.jsxs("span",{className:"font-medium",children:[a.montantHt.toLocaleString(),"€"]})]},i)),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("strong",{children:["Total: ",r.devis.reduce((a,i)=>a+i.montantHt,0).toLocaleString(),"€"]})})]})})]}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Bons de Commande"})}),s.jsx(nr,{children:s.jsx("div",{className:"space-y-2",children:r.bdc.map((a,i)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:a.numero}),s.jsxs("span",{className:"font-medium",children:[a.montantHt.toLocaleString(),"€"]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.fournisseur," • ",a.statut]})]},i))})})]})]}),s.jsxs(Kt,{children:[s.jsx(Er,{children:s.jsx(Br,{children:"Instructions pour tester Claude"})}),s.jsx(nr,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Questions CRM à poser :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsx("li",{children:"Quelle est la marge de l'affaire Dupont ?"}),s.jsx("li",{children:"Les BDC sont-ils tous réceptionnés ?"}),s.jsx("li",{children:"Combien d'heures ont été pointées ?"}),s.jsx("li",{children:"L'avancement correspond-il aux prévisions ?"}),s.jsx("li",{children:"Quels sont les risques financiers sur cette affaire ?"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Questions générales à poser :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsx("li",{children:"Quel temps fait-il aujourd'hui ?"}),s.jsx("li",{children:"Explique-moi la gestion de projet Agile"}),s.jsx("li",{children:"Comment améliorer la productivité d'une équipe ?"}),s.jsx("li",{children:"Raconte-moi une blague"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Actions rapides disponibles :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"🔍 Analyser :"})," Analyse complète de l'affaire"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"📊 Finance :"})," Analyse financière détaillée"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"💡 Stratégie :"})," Recommandations stratégiques"]})]})]})]})})]}),s.jsxs(Kt,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Er,{children:s.jsx(Br,{className:"text-orange-700",children:"⚙️ Configuration requise"})}),s.jsx(nr,{children:s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Variable d'environnement :"})}),s.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"ANTHROPIC_API_KEY=votre_clé_api_claude"}),s.jsx("p",{className:"text-orange-600 mt-2",children:"Si Claude ne répond pas, vérifiez que la variable d'environnement ANTHROPIC_API_KEY est configurée dans votre fichier .env backend."})]})})]}),t&&s.jsx(rut,{userContext:n,crmData:r})]})};let sut=0;const sb=()=>`uuid-${++sut}-${Math.random().toString(36).substr(2,9)}`,aut=()=>{const{user:t}=Ya();console.log("[ClaudeAssistantPage] Rendering component");const[e,r]=y.useState([]),[n,a]=y.useState(null),[i,o]=y.useState([]),[l,c]=y.useState(""),[u,d]=y.useState(!1),[f,A]=y.useState(""),[h,m]=y.useState([]),[p,g]=y.useState(!1),x=y.useRef(null),v=y.useRef(null),b=[{id:"mock-conv-1",title:"CRM AI Integration with Cursor",updatedAt:new Date(Date.now()-36e5).toISOString()},{id:"mock-conv-2",title:"Astrological and Design Life Analysis",updatedAt:new Date(Date.now()-72e5).toISOString()},{id:"mock-conv-3",title:"Financial Pie Chart Terminology",updatedAt:new Date(Date.now()-864e5).toISOString()},{id:"mock-conv-4",title:"Construction Management App: User Accounts",updatedAt:new Date(Date.now()-1728e5).toISOString()}],C={role:"assistant",content:`Salut ! Je suis Claude, votre assistant IA. 👋

Je peux vous aider avec :
• **Questions générales** - Tout ce que vous voulez savoir
• **Analyse de documents** - Uploadez vos fichiers
• **Programmation** - Code, debug, explications
• **Rédaction** - Textes, emails, articles
• **Business** - Stratégie, analyse, conseils
• **Et bien plus** - Créativité, apprentissage, recherche...

Comment puis-je vous aider aujourd'hui ?`,timestamp:new Date().toISOString(),id:"mock-initial-message"};y.useEffect(()=>{w()},[]),y.useEffect(()=>{j()},[i]);const j=()=>{var H;(H=x.current)==null||H.scrollIntoView({behavior:"smooth"})},w=async()=>{var H,q,X,$,K;try{const se=localStorage.getItem("auth_token");console.log("🔐 Token présent:",!!se),console.log("👤 User data:",t),console.log("🔗 API URL:",Ee.defaults.baseURL);try{console.log("📡 Tentative de connexion à l'API...");const Z=await Ee.get("/claude/conversations");if(console.log("✅ API Response loadConversations:",Z.data),Z.data&&Array.isArray(Z.data)&&Z.data.length>=0){const ie=Z.data.map(ee=>({...ee,id:ee.sessionId||ee.id}));r(ie),console.log("✅ Conversations chargées depuis l'API:",ie.length),!n&&ie.length>0&&(a(ie[0].id),N(ie[0].id));return}if(Z.data&&Z.data.success&&Z.data.conversations){r(Z.data.conversations),!n&&Z.data.conversations.length>0&&(a(Z.data.conversations[0].id),N(Z.data.conversations[0].id));return}}catch(Z){console.error("❌ ERREUR API loadConversations:",Z),console.error("❌ API Error details:",((H=Z.response)==null?void 0:H.data)||Z.message),console.error("❌ Status:",(q=Z.response)==null?void 0:q.status),ve.error(`Erreur API loadConversations: ${(X=Z.response)==null?void 0:X.status} - ${((K=($=Z.response)==null?void 0:$.data)==null?void 0:K.message)||Z.message}`)}console.log("⚠️ Utilisation des données factices (fallback)"),r(b)}catch(se){console.error("Erreur chargement conversations:",se),r(b)}},N=async H=>{var q;try{console.log("🔄 Chargement conversation ID:",H),a(H);try{const X=await Ee.get(`/claude/conversations/${H}`);if(console.log("✅ Réponse loadConversation:",X.data),X.data&&X.data.success&&X.data.messages){o(X.data.messages);return}else if(X.data&&X.data.messages){o(X.data.messages);return}}catch(X){console.error("❌ ERREUR API loadConversation:",X),console.error("❌ API Error details:",((q=X.response)==null?void 0:q.data)||X.message)}console.log("📝 Utilisation du message initial par défaut"),o([C])}catch(X){console.error("Erreur chargement conversation:",X),o([C])}},E=async()=>{var H,q,X;try{try{const K=await Ee.post("/claude/conversations",{title:"Nouvelle conversation"});if(console.log("✅ Réponse createConversation:",K.data),K.data&&K.data.success&&K.data.conversation){const se={...K.data.conversation,id:K.data.conversation.id||K.data.conversation.sessionId};console.log("✅ Nouvelle conversation créée:",se),r(Z=>[se,...Z]),a(se.id),o([C]),ve.success("Nouvelle conversation créée !");return}}catch(K){console.error("❌ ERREUR API createNewConversation:",K),console.error("❌ API Error details:",((H=K.response)==null?void 0:H.data)||K.message),ve.error(`Erreur API createNewConversation: ${((X=(q=K.response)==null?void 0:q.data)==null?void 0:X.message)||K.message}`)}const $={id:sb(),title:"Nouvelle conversation",updatedAt:new Date().toISOString()};r(K=>[$,...K]),a($.id),o([C]),ve.success("Nouvelle conversation créée (mode local) !")}catch($){console.error("Erreur création conversation:",$),ve.error("Erreur lors de la création de la conversation")}},_=async()=>{var X,$,K,se,Z;if(!l.trim()&&h.length===0)return;if(!n){await E();return}const H={role:"user",content:l,timestamp:new Date().toISOString(),id:sb(),files:h.map(ie=>({name:ie.name,size:ie.size,type:ie.type}))};o(ie=>[...ie,H]),d(!0);const q=l;c(""),m([]);try{try{const ie=localStorage.getItem("auth_token");console.log("📤 Envoi message - Token présent:",!!ie),console.log("📤 ConversationId:",n),console.log("📤 Message:",q);const ee=new FormData;ee.append("conversationId",n),ee.append("message",q),h.forEach((ae,re)=>{ee.append("files",ae)}),console.log("📡 Envoi vers API /claude/message...");const ue=await Ee.post("/claude/message",ee,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("✅ Réponse API sendMessage:",ue.data),ue.data&&ue.data.response){const ae={role:"assistant",content:ue.data.response,timestamp:ue.data.timestamp||new Date().toISOString(),id:ue.data.messageId||sb()};o(re=>[...re,ae]),d(!1),console.log("✅ Message de Claude reçu et affiché");return}}catch(ie){console.error("❌ ERREUR API sendMessage:",ie),console.error("❌ API Error details:",((X=ie.response)==null?void 0:X.data)||ie.message),console.error("❌ Status:",($=ie.response)==null?void 0:$.status),ve.error(`Erreur API sendMessage: ${(K=ie.response)==null?void 0:K.status} - ${((Z=(se=ie.response)==null?void 0:se.data)==null?void 0:Z.message)||ie.message}`)}setTimeout(()=>{const ie=["C'est une excellente question ! Laissez-moi vous expliquer en détail...","Je comprends votre besoin. Voici ce que je peux vous proposer :","Intéressant ! Permettez-moi d'analyser cela pour vous...","Parfait ! Je vais vous aider avec cela. Voici ma réponse :","Excellente demande ! Voici une analyse complète :"],ue={role:"assistant",content:`${ie[Math.floor(Math.random()*ie.length)]}

${q.includes("?")?"Voici la réponse à votre question":"Voici ce que je peux vous dire sur le sujet"} :

⚠️ **Mode Démonstration** - L'API Claude est temporairement indisponible. Cette réponse est simulée.

Veuillez vérifier que le backend est démarré et que l'API Claude est configurée correctement.`,timestamp:new Date().toISOString(),id:sb()};o(ae=>[...ae,ue]),d(!1)},1500)}catch(ie){console.error("Erreur envoi message:",ie),ve.error("Erreur lors de l'envoi du message");const ee={role:"assistant",content:"Désolé, j'ai rencontré une erreur. Veuillez réessayer.",timestamp:new Date().toISOString(),id:sb()};o(ue=>[...ue,ee]),d(!1)}},k=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),_())},D=H=>{const q=Array.from(H.target.files);m(X=>[...X,...q])},S=H=>{H.preventDefault(),g(!0)},F=H=>{H.preventDefault(),g(!1)},M=H=>{H.preventDefault(),g(!1);const q=Array.from(H.dataTransfer.files);m(X=>[...X,...q])},R=H=>{m(q=>q.filter((X,$)=>$!==H))},U=H=>{if(H===0)return"0 Bytes";const q=1024,X=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(H)/Math.log(q));return parseFloat((H/Math.pow(q,$)).toFixed(2))+" "+X[$]},z=H=>H.type.startsWith("image/")?s.jsx(Mae,{size:16}):H.type.includes("pdf")||H.type.includes("document")?s.jsx(Qi,{size:16}):s.jsx(Lae,{size:16}),Q=H=>new Date(H).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return e.filter(H=>H.title&&H.title.toLowerCase().includes(f.toLowerCase())),s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs(Xe,{onClick:E,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",children:[s.jsx(Qd,{size:16,className:"mr-2"}),"Nouvelle conversation"]})}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(dz,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx(Ur,{value:f,onChange:H=>A(H.target.value),placeholder:"Rechercher dans vos conversations...",className:"pl-10"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"p-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 px-2",children:"Votre historique de chat"}),s.jsx("div",{className:"p-3 rounded-lg cursor-pointer mb-1 transition-colors bg-gray-100 border border-gray-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Test conversation - map désactivé"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Test pour identifier le problème"})]}),s.jsx(tP,{size:14,className:"text-gray-400 flex-shrink-0 mt-1"})]})})]})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Vous avez ",e.length," conversations précédentes avec Claude."]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:"C"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Claude"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Assistant IA par Anthropic"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xe,{variant:"ghost",size:"sm",children:s.jsx(Oae,{size:16})}),s.jsx(Xe,{variant:"ghost",size:"sm",children:s.jsx(Fae,{size:16})})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.map(H=>{var q;return s.jsx("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-3xl ${H.role==="user"?"order-2":"order-1"}`,children:[H.role==="assistant"&&s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold mr-2",children:"C"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Claude"})]}),H.role==="user"&&s.jsxs("div",{className:"flex items-center justify-end mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 mr-2",children:"Vous"}),s.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:((q=t==null?void 0:t.prenom)==null?void 0:q[0])||"U"})]}),s.jsxs("div",{className:`rounded-2xl p-4 ${H.role==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200"}`,children:[H.files&&H.files.length>0&&s.jsx("div",{className:"mb-3",children:H.files.map((X,$)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 rounded-lg p-2 mb-2",children:[z(X),s.jsx("span",{className:"text-sm truncate",children:X.name}),s.jsxs("span",{className:"text-xs opacity-75",children:["(",U(X.size),")"]})]},`${H.id}-file-${$}`))}),s.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:H.content})]}),s.jsx("div",{className:`text-xs mt-2 ${H.role==="user"?"text-right text-gray-500":"text-gray-500"}`,children:Q(H.timestamp)})]})},H.id)}),u&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"max-w-3xl",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold mr-2",children:"C"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Claude"})]}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"Claude réfléchit..."})]})})]})}),s.jsx("div",{ref:x})]}),s.jsxs("div",{className:"bg-white border-t border-gray-200 p-6",children:[h.length>0&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((H,q)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-2",children:[z(H),s.jsx("span",{className:"text-sm truncate max-w-32",children:H.name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",U(H.size),")"]}),s.jsx(Xe,{variant:"ghost",size:"sm",onClick:()=>R(q),className:"h-auto p-1",children:s.jsx(Hh,{size:12})})]},`selected-file-${q}-${H.name}-${H.size}`))})}),s.jsxs("div",{className:`relative rounded-2xl border-2 transition-colors ${p?"border-blue-400 bg-blue-50":"border-gray-200"}`,onDragOver:S,onDragLeave:F,onDrop:M,children:[s.jsxs("div",{className:"flex items-end space-x-3 p-4",children:[s.jsx(Xe,{variant:"ghost",size:"sm",onClick:()=>{var H;return(H=v.current)==null?void 0:H.click()},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Rae,{size:20})}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:l,onChange:H=>c(H.target.value),onKeyPress:k,placeholder:"Répondre à Claude...",disabled:u,rows:"1",className:"w-full resize-none border-0 focus:ring-0 focus:outline-none text-sm placeholder-gray-500 bg-transparent",style:{minHeight:"24px",maxHeight:"120px"},onInput:H=>{H.target.style.height="auto",H.target.style.height=Math.min(H.target.scrollHeight,120)+"px"}})}),s.jsx(Xe,{onClick:_,disabled:u||!l.trim()&&h.length===0,size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl",children:s.jsx(uz,{size:16})})]}),p&&s.jsx("div",{className:"absolute inset-0 bg-blue-100/80 rounded-2xl flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(J_,{size:32,className:"mx-auto text-blue-600 mb-2"}),s.jsx("p",{className:"text-blue-600 font-medium",children:"Déposez vos fichiers ici"})]})})]}),s.jsx("input",{ref:v,type:"file",multiple:!0,onChange:D,className:"hidden",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.csv,.xlsx"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Claude peut faire des erreurs. Vérifiez les informations importantes."})]})]})]})},iut=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(!0);y.useEffect(()=>{const i=()=>{const o=["Dupont SA","Martin SARL","Leblanc & Fils","Durand Construction","Bernard Rénovation"],l=["PLANIFIEE","EN_COURS","TERMINEE"],c=["BASSE","NORMALE","HAUTE","URGENTE"],u=[],d=new Date;for(let f=1;f<=15;f++){const A=new Date(d.getTime()+(Math.random()-.5)*30*24*60*60*1e3),h=Math.floor(Math.random()*20)+5,m=new Date(A.getTime()+h*24*60*60*1e3);u.push({id:`demo-${f}`,numero:`AFF-2024-${String(f).padStart(3,"0")}`,libelle:`Projet ${["Rénovation","Construction","Extension","Aménagement","Réparation"][Math.floor(Math.random()*5)]} ${o[Math.floor(Math.random()*o.length)]}`,client:o[Math.floor(Math.random()*o.length)],dateDebut:A,dateFin:m,dureeJours:h,statut:l[Math.floor(Math.random()*l.length)],priorite:c[Math.floor(Math.random()*c.length)],estimationBudget:Math.floor(Math.random()*5e5)+5e4,montantRealise:Math.floor(Math.random()*3e5)+2e4,progression:Math.floor(Math.random()*100),equipe:[{id:1,prenom:"Jean",nom:"Dupont"},{id:2,prenom:"Marie",nom:"Martin"},{id:3,prenom:"Pierre",nom:"Durand"}].slice(0,Math.floor(Math.random()*3)+1)})}return u};setTimeout(()=>{e(i()),n(!1)},1e3)},[]);const a=()=>{n(!0),setTimeout(()=>{e([]),setTimeout(()=>{const i=["Dupont SA","Martin SARL","Leblanc & Fils","Durand Construction","Bernard Rénovation"],o=["PLANIFIEE","EN_COURS","TERMINEE"],l=[],c=new Date;for(let u=1;u<=Math.floor(Math.random()*10)+10;u++){const d=new Date(c.getTime()+(Math.random()-.5)*30*24*60*60*1e3),f=Math.floor(Math.random()*20)+5,A=new Date(d.getTime()+f*24*60*60*1e3);l.push({id:`demo-${u}`,numero:`AFF-2024-${String(u).padStart(3,"0")}`,libelle:`Projet ${["Rénovation","Construction","Extension","Aménagement","Réparation"][Math.floor(Math.random()*5)]} ${i[Math.floor(Math.random()*i.length)]}`,client:i[Math.floor(Math.random()*i.length)],dateDebut:d,dateFin:A,dureeJours:f,statut:o[Math.floor(Math.random()*o.length)],estimationBudget:Math.floor(Math.random()*5e5)+5e4,progression:Math.floor(Math.random()*100),equipe:[{id:1,prenom:"Jean",nom:"Dupont"},{id:2,prenom:"Marie",nom:"Martin"}].slice(0,Math.floor(Math.random()*2)+1)})}e(l),n(!1)},500)},200)};return s.jsxs(Od,{size:"xl",py:"xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(Kr,{order:1,className:"text-[#000000] mb-4",children:"🧪 Test Module Planning Interactif"}),s.jsx(He,{size:"lg",className:"text-[#333333] mb-4",children:'Démonstration du planning optimisé Surface Microsoft avec thème "terre bois vert olive"'}),s.jsx(Ia,{icon:s.jsx(Io,{size:16}),title:"Sprint 1 - Fonctionnalités Testables",className:"mb-6",style:{backgroundColor:"#f0f4e8",border:"1px solid #d9e2c4"},children:s.jsxs("ul",{className:"text-sm space-y-1 mt-2",children:[s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Navigation tactile"})," : Testez les boutons de vue (Jour/Semaine/Mois)"]}),s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Couleurs automatiques"})," : Chaque affaire a sa couleur unique"]}),s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Drag & Drop"})," : Glissez les cartes d'affaires (optimisé Surface)"]}),s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Zones de drop"})," : Feedback visuel sur les zones de destination"]}),s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Statistiques"})," : Dashboard temps réel avec progressions"]}),s.jsxs("li",{children:["✅ ",s.jsx("strong",{children:"Thème cohérent"}),' : Design "terre bois vert olive" appliqué']})]})}),s.jsxs(Bt,{children:[s.jsx(rr,{variant:"outline",leftSection:s.jsx(_s,{size:16}),onClick:a,className:"border-[#6b7c3d] text-[#6b7c3d] hover:bg-[#6b7c3d] hover:text-white",children:"Régénérer Données Demo"}),s.jsxs(He,{size:"sm",className:"text-[#333333]",children:[t.length," affaires chargées"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-[#d9e2c4] p-6",children:s.jsx(LF,{affaires:t,isLoading:r,onAffaireUpdate:i=>{console.log("Affaire mise à jour:",i)},onAffaireClick:i=>{console.log("Affaire cliquée:",i),alert(`Affaire sélectionnée:
${i.numero} - ${i.libelle}
Client: ${i.client}`)}})}),s.jsxs("div",{className:"mt-8",children:[s.jsx(Kr,{order:3,className:"text-[#6b7c3d] mb-4",children:"📋 Instructions de Test"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"p-4 bg-[#f5f0e8] border border-[#e8dcc0] rounded-lg",children:[s.jsx(Kr,{order:4,className:"text-[#8b5a2b] mb-3",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{children:["🖱️ ",s.jsx("strong",{children:"Vue Jour"}),' : Cliquez sur "Jour" pour voir le planning détaillé']}),s.jsxs("li",{children:["📅 ",s.jsx("strong",{children:"Vue Semaine"})," : Vue d'ensemble sur 7 jours"]}),s.jsxs("li",{children:["📊 ",s.jsx("strong",{children:"Vue Mois"})," : Planning mensuel complet"]}),s.jsxs("li",{children:["⬅️➡️ ",s.jsx("strong",{children:"Navigation"})," : Flèches pour changer de période"]}),s.jsxs("li",{children:["🏠 ",s.jsx("strong",{children:"Aujourd'hui"})," : Bouton pour revenir à la date actuelle"]})]})]}),s.jsxs("div",{className:"p-4 bg-[#f0f4e8] border border-[#d9e2c4] rounded-lg",children:[s.jsx(Kr,{order:4,className:"text-[#6b7c3d] mb-3",children:"Drag & Drop"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{children:["🖱️ ",s.jsx("strong",{children:"Glisser"})," : Maintenez le clic sur une carte d'affaire"]}),s.jsxs("li",{children:["📍 ",s.jsx("strong",{children:"Déposer"})," : Relâchez sur une zone en pointillés"]}),s.jsxs("li",{children:["✨ ",s.jsx("strong",{children:"Feedback"})," : Zones colorées quand survol"]}),s.jsxs("li",{children:["📱 ",s.jsx("strong",{children:"Tactile"})," : Fonctionne au doigt sur tablette"]}),s.jsxs("li",{children:["🎯 ",s.jsx("strong",{children:"Précision"})," : Zones optimisées Surface Microsoft"]})]})]}),s.jsxs("div",{className:"p-4 bg-[#faf6f0] border border-[#f0e6d2] rounded-lg",children:[s.jsx(Kr,{order:4,className:"text-[#556b2f] mb-3",children:"Couleurs"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{children:["🎨 ",s.jsx("strong",{children:"Automatiques"})," : 24 couleurs distinctives"]}),s.jsxs("li",{children:["🔄 ",s.jsx("strong",{children:"Cohérentes"})," : Même affaire = même couleur"]}),s.jsxs("li",{children:["📱 ",s.jsx("strong",{children:"Lisibles"})," : Contrastes optimisés"]}),s.jsxs("li",{children:["🎯 ",s.jsx("strong",{children:"Uniques"})," : Pas de doublons visuels"]})]})]}),s.jsxs("div",{className:"p-4 bg-[#f0f4e8] border border-[#d9e2c4] rounded-lg",children:[s.jsx(Kr,{order:4,className:"text-[#6b7c3d] mb-3",children:"Statistiques"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{children:["📊 ",s.jsx("strong",{children:"Temps réel"})," : Données mises à jour automatiquement"]}),s.jsxs("li",{children:["💰 ",s.jsx("strong",{children:"Budget"})," : Progression financière avec barres"]}),s.jsxs("li",{children:["👥 ",s.jsx("strong",{children:"Équipe"})," : Charge de travail par membre"]}),s.jsxs("li",{children:["🎯 ",s.jsx("strong",{children:"Performance"})," : Score global calculé"]})]})]})]})]})]})},out=()=>{const[t,e]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState(!1),[o,l]=y.useState(null),c=async()=>{try{i(!0),l(null),console.log("🧪 Test récupération ouvriers avec couleurs...");const d=await Bs.getOuvriersDisponibles(),f=new Date().toISOString().split("T")[0],A=await Bs.getPlanningHebdomadaire(f),h=[...d.salaries,...d.sousTraitants];e(h),n(A),console.log("✅ Test terminé:",{ouvriersLoaded:h.length>0,couleursPresentes:h.every(m=>m.couleurPlanning&&m.couleurPlanning.startsWith("#"))})}catch(d){console.error("❌ Erreur test:",d),l(d.message)}finally{i(!1)}},u=d=>{const f=d.replace("#",""),A=parseInt(f.substr(0,2),16),h=parseInt(f.substr(2,2),16),m=parseInt(f.substr(4,2),16);return(.299*A+.587*h+.114*m)/255>.5?"#000000":"#FFFFFF"};return y.useEffect(()=>{c()},[]),s.jsxs("div",{className:"space-y-6 p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Couleurs Planning Équipe"}),s.jsx("p",{className:"text-gray-600",children:"Validation de l'intégration des couleurs des utilisateurs dans le planning"})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:c,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:a?"Chargement...":"Relancer les tests"})}),o&&s.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("div",{className:"flex items-center gap-2 text-red-800",children:s.jsx("span",{className:"font-medium",children:"Erreur:"})}),s.jsx("p",{className:"text-red-700 text-sm mt-1",children:o})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Ouvriers chargés"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Avec couleurs"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(d=>d.couleurPlanning).length})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Affectations"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.length})]})]}),t.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Ouvriers et leurs couleurs (",t.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(d=>s.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsxs("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm",style:{backgroundColor:d.couleurPlanning||"#9CA3AF",color:u(d.couleurPlanning||"#9CA3AF")},children:[d.prenom[0],d.nom[0]]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[d.prenom," ",d.nom]}),s.jsx("div",{className:"text-sm text-gray-600",children:d.role.replace("_"," ")})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Couleur:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:d.couleurPlanning||"#9CA3AF"}}),s.jsx("span",{className:"font-mono text-xs",children:d.couleurPlanning||"Non définie"})]})]})})]},d.id))})]}),r.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Aperçu Planning (",r.length," affectations)"]}),s.jsxs("div",{className:"space-y-3",children:[r.slice(0,10).map(d=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-xs",style:{backgroundColor:d.user.couleurPlanning||"#9CA3AF"},children:[d.user.prenom[0],d.user.nom[0]]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-sm",children:[d.user.prenom," ",d.user.nom]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[d.affaire.numero," - ",d.periode," - ",d.typeActivite]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded border border-gray-300",style:{backgroundColor:d.user.couleurPlanning||"#9CA3AF"}}),s.jsx("span",{className:"font-mono text-xs",children:d.user.couleurPlanning||"Non définie"})]})]},d.id)),r.length>10&&s.jsxs("div",{className:"text-center text-sm text-gray-500",children:["... et ",r.length-10," autres affectations"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Palette de couleurs MAI-GESTION"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Couleurs en utilisation:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(t.map(d=>d.couleurPlanning).filter(Boolean))].map(d=>s.jsxs("div",{className:"flex items-center gap-2 bg-white border rounded-lg px-3 py-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:d}}),s.jsx("span",{className:"font-mono text-xs",children:d})]},d))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Palette complète (terre, bois, olive, soleil):"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:["#8B4513","#A0522D","#CD853F","#D2691E","#DEB887","#BC8F8F","#F4A460","#DAA520","#556B2F","#6B8E23","#808000","#9ACD32","#FF8C00","#FFB347","#FFA500","#F0E68C","#B22222","#CD5C5C","#D2B48C","#F5DEB3"].map(d=>s.jsxs("div",{className:"flex flex-col items-center gap-1 p-2 bg-white border rounded",children:[s.jsx("div",{className:"w-8 h-8 rounded border border-gray-300",style:{backgroundColor:d}}),s.jsx("span",{className:"font-mono text-xs",children:d})]},d))})]})]})]})]})},lut=()=>s.jsx(HG,{children:s.jsx("div",{className:"p-4",children:s.jsx(out,{})})});class cut{constructor(){this.baseUrl="/planning-equipe",this.cache=new Map,this.cacheTimeout=5*60*1e3}async getPlanning(e,r=null,n={}){const a=`planning-${e}-${r||"all"}`;if(this.cache.has(a)){const i=this.cache.get(a);if(Date.now()-i.timestamp<this.cacheTimeout)return i.data}try{const i={dateDebut:e,inclureTerminees:n.inclureTerminees||!1,...n};r&&console.warn("Filtrage par affaireId non supporté par le backend, filtrage côté frontend");const o=await Ee.get(`${this.baseUrl}/semaine`,{params:i});return this.cache.set(a,{data:o.data,timestamp:Date.now()}),o.data}catch(i){throw console.error("Erreur lors de la récupération du planning:",i),i}}async affecterOuvrierOptimise(e){try{const r={affaireId:e.affaireId,userId:e.ouvrierId||e.userId,dateAffectation:e.date||e.dateAffectation,periode:e.creneau==="matin"?"MATIN":"APREM",typeActivite:e.typeActivite||"FABRICATION"},n=await Ee.post(`${this.baseUrl}/affecter`,r);return this.clearCache(),n.data}catch(r){throw console.error("Erreur lors de l'affectation:",r),r}}async modifierAffectation(e,r){try{const n=await Ee.put(`${this.baseUrl}/affectation/${e}`,r);return this.clearCache(),n.data}catch(n){throw console.error("Erreur lors de la modification:",n),n}}async supprimerAffectation(e){try{await Ee.delete(`${this.baseUrl}/desaffecter/${e}`),this.clearCache()}catch(r){throw console.error("Erreur lors de la suppression:",r),r}}async getOuvriersDisponibles(e,r){try{return(await Ee.get(`${this.baseUrl}/ouvriers-disponibles`)).data}catch(n){throw console.error("Erreur lors de la récupération des ouvriers:",n),n}}async calculerCouts(e,r=null){try{const a=e.length,i=a>0?2542.9/a:0;return{coutTotal:i*a,coutParAffectation:i,nombreAffectations:a,baseFix:2542.9}}catch(n){throw console.error("Erreur lors du calcul des coûts:",n),n}}async getAffairesActives(){try{return(await Ee.get(`${this.baseUrl}/affaires-actives`)).data}catch(e){throw console.error("Erreur lors de la récupération des affaires:",e),e}}async getAllAffectationsAffaire(e,r=!1){const n=`affectations-${e}-${r}`;if(this.cache.has(n)){const a=this.cache.get(n);if(Date.now()-a.timestamp<this.cacheTimeout)return a.data}try{const a={inclureTerminees:r},i=await Ee.get(`${this.baseUrl}/affaire/${e}/affectations`,{params:a});return this.cache.set(n,{data:i.data,timestamp:Date.now()}),i.data}catch(a){throw console.error("Erreur lors de la récupération des affectations de l'affaire:",a),a}}async validerAffectation(e){try{return console.warn("Validation d'affectation temporairement désactivée"),{id:e,valide:!0}}catch(r){throw console.error("Erreur lors de la validation:",r),r}}async duplicherAffectation(e,r){try{return console.warn("Duplication d'affectation temporairement désactivée"),{id:"temp-"+Date.now(),affectationId:e,nouvelleDateDebut:r}}catch(n){throw console.error("Erreur lors de la duplication:",n),n}}async getStatistiques(e,r=null){try{const n={dateDebut:e};return(await Ee.get(`${this.baseUrl}/statistiques`,{params:n})).data}catch(n){throw console.error("Erreur lors de la récupération des statistiques:",n),n}}async exporterPDF(e,r=null){try{throw console.warn("Export PDF temporairement désactivé"),new Error("Export PDF temporairement indisponible")}catch(n){throw console.error("Erreur lors de l'export PDF:",n),n}}clearCache(){this.cache.clear()}cleanupCache(){const e=Date.now();for(const[r,n]of this.cache.entries())e-n.timestamp>this.cacheTimeout&&this.cache.delete(r)}}const Wo=new cut;setInterval(()=>{Wo.cleanupCache()},10*60*1e3);const uut=(t=null)=>{const[e,r]=y.useState({affaires:[],affectations:[],ouvriers:[],jours:[],statistiques:null}),[n,a]=y.useState(!1),[i,o]=y.useState(null),[l,c]=y.useState(new Date),[u,d]=y.useState(t),[f,A]=y.useState("grid"),h=y.useRef(null),m=y.useRef(!1),p=y.useCallback(M=>{const R=new Date(M),U=R.getDay(),z=R.getDate()-U+(U===0?-6:1);return R.setDate(z),R.toISOString().split("T")[0]},[]),g=y.useCallback(async(M=!1)=>{if(!(m.current&&!M)){h.current&&h.current.abort(),h.current=new AbortController,m.current=!0,a(!0),o(null);try{if(console.log("🚀 [usePlanningAffaireData] Chargement données pour affaireId:",u),u){console.log("📊 Récupération TOUTES les affectations pour affaire:",u);const[R,U]=await Promise.all([Wo.getAllAffectationsAffaire(u,!1),Wo.getAffairesActives()]);console.log("✅ Affectations récupérées:",R);const z=R.affectations.map(q=>({...q,date:q.dateAffectation.split("T")[0],creneau:q.periode==="MATIN"?"matin":"aprem"})),H=[...new Set(z.map(q=>q.date))].sort().map(q=>{const X=new Date(q);return{date:q,nom:X.toLocaleDateString("fr-FR",{weekday:"long"}),numero:X.getDate()}});r(q=>({...q,affaires:U,affectations:z,ouvriers:[],jours:H,statistiques:R.totaux}))}else{const R=p(l),[U,z,Q]=await Promise.all([Wo.getPlanning(R,u),Wo.getAffairesActives(),Wo.getStatistiques(R,u)]);r(H=>({...H,affaires:z,affectations:U.affectations||[],ouvriers:U.ouvriers||[],jours:U.jours||[],statistiques:Q}))}}catch(R){R.name!=="AbortError"&&(o(R.message||"Erreur lors du chargement du planning"),console.error("❌ Erreur planning:",R))}finally{a(!1),m.current=!1}}},[l,u,p]),x=y.useCallback(async M=>{try{a(!0);const R=await Wo.affecterOuvrierOptimise(M);return r(U=>({...U,affectations:[...U.affectations,R]})),R}catch(R){throw o(R.message||"Erreur lors de l'affectation"),R}finally{a(!1)}},[]),v=y.useCallback(async(M,R)=>{try{a(!0);const U=await Wo.modifierAffectation(M,R);return r(z=>({...z,affectations:z.affectations.map(Q=>Q.id===M?U:Q)})),U}catch(U){throw o(U.message||"Erreur lors de la modification"),U}finally{a(!1)}},[]),b=y.useCallback(async M=>{try{a(!0),await Wo.supprimerAffectation(M),r(R=>({...R,affectations:R.affectations.filter(U=>U.id!==M)}))}catch(R){throw o(R.message||"Erreur lors de la suppression"),R}finally{a(!1)}},[]),C=y.useCallback(async M=>{try{a(!0);const R=await Wo.validerAffectation(M);return r(U=>({...U,affectations:U.affectations.map(z=>z.id===M?R:z)})),R}catch(R){throw o(R.message||"Erreur lors de la validation"),R}finally{a(!1)}},[]),j=y.useCallback(async(M,R)=>{try{a(!0);const U=await Wo.duplicherAffectation(M,R);return r(z=>({...z,affectations:[...z.affectations,U]})),U}catch(U){throw o(U.message||"Erreur lors de la duplication"),U}finally{a(!1)}},[]),w=y.useCallback(async(M,R)=>{try{return await Wo.getOuvriersDisponibles(M,R)}catch(U){return console.error("Erreur ouvriers disponibles:",U),[]}},[]),N=y.useCallback(()=>{c(M=>{const R=new Date(M);return R.setDate(R.getDate()-7),R})},[]),E=y.useCallback(()=>{c(M=>{const R=new Date(M);return R.setDate(R.getDate()+7),R})},[]),_=y.useCallback(()=>{A(M=>M==="grid"?"list":"grid")},[]),k=y.useCallback(M=>{d(M)},[]),D=y.useCallback(async()=>{try{a(!0);const M=p(l),R=await Wo.exporterPDF(M,u),U=window.URL.createObjectURL(R),z=document.createElement("a");z.href=U,z.download=`planning-${M}${u?`-affaire-${u}`:""}.pdf`,document.body.appendChild(z),z.click(),window.URL.revokeObjectURL(U),document.body.removeChild(z)}catch(M){throw o(M.message||"Erreur lors de l'export PDF"),M}finally{a(!1)}},[l,u,p]),S=y.useCallback(()=>{g(!0)},[g]),F=y.useCallback(()=>{const M=new Date(l),R=M.getDay(),U=M.getDate()-R+(R===0?-6:1);M.setDate(U);const z=Math.ceil((M.getTime()-new Date(M.getFullYear(),0,1).getTime())/(7*24*60*60*1e3)),Q=M.toLocaleDateString("fr-FR",{month:"long"});return`Semaine ${z} - ${Q} ${M.getFullYear()}`},[l]);return y.useEffect(()=>{g()},[g]),y.useEffect(()=>()=>{h.current&&h.current.abort()},[]),{planningData:e,loading:n,error:i,selectedWeek:l,affaireId:u,viewMode:f,currentWeekLabel:F(),affecterOuvrier:x,modifierAffectation:v,supprimerAffectation:b,validerAffectation:C,duplicherAffectation:j,getOuvriersDisponibles:w,exporterPDF:D,refresh:S,previousWeek:N,nextWeek:E,toggleViewMode:_,filtrerParAffaire:k,setSelectedWeek:c,setAffaireId:d,setViewMode:A,setError:o}},dut=()=>{var a,i,o,l,c,u;const{planningData:t,loading:e,error:r,currentWeekLabel:n}=uut();return e?s.jsx("div",{children:"Chargement du planning..."}):r?s.jsxs("div",{children:["Erreur: ",r]}):s.jsxs("div",{style:{padding:"20px"},children:[s.jsxs("h2",{children:["Test Planning - ",n]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h3",{children:"Données chargées :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:["Affaires: ",((a=t.affaires)==null?void 0:a.length)||0]}),s.jsxs("li",{children:["Affectations: ",((i=t.affectations)==null?void 0:i.length)||0]}),s.jsxs("li",{children:["Ouvriers: ",((o=t.ouvriers)==null?void 0:o.length)||0]}),s.jsxs("li",{children:["Jours: ",((l=t.jours)==null?void 0:l.length)||0]})]})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h3",{children:"Affaires actives :"}),(c=t.affaires)==null?void 0:c.map(d=>s.jsxs("div",{style:{margin:"5px 0"},children:[d.numero," - ",d.client]},d.id))]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h3",{children:"Affectations :"}),(u=t.affectations)==null?void 0:u.map(d=>{var f;return s.jsxs("div",{style:{margin:"5px 0"},children:[(f=d.ouvrier)==null?void 0:f.nom," - ",d.date," - ",d.creneau]},d.id)})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h3",{children:"Statistiques :"}),s.jsx("pre",{children:JSON.stringify(t.statistiques,null,2)})]})]})},fut=()=>{const[t,e]=y.useState(!1),[r,n]=y.useState(null),[a,i]=y.useState(null),[o,l]=y.useState(()=>{const A=new Date,h=A.getDay(),m=h===0?-6:1-h,p=new Date(A);return p.setDate(A.getDate()+m),p}),c=A=>{const m={},p={},g={};return A.forEach(x=>{const v=x.dateAffectation.split("T")[0];m[v]||(m[v]=[]),m[v].push(x)}),Object.keys(m).forEach(x=>{const v=m[x],b=v.length,C=508.58/b;g[x]={nbAffectationsTotal:b,coutParAffectation:C,coutTotalJour:508.58,affectations:v.map(j=>{var w,N,E;return{employe:((w=j.user)==null?void 0:w.nom)||"Inconnu",prenom:((N=j.user)==null?void 0:N.prenom)||"",affaire:((E=j.affaire)==null?void 0:E.libelle)||`Affaire ${j.affaireId}`,periode:j.periode}})},v.forEach(j=>{var E,_,k;const w=j.affaireId,N=((E=j.affaire)==null?void 0:E.libelle)||`Affaire ${w}`;p[w]||(p[w]={nomAffaire:N,totalFrais:0,details:[]}),p[w].totalFrais+=C,p[w].details.push({date:x,periode:j.periode,employe:`${((_=j.user)==null?void 0:_.nom)||"Inconnu"} ${((k=j.user)==null?void 0:k.prenom)||""}`,nbAffectationsJour:b,coutParAffectation:C})})}),{fraisParAffaire:p,detailsCalcul:g}},u=async()=>{e(!0),i(null);try{const A=Bs.getDebutSemaine(o);console.log("🔄 Récupération planning pour:",A),console.log("📅 Date formatée:",A.toISOString());const h=await Bs.getPlanningHebdomadaire(A,!0);if(console.log("📊 Données planning récupérées:",h),console.log("📊 Affectations:",h==null?void 0:h.affectations),!h){i("Aucune donnée de planning récupérée");return}if(!h.affectations||h.affectations.length===0){i(`Aucune affectation trouvée pour la semaine du ${A.toLocaleDateString("fr-FR")}`),n({semaine:A,nbAffectationsTotal:0,fraisGenerauxTotal:0,fraisParAffaire:{},detailsCalcul:{},affectations:[]});return}const{fraisParAffaire:m,detailsCalcul:p}=c(h.affectations),g={semaine:A,nbAffectationsTotal:h.affectations.length,fraisGenerauxTotal:Object.values(m).reduce((x,v)=>x+v.totalFrais,0),fraisParAffaire:m,detailsCalcul:p,affectations:h.affectations};n(g)}catch(A){console.error("❌ Erreur lors du calcul:",A),i(A.message||"Erreur lors du calcul")}finally{e(!1)}},d=()=>r!=null&&r.detailsCalcul?s.jsx(Kt,{className:"mb-6",children:s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🧮 Détails du Calcul par Jour"}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"💡 Logique de Calcul"}),s.jsxs("p",{className:"text-blue-800 text-sm",children:["• Coût fixe par jour : ",s.jsx("strong",{children:"508,58€"}),s.jsx("br",{}),"• Coût réparti entre ",s.jsx("strong",{children:"TOUTES"})," les affectations du jour",s.jsx("br",{}),"• Si Dorian est seul un jour → il absorbe les 508,58€ complets",s.jsx("br",{}),"• S'il y a 10 personnes → chacune absorbe 508,58€ ÷ 10 = 50,86€"]})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(r.detailsCalcul).map(([A,h])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"font-semibold text-gray-900",children:["📅 ",on(new Date(A),"EEEE dd MMMM yyyy",{locale:Un})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Kn,{variant:"outline",className:"bg-orange-100",children:[h.nbAffectationsTotal," affectations"]}),s.jsxs(Kn,{variant:"outline",className:"bg-green-100",children:[h.coutParAffectation.toFixed(2),"€ / affectation"]})]})]}),s.jsx("div",{className:"bg-gray-50 p-3 rounded mb-3",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Calcul :"})," ",h.coutTotalJour.toFixed(2),"€ ÷ ",h.nbAffectationsTotal," affectations = ",s.jsxs("strong",{children:[h.coutParAffectation.toFixed(2),"€ par affectation"]})]})}),s.jsx("div",{className:"space-y-2",children:h.affectations.map((m,p)=>s.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded border",children:[s.jsx("span",{className:"font-medium",children:m.employe}),s.jsx("span",{className:"text-gray-600",children:m.periode}),s.jsx("span",{className:"text-blue-600",children:m.affaire}),s.jsxs("span",{className:"font-semibold text-green-600",children:[h.coutParAffectation.toFixed(2),"€"]})]},p))})]},A))})]})}):null,f=()=>r!=null&&r.fraisParAffaire?Object.entries(r.fraisParAffaire).map(([A,h])=>s.jsx(Kt,{className:"mb-4",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.nomAffaire}),s.jsxs(Kn,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Total : ",h.totalFrais.toFixed(2),"€"]})]}),s.jsx("div",{className:"space-y-2",children:h.details.map((m,p)=>s.jsxs("div",{className:"flex justify-between items-center text-sm bg-gray-50 p-2 rounded",children:[s.jsxs("span",{children:[on(new Date(m.date),"dd/MM/yyyy",{locale:Un})," - ",m.periode]}),s.jsx("span",{className:"text-gray-600",children:m.employe}),s.jsxs("span",{className:"text-blue-600",children:[m.coutParAffectation.toFixed(2),"€",s.jsxs("span",{className:"text-gray-400 ml-1",children:["(508,58€ ÷ ",m.nbAffectationsJour,")"]})]})]},p))})]})},A)):null;return s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsx(Kt,{className:"mb-6",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"🧮 Test Calcul Frais Généraux - Mutualisation par Jour"}),s.jsxs("div",{className:"flex gap-4 items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semaine de référence"}),s.jsx("input",{type:"date",value:o.toISOString().split("T")[0],onChange:A=>l(new Date(A.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"mt-6",children:s.jsx(Xe,{onClick:u,disabled:t,className:"bg-blue-600 hover:bg-blue-700",children:t?"Calcul en cours...":"Calculer les frais généraux"})})]}),a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),r&&s.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:[s.jsx("h3",{className:"font-semibold",children:"📊 Résultats de la semaine"}),s.jsxs("p",{children:[s.jsxs("strong",{children:["Semaine du ",on(r.semaine,"dd/MM/yyyy",{locale:Un})]}),s.jsx("br",{}),"Total affectations : ",r.nbAffectationsTotal,s.jsx("br",{}),"Total frais généraux répartis : ",r.fraisGenerauxTotal.toFixed(2),"€"]})]})]})}),r&&d(),r&&s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"💰 Frais Généraux par Affaire"}),r&&f()]})},hut=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[A,h]=y.useState(null),[m,p]=y.useState({libelle:"",montantTtc:"",montantHt:"",categorie:"AUTRE",ordre:"",commentaire:"",dateCommencement:"",dateFin:"",actif:!0}),[g,x]=y.useState({dateDebut:"",dateFin:"",heuresParJour:7,joursParSemaine:5}),[v,b]=y.useState(null),[C,j]=y.useState(null),[w,N]=y.useState("asc"),E=[{value:"MATERIEL",label:"Matériel",color:"bg-blue-500"},{value:"VEHICULE",label:"Véhicule",color:"bg-green-500"},{value:"LOCATION",label:"Location",color:"bg-purple-500"},{value:"CHARGES",label:"Charges",color:"bg-orange-500"},{value:"ASSURANCE",label:"Assurance",color:"bg-red-500"},{value:"BANQUE",label:"Banque",color:"bg-gray-500"},{value:"LOGICIEL",label:"Logiciel",color:"bg-teal-500"},{value:"SERVICE",label:"Service",color:"bg-indigo-500"},{value:"COMMUNICATION",label:"Communication",color:"bg-cyan-500"},{value:"CREDIT_CLASSIQUE",label:"Crédit classique",color:"bg-yellow-600"},{value:"CREDIT_BAIL",label:"Crédit bail",color:"bg-rose-600"},{value:"AUTRE",label:"Autre",color:"bg-stone-500"}];y.useEffect(()=>{_()},[]);const _=async()=>{try{i(!0);const[$,K]=await Promise.all([ru.getAll(!0),ru.getStats()]);e($),n(K)}catch($){ve.error("Erreur lors du chargement des données"),console.error($)}finally{i(!1)}},k=async()=>{try{await ru.initialiserDefaut(),ve.success("Frais généraux initialisés avec succès"),_()}catch($){ve.error("Erreur lors de l'initialisation"),console.error($)}},D=async $=>{$.preventDefault();try{const K={...m,montantTtc:parseFloat(m.montantTtc),montantHt:parseFloat(m.montantHt),ordre:m.ordre?parseInt(m.ordre):0};if(K.dateCommencement&&K.dateCommencement.trim()!==""){const se=K.dateCommencement.split("-");if(se.length===3){const Z=parseInt(se[0]),ie=parseInt(se[1])-1,ee=parseInt(se[2]);if(!isNaN(Z)&&!isNaN(ie)&&!isNaN(ee)&&Z>1900&&Z<2100&&ie>=0&&ie<=11&&ee>=1&&ee<=31){const ue=new Date(Z,ie,ee,0,0,0,0);if(!isNaN(ue.getTime()))K.dateCommencement=ue.toISOString();else throw new Error("Date de commencement invalide")}else throw new Error("Date de commencement invalide")}else throw new Error("Format de date de commencement invalide")}else delete K.dateCommencement;if(K.dateFin&&K.dateFin.trim()!==""){const se=K.dateFin.split("-");if(se.length===3){const Z=parseInt(se[0]),ie=parseInt(se[1])-1,ee=parseInt(se[2]);if(!isNaN(Z)&&!isNaN(ie)&&!isNaN(ee)&&Z>1900&&Z<2100&&ie>=0&&ie<=11&&ee>=1&&ee<=31){const ue=new Date(Z,ie,ee,23,59,59,999);if(!isNaN(ue.getTime()))K.dateFin=ue.toISOString();else throw new Error("Date de fin invalide")}else throw new Error("Date de fin invalide")}else throw new Error("Format de date de fin invalide")}else delete K.dateFin;A?(await ru.update(A.id,K),ve.success("Frais général mis à jour avec succès")):(await ru.create(K),ve.success("Frais général créé avec succès")),u(!1),h(null),S(),_()}catch(K){ve.error(K.message||"Erreur lors de la sauvegarde"),console.error(K)}},S=()=>{p({libelle:"",montantTtc:"",montantHt:"",categorie:"AUTRE",ordre:"",commentaire:"",dateCommencement:"",dateFin:"",actif:!0})},F=$=>{h($),p({libelle:$.libelle,montantTtc:$.montantTtc.toString(),montantHt:$.montantHt.toString(),categorie:$.categorie,ordre:$.ordre.toString(),commentaire:$.commentaire||"",dateCommencement:$.dateCommencement?new Date($.dateCommencement).toISOString().split("T")[0]:"",dateFin:$.dateFin?new Date($.dateFin).toISOString().split("T")[0]:"",actif:$.actif}),u(!0)},M=async $=>{if(confirm(`⚠️ ATTENTION : Êtes-vous sûr de vouloir SUPPRIMER DÉFINITIVEMENT ce frais général ?

🚨 Cette action est IRRÉVERSIBLE ! Le frais général sera supprimé pour toujours.

✅ Confirmez-vous la suppression définitive ?`))try{await ru.permanentDelete($),ve.success("Frais général supprimé définitivement"),_()}catch(K){ve.error("Erreur lors de la suppression définitive"),console.error(K)}},R=async $=>{try{$.actif?(await ru.delete($.id),ve.success(`${$.libelle} a été désactivé`)):(await ru.reactivate($.id),ve.success(`${$.libelle} a été réactivé`)),_()}catch(K){console.error("Erreur lors du changement de statut:",K),ve.error("Erreur lors du changement de statut")}},U=async $=>{$.preventDefault();try{const K=Z=>{const ie=Z.split("-");if(ie.length===3){const ue=parseInt(ie[0]),ae=parseInt(ie[1])-1,re=parseInt(ie[2]);if(!isNaN(ue)&&!isNaN(ae)&&!isNaN(re)&&ue>1900&&ue<2100&&ae>=0&&ae<=11&&re>=1&&re<=31){const fe=new Date(ue,ae,re);if(!isNaN(fe.getTime()))return fe}throw new Error(`Date invalide: ${Z}`)}const ee=new Date(Z);if(isNaN(ee.getTime()))throw new Error(`Date invalide: ${Z}`);return ee},se=await ru.calculerPeriode({dateDebut:K(g.dateDebut),dateFin:K(g.dateFin),heuresParJour:parseInt(g.heuresParJour),joursParSemaine:parseInt(g.joursParSemaine)});b(se),ve.success("Calcul effectué avec succès")}catch(K){ve.error("Erreur lors du calcul"),console.error(K)}},z=$=>{p(K=>({...K,montantTtc:$,montantHt:$?(parseFloat($)/1.2).toFixed(2):""}))},Q=$=>E.find(K=>K.value===$)||E.find(K=>K.value==="AUTRE"),H=$=>{C===$?N(w==="asc"?"desc":"asc"):(j($),N("asc"))},q=()=>{let $=[...t];return o||($=$.filter(K=>K.actif)),C?$.sort((K,se)=>{let Z=K[C],ie=se[C];return(C==="montantTtc"||C==="montantHt")&&(Z=parseFloat(Z)||0,ie=parseFloat(ie)||0),Z<ie?w==="asc"?-1:1:Z>ie?w==="asc"?1:-1:0}):$.sort((K,se)=>K.ordre!==se.ordre?K.ordre-se.ordre:K.libelle.localeCompare(se.libelle))},X=$=>C!==$?s.jsx($ae,{className:"w-4 h-4 ml-1 text-stone-400"}):w==="asc"?s.jsx(az,{className:"w-4 h-4 ml-1 text-stone-600"}):s.jsx(iz,{className:"w-4 h-4 ml-1 text-stone-600"});return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-stone-800 dark:text-white",children:"Frais Généraux"}),s.jsx("p",{className:"text-stone-600 dark:text-stone-400 mt-1",children:"Gestion des frais généraux avec calcul basé sur les jours ouvrés"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>f(!d),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Yb,{className:"w-4 h-4"}),"Calculateur"]}),s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Qd,{className:"w-4 h-4"}),"Nouveau frais"]})]})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 border border-stone-200 dark:border-stone-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Total actifs"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.actifs})]}),s.jsx(S4,{className:"w-8 h-8 text-green-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 border border-stone-200 dark:border-stone-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Montant mensuel HT"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(r.montantMensuelHt)})]}),s.jsx(Qi,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 border border-stone-200 dark:border-stone-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Montant mensuel TTC"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(r.montantMensuelTtc)})]}),s.jsx(ku,{className:"w-8 h-8 text-purple-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 border border-stone-200 dark:border-stone-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Inactifs"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.inactifs})]}),s.jsx(qb,{className:"w-8 h-8 text-red-500"})]})})]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("button",{onClick:()=>l(!o),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${o?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-stone-100 text-stone-700 dark:bg-stone-700 dark:text-stone-300"}`,children:[o?s.jsx(qb,{className:"w-4 h-4"}):s.jsx(ix,{className:"w-4 h-4"}),o?"Masquer inactifs":"Afficher inactifs"]})}),s.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[s.jsx(Uae,{className:"w-4 h-4"}),"Initialiser par défaut"]})]}),d&&s.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 border border-stone-200 dark:border-stone-700 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-stone-800 dark:text-white mb-4",children:"Calculateur de frais généraux"}),s.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Date de début"}),s.jsx("input",{type:"date",value:g.dateDebut,onChange:$=>x(K=>({...K,dateDebut:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Date de fin"}),s.jsx("input",{type:"date",value:g.dateFin,onChange:$=>x(K=>({...K,dateFin:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Heures/jour"}),s.jsx("input",{type:"number",value:g.heuresParJour,onChange:$=>x(K=>({...K,heuresParJour:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",min:"1",max:"24"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Jours/semaine"}),s.jsxs("select",{value:g.joursParSemaine,onChange:$=>x(K=>({...K,joursParSemaine:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"5",children:"5 jours (Lu-Ve)"}),s.jsx("option",{value:"6",children:"6 jours (Lu-Sa)"}),s.jsx("option",{value:"7",children:"7 jours"})]})]}),s.jsx("div",{className:"md:col-span-4",children:s.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Yb,{className:"w-4 h-4"}),"Calculer"]})})]}),v&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-300 mb-3",children:"Résultat du calcul"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Jours ouvrés :"}),s.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300 ml-2",children:v.joursOuvres})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Heures total :"}),s.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-300 ml-2",children:[v.heuresTotal,"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Montant HT :"}),s.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300 ml-2",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v.montantTotalHt)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-stone-600 dark:text-stone-400",children:"Montant TTC :"}),s.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300 ml-2",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v.montantTotalTtc)})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-xl border border-stone-200 dark:border-stone-700 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-stone-200 dark:border-stone-700",children:s.jsx("h3",{className:"text-lg font-semibold text-stone-800 dark:text-white",children:"Liste des frais généraux"})}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-stone-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Ordre"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Libellé"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Catégorie"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:s.jsxs("button",{onClick:()=>H("montantTtc"),className:"flex items-center hover:text-stone-700 dark:hover:text-stone-200 transition-colors",title:"Trier par montant TTC",children:["Montant TTC",X("montantTtc")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:s.jsxs("button",{onClick:()=>H("montantHt"),className:"flex items-center hover:text-stone-700 dark:hover:text-stone-200 transition-colors",title:"Trier par montant HT",children:["Montant HT",X("montantHt")]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Date début"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Date de fin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-stone-800 divide-y divide-stone-200 dark:divide-stone-700",children:q().map($=>{const K=Q($.categorie);return s.jsxs("tr",{className:`hover:bg-stone-50 dark:hover:bg-stone-700 ${$.actif?"":"opacity-60"}`,children:[s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:$.ordre}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:`text-sm font-medium ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:$.libelle}),$.commentaire&&s.jsx("div",{className:`text-sm ${$.actif?"text-stone-500 dark:text-stone-400":"text-stone-400 dark:text-stone-500"}`,children:$.commentaire})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white ${K.color}`,children:K.label})}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format($.montantTtc)}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format($.montantHt)}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:$.dateCommencement?s.jsx("span",{className:`text-xs ${$.actif?"text-blue-600":"text-stone-400 dark:text-stone-500"}`,children:new Date($.dateCommencement).toLocaleDateString("fr-FR")}):s.jsx("span",{className:"text-stone-400 text-xs",children:"-"})}),s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${$.actif?"text-stone-900 dark:text-white":"text-stone-400 dark:text-stone-500"}`,children:$.dateFin?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`text-xs ${$.actif?new Date($.dateFin)<new Date?"text-red-600 font-semibold":new Date($.dateFin)<new Date(Date.now()+30*24*60*60*1e3)?"text-orange-600 font-medium":"text-stone-600":"text-stone-400 dark:text-stone-500"}`,children:new Date($.dateFin).toLocaleDateString("fr-FR")}),new Date($.dateFin)<new Date&&$.actif&&s.jsx("span",{className:"text-xs text-red-500 font-bold",children:"EXPIRÉ"}),new Date($.dateFin)<new Date(Date.now()+30*24*60*60*1e3)&&new Date($.dateFin)>new Date&&$.actif&&s.jsx("span",{className:"text-xs text-orange-500 font-medium",children:"Bientôt"})]}):s.jsx("span",{className:"text-stone-400 text-xs",children:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.actif?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:$.actif?"Actif":"Inactif"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>F($),className:`transition-colors ${$.actif?"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300":"text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-400"}`,title:"Modifier",children:s.jsx(Ym,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M($.id),className:`transition-colors ${$.actif?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-400"}`,title:"Supprimer définitivement",children:s.jsx(Km,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R($),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${$.actif?"bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30":"bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30"}`,title:$.actif?"Cliquer pour désactiver":"Cliquer pour activer",children:$.actif?"✓ Actif":"✗ Inactif"})]})})]},$.id)})})]}),t.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:'Aucun frais général trouvé. Cliquez sur "Initialiser par défaut" pour commencer.'})})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-stone-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-stone-800 dark:text-white mb-4",children:[A?"Modifier":"Créer"," un frais général"]}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Libellé *"}),s.jsx("input",{type:"text",value:m.libelle,onChange:$=>p(K=>({...K,libelle:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Montant TTC *"}),s.jsx("input",{type:"number",step:"0.01",value:m.montantTtc,onChange:$=>z($.target.value),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Montant HT *"}),s.jsx("input",{type:"number",step:"0.01",value:m.montantHt,onChange:$=>p(K=>({...K,montantHt:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Catégorie"}),s.jsx("select",{value:m.categorie,onChange:$=>p(K=>({...K,categorie:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",children:E.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Ordre"}),s.jsx("input",{type:"number",value:m.ordre,onChange:$=>p(K=>({...K,ordre:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",min:"0"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"Commentaire"}),s.jsx("textarea",{value:m.commentaire,onChange:$=>p(K=>({...K,commentaire:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",rows:"3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:"📅 Date de commencement"}),s.jsx("input",{type:"date",value:m.dateCommencement,onChange:$=>p(K=>({...K,dateCommencement:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500"}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mt-1",children:"🗓️ Date à laquelle ce frais général a commencé (ex: début d'assurance, crédit...)"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-stone-700 dark:text-stone-300 mb-2",children:[m.categorie==="CREDIT_BAIL"?"🔴 Date de fin du crédit bail":m.categorie==="CREDIT_CLASSIQUE"?"🟡 Date de fin du crédit classique":"📆 Date de fin (optionnel)",(m.categorie==="CREDIT_BAIL"||m.categorie==="CREDIT_CLASSIQUE")&&s.jsx("span",{className:"text-red-500",children:" *"})]}),s.jsx("input",{type:"date",value:m.dateFin,onChange:$=>p(K=>({...K,dateFin:$.target.value})),className:"w-full px-3 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-green-500",required:m.categorie==="CREDIT_BAIL"||m.categorie==="CREDIT_CLASSIQUE"}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mt-1",children:m.categorie==="CREDIT_BAIL"?"🔴 Le crédit bail sera automatiquement désactivé à cette date":m.categorie==="CREDIT_CLASSIQUE"?"🟡 Date de fin prévue du crédit classique":"📅 Date de fin prévue (ex: fin de contrat d'assurance, changement d'assureur...)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"actif",checked:m.actif,onChange:$=>p(K=>({...K,actif:$.target.checked})),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-stone-300 rounded"}),s.jsx("label",{htmlFor:"actif",className:"text-sm font-medium text-stone-700 dark:text-stone-300",children:"Actif"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:A?"Modifier":"Créer"}),s.jsx("button",{type:"button",onClick:()=>{u(!1),h(null),S()},className:"flex-1 px-4 py-2 bg-stone-300 dark:bg-stone-600 text-stone-800 dark:text-white rounded-lg hover:bg-stone-400 dark:hover:bg-stone-500 transition-colors",children:"Annuler"})]})]})]})})]})};class Aut{constructor(){this.isOfflineMode=!1,this.localStorageKey="opti-coupe-data",this.initializeLocalData()}initializeLocalData(){if(!localStorage.getItem(this.localStorageKey)){const r={projects:[],panels:[{id:1,material:"Contreplaqué Bouleau",width:2500,height:1250,thickness:18,pricePerM2:45.5,stock:12,grainDirection:"HORIZONTAL",createdAt:new Date().toISOString()},{id:2,material:"MDF",width:2440,height:1220,thickness:19,pricePerM2:28.9,stock:8,grainDirection:"NONE",createdAt:new Date().toISOString()}],nextProjectId:1,nextPanelId:3};localStorage.setItem(this.localStorageKey,JSON.stringify(r))}}getLocalData(){const e=localStorage.getItem(this.localStorageKey);return e?JSON.parse(e):null}saveLocalData(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e))}async checkApiConnection(){try{const e=await Ee.get("/opti-coupe/panels",{timeout:3e3});return this.isOfflineMode=!1,!0}catch{return console.warn("API indisponible, basculement en mode autonome"),this.isOfflineMode=!0,!1}}async getPanels(){if(await this.checkApiConnection(),this.isOfflineMode)return this.getLocalData().panels;try{return(await Ee.get("/opti-coupe/panels")).data}catch(e){return console.error("Erreur lors de la récupération des panneaux:",e),this.getLocalData().panels}}async createPanel(e){if(await this.checkApiConnection(),this.isOfflineMode){const r=this.getLocalData(),n={...e,id:r.nextPanelId++,createdAt:new Date().toISOString()};return r.panels.push(n),this.saveLocalData(r),n}try{return(await Ee.post("/opti-coupe/panels",e)).data}catch(r){console.error("Erreur lors de la création du panneau:",r);const n=this.getLocalData(),a={...e,id:n.nextPanelId++,createdAt:new Date().toISOString()};return n.panels.push(a),this.saveLocalData(n),a}}async updatePanel(e,r){if(await this.checkApiConnection(),this.isOfflineMode){const n=this.getLocalData(),a=n.panels.findIndex(i=>i.id===e);if(a!==-1)return n.panels[a]={...n.panels[a],...r},this.saveLocalData(n),n.panels[a];throw new Error("Panneau non trouvé")}try{return(await Ee.patch(`/opti-coupe/panels/${e}`,r)).data}catch(n){throw console.error("Erreur lors de la mise à jour du panneau:",n),n}}async deletePanel(e){if(await this.checkApiConnection(),this.isOfflineMode){const r=this.getLocalData();r.panels=r.panels.filter(n=>n.id!==e),this.saveLocalData(r);return}try{await Ee.delete(`/opti-coupe/panels/${e}`)}catch(r){throw console.error("Erreur lors de la suppression du panneau:",r),r}}async updatePanelStock(e,r,n){if(await this.checkApiConnection(),this.isOfflineMode){const a=this.getLocalData(),i=a.panels.find(o=>o.id===e);if(i)return n==="add"?i.stock+=r:n==="subtract"?i.stock=Math.max(0,i.stock-r):n==="set"&&(i.stock=r),this.saveLocalData(a),i;throw new Error("Panneau non trouvé")}try{return(await Ee.post(`/opti-coupe/panels/${e}/stock`,{quantity:r,operation:n})).data}catch(a){throw console.error("Erreur lors de la mise à jour du stock:",a),a}}async getMaterials(){const e=this.getLocalData();return[...new Set(e.panels.map(n=>n.material))]}async getProjects(){if(await this.checkApiConnection(),this.isOfflineMode)return this.getLocalData().projects;try{return(await Ee.get("/opti-coupe/projects")).data}catch(e){return console.error("Erreur lors de la récupération des projets:",e),this.getLocalData().projects}}async createProject(e){if(await this.checkApiConnection(),this.isOfflineMode){const r=this.getLocalData(),n={...e,id:r.nextProjectId++,status:"active",pieces:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.projects.push(n),this.saveLocalData(r),n}try{return(await Ee.post("/opti-coupe/projects",e)).data}catch(r){console.error("Erreur lors de la création du projet:",r);const n=this.getLocalData(),a={...e,id:n.nextProjectId++,status:"active",pieces:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.projects.push(a),this.saveLocalData(n),a}}async getProject(e){if(await this.checkApiConnection(),this.isOfflineMode){const n=this.getLocalData().projects.find(a=>a.id===e);if(!n)throw new Error("Projet non trouvé");return n}try{return(await Ee.get(`/opti-coupe/projects/${e}`)).data}catch(r){throw console.error("Erreur lors de la récupération du projet:",r),r}}async updateProject(e,r){if(await this.checkApiConnection(),this.isOfflineMode){const n=this.getLocalData(),a=n.projects.findIndex(i=>i.id===e);if(a!==-1)return n.projects[a]={...n.projects[a],...r,updatedAt:new Date().toISOString()},this.saveLocalData(n),n.projects[a];throw new Error("Projet non trouvé")}try{return(await Ee.patch(`/opti-coupe/projects/${e}`,r)).data}catch(n){throw console.error("Erreur lors de la mise à jour du projet:",n),n}}async deleteProject(e){if(await this.checkApiConnection(),this.isOfflineMode){const r=this.getLocalData();r.projects=r.projects.filter(n=>n.id!==e),this.saveLocalData(r);return}try{await Ee.delete(`/opti-coupe/projects/${e}`)}catch(r){throw console.error("Erreur lors de la suppression du projet:",r),r}}async addPiece(e,r){try{return(await Ee.post(`/opti-coupe/projects/${e}/pieces`,r)).data}catch(n){throw console.error("Erreur lors de l'ajout de la pièce:",n),n}}async updatePiece(e,r,n){try{return(await Ee.patch(`/opti-coupe/projects/${e}/pieces/${r}`,n)).data}catch(a){throw console.error("Erreur lors de la mise à jour de la pièce:",a),a}}async deletePiece(e,r){try{await Ee.delete(`/opti-coupe/projects/${e}/pieces/${r}`)}catch(n){throw console.error("Erreur lors de la suppression de la pièce:",n),n}}async getProjectSummary(e){try{return(await Ee.get(`/opti-coupe/projects/${e}/summary`)).data}catch(r){throw console.error("Erreur lors de la récupération du résumé:",r),r}}async optimizeProject(e,r,n){try{return(await Ee.post(`/opti-coupe/optimization/${e}`,{strategy:r,kerfWidth:n})).data}catch(a){throw console.error("Erreur lors de l'optimisation:",a),a}}async getOptimizationResults(e){try{return(await Ee.get(`/opti-coupe/optimization/results/${e}`)).data}catch(r){throw console.error("Erreur lors de la récupération des résultats:",r),r}}async getOptimizationResult(e,r){try{return(await Ee.get(`/opti-coupe/optimization/results/${e}/${r}`)).data}catch(n){throw console.error("Erreur lors de la récupération du résultat:",n),n}}async previewOptimization(e,r,n){try{return(await Ee.post(`/opti-coupe/optimization/preview/${e}`,{strategy:r,kerfWidth:n})).data}catch(a){throw console.error("Erreur lors de la prévisualisation:",a),a}}async getAvailableStrategies(){try{return(await Ee.get("/opti-coupe/optimization/strategies")).data}catch(e){return console.error("Erreur lors de la récupération des stratégies:",e),[{value:"LENGTH_FIRST",label:"Priorité Longueur",description:"Optimise en donnant la priorité aux coupes en longueur",icon:"↔️"},{value:"WIDTH_FIRST",label:"Priorité Largeur",description:"Optimise en donnant la priorité aux coupes en largeur",icon:"↕️"},{value:"GRAIN_RESPECT",label:"Respect du Fil",description:"Respecte absolument le sens du fil du bois",icon:"🪵"},{value:"WASTE_MINIMIZE",label:"Minimiser les Chutes",description:"Minimise au maximum les pertes de matière",icon:"♻️"}]}}formatDimensions(e,r,n){return`${e} × ${r} × ${n} mm`}formatArea(e,r){return`${(e*r/1e6).toFixed(2)} m²`}formatPrice(e,r,n){return`${(r*n/1e6*e).toFixed(2)} €`}getGrainDirectionLabel(e){switch(e){case"HORIZONTAL":return"Horizontal →";case"VERTICAL":return"Vertical ↑";case"NONE":return"Indifférent";default:return e}}getGrainDirectionIcon(e){switch(e){case"HORIZONTAL":return"↔️";case"VERTICAL":return"↕️";case"NONE":return"🔄";default:return"❓"}}validatePiece(e){var n,a,i;const r=[];return(n=e.reference)!=null&&n.trim()||r.push("La référence est obligatoire"),(a=e.name)!=null&&a.trim()||r.push("Le nom est obligatoire"),(!e.width||e.width<=0)&&r.push("La largeur doit être supérieure à 0"),(!e.height||e.height<=0)&&r.push("La hauteur doit être supérieure à 0"),(!e.thickness||e.thickness<=0)&&r.push("L'épaisseur doit être supérieure à 0"),(i=e.material)!=null&&i.trim()||r.push("Le matériau est obligatoire"),(!e.quantity||e.quantity<=0)&&r.push("La quantité doit être supérieure à 0"),{isValid:r.length===0,errors:r}}validatePanel(e){var n,a;const r=[];return(n=e.name)!=null&&n.trim()||r.push("Le nom est obligatoire"),(!e.width||e.width<=0)&&r.push("La largeur doit être supérieure à 0"),(!e.height||e.height<=0)&&r.push("La hauteur doit être supérieure à 0"),(!e.thickness||e.thickness<=0)&&r.push("L'épaisseur doit être supérieure à 0"),(a=e.material)!=null&&a.trim()||r.push("Le matériau est obligatoire"),(e.pricePerM2===void 0||e.pricePerM2<0)&&r.push("Le prix au m² doit être positif"),(!e.stock||e.stock<=0)&&r.push("Le stock doit être supérieur à 0"),{isValid:r.length===0,errors:r}}}const yu=new Aut;function mut(){const t=Fr(),[e,r]=y.useState({totalProjects:0,totalPanels:0,activeProjects:0,totalOptimizations:0}),[n,a]=y.useState(!0),[i,o]=y.useState(null);y.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0),o(null);try{const[c,u]=await Promise.all([yu.getProjects(),yu.getPanels()]);r({totalProjects:c.length,totalPanels:u.length,activeProjects:c.filter(d=>d.status==="active").length,totalOptimizations:c.filter(d=>d.optimized).length}),a(!1)}catch(c){console.warn("API non disponible, utilisation des données simulées:",c),setTimeout(()=>{r({totalProjects:3,totalPanels:12,activeProjects:2,totalOptimizations:1}),a(!1)},800)}}catch(c){console.error("Erreur lors du chargement des statistiques:",c),o("Impossible de charger les statistiques"),a(!1)}};return n?s.jsxs("div",{className:"flex justify-center items-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement du module OptiCoupe..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"🔧 OptiCoupe - Optimisation de Découpe"}),s.jsx("p",{className:"text-gray-600",children:"Optimisez vos découpes de panneaux avec nos algorithmes avancés de bin packing 2D"}),s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-800 text-sm",children:"✅ Module OptiCoupe chargé avec succès ! Les APIs sont configurées et prêtes."})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Projets"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.totalProjects})]}),s.jsx("div",{className:"text-2xl",children:"📋"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Panneaux en Stock"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.totalPanels})]}),s.jsx("div",{className:"text-2xl",children:"📦"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Projets Actifs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.activeProjects})]}),s.jsx("div",{className:"text-2xl",children:"⚡"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Optimisations"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.totalOptimizations})]}),s.jsx("div",{className:"text-2xl",children:"📊"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{onClick:()=>t("/opti-coupe/debit"),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer transform hover:scale-105",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg mr-4",children:"🎯"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Optimiseur de Débit"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Visualisation graphique complète"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-2xl font-bold",children:"→"})})]}),s.jsxs("div",{onClick:()=>t("/opti-coupe/projets"),className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer transform hover:scale-105",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg mr-4",children:"📋"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Nouveau Projet"}),s.jsx("p",{className:"text-green-100 text-sm",children:"Créer un projet de découpe"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-2xl font-bold",children:"+"})})]}),s.jsxs("div",{onClick:()=>t("/opti-coupe/panneaux"),className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer transform hover:scale-105",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg mr-4",children:"📦"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Gérer les Panneaux"}),s.jsx("p",{className:"text-purple-100 text-sm",children:"Ajouter et gérer votre stock de panneaux"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-2xl font-bold",children:"+"})})]}),s.jsxs("div",{onClick:()=>t("/opti-coupe/optimisation"),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer transform hover:scale-105",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg mr-4",children:"⚡"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Optimiser"}),s.jsx("p",{className:"text-orange-100 text-sm",children:"Lancer une optimisation sur un projet existant"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"🎯 Fonctionnalités Avancées"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Algorithmes d'Optimisation"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Bin Packing 2D"})," - Algorithme Bottom-Left Fill"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"4 Stratégies"})," - Longueur, Largeur, Fil, Chutes"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Contraintes"})," - Sens du fil, épaisseur lame, chants"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Rotation automatique"})," - Si autorisée"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Gestion Avancée"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Stock intelligent"})," - Panneaux et chutes"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Métriques précises"})," - Efficacité, coût, longueur"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Placages de chant"})," - Avec épaisseurs"]}),s.jsxs("li",{children:["• ",s.jsx("span",{className:"font-medium",children:"Export"})," - PDF et Excel"]})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4 text-blue-900",children:"💡 Conseils d'Optimisation"}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[s.jsx("p",{children:"• Respectez le sens du fil du bois pour une meilleure qualité"}),s.jsx("p",{children:'• Utilisez la stratégie "Minimiser les chutes" pour réduire les coûts'}),s.jsx("p",{children:"• Regroupez les pièces similaires pour optimiser les découpes"}),s.jsx("p",{children:"• Pensez à la valorisation des chutes pour vos prochains projets"}),s.jsx("p",{children:"• Définissez l'épaisseur de lame selon votre scie (3,2mm par défaut)"})]})]}),i&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800 text-sm",children:i})})]})}function put(){const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState("");y.useEffect(()=>{l()},[]);const l=async()=>{a(!0),o("");try{const A=await yu.getPanels();r(A)}catch(A){console.error("Erreur lors du chargement des panneaux:",A),o("Erreur lors du chargement des panneaux"),r([{id:1,name:"Mélaminé Blanc 16mm",width:2800,height:2070,thickness:16,material:"Mélaminé",pricePerM2:35.5,stock:8,grainDirection:"HORIZONTAL"},{id:2,name:"MDF 18mm",width:2500,height:1250,thickness:18,material:"MDF",pricePerM2:28,stock:5,grainDirection:"NONE"}])}a(!1)},c=()=>{const A=prompt("Nom du panneau:");if(!A)return;const h=parseInt(prompt("Largeur (mm):")||"0"),m=parseInt(prompt("Hauteur (mm):")||"0"),p=parseInt(prompt("Épaisseur (mm):")||"0"),g=parseFloat(prompt("Prix par m² (€):")||"0"),x=parseInt(prompt("Quantité en stock:")||"0");if(h&&m&&p&&g&&x){const v={name:A,width:h,height:m,thickness:p,material:"Standard",pricePerM2:g,stock:x,grainDirection:"NONE"};yu.createPanel(v).then(b=>{r([b,...e]),alert("Panneau ajouté avec succès !")}).catch(()=>{r([{...v,id:Date.now()},...e]),alert("Panneau ajouté (mode démo)")})}},u=(A,h)=>{const m=parseInt(prompt(`Nouveau stock (actuel: ${h}):`)||"0");m>=0&&yu.updatePanelStock(A,m-h,"adjust").then(()=>{r(e.map(p=>p.id===A?{...p,stock:m}:p)),alert("Stock mis à jour !")}).catch(()=>{r(e.map(p=>p.id===A?{...p,stock:m}:p)),alert("Stock mis à jour (mode démo)")})},d=A=>{confirm("Supprimer ce panneau ?")&&yu.deletePanel(A).then(()=>{r(e.filter(h=>h.id!==A)),alert("Panneau supprimé !")}).catch(()=>{r(e.filter(h=>h.id!==A)),alert("Panneau supprimé (mode démo)")})},f=()=>{const A=`data:text/csv;charset=utf-8,Nom,Matériau,Largeur,Hauteur,Épaisseur,Prix/m²,Stock
`+e.map(p=>`"${p.name}","${p.material}",${p.width},${p.height},${p.thickness},${p.pricePerM2},${p.stock}`).join(`
`),h=encodeURI(A),m=document.createElement("a");m.setAttribute("href",h),m.setAttribute("download","inventaire_panneaux.csv"),document.body.appendChild(m),m.click(),document.body.removeChild(m)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"📦 Gestion des Panneaux"}),s.jsx("p",{className:"text-gray-600",children:"Gérez votre stock de panneaux et matériaux"})]}),s.jsx("button",{onClick:()=>t("/opti-coupe"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Retour au tableau de bord"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"+ Ajouter un panneau"}),s.jsx("button",{onClick:()=>alert(`Stock total: ${e.reduce((A,h)=>A+h.stock,0)} panneaux`),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📊 Statistiques stock"}),s.jsx("button",{onClick:f,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📋 Export inventaire"})]}),i&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("p",{className:"text-red-700",children:["⚠️ ",i]}),s.jsx("button",{onClick:l,className:"mt-2 px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Réessayer"})]}),n?s.jsxs("div",{className:"flex justify-center items-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des panneaux..."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Panneau"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dimensions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix/m²"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(A=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),s.jsx("div",{className:"text-sm text-gray-500",children:A.material})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[A.width," × ",A.height," × ",A.thickness," mm"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[(A.width*A.height/1e6).toFixed(2)," m²"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[A.pricePerM2.toFixed(2)," €"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.stock>5?"bg-green-100 text-green-800":A.stock>2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[A.stock," panneau",A.stock>1?"x":""]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>alert("Modification panneau (à implémenter)"),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Modifier"}),s.jsx("button",{onClick:()=>u(A.id,A.stock),className:"text-green-600 hover:text-green-900 mr-3",children:"Stock"}),s.jsx("button",{onClick:()=>d(A.id),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})]},A.id))})]})}),e.length===0&&!n&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"Aucun panneau en stock"}),s.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Ajouter votre premier panneau"})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-green-900 font-medium mb-2",children:"✅ Fonctionnalités actives"}),s.jsx("p",{className:"text-green-800 text-sm",children:"Les boutons sont maintenant fonctionnels ! Vous pouvez ajouter, modifier le stock et supprimer des panneaux. Si l'API backend n'est pas disponible, le mode démonstration est utilisé."})]})]})}function gut(){const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState({name:"",description:""});y.useEffect(()=>{u()},[]);const u=async()=>{a(!0),o("");try{const v=await yu.getProjects();r(v)}catch(v){console.error("Erreur lors du chargement des projets:",v),o("Erreur lors du chargement des projets"),r([{id:1,name:"Cuisine moderne",description:"Éléments hauts et bas de cuisine",pieces:15,status:"active",optimized:!0,createdAt:"2025-01-15"},{id:2,name:"Bibliothèque salon",description:"Meuble TV avec rangements",pieces:8,status:"active",optimized:!1,createdAt:"2025-01-10"},{id:3,name:"Placards bureau",description:"Rangements sur mesure",pieces:6,status:"completed",optimized:!0,createdAt:"2025-01-05"}])}a(!1)},d=async()=>{if(!l.name.trim()){alert("Veuillez entrer un nom de projet");return}try{const v=await yu.createProject({name:l.name,description:l.description||"Nouveau projet OptiCoupe"});r([v,...e]),c({name:"",description:""}),alert("Projet créé avec succès !")}catch(v){console.error("Erreur lors de la création du projet:",v),alert("Erreur lors de la création du projet")}},f=v=>{t(`/opti-coupe/projets/${v}`)},A=v=>{t(`/opti-coupe/projets/${v}/edit`)},h=v=>{t(`/opti-coupe/optimisation?project=${v}`)},m=async v=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce projet ?"))try{await yu.deleteProject(v),r(e.filter(b=>b.id!==v)),alert("Projet supprimé avec succès !")}catch(b){console.error("Erreur lors de la suppression du projet:",b),alert("Erreur lors de la suppression du projet")}},p=()=>{const v=`data:text/csv;charset=utf-8,Nom,Description,Pièces,Statut,Optimisé,Date de création
`+e.map(j=>`"${j.name}","${j.description}",${j.pieces},"${x(j.status)}","${j.optimized?"Oui":"Non"}","${new Date(j.createdAt).toLocaleDateString()}"`).join(`
`),b=encodeURI(v),C=document.createElement("a");C.setAttribute("href",b),C.setAttribute("download","projets_opticoupe.csv"),document.body.appendChild(C),C.click(),document.body.removeChild(C)},g=v=>{switch(v){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=v=>{switch(v){case"active":return"Actif";case"completed":return"Terminé";case"paused":return"En pause";default:return v}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"📋 Gestion des Projets"}),s.jsx("p",{className:"text-gray-600",children:"Créez et gérez vos projets d'optimisation de découpe"})]}),s.jsx("button",{onClick:()=>t("/opti-coupe"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Retour au tableau de bord"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx("button",{onClick:()=>document.getElementById("newProjectForm").scrollIntoView({behavior:"smooth"}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"+ Nouveau projet"}),s.jsx("button",{onClick:()=>alert("Statistiques: "+e.length+" projets au total"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📊 Statistiques projets"}),s.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📋 Export liste"})]}),i&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("p",{className:"text-red-700",children:["⚠️ ",i]}),s.jsx("button",{onClick:u,className:"mt-2 px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Réessayer"})]}),n?s.jsxs("div",{className:"flex justify-center items-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des projets..."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(v=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:v.name}),s.jsx("p",{className:"text-sm text-gray-600",children:v.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(v.status)}`,children:x(v.status)}),s.jsx("button",{onClick:()=>m(v.id),className:"text-red-500 hover:text-red-700 text-sm",title:"Supprimer le projet",children:"❌"})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Pièces :"}),s.jsx("span",{className:"font-medium",children:v.pieces||0})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Optimisé :"}),s.jsx("span",{className:`font-medium ${v.optimized?"text-green-600":"text-orange-600"}`,children:v.optimized?"✅ Oui":"⏳ Non"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Créé le :"}),s.jsx("span",{className:"font-medium",children:new Date(v.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f(v.id),className:"flex-1 px-3 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Ouvrir"}),s.jsx("button",{onClick:()=>A(v.id),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Modifier"}),!v.optimized&&s.jsx("button",{onClick:()=>h(v.id),className:"px-3 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"⚡ Optimiser"})]})]},v.id))}),e.length===0&&!n&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"Aucun projet trouvé"}),s.jsx("button",{onClick:()=>document.getElementById("newProjectForm").scrollIntoView({behavior:"smooth"}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Créer votre premier projet"})]})]}),s.jsxs("div",{id:"newProjectForm",className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"🆕 Création rapide de projet"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du projet *"}),s.jsx("input",{type:"text",value:l.name,onChange:v=>c({...l,name:v.target.value}),placeholder:"Ex: Cuisine moderne",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("input",{type:"text",value:l.description,onChange:v=>c({...l,description:v.target.value}),placeholder:"Ex: Éléments hauts et bas",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:d,disabled:!l.name.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Créer le projet"}),s.jsx("button",{onClick:()=>c({name:"",description:""}),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-green-900 font-medium mb-2",children:"✅ Fonctionnalités actives"}),s.jsx("p",{className:"text-green-800 text-sm",children:"Les boutons sont maintenant fonctionnels ! Vous pouvez créer, modifier, supprimer et optimiser des projets. Si l'API backend n'est pas disponible, des données de démonstration sont affichées."})]})]})}function xut(){const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(""),[i,o]=y.useState("WASTE_MINIMIZE"),[l,c]=y.useState(3.2),[u,d]=y.useState(!1),[f,A]=y.useState(null);y.useEffect(()=>{r([{id:1,name:"Cuisine moderne",pieces:15},{id:2,name:"Bibliothèque salon",pieces:8},{id:3,name:"Placards bureau",pieces:6}])},[]);const h=[{value:"LENGTH_FIRST",label:"Priorité Longueur",description:"Optimise en donnant la priorité aux coupes en longueur",icon:"↔️"},{value:"WIDTH_FIRST",label:"Priorité Largeur",description:"Optimise en donnant la priorité aux coupes en largeur",icon:"↕️"},{value:"GRAIN_RESPECT",label:"Respect du Fil",description:"Respecte absolument le sens du fil du bois",icon:"🪵"},{value:"WASTE_MINIMIZE",label:"Minimiser les Chutes",description:"Minimise au maximum les pertes de matière",icon:"♻️"}],m=()=>{n&&(d(!0),setTimeout(()=>{A({efficiency:87.5,panelsUsed:3,totalCost:189.45,cuttingLength:24.8,wastePercentage:12.5,executionTime:1.2}),d(!1)},2e3))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"⚡ Optimisation de Découpe"}),s.jsx("p",{className:"text-gray-600",children:"Lancez une optimisation avec nos algorithmes avancés"})]}),s.jsx("button",{onClick:()=>t("/opti-coupe"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Retour au tableau de bord"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"🎯 Paramètres d'optimisation"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projet à optimiser"}),s.jsxs("select",{value:n,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Sélectionnez un projet"}),e.map(p=>s.jsxs("option",{value:p.id,children:[p.name," (",p.pieces," pièces)"]},p.id))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Stratégie d'optimisation"}),s.jsx("div",{className:"space-y-3",children:h.map(p=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"radio",id:p.value,name:"strategy",value:p.value,checked:i===p.value,onChange:g=>o(g.target.value),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("label",{htmlFor:p.value,className:"ml-3 cursor-pointer",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg mr-2",children:p.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.label}),s.jsx("div",{className:"text-xs text-gray-500",children:p.description})]})]})})]},p.value))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Épaisseur de lame (mm)"}),s.jsx("input",{type:"number",step:"0.1",min:"1",max:"10",value:l,onChange:p=>c(parseFloat(p.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Épaisseur de coupe de votre scie (généralement 3,2mm)"})]}),s.jsx("button",{onClick:m,disabled:!n||u,className:`w-full px-4 py-3 rounded-lg font-medium transition-colors ${!n||u?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:u?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Optimisation en cours..."]}):"🚀 Lancer l'optimisation"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"📊 Résultats"}),f?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-lg font-bold text-green-800",children:[f.efficiency,"%"]}),s.jsx("div",{className:"text-sm text-green-600",children:"Efficacité"})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-lg font-bold text-blue-800",children:f.panelsUsed}),s.jsx("div",{className:"text-sm text-blue-600",children:"Panneaux utilisés"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-lg font-bold text-purple-800",children:[f.totalCost," €"]}),s.jsx("div",{className:"text-sm text-purple-600",children:"Coût total"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-lg font-bold text-orange-800",children:[f.cuttingLength," m"]}),s.jsx("div",{className:"text-sm text-orange-600",children:"Longueur de coupe"})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Chutes :"}),s.jsxs("span",{className:"font-medium",children:[f.wastePercentage,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Temps d'exécution :"}),s.jsxs("span",{className:"font-medium",children:[f.executionTime,"s"]})]})]})}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx("button",{className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"✅ Valider résultat"}),s.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📄 Export PDF"})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"⚡"}),s.jsx("p",{className:"text-gray-500",children:"Sélectionnez un projet et lancez l'optimisation pour voir les résultats"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-blue-900 font-medium mb-2",children:"💡 Page en développement"}),s.jsx("p",{className:"text-blue-800 text-sm",children:"Cette page simule actuellement le processus d'optimisation. L'intégration complète avec l'algorithme OptiCoupe permettra des optimisations réelles avec visualisation graphique."})]})]})}function vut(){const t=Fr(),[e,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState(null);y.useEffect(()=>{a(!0),setTimeout(()=>{r([{id:1,projectName:"Cuisine moderne",strategy:"WASTE_MINIMIZE",efficiency:87.5,panelsUsed:3,totalCost:189.45,cuttingLength:24.8,wastePercentage:12.5,date:"2025-01-15T10:30:00",status:"completed"},{id:2,projectName:"Placards bureau",strategy:"LENGTH_FIRST",efficiency:91.2,panelsUsed:2,totalCost:98.2,cuttingLength:18.4,wastePercentage:8.8,date:"2025-01-12T14:15:00",status:"completed"},{id:3,projectName:"Bibliothèque salon",strategy:"GRAIN_RESPECT",efficiency:84.3,panelsUsed:4,totalCost:254.8,cuttingLength:31.2,wastePercentage:15.7,date:"2025-01-10T09:45:00",status:"in_progress"}]),a(!1)},800)},[]);const l=f=>({LENGTH_FIRST:"Priorité Longueur",WIDTH_FIRST:"Priorité Largeur",GRAIN_RESPECT:"Respect du Fil",WASTE_MINIMIZE:"Minimiser les Chutes"})[f]||f,c=f=>{switch(f){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=f=>{switch(f){case"completed":return"Terminé";case"in_progress":return"En cours";case"failed":return"Échec";default:return f}},d=f=>f>=90?"text-green-600":f>=80?"text-blue-600":f>=70?"text-orange-600":"text-red-600";return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"📊 Résultats d'Optimisation"}),s.jsx("p",{className:"text-gray-600",children:"Consultez et analysez vos résultats d'optimisation"})]}),s.jsx("button",{onClick:()=>t("/opti-coupe"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Retour au tableau de bord"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Tous les projets"}),s.jsx("option",{value:"cuisine",children:"Cuisine moderne"}),s.jsx("option",{value:"bureau",children:"Placards bureau"}),s.jsx("option",{value:"salon",children:"Bibliothèque salon"})]}),s.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Toutes les stratégies"}),s.jsx("option",{value:"WASTE_MINIMIZE",children:"Minimiser les chutes"}),s.jsx("option",{value:"LENGTH_FIRST",children:"Priorité longueur"}),s.jsx("option",{value:"GRAIN_RESPECT",children:"Respect du fil"})]}),s.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"📈 Statistiques"}),s.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"📋 Export Excel"})]}),n?s.jsxs("div",{className:"flex justify-center items-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des résultats..."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projet"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stratégie"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efficacité"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coût"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(f=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.projectName}),s.jsxs("div",{className:"text-sm text-gray-500",children:[f.panelsUsed," panneau",f.panelsUsed>1?"x":""]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:l(f.strategy)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:`text-sm font-medium ${d(f.efficiency)}`,children:[f.efficiency,"%"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[f.wastePercentage,"% chutes"]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[f.totalCost.toFixed(2)," €"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[f.cuttingLength,"m coupe"]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(f.date).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date(f.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(f.status)}`,children:u(f.status)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>o(f),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Voir"}),s.jsx("button",{className:"text-green-600 hover:text-green-900 mr-3",children:"PDF"}),s.jsx("button",{className:"text-purple-600 hover:text-purple-900",children:"Refaire"})]})]},f.id))})]})})]}),i&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:["Détails - ",i.projectName]}),s.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[i.efficiency,"%"]}),s.jsx("div",{className:"text-sm text-green-600",children:"Efficacité matière"})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-800",children:i.panelsUsed}),s.jsx("div",{className:"text-sm text-blue-600",children:"Panneaux utilisés"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-800",children:[i.totalCost.toFixed(2)," €"]}),s.jsx("div",{className:"text-sm text-purple-600",children:"Coût total matière"})]}),s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[i.cuttingLength," m"]}),s.jsx("div",{className:"text-sm text-orange-600",children:"Longueur de coupe"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Informations techniques"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Stratégie utilisée :"}),s.jsx("span",{className:"ml-2 font-medium",children:l(i.strategy)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Pourcentage de chutes :"}),s.jsxs("span",{className:"ml-2 font-medium",children:[i.wastePercentage,"%"]})]})]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"📄 Générer PDF complet"}),s.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"📊 Visualisation 3D"}),s.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"🔄 Réoptimiser avec autres paramètres"})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-blue-900 font-medium mb-2",children:"💡 Page en développement"}),s.jsx("p",{className:"text-blue-800 text-sm",children:"Cette page affiche actuellement des résultats simulés. L'intégration complète permettra la visualisation graphique des découpes, l'export PDF détaillé et les comparaisons entre stratégies."})]})]})}function but(){Fr();const[t,e]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(null),[o,l]=y.useState([{id:1,name:"Côté A",width:800,height:600,thickness:18,quantity:2,material:"Contreplaqué Bouleau"},{id:2,name:"Côté B",width:800,height:400,thickness:18,quantity:2,material:"Contreplaqué Bouleau"},{id:3,name:"Fond",width:784,height:400,thickness:18,quantity:1,material:"Contreplaqué Bouleau"},{id:4,name:"Tablette",width:784,height:350,thickness:18,quantity:2,material:"Contreplaqué Bouleau"}]),[c,u]=y.useState({kerfWidth:3.2,edgeBanding:.4,minOffcutSize:100,strategy:"EFFICIENCY_FIRST",allowRotation:!0}),[d,f]=y.useState({totalPanelsUsed:3,efficiency:87.4,totalWaste:.89,totalCost:267.45,cuttingLength:24.8,offcuts:[{width:280,height:350,area:.098},{width:450,height:220,area:.099}]}),[A,h]=y.useState([{panelId:1,panelInfo:{width:2800,height:2070,material:"Contreplaqué Bouleau"},pieces:[{id:1,x:10,y:10,width:800,height:600,name:"Côté A",rotation:!1},{id:2,x:820,y:10,width:800,height:600,name:"Côté A",rotation:!1},{id:3,x:1630,y:10,width:800,height:400,name:"Côté B",rotation:!1},{id:4,x:10,y:620,width:800,height:400,name:"Côté B",rotation:!1},{id:5,x:820,y:620,width:784,height:400,name:"Fond",rotation:!1},{id:6,x:1614,y:620,width:784,height:350,name:"Tablette",rotation:!1},{id:7,x:820,y:1030,width:784,height:350,name:"Tablette",rotation:!1}]}]),[m,p]=y.useState(!1);y.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const N=(await yu.getPanels()).map(E=>({id:E.id,width:E.width,height:E.height,thickness:E.thickness,material:E.material,quantity:E.stock,price:E.pricePerM2}));e(N)}catch(w){console.error("Erreur lors du chargement des panneaux:",w),i("Impossible de charger les panneaux")}finally{n(!1)}},x=async()=>{try{p(!0),console.log("Optimisation du débit en cours..."),setTimeout(()=>{const w=Math.random()*10+85,N=Math.random()*.5+.5,E=Math.random()*5+20;f({...d,efficiency:parseFloat(w.toFixed(1)),totalWaste:parseFloat(N.toFixed(2)),cuttingLength:parseFloat(E.toFixed(1))}),p(!1)},1500)}catch(w){console.error("Erreur lors de l'optimisation:",w),i("Erreur lors de l'optimisation"),p(!1)}},v=()=>{const w=[...new Set(t.map(_=>_.material))],N=w.length>0?w[0]:"Contreplaqué Bouleau",E={id:o.length+1,name:`Pièce ${o.length+1}`,width:400,height:300,thickness:18,quantity:1,material:N};l([...o,E])},b=w=>{l(o.filter(N=>N.id!==w))},C=(w,N)=>{l(o.map(E=>E.id===w?{...E,...N}:E))},j=()=>{var N;return s.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-4 h-96 overflow-auto",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:"Plan de Débit - Panneau 1"}),s.jsxs("div",{className:"relative mx-auto",style:{width:2800*.15,height:2070*.15},children:[s.jsx("div",{className:"absolute border-2 border-gray-800 bg-yellow-100",style:{width:2800*.15,height:2070*.15,top:0,left:0},children:(N=A[0])==null?void 0:N.pieces.map((E,_)=>s.jsx("div",{className:"absolute border border-blue-600 bg-blue-200 flex items-center justify-center text-xs font-medium",style:{left:E.x*.15,top:E.y*.15,width:E.width*.15,height:E.height*.15,fontSize:"8px"},title:`${E.name} - ${E.width}×${E.height}mm`,children:E.name},_))}),s.jsx("div",{className:"absolute -top-6 left-0 text-sm font-medium",children:"2800×2070mm - Contreplaqué Bouleau"})]})]})};return s.jsxs("div",{className:"min-h-screen bg-gray-100 p-4",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Optimiseur de Débit"}),s.jsx("p",{className:"text-gray-600",children:"Optimisation automatique de découpe avec visualisation graphique"})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-6 h-screen",children:[s.jsxs("div",{className:"col-span-3 bg-white rounded-lg shadow-lg p-4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:"📦 Stock Panneaux"}),s.jsx("div",{className:"space-y-3 mb-4",children:r?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"text-sm text-gray-500",children:"Chargement des panneaux..."})}):a?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-sm text-red-500",children:a}),s.jsx("button",{onClick:g,className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:"Réessayer"})]}):t.length===0?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"text-sm text-gray-500",children:"Aucun panneau disponible"})}):t.map(w=>s.jsxs("div",{className:"border rounded-lg p-3 hover:bg-gray-50",children:[s.jsx("div",{className:"font-medium text-sm",children:w.material}),s.jsxs("div",{className:"text-xs text-gray-600",children:[w.width,"×",w.height,"×",w.thickness,"mm"]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${w.quantity>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:["Stock: ",w.quantity]}),s.jsxs("span",{className:"text-xs font-medium",children:[w.price,"€/m²"]})]})]},w.id))}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"⚙️ Paramètres"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1",children:"Épaisseur lame (mm)"}),s.jsx("input",{type:"number",value:c.kerfWidth,onChange:w=>u({...c,kerfWidth:parseFloat(w.target.value)}),className:"w-full px-2 py-1 border rounded text-sm",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1",children:"Stratégie"}),s.jsxs("select",{value:c.strategy,onChange:w=>u({...c,strategy:w.target.value}),className:"w-full px-2 py-1 border rounded text-sm",children:[s.jsx("option",{value:"EFFICIENCY_FIRST",children:"Efficacité maximale"}),s.jsx("option",{value:"COST_MINIMIZE",children:"Minimiser le coût"}),s.jsx("option",{value:"CUT_MINIMIZE",children:"Minimiser les coupes"}),s.jsx("option",{value:"GRAIN_RESPECT",children:"Respecter le fil du bois"}),s.jsx("option",{value:"SPEED_OPTIMIZE",children:"Optimiser la vitesse"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:c.allowRotation,onChange:w=>u({...c,allowRotation:w.target.checked}),className:"rounded"}),s.jsx("label",{className:"text-xs",children:"Autoriser rotation"})]})]}),s.jsx("button",{onClick:x,disabled:m||t.length===0,className:`w-full mt-4 py-2 px-4 rounded-lg transition-colors ${m||t.length===0?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:m?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Optimisation..."]}):"🚀 Optimiser"})]})]}),s.jsxs("div",{className:"col-span-6 bg-white rounded-lg shadow-lg p-4",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center justify-between",children:["🎯 Plan de Débit",s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-sm bg-gray-200 px-3 py-1 rounded",children:"Zoom +"}),s.jsx("button",{className:"text-sm bg-gray-200 px-3 py-1 rounded",children:"Zoom -"}),s.jsx("button",{className:"text-sm bg-gray-200 px-3 py-1 rounded",children:"Export PDF"})]})]}),j(),s.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[s.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded text-sm",children:"Panneau 1"}),s.jsx("button",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm",children:"Panneau 2"}),s.jsx("button",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm",children:"+ Nouveau"})]})]}),s.jsxs("div",{className:"col-span-3 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"📊 Résultats"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Panneaux utilisés:"}),s.jsx("span",{className:"font-bold",children:d.totalPanelsUsed})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Efficacité:"}),s.jsxs("span",{className:"font-bold text-green-600",children:[d.efficiency.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Chutes totales:"}),s.jsxs("span",{className:"font-bold text-orange-600",children:[d.totalWaste.toFixed(2)," m²"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Coût total:"}),s.jsxs("span",{className:"font-bold text-blue-600",children:[d.totalCost.toFixed(2),"€"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Longueur coupe:"}),s.jsxs("span",{className:"font-bold",children:[d.cuttingLength.toFixed(1)," m"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"♻️ Chutes récupérables"}),d.offcuts.map((w,N)=>s.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[w.width,"×",w.height,"mm (",w.area.toFixed(3)," m²)"]},N))]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"📋 Pièces à débiter"}),s.jsx("button",{onClick:v,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"+ Ajouter"})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(w=>s.jsxs("div",{className:"border rounded p-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("input",{type:"text",value:w.name,onChange:N=>C(w.id,{name:N.target.value}),className:"font-medium text-sm border-none p-0 bg-transparent flex-1 mr-2"}),s.jsx("button",{onClick:()=>b(w.id),className:"text-xs text-red-600 hover:text-red-800",children:"🗑️"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs mb-2",children:[s.jsx("input",{type:"number",value:w.width,onChange:N=>C(w.id,{width:parseInt(N.target.value)}),className:"border rounded px-1 py-0.5",placeholder:"L"}),s.jsx("input",{type:"number",value:w.height,onChange:N=>C(w.id,{height:parseInt(N.target.value)}),className:"border rounded px-1 py-0.5",placeholder:"H"}),s.jsx("input",{type:"number",value:w.quantity,onChange:N=>C(w.id,{quantity:parseInt(N.target.value)}),className:"border rounded px-1 py-0.5",placeholder:"Q"})]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[w.width,"×",w.height,"×",w.thickness,"mm"]}),s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Qté: ",w.quantity]})})]},w.id))})]})]})]})]})}const yut=({onAffectationsDeleted:t})=>{const[e,r]=y.useState(!1),[n,a]=y.useState(!1),[i,o]=y.useState(""),l=async()=>{if(i!=="SUPPRIMER TOUT"){ve.error('Veuillez taper "SUPPRIMER TOUT" pour confirmer');return}a(!0);try{const c=await Bs.supprimerToutesLesAffectations();ve.success(`✅ ${c.affectationsSupprimees} affectations supprimées avec succès`,{duration:5e3,description:"Toutes les affectations du planning ont été supprimées"}),r(!1),o(""),t&&t()}catch(c){console.error("Erreur lors de la suppression:",c),ve.error(`Erreur lors de la suppression: ${c.message}`)}finally{a(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs(Xe,{variant:"destructive",size:"sm",onClick:()=>r(!0),className:"bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les affectations"]}),s.jsx(Uw,{open:e,onOpenChange:r,children:s.jsxs($w,{className:"sm:max-w-md",children:[s.jsxs(Hw,{children:[s.jsxs(Qw,{className:"flex items-center gap-2 text-red-600",children:[s.jsx(wo,{className:"w-5 h-5"}),"🚨 DANGER : Suppression totale"]}),s.jsx(_3,{className:"text-sm text-gray-600",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Cette action est irréversible !"})}),s.jsxs("p",{children:["Vous êtes sur le point de supprimer ",s.jsx("strong",{children:"TOUTES"})," les affectations du planning équipe et du planning affaire."]}),s.jsxs("p",{children:["Pour confirmer, tapez ",s.jsx("strong",{children:'"SUPPRIMER TOUT"'})," dans le champ ci-dessous :"]})]})})]}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{children:s.jsx("input",{type:"text",placeholder:"Tapez: SUPPRIMER TOUT",value:i,onChange:c=>o(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})})}),s.jsxs(zE,{className:"gap-2",children:[s.jsx(Xe,{variant:"outline",onClick:()=>{r(!1),o("")},disabled:n,children:"Annuler"}),s.jsx(Xe,{variant:"destructive",onClick:l,disabled:n||i!=="SUPPRIMER TOUT",className:"bg-red-600 hover:bg-red-700",children:n?s.jsxs(s.Fragment,{children:[s.jsx(A0e,{className:"w-4 h-4 mr-2 animate-spin"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})})]})]})})]})},wut=()=>{var ue,ae,re,fe;const[t,e]=y.useState({}),[r,n]=y.useState(new Date),[a,i]=y.useState({salaries:[],sousTraitants:[]}),[o,l]=y.useState([]),[c,u]=y.useState(!0),[d,f]=y.useState(!1),[A,h]=y.useState(null),[m,p]=y.useState(!1),[g,x]=y.useState(!1),[v,b]=y.useState({}),C=G=>{const oe=new Date(G);oe.setUTCDate(oe.getUTCDate()+4-(oe.getUTCDay()||7));const Se=new Date(Date.UTC(oe.getUTCFullYear(),0,1));return Math.ceil(((oe-Se)/864e5+1)/7)},j=()=>{const G=Gi(r,{weekStartsOn:1}),oe=[];for(let Se=0;Se<5;Se++){const ge=new Date(G);ge.setDate(G.getDate()+Se),oe.push(ge)}return oe},w=async()=>{try{u(!0);const G=Gi(r,{weekStartsOn:1}),oe=on(G,"yyyy-MM-dd"),Se=j(),[ge,te,ye]=await Promise.all([Bs.getOuvriersDisponibles(),Bs.getAffairesActives(),Bs.getPlanningHebdomadaire(oe,!1)]);i(ge),l(te);const we={};ye&&ye.length&&ye.forEach(be=>{const Te=new Date(be.dateAffectation).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),Oe=`${be.affaire.libelle}-${Te}-${be.periode.toLowerCase()}`;we[Oe]||(we[Oe]=[]);const Me={id:be.id,nom:be.user.prenom||be.user.nom,user:be.user,affaire:be.affaire,periode:be.periode,dateAffectation:be.dateAffectation};we[Oe].push(Me)}),e(we)}catch(G){console.error("❌ [PlanningEquipe] Erreur lors du chargement:",G),ve.error("Erreur lors du chargement des données. Voir la console pour les détails.")}finally{u(!1)}};y.useEffect(()=>{w()},[r]);const N=G=>{const oe=new Date(r);oe.setDate(oe.getDate()+G*7),n(oe)},E=()=>{n(new Date)},_=G=>(G==null?void 0:G.couleurPlanning)||"#9CA3AF",k=G=>{b(oe=>({...oe,[G]:oe[G]==="ATELIER"?"POSE":"ATELIER"}))},D=G=>v[G]||"POSE",S=(G,oe)=>{const Se={type:"employe",nom:oe.prenom||oe.nom,prenom:oe.prenom,id:oe.id};G.dataTransfer.setData("text/plain",JSON.stringify(Se)),h(Se),f(!0),p(!0)},F=(G,oe)=>{const Se={type:"affectation",id:oe.id,nom:oe.nom,user:oe.user,affaire:oe.affaire,periode:oe.periode,dateAffectation:oe.dateAffectation};G.dataTransfer.setData("text/plain",JSON.stringify(Se)),h(Se),f(!0),p(!0),G.target.style.opacity="0.5"},M=G=>{f(!1),p(!1),x(!1),h(null),G.target&&(G.target.style.opacity="1")},R=async(G,oe,Se,ge)=>{G.preventDefault(),G.stopPropagation();const te=G.currentTarget;try{const ye=JSON.parse(G.dataTransfer.getData("text/plain"));ye.type==="affectation"?await z(ye,oe,Se,ge):await Q(ye,oe,Se,ge),te.style.backgroundColor="#dcfce7",te.style.borderColor="#16a34a",setTimeout(()=>{te&&(te.style.backgroundColor="",te.style.borderColor="")},1e3)}catch(ye){console.error("❌ [DROP] Erreur:",ye),ve.error(ye.message||"Erreur lors de l'opération"),te.style.backgroundColor="#fee2e2",te.style.borderColor="#dc2626",setTimeout(()=>{te&&(te.style.backgroundColor="",te.style.borderColor="")},1e3)}finally{h(null),f(!1),p(!1)}},U=G=>new Date(G.getFullYear(),G.getMonth(),G.getDate(),12,0,0,0).toISOString(),z=async(G,oe,Se,ge)=>{const te={affaireId:oe.id,dateAffectation:U(Se),periode:ge.toUpperCase()};try{await Bs.updateAffectation(G.id,te),ve.success(`${G.nom} déplacé vers ${oe.libelle}`),await w()}catch(ye){throw console.error("❌ [DÉPLACEMENT] Erreur:",ye),ve.error("Erreur lors du déplacement"),ye}},Q=async(G,oe,Se,ge)=>{const te={affaireId:oe.id,userId:G.id,dateAffectation:U(Se),periode:ge.toUpperCase(),typeActivite:"FABRICATION"};await Bs.affecterOuvrier(te),ve.success(`${G.nom} affecté à ${oe.libelle}`),await w()},H=G=>{G.preventDefault(),G.currentTarget.style.backgroundColor="#f0fdf4",G.currentTarget.style.borderColor="#22c55e"},q=G=>{G.currentTarget.style.backgroundColor="",G.currentTarget.style.borderColor=""},X=G=>{G.preventDefault(),g||x(!0)},$=G=>{G.preventDefault(),x(!1)},K=async G=>{G.preventDefault(),G.stopPropagation(),x(!1);try{const oe=JSON.parse(G.dataTransfer.getData("text/plain"));oe.type==="affectation"?(console.log("🗑️ [CORBEILLE] Suppression de:",oe.nom),await Bs.desaffecterOuvrier(oe.id),ve.success(`${oe.nom} retiré du planning`),await w(),console.log("✅ [CORBEILLE] Suppression réussie")):ve.info("Seules les affectations peuvent être supprimées")}catch(oe){console.error("❌ [CORBEILLE] Erreur:",oe),ve.error("Erreur lors de la suppression")}finally{h(null),p(!1),f(!1),x(!1)}},se=j(),Z=C(r),ie=new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ee=G=>{const oe={};return Object.entries(G).forEach(([Se,ge])=>{Se.split("-").slice(0,-2).join("-"),ge.forEach(te=>{var we,be;const ye=(we=te.affaire)==null?void 0:we.id;ye&&(oe[ye]||(oe[ye]=[]),oe[ye].push({id:te.id,userId:(be=te.user)==null?void 0:be.id,dateAffectation:te.dateAffectation,periode:te.periode,typeActivite:D(te.id)==="POSE"?"POSE":"FABRICATION",user:te.user,affaire:te.affaire}))})}),oe};return s.jsxs("div",{className:"min-h-screen bg-white p-8",children:[s.jsxs("div",{className:"max-w-full mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Planning Équipe"}),s.jsx("p",{className:"text-gray-500 capitalize",children:ie})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx(yut,{onAffectationsDeleted:w})})]})}),s.jsx("div",{className:"text-center mb-8",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"PLANNING DES AFFAIRES"})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-600",children:"Gestion Équipe"}),s.jsxs("div",{className:"flex gap-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 px-4 py-2 rounded-lg border",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-500 border-2 border-green-500"}),s.jsx("span",{className:"font-medium text-gray-700",children:"Contour vert = POSE"})]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-500"}),s.jsx("span",{className:"font-medium text-gray-700",children:"Pas de contour = ATELIER"})]}),s.jsx("span",{className:"text-xs text-gray-500 ml-2 italic",children:"(Double-clic pour changer)"})]}),s.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-green-200 border border-green-300"}),"Chef d'Atelier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-200 border border-blue-300"}),"Chef de Chantier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-200 border border-purple-300"}),"Ouvrier Atelier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-cyan-200 border border-cyan-300"}),"Ouvrier Chantier"]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-200 border border-orange-300"}),"Sous-traitant"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs("div",{className:"w-32 text-lg font-medium text-gray-600",children:["Salarié",s.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",((ue=a.salaries)==null?void 0:ue.length)||0,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:c?s.jsx("div",{className:"text-gray-500",children:"Chargement..."}):(ae=a.salaries)==null?void 0:ae.map(G=>s.jsx("button",{draggable:!0,onDragStart:oe=>S(oe,G),onDragEnd:M,className:`px-6 py-3 rounded-full font-semibold text-base transition-all duration-200 
                      hover:scale-105 hover:shadow-md cursor-grab active:cursor-grabbing`,style:{backgroundColor:_(G),color:"#ffffff"},children:G.prenom||G.nom},G.id))})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"w-32 text-lg font-medium text-gray-600",children:["Sous traitant",s.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",((re=a.sousTraitants)==null?void 0:re.length)||0,")"]})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:c?s.jsx("div",{className:"text-gray-500",children:"Chargement..."}):(fe=a.sousTraitants)==null?void 0:fe.map(G=>s.jsx("button",{draggable:!0,onDragStart:oe=>S(oe,G),onDragEnd:M,className:`px-6 py-3 rounded-full font-semibold text-base transition-all duration-200 
                      hover:scale-105 hover:shadow-md cursor-grab active:cursor-grabbing`,style:{backgroundColor:_(G),color:"#ffffff"},children:G.prenom||G.nom},G.id))})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-[300px_repeat(5,1fr)] gap-0",children:[s.jsx("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 font-semibold text-gray-600",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>N(-1),className:"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors duration-200 shadow-sm",children:s.jsx(wx,{size:20})}),s.jsx("div",{className:"bg-gray-100 px-4 py-2 rounded-lg shadow-sm",children:s.jsxs("span",{className:"text-base font-semibold text-gray-700",children:["Semaine ",Z]})}),s.jsx("button",{onClick:()=>N(1),className:"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors duration-200 shadow-sm",children:s.jsx(jx,{size:20})})]}),s.jsxs("button",{onClick:E,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors duration-200 shadow-sm text-sm font-medium",children:["Aujourd'hui (",new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),")"]})]})}),se.map((G,oe)=>s.jsxs("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 text-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-600",children:G.toLocaleDateString("fr-FR",{weekday:"long"}).toUpperCase()}),s.jsx("div",{className:"text-base font-semibold text-gray-500",children:G.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[s.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm font-medium text-gray-500",children:"MATIN"}),s.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm font-medium text-gray-500",children:"APREM"})]})]},oe)),c?s.jsx("div",{className:"col-span-6 text-center py-16 text-gray-500",children:"Chargement des affaires..."}):o.map(G=>s.jsxs(le.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 border-b border-r border-gray-200 p-4 flex flex-col justify-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-700",children:G.libelle}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:"Livraison le "}),s.jsx("span",{className:"font-medium",children:G.dateCloturePrevue?new Date(G.dateCloturePrevue).toLocaleDateString("fr-FR"):"N/A"})]})]}),se.map((oe,Se)=>s.jsx("div",{className:"border-b border-r border-gray-200 p-2",children:s.jsx("div",{className:"grid grid-cols-2 gap-2 h-[210px]",children:["matin","aprem"].map(ge=>{var we;const te=oe.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),ye=`${G.libelle}-${te}-${ge}`;return s.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-lg p-3 min-h-[190px] flex flex-wrap gap-1 items-start content-start transition-colors duration-200",onDrop:be=>R(be,G,oe,ge),onDragOver:be=>H(be),onDragLeave:be=>q(be),children:(we=t[ye])==null?void 0:we.map((be,Te)=>{const Oe=D(be.id||`${ye}-${Te}`),Me=Oe==="POSE"?{border:"4px solid #22c55e",boxShadow:"0 0 0 2px #16a34a"}:{};return s.jsx("span",{draggable:!0,className:`block w-full px-4 py-3 rounded-full text-sm font-semibold cursor-grab hover:cursor-grabbing 
                                      hover:scale-105 transition-all duration-200 mb-2 text-center`,style:{backgroundColor:be.user?_(be.user):"#9CA3AF",color:"#ffffff",...Me},onDragStart:Ve=>F(Ve,be),onDragEnd:M,onDoubleClick:()=>k(be.id||`${ye}-${Te}`),title:`Double-clic pour changer: ${Oe==="POSE"?"POSE → ATELIER":"ATELIER → POSE"}`,children:be.nom},Te)})},ge)})})},Se))]},G.id))]})})]}),s.jsx("div",{className:"mt-8",children:s.jsx(bq,{planningData:ee(t),ouvriers:a,affaires:o,weekDays:j(),loading:c,className:"w-full"})}),s.jsx(vq,{isVisible:m,isActive:g,onDrop:K,onDragOver:X,onDragLeave:$})]})},ab={getAll:async()=>{try{return(await Ee.get("/caca-boudin")).data}catch(t){throw console.error("Erreur lors de la récupération des CACA boudins:",t),t}},getById:async t=>{try{return(await Ee.get(`/caca-boudin/${t}`)).data}catch(e){throw console.error(`Erreur lors de la récupération du CACA boudin ${t}:`,e),e}},create:async t=>{try{return(await Ee.post("/caca-boudin",t)).data}catch(e){throw console.error("Erreur lors de la création du CACA boudin:",e),e}},update:async(t,e)=>{try{return(await Ee.patch(`/caca-boudin/${t}`,e)).data}catch(r){throw console.error(`Erreur lors de la modification du CACA boudin ${t}:`,r),r}},delete:async t=>{try{return(await Ee.delete(`/caca-boudin/${t}`)).data}catch(e){throw console.error(`Erreur lors de la suppression du CACA boudin ${t}:`,e),e}},getStats:async()=>{try{return(await Ee.get("/caca-boudin/stats")).data}catch(t){throw console.error("Erreur lors de la récupération des statistiques:",t),t}}},jut=()=>{const[t,e]=y.useState([]),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState({nom:"",couleur:"#8B4513",taille:"MOYEN",odeur:5,dateCaca:new Date().toISOString().split("T")[0]});y.useEffect(()=>{A()},[]);const A=async()=>{try{const[v,b]=await Promise.all([ab.getAll(),ab.getStats()]);e(v),n(b)}catch(v){console.error("Erreur lors du chargement:",v)}finally{i(!1)}},h=async v=>{v.preventDefault();try{c?await ab.update(c.id,d):await ab.create(d),await A(),l(!1),u(null),f({nom:"",couleur:"#8B4513",taille:"MOYEN",odeur:5,dateCaca:new Date().toISOString().split("T")[0]})}catch(b){console.error("Erreur lors de la sauvegarde:",b)}},m=v=>{u(v),f({nom:v.nom,couleur:v.couleur,taille:v.taille,odeur:v.odeur,dateCaca:v.dateCaca?new Date(v.dateCaca).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}),l(!0)},p=async v=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce CACA boudin ?"))try{await ab.delete(v),await A()}catch(b){console.error("Erreur lors de la suppression:",b)}},g=v=>({PETIT:"💩",MOYEN:"💩💩",GROS:"💩💩💩",ENORME:"💩💩💩💩"})[v]||"💩",x=v=>"🤢".repeat(Math.min(v,10));return a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"💩"}),s.jsx("div",{className:"text-xl text-gray-600",children:"Chargement des CACA boudins..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"💩 CACA Boudin Manager 💩"}),s.jsx("p",{className:"text-gray-600",children:"Gérez vos précieux CACA boudins avec style et élégance !"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"bg-brown-600 hover:bg-brown-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition-colors",style:{backgroundColor:"#8B4513"},children:[s.jsx(Qd,{className:"w-5 h-5"}),"Nouveau CACA"]})]})}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total CACA"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.total})]}),s.jsx("div",{className:"text-4xl",children:"💩"})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Odeur Moyenne"}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[r.odeurMoyenne.toFixed(1),"/10"]})]}),s.jsx("div",{className:"text-4xl",children:"🤢"})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Répartition par Taille"}),s.jsx(N4,{className:"w-5 h-5 text-gray-400"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:r.parTaille.map(v=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:g(v.taille)}),s.jsx("div",{className:"text-sm text-gray-600",children:v.taille}),s.jsx("div",{className:"text-lg font-bold",children:v._count.taille})]},v.taille))})]})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:[c?"Modifier":"Nouveau"," CACA Boudin"]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du CACA"}),s.jsx("input",{type:"text",value:d.nom,onChange:v=>f({...d,nom:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brown-500 focus:border-transparent",placeholder:"Ex: Le Magnifique, Le Puant...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date du CACA 💩"}),s.jsx("input",{type:"date",value:d.dateCaca,onChange:v=>f({...d,dateCaca:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brown-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur"}),s.jsx("input",{type:"color",value:d.couleur,onChange:v=>f({...d,couleur:v.target.value}),className:"w-full h-12 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taille"}),s.jsxs("select",{value:d.taille,onChange:v=>f({...d,taille:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brown-500 focus:border-transparent",children:[s.jsx("option",{value:"PETIT",children:"PETIT 💩"}),s.jsx("option",{value:"MOYEN",children:"MOYEN 💩💩"}),s.jsx("option",{value:"GROS",children:"GROS 💩💩💩"}),s.jsx("option",{value:"ENORME",children:"ÉNORME 💩💩💩💩"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau d'Odeur (1-10)"}),s.jsx("input",{type:"range",min:"1",max:"10",value:d.odeur,onChange:v=>f({...d,odeur:parseInt(v.target.value)}),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[s.jsx("span",{children:"Ça va"}),s.jsxs("span",{className:"font-bold",children:[d.odeur,"/10"]}),s.jsx("span",{children:"Mortel 🤢"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{l(!1),u(null),f({nom:"",couleur:"#8B4513",taille:"MOYEN",odeur:5,dateCaca:new Date().toISOString().split("T")[0]})},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:"#8B4513"},children:c?"Modifier":"Créer"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Ma Collection de CACA Boudins"}),t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🚽"}),s.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Aucun CACA boudin enregistré"}),s.jsx("p",{className:"text-gray-500",children:'Cliquez sur "Nouveau CACA" pour commencer !'})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>s.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow",style:{borderColor:v.couleur+"40"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:v.nom}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>m(v),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(Ym,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Km,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Couleur:"}),s.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:v.couleur}})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Taille:"}),s.jsx("span",{className:"text-2xl",children:g(v.taille)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Odeur:"}),s.jsx("span",{className:"text-lg",children:x(v.odeur)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Date:"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["📅 ",v.dateCaca?new Date(v.dateCaca).toLocaleDateString("fr-FR"):"Non définie"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Créé le ",new Date(v.createdAt).toLocaleDateString("fr-FR")]})]})]},v.id))})]})]})})},Xr={async createPointage(t){try{return(await Ee.post("/pointage-heures",t)).data}catch(e){throw console.error("Erreur création pointage:",e),e}},async getPointages(t={}){try{const e=new URLSearchParams;return t.userId&&e.append("userId",t.userId),t.dateDebut&&e.append("dateDebut",t.dateDebut),t.dateFin&&e.append("dateFin",t.dateFin),t.lieuTravail&&e.append("lieuTravail",t.lieuTravail),(await Ee.get(`/pointage-heures?${e.toString()}`)).data}catch(e){throw console.error("Erreur récupération pointages:",e),e}},async getPointagesByPeriod(t,e){try{return(await Ee.get(`/pointage-heures/periode/${t}/${e}`)).data}catch(r){throw console.error("Erreur récupération pointages par période:",r),r}},async getPointage(t){try{return(await Ee.get(`/pointage-heures/${t}`)).data}catch(e){throw console.error("Erreur récupération pointage:",e),e}},async updatePointage(t,e){try{return(await Ee.patch(`/pointage-heures/${t}`,e)).data}catch(r){throw console.error("Erreur mise à jour pointage:",r),r}},async deletePointage(t){try{return(await Ee.delete(`/pointage-heures/${t}`)).data}catch(e){throw console.error("Erreur suppression pointage:",e),e}},async getStatistiquesUtilisateur(t,e,r){try{return(await Ee.get(`/pointage-heures/stats/utilisateur/${t}?dateDebut=${e}&dateFin=${r}`)).data}catch(n){throw console.error("Erreur récupération statistiques utilisateur:",n),n}},async getStatistiquesEquipe(t,e){try{return(await Ee.get(`/pointage-heures/stats/equipe?dateDebut=${t}&dateFin=${e}`)).data}catch(r){throw console.error("Erreur récupération statistiques équipe:",r),r}},TypePresence:{PRESENT:"PRESENT",ABSENT:"ABSENT",RETARD:"RETARD",CONGE:"CONGE",MALADIE:"MALADIE"},LieuTravail:{ATELIER_CAME:"ATELIER_CAME",ATELIER_HOSSEGOR:"ATELIER_HOSSEGOR",CHANTIER:"CHANTIER"},formatDate(t){return new Date(t).toISOString().split("T")[0]},formatDateDisplay(t){return new Date(t).toLocaleDateString("fr-FR")},getWeekStart(t){const e=new Date(t),r=e.getDay(),n=e.getDate()-r+(r===0?-6:1);return new Date(e.setDate(n))},getWeekEnd(t){const e=this.getWeekStart(t),r=new Date(e);return r.setDate(e.getDate()+6),r},getMonthStart(t){const e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),1)},getMonthEnd(t){const e=new Date(t);return new Date(e.getFullYear(),e.getMonth()+1,0)}},Cut=({currentDate:t,viewMode:e,pointages:r,users:n,onDateChange:a,onNavigate:i,onEditPointage:o,onNewPointage:l})=>{const[c,u]=y.useState(null),[d,f]=y.useState(null),A=()=>e==="semaine"?h():m(),h=()=>{const _=Xr.getWeekStart(t),k=[];for(let D=0;D<7;D++){const S=new Date(_);S.setDate(_.getDate()+D),k.push(S)}return k},m=()=>{const _=Xr.getMonthStart(t);Xr.getMonthEnd(t);const k=[],D=new Date(_),S=D.getDay(),F=D.getDate()-S+(S===0?-6:1);D.setDate(F);for(let M=0;M<6;M++){const R=[];for(let U=0;U<7;U++){const z=new Date(D);z.setDate(D.getDate()+M*7+U),R.push(z)}k.push(R)}return k},p=_=>{const k=Xr.formatDate(_);return r.filter(D=>Xr.formatDate(D.datePointage)===k)},g=_=>{const k=n.find(D=>D.id===_);return(k==null?void 0:k.couleurPlanning)||"#3B82F6"},x=_=>p(_).reduce((D,S)=>D+S.heuresTravaillees,0),v=_=>({PRESENT:"bg-green-500",ABSENT:"bg-red-500",RETARD:"bg-orange-500",CONGE:"bg-blue-500",MALADIE:"bg-purple-500"})[_]||"bg-gray-500",b=_=>({ATELIER_CAME:"🏭",ATELIER_HOSSEGOR:"🏢",CHANTIER:"🚧"})[_]||"📍",C=_=>{const k=new Date;return _.toDateString()===k.toDateString()},j=_=>_.getMonth()===t.getMonth(),w=_=>{f(_),a&&a(_)},N=_=>{l&&l({datePointage:Xr.formatDate(_)})};if(e==="semaine"){const _=A();return s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-4 mb-4",children:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"].map((k,D)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:k}),s.jsx("div",{className:`text-2xl font-bold ${C(_[D])?"text-blue-600":"text-gray-900"}`,children:_[D].getDate()}),s.jsx("div",{className:"text-xs text-gray-400",children:_[D].toLocaleDateString("fr-FR",{month:"short"})})]},k))}),s.jsx("div",{className:"grid grid-cols-7 gap-4",children:_.map((k,D)=>{const S=p(k),F=x(k);return s.jsxs("div",{className:`min-h-[200px] border-2 rounded-xl p-3 transition-all cursor-pointer ${C(k)?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onMouseEnter:()=>u(k),onMouseLeave:()=>u(null),onClick:()=>w(k),children:[F>0&&s.jsxs("div",{className:"mb-2 p-2 bg-green-100 rounded-lg",children:[s.jsxs("div",{className:"flex items-center text-green-700 text-sm font-medium",children:[s.jsx(wn,{className:"w-4 h-4 mr-1"}),F,"h"]}),s.jsxs("div",{className:"text-xs text-green-600",children:[S.length," pointage",S.length>1?"s":""]})]}),s.jsxs("div",{className:"space-y-2",children:[S.slice(0,3).map(M=>{const R=n.find(U=>U.id===M.userId);return s.jsxs("div",{className:"p-2 bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:U=>{U.stopPropagation(),o&&o(M)},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g(M.userId)}}),s.jsxs("span",{className:"text-xs font-medium text-gray-900 truncate",children:[R==null?void 0:R.prenom," ",R==null?void 0:R.nom]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full ${v(M.typePresence)}`})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-600",children:[M.heuresTravaillees,"h"]}),s.jsx("span",{className:"text-xs",children:b(M.lieuTravail)})]})]},M.id)}),S.length>3&&s.jsxs("div",{className:"text-xs text-gray-500 text-center py-1",children:["+",S.length-3," autre",S.length-3>1?"s":""]})]}),c&&c.toDateString()===k.toDateString()&&s.jsxs("button",{onClick:M=>{M.stopPropagation(),N(k)},className:"mt-2 w-full p-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center",children:[s.jsx(Jn,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-xs",children:"Ajouter"})]})]},D)})})]})}const E=A();return s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(_=>s.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:_},_))}),s.jsx("div",{className:"space-y-2",children:E.map((_,k)=>s.jsx("div",{className:"grid grid-cols-7 gap-2",children:_.map((D,S)=>{const F=p(D),M=x(D),R=j(D);return s.jsxs("div",{className:`min-h-[120px] border rounded-lg p-2 transition-all cursor-pointer ${C(D)?"border-blue-300 bg-blue-50":R?"border-gray-200 hover:border-gray-300 hover:bg-gray-50":"border-gray-100 bg-gray-50 text-gray-400"}`,onMouseEnter:()=>u(D),onMouseLeave:()=>u(null),onClick:()=>w(D),children:[s.jsx("div",{className:`text-sm font-medium mb-1 ${C(D)?"text-blue-600":R?"text-gray-900":"text-gray-400"}`,children:D.getDate()}),R&&M>0&&s.jsxs("div",{className:"mb-1",children:[s.jsxs("div",{className:"text-xs text-green-600 font-medium mb-1",children:[M,"h"]}),s.jsxs("div",{className:"space-y-1",children:[F.slice(0,3).map(U=>{const z=n.find(Q=>Q.id===U.userId);return s.jsxs("div",{className:"flex items-center gap-1",title:`${z==null?void 0:z.prenom} ${z==null?void 0:z.nom} - ${U.heuresTravaillees}h - ${U.lieuTravail}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${v(U.typePresence)}`}),s.jsxs("span",{className:"text-xs text-gray-700 truncate",children:[z==null?void 0:z.prenom," ",z==null?void 0:z.nom," ",U.heuresTravaillees,"h - ",U.lieuTravail==="ATELIER_CAME"?"Came":U.lieuTravail==="ATELIER_HOSSEGOR"?"Hossegor":"Chantier"]})]},U.id)}),F.length>3&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",F.length-3]})]})]}),R&&c&&c.toDateString()===D.toDateString()&&s.jsx("button",{onClick:U=>{U.stopPropagation(),N(D)},className:"w-full p-1 border border-dashed border-gray-300 rounded text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center",children:s.jsx(Jn,{className:"w-3 h-3"})})]},S)})},k))})]})},Nut=({currentDate:t,viewMode:e,selectedUserId:r,selectedLieu:n})=>{const[a,i]=y.useState(null),[o,l]=y.useState([]),[c,u]=y.useState(!1);y.useEffect(()=>{d()},[t,e,r,n]);const d=async()=>{try{u(!0);let m,p;if(e==="semaine"?(m=Xr.formatDate(Xr.getWeekStart(t)),p=Xr.formatDate(Xr.getWeekEnd(t))):(m=Xr.formatDate(Xr.getMonthStart(t)),p=Xr.formatDate(Xr.getMonthEnd(t))),r){const g=await Xr.getStatistiquesUtilisateur(r,m,p);i(g),l([])}else{const g=await Xr.getStatistiquesEquipe(m,p);l(g);const x={totalHeures:g.reduce((v,b)=>v+b.totalHeures,0),joursPresents:g.reduce((v,b)=>v+b.joursPresents,0),joursAbsents:g.reduce((v,b)=>v+b.joursAbsents,0),retards:g.reduce((v,b)=>v+b.retards,0),moyenneHeuresParJour:g.length>0?g.reduce((v,b)=>v+b.moyenneHeuresParJour,0)/g.length:0};i(x)}}catch(m){console.error("Erreur chargement statistiques:",m)}finally{u(!1)}},f=()=>{if(e==="semaine"){const m=Xr.getWeekStart(t),p=Xr.getWeekEnd(t);return`Semaine du ${m.toLocaleDateString("fr-FR")} au ${p.toLocaleDateString("fr-FR")}`}else return t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})},A=(m,p)=>{const g=m+p;return g>0?m/g*100:0},h=(m,p)=>{switch(p){case"heures":return m>=35?"text-green-600 bg-green-100":m>=25?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100";case"presence":return m>=95?"text-green-600 bg-green-100":m>=80?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100";case"retards":return m===0?"text-green-600 bg-green-100":m<=2?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return c?s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((m,p)=>s.jsx("div",{className:"h-20 bg-gray-200 rounded"},p))})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r?"Statistiques individuelles":"Statistiques d'équipe"}),s.jsx("p",{className:"text-sm text-gray-600",children:f()})]}),s.jsx(_s,{className:"w-6 h-6 text-gray-400"})]}),a&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Total heures"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a.totalHeures.toFixed(1),"h"]})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(wn,{className:"w-6 h-6 text-white"})})]}),s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(a.totalHeures,"heures")}`,children:[a.moyenneHeuresParJour.toFixed(1),"h/jour"]})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Jours présents"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:a.joursPresents})]}),s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:s.jsx(Gr,{className:"w-6 h-6 text-white"})})]}),s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(A(a.joursPresents,a.joursAbsents),"presence")}`,children:[A(a.joursPresents,a.joursAbsents).toFixed(1),"% présence"]})})]}),s.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-orange-600 text-sm font-medium",children:"Jours absents"}),s.jsx("p",{className:"text-2xl font-bold text-orange-900",children:a.joursAbsents})]}),s.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center",children:s.jsx(Ls,{className:"w-6 h-6 text-white"})})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Retards"}),s.jsx("p",{className:"text-2xl font-bold text-red-900",children:a.retards})]}),s.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center",children:s.jsx(Dm,{className:"w-6 h-6 text-white"})})]}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(a.retards,"retards")}`,children:a.retards===0?"Excellent":a.retards<=2?"Correct":"À améliorer"})})]})]})]}),!r&&o.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Détail par employé"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Employé"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Total heures"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Jours présents"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Jours absents"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Retards"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Moyenne/jour"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Présence"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:s.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[m.user.prenom[0],m.user.nom[0]]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[m.user.prenom," ",m.user.nom]}),s.jsx("div",{className:"text-sm text-gray-500",children:m.user.statutContractuel==="SALARIE"?"Salarié":"Sous-traitant"})]})]})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsxs("span",{className:"font-medium text-gray-900",children:[m.totalHeures.toFixed(1),"h"]})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsx("span",{className:"text-green-600 font-medium",children:m.joursPresents})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsx("span",{className:"text-orange-600 font-medium",children:m.joursAbsents})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsx("span",{className:"text-red-600 font-medium",children:m.retards})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsxs("span",{className:"text-gray-900 font-medium",children:[m.moyenneHeuresParJour.toFixed(1),"h"]})}),s.jsx("td",{className:"py-3 px-4 text-right",children:s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(A(m.joursPresents,m.joursAbsents),"presence")}`,children:[A(m.joursPresents,m.joursAbsents).toFixed(1),"%"]})})]},m.user.id))})]})})]})]})},Sut=()=>{const[t,e]=y.useState(new Date),[r,n]=y.useState("semaine"),[a,i]=y.useState("calendrier"),[o,l]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState(!1),[A,h]=y.useState(!1),[m,p]=y.useState(null),[g,x]=y.useState(""),[v,b]=y.useState(""),[C,j]=y.useState({userId:"",datePointage:"",heuresTravaillees:8,typePresence:"PRESENT",lieuTravail:"ATELIER_CAME",heureDebut:"08:00",heureFin:"17:00",tempsPauseMinutes:60,commentaire:""});y.useEffect(()=>{w(),N()},[t,r,g,v]);const w=async()=>{try{const H=await qve.getUsers(),q=Array.isArray(H)?H:H.users||[];u(q.filter(X=>X.actif&&!X.supprime))}catch(H){console.error("Erreur chargement utilisateurs:",H)}},N=async()=>{try{f(!0);let H,q;r==="semaine"?(H=Xr.formatDate(Xr.getWeekStart(t)),q=Xr.formatDate(Xr.getWeekEnd(t))):(H=Xr.formatDate(Xr.getMonthStart(t)),q=Xr.formatDate(Xr.getMonthEnd(t)));const X={dateDebut:H,dateFin:q};g&&(X.userId=g),v&&(X.lieuTravail=v);const $=await Xr.getPointages(X);l($)}catch(H){console.error("Erreur chargement pointages:",H)}finally{f(!1)}},E=async H=>{H.preventDefault();try{f(!0),m?await Xr.updatePointage(m.id,C):await Xr.createPointage(C),h(!1),p(null),D(),await N()}catch(q){console.error("Erreur sauvegarde pointage:",q),alert("Erreur lors de la sauvegarde du pointage")}finally{f(!1)}},_=H=>{p(H),j({userId:H.userId,datePointage:Xr.formatDate(H.datePointage),heuresTravaillees:H.heuresTravaillees,typePresence:H.typePresence,lieuTravail:H.lieuTravail,heureDebut:H.heureDebut||"08:00",heureFin:H.heureFin||"17:00",tempsPauseMinutes:H.tempsPauseMinutes||60,commentaire:H.commentaire||""}),h(!0)},k=async H=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce pointage ?"))try{await Xr.deletePointage(H),await N()}catch(q){console.error("Erreur suppression pointage:",q),alert("Erreur lors de la suppression du pointage")}},D=()=>{const H={userId:"",datePointage:Xr.formatDate(new Date),typePresence:"PRESENT",lieuTravail:"ATELIER_CAME",heureDebut:"08:00",heureFin:"17:00",tempsPauseMinutes:60,commentaire:""},q=S(H.heureDebut,H.heureFin,H.tempsPauseMinutes);j({...H,heuresTravaillees:q})},S=(H,q,X=0)=>{if(!H||!q)return 0;const[$,K]=H.split(":").map(Number),[se,Z]=q.split(":").map(Number),ie=$*60+K;let ue=se*60+Z-ie;return ue<0&&(ue+=24*60),ue-=X,Math.max(0,Math.round(ue/60*100)/100)},F=(H={})=>{p(null),D(),H.datePointage&&j(q=>({...q,...H})),h(!0)},M=H=>{const q=new Date(t);r==="semaine"?q.setDate(q.getDate()+(H==="next"?7:-7)):q.setMonth(q.getMonth()+(H==="next"?1:-1)),e(q)},R=H=>({PRESENT:"Présent",ABSENT:"Absent",RETARD:"Retard",CONGE:"Congé",MALADIE:"Maladie"})[H]||H,U=H=>({PRESENT:"text-green-700 bg-green-100",ABSENT:"text-red-700 bg-red-100",RETARD:"text-orange-700 bg-orange-100",CONGE:"text-blue-700 bg-blue-100",MALADIE:"text-purple-700 bg-purple-100"})[H]||"text-gray-700 bg-gray-100",z=H=>({ATELIER_CAME:"Atelier Came",ATELIER_HOSSEGOR:"Atelier Hossegor",CHANTIER:"Chantier"})[H]||H,Q=()=>{if(r==="semaine"){const H=Xr.getWeekStart(t),q=Xr.getWeekEnd(t);return`Semaine du ${H.toLocaleDateString("fr-FR")} au ${q.toLocaleDateString("fr-FR")}`}else return t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})};return s.jsxs("div",{className:"min-h-screen bg-stone-50 p-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(wn,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Heures"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Suivi des heures de travail de l'équipe"})]})]}),s.jsxs("button",{onClick:F,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[s.jsx(Jn,{className:"w-5 h-5 mr-2"}),"Nouveau Pointage"]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1",children:[s.jsxs("button",{onClick:()=>i("calendrier"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center ${a==="calendrier"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Calendrier"]}),s.jsxs("button",{onClick:()=>i("liste"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center ${a==="liste"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(UG,{className:"w-4 h-4 mr-2"}),"Liste"]}),s.jsxs("button",{onClick:()=>i("stats"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center ${a==="stats"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(_G,{className:"w-4 h-4 mr-2"}),"Statistiques"]})]}),a!=="stats"&&s.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>n("semaine"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="semaine"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Semaine"}),s.jsx("button",{onClick:()=>n("mois"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="mois"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Mois"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>M("prev"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(wx,{className:"w-5 h-5"})}),s.jsx("div",{className:"text-center min-w-[200px]",children:s.jsx("h3",{className:"font-semibold text-gray-900",children:Q()})}),s.jsx("button",{onClick:()=>M("next"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(jx,{className:"w-5 h-5"})})]}),s.jsx("button",{onClick:()=>e(new Date),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-medium hover:bg-blue-200 transition-colors",children:"Aujourd'hui"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ji,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:g,onChange:H=>x(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Tous les employés"}),c.map(H=>s.jsxs("option",{value:H.id,children:[H.prenom," ",H.nom]},H.id))]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Au,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:v,onChange:H=>b(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Tous les lieux"}),s.jsx("option",{value:"ATELIER_CAME",children:"Atelier Came"}),s.jsx("option",{value:"ATELIER_HOSSEGOR",children:"Atelier Hossegor"}),s.jsx("option",{value:"CHANTIER",children:"Chantier"})]})]})]})]})}),a==="calendrier"&&s.jsx(Cut,{currentDate:t,viewMode:r,pointages:o,users:c,onDateChange:e,onNavigate:M,onEditPointage:_,onNewPointage:F}),a==="stats"&&s.jsx(Nut,{currentDate:t,viewMode:r,selectedUserId:g,selectedLieu:v}),a==="liste"&&s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200",children:d?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):o.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(_s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun pointage"}),s.jsx("p",{className:"text-gray-600",children:"Aucun pointage trouvé pour cette période"})]}):s.jsx("div",{className:"overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employé"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Présence"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lieu"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commentaire"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(H=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:s.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[H.user.prenom[0],H.user.nom[0]]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[H.user.prenom," ",H.user.nom]}),s.jsx("div",{className:"text-sm text-gray-500",children:H.user.statutContractuel==="SALARIE"?"Salarié":"Sous-traitant"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Xr.formatDateDisplay(H.datePointage)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[H.heuresTravaillees,"h"]}),H.heureDebut&&H.heureFin&&s.jsxs("div",{className:"text-xs text-gray-500",children:[H.heureDebut," - ",H.heureFin]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${U(H.typePresence)}`,children:R(H.typePresence)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(H.lieuTravail)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:H.commentaire||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>_(H),className:"text-blue-600 hover:text-blue-700 p-1 rounded",children:s.jsx(Cx,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(H.id),className:"text-red-600 hover:text-red-700 p-1 rounded",children:s.jsx(Zn,{className:"w-4 h-4"})})]})})]},H.id))})]})})}),A&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m?"Modifier le Pointage":"Nouveau Pointage"}),s.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded",children:s.jsx(ls,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:E,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employé"}),s.jsxs("select",{value:C.userId,onChange:H=>j({...C,userId:H.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Sélectionner un employé"}),c.map(H=>s.jsxs("option",{value:H.id,children:[H.prenom," ",H.nom," - ",H.statutContractuel==="SALARIE"?"Salarié":"Sous-traitant"]},H.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),s.jsx("input",{type:"date",value:C.datePointage,onChange:H=>j({...C,datePointage:H.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure début"}),s.jsx("input",{type:"time",value:C.heureDebut,onChange:H=>{const q={...C,heureDebut:H.target.value},X=S(q.heureDebut,q.heureFin,q.tempsPauseMinutes);j({...q,heuresTravaillees:X})},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure fin"}),s.jsx("input",{type:"time",value:C.heureFin,onChange:H=>{const q={...C,heureFin:H.target.value},X=S(q.heureDebut,q.heureFin,q.tempsPauseMinutes);j({...q,heuresTravaillees:X})},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heures travaillées"}),s.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:C.heuresTravaillees,onChange:H=>j({...C,heuresTravaillees:parseFloat(H.target.value)}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pause (min)"}),s.jsx("input",{type:"number",min:"0",max:"480",value:C.tempsPauseMinutes,onChange:H=>{const q={...C,tempsPauseMinutes:parseInt(H.target.value)||0},X=S(q.heureDebut,q.heureFin,q.tempsPauseMinutes);j({...q,heuresTravaillees:X})},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de présence"}),s.jsxs("select",{value:C.typePresence,onChange:H=>j({...C,typePresence:H.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"PRESENT",children:"Présent"}),s.jsx("option",{value:"ABSENT",children:"Absent"}),s.jsx("option",{value:"RETARD",children:"Retard"}),s.jsx("option",{value:"CONGE",children:"Congé"}),s.jsx("option",{value:"MALADIE",children:"Maladie"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu de travail"}),s.jsxs("select",{value:C.lieuTravail,onChange:H=>j({...C,lieuTravail:H.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"ATELIER_CAME",children:"Atelier Came"}),s.jsx("option",{value:"ATELIER_HOSSEGOR",children:"Atelier Hossegor"}),s.jsx("option",{value:"CHANTIER",children:"Chantier"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commentaire"}),s.jsx("textarea",{value:C.commentaire,onChange:H=>j({...C,commentaire:H.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Commentaire optionnel..."})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gr,{className:"w-4 h-4 mr-2"}),m?"Modifier":"Créer"]})})]})]})]})})})]})},X9=({children:t})=>{const{isAuthenticated:e,loading:r}=Ya();return r?s.jsx("div",{children:"Chargement..."}):e?t:s.jsx(p2,{to:"/auth/login"})},$j=({children:t})=>{const{isAuthenticated:e}=Ya();return e?s.jsx(p2,{to:"/"}):t},Eut=()=>s.jsxs(jae,{children:[s.jsxs(Tt,{path:"/auth",element:s.jsx(HG,{}),children:[s.jsx(Tt,{path:"login",element:s.jsx($j,{children:s.jsx(k0e,{})})}),s.jsx(Tt,{path:"register",element:s.jsx($j,{children:s.jsx(J0e,{})})}),s.jsx(Tt,{path:"forgot-password",element:s.jsx($j,{children:s.jsx(dxe,{})})}),s.jsx(Tt,{path:"reset-password/:token",element:s.jsx($j,{children:s.jsx(hxe,{})})}),s.jsx(Tt,{path:"verify-email/:token",element:s.jsx(Axe,{})})]}),s.jsxs(Tt,{path:"/",element:s.jsx(X9,{children:s.jsx(P0e,{})}),children:[s.jsx(Tt,{index:!0,element:s.jsx(B6,{})}),s.jsx(Tt,{path:"dashboard",element:s.jsx(Kge,{})}),s.jsxs(Tt,{path:"plannings",children:[s.jsx(Tt,{index:!0,element:s.jsx(ult,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(D9,{})}),s.jsx(Tt,{path:":id",element:s.jsx(D9,{})})]}),s.jsx(Tt,{path:"planning-equipe",element:s.jsx(wut,{})}),s.jsxs(Tt,{path:"taches",children:[s.jsx(Tt,{index:!0,element:s.jsx(Kct,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(G9,{})}),s.jsx(Tt,{path:":id",element:s.jsx(G9,{})})]}),s.jsxs(Tt,{path:"collaborateurs",children:[s.jsx(Tt,{index:!0,element:s.jsx(Yct,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(q9,{})}),s.jsx(Tt,{path:":id",element:s.jsx(q9,{})})]}),s.jsxs(Tt,{path:"users",children:[s.jsx(Tt,{index:!0,element:s.jsx(qot,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(T9,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(T9,{})})]}),s.jsx(Tt,{path:"chantiers",element:s.jsx(Vct,{})}),s.jsxs(Tt,{path:"affaires",children:[s.jsx(Tt,{index:!0,element:s.jsx(B6,{})}),s.jsx(Tt,{path:"apple",element:s.jsx(Yve,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(_6,{})}),s.jsx(Tt,{path:":id",element:s.jsx($Ge,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(_6,{})}),s.jsx(Tt,{path:":id/estimation-achats",element:s.jsx(Uet,{})}),s.jsx(Tt,{path:":id/achats-unified",element:s.jsx(Qet,{})}),s.jsx(Tt,{path:"resultats",element:s.jsx(zet,{})}),s.jsx(Tt,{path:"resultats-simple",element:s.jsx(Vet,{})})]}),s.jsxs(Tt,{path:"devis",children:[s.jsx(Tt,{index:!0,element:s.jsx(Wet,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(jQ,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(jQ,{})})]}),s.jsxs(Tt,{path:"achats",children:[s.jsx(Tt,{index:!0,element:s.jsx(qet,{})}),s.jsx(Tt,{path:"factures/nouveau",element:s.jsx(NQ,{})}),s.jsx(Tt,{path:"factures/:id/modifier",element:s.jsx(NQ,{})}),s.jsx(Tt,{path:"factures",element:s.jsx(zte,{})}),s.jsx(Tt,{path:"bdc",element:s.jsx(S_,{})}),s.jsx(Tt,{path:"rapprochement",element:s.jsx(Vte,{})})]}),s.jsxs(Tt,{path:"bdc",children:[s.jsx(Tt,{index:!0,element:s.jsx(S_,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(SQ,{})}),s.jsx(Tt,{path:":id",element:s.jsx(Zet,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(SQ,{})})]}),s.jsxs(Tt,{path:"fournisseurs",children:[s.jsx(Tt,{index:!0,element:s.jsx(Get,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(CQ,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(CQ,{})})]}),s.jsx(Tt,{path:"frais-generaux",element:s.jsx(hut,{})}),s.jsxs(Tt,{path:"opti-coupe",children:[s.jsx(Tt,{index:!0,element:s.jsx(mut,{})}),s.jsx(Tt,{path:"panneaux",element:s.jsx(put,{})}),s.jsx(Tt,{path:"projets",element:s.jsx(gut,{})}),s.jsx(Tt,{path:"optimisation",element:s.jsx(xut,{})}),s.jsx(Tt,{path:"resultats",element:s.jsx(vut,{})}),s.jsx(Tt,{path:"debit",element:s.jsx(but,{})})]}),s.jsx(Tt,{path:"pointages",element:s.jsx(Hot,{})}),s.jsx(Tt,{path:"gestion-heures",element:s.jsx(Sut,{})}),s.jsx(Tt,{path:"caca-boudin",element:s.jsx(jut,{})}),s.jsxs(Tt,{path:"pointage",children:[s.jsx(Tt,{path:"calendrier",element:s.jsx(Tne,{})}),s.jsx(Tt,{path:"saisie",element:s.jsx(B_,{})}),s.jsx(Tt,{path:"saisie/:id",element:s.jsx(B_,{})}),s.jsx(Tt,{path:"validation",element:s.jsx(Mne,{})}),s.jsx(Tt,{path:"statistiques",element:s.jsx(Dne,{})})]}),s.jsx(Tt,{path:"parametres",element:s.jsx(yxe,{})}),s.jsxs(Tt,{path:"parametres-globaux",children:[s.jsx(Tt,{index:!0,element:s.jsx(Bxe,{})}),s.jsx(Tt,{path:"nouveau",element:s.jsx(g6,{})}),s.jsx(Tt,{path:":id/modifier",element:s.jsx(g6,{})})]}),s.jsx(Tt,{path:"parametres-entreprise",element:s.jsx(Txe,{})}),s.jsx(Tt,{path:"analyses-avancees",element:s.jsx(tlt,{})}),s.jsx(Tt,{path:"migration",element:s.jsx(rlt,{})}),s.jsx(Tt,{path:"notifications",element:s.jsx(nlt,{})}),s.jsx(Tt,{path:"profil",element:s.jsx(p2,{to:"/parametres",replace:!0})}),s.jsx(Tt,{path:"securite",element:s.jsx(p2,{to:"/parametres",replace:!0})}),s.jsx(Tt,{path:"planification",element:s.jsx(Wct,{})}),s.jsx(Tt,{path:"ressources",element:s.jsx(Gct,{})}),s.jsx(Tt,{path:"temps-passe",element:s.jsx(qct,{})}),s.jsx(Tt,{path:"firebase-test",element:s.jsx(eut,{})}),s.jsx(Tt,{path:"claude-test",element:s.jsx(nut,{})}),s.jsx(Tt,{path:"claude",element:s.jsx(aut,{})}),s.jsx(Tt,{path:"pdf-diagnostic",element:s.jsx(tut,{})}),s.jsx(Tt,{path:"test-planning",element:s.jsx(iut,{})}),s.jsx(Tt,{path:"test-couleurs-planning-equipe",element:s.jsx(lut,{})}),s.jsx(Tt,{path:"test-planning-affaire",element:s.jsx(dut,{})}),s.jsx(Tt,{path:"test-frais-generaux",element:s.jsx(fut,{})}),s.jsx(Tt,{path:"planning-interactif",element:s.jsx(Hct,{})})]}),s.jsx(Tt,{path:"/planning-fullpage",element:s.jsx(X9,{children:s.jsx(zct,{children:s.jsx(Qct,{})})})}),s.jsx(Tt,{path:"*",element:s.jsx(Yge,{})})]});if(typeof window<"u"){if(!window.PropTypes){const t=e=>{const r=(a,i,o,l)=>i[o]===void 0&&a?(console.warn(`La prop "${o}" est obligatoire pour le composant "${l||"UnknownComponent"}", mais n'est pas fournie.`),new Error(`La prop "${o}" est obligatoire pour le composant "${l||"UnknownComponent"}", mais n'est pas fournie.`)):(i[o],null),n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n};window.PropTypes={string:t(),number:t(),bool:t(),func:t(),object:t(),array:t(),any:t(),node:t(),element:t(),symbol:t(),arrayOf:()=>t(),objectOf:()=>t(),instanceOf:()=>t(),oneOf:()=>t(),oneOfType:()=>t(),shape:()=>t(),exact:()=>t()},console.log("PropTypes polyfill créé avec succès")}typeof PropTypes>"u"&&window.PropTypes&&(window.PropTypes=window.PropTypes)}hp.register(ew,tw,l0,bu,c0,xh,K3,YE,KE,XXe);const But=console.warn;console.warn=function(t,...e){if(!(typeof t=="string"&&(t.includes("React Router Future Flag Warning")||t.includes("startTransition"))))return But.apply(console,[t,...e])};const Tut=console.error;console.error=function(t,...e){if(!(typeof t=="string"&&(t.includes("Failed to parse source for import analysis")||t.includes("Failed prop type")||t.includes("TransitionGroup")||t.includes("Transition:")||t.includes("Cannot read properties of undefined"))))return Tut.apply(console,[t,...e])};window.addEventListener("error",t=>{if(t.message&&(t.message.includes("prop type")||t.message.includes("PropTypes")||t.message.includes("Transition")||t.message.includes("apply")))return t.preventDefault(),!0});E4.createRoot(document.getElementById("root")).render(s.jsx(le.StrictMode,{children:s.jsx(Cae,{children:s.jsx($me,{children:s.jsx(qge,{children:s.jsx(Hme,{children:s.jsxs(kz,{children:[s.jsx(of,{}),s.jsx(Eut,{})]})})})})})}));export{In as _,oGe as r};
